const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestingView-BIQXO9L1.js","assets/TestingView-C0IjsJoX.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function gh(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Wt={},$l=[],Os=()=>{},Nk=()=>!1,Sd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),wv=t=>t.startsWith("onUpdate:"),hr=Object.assign,Cv=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Mk=Object.prototype.hasOwnProperty,rr=(t,e)=>Mk.call(t,e),ut=Array.isArray,jl=t=>bc(t)==="[object Map]",Qo=t=>bc(t)==="[object Set]",Cy=t=>bc(t)==="[object Date]",Lk=t=>bc(t)==="[object RegExp]",Et=t=>typeof t=="function",yr=t=>typeof t=="string",ia=t=>typeof t=="symbol",ur=t=>t!==null&&typeof t=="object",Iv=t=>(ur(t)||Et(t))&&Et(t.then)&&Et(t.catch),lS=Object.prototype.toString,bc=t=>lS.call(t),Bk=t=>bc(t).slice(8,-1),vh=t=>bc(t)==="[object Object]",kv=t=>yr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Hl=gh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xh=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Uk=/-(\w)/g,Tn=xh(t=>t.replace(Uk,(e,r)=>r?r.toUpperCase():"")),Vk=/\B([A-Z])/g,ps=xh(t=>t.replace(Vk,"-$1").toLowerCase()),Td=xh(t=>t.charAt(0).toUpperCase()+t.slice(1)),gu=xh(t=>t?`on${Td(t)}`:""),ts=(t,e)=>!Object.is(t,e),Gl=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},fg=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},m0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},g0=t=>{const e=yr(t)?Number(t):NaN;return isNaN(e)?t:e};let Iy;const yh=()=>Iy||(Iy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),$k="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",jk=gh($k);function _n(t){if(ut(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=yr(n)?zk(n):_n(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(yr(t)||ur(t))return t}const Hk=/;(?![^(]*\))/g,Gk=/:([^]+)/,Wk=/\/\*[^]*?\*\//g;function zk(t){const e={};return t.replace(Wk,"").split(Hk).forEach(r=>{if(r){const n=r.split(Gk);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function et(t){let e="";if(yr(t))e=t;else if(ut(t))for(let r=0;r<t.length;r++){const n=et(t[r]);n&&(e+=n+" ")}else if(ur(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function Kk(t){if(!t)return null;let{class:e,style:r}=t;return e&&!yr(e)&&(t.class=et(e)),r&&(t.style=_n(r)),t}const qk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xk=gh(qk);function cS(t){return!!t||t===""}function Yk(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Zi(t[n],e[n]);return r}function Zi(t,e){if(t===e)return!0;let r=Cy(t),n=Cy(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=ia(t),n=ia(e),r||n)return t===e;if(r=ut(t),n=ut(e),r||n)return r&&n?Yk(t,e):!1;if(r=ur(t),n=ur(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Zi(t[a],e[a]))return!1}}return String(t)===String(e)}function Eh(t,e){return t.findIndex(r=>Zi(r,e))}const uS=t=>!!(t&&t.__v_isRef===!0),te=t=>yr(t)?t:t==null?"":ut(t)||ur(t)&&(t.toString===lS||!Et(t.toString))?uS(t)?te(t.value):JSON.stringify(t,dS,2):String(t),dS=(t,e)=>uS(e)?dS(t,e.value):jl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[Ip(n,i)+" =>"]=s,r),{})}:Qo(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Ip(r))}:ia(e)?Ip(e):ur(e)&&!ut(e)&&!vh(e)?String(e):e,Ip=(t,e="")=>{var r;return ia(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nn;class Dv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nn,!e&&Nn&&(this.index=(Nn.scopes||(Nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=Nn;try{return Nn=this,e()}finally{Nn=r}}}on(){++this._on===1&&(this.prevScope=Nn,Nn=this)}off(){this._on>0&&--this._on===0&&(Nn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Pv(t){return new Dv(t)}function Fv(){return Nn}function fS(t,e=!1){Nn&&Nn.cleanups.push(t)}let mr;const kp=new WeakSet;class Ku{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nn&&Nn.active&&Nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,kp.has(this)&&(kp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pS(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ky(this),mS(this);const e=mr,r=ta;mr=this,ta=!0;try{return this.fn()}finally{gS(this),mr=e,ta=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Nv(e);this.deps=this.depsTail=void 0,ky(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?kp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hg(this)&&this.run()}get dirty(){return hg(this)}}let hS=0,vu,xu;function pS(t,e=!1){if(t.flags|=8,e){t.next=xu,xu=t;return}t.next=vu,vu=t}function Rv(){hS++}function Ov(){if(--hS>0)return;if(xu){let e=xu;for(xu=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;vu;){let e=vu;for(vu=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function mS(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function gS(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),Nv(n),Qk(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function hg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(vS(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function vS(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===qu)||(t.globalVersion=qu,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!hg(t))))return;t.flags|=2;const e=t.dep,r=mr,n=ta;mr=t,ta=!0;try{mS(t);const s=t.fn(t._value);(e.version===0||ts(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{mr=r,ta=n,gS(t),t.flags&=-3}}function Nv(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)Nv(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function Qk(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function Jk(t,e){t.effect instanceof Ku&&(t=t.effect.fn);const r=new Ku(t);e&&hr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function Zk(t){t.effect.stop()}let ta=!0;const xS=[];function ai(){xS.push(ta),ta=!1}function ii(){const t=xS.pop();ta=t===void 0?!0:t}function ky(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=mr;mr=void 0;try{e()}finally{mr=r}}}let qu=0;class eD{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _h{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!mr||!ta||mr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==mr)r=this.activeLink=new eD(mr,this),mr.deps?(r.prevDep=mr.depsTail,mr.depsTail.nextDep=r,mr.depsTail=r):mr.deps=mr.depsTail=r,yS(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=mr.depsTail,r.nextDep=void 0,mr.depsTail.nextDep=r,mr.depsTail=r,mr.deps===r&&(mr.deps=n)}return r}trigger(e){this.version++,qu++,this.notify(e)}notify(e){Rv();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Ov()}}}function yS(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)yS(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const v0=new WeakMap,Io=Symbol(""),pg=Symbol(""),Xu=Symbol("");function Bn(t,e,r){if(ta&&mr){let n=v0.get(t);n||v0.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new _h),s.map=n,s.key=r),s.track()}}function Wa(t,e,r,n,s,i){const a=v0.get(t);if(!a){qu++;return}const o=l=>{l&&l.trigger()};if(Rv(),e==="clear")a.forEach(o);else{const l=ut(t),c=l&&kv(r);if(l&&r==="length"){const u=Number(n);a.forEach((d,f)=>{(f==="length"||f===Xu||!ia(f)&&f>=u)&&o(d)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(Xu)),e){case"add":l?c&&o(a.get("length")):(o(a.get(Io)),jl(t)&&o(a.get(pg)));break;case"delete":l||(o(a.get(Io)),jl(t)&&o(a.get(pg)));break;case"set":jl(t)&&o(a.get(Io));break}}Ov()}function tD(t,e){const r=v0.get(t);return r&&r.get(e)}function yl(t){const e=Ht(t);return e===t?e:(Bn(e,"iterate",Xu),Ts(t)?e:e.map(bn))}function bh(t){return Bn(t=Ht(t),"iterate",Xu),t}const rD={__proto__:null,[Symbol.iterator](){return Dp(this,Symbol.iterator,bn)},concat(...t){return yl(this).concat(...t.map(e=>ut(e)?yl(e):e))},entries(){return Dp(this,"entries",t=>(t[1]=bn(t[1]),t))},every(t,e){return ja(this,"every",t,e,void 0,arguments)},filter(t,e){return ja(this,"filter",t,e,r=>r.map(bn),arguments)},find(t,e){return ja(this,"find",t,e,bn,arguments)},findIndex(t,e){return ja(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ja(this,"findLast",t,e,bn,arguments)},findLastIndex(t,e){return ja(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ja(this,"forEach",t,e,void 0,arguments)},includes(...t){return Pp(this,"includes",t)},indexOf(...t){return Pp(this,"indexOf",t)},join(t){return yl(this).join(t)},lastIndexOf(...t){return Pp(this,"lastIndexOf",t)},map(t,e){return ja(this,"map",t,e,void 0,arguments)},pop(){return Gc(this,"pop")},push(...t){return Gc(this,"push",t)},reduce(t,...e){return Dy(this,"reduce",t,e)},reduceRight(t,...e){return Dy(this,"reduceRight",t,e)},shift(){return Gc(this,"shift")},some(t,e){return ja(this,"some",t,e,void 0,arguments)},splice(...t){return Gc(this,"splice",t)},toReversed(){return yl(this).toReversed()},toSorted(t){return yl(this).toSorted(t)},toSpliced(...t){return yl(this).toSpliced(...t)},unshift(...t){return Gc(this,"unshift",t)},values(){return Dp(this,"values",bn)}};function Dp(t,e,r){const n=bh(t),s=n[e]();return n!==t&&!Ts(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const nD=Array.prototype;function ja(t,e,r,n,s,i){const a=bh(t),o=a!==t&&!Ts(t),l=a[e];if(l!==nD[e]){const d=l.apply(t,i);return o?bn(d):d}let c=r;a!==t&&(o?c=function(d,f){return r.call(this,bn(d),f,t)}:r.length>2&&(c=function(d,f){return r.call(this,d,f,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function Dy(t,e,r,n){const s=bh(t);let i=r;return s!==t&&(Ts(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,bn(o),l,t)}),s[e](i,...n)}function Pp(t,e,r){const n=Ht(t);Bn(n,"iterate",Xu);const s=n[e](...r);return(s===-1||s===!1)&&Ah(r[0])?(r[0]=Ht(r[0]),n[e](...r)):s}function Gc(t,e,r=[]){ai(),Rv();const n=Ht(t)[e].apply(t,r);return Ov(),ii(),n}const sD=gh("__proto__,__v_isRef,__isVue"),ES=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ia));function aD(t){ia(t)||(t=String(t));const e=Ht(this);return Bn(e,"has",t),e.hasOwnProperty(t)}class _S{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?CS:wS:i?AS:TS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ut(e);if(!s){let l;if(a&&(l=rD[r]))return l;if(r==="hasOwnProperty")return aD}const o=Reflect.get(e,r,br(e)?e:n);return(ia(r)?ES.has(r):sD(r))||(s||Bn(e,"get",r),i)?o:br(o)?a&&kv(r)?o:o.value:ur(o)?s?Lv(o):Cs(o):o}}class bS extends _S{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=oi(i);if(!Ts(n)&&!oi(n)&&(i=Ht(i),n=Ht(n)),!ut(e)&&br(i)&&!br(n))return l?!1:(i.value=n,!0)}const a=ut(e)&&kv(r)?Number(r)<e.length:rr(e,r),o=Reflect.set(e,r,n,br(e)?e:s);return e===Ht(s)&&(a?ts(n,i)&&Wa(e,"set",r,n):Wa(e,"add",r,n)),o}deleteProperty(e,r){const n=rr(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Wa(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!ia(r)||!ES.has(r))&&Bn(e,"has",r),n}ownKeys(e){return Bn(e,"iterate",ut(e)?"length":Io),Reflect.ownKeys(e)}}class SS extends _S{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const iD=new bS,oD=new SS,lD=new bS(!0),cD=new SS(!0),mg=t=>t,hf=t=>Reflect.getPrototypeOf(t);function uD(t,e,r){return function(...n){const s=this.__v_raw,i=Ht(s),a=jl(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?mg:e?x0:bn;return!e&&Bn(i,"iterate",l?pg:Io),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:o?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function pf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function dD(t,e){const r={get(s){const i=this.__v_raw,a=Ht(i),o=Ht(s);t||(ts(s,o)&&Bn(a,"get",s),Bn(a,"get",o));const{has:l}=hf(a),c=e?mg:t?x0:bn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Bn(Ht(s),"iterate",Io),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Ht(i),o=Ht(s);return t||(ts(s,o)&&Bn(a,"has",s),Bn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Ht(o),c=e?mg:t?x0:bn;return!t&&Bn(l,"iterate",Io),o.forEach((u,d)=>s.call(i,c(u),c(d),a))}};return hr(r,t?{add:pf("add"),set:pf("set"),delete:pf("delete"),clear:pf("clear")}:{add(s){!e&&!Ts(s)&&!oi(s)&&(s=Ht(s));const i=Ht(this);return hf(i).has.call(i,s)||(i.add(s),Wa(i,"add",s,s)),this},set(s,i){!e&&!Ts(i)&&!oi(i)&&(i=Ht(i));const a=Ht(this),{has:o,get:l}=hf(a);let c=o.call(a,s);c||(s=Ht(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?ts(i,u)&&Wa(a,"set",s,i):Wa(a,"add",s,i),this},delete(s){const i=Ht(this),{has:a,get:o}=hf(i);let l=a.call(i,s);l||(s=Ht(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Wa(i,"delete",s,void 0),c},clear(){const s=Ht(this),i=s.size!==0,a=s.clear();return i&&Wa(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=uD(s,t,e)}),r}function Sh(t,e){const r=dD(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(rr(r,s)&&s in n?r:n,s,i)}const fD={get:Sh(!1,!1)},hD={get:Sh(!1,!0)},pD={get:Sh(!0,!1)},mD={get:Sh(!0,!0)},TS=new WeakMap,AS=new WeakMap,wS=new WeakMap,CS=new WeakMap;function gD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vD(t){return t.__v_skip||!Object.isExtensible(t)?0:gD(Bk(t))}function Cs(t){return oi(t)?t:Th(t,!1,iD,fD,TS)}function Mv(t){return Th(t,!1,lD,hD,AS)}function Lv(t){return Th(t,!0,oD,pD,wS)}function xD(t){return Th(t,!0,cD,mD,CS)}function Th(t,e,r,n,s){if(!ur(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=vD(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function Sa(t){return oi(t)?Sa(t.__v_raw):!!(t&&t.__v_isReactive)}function oi(t){return!!(t&&t.__v_isReadonly)}function Ts(t){return!!(t&&t.__v_isShallow)}function Ah(t){return t?!!t.__v_raw:!1}function Ht(t){const e=t&&t.__v_raw;return e?Ht(e):t}function wh(t){return!rr(t,"__v_skip")&&Object.isExtensible(t)&&fg(t,"__v_skip",!0),t}const bn=t=>ur(t)?Cs(t):t,x0=t=>ur(t)?Lv(t):t;function br(t){return t?t.__v_isRef===!0:!1}function ue(t){return IS(t,!1)}function Bv(t){return IS(t,!0)}function IS(t,e){return br(t)?t:new yD(t,e)}class yD{constructor(e,r){this.dep=new _h,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ht(e),this._value=r?e:bn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Ts(e)||oi(e);e=n?e:Ht(e),ts(e,r)&&(this._rawValue=e,this._value=n?e:bn(e),this.dep.trigger())}}function ED(t){t.dep&&t.dep.trigger()}function oe(t){return br(t)?t.value:t}function _D(t){return Et(t)?t():oe(t)}const bD={get:(t,e,r)=>e==="__v_raw"?t:oe(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return br(s)&&!br(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Uv(t){return Sa(t)?t:new Proxy(t,bD)}class SD{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new _h,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function kS(t){return new SD(t)}function DS(t){const e=ut(t)?new Array(t.length):{};for(const r in t)e[r]=PS(t,r);return e}class TD{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return tD(Ht(this._object),this._key)}}class AD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function wD(t,e,r){return br(t)?t:Et(t)?new AD(t):ur(t)&&arguments.length>1?PS(t,e,r):ue(t)}function PS(t,e,r){const n=t[e];return br(n)?n:new TD(t,e,r)}class CD{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new _h(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&mr!==this)return pS(this,!0),!0}get value(){const e=this.dep.track();return vS(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ID(t,e,r=!1){let n,s;return Et(t)?n=t:(n=t.get,s=t.set),new CD(n,s,r)}const kD={GET:"get",HAS:"has",ITERATE:"iterate"},DD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},mf={},y0=new WeakMap;let Pi;function PD(){return Pi}function FS(t,e=!1,r=Pi){if(r){let n=y0.get(r);n||y0.set(r,n=[]),n.push(t)}}function FD(t,e,r=Wt){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=C=>s?C:Ts(C)||s===!1||s===0?za(C,1):za(C);let u,d,f,p,m=!1,g=!1;if(br(t)?(d=()=>t.value,m=Ts(t)):Sa(t)?(d=()=>c(t),m=!0):ut(t)?(g=!0,m=t.some(C=>Sa(C)||Ts(C)),d=()=>t.map(C=>{if(br(C))return C.value;if(Sa(C))return c(C);if(Et(C))return l?l(C,2):C()})):Et(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){ai();try{f()}finally{ii()}}const C=Pi;Pi=u;try{return l?l(t,3,[p]):t(p)}finally{Pi=C}}:d=Os,e&&s){const C=d,P=s===!0?1/0:s;d=()=>za(C(),P)}const v=Fv(),E=()=>{u.stop(),v&&v.active&&Cv(v.effects,u)};if(i&&e){const C=e;e=(...P)=>{C(...P),E()}}let x=g?new Array(t.length).fill(mf):mf;const y=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const P=u.run();if(s||m||(g?P.some((k,w)=>ts(k,x[w])):ts(P,x))){f&&f();const k=Pi;Pi=u;try{const w=[P,x===mf?void 0:g&&x[0]===mf?[]:x,p];x=P,l?l(e,3,w):e(...w)}finally{Pi=k}}}else u.run()};return o&&o(y),u=new Ku(d),u.scheduler=a?()=>a(y,!1):y,p=C=>FS(C,!1,u),f=u.onStop=()=>{const C=y0.get(u);if(C){if(l)l(C,4);else for(const P of C)P();y0.delete(u)}},e?n?y(!0):x=u.run():a?a(y.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function za(t,e=1/0,r){if(e<=0||!ur(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,br(t))za(t.value,e,r);else if(ut(t))for(let n=0;n<t.length;n++)za(t[n],e,r);else if(Qo(t)||jl(t))t.forEach(n=>{za(n,e,r)});else if(vh(t)){for(const n in t)za(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&za(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const RS=[];function RD(t){RS.push(t)}function OD(){RS.pop()}function ND(t,e){}const MD={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},LD={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Sc(t,e,r,n){try{return n?t(...n):t()}catch(s){Jo(s,e,r)}}function Ls(t,e,r,n){if(Et(t)){const s=Sc(t,e,r,n);return s&&Iv(s)&&s.catch(i=>{Jo(i,e,r)}),s}if(ut(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Ls(t[i],e,r,n));return s}}function Jo(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Wt;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}o=o.parent}if(i){ai(),Sc(i,null,10,[t,l,c]),ii();return}}BD(t,r,s,n,a)}function BD(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const rs=[];let ya=-1;const Wl=[];let Fi=null,Il=0;const OS=Promise.resolve();let E0=null;function Zo(t){const e=E0||OS;return t?e.then(this?t.bind(this):t):e}function UD(t){let e=ya+1,r=rs.length;for(;e<r;){const n=e+r>>>1,s=rs[n],i=Qu(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function Vv(t){if(!(t.flags&1)){const e=Qu(t),r=rs[rs.length-1];!r||!(t.flags&2)&&e>=Qu(r)?rs.push(t):rs.splice(UD(e),0,t),t.flags|=1,NS()}}function NS(){E0||(E0=OS.then(MS))}function Yu(t){ut(t)?Wl.push(...t):Fi&&t.id===-1?Fi.splice(Il+1,0,t):t.flags&1||(Wl.push(t),t.flags|=1),NS()}function Py(t,e,r=ya+1){for(;r<rs.length;r++){const n=rs[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;rs.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function _0(t){if(Wl.length){const e=[...new Set(Wl)].sort((r,n)=>Qu(r)-Qu(n));if(Wl.length=0,Fi){Fi.push(...e);return}for(Fi=e,Il=0;Il<Fi.length;Il++){const r=Fi[Il];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Fi=null,Il=0}}const Qu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function MS(t){try{for(ya=0;ya<rs.length;ya++){const e=rs[ya];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Sc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ya<rs.length;ya++){const e=rs[ya];e&&(e.flags&=-2)}ya=-1,rs.length=0,_0(),E0=null,(rs.length||Wl.length)&&MS()}}let kl,gf=[];function LS(t,e){var r,n;kl=t,kl?(kl.enabled=!0,gf.forEach(({event:s,args:i})=>kl.emit(s,...i)),gf=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{LS(i,e)}),setTimeout(()=>{kl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,gf=[])},3e3)):gf=[]}let rn=null,Ch=null;function Ju(t){const e=rn;return rn=t,Ch=t&&t.type.__scopeId||null,e}function VD(t){Ch=t}function $D(){Ch=null}const jD=t=>Ih;function Ih(t,e=rn,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Sg(-1);const i=Ju(e);let a;try{a=t(...s)}finally{Ju(i),n._d&&Sg(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ve(t,e){if(rn===null)return t;const r=Id(rn),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Wt]=e[s];i&&(Et(i)&&(i={mounted:i,updated:i}),i.deep&&za(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function Ea(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(ai(),Ls(l,r,8,[t.el,o,t,e]),ii())}}const BS=Symbol("_vte"),US=t=>t.__isTeleport,yu=t=>t&&(t.disabled||t.disabled===""),Fy=t=>t&&(t.defer||t.defer===""),Ry=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Oy=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,gg=(t,e)=>{const r=t&&t.to;return yr(r)?e?e(r):null:r},VS={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:d,pbc:f,o:{insert:p,querySelector:m,createText:g,createComment:v}}=c,E=yu(e.props);let{shapeFlag:x,children:y,dynamicChildren:C}=e;if(t==null){const P=e.el=g(""),k=e.anchor=g("");p(P,r,n),p(k,r,n);const w=(_,b)=>{x&16&&(s&&s.isCE&&(s.ce._teleportTarget=_),u(y,_,b,s,i,a,o,l))},S=()=>{const _=e.target=gg(e.props,m),b=$S(_,e,g,p);_&&(a!=="svg"&&Ry(_)?a="svg":a!=="mathml"&&Oy(_)&&(a="mathml"),E||(w(_,b),Yf(e,!1)))};E&&(w(r,k),Yf(e,!0)),Fy(e.props)?(e.el.__isMounted=!1,Zr(()=>{S(),delete e.el.__isMounted},i)):S()}else{if(Fy(e.props)&&t.el.__isMounted===!1){Zr(()=>{VS.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const P=e.anchor=t.anchor,k=e.target=t.target,w=e.targetAnchor=t.targetAnchor,S=yu(t.props),_=S?r:k,b=S?P:w;if(a==="svg"||Ry(k)?a="svg":(a==="mathml"||Oy(k))&&(a="mathml"),C?(f(t.dynamicChildren,C,_,s,i,a,o),Qv(t,e,!0)):l||d(t,e,_,b,s,i,a,o,!1),E)S?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):vf(e,r,P,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const T=e.target=gg(e.props,m);T&&vf(e,T,null,c,0)}else S&&vf(e,k,w,c,1);Yf(e,E)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),a&16){const p=i||!yu(f);for(let m=0;m<o.length;m++){const g=o[m];n(g,e,r,p,!!g.dynamicChildren)}}},move:vf,hydrate:HD};function vf(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&n(a,e,r),(!d||yu(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,r,2);d&&n(o,e,r)}function HD(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const f=e.target=gg(e.props,l);if(f){const p=yu(e.props),m=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)e.anchor=d(a(t),e,o(t),r,n,s,i),e.targetStart=m,e.targetAnchor=m&&a(m);else{e.anchor=a(t);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}}g=a(g)}e.targetAnchor||$S(f,e,u,c),d(m&&a(m),e,f,r,n,s,i)}Yf(e,p)}return e.anchor&&a(e.anchor)}const GD=VS;function Yf(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function $S(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[BS]=i,t&&(n(s,t),n(i,t)),i}const Ri=Symbol("_leaveCb"),xf=Symbol("_enterCb");function $v(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jt(()=>{t.isMounted=!0}),Fh(()=>{t.isUnmounting=!0}),t}const Is=[Function,Array],jv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Is,onEnter:Is,onAfterEnter:Is,onEnterCancelled:Is,onBeforeLeave:Is,onLeave:Is,onAfterLeave:Is,onLeaveCancelled:Is,onBeforeAppear:Is,onAppear:Is,onAfterAppear:Is,onAppearCancelled:Is},jS=t=>{const e=t.subTree;return e.component?jS(e.component):e},WD={name:"BaseTransition",props:jv,setup(t,{slots:e}){const r=Vs(),n=$v();return()=>{const s=e.default&&kh(e.default(),!0);if(!s||!s.length)return;const i=HS(s),a=Ht(t),{mode:o}=a;if(n.isLeaving)return Fp(i);const l=Ny(i);if(!l)return Fp(i);let c=sc(l,a,n,r,d=>c=d);l.type!==jr&&li(l,c);let u=r.subTree&&Ny(r.subTree);if(u&&u.type!==jr&&!Ys(l,u)&&jS(r).type!==jr){let d=sc(u,a,n,r);if(li(u,d),o==="out-in"&&l.type!==jr)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,u=void 0},Fp(i);o==="in-out"&&l.type!==jr?d.delayLeave=(f,p,m)=>{const g=WS(n,u);g[String(u.key)]=u,f[Ri]=()=>{p(),f[Ri]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function HS(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==jr){e=r;break}}return e}const GS=WD;function WS(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function sc(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:E,onAfterAppear:x,onAppearCancelled:y}=e,C=String(t.key),P=WS(r,t),k=(_,b)=>{_&&Ls(_,n,9,b)},w=(_,b)=>{const T=b[1];k(_,b),ut(_)?_.every(I=>I.length<=1)&&T():_.length<=1&&T()},S={mode:a,persisted:o,beforeEnter(_){let b=l;if(!r.isMounted)if(i)b=v||l;else return;_[Ri]&&_[Ri](!0);const T=P[C];T&&Ys(t,T)&&T.el[Ri]&&T.el[Ri](),k(b,[_])},enter(_){let b=c,T=u,I=d;if(!r.isMounted)if(i)b=E||c,T=x||u,I=y||d;else return;let D=!1;const O=_[xf]=R=>{D||(D=!0,R?k(I,[_]):k(T,[_]),S.delayedLeave&&S.delayedLeave(),_[xf]=void 0)};b?w(b,[_,O]):O()},leave(_,b){const T=String(t.key);if(_[xf]&&_[xf](!0),r.isUnmounting)return b();k(f,[_]);let I=!1;const D=_[Ri]=O=>{I||(I=!0,b(),O?k(g,[_]):k(m,[_]),_[Ri]=void 0,P[T]===t&&delete P[T])};P[T]=t,p?w(p,[_,D]):D()},clone(_){const b=sc(_,e,r,n,s);return s&&s(b),b}};return S}function Fp(t){if(wd(t))return t=Ia(t),t.children=null,t}function Ny(t){if(!wd(t))return US(t.type)&&t.children?HS(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Et(r.default))return r.default()}}function li(t,e){t.shapeFlag&6&&t.component?(t.transition=e,li(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function kh(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Fe?(a.patchFlag&128&&s++,n=n.concat(kh(a.children,e,o))):(e||a.type!==jr)&&n.push(o!=null?Ia(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Ad(t,e){return Et(t)?hr({name:t.name},e,{setup:t}):t}function zD(){const t=Vs();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Hv(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function KD(t){const e=Vs(),r=Bv(null);if(e){const s=e.refs===Wt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function zl(t,e,r,n,s=!1){if(ut(t)){t.forEach((m,g)=>zl(m,e&&(ut(e)?e[g]:e),r,n,s));return}if(Ki(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&zl(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?Id(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Wt?o.refs={}:o.refs,d=o.setupState,f=Ht(d),p=d===Wt?()=>!1:m=>rr(f,m);if(c!=null&&c!==l&&(yr(c)?(u[c]=null,p(c)&&(d[c]=null)):br(c)&&(c.value=null)),Et(l))Sc(l,o,12,[a,u]);else{const m=yr(l),g=br(l);if(m||g){const v=()=>{if(t.f){const E=m?p(l)?d[l]:u[l]:l.value;s?ut(E)&&Cv(E,i):ut(E)?E.includes(i)||E.push(i):m?(u[l]=[i],p(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=a,p(l)&&(d[l]=a)):g&&(l.value=a,t.k&&(u[t.k]=a))};a?(v.id=-1,Zr(v,r)):v()}}}let My=!1;const El=()=>{My||(console.error("Hydration completed but contains mismatches."),My=!0)},qD=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",XD=t=>t.namespaceURI.includes("MathML"),yf=t=>{if(t.nodeType===1){if(qD(t))return"svg";if(XD(t))return"mathml"}},Ml=t=>t.nodeType===8;function YD(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(y,C)=>{if(!C.hasChildNodes()){r(null,y,C),_0(),C._vnode=y;return}d(C.firstChild,y,null,null,null),_0(),C._vnode=y},d=(y,C,P,k,w,S=!1)=>{S=S||!!C.dynamicChildren;const _=Ml(y)&&y.data==="[",b=()=>g(y,C,P,k,w,_),{type:T,ref:I,shapeFlag:D,patchFlag:O}=C;let R=y.nodeType;C.el=y,O===-2&&(S=!1,C.dynamicChildren=null);let F=null;switch(T){case qi:R!==3?C.children===""?(l(C.el=s(""),a(y),y),F=y):F=b():(y.data!==C.children&&(El(),y.data=C.children),F=i(y));break;case jr:x(y)?(F=i(y),E(C.el=y.content.firstChild,y,P)):R!==8||_?F=b():F=i(y);break;case Do:if(_&&(y=i(y),R=y.nodeType),R===1||R===3){F=y;const N=!C.children.length;for(let V=0;V<C.staticCount;V++)N&&(C.children+=F.nodeType===1?F.outerHTML:F.data),V===C.staticCount-1&&(C.anchor=F),F=i(F);return _?i(F):F}else b();break;case Fe:_?F=m(y,C,P,k,w,S):F=b();break;default:if(D&1)(R!==1||C.type.toLowerCase()!==y.tagName.toLowerCase())&&!x(y)?F=b():F=f(y,C,P,k,w,S);else if(D&6){C.slotScopeIds=w;const N=a(y);if(_?F=v(y):Ml(y)&&y.data==="teleport start"?F=v(y,y.data,"teleport end"):F=i(y),e(C,N,null,P,k,yf(N),S),Ki(C)&&!C.type.__asyncResolved){let V;_?(V=st(Fe),V.anchor=F?F.previousSibling:N.lastChild):V=y.nodeType===3?Ne(""):st("div"),V.el=y,C.component.subTree=V}}else D&64?R!==8?F=b():F=C.type.hydrate(y,C,P,k,w,S,t,p):D&128&&(F=C.type.hydrate(y,C,P,k,yf(a(y)),w,S,t,d))}return I!=null&&zl(I,null,k,C),F},f=(y,C,P,k,w,S)=>{S=S||!!C.dynamicChildren;const{type:_,props:b,patchFlag:T,shapeFlag:I,dirs:D,transition:O}=C,R=_==="input"||_==="option";if(R||T!==-1){D&&Ea(C,null,P,"created");let F=!1;if(x(y)){F=vT(null,O)&&P&&P.vnode.props&&P.vnode.props.appear;const V=y.content.firstChild;if(F){const L=V.getAttribute("class");L&&(V.$cls=L),O.beforeEnter(V)}E(V,y,P),C.el=y=V}if(I&16&&!(b&&(b.innerHTML||b.textContent))){let V=p(y.firstChild,C,y,P,k,w,S);for(;V;){Ef(y,1)||El();const L=V;V=V.nextSibling,o(L)}}else if(I&8){let V=C.children;V[0]===`
`&&(y.tagName==="PRE"||y.tagName==="TEXTAREA")&&(V=V.slice(1)),y.textContent!==V&&(Ef(y,0)||El(),y.textContent=C.children)}if(b){if(R||!S||T&48){const V=y.tagName.includes("-");for(const L in b)(R&&(L.endsWith("value")||L==="indeterminate")||Sd(L)&&!Hl(L)||L[0]==="."||V)&&n(y,L,null,b[L],void 0,P)}else if(b.onClick)n(y,"onClick",null,b.onClick,void 0,P);else if(T&4&&Sa(b.style))for(const V in b.style)b.style[V]}let N;(N=b&&b.onVnodeBeforeMount)&&ds(N,P,C),D&&Ea(C,null,P,"beforeMount"),((N=b&&b.onVnodeMounted)||D||F)&&wT(()=>{N&&ds(N,P,C),F&&O.enter(y),D&&Ea(C,null,P,"mounted")},k)}return y.nextSibling},p=(y,C,P,k,w,S,_)=>{_=_||!!C.dynamicChildren;const b=C.children,T=b.length;for(let I=0;I<T;I++){const D=_?b[I]:b[I]=hs(b[I]),O=D.type===qi;y?(O&&!_&&I+1<T&&hs(b[I+1]).type===qi&&(l(s(y.data.slice(D.children.length)),P,i(y)),y.data=D.children),y=d(y,D,k,w,S,_)):O&&!D.children?l(D.el=s(""),P):(Ef(P,1)||El(),r(null,D,P,null,k,w,yf(P),S))}return y},m=(y,C,P,k,w,S)=>{const{slotScopeIds:_}=C;_&&(w=w?w.concat(_):_);const b=a(y),T=p(i(y),C,b,P,k,w,S);return T&&Ml(T)&&T.data==="]"?i(C.anchor=T):(El(),l(C.anchor=c("]"),b,T),T)},g=(y,C,P,k,w,S)=>{if(Ef(y.parentElement,1)||El(),C.el=null,S){const T=v(y);for(;;){const I=i(y);if(I&&I!==T)o(I);else break}}const _=i(y),b=a(y);return o(y),r(null,C,b,_,P,k,yf(b),w),P&&(P.vnode.el=C.el,Oh(P,C.el)),_},v=(y,C="[",P="]")=>{let k=0;for(;y;)if(y=i(y),y&&Ml(y)&&(y.data===C&&k++,y.data===P)){if(k===0)return i(y);k--}return y},E=(y,C,P)=>{const k=C.parentNode;k&&k.replaceChild(y,C);let w=P;for(;w;)w.vnode.el===C&&(w.vnode.el=w.subTree.el=y),w=w.parent},x=y=>y.nodeType===1&&y.tagName==="TEMPLATE";return[u,d]}const Ly="data-allow-mismatch",QD={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Ef(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ly);)t=t.parentElement;const r=t&&t.getAttribute(Ly);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(QD[e])}}const JD=yh().requestIdleCallback||(t=>setTimeout(t,1)),ZD=yh().cancelIdleCallback||(t=>clearTimeout(t)),eP=(t=1e4)=>e=>{const r=JD(e,{timeout:t});return()=>ZD(r)};function tP(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const rP=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(tP(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},nP=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},sP=(t=[])=>(e,r)=>{yr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function aP(t,e){if(Ml(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(Ml(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const Ki=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function iP(t){Et(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,p()),p=()=>{let m;return c||(m=c=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((v,E)=>{l(g,()=>v(f()),()=>E(g),d+1)});throw g}).then(g=>m!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return Ad({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(m,g,v){const E=i?()=>{const y=i(()=>{v()},C=>aP(m,C));y&&(g.bum||(g.bum=[])).push(y),(g.u||(g.u=[])).push(()=>!0)}:v;u?E():p().then(()=>!g.isUnmounted&&E())},get __asyncResolved(){return u},setup(){const m=tn;if(Hv(m),u)return()=>Rp(u,m);const g=y=>{c=null,Jo(y,m,13,!n)};if(o&&m.suspense||ac)return p().then(y=>()=>Rp(y,m)).catch(y=>(g(y),()=>n?st(n,{error:y}):null));const v=ue(!1),E=ue(),x=ue(!!s);return s&&setTimeout(()=>{x.value=!1},s),a!=null&&setTimeout(()=>{if(!v.value&&!E.value){const y=new Error(`Async component timed out after ${a}ms.`);g(y),E.value=y}},a),p().then(()=>{v.value=!0,m.parent&&wd(m.parent.vnode)&&m.parent.update()}).catch(y=>{g(y),E.value=y}),()=>{if(v.value&&u)return Rp(u,m);if(E.value&&n)return st(n,{error:E.value});if(r&&!x.value)return st(r)}}})}function Rp(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=st(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const wd=t=>t.type.__isKeepAlive,oP={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Vs(),n=r.ctx;if(!n.renderer)return()=>{const x=e.default&&e.default();return x&&x.length===1?x[0]:x};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=n,f=d("div");n.activate=(x,y,C,P,k)=>{const w=x.component;c(x,y,C,0,o),l(w.vnode,x,y,C,w,o,P,x.slotScopeIds,k),Zr(()=>{w.isDeactivated=!1,w.a&&Gl(w.a);const S=x.props&&x.props.onVnodeMounted;S&&ds(S,w.parent,x)},o)},n.deactivate=x=>{const y=x.component;S0(y.m),S0(y.a),c(x,f,null,1,o),Zr(()=>{y.da&&Gl(y.da);const C=x.props&&x.props.onVnodeUnmounted;C&&ds(C,y.parent,x),y.isDeactivated=!0},o)};function p(x){Op(x),u(x,r,o,!0)}function m(x){s.forEach((y,C)=>{const P=Ig(y.type);P&&!x(P)&&g(C)})}function g(x){const y=s.get(x);y&&(!a||!Ys(y,a))?p(y):a&&Op(a),s.delete(x),i.delete(x)}Ut(()=>[t.include,t.exclude],([x,y])=>{x&&m(C=>nu(x,C)),y&&m(C=>!nu(y,C))},{flush:"post",deep:!0});let v=null;const E=()=>{v!=null&&(T0(r.subTree.type)?Zr(()=>{s.set(v,_f(r.subTree))},r.subTree.suspense):s.set(v,_f(r.subTree)))};return jt(E),Ph(E),Fh(()=>{s.forEach(x=>{const{subTree:y,suspense:C}=r,P=_f(y);if(x.type===P.type&&x.key===P.key){Op(P);const k=P.component.da;k&&Zr(k,C);return}p(x)})}),()=>{if(v=null,!e.default)return a=null;const x=e.default(),y=x[0];if(x.length>1)return a=null,x;if(!ci(y)||!(y.shapeFlag&4)&&!(y.shapeFlag&128))return a=null,y;let C=_f(y);if(C.type===jr)return a=null,C;const P=C.type,k=Ig(Ki(C)?C.type.__asyncResolved||{}:P),{include:w,exclude:S,max:_}=t;if(w&&(!k||!nu(w,k))||S&&k&&nu(S,k))return C.shapeFlag&=-257,a=C,y;const b=C.key==null?P:C.key,T=s.get(b);return C.el&&(C=Ia(C),y.shapeFlag&128&&(y.ssContent=C)),v=b,T?(C.el=T.el,C.component=T.component,C.transition&&li(C,C.transition),C.shapeFlag|=512,i.delete(b),i.add(b)):(i.add(b),_&&i.size>parseInt(_,10)&&g(i.values().next().value)),C.shapeFlag|=256,a=C,T0(y.type)?y:C}}},lP=oP;function nu(t,e){return ut(t)?t.some(r=>nu(r,e)):yr(t)?t.split(",").includes(e):Lk(t)?(t.lastIndex=0,t.test(e)):!1}function zS(t,e){qS(t,"a",e)}function KS(t,e){qS(t,"da",e)}function qS(t,e,r=tn){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Dh(e,n,r),r){let s=r.parent;for(;s&&s.parent;)wd(s.parent.vnode)&&cP(n,e,r,s),s=s.parent}}function cP(t,e,r,n){const s=Dh(e,t,n,!0);Ra(()=>{Cv(n[e],s)},r)}function Op(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function _f(t){return t.shapeFlag&128?t.ssContent:t}function Dh(t,e,r=tn,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{ai();const o=Uo(r),l=Ls(e,r,t,a);return o(),ii(),l});return n?s.unshift(i):s.push(i),i}}const gi=t=>(e,r=tn)=>{(!ac||t==="sp")&&Dh(t,(...n)=>e(...n),r)},XS=gi("bm"),jt=gi("m"),Gv=gi("bu"),Ph=gi("u"),Fh=gi("bum"),Ra=gi("um"),YS=gi("sp"),QS=gi("rtg"),JS=gi("rtc");function ZS(t,e=tn){Dh("ec",t,e)}const Wv="components",uP="directives";function Ir(t,e){return zv(Wv,t,!0,e)||t}const eT=Symbol.for("v-ndc");function dP(t){return yr(t)?zv(Wv,t,!1)||t:t||eT}function fP(t){return zv(uP,t)}function zv(t,e,r=!0,n=!1){const s=rn||tn;if(s){const i=s.type;if(t===Wv){const o=Ig(i,!1);if(o&&(o===e||o===Tn(e)||o===Td(Tn(e))))return i}const a=By(s[t]||i[t],e)||By(s.appContext[t],e);return!a&&n?i:a}}function By(t,e){return t&&(t[e]||t[Tn(e)]||t[Td(Tn(e))])}function je(t,e,r,n){let s;const i=r&&r[n],a=ut(t);if(a||yr(t)){const o=a&&Sa(t);let l=!1,c=!1;o&&(l=!Ts(t),c=oi(t),t=bh(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?x0(bn(t[u])):bn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(ur(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function hP(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(ut(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function tT(t,e,r={},n,s){if(rn.ce||rn.parent&&Ki(rn.parent)&&rn.parent.ce)return e!=="default"&&(r.name=e),U(),Xr(Fe,null,[st("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),U();const a=i&&Kv(i(r)),o=r.key||a&&a.key,l=Xr(Fe,{key:(o&&!ia(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Kv(t){return t.some(e=>ci(e)?!(e.type===jr||e.type===Fe&&!Kv(e.children)):!0)?t:null}function pP(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:gu(n)]=t[n];return r}const vg=t=>t?RT(t)?Id(t):vg(t.parent):null,Eu=hr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vg(t.parent),$root:t=>vg(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>qv(t),$forceUpdate:t=>t.f||(t.f=()=>{Vv(t.update)}),$nextTick:t=>t.n||(t.n=Zo.bind(t.proxy)),$watch:t=>WP.bind(t)}),Np=(t,e)=>t!==Wt&&!t.__isScriptSetup&&rr(t,e),xg={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(Np(n,e))return a[e]=1,n[e];if(s!==Wt&&rr(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&rr(c,e))return a[e]=3,i[e];if(r!==Wt&&rr(r,e))return a[e]=4,r[e];yg&&(a[e]=0)}}const u=Eu[e];let d,f;if(u)return e==="$attrs"&&Bn(t.attrs,"get",""),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==Wt&&rr(r,e))return a[e]=4,r[e];if(f=l.config.globalProperties,rr(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return Np(s,e)?(s[e]=r,!0):n!==Wt&&rr(n,e)?(n[e]=r,!0):rr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Wt&&rr(t,a)||Np(e,a)||(o=i[0])&&rr(o,a)||rr(n,a)||rr(Eu,a)||rr(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:rr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},mP=hr({},xg,{get(t,e){if(e!==Symbol.unscopables)return xg.get(t,e,t)},has(t,e){return e[0]!=="_"&&!jk(e)}});function gP(){return null}function vP(){return null}function xP(t){}function yP(t){}function EP(){return null}function _P(){}function bP(t,e){return null}function SP(){return rT().slots}function TP(){return rT().attrs}function rT(){const t=Vs();return t.setupContext||(t.setupContext=MT(t))}function Zu(t){return ut(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function AP(t,e){const r=Zu(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?ut(s)||Et(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function wP(t,e){return!t||!e?t||e:ut(t)&&ut(e)?t.concat(e):hr({},Zu(t),Zu(e))}function CP(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function IP(t){const e=Vs();let r=t();return Ag(),Iv(r)&&(r=r.catch(n=>{throw Uo(e),n})),[r,()=>Uo(e)]}let yg=!0;function kP(t){const e=qv(t),r=t.proxy,n=t.ctx;yg=!1,e.beforeCreate&&Uy(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:g,deactivated:v,beforeDestroy:E,beforeUnmount:x,destroyed:y,unmounted:C,render:P,renderTracked:k,renderTriggered:w,errorCaptured:S,serverPrefetch:_,expose:b,inheritAttrs:T,components:I,directives:D,filters:O}=e;if(c&&DP(c,n,null),a)for(const N in a){const V=a[N];Et(V)&&(n[N]=V.bind(r))}if(s){const N=s.call(r,r);ur(N)&&(t.data=Cs(N))}if(yg=!0,i)for(const N in i){const V=i[N],L=Et(V)?V.bind(r,r):Et(V.get)?V.get.bind(r,r):Os,z=!Et(V)&&Et(V.set)?V.set.bind(r):Os,H=be({get:L,set:z});Object.defineProperty(n,N,{enumerable:!0,configurable:!0,get:()=>H.value,set:B=>H.value=B})}if(o)for(const N in o)nT(o[N],n,r,N);if(l){const N=Et(l)?l.call(r):l;Reflect.ownKeys(N).forEach(V=>{_u(V,N[V])})}u&&Uy(u,t,"c");function F(N,V){ut(V)?V.forEach(L=>N(L.bind(r))):V&&N(V.bind(r))}if(F(XS,d),F(jt,f),F(Gv,p),F(Ph,m),F(zS,g),F(KS,v),F(ZS,S),F(JS,k),F(QS,w),F(Fh,x),F(Ra,C),F(YS,_),ut(b))if(b.length){const N=t.exposed||(t.exposed={});b.forEach(V=>{Object.defineProperty(N,V,{get:()=>r[V],set:L=>r[V]=L})})}else t.exposed||(t.exposed={});P&&t.render===Os&&(t.render=P),T!=null&&(t.inheritAttrs=T),I&&(t.components=I),D&&(t.directives=D),_&&Hv(t)}function DP(t,e,r=Os){ut(t)&&(t=Eg(t));for(const n in t){const s=t[n];let i;ur(s)?"default"in s?i=As(s.from||n,s.default,!0):i=As(s.from||n):i=As(s),br(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Uy(t,e,r){Ls(ut(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function nT(t,e,r,n){let s=n.includes(".")?bT(r,n):()=>r[n];if(yr(t)){const i=e[t];Et(i)&&Ut(s,i)}else if(Et(t))Ut(s,t.bind(r));else if(ur(t))if(ut(t))t.forEach(i=>nT(i,e,r,n));else{const i=Et(t.handler)?t.handler.bind(r):e[t.handler];Et(i)&&Ut(s,i,t)}}function qv(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>b0(l,c,a,!0)),b0(l,e,a)),ur(e)&&i.set(e,l),l}function b0(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&b0(t,i,r,!0),s&&s.forEach(a=>b0(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=PP[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const PP={data:Vy,props:$y,emits:$y,methods:su,computed:su,beforeCreate:Jn,created:Jn,beforeMount:Jn,mounted:Jn,beforeUpdate:Jn,updated:Jn,beforeDestroy:Jn,beforeUnmount:Jn,destroyed:Jn,unmounted:Jn,activated:Jn,deactivated:Jn,errorCaptured:Jn,serverPrefetch:Jn,components:su,directives:su,watch:RP,provide:Vy,inject:FP};function Vy(t,e){return e?t?function(){return hr(Et(t)?t.call(this,this):t,Et(e)?e.call(this,this):e)}:e:t}function FP(t,e){return su(Eg(t),Eg(e))}function Eg(t){if(ut(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Jn(t,e){return t?[...new Set([].concat(t,e))]:e}function su(t,e){return t?hr(Object.create(null),t,e):e}function $y(t,e){return t?ut(t)&&ut(e)?[...new Set([...t,...e])]:hr(Object.create(null),Zu(t),Zu(e??{})):e}function RP(t,e){if(!t)return e;if(!e)return t;const r=hr(Object.create(null),t);for(const n in e)r[n]=Jn(t[n],e[n]);return r}function sT(){return{app:null,config:{isNativeTag:Nk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OP=0;function NP(t,e){return function(n,s=null){Et(n)||(n=hr({},n)),s!=null&&!ur(s)&&(s=null);const i=sT(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:OP++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:BT,get config(){return i.config},set config(u){},use(u,...d){return a.has(u)||(u&&Et(u.install)?(a.add(u),u.install(c,...d)):Et(u)&&(a.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||st(n,s);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(p,u):t(p,u,f),l=!0,c._container=u,u.__vue_app__=c,Id(p.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Ls(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=ko;ko=c;try{return u()}finally{ko=d}}};return c}}let ko=null;function _u(t,e){if(tn){let r=tn.provides;const n=tn.parent&&tn.parent.provides;n===r&&(r=tn.provides=Object.create(n)),r[t]=e}}function As(t,e,r=!1){const n=tn||rn;if(n||ko){let s=ko?ko._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Et(e)?e.call(n&&n.proxy):e}}function aT(){return!!(tn||rn||ko)}const iT={},oT=()=>Object.create(iT),lT=t=>Object.getPrototypeOf(t)===iT;function MP(t,e,r,n=!1){const s={},i=oT();t.propsDefaults=Object.create(null),cT(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:Mv(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function LP(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=Ht(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Rh(t.emitsOptions,f))continue;const p=e[f];if(l)if(rr(i,f))p!==i[f]&&(i[f]=p,c=!0);else{const m=Tn(f);s[m]=_g(l,o,m,p,t,!1)}else p!==i[f]&&(i[f]=p,c=!0)}}}else{cT(t,e,s,i)&&(c=!0);let u;for(const d in o)(!e||!rr(e,d)&&((u=ps(d))===d||!rr(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(s[d]=_g(l,o,d,void 0,t,!0)):delete s[d]);if(i!==o)for(const d in i)(!e||!rr(e,d))&&(delete i[d],c=!0)}c&&Wa(t.attrs,"set","")}function cT(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Hl(l))continue;const c=e[l];let u;s&&rr(s,u=Tn(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:Rh(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Ht(r),c=o||Wt;for(let u=0;u<i.length;u++){const d=i[u];r[d]=_g(s,l,d,c[d],t,!rr(c,d))}}return a}function _g(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=rr(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Et(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=Uo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===ps(r))&&(n=!0))}return n}const BP=new WeakMap;function uT(t,e,r=!1){const n=r?BP:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!Et(t)){const u=d=>{l=!0;const[f,p]=uT(d,e,!0);hr(a,f),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ur(t)&&n.set(t,$l),$l;if(ut(i))for(let u=0;u<i.length;u++){const d=Tn(i[u]);jy(d)&&(a[d]=Wt)}else if(i)for(const u in i){const d=Tn(u);if(jy(d)){const f=i[u],p=a[d]=ut(f)||Et(f)?{type:f}:hr({},f),m=p.type;let g=!1,v=!0;if(ut(m))for(let E=0;E<m.length;++E){const x=m[E],y=Et(x)&&x.name;if(y==="Boolean"){g=!0;break}else y==="String"&&(v=!1)}else g=Et(m)&&m.name==="Boolean";p[0]=g,p[1]=v,(g||rr(p,"default"))&&o.push(d)}}const c=[a,o];return ur(t)&&n.set(t,c),c}function jy(t){return t[0]!=="$"&&!Hl(t)}const Xv=t=>t[0]==="_"||t==="$stable",Yv=t=>ut(t)?t.map(hs):[hs(t)],UP=(t,e,r)=>{if(e._n)return e;const n=Ih((...s)=>Yv(e(...s)),r);return n._c=!1,n},dT=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Xv(s))continue;const i=t[s];if(Et(i))e[s]=UP(s,i,n);else if(i!=null){const a=Yv(i);e[s]=()=>a}}},fT=(t,e)=>{const r=Yv(e);t.slots.default=()=>r},hT=(t,e,r)=>{for(const n in e)(r||!Xv(n))&&(t[n]=e[n])},VP=(t,e,r)=>{const n=t.slots=oT();if(t.vnode.shapeFlag&32){const s=e.__;s&&fg(n,"__",s,!0);const i=e._;i?(hT(n,e,r),r&&fg(n,"_",i,!0)):dT(e,n)}else e&&fT(t,e)},$P=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Wt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:hT(s,e,r):(i=!e.$stable,dT(e,s)),a=e}else e&&(fT(t,e),a={default:1});if(i)for(const o in s)!Xv(o)&&a[o]==null&&delete s[o]},Zr=wT;function pT(t){return gT(t)}function mT(t){return gT(t,YD)}function gT(t,e){const r=yh();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=Os,insertStaticContent:m}=t,g=(q,Y,ge,re=null,ne=null,ae=null,xe=void 0,Ee=null,we=!!Y.dynamicChildren)=>{if(q===Y)return;q&&!Ys(q,Y)&&(re=le(q),B(q,ne,ae,!0),q=null),Y.patchFlag===-2&&(we=!1,Y.dynamicChildren=null);const{type:Te,ref:Ge,shapeFlag:Ie}=Y;switch(Te){case qi:v(q,Y,ge,re);break;case jr:E(q,Y,ge,re);break;case Do:q==null&&x(Y,ge,re,xe);break;case Fe:I(q,Y,ge,re,ne,ae,xe,Ee,we);break;default:Ie&1?P(q,Y,ge,re,ne,ae,xe,Ee,we):Ie&6?D(q,Y,ge,re,ne,ae,xe,Ee,we):(Ie&64||Ie&128)&&Te.process(q,Y,ge,re,ne,ae,xe,Ee,we,Q)}Ge!=null&&ne?zl(Ge,q&&q.ref,ae,Y||q,!Y):Ge==null&&q&&q.ref!=null&&zl(q.ref,null,ae,q,!0)},v=(q,Y,ge,re)=>{if(q==null)n(Y.el=o(Y.children),ge,re);else{const ne=Y.el=q.el;Y.children!==q.children&&c(ne,Y.children)}},E=(q,Y,ge,re)=>{q==null?n(Y.el=l(Y.children||""),ge,re):Y.el=q.el},x=(q,Y,ge,re)=>{[q.el,q.anchor]=m(q.children,Y,ge,re,q.el,q.anchor)},y=({el:q,anchor:Y},ge,re)=>{let ne;for(;q&&q!==Y;)ne=f(q),n(q,ge,re),q=ne;n(Y,ge,re)},C=({el:q,anchor:Y})=>{let ge;for(;q&&q!==Y;)ge=f(q),s(q),q=ge;s(Y)},P=(q,Y,ge,re,ne,ae,xe,Ee,we)=>{Y.type==="svg"?xe="svg":Y.type==="math"&&(xe="mathml"),q==null?k(Y,ge,re,ne,ae,xe,Ee,we):_(q,Y,ne,ae,xe,Ee,we)},k=(q,Y,ge,re,ne,ae,xe,Ee)=>{let we,Te;const{props:Ge,shapeFlag:Ie,transition:Ue,dirs:Le}=q;if(we=q.el=a(q.type,ae,Ge&&Ge.is,Ge),Ie&8?u(we,q.children):Ie&16&&S(q.children,we,null,re,ne,Mp(q,ae),xe,Ee),Le&&Ea(q,null,re,"created"),w(we,q,q.scopeId,xe,re),Ge){for(const ze in Ge)ze!=="value"&&!Hl(ze)&&i(we,ze,null,Ge[ze],ae,re);"value"in Ge&&i(we,"value",null,Ge.value,ae),(Te=Ge.onVnodeBeforeMount)&&ds(Te,re,q)}Le&&Ea(q,null,re,"beforeMount");const We=vT(ne,Ue);We&&Ue.beforeEnter(we),n(we,Y,ge),((Te=Ge&&Ge.onVnodeMounted)||We||Le)&&Zr(()=>{Te&&ds(Te,re,q),We&&Ue.enter(we),Le&&Ea(q,null,re,"mounted")},ne)},w=(q,Y,ge,re,ne)=>{if(ge&&p(q,ge),re)for(let ae=0;ae<re.length;ae++)p(q,re[ae]);if(ne){let ae=ne.subTree;if(Y===ae||T0(ae.type)&&(ae.ssContent===Y||ae.ssFallback===Y)){const xe=ne.vnode;w(q,xe,xe.scopeId,xe.slotScopeIds,ne.parent)}}},S=(q,Y,ge,re,ne,ae,xe,Ee,we=0)=>{for(let Te=we;Te<q.length;Te++){const Ge=q[Te]=Ee?Oi(q[Te]):hs(q[Te]);g(null,Ge,Y,ge,re,ne,ae,xe,Ee)}},_=(q,Y,ge,re,ne,ae,xe)=>{const Ee=Y.el=q.el;let{patchFlag:we,dynamicChildren:Te,dirs:Ge}=Y;we|=q.patchFlag&16;const Ie=q.props||Wt,Ue=Y.props||Wt;let Le;if(ge&&vo(ge,!1),(Le=Ue.onVnodeBeforeUpdate)&&ds(Le,ge,Y,q),Ge&&Ea(Y,q,ge,"beforeUpdate"),ge&&vo(ge,!0),(Ie.innerHTML&&Ue.innerHTML==null||Ie.textContent&&Ue.textContent==null)&&u(Ee,""),Te?b(q.dynamicChildren,Te,Ee,ge,re,Mp(Y,ne),ae):xe||V(q,Y,Ee,null,ge,re,Mp(Y,ne),ae,!1),we>0){if(we&16)T(Ee,Ie,Ue,ge,ne);else if(we&2&&Ie.class!==Ue.class&&i(Ee,"class",null,Ue.class,ne),we&4&&i(Ee,"style",Ie.style,Ue.style,ne),we&8){const We=Y.dynamicProps;for(let ze=0;ze<We.length;ze++){const _e=We[ze],ye=Ie[_e],Se=Ue[_e];(Se!==ye||_e==="value")&&i(Ee,_e,ye,Se,ne,ge)}}we&1&&q.children!==Y.children&&u(Ee,Y.children)}else!xe&&Te==null&&T(Ee,Ie,Ue,ge,ne);((Le=Ue.onVnodeUpdated)||Ge)&&Zr(()=>{Le&&ds(Le,ge,Y,q),Ge&&Ea(Y,q,ge,"updated")},re)},b=(q,Y,ge,re,ne,ae,xe)=>{for(let Ee=0;Ee<Y.length;Ee++){const we=q[Ee],Te=Y[Ee],Ge=we.el&&(we.type===Fe||!Ys(we,Te)||we.shapeFlag&198)?d(we.el):ge;g(we,Te,Ge,null,re,ne,ae,xe,!0)}},T=(q,Y,ge,re,ne)=>{if(Y!==ge){if(Y!==Wt)for(const ae in Y)!Hl(ae)&&!(ae in ge)&&i(q,ae,Y[ae],null,ne,re);for(const ae in ge){if(Hl(ae))continue;const xe=ge[ae],Ee=Y[ae];xe!==Ee&&ae!=="value"&&i(q,ae,Ee,xe,ne,re)}"value"in ge&&i(q,"value",Y.value,ge.value,ne)}},I=(q,Y,ge,re,ne,ae,xe,Ee,we)=>{const Te=Y.el=q?q.el:o(""),Ge=Y.anchor=q?q.anchor:o("");let{patchFlag:Ie,dynamicChildren:Ue,slotScopeIds:Le}=Y;Le&&(Ee=Ee?Ee.concat(Le):Le),q==null?(n(Te,ge,re),n(Ge,ge,re),S(Y.children||[],ge,Ge,ne,ae,xe,Ee,we)):Ie>0&&Ie&64&&Ue&&q.dynamicChildren?(b(q.dynamicChildren,Ue,ge,ne,ae,xe,Ee),(Y.key!=null||ne&&Y===ne.subTree)&&Qv(q,Y,!0)):V(q,Y,ge,Ge,ne,ae,xe,Ee,we)},D=(q,Y,ge,re,ne,ae,xe,Ee,we)=>{Y.slotScopeIds=Ee,q==null?Y.shapeFlag&512?ne.ctx.activate(Y,ge,re,xe,we):O(Y,ge,re,ne,ae,xe,we):R(q,Y,we)},O=(q,Y,ge,re,ne,ae,xe)=>{const Ee=q.component=FT(q,re,ne);if(wd(q)&&(Ee.ctx.renderer=Q),OT(Ee,!1,xe),Ee.asyncDep){if(ne&&ne.registerDep(Ee,F,xe),!q.el){const we=Ee.subTree=st(jr);E(null,we,Y,ge)}}else F(Ee,q,Y,ge,ne,ae,xe)},R=(q,Y,ge)=>{const re=Y.component=q.component;if(QP(q,Y,ge))if(re.asyncDep&&!re.asyncResolved){N(re,Y,ge);return}else re.next=Y,re.update();else Y.el=q.el,re.vnode=Y},F=(q,Y,ge,re,ne,ae,xe)=>{const Ee=()=>{if(q.isMounted){let{next:Ie,bu:Ue,u:Le,parent:We,vnode:ze}=q;{const He=xT(q);if(He){Ie&&(Ie.el=ze.el,N(q,Ie,xe)),He.asyncDep.then(()=>{q.isUnmounted||Ee()});return}}let _e=Ie,ye;vo(q,!1),Ie?(Ie.el=ze.el,N(q,Ie,xe)):Ie=ze,Ue&&Gl(Ue),(ye=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&ds(ye,We,Ie,ze),vo(q,!0);const Se=Qf(q),Re=q.subTree;q.subTree=Se,g(Re,Se,d(Re.el),le(Re),q,ne,ae),Ie.el=Se.el,_e===null&&Oh(q,Se.el),Le&&Zr(Le,ne),(ye=Ie.props&&Ie.props.onVnodeUpdated)&&Zr(()=>ds(ye,We,Ie,ze),ne)}else{let Ie;const{el:Ue,props:Le}=Y,{bm:We,m:ze,parent:_e,root:ye,type:Se}=q,Re=Ki(Y);if(vo(q,!1),We&&Gl(We),!Re&&(Ie=Le&&Le.onVnodeBeforeMount)&&ds(Ie,_e,Y),vo(q,!0),Ue&&X){const He=()=>{q.subTree=Qf(q),X(Ue,q.subTree,q,ne,null)};Re&&Se.__asyncHydrate?Se.__asyncHydrate(Ue,q,He):He()}else{ye.ce&&ye.ce._def.shadowRoot!==!1&&ye.ce._injectChildStyle(Se);const He=q.subTree=Qf(q);g(null,He,ge,re,q,ne,ae),Y.el=He.el}if(ze&&Zr(ze,ne),!Re&&(Ie=Le&&Le.onVnodeMounted)){const He=Y;Zr(()=>ds(Ie,_e,He),ne)}(Y.shapeFlag&256||_e&&Ki(_e.vnode)&&_e.vnode.shapeFlag&256)&&q.a&&Zr(q.a,ne),q.isMounted=!0,Y=ge=re=null}};q.scope.on();const we=q.effect=new Ku(Ee);q.scope.off();const Te=q.update=we.run.bind(we),Ge=q.job=we.runIfDirty.bind(we);Ge.i=q,Ge.id=q.uid,we.scheduler=()=>Vv(Ge),vo(q,!0),Te()},N=(q,Y,ge)=>{Y.component=q;const re=q.vnode.props;q.vnode=Y,q.next=null,LP(q,Y.props,re,ge),$P(q,Y.children,ge),ai(),Py(q),ii()},V=(q,Y,ge,re,ne,ae,xe,Ee,we=!1)=>{const Te=q&&q.children,Ge=q?q.shapeFlag:0,Ie=Y.children,{patchFlag:Ue,shapeFlag:Le}=Y;if(Ue>0){if(Ue&128){z(Te,Ie,ge,re,ne,ae,xe,Ee,we);return}else if(Ue&256){L(Te,Ie,ge,re,ne,ae,xe,Ee,we);return}}Le&8?(Ge&16&&me(Te,ne,ae),Ie!==Te&&u(ge,Ie)):Ge&16?Le&16?z(Te,Ie,ge,re,ne,ae,xe,Ee,we):me(Te,ne,ae,!0):(Ge&8&&u(ge,""),Le&16&&S(Ie,ge,re,ne,ae,xe,Ee,we))},L=(q,Y,ge,re,ne,ae,xe,Ee,we)=>{q=q||$l,Y=Y||$l;const Te=q.length,Ge=Y.length,Ie=Math.min(Te,Ge);let Ue;for(Ue=0;Ue<Ie;Ue++){const Le=Y[Ue]=we?Oi(Y[Ue]):hs(Y[Ue]);g(q[Ue],Le,ge,null,ne,ae,xe,Ee,we)}Te>Ge?me(q,ne,ae,!0,!1,Ie):S(Y,ge,re,ne,ae,xe,Ee,we,Ie)},z=(q,Y,ge,re,ne,ae,xe,Ee,we)=>{let Te=0;const Ge=Y.length;let Ie=q.length-1,Ue=Ge-1;for(;Te<=Ie&&Te<=Ue;){const Le=q[Te],We=Y[Te]=we?Oi(Y[Te]):hs(Y[Te]);if(Ys(Le,We))g(Le,We,ge,null,ne,ae,xe,Ee,we);else break;Te++}for(;Te<=Ie&&Te<=Ue;){const Le=q[Ie],We=Y[Ue]=we?Oi(Y[Ue]):hs(Y[Ue]);if(Ys(Le,We))g(Le,We,ge,null,ne,ae,xe,Ee,we);else break;Ie--,Ue--}if(Te>Ie){if(Te<=Ue){const Le=Ue+1,We=Le<Ge?Y[Le].el:re;for(;Te<=Ue;)g(null,Y[Te]=we?Oi(Y[Te]):hs(Y[Te]),ge,We,ne,ae,xe,Ee,we),Te++}}else if(Te>Ue)for(;Te<=Ie;)B(q[Te],ne,ae,!0),Te++;else{const Le=Te,We=Te,ze=new Map;for(Te=We;Te<=Ue;Te++){const vt=Y[Te]=we?Oi(Y[Te]):hs(Y[Te]);vt.key!=null&&ze.set(vt.key,Te)}let _e,ye=0;const Se=Ue-We+1;let Re=!1,He=0;const it=new Array(Se);for(Te=0;Te<Se;Te++)it[Te]=0;for(Te=Le;Te<=Ie;Te++){const vt=q[Te];if(ye>=Se){B(vt,ne,ae,!0);continue}let Mt;if(vt.key!=null)Mt=ze.get(vt.key);else for(_e=We;_e<=Ue;_e++)if(it[_e-We]===0&&Ys(vt,Y[_e])){Mt=_e;break}Mt===void 0?B(vt,ne,ae,!0):(it[Mt-We]=Te+1,Mt>=He?He=Mt:Re=!0,g(vt,Y[Mt],ge,null,ne,ae,xe,Ee,we),ye++)}const mt=Re?jP(it):$l;for(_e=mt.length-1,Te=Se-1;Te>=0;Te--){const vt=We+Te,Mt=Y[vt],dt=vt+1<Ge?Y[vt+1].el:re;it[Te]===0?g(null,Mt,ge,dt,ne,ae,xe,Ee,we):Re&&(_e<0||Te!==mt[_e]?H(Mt,ge,dt,2):_e--)}}},H=(q,Y,ge,re,ne=null)=>{const{el:ae,type:xe,transition:Ee,children:we,shapeFlag:Te}=q;if(Te&6){H(q.component.subTree,Y,ge,re);return}if(Te&128){q.suspense.move(Y,ge,re);return}if(Te&64){xe.move(q,Y,ge,Q);return}if(xe===Fe){n(ae,Y,ge);for(let Ie=0;Ie<we.length;Ie++)H(we[Ie],Y,ge,re);n(q.anchor,Y,ge);return}if(xe===Do){y(q,Y,ge);return}if(re!==2&&Te&1&&Ee)if(re===0)Ee.beforeEnter(ae),n(ae,Y,ge),Zr(()=>Ee.enter(ae),ne);else{const{leave:Ie,delayLeave:Ue,afterLeave:Le}=Ee,We=()=>{q.ctx.isUnmounted?s(ae):n(ae,Y,ge)},ze=()=>{Ie(ae,()=>{We(),Le&&Le()})};Ue?Ue(ae,We,ze):ze()}else n(ae,Y,ge)},B=(q,Y,ge,re=!1,ne=!1)=>{const{type:ae,props:xe,ref:Ee,children:we,dynamicChildren:Te,shapeFlag:Ge,patchFlag:Ie,dirs:Ue,cacheIndex:Le}=q;if(Ie===-2&&(ne=!1),Ee!=null&&(ai(),zl(Ee,null,ge,q,!0),ii()),Le!=null&&(Y.renderCache[Le]=void 0),Ge&256){Y.ctx.deactivate(q);return}const We=Ge&1&&Ue,ze=!Ki(q);let _e;if(ze&&(_e=xe&&xe.onVnodeBeforeUnmount)&&ds(_e,Y,q),Ge&6)ee(q.component,ge,re);else{if(Ge&128){q.suspense.unmount(ge,re);return}We&&Ea(q,null,Y,"beforeUnmount"),Ge&64?q.type.remove(q,Y,ge,Q,re):Te&&!Te.hasOnce&&(ae!==Fe||Ie>0&&Ie&64)?me(Te,Y,ge,!1,!0):(ae===Fe&&Ie&384||!ne&&Ge&16)&&me(we,Y,ge),re&&W(q)}(ze&&(_e=xe&&xe.onVnodeUnmounted)||We)&&Zr(()=>{_e&&ds(_e,Y,q),We&&Ea(q,null,Y,"unmounted")},ge)},W=q=>{const{type:Y,el:ge,anchor:re,transition:ne}=q;if(Y===Fe){K(ge,re);return}if(Y===Do){C(q);return}const ae=()=>{s(ge),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(q.shapeFlag&1&&ne&&!ne.persisted){const{leave:xe,delayLeave:Ee}=ne,we=()=>xe(ge,ae);Ee?Ee(q.el,ae,we):we()}else ae()},K=(q,Y)=>{let ge;for(;q!==Y;)ge=f(q),s(q),q=ge;s(Y)},ee=(q,Y,ge)=>{const{bum:re,scope:ne,job:ae,subTree:xe,um:Ee,m:we,a:Te,parent:Ge,slots:{__:Ie}}=q;S0(we),S0(Te),re&&Gl(re),Ge&&ut(Ie)&&Ie.forEach(Ue=>{Ge.renderCache[Ue]=void 0}),ne.stop(),ae&&(ae.flags|=8,B(xe,q,Y,ge)),Ee&&Zr(Ee,Y),Zr(()=>{q.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&q.asyncDep&&!q.asyncResolved&&q.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},me=(q,Y,ge,re=!1,ne=!1,ae=0)=>{for(let xe=ae;xe<q.length;xe++)B(q[xe],Y,ge,re,ne)},le=q=>{if(q.shapeFlag&6)return le(q.component.subTree);if(q.shapeFlag&128)return q.suspense.next();const Y=f(q.anchor||q.el),ge=Y&&Y[BS];return ge?f(ge):Y};let he=!1;const Z=(q,Y,ge)=>{q==null?Y._vnode&&B(Y._vnode,null,null,!0):g(Y._vnode||null,q,Y,null,null,null,ge),Y._vnode=q,he||(he=!0,Py(),_0(),he=!1)},Q={p:g,um:B,m:H,r:W,mt:O,mc:S,pc:V,pbc:b,n:le,o:t};let ve,X;return e&&([ve,X]=e(Q)),{render:Z,hydrate:ve,createApp:NP(Z,ve)}}function Mp({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function vo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function vT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Qv(t,e,r=!1){const n=t.children,s=e.children;if(ut(n)&&ut(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Oi(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&Qv(a,o)),o.type===qi&&(o.el=a.el),o.type===jr&&!o.el&&(o.el=a.el)}}function jP(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function xT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xT(e)}function S0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const yT=Symbol.for("v-scx"),ET=()=>As(yT);function HP(t,e){return Cd(t,null,e)}function GP(t,e){return Cd(t,null,{flush:"post"})}function _T(t,e){return Cd(t,null,{flush:"sync"})}function Ut(t,e,r){return Cd(t,e,r)}function Cd(t,e,r=Wt){const{immediate:n,deep:s,flush:i,once:a}=r,o=hr({},r),l=e&&n||!e&&i!=="post";let c;if(ac){if(i==="sync"){const p=ET();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Os,p.resume=Os,p.pause=Os,p}}const u=tn;o.call=(p,m,g)=>Ls(p,u,m,g);let d=!1;i==="post"?o.scheduler=p=>{Zr(p,u&&u.suspense)}:i!=="sync"&&(d=!0,o.scheduler=(p,m)=>{m?p():Vv(p)}),o.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=FD(t,e,o);return ac&&(c?c.push(f):l&&f()),f}function WP(t,e,r){const n=this.proxy,s=yr(t)?t.includes(".")?bT(n,t):()=>n[t]:t.bind(n,n);let i;Et(e)?i=e:(i=e.handler,r=e);const a=Uo(this),o=Cd(s,i.bind(n),r);return a(),o}function bT(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function zP(t,e,r=Wt){const n=Vs(),s=Tn(e),i=ps(e),a=ST(t,s),o=kS((l,c)=>{let u,d=Wt,f;return _T(()=>{const p=t[s];ts(u,p)&&(u=p,c())}),{get(){return l(),r.get?r.get(u):u},set(p){const m=r.set?r.set(p):p;if(!ts(m,u)&&!(d!==Wt&&ts(p,d)))return;const g=n.vnode.props;g&&(e in g||s in g||i in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${i}`in g)||(u=p,c()),n.emit(`update:${e}`,m),ts(p,m)&&ts(p,d)&&!ts(m,f)&&c(),d=p,f=m}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Wt:o,done:!1}:{done:!0}}}},o}const ST=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Tn(e)}Modifiers`]||t[`${ps(e)}Modifiers`];function KP(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Wt;let s=r;const i=e.startsWith("update:"),a=i&&ST(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>yr(u)?u.trim():u)),a.number&&(s=r.map(m0)));let o,l=n[o=gu(e)]||n[o=gu(Tn(e))];!l&&i&&(l=n[o=gu(ps(e))]),l&&Ls(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ls(c,t,6,s)}}function TT(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!Et(t)){const l=c=>{const u=TT(c,e,!0);u&&(o=!0,hr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(ur(t)&&n.set(t,null),null):(ut(i)?i.forEach(l=>a[l]=null):hr(a,i),ur(t)&&n.set(t,a),a)}function Rh(t,e){return!t||!Sd(e)?!1:(e=e.slice(2).replace(/Once$/,""),rr(t,e[0].toLowerCase()+e.slice(1))||rr(t,ps(e))||rr(t,e))}function Qf(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:m,inheritAttrs:g}=t,v=Ju(t);let E,x;try{if(r.shapeFlag&4){const C=s||n,P=C;E=hs(c.call(P,C,u,d,p,f,m)),x=o}else{const C=e;E=hs(C.length>1?C(d,{attrs:o,slots:a,emit:l}):C(d,null)),x=e.props?o:XP(o)}}catch(C){bu.length=0,Jo(C,t,1),E=st(jr)}let y=E;if(x&&g!==!1){const C=Object.keys(x),{shapeFlag:P}=y;C.length&&P&7&&(i&&C.some(wv)&&(x=YP(x,i)),y=Ia(y,x,!1,!0))}return r.dirs&&(y=Ia(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(r.dirs):r.dirs),r.transition&&li(y,r.transition),E=y,Ju(v),E}function qP(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(ci(s)){if(s.type!==jr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const XP=t=>{let e;for(const r in t)(r==="class"||r==="style"||Sd(r))&&((e||(e={}))[r]=t[r]);return e},YP=(t,e)=>{const r={};for(const n in t)(!wv(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function QP(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Hy(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==n[f]&&!Rh(c,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Hy(n,a,c):!0:!!a;return!1}function Hy(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!Rh(r,i))return!0}return!1}function Oh({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const T0=t=>t.__isSuspense;let bg=0;const JP={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)eF(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}tF(t,e,r,n,s,a,o,l,c)}},hydrate:rF,normalize:nF},ZP=JP;function ed(t,e){const r=t.props&&t.props[e];Et(r)&&r()}function eF(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=AT(t,s,n,e,d,r,i,a,o,l);c(null,f.pendingBranch=t.ssContent,d,null,n,f,i,a),f.deps>0?(ed(t,"onPending"),ed(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),Kl(f,t.ssFallback)):f.resolve(!1,!0)}function tF(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,p=e.ssFallback,{activeBranch:m,pendingBranch:g,isInFallback:v,isHydrating:E}=d;if(g)d.pendingBranch=f,Ys(f,g)?(l(g,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():v&&(E||(l(m,p,r,n,s,null,i,a,o),Kl(d,p)))):(d.pendingId=bg++,E?(d.isHydrating=!1,d.activeBranch=g):c(g,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),v?(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():(l(m,p,r,n,s,null,i,a,o),Kl(d,p))):m&&Ys(f,m)?(l(m,f,r,n,s,d,i,a,o),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0&&d.resolve()));else if(m&&Ys(f,m))l(m,f,r,n,s,d,i,a,o),Kl(d,f);else if(ed(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=bg++,l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0)d.resolve();else{const{timeout:x,pendingId:y}=d;x>0?setTimeout(()=>{d.pendingId===y&&d.fallback(p)},x):x===0&&d.fallback(p)}}function AT(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:d,m:f,um:p,n:m,o:{parentNode:g,remove:v}}=c;let E;const x=sF(t);x&&e&&e.pendingBranch&&(E=e.pendingId,e.deps++);const y=t.props?g0(t.props.timeout):void 0,C=i,P={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:bg++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(k=!1,w=!1){const{vnode:S,activeBranch:_,pendingBranch:b,pendingId:T,effects:I,parentComponent:D,container:O}=P;let R=!1;P.isHydrating?P.isHydrating=!1:k||(R=_&&b.transition&&b.transition.mode==="out-in",R&&(_.transition.afterLeave=()=>{T===P.pendingId&&(f(b,O,i===C?m(_):i,0),Yu(I))}),_&&(g(_.el)===O&&(i=m(_)),p(_,D,P,!0)),R||f(b,O,i,0)),Kl(P,b),P.pendingBranch=null,P.isInFallback=!1;let F=P.parent,N=!1;for(;F;){if(F.pendingBranch){F.effects.push(...I),N=!0;break}F=F.parent}!N&&!R&&Yu(I),P.effects=[],x&&e&&e.pendingBranch&&E===e.pendingId&&(e.deps--,e.deps===0&&!w&&e.resolve()),ed(S,"onResolve")},fallback(k){if(!P.pendingBranch)return;const{vnode:w,activeBranch:S,parentComponent:_,container:b,namespace:T}=P;ed(w,"onFallback");const I=m(S),D=()=>{P.isInFallback&&(d(null,k,b,I,_,null,T,o,l),Kl(P,k))},O=k.transition&&k.transition.mode==="out-in";O&&(S.transition.afterLeave=D),P.isInFallback=!0,p(S,_,null,!0),O||D()},move(k,w,S){P.activeBranch&&f(P.activeBranch,k,w,S),P.container=k},next(){return P.activeBranch&&m(P.activeBranch)},registerDep(k,w,S){const _=!!P.pendingBranch;_&&P.deps++;const b=k.vnode.el;k.asyncDep.catch(T=>{Jo(T,k,0)}).then(T=>{if(k.isUnmounted||P.isUnmounted||P.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:I}=k;wg(k,T,!1),b&&(I.el=b);const D=!b&&k.subTree.el;w(k,I,g(b||k.subTree.el),b?null:m(k.subTree),P,a,S),D&&v(D),Oh(k,I.el),_&&--P.deps===0&&P.resolve()})},unmount(k,w){P.isUnmounted=!0,P.activeBranch&&p(P.activeBranch,r,k,w),P.pendingBranch&&p(P.pendingBranch,r,k,w)}};return P}function rF(t,e,r,n,s,i,a,o,l){const c=e.suspense=AT(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function nF(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=Gy(n?r.default:r),t.ssFallback=n?Gy(r.fallback):st(jr)}function Gy(t){let e;if(Et(t)){const r=Bo&&t._c;r&&(t._d=!1,U()),t=t(),r&&(t._d=!0,e=jn,CT())}return ut(t)&&(t=qP(t)),t=hs(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function wT(t,e){e&&e.pendingBranch?ut(t)?e.effects.push(...t):e.effects.push(t):Yu(t)}function Kl(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,Oh(n,s))}function sF(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Fe=Symbol.for("v-fgt"),qi=Symbol.for("v-txt"),jr=Symbol.for("v-cmt"),Do=Symbol.for("v-stc"),bu=[];let jn=null;function U(t=!1){bu.push(jn=t?null:[])}function CT(){bu.pop(),jn=bu[bu.length-1]||null}let Bo=1;function Sg(t,e=!1){Bo+=t,t<0&&jn&&e&&(jn.hasOnce=!0)}function IT(t){return t.dynamicChildren=Bo>0?jn||$l:null,CT(),Bo>0&&jn&&jn.push(t),t}function j(t,e,r,n,s,i){return IT(h(t,e,r,n,s,i,!0))}function Xr(t,e,r,n,s){return IT(st(t,e,r,n,s,!0))}function ci(t){return t?t.__v_isVNode===!0:!1}function Ys(t,e){return t.type===e.type&&t.key===e.key}function aF(t){}const kT=({key:t})=>t??null,Jf=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?yr(t)||br(t)||Et(t)?{i:rn,r:t,k:e,f:!!r}:t:null);function h(t,e=null,r=null,n=0,s=null,i=t===Fe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kT(e),ref:e&&Jf(e),scopeId:Ch,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:rn};return o?(Jv(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=yr(r)?8:16),Bo>0&&!a&&jn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&jn.push(l),l}const st=iF;function iF(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===eT)&&(t=jr),ci(t)){const o=Ia(t,e,!0);return r&&Jv(o,r),Bo>0&&!i&&jn&&(o.shapeFlag&6?jn[jn.indexOf(t)]=o:jn.push(o)),o.patchFlag=-2,o}if(hF(t)&&(t=t.__vccOpts),e){e=DT(e);let{class:o,style:l}=e;o&&!yr(o)&&(e.class=et(o)),ur(l)&&(Ah(l)&&!ut(l)&&(l=hr({},l)),e.style=_n(l))}const a=yr(t)?1:T0(t)?128:US(t)?64:ur(t)?4:Et(t)?2:0;return h(t,e,r,n,s,a,i,!0)}function DT(t){return t?Ah(t)||lT(t)?hr({},t):t:null}function Ia(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?PT(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&kT(c),ref:e&&e.ref?r&&i?ut(i)?i.concat(Jf(e)):[i,Jf(e)]:Jf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ia(t.ssContent),ssFallback:t.ssFallback&&Ia(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&li(u,l.clone(u)),u}function Ne(t=" ",e=0){return st(qi,null,t,e)}function Sn(t,e){const r=st(Do,null,t);return r.staticCount=e,r}function Ae(t="",e=!1){return e?(U(),Xr(jr,null,t)):st(jr,null,t)}function hs(t){return t==null||typeof t=="boolean"?st(jr):ut(t)?st(Fe,null,t.slice()):ci(t)?Oi(t):st(qi,null,String(t))}function Oi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ia(t)}function Jv(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ut(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Jv(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!lT(e)?e._ctx=rn:s===3&&rn&&(rn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Et(e)?(e={default:e,_ctx:rn},r=32):(e=String(e),n&64?(r=16,e=[Ne(e)]):r=8);t.children=e,t.shapeFlag|=r}function PT(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=et([e.class,n.class]));else if(s==="style")e.style=_n([e.style,n.style]);else if(Sd(s)){const i=e[s],a=n[s];a&&i!==a&&!(ut(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function ds(t,e,r,n=null){Ls(t,e,7,[r,n])}const oF=sT();let lF=0;function FT(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||oF,i={uid:lF++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uT(n,s),emitsOptions:TT(n,s),emit:null,emitted:null,propsDefaults:Wt,inheritAttrs:n.inheritAttrs,ctx:Wt,data:Wt,props:Wt,attrs:Wt,slots:Wt,refs:Wt,setupState:Wt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=KP.bind(null,i),t.ce&&t.ce(i),i}let tn=null;const Vs=()=>tn||rn;let A0,Tg;{const t=yh(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};A0=e("__VUE_INSTANCE_SETTERS__",r=>tn=r),Tg=e("__VUE_SSR_SETTERS__",r=>ac=r)}const Uo=t=>{const e=tn;return A0(t),t.scope.on(),()=>{t.scope.off(),A0(e)}},Ag=()=>{tn&&tn.scope.off(),A0(null)};function RT(t){return t.vnode.shapeFlag&4}let ac=!1;function OT(t,e=!1,r=!1){e&&Tg(e);const{props:n,children:s}=t.vnode,i=RT(t);MP(t,n,i,e),VP(t,s,r||e);const a=i?cF(t,e):void 0;return e&&Tg(!1),a}function cF(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,xg);const{setup:n}=r;if(n){ai();const s=t.setupContext=n.length>1?MT(t):null,i=Uo(t),a=Sc(n,t,0,[t.props,s]),o=Iv(a);if(ii(),i(),(o||t.sp)&&!Ki(t)&&Hv(t),o){if(a.then(Ag,Ag),e)return a.then(l=>{wg(t,l,e)}).catch(l=>{Jo(l,t,0)});t.asyncDep=a}else wg(t,a,e)}else NT(t,e)}function wg(t,e,r){Et(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ur(e)&&(t.setupState=Uv(e)),NT(t,r)}let w0,Cg;function uF(t){w0=t,Cg=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,mP))}}const dF=()=>!w0;function NT(t,e,r){const n=t.type;if(!t.render){if(!e&&w0&&!n.render){const s=n.template||qv(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=hr(hr({isCustomElement:i,delimiters:o},a),l);n.render=w0(s,c)}}t.render=n.render||Os,Cg&&Cg(t)}{const s=Uo(t);ai();try{kP(t)}finally{ii(),s()}}}const fF={get(t,e){return Bn(t,"get",""),t[e]}};function MT(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,fF),slots:t.slots,emit:t.emit,expose:e}}function Id(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Uv(wh(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Eu)return Eu[r](t)},has(e,r){return r in e||r in Eu}})):t.proxy}function Ig(t,e=!0){return Et(t)?t.displayName||t.name:t.name||e&&t.__name}function hF(t){return Et(t)&&"__vccOpts"in t}const be=(t,e)=>ID(t,e,ac);function Nh(t,e,r){const n=arguments.length;return n===2?ur(e)&&!ut(e)?ci(e)?st(t,null,[e]):st(t,e):st(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&ci(r)&&(r=[r]),st(t,e,r))}function pF(){}function mF(t,e,r,n){const s=r[n];if(s&&LT(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function LT(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(ts(r[n],e[n]))return!1;return Bo>0&&jn&&jn.push(t),!0}const BT="3.5.17",gF=Os,vF=LD,xF=kl,yF=LS,EF={createComponentInstance:FT,setupComponent:OT,renderComponentRoot:Qf,setCurrentRenderingInstance:Ju,isVNode:ci,normalizeVNode:hs,getComponentPublicInstance:Id,ensureValidVNode:Kv,pushWarningContext:RD,popWarningContext:OD},_F=EF,bF=null,SF=null,TF=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kg;const Wy=typeof window<"u"&&window.trustedTypes;if(Wy)try{kg=Wy.createPolicy("vue",{createHTML:t=>t})}catch{}const UT=kg?t=>kg.createHTML(t):t=>t,AF="http://www.w3.org/2000/svg",wF="http://www.w3.org/1998/Math/MathML",Ga=typeof document<"u"?document:null,zy=Ga&&Ga.createElement("template"),CF={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Ga.createElementNS(AF,t):e==="mathml"?Ga.createElementNS(wF,t):r?Ga.createElement(t,{is:r}):Ga.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Ga.createTextNode(t),createComment:t=>Ga.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ga.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{zy.innerHTML=UT(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=zy.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ti="transition",Wc="animation",ic=Symbol("_vtc"),VT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},$T=hr({},jv,VT),IF=t=>(t.displayName="Transition",t.props=$T,t),kF=IF((t,{slots:e})=>Nh(GS,jT(t),e)),xo=(t,e=[])=>{ut(t)?t.forEach(r=>r(...e)):t&&t(...e)},Ky=t=>t?ut(t)?t.some(e=>e.length>1):t.length>1:!1;function jT(t){const e={};for(const I in t)I in VT||(e[I]=t[I]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,m=DF(s),g=m&&m[0],v=m&&m[1],{onBeforeEnter:E,onEnter:x,onEnterCancelled:y,onLeave:C,onLeaveCancelled:P,onBeforeAppear:k=E,onAppear:w=x,onAppearCancelled:S=y}=e,_=(I,D,O,R)=>{I._enterCancelled=R,ki(I,D?u:o),ki(I,D?c:a),O&&O()},b=(I,D)=>{I._isLeaving=!1,ki(I,d),ki(I,p),ki(I,f),D&&D()},T=I=>(D,O)=>{const R=I?w:x,F=()=>_(D,I,O);xo(R,[D,F]),qy(()=>{ki(D,I?l:i),va(D,I?u:o),Ky(R)||Xy(D,n,g,F)})};return hr(e,{onBeforeEnter(I){xo(E,[I]),va(I,i),va(I,a)},onBeforeAppear(I){xo(k,[I]),va(I,l),va(I,c)},onEnter:T(!1),onAppear:T(!0),onLeave(I,D){I._isLeaving=!0;const O=()=>b(I,D);va(I,d),I._enterCancelled?(va(I,f),Dg()):(Dg(),va(I,f)),qy(()=>{I._isLeaving&&(ki(I,d),va(I,p),Ky(C)||Xy(I,n,v,O))}),xo(C,[I,O])},onEnterCancelled(I){_(I,!1,void 0,!0),xo(y,[I])},onAppearCancelled(I){_(I,!0,void 0,!0),xo(S,[I])},onLeaveCancelled(I){b(I),xo(P,[I])}})}function DF(t){if(t==null)return null;if(ur(t))return[Lp(t.enter),Lp(t.leave)];{const e=Lp(t);return[e,e]}}function Lp(t){return g0(t)}function va(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[ic]||(t[ic]=new Set)).add(e)}function ki(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[ic];r&&(r.delete(e),r.size||(t[ic]=void 0))}function qy(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let PF=0;function Xy(t,e,r,n){const s=t._endId=++PF,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=HT(t,e);if(!a)return n();const c=a+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,f)}function HT(t,e){const r=window.getComputedStyle(t),n=m=>(r[m]||"").split(", "),s=n(`${Ti}Delay`),i=n(`${Ti}Duration`),a=Yy(s,i),o=n(`${Wc}Delay`),l=n(`${Wc}Duration`),c=Yy(o,l);let u=null,d=0,f=0;e===Ti?a>0&&(u=Ti,d=a,f=i.length):e===Wc?c>0&&(u=Wc,d=c,f=l.length):(d=Math.max(a,c),u=d>0?a>c?Ti:Wc:null,f=u?u===Ti?i.length:l.length:0);const p=u===Ti&&/\b(transform|all)(,|$)/.test(n(`${Ti}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function Yy(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>Qy(r)+Qy(t[n])))}function Qy(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Dg(){return document.body.offsetHeight}function FF(t,e,r){const n=t[ic];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const C0=Symbol("_vod"),GT=Symbol("_vsh"),WT={beforeMount(t,{value:e},{transition:r}){t[C0]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):zc(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),zc(t,!0),n.enter(t)):n.leave(t,()=>{zc(t,!1)}):zc(t,e))},beforeUnmount(t,{value:e}){zc(t,e)}};function zc(t,e){t.style.display=e?t[C0]:"none",t[GT]=!e}function RF(){WT.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const zT=Symbol("");function OF(t){const e=Vs();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>I0(i,s))},n=()=>{const s=t(e.proxy);e.ce?I0(e.ce,s):Pg(e.subTree,s),r(s)};Gv(()=>{Yu(n)}),jt(()=>{Ut(n,Os,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),Ra(()=>s.disconnect())})}function Pg(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{Pg(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)I0(t.el,e);else if(t.type===Fe)t.children.forEach(r=>Pg(r,e));else if(t.type===Do){let{el:r,anchor:n}=t;for(;r&&(I0(r,e),r!==n);)r=r.nextSibling}}function I0(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[zT]=n}}const NF=/(^|;)\s*display\s*:/;function MF(t,e,r){const n=t.style,s=yr(r);let i=!1;if(r&&!s){if(e)if(yr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&Zf(n,o,"")}else for(const a in e)r[a]==null&&Zf(n,a,"");for(const a in r)a==="display"&&(i=!0),Zf(n,a,r[a])}else if(s){if(e!==r){const a=n[zT];a&&(r+=";"+a),n.cssText=r,i=NF.test(r)}}else e&&t.removeAttribute("style");C0 in t&&(t[C0]=i?n.display:"",t[GT]&&(n.display="none"))}const Jy=/\s*!important$/;function Zf(t,e,r){if(ut(r))r.forEach(n=>Zf(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=LF(t,e);Jy.test(r)?t.setProperty(ps(n),r.replace(Jy,""),"important"):t[n]=r}}const Zy=["Webkit","Moz","ms"],Bp={};function LF(t,e){const r=Bp[e];if(r)return r;let n=Tn(e);if(n!=="filter"&&n in t)return Bp[e]=n;n=Td(n);for(let s=0;s<Zy.length;s++){const i=Zy[s]+n;if(i in t)return Bp[e]=i}return e}const eE="http://www.w3.org/1999/xlink";function tE(t,e,r,n,s,i=Xk(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(eE,e.slice(6,e.length)):t.setAttributeNS(eE,e,r):r==null||i&&!cS(r)?t.removeAttribute(e):t.setAttribute(e,i?"":ia(r)?String(r):r)}function rE(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?UT(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=cS(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function Ka(t,e,r,n){t.addEventListener(e,r,n)}function BF(t,e,r,n){t.removeEventListener(e,r,n)}const nE=Symbol("_vei");function UF(t,e,r,n,s=null){const i=t[nE]||(t[nE]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=VF(e);if(n){const c=i[e]=HF(n,s);Ka(t,o,c,l)}else a&&(BF(t,o,a,l),i[e]=void 0)}}const sE=/(?:Once|Passive|Capture)$/;function VF(t){let e;if(sE.test(t)){e={};let n;for(;n=t.match(sE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ps(t.slice(2)),e]}let Up=0;const $F=Promise.resolve(),jF=()=>Up||($F.then(()=>Up=0),Up=Date.now());function HF(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ls(GF(n,r.value),e,5,[n])};return r.value=t,r.attached=jF(),r}function GF(t,e){if(ut(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const aE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,WF=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?FF(t,n,a):e==="style"?MF(t,r,n):Sd(e)?wv(e)||UF(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):zF(t,e,n,a))?(rE(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&tE(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!yr(n))?rE(t,Tn(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),tE(t,e,n,a))};function zF(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&aE(e)&&Et(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return aE(e)&&yr(r)?!1:e in t}const iE={};/*! #__NO_SIDE_EFFECTS__ */function KT(t,e,r){const n=Ad(t,e);vh(n)&&hr(n,e);class s extends Mh{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const KF=(t,e)=>KT(t,e,aA),qF=typeof HTMLElement<"u"?HTMLElement:class{};class Mh extends qF{constructor(e,r={},n=D0){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==D0?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Mh){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,Zo(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!ut(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=g0(this._props[l])),(o||(o=Object.create(null)))[Tn(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)rr(this,n)||Object.defineProperty(this,n,{get:()=>oe(r[n])})}_resolveProps(e){const{props:r}=e,n=ut(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(Tn))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):iE;const s=Tn(e);r&&this._numberProps&&this._numberProps[s]&&(n=g0(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===iE?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(ps(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(ps(e),r+""):r||this.removeAttribute(ps(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),sA(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=st(this._def,hr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,vh(a[0])?hr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),ps(i)!==i&&s(ps(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function qT(t){const e=Vs(),r=e&&e.ce;return r||null}function XF(){const t=qT();return t&&t.shadowRoot}function YF(t="$style"){{const e=Vs();if(!e)return Wt;const r=e.type.__cssModules;if(!r)return Wt;const n=r[t];return n||Wt}}const XT=new WeakMap,YT=new WeakMap,k0=Symbol("_moveCb"),oE=Symbol("_enterCb"),QF=t=>(delete t.props.mode,t),JF=QF({name:"TransitionGroup",props:hr({},$T,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Vs(),n=$v();let s,i;return Ph(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!nR(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(eR),s.forEach(tR);const o=s.filter(rR);Dg(),o.forEach(l=>{const c=l.el,u=c.style;va(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[k0]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[k0]=null,ki(c,a))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const a=Ht(t),o=jT(a);let l=a.tag||Fe;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),li(u,sc(u,o,n,r)),XT.set(u,u.el.getBoundingClientRect()))}i=e.default?kh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&li(u,sc(u,o,n,r))}return st(l,null,i)}}}),ZF=JF;function eR(t){const e=t.el;e[k0]&&e[k0](),e[oE]&&e[oE]()}function tR(t){YT.set(t,t.el.getBoundingClientRect())}function rR(t){const e=XT.get(t),r=YT.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function nR(t,e,r){const n=t.cloneNode(),s=t[ic];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=HT(n);return i.removeChild(n),a}const eo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ut(e)?r=>Gl(e,r):e};function sR(t){t.target.composing=!0}function lE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ns=Symbol("_assign"),At={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Ns]=eo(s);const i=n||s.props&&s.props.type==="number";Ka(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=m0(o)),t[Ns](o)}),r&&Ka(t,"change",()=>{t.value=t.value.trim()}),e||(Ka(t,"compositionstart",sR),Ka(t,"compositionend",lE),Ka(t,"change",lE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Ns]=eo(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?m0(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},xt={deep:!0,created(t,e,r){t[Ns]=eo(r),Ka(t,"change",()=>{const n=t._modelValue,s=oc(t),i=t.checked,a=t[Ns];if(ut(n)){const o=Eh(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Qo(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(QT(t,i))})},mounted:cE,beforeUpdate(t,e,r){t[Ns]=eo(r),cE(t,e,r)}};function cE(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(ut(e))s=Eh(e,n.props.value)>-1;else if(Qo(e))s=e.has(n.props.value);else{if(e===r)return;s=Zi(e,QT(t,!0))}t.checked!==s&&(t.checked=s)}const ra={created(t,{value:e},r){t.checked=Zi(e,r.props.value),t[Ns]=eo(r),Ka(t,"change",()=>{t[Ns](oc(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Ns]=eo(n),e!==r&&(t.checked=Zi(e,n.props.value))}},vr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=Qo(e);Ka(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?m0(oc(a)):oc(a));t[Ns](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Zo(()=>{t._assigning=!1})}),t[Ns]=eo(n)},mounted(t,{value:e}){uE(t,e)},beforeUpdate(t,e,r){t[Ns]=eo(r)},updated(t,{value:e}){t._assigning||uE(t,e)}};function uE(t,e){const r=t.multiple,n=ut(e);if(!(r&&!n&&!Qo(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=oc(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=Eh(e,o)>-1}else a.selected=e.has(o);else if(Zi(oc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function oc(t){return"_value"in t?t._value:t.value}function QT(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const JT={created(t,e,r){bf(t,e,r,null,"created")},mounted(t,e,r){bf(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){bf(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){bf(t,e,r,n,"updated")}};function ZT(t,e){switch(t){case"SELECT":return vr;case"TEXTAREA":return At;default:switch(e){case"checkbox":return xt;case"radio":return ra;default:return At}}}function bf(t,e,r,n,s){const a=ZT(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function aR(){At.getSSRProps=({value:t})=>({value:t}),ra.getSSRProps=({value:t},e)=>{if(e.props&&Zi(e.props.value,t))return{checked:!0}},xt.getSSRProps=({value:t},e)=>{if(ut(t)){if(e.props&&Eh(t,e.props.value)>-1)return{checked:!0}}else if(Qo(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},JT.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=ZT(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const iR=["ctrl","shift","alt","meta"],oR={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>iR.some(r=>t[`${r}Key`]&&!e.includes(r))},fn=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=oR[e[a]];if(o&&o(s,e))return}return t(s,...i)})},lR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},eA=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=ps(s.key);if(e.some(a=>a===i||lR[a]===i))return t(s)})},tA=hr({patchProp:WF},CF);let Su,dE=!1;function rA(){return Su||(Su=pT(tA))}function nA(){return Su=dE?Su:mT(tA),dE=!0,Su}const sA=(...t)=>{rA().render(...t)},cR=(...t)=>{nA().hydrate(...t)},D0=(...t)=>{const e=rA().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=oA(n);if(!s)return;const i=e._component;!Et(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,iA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},aA=(...t)=>{const e=nA().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=oA(n);if(s)return r(s,!0,iA(s))},e};function iA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function oA(t){return yr(t)?document.querySelector(t):t}let fE=!1;const uR=()=>{fE||(fE=!0,aR(),RF())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const dR=()=>{},fR=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:GS,BaseTransitionPropsValidators:jv,Comment:jr,DeprecationTypes:TF,EffectScope:Dv,ErrorCodes:MD,ErrorTypeStrings:vF,Fragment:Fe,KeepAlive:lP,ReactiveEffect:Ku,Static:Do,Suspense:ZP,Teleport:GD,Text:qi,TrackOpTypes:kD,Transition:kF,TransitionGroup:ZF,TriggerOpTypes:DD,VueElement:Mh,assertNumber:ND,callWithAsyncErrorHandling:Ls,callWithErrorHandling:Sc,camelize:Tn,capitalize:Td,cloneVNode:Ia,compatUtils:SF,compile:dR,computed:be,createApp:D0,createBlock:Xr,createCommentVNode:Ae,createElementBlock:j,createElementVNode:h,createHydrationRenderer:mT,createPropsRestProxy:CP,createRenderer:pT,createSSRApp:aA,createSlots:hP,createStaticVNode:Sn,createTextVNode:Ne,createVNode:st,customRef:kS,defineAsyncComponent:iP,defineComponent:Ad,defineCustomElement:KT,defineEmits:vP,defineExpose:xP,defineModel:_P,defineOptions:yP,defineProps:gP,defineSSRCustomElement:KF,defineSlots:EP,devtools:xF,effect:Jk,effectScope:Pv,getCurrentInstance:Vs,getCurrentScope:Fv,getCurrentWatcher:PD,getTransitionRawChildren:kh,guardReactiveProps:DT,h:Nh,handleError:Jo,hasInjectionContext:aT,hydrate:cR,hydrateOnIdle:eP,hydrateOnInteraction:sP,hydrateOnMediaQuery:nP,hydrateOnVisible:rP,initCustomFormatter:pF,initDirectivesForSSR:uR,inject:As,isMemoSame:LT,isProxy:Ah,isReactive:Sa,isReadonly:oi,isRef:br,isRuntimeOnly:dF,isShallow:Ts,isVNode:ci,markRaw:wh,mergeDefaults:AP,mergeModels:wP,mergeProps:PT,nextTick:Zo,normalizeClass:et,normalizeProps:Kk,normalizeStyle:_n,onActivated:zS,onBeforeMount:XS,onBeforeUnmount:Fh,onBeforeUpdate:Gv,onDeactivated:KS,onErrorCaptured:ZS,onMounted:jt,onRenderTracked:JS,onRenderTriggered:QS,onScopeDispose:fS,onServerPrefetch:YS,onUnmounted:Ra,onUpdated:Ph,onWatcherCleanup:FS,openBlock:U,popScopeId:$D,provide:_u,proxyRefs:Uv,pushScopeId:VD,queuePostFlushCb:Yu,reactive:Cs,readonly:Lv,ref:ue,registerRuntimeCompiler:uF,render:sA,renderList:je,renderSlot:tT,resolveComponent:Ir,resolveDirective:fP,resolveDynamicComponent:dP,resolveFilter:bF,resolveTransitionHooks:sc,setBlockTracking:Sg,setDevtoolsHook:yF,setTransitionHooks:li,shallowReactive:Mv,shallowReadonly:xD,shallowRef:Bv,ssrContextKey:yT,ssrUtils:_F,stop:Zk,toDisplayString:te,toHandlerKey:gu,toHandlers:pP,toRaw:Ht,toRef:wD,toRefs:DS,toValue:_D,transformVNodeArgs:aF,triggerRef:ED,unref:oe,useAttrs:TP,useCssModule:YF,useCssVars:OF,useHost:qT,useId:zD,useModel:zP,useSSRContext:ET,useShadowRoot:XF,useSlots:SP,useTemplateRef:KD,useTransitionState:$v,vModelCheckbox:xt,vModelDynamic:JT,vModelRadio:ra,vModelSelect:vr,vModelText:At,vShow:WT,version:BT,warn:gF,watch:Ut,watchEffect:HP,watchPostEffect:GP,watchSyncEffect:_T,withAsyncContext:IP,withCtx:Ih,withDefaults:bP,withDirectives:Ve,withKeys:eA,withMemo:mF,withModifiers:fn,withScopeId:jD},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let lA;const Lh=t=>lA=t,cA=Symbol();function Fg(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Tu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Tu||(Tu={}));function hR(){const t=Pv(!0),e=t.run(()=>ue({}));let r=[],n=[];const s=wh({install(i){Lh(s),s._a=i,i.provide(cA,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const uA=()=>{};function hE(t,e,r,n=uA){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&Fv()&&fS(s),s}function _l(t,...e){t.slice().forEach(r=>{r(...e)})}const pR=t=>t(),pE=Symbol(),Vp=Symbol();function Rg(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];Fg(s)&&Fg(n)&&t.hasOwnProperty(r)&&!br(n)&&!Sa(n)?t[r]=Rg(s,n):t[r]=n}return t}const mR=Symbol();function gR(t){return!Fg(t)||!t.hasOwnProperty(mR)}const{assign:Di}=Object;function vR(t){return!!(br(t)&&t.effect)}function xR(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=DS(r.state.value[t]);return Di(u,i,Object.keys(a||{}).reduce((d,f)=>(d[f]=wh(be(()=>{Lh(r);const p=r._s.get(t);return a[f].call(p,p)})),d),{}))}return l=dA(t,c,e,r,n,!0),l}function dA(t,e,r={},n,s,i){let a;const o=Di({actions:{}},r),l={deep:!0};let c,u,d=[],f=[],p;const m=n.state.value[t];!i&&!m&&(n.state.value[t]={}),ue({});let g;function v(S){let _;c=u=!1,typeof S=="function"?(S(n.state.value[t]),_={type:Tu.patchFunction,storeId:t,events:p}):(Rg(n.state.value[t],S),_={type:Tu.patchObject,payload:S,storeId:t,events:p});const b=g=Symbol();Zo().then(()=>{g===b&&(c=!0)}),u=!0,_l(d,_,n.state.value[t])}const E=i?function(){const{state:_}=r,b=_?_():{};this.$patch(T=>{Di(T,b)})}:uA;function x(){a.stop(),d=[],f=[],n._s.delete(t)}const y=(S,_="")=>{if(pE in S)return S[Vp]=_,S;const b=function(){Lh(n);const T=Array.from(arguments),I=[],D=[];function O(N){I.push(N)}function R(N){D.push(N)}_l(f,{args:T,name:b[Vp],store:P,after:O,onError:R});let F;try{F=S.apply(this&&this.$id===t?this:P,T)}catch(N){throw _l(D,N),N}return F instanceof Promise?F.then(N=>(_l(I,N),N)).catch(N=>(_l(D,N),Promise.reject(N))):(_l(I,F),F)};return b[pE]=!0,b[Vp]=_,b},C={_p:n,$id:t,$onAction:hE.bind(null,f),$patch:v,$reset:E,$subscribe(S,_={}){const b=hE(d,S,_.detached,()=>T()),T=a.run(()=>Ut(()=>n.state.value[t],I=>{(_.flush==="sync"?u:c)&&S({storeId:t,type:Tu.direct,events:p},I)},Di({},l,_)));return b},$dispose:x},P=Cs(C);n._s.set(t,P);const w=(n._a&&n._a.runWithContext||pR)(()=>n._e.run(()=>(a=Pv()).run(()=>e({action:y}))));for(const S in w){const _=w[S];if(br(_)&&!vR(_)||Sa(_))i||(m&&gR(_)&&(br(_)?_.value=m[S]:Rg(_,m[S])),n.state.value[t][S]=_);else if(typeof _=="function"){const b=y(_,S);w[S]=b,o.actions[S]=_}}return Di(P,w),Di(Ht(P),w),Object.defineProperty(P,"$state",{get:()=>n.state.value[t],set:S=>{v(_=>{Di(_,S)})}}),n._p.forEach(S=>{Di(P,a.run(()=>S({store:P,app:n._a,pinia:n,options:o})))}),m&&i&&r.hydrate&&r.hydrate(P.$state,m),c=!0,u=!0,P}/*! #__NO_SIDE_EFFECTS__ */function fA(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=aT();return o=o||(c?As(cA,null):null),o&&Lh(o),o=lA,o._s.has(n)||(i?dA(n,e,s,o):xR(n,s,o)),o._s.get(n)}return a.$id=n,a}var mE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},yR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},pA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let f=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(f=64)),n.push(r[u],r[d],r[f],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new ER;const f=i<<2|o>>4;if(n.push(f),c!==64){const p=o<<4&240|c>>2;if(n.push(p),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ER extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _R=function(t){const e=hA(t);return pA.encodeByteArray(e,!0)},P0=function(t){return _R(t).replace(/\./g,"")},mA=function(t){try{return pA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=()=>bR().__FIREBASE_DEFAULTS__,TR=()=>{if(typeof process>"u"||typeof mE>"u")return;const t=mE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mA(t[1]);return e&&JSON.parse(e)},Bh=()=>{try{return SR()||TR()||AR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gA=t=>{var e,r;return(r=(e=Bh())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Zv=t=>{const e=gA(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},vA=()=>{var t;return(t=Bh())===null||t===void 0?void 0:t.config},xA=t=>{var e;return(e=Bh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[P0(JSON.stringify(r)),P0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function IR(){var t;const e=(t=Bh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FR(){const t=Kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RR(){return!IR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OR(){try{return typeof indexedDB=="object"}catch{return!1}}function NR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="FirebaseError";class ua extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=MR,Object.setPrototypeOf(this,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kd.prototype.create)}}class kd{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?LR(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ua(s,o,n)}}function LR(t,e){return t.replace(BR,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const BR=/\{\$([^}]+)}/g;function UR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(gE(i)&&gE(a)){if(!F0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function gE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function VR(t,e){const r=new $R(t,e);return r.subscribe.bind(r)}class $R{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");jR(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=$p),s.error===void 0&&(s.error=$p),s.complete===void 0&&(s.complete=$p);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function $p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){return t&&t._delegate?t._delegate:t}class ui{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new wR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WR(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:GR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GR(t){return t===_o?void 0:t}function WR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new HR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const KR={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},qR=Gt.INFO,XR={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},YR=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=XR[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e1{constructor(e){this.name=e,this._logLevel=qR,this._logHandler=YR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const QR=(t,e)=>e.some(r=>t instanceof r);let vE,xE;function JR(){return vE||(vE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZR(){return xE||(xE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EA=new WeakMap,Og=new WeakMap,_A=new WeakMap,jp=new WeakMap,t1=new WeakMap;function e3(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Xi(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&EA.set(r,t)}).catch(()=>{}),t1.set(e,t),e}function t3(t){if(Og.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Og.set(t,e)}let Ng={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_A.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Xi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r3(t){Ng=t(Ng)}function n3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Hp(this),e,...r);return _A.set(n,e.sort?e.sort():[e]),Xi(n)}:ZR().includes(t)?function(...e){return t.apply(Hp(this),e),Xi(EA.get(this))}:function(...e){return Xi(t.apply(Hp(this),e))}}function s3(t){return typeof t=="function"?n3(t):(t instanceof IDBTransaction&&t3(t),QR(t,JR())?new Proxy(t,Ng):t)}function Xi(t){if(t instanceof IDBRequest)return e3(t);if(jp.has(t))return jp.get(t);const e=s3(t);return e!==t&&(jp.set(t,e),t1.set(e,t)),e}const Hp=t=>t1.get(t);function a3(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Xi(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Xi(a.result),l.oldVersion,l.newVersion,Xi(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const i3=["get","getKey","getAll","getAllKeys","count"],o3=["put","add","delete","clear"],Gp=new Map;function yE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gp.get(e))return Gp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=o3.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||i3.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Gp.set(e,i),i}r3(t=>({...t,get:(e,r,n)=>yE(e,r)||t.get(e,r,n),has:(e,r)=>!!yE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(c3(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function c3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",EE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new e1("@firebase/app"),u3="@firebase/app-compat",d3="@firebase/analytics-compat",f3="@firebase/analytics",h3="@firebase/app-check-compat",p3="@firebase/app-check",m3="@firebase/auth",g3="@firebase/auth-compat",v3="@firebase/database",x3="@firebase/data-connect",y3="@firebase/database-compat",E3="@firebase/functions",_3="@firebase/functions-compat",b3="@firebase/installations",S3="@firebase/installations-compat",T3="@firebase/messaging",A3="@firebase/messaging-compat",w3="@firebase/performance",C3="@firebase/performance-compat",I3="@firebase/remote-config",k3="@firebase/remote-config-compat",D3="@firebase/storage",P3="@firebase/storage-compat",F3="@firebase/firestore",R3="@firebase/vertexai-preview",O3="@firebase/firestore-compat",N3="firebase",M3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",L3={[Mg]:"fire-core",[u3]:"fire-core-compat",[f3]:"fire-analytics",[d3]:"fire-analytics-compat",[p3]:"fire-app-check",[h3]:"fire-app-check-compat",[m3]:"fire-auth",[g3]:"fire-auth-compat",[v3]:"fire-rtdb",[x3]:"fire-data-connect",[y3]:"fire-rtdb-compat",[E3]:"fire-fn",[_3]:"fire-fn-compat",[b3]:"fire-iid",[S3]:"fire-iid-compat",[T3]:"fire-fcm",[A3]:"fire-fcm-compat",[w3]:"fire-perf",[C3]:"fire-perf-compat",[I3]:"fire-rc",[k3]:"fire-rc-compat",[D3]:"fire-gcs",[P3]:"fire-gcs-compat",[F3]:"fire-fst",[O3]:"fire-fst-compat",[R3]:"fire-vertex","fire-js":"fire-js",[N3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map,B3=new Map,Bg=new Map;function _E(t,e){try{t.container.addComponent(e)}catch(r){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function to(t){const e=t.name;if(Bg.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,t);for(const r of R0.values())_E(r,t);for(const r of B3.values())_E(r,t);return!0}function Pd(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Xa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new kd("app","Firebase",U3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=M3;function bA(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Lg,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Yi.create("bad-app-name",{appName:String(s)});if(r||(r=vA()),!r)throw Yi.create("no-options");const i=R0.get(s);if(i){if(F0(r,i.options)&&F0(n,i.config))return i;throw Yi.create("duplicate-app",{appName:s})}const a=new zR(s);for(const l of Bg.values())a.addComponent(l);const o=new V3(r,n,a);return R0.set(s,o),o}function Fd(t=Lg){const e=R0.get(t);if(!e&&t===Lg&&vA())return bA();if(!e)throw Yi.create("no-app",{appName:t});return e}function Ms(t,e,r){var n;let s=(n=L3[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(o.join(" "));return}to(new ui(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="firebase-heartbeat-database",j3=1,td="firebase-heartbeat-store";let Wp=null;function SA(){return Wp||(Wp=a3($3,j3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(td)}catch(r){console.warn(r)}}}}).catch(t=>{throw Yi.create("idb-open",{originalErrorMessage:t.message})})),Wp}async function H3(t){try{const r=(await SA()).transaction(td),n=await r.objectStore(td).get(TA(t));return await r.done,n}catch(e){if(e instanceof ua)di.warn(e.message);else{const r=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(r.message)}}}async function bE(t,e){try{const n=(await SA()).transaction(td,"readwrite");await n.objectStore(td).put(e,TA(t)),await n.done}catch(r){if(r instanceof ua)di.warn(r.message);else{const n=Yi.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});di.warn(n.message)}}}function TA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=1024,W3=30*24*60*60*1e3;class z3{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new q3(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=SE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=W3}),this._storage.overwrite(this._heartbeatsCache))}catch(n){di.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=SE(),{heartbeatsToSend:n,unsentEntries:s}=K3(this._heartbeatsCache.heartbeats),i=P0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return di.warn(r),""}}}function SE(){return new Date().toISOString().substring(0,10)}function K3(t,e=G3){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),TE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),TE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class q3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OR()?NR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await H3(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return bE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return bE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function TE(t){return P0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){to(new ui("platform-logger",e=>new l3(e),"PRIVATE")),to(new ui("heartbeat",e=>new z3(e),"PRIVATE")),Ms(Mg,EE,t),Ms(Mg,EE,"esm2017"),Ms("fire-js","")}X3("");function r1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function AA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y3=AA,wA=new kd("auth","Firebase",AA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new e1("@firebase/auth");function Q3(t,...e){O0.logLevel<=Gt.WARN&&O0.warn(`Auth (${el}): ${t}`,...e)}function e0(t,...e){O0.logLevel<=Gt.ERROR&&O0.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t,...e){throw s1(t,...e)}function na(t,...e){return s1(t,...e)}function n1(t,e,r){const n=Object.assign(Object.assign({},Y3()),{[e]:r});return new kd("auth","Firebase",n).create(e,{appName:t.name})}function Po(t){return n1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J3(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ka(t,"argument-error"),n1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function s1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return wA.create(t,...e)}function Tt(t,e,...r){if(!t)throw s1(e,...r)}function Ya(t){const e="INTERNAL ASSERTION FAILED: "+t;throw e0(e),new Error(e)}function fi(t,e){t||Ya(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Z3(){return AE()==="http:"||AE()==="https:"}function AE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z3()||DR()||"connection"in navigator)?navigator.onLine:!0}function t8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,r){this.shortDelay=e,this.longDelay=r,fi(r>e,"Short delay should be less than long delay!"),this.isMobile=CR()||PR()}get(){return e8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t,e){fi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=new Rd(3e4,6e4);function i1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tc(t,e,r,n,s={}){return IA(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Dd(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return kR()||(c.referrerPolicy="no-referrer"),CA.fetch()(kA(t,t.config.apiHost,r,o),c)})}async function IA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},r8),e);try{const s=new a8(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Sf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Sf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Sf(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw n1(t,u,c);ka(t,u)}}catch(s){if(s instanceof ua)throw s;ka(t,"network-request-failed",{message:String(s)})}}async function s8(t,e,r,n,s={}){const i=await Tc(t,e,r,n,s);return"mfaPendingCredential"in i&&ka(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kA(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?a1(t.config,s):`${t.config.apiScheme}://${s}`}class a8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(na(this.auth,"network-request-failed")),n8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=na(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e){return Tc(t,"POST","/v1/accounts:delete",e)}async function DA(t,e){return Tc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o8(t,e=!1){const r=ir(t),n=await r.getIdToken(e),s=o1(n);Tt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Au(zp(s.auth_time)),issuedAtTime:Au(zp(s.iat)),expirationTime:Au(zp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zp(t){return Number(t)*1e3}function o1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return e0("JWT malformed, contained fewer than 3 sections"),null;try{const s=mA(r);return s?JSON.parse(s):(e0("Failed to decode base64 JWT payload"),null)}catch(s){return e0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wE(t){const e=o1(t);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ua&&l8(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function l8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await rd(t,DA(r,{idToken:n}));Tt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?PA(i.providerUserInfo):[],o=d8(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vg(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function u8(t){const e=ir(t);await N0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d8(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function PA(t){return t.map(e=>{var{providerId:r}=e,n=r1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(t,e){const r=await IA(t,{},async()=>{const n=Dd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=kA(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",CA.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function h8(t,e){return Tc(t,"POST","/v2/accounts:revokeToken",i1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const r=wE(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await f8(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new ql;return n&&(Tt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Tt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Tt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ql,this.toJSON())}_performRefresh(){return Ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t,e){Tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qa{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=r1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await rd(this,this.stsTokenManager.getToken(this.auth,e));return Tt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return o8(this,e)}reload(){return u8(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Qa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await N0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xa(this.auth.app))return Promise.reject(Po(this.auth));const e=await this.getIdToken();return await rd(this,i8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,m=(a=r.photoURL)!==null&&a!==void 0?a:void 0,g=(o=r.tenantId)!==null&&o!==void 0?o:void 0,v=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=r.createdAt)!==null&&c!==void 0?c:void 0,x=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:y,emailVerified:C,isAnonymous:P,providerData:k,stsTokenManager:w}=r;Tt(y&&w,e,"internal-error");const S=ql.fromJSON(this.name,w);Tt(typeof y=="string",e,"internal-error"),Ai(d,e.name),Ai(f,e.name),Tt(typeof C=="boolean",e,"internal-error"),Tt(typeof P=="boolean",e,"internal-error"),Ai(p,e.name),Ai(m,e.name),Ai(g,e.name),Ai(v,e.name),Ai(E,e.name),Ai(x,e.name);const _=new Qa({uid:y,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:P,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:S,createdAt:E,lastLoginAt:x});return k&&Array.isArray(k)&&(_.providerData=k.map(b=>Object.assign({},b))),v&&(_._redirectEventId=v),_}static async _fromIdTokenResponse(e,r,n=!1){const s=new ql;s.updateFromServerResponse(r);const i=new Qa({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await N0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Tt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?PA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new ql;o.updateFromIdToken(n);const l=new Qa({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Vg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;function Ja(t){fi(t instanceof Function,"Expected a class definition");let e=CE.get(t);return e?(fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,CE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}FA.type="NONE";const IE=FA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e,r){return`firebase:${t}:${e}:${r}`}class Xl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=t0(this.userKey,s.apiKey,i),this.fullPersistenceKey=t0("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Xl(Ja(IE),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ja(IE);const a=t0(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=Qa._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Xl(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new Xl(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BA(e))return"Blackberry";if(UA(e))return"Webos";if(OA(e))return"Safari";if((e.includes("chrome/")||NA(e))&&!e.includes("edge/"))return"Chrome";if(LA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function RA(t=Kn()){return/firefox\//i.test(t)}function OA(t=Kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NA(t=Kn()){return/crios\//i.test(t)}function MA(t=Kn()){return/iemobile/i.test(t)}function LA(t=Kn()){return/android/i.test(t)}function BA(t=Kn()){return/blackberry/i.test(t)}function UA(t=Kn()){return/webos/i.test(t)}function l1(t=Kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p8(t=Kn()){var e;return l1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m8(){return FR()&&document.documentMode===10}function VA(t=Kn()){return l1(t)||LA(t)||UA(t)||BA(t)||/windows phone/i.test(t)||MA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e=[]){let r;switch(t){case"Browser":r=kE(Kn());break;case"Worker":r=`${kE(Kn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${el}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v8(t,e={}){return Tc(t,"GET","/v2/passwordPolicy",i1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=6;class y8{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:x8,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DE(this),this.idTokenSubscription=new DE(this),this.beforeStateQueue=new g8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ja(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await DA(this,{idToken:e}),n=await Qa._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Xa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await N0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xa(this.app))return Promise.reject(Po(this));const r=e?ir(e):null;return r&&Tt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xa(this.app)?Promise.reject(Po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xa(this.app)?Promise.reject(Po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ja(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await v8(this),r=new y8(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kd("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await h8(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ja(e)||this._popupRedirectResolver;Tt(r,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[Ja(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Q3(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Uh(t){return ir(t)}class DE{constructor(e){this.auth=e,this.observer=null,this.addObserver=VR(r=>this.observer=r)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _8(t){c1=t}function b8(t){return c1.loadJS(t)}function S8(){return c1.gapiScript}function T8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t,e){const r=Pd(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(F0(i,e??{}))return s;ka(s,"already-initialized")}return r.initialize({options:e})}function w8(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ja);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function C8(t,e,r){const n=Uh(t);Tt(n._canInitEmulator,n,"emulator-config-failed"),Tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=jA(e),{host:a,port:o}=I8(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),k8()}function jA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I8(t){const e=jA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:PE(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:PE(a)}}}function PE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function k8(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ya("not implemented")}_getIdTokenResponse(e){return Ya("not implemented")}_linkToIdToken(e,r){return Ya("not implemented")}_getReauthenticationResolver(e){return Ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t,e){return s8(t,"POST","/v1/accounts:signInWithIdp",i1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="http://localhost";class Vo extends HA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ka("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=r1(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Vo(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Yl(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Yl(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Yl(e,r)}buildRequest(){const e={requestUri:D8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Dd(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends u1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Od{constructor(){super("facebook.com")}static credential(e){return Vo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Vo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return _a.credential(r,n)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Od{constructor(){super("github.com")}static credential(e){return Vo._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Od{constructor(){super("twitter.com")}static credential(e,r){return Vo._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ui.credential(r,n)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Qa._fromIdTokenResponse(e,n,s),a=FE(n);return new lc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=FE(n);return new lc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function FE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends ua{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,M0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new M0(e,r,n,s)}}function GA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?M0._fromErrorAndOperation(t,i,e,n):i})}async function P8(t,e,r=!1){const n=await rd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return lc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(t,e,r=!1){const{auth:n}=t;if(Xa(n.app))return Promise.reject(Po(n));const s="reauthenticate";try{const i=await rd(t,GA(n,s,e,t),r);Tt(i.idToken,n,"internal-error");const a=o1(i.idToken);Tt(a,n,"internal-error");const{sub:o}=a;return Tt(t.uid===o,n,"user-mismatch"),lc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ka(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e,r=!1){if(Xa(t.app))return Promise.reject(Po(t));const n="signIn",s=await GA(t,n,e),i=await lc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function O8(t,e,r,n){return ir(t).onIdTokenChanged(e,r,n)}function N8(t,e,r){return ir(t).beforeAuthStateChanged(e,r)}function d1(t,e,r,n){return ir(t).onAuthStateChanged(e,r,n)}function f1(t){return ir(t).signOut()}const L0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(L0,"1"),this.storage.removeItem(L0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=1e3,L8=10;class zA extends WA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);m8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,L8):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},M8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}zA.type="LOCAL";const B8=zA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends WA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}KA.type="SESSION";const qA=KA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Vh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await U8(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=h1("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){return window}function $8(t){Ta().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return typeof Ta().WorkerGlobalScope<"u"&&typeof Ta().importScripts=="function"}async function j8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G8(){return XA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebaseLocalStorageDb",W8=1,B0="firebaseLocalStorage",QA="fbase_key";class Nd{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $h(t,e){return t.transaction([B0],e?"readwrite":"readonly").objectStore(B0)}function z8(){const t=indexedDB.deleteDatabase(YA);return new Nd(t).toPromise()}function $g(){const t=indexedDB.open(YA,W8);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(B0,{keyPath:QA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(B0)?e(n):(n.close(),await z8(),e(await $g()))})})}async function RE(t,e,r){const n=$h(t,!0).put({[QA]:e,value:r});return new Nd(n).toPromise()}async function K8(t,e){const r=$h(t,!1).get(e),n=await new Nd(r).toPromise();return n===void 0?null:n.value}function OE(t,e){const r=$h(t,!0).delete(e);return new Nd(r).toPromise()}const q8=800,X8=3;class JA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>X8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vh._getInstance(G8()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await j8(),!this.activeServiceWorker)return;this.sender=new V8(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await RE(e,L0,"1"),await OE(e,L0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>RE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>K8(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>OE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$h(s,!1).getAll();return new Nd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JA.type="LOCAL";const Y8=JA;new Rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){return e?Ja(e):(Tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends HA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Yl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Q8(t){return R8(t.auth,new p1(t),t.bypassAuthState)}function J8(t){const{auth:e,user:r}=t;return Tt(r,e,"internal-error"),F8(r,new p1(t),t.bypassAuthState)}async function Z8(t){const{auth:e,user:r}=t;return Tt(r,e,"internal-error"),P8(r,new p1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q8;case"linkViaPopup":case"linkViaRedirect":return Z8;case"reauthViaPopup":case"reauthViaRedirect":return J8;default:ka(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new Rd(2e3,1e4);async function tw(t,e,r){if(Xa(t.app))return Promise.reject(na(t,"operation-not-supported-in-this-environment"));const n=Uh(t);J3(t,e,u1);const s=ZA(n,r);return new To(n,"signInViaPopup",e,s).executeNotNull()}class To extends ew{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=h1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e6.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="pendingRedirect",r0=new Map;class r6 extends ew{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=r0.get(this.auth._key());if(!e){try{const n=await n6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}r0.set(this.auth._key(),e)}return this.bypassAuthState||r0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n6(t,e){const r=i6(e),n=a6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function s6(t,e){r0.set(t._key(),e)}function a6(t){return Ja(t._redirectPersistence)}function i6(t){return t0(t6,t.config.apiKey,t.name)}async function o6(t,e,r=!1){if(Xa(t.app))return Promise.reject(Po(t));const n=Uh(t),s=ZA(n,e),a=await new r6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=10*60*1e3;class c6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!rw(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(na(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l6&&this.cachedEventUids.clear(),this.cachedEventUids.has(NE(e))}saveEventToCache(e){this.cachedEventUids.add(NE(e)),this.lastProcessedEventTime=Date.now()}}function NE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function u6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(t,e={}){return Tc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h6=/^https?/;async function p6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await d6(t);for(const r of e)try{if(m6(r))return}catch{}ka(t,"unauthorized-domain")}function m6(t){const e=Ug(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!h6.test(r))return!1;if(f6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=new Rd(3e4,6e4);function ME(){const t=Ta().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function v6(t){return new Promise((e,r)=>{var n,s,i;function a(){ME(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ME(),r(na(t,"network-request-failed"))},timeout:g6.get()})}if(!((s=(n=Ta().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ta().gapi)===null||i===void 0)&&i.load)a();else{const o=T8("iframefcb");return Ta()[o]=()=>{gapi.load?a():r(na(t,"network-request-failed"))},b8(`${S8()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw n0=null,e})}let n0=null;function x6(t){return n0=n0||v6(t),n0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=new Rd(5e3,15e3),E6="__/auth/iframe",_6="emulator/auth/iframe",b6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T6(t){const e=t.config;Tt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?a1(e,_6):`https://${t.config.authDomain}/${E6}`,n={apiKey:e.apiKey,appName:t.name,v:el},s=S6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Dd(n).slice(1)}`}async function A6(t){const e=await x6(t),r=Ta().gapi;return Tt(r,t,"internal-error"),e.open({where:document.body,url:T6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=na(t,"network-request-failed"),o=Ta().setTimeout(()=>{i(a)},y6.get());function l(){Ta().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C6=500,I6=600,k6="_blank",D6="http://localhost";class LE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P6(t,e,r,n=C6,s=I6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},w6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Kn().toLowerCase();r&&(o=NA(c)?k6:r),RA(c)&&(e=e||D6,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(p8(c)&&o!=="_self")return F6(e||"",o),new LE(null);const d=window.open(e||"",o,u);Tt(d,t,"popup-blocked");try{d.focus()}catch{}return new LE(d)}function F6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="__/auth/handler",O6="emulator/auth/handler",N6=encodeURIComponent("fac");async function BE(t,e,r,n,s,i){Tt(t.config.authDomain,t,"auth-domain-config-required"),Tt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:el,eventId:s};if(e instanceof u1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",UR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof Od){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${N6}=${encodeURIComponent(l)}`:"";return`${M6(t)}?${Dd(o).slice(1)}${c}`}function M6({config:t}){return t.emulator?a1(t,O6):`https://${t.authDomain}/${R6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="webStorageSupport";class L6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qA,this._completeRedirectFn=o6,this._overrideRedirectResult=s6}async _openPopup(e,r,n,s){var i;fi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await BE(e,r,n,Ug(),s);return P6(e,a,h1())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await BE(e,r,n,Ug(),s);return $8(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(fi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await A6(e),n=new c6(e);return r.register("authEvent",s=>(Tt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Kp,{type:Kp},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Kp];a!==void 0&&r(!!a),ka(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=p6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return VA()||OA()||l1()}}const B6=L6;var UE="@firebase/auth",VE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $6(t){to(new ui("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Tt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$A(t)},c=new E8(n,s,i,l);return w8(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),to(new ui("auth-internal",e=>{const r=Uh(e.getProvider("auth").getImmediate());return(n=>new U6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(UE,VE,V6(t)),Ms(UE,VE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=5*60,H6=xA("authIdTokenMaxAge")||j6;let $E=null;const G6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>H6)return;const s=r==null?void 0:r.token;$E!==s&&($E=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cc(t=Fd()){const e=Pd(t,"auth");if(e.isInitialized())return e.getImmediate();const r=A8(t,{popupRedirectResolver:B6,persistence:[Y8,B8,qA]}),n=xA("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=G6(i.toString());N8(r,a,()=>a(r.currentUser)),O8(r,o=>a(o))}}const s=gA("auth");return s&&C8(r,`http://${s}`),r}function W6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_8({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=na("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",W6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$6("Browser");var jE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fo,nw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,S){function _(){}_.prototype=S.prototype,w.D=S.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(b,T,I){for(var D=Array(arguments.length-2),O=2;O<arguments.length;O++)D[O-2]=arguments[O];return S.prototype[T].apply(b,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,S,_){_||(_=0);var b=Array(16);if(typeof S=="string")for(var T=0;16>T;++T)b[T]=S.charCodeAt(_++)|S.charCodeAt(_++)<<8|S.charCodeAt(_++)<<16|S.charCodeAt(_++)<<24;else for(T=0;16>T;++T)b[T]=S[_++]|S[_++]<<8|S[_++]<<16|S[_++]<<24;S=w.g[0],_=w.g[1],T=w.g[2];var I=w.g[3],D=S+(I^_&(T^I))+b[0]+3614090360&4294967295;S=_+(D<<7&4294967295|D>>>25),D=I+(T^S&(_^T))+b[1]+3905402710&4294967295,I=S+(D<<12&4294967295|D>>>20),D=T+(_^I&(S^_))+b[2]+606105819&4294967295,T=I+(D<<17&4294967295|D>>>15),D=_+(S^T&(I^S))+b[3]+3250441966&4294967295,_=T+(D<<22&4294967295|D>>>10),D=S+(I^_&(T^I))+b[4]+4118548399&4294967295,S=_+(D<<7&4294967295|D>>>25),D=I+(T^S&(_^T))+b[5]+1200080426&4294967295,I=S+(D<<12&4294967295|D>>>20),D=T+(_^I&(S^_))+b[6]+2821735955&4294967295,T=I+(D<<17&4294967295|D>>>15),D=_+(S^T&(I^S))+b[7]+4249261313&4294967295,_=T+(D<<22&4294967295|D>>>10),D=S+(I^_&(T^I))+b[8]+1770035416&4294967295,S=_+(D<<7&4294967295|D>>>25),D=I+(T^S&(_^T))+b[9]+2336552879&4294967295,I=S+(D<<12&4294967295|D>>>20),D=T+(_^I&(S^_))+b[10]+4294925233&4294967295,T=I+(D<<17&4294967295|D>>>15),D=_+(S^T&(I^S))+b[11]+2304563134&4294967295,_=T+(D<<22&4294967295|D>>>10),D=S+(I^_&(T^I))+b[12]+1804603682&4294967295,S=_+(D<<7&4294967295|D>>>25),D=I+(T^S&(_^T))+b[13]+4254626195&4294967295,I=S+(D<<12&4294967295|D>>>20),D=T+(_^I&(S^_))+b[14]+2792965006&4294967295,T=I+(D<<17&4294967295|D>>>15),D=_+(S^T&(I^S))+b[15]+1236535329&4294967295,_=T+(D<<22&4294967295|D>>>10),D=S+(T^I&(_^T))+b[1]+4129170786&4294967295,S=_+(D<<5&4294967295|D>>>27),D=I+(_^T&(S^_))+b[6]+3225465664&4294967295,I=S+(D<<9&4294967295|D>>>23),D=T+(S^_&(I^S))+b[11]+643717713&4294967295,T=I+(D<<14&4294967295|D>>>18),D=_+(I^S&(T^I))+b[0]+3921069994&4294967295,_=T+(D<<20&4294967295|D>>>12),D=S+(T^I&(_^T))+b[5]+3593408605&4294967295,S=_+(D<<5&4294967295|D>>>27),D=I+(_^T&(S^_))+b[10]+38016083&4294967295,I=S+(D<<9&4294967295|D>>>23),D=T+(S^_&(I^S))+b[15]+3634488961&4294967295,T=I+(D<<14&4294967295|D>>>18),D=_+(I^S&(T^I))+b[4]+3889429448&4294967295,_=T+(D<<20&4294967295|D>>>12),D=S+(T^I&(_^T))+b[9]+568446438&4294967295,S=_+(D<<5&4294967295|D>>>27),D=I+(_^T&(S^_))+b[14]+3275163606&4294967295,I=S+(D<<9&4294967295|D>>>23),D=T+(S^_&(I^S))+b[3]+4107603335&4294967295,T=I+(D<<14&4294967295|D>>>18),D=_+(I^S&(T^I))+b[8]+1163531501&4294967295,_=T+(D<<20&4294967295|D>>>12),D=S+(T^I&(_^T))+b[13]+2850285829&4294967295,S=_+(D<<5&4294967295|D>>>27),D=I+(_^T&(S^_))+b[2]+4243563512&4294967295,I=S+(D<<9&4294967295|D>>>23),D=T+(S^_&(I^S))+b[7]+1735328473&4294967295,T=I+(D<<14&4294967295|D>>>18),D=_+(I^S&(T^I))+b[12]+2368359562&4294967295,_=T+(D<<20&4294967295|D>>>12),D=S+(_^T^I)+b[5]+4294588738&4294967295,S=_+(D<<4&4294967295|D>>>28),D=I+(S^_^T)+b[8]+2272392833&4294967295,I=S+(D<<11&4294967295|D>>>21),D=T+(I^S^_)+b[11]+1839030562&4294967295,T=I+(D<<16&4294967295|D>>>16),D=_+(T^I^S)+b[14]+4259657740&4294967295,_=T+(D<<23&4294967295|D>>>9),D=S+(_^T^I)+b[1]+2763975236&4294967295,S=_+(D<<4&4294967295|D>>>28),D=I+(S^_^T)+b[4]+1272893353&4294967295,I=S+(D<<11&4294967295|D>>>21),D=T+(I^S^_)+b[7]+4139469664&4294967295,T=I+(D<<16&4294967295|D>>>16),D=_+(T^I^S)+b[10]+3200236656&4294967295,_=T+(D<<23&4294967295|D>>>9),D=S+(_^T^I)+b[13]+681279174&4294967295,S=_+(D<<4&4294967295|D>>>28),D=I+(S^_^T)+b[0]+3936430074&4294967295,I=S+(D<<11&4294967295|D>>>21),D=T+(I^S^_)+b[3]+3572445317&4294967295,T=I+(D<<16&4294967295|D>>>16),D=_+(T^I^S)+b[6]+76029189&4294967295,_=T+(D<<23&4294967295|D>>>9),D=S+(_^T^I)+b[9]+3654602809&4294967295,S=_+(D<<4&4294967295|D>>>28),D=I+(S^_^T)+b[12]+3873151461&4294967295,I=S+(D<<11&4294967295|D>>>21),D=T+(I^S^_)+b[15]+530742520&4294967295,T=I+(D<<16&4294967295|D>>>16),D=_+(T^I^S)+b[2]+3299628645&4294967295,_=T+(D<<23&4294967295|D>>>9),D=S+(T^(_|~I))+b[0]+4096336452&4294967295,S=_+(D<<6&4294967295|D>>>26),D=I+(_^(S|~T))+b[7]+1126891415&4294967295,I=S+(D<<10&4294967295|D>>>22),D=T+(S^(I|~_))+b[14]+2878612391&4294967295,T=I+(D<<15&4294967295|D>>>17),D=_+(I^(T|~S))+b[5]+4237533241&4294967295,_=T+(D<<21&4294967295|D>>>11),D=S+(T^(_|~I))+b[12]+1700485571&4294967295,S=_+(D<<6&4294967295|D>>>26),D=I+(_^(S|~T))+b[3]+2399980690&4294967295,I=S+(D<<10&4294967295|D>>>22),D=T+(S^(I|~_))+b[10]+4293915773&4294967295,T=I+(D<<15&4294967295|D>>>17),D=_+(I^(T|~S))+b[1]+2240044497&4294967295,_=T+(D<<21&4294967295|D>>>11),D=S+(T^(_|~I))+b[8]+1873313359&4294967295,S=_+(D<<6&4294967295|D>>>26),D=I+(_^(S|~T))+b[15]+4264355552&4294967295,I=S+(D<<10&4294967295|D>>>22),D=T+(S^(I|~_))+b[6]+2734768916&4294967295,T=I+(D<<15&4294967295|D>>>17),D=_+(I^(T|~S))+b[13]+1309151649&4294967295,_=T+(D<<21&4294967295|D>>>11),D=S+(T^(_|~I))+b[4]+4149444226&4294967295,S=_+(D<<6&4294967295|D>>>26),D=I+(_^(S|~T))+b[11]+3174756917&4294967295,I=S+(D<<10&4294967295|D>>>22),D=T+(S^(I|~_))+b[2]+718787259&4294967295,T=I+(D<<15&4294967295|D>>>17),D=_+(I^(T|~S))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+S&4294967295,w.g[1]=w.g[1]+(T+(D<<21&4294967295|D>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+I&4294967295}n.prototype.u=function(w,S){S===void 0&&(S=w.length);for(var _=S-this.blockSize,b=this.B,T=this.h,I=0;I<S;){if(T==0)for(;I<=_;)s(this,w,I),I+=this.blockSize;if(typeof w=="string"){for(;I<S;)if(b[T++]=w.charCodeAt(I++),T==this.blockSize){s(this,b),T=0;break}}else for(;I<S;)if(b[T++]=w[I++],T==this.blockSize){s(this,b),T=0;break}}this.h=T,this.o+=S},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var S=1;S<w.length-8;++S)w[S]=0;var _=8*this.o;for(S=w.length-8;S<w.length;++S)w[S]=_&255,_/=256;for(this.u(w),w=Array(16),S=_=0;4>S;++S)for(var b=0;32>b;b+=8)w[_++]=this.g[S]>>>b&255;return w};function i(w,S){var _=o;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=S(w)}function a(w,S){this.h=S;for(var _=[],b=!0,T=w.length-1;0<=T;T--){var I=w[T]|0;b&&I==S||(_[T]=I,b=!1)}this.g=_}var o={};function l(w){return-128<=w&&128>w?i(w,function(S){return new a([S|0],0>S?-1:0)}):new a([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return v(c(-w));for(var S=[],_=1,b=0;w>=_;b++)S[b]=w/_|0,_*=4294967296;return new a(S,0)}function u(w,S){if(w.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w.charAt(0)=="-")return v(u(w.substring(1),S));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(S,8)),b=d,T=0;T<w.length;T+=8){var I=Math.min(8,w.length-T),D=parseInt(w.substring(T,T+I),S);8>I?(I=c(Math.pow(S,I)),b=b.j(I).add(c(D))):(b=b.j(_),b=b.add(c(D)))}return b}var d=l(0),f=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(g(this))return-v(this).m();for(var w=0,S=1,_=0;_<this.g.length;_++){var b=this.i(_);w+=(0<=b?b:4294967296+b)*S,S*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(m(this))return"0";if(g(this))return"-"+v(this).toString(w);for(var S=c(Math.pow(w,6)),_=this,b="";;){var T=C(_,S).g;_=E(_,T.j(S));var I=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=T,m(_))return I+b;for(;6>I.length;)I="0"+I;b=I+b}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function m(w){if(w.h!=0)return!1;for(var S=0;S<w.g.length;S++)if(w.g[S]!=0)return!1;return!0}function g(w){return w.h==-1}t.l=function(w){return w=E(this,w),g(w)?-1:m(w)?0:1};function v(w){for(var S=w.g.length,_=[],b=0;b<S;b++)_[b]=~w.g[b];return new a(_,~w.h).add(f)}t.abs=function(){return g(this)?v(this):this},t.add=function(w){for(var S=Math.max(this.g.length,w.g.length),_=[],b=0,T=0;T<=S;T++){var I=b+(this.i(T)&65535)+(w.i(T)&65535),D=(I>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);b=D>>>16,I&=65535,D&=65535,_[T]=D<<16|I}return new a(_,_[_.length-1]&-2147483648?-1:0)};function E(w,S){return w.add(v(S))}t.j=function(w){if(m(this)||m(w))return d;if(g(this))return g(w)?v(this).j(v(w)):v(v(this).j(w));if(g(w))return v(this.j(v(w)));if(0>this.l(p)&&0>w.l(p))return c(this.m()*w.m());for(var S=this.g.length+w.g.length,_=[],b=0;b<2*S;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<w.g.length;T++){var I=this.i(b)>>>16,D=this.i(b)&65535,O=w.i(T)>>>16,R=w.i(T)&65535;_[2*b+2*T]+=D*R,x(_,2*b+2*T),_[2*b+2*T+1]+=I*R,x(_,2*b+2*T+1),_[2*b+2*T+1]+=D*O,x(_,2*b+2*T+1),_[2*b+2*T+2]+=I*O,x(_,2*b+2*T+2)}for(b=0;b<S;b++)_[b]=_[2*b+1]<<16|_[2*b];for(b=S;b<2*S;b++)_[b]=0;return new a(_,0)};function x(w,S){for(;(w[S]&65535)!=w[S];)w[S+1]+=w[S]>>>16,w[S]&=65535,S++}function y(w,S){this.g=w,this.h=S}function C(w,S){if(m(S))throw Error("division by zero");if(m(w))return new y(d,d);if(g(w))return S=C(v(w),S),new y(v(S.g),v(S.h));if(g(S))return S=C(w,v(S)),new y(v(S.g),S.h);if(30<w.g.length){if(g(w)||g(S))throw Error("slowDivide_ only works with positive integers.");for(var _=f,b=S;0>=b.l(w);)_=P(_),b=P(b);var T=k(_,1),I=k(b,1);for(b=k(b,2),_=k(_,2);!m(b);){var D=I.add(b);0>=D.l(w)&&(T=T.add(_),I=D),b=k(b,1),_=k(_,1)}return S=E(w,T.j(S)),new y(T,S)}for(T=d;0<=w.l(S);){for(_=Math.max(1,Math.floor(w.m()/S.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),I=c(_),D=I.j(S);g(D)||0<D.l(w);)_-=b,I=c(_),D=I.j(S);m(I)&&(I=f),T=T.add(I),w=E(w,D)}return new y(T,w)}t.A=function(w){return C(this,w).h},t.and=function(w){for(var S=Math.max(this.g.length,w.g.length),_=[],b=0;b<S;b++)_[b]=this.i(b)&w.i(b);return new a(_,this.h&w.h)},t.or=function(w){for(var S=Math.max(this.g.length,w.g.length),_=[],b=0;b<S;b++)_[b]=this.i(b)|w.i(b);return new a(_,this.h|w.h)},t.xor=function(w){for(var S=Math.max(this.g.length,w.g.length),_=[],b=0;b<S;b++)_[b]=this.i(b)^w.i(b);return new a(_,this.h^w.h)};function P(w){for(var S=w.g.length+1,_=[],b=0;b<S;b++)_[b]=w.i(b)<<1|w.i(b-1)>>>31;return new a(_,w.h)}function k(w,S){var _=S>>5;S%=32;for(var b=w.g.length-_,T=[],I=0;I<b;I++)T[I]=0<S?w.i(I+_)>>>S|w.i(I+_+1)<<32-S:w.i(I+_);return new a(T,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,nw=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Fo=a}).apply(typeof jE<"u"?jE:typeof self<"u"?self:typeof window<"u"?window:{});var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sw,au,aw,s0,jg,iw,ow,lw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,M,G){return A==Array.prototype||A==Object.prototype||(A[M]=G.value),A};function r(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tf=="object"&&Tf];for(var M=0;M<A.length;++M){var G=A[M];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var n=r(this);function s(A,M){if(M)e:{var G=n;A=A.split(".");for(var se=0;se<A.length-1;se++){var Ce=A[se];if(!(Ce in G))break e;G=G[Ce]}A=A[A.length-1],se=G[A],M=M(se),M!=se&&M!=null&&e(G,A,{configurable:!0,writable:!0,value:M})}}function i(A,M){A instanceof String&&(A+="");var G=0,se=!1,Ce={next:function(){if(!se&&G<A.length){var Me=G++;return{value:M(Me,A[Me]),done:!1}}return se=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}s("Array.prototype.values",function(A){return A||function(){return i(this,function(M,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(A){var M=typeof A;return M=M!="object"?M:A?Array.isArray(A)?"array":M:"null",M=="array"||M=="object"&&typeof A.length=="number"}function c(A){var M=typeof A;return M=="object"&&A!=null||M=="function"}function u(A,M,G){return A.call.apply(A.bind,arguments)}function d(A,M,G){if(!A)throw Error();if(2<arguments.length){var se=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,se),A.apply(M,Ce)}}return function(){return A.apply(M,arguments)}}function f(A,M,G){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(A,M){var G=Array.prototype.slice.call(arguments,1);return function(){var se=G.slice();return se.push.apply(se,arguments),A.apply(this,se)}}function m(A,M){function G(){}G.prototype=M.prototype,A.aa=M.prototype,A.prototype=new G,A.prototype.constructor=A,A.Qb=function(se,Ce,Me){for(var Je=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)Je[fr-2]=arguments[fr];return M.prototype[Ce].apply(se,Je)}}function g(A){const M=A.length;if(0<M){const G=Array(M);for(let se=0;se<M;se++)G[se]=A[se];return G}return[]}function v(A,M){for(let G=1;G<arguments.length;G++){const se=arguments[G];if(l(se)){const Ce=A.length||0,Me=se.length||0;A.length=Ce+Me;for(let Je=0;Je<Me;Je++)A[Ce+Je]=se[Je]}else A.push(se)}}class E{constructor(M,G){this.i=M,this.j=G,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function x(A){return/^[\s\xa0]*$/.test(A)}function y(){var A=o.navigator;return A&&(A=A.userAgent)?A:""}function C(A){return C[" "](A),A}C[" "]=function(){};var P=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function k(A,M,G){for(const se in A)M.call(G,A[se],se,A)}function w(A,M){for(const G in A)M.call(void 0,A[G],G,A)}function S(A){const M={};for(const G in A)M[G]=A[G];return M}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(A,M){let G,se;for(let Ce=1;Ce<arguments.length;Ce++){se=arguments[Ce];for(G in se)A[G]=se[G];for(let Me=0;Me<_.length;Me++)G=_[Me],Object.prototype.hasOwnProperty.call(se,G)&&(A[G]=se[G])}}function T(A){var M=1;A=A.split(":");const G=[];for(;0<M&&A.length;)G.push(A.shift()),M--;return A.length&&G.push(A.join(":")),G}function I(A){o.setTimeout(()=>{throw A},0)}function D(){var A=L;let M=null;return A.g&&(M=A.g,A.g=A.g.next,A.g||(A.h=null),M.next=null),M}class O{constructor(){this.h=this.g=null}add(M,G){const se=R.get();se.set(M,G),this.h?this.h.next=se:this.g=se,this.h=se}}var R=new E(()=>new F,A=>A.reset());class F{constructor(){this.next=this.g=this.h=null}set(M,G){this.h=M,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let N,V=!1,L=new O,z=()=>{const A=o.Promise.resolve(void 0);N=()=>{A.then(H)}};var H=()=>{for(var A;A=D();){try{A.h.call(A.g)}catch(G){I(G)}var M=R;M.j(A),100>M.h&&(M.h++,A.next=M.g,M.g=A)}V=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(A,M){this.type=A,this.g=this.target=M,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var A=!1,M=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const G=()=>{};o.addEventListener("test",G,M),o.removeEventListener("test",G,M)}catch{}return A}();function ee(A,M){if(W.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var G=this.type=A.type,se=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=M,M=A.relatedTarget){if(P){e:{try{C(M.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(M=null)}}else G=="mouseover"?M=A.fromElement:G=="mouseout"&&(M=A.toElement);this.relatedTarget=M,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:me[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&ee.aa.h.call(this)}}m(ee,W);var me={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),he=0;function Z(A,M,G,se,Ce){this.listener=A,this.proxy=null,this.src=M,this.type=G,this.capture=!!se,this.ha=Ce,this.key=++he,this.da=this.fa=!1}function Q(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function ve(A){this.src=A,this.g={},this.h=0}ve.prototype.add=function(A,M,G,se,Ce){var Me=A.toString();A=this.g[Me],A||(A=this.g[Me]=[],this.h++);var Je=q(A,M,se,Ce);return-1<Je?(M=A[Je],G||(M.fa=!1)):(M=new Z(M,this.src,Me,!!se,Ce),M.fa=G,A.push(M)),M};function X(A,M){var G=M.type;if(G in A.g){var se=A.g[G],Ce=Array.prototype.indexOf.call(se,M,void 0),Me;(Me=0<=Ce)&&Array.prototype.splice.call(se,Ce,1),Me&&(Q(M),A.g[G].length==0&&(delete A.g[G],A.h--))}}function q(A,M,G,se){for(var Ce=0;Ce<A.length;++Ce){var Me=A[Ce];if(!Me.da&&Me.listener==M&&Me.capture==!!G&&Me.ha==se)return Ce}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),ge={};function re(A,M,G,se,Ce){if(Array.isArray(M)){for(var Me=0;Me<M.length;Me++)re(A,M[Me],G,se,Ce);return null}return G=Ue(G),A&&A[le]?A.K(M,G,c(se)?!!se.capture:!1,Ce):ne(A,M,G,!1,se,Ce)}function ne(A,M,G,se,Ce,Me){if(!M)throw Error("Invalid event type");var Je=c(Ce)?!!Ce.capture:!!Ce,fr=Ge(A);if(fr||(A[Y]=fr=new ve(A)),G=fr.add(M,G,se,Je,Me),G.proxy)return G;if(se=ae(),G.proxy=se,se.src=A,se.listener=G,A.addEventListener)K||(Ce=Je),Ce===void 0&&(Ce=!1),A.addEventListener(M.toString(),se,Ce);else if(A.attachEvent)A.attachEvent(we(M.toString()),se);else if(A.addListener&&A.removeListener)A.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return G}function ae(){function A(G){return M.call(A.src,A.listener,G)}const M=Te;return A}function xe(A,M,G,se,Ce){if(Array.isArray(M))for(var Me=0;Me<M.length;Me++)xe(A,M[Me],G,se,Ce);else se=c(se)?!!se.capture:!!se,G=Ue(G),A&&A[le]?(A=A.i,M=String(M).toString(),M in A.g&&(Me=A.g[M],G=q(Me,G,se,Ce),-1<G&&(Q(Me[G]),Array.prototype.splice.call(Me,G,1),Me.length==0&&(delete A.g[M],A.h--)))):A&&(A=Ge(A))&&(M=A.g[M.toString()],A=-1,M&&(A=q(M,G,se,Ce)),(G=-1<A?M[A]:null)&&Ee(G))}function Ee(A){if(typeof A!="number"&&A&&!A.da){var M=A.src;if(M&&M[le])X(M.i,A);else{var G=A.type,se=A.proxy;M.removeEventListener?M.removeEventListener(G,se,A.capture):M.detachEvent?M.detachEvent(we(G),se):M.addListener&&M.removeListener&&M.removeListener(se),(G=Ge(M))?(X(G,A),G.h==0&&(G.src=null,M[Y]=null)):Q(A)}}}function we(A){return A in ge?ge[A]:ge[A]="on"+A}function Te(A,M){if(A.da)A=!0;else{M=new ee(M,this);var G=A.listener,se=A.ha||A.src;A.fa&&Ee(A),A=G.call(se,M)}return A}function Ge(A){return A=A[Y],A instanceof ve?A:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(A){return typeof A=="function"?A:(A[Ie]||(A[Ie]=function(M){return A.handleEvent(M)}),A[Ie])}function Le(){B.call(this),this.i=new ve(this),this.M=this,this.F=null}m(Le,B),Le.prototype[le]=!0,Le.prototype.removeEventListener=function(A,M,G,se){xe(this,A,M,G,se)};function We(A,M){var G,se=A.F;if(se)for(G=[];se;se=se.F)G.push(se);if(A=A.M,se=M.type||M,typeof M=="string")M=new W(M,A);else if(M instanceof W)M.target=M.target||A;else{var Ce=M;M=new W(se,A),b(M,Ce)}if(Ce=!0,G)for(var Me=G.length-1;0<=Me;Me--){var Je=M.g=G[Me];Ce=ze(Je,se,!0,M)&&Ce}if(Je=M.g=A,Ce=ze(Je,se,!0,M)&&Ce,Ce=ze(Je,se,!1,M)&&Ce,G)for(Me=0;Me<G.length;Me++)Je=M.g=G[Me],Ce=ze(Je,se,!1,M)&&Ce}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var A=this.i,M;for(M in A.g){for(var G=A.g[M],se=0;se<G.length;se++)Q(G[se]);delete A.g[M],A.h--}}this.F=null},Le.prototype.K=function(A,M,G,se){return this.i.add(String(A),M,!1,G,se)},Le.prototype.L=function(A,M,G,se){return this.i.add(String(A),M,!0,G,se)};function ze(A,M,G,se){if(M=A.i.g[String(M)],!M)return!0;M=M.concat();for(var Ce=!0,Me=0;Me<M.length;++Me){var Je=M[Me];if(Je&&!Je.da&&Je.capture==G){var fr=Je.listener,mn=Je.ha||Je.src;Je.fa&&X(A.i,Je),Ce=fr.call(mn,se)!==!1&&Ce}}return Ce&&!se.defaultPrevented}function _e(A,M,G){if(typeof A=="function")G&&(A=f(A,G));else if(A&&typeof A.handleEvent=="function")A=f(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:o.setTimeout(A,M||0)}function ye(A){A.g=_e(()=>{A.g=null,A.i&&(A.i=!1,ye(A))},A.l);const M=A.h;A.h=null,A.m.apply(null,M)}class Se extends B{constructor(M,G){super(),this.m=M,this.l=G,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Re(A){B.call(this),this.h=A,this.g={}}m(Re,B);var He=[];function it(A){k(A.g,function(M,G){this.g.hasOwnProperty(G)&&Ee(M)},A),A.g={}}Re.prototype.N=function(){Re.aa.N.call(this),it(this)},Re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=o.JSON.stringify,vt=o.JSON.parse,Mt=class{stringify(A){return o.JSON.stringify(A,void 0)}parse(A){return o.JSON.parse(A,void 0)}};function dt(){}dt.prototype.h=null;function lt(A){return A.h||(A.h=A.i())}function pt(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rt(){W.call(this,"d")}m(Rt,W);function Er(){W.call(this,"c")}m(Er,W);var Yn={},Ei=null;function ls(){return Ei=Ei||new Le}Yn.La="serverreachability";function hl(A){W.call(this,Yn.La,A)}m(hl,W);function Ba(A){const M=ls();We(M,new hl(M))}Yn.STAT_EVENT="statevent";function fo(A,M){W.call(this,Yn.STAT_EVENT,A),this.stat=M}m(fo,W);function Jr(A){const M=ls();We(M,new fo(M,A))}Yn.Ma="timingevent";function ho(A,M){W.call(this,Yn.Ma,A),this.size=M}m(ho,W);function Cr(A,M){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){A()},M)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function pl(A,M,G,se,Ce,Me){A.info(function(){if(A.g)if(Me)for(var Je="",fr=Me.split("&"),mn=0;mn<fr.length;mn++){var Zt=fr[mn].split("=");if(1<Zt.length){var Dn=Zt[0];Zt=Zt[1];var Pn=Dn.split("_");Je=2<=Pn.length&&Pn[1]=="type"?Je+(Dn+"="+Zt+"&"):Je+(Dn+"=redacted&")}}else Je=null;else Je=Me;return"XMLHTTP REQ ("+se+") [attempt "+Ce+"]: "+M+`
`+G+`
`+Je})}function Mc(A,M,G,se,Ce,Me,Je){A.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Ce+"]: "+M+`
`+G+`
`+Me+" "+Je})}function J(A,M,G,se){A.info(function(){return"XMLHTTP TEXT ("+M+"): "+ie(A,G)+(se?" "+se:"")})}function de(A,M){A.info(function(){return"TIMEOUT: "+M})}kn.prototype.info=function(){};function ie(A,M){if(!A.g)return M;if(!M)return null;try{var G=JSON.parse(M);if(G){for(A=0;A<G.length;A++)if(Array.isArray(G[A])){var se=G[A];if(!(2>se.length)){var Ce=se[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Me=Ce[0];if(Me!="noop"&&Me!="stop"&&Me!="close")for(var Je=1;Je<Ce.length;Je++)Ce[Je]=""}}}}return mt(G)}catch{return M}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pe;function ke(){}m(ke,dt),ke.prototype.g=function(){return new XMLHttpRequest},ke.prototype.i=function(){return{}},pe=new ke;function Be(A,M,G,se){this.j=A,this.i=M,this.l=G,this.R=se||1,this.U=new Re(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}var Pe={},Oe={};function qe(A,M,G){A.L=1,A.v=nf(Va(M)),A.m=G,A.P=!0,Qe(A,null)}function Qe(A,M){A.F=Date.now(),rt(A),A.A=Va(A.v);var G=A.A,se=A.R;Array.isArray(se)||(se=[String(se)]),ay(G.i,"t",se),A.C=0,G=A.j.J,A.h=new De,A.g=Sy(A.j,G?M:null,!A.m),0<A.O&&(A.M=new Se(f(A.Y,A,A.g),A.O)),M=A.U,G=A.g,se=A.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(He[0]=Ce.toString()),Ce=He);for(var Me=0;Me<Ce.length;Me++){var Je=re(G,Ce[Me],se||M.handleEvent,!1,M.h||M);if(!Je)break;M.g[Je.key]=Je}M=A.H?S(A.H):{},A.m?(A.u||(A.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,M)):(A.u="GET",A.g.ea(A.A,A.u,null,M)),Ba(),pl(A.i,A.u,A.A,A.l,A.R,A.m)}Be.prototype.ca=function(A){A=A.target;const M=this.M;M&&$a(A)==3?M.j():this.Y(A)},Be.prototype.Y=function(A){try{if(A==this.g)e:{const Pn=$a(this.g);var M=this.g.Ba();const xl=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||fy(this.g)))){this.J||Pn!=4||M==7||(M==8||0>=xl?Ba(3):Ba(2)),dr(this);var G=this.g.Z();this.X=G;t:if(ot(this)){var se=fy(this.g);A="";var Ce=se.length,Me=$a(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),or(this);var Je="";break t}this.h.i=new o.TextDecoder}for(M=0;M<Ce;M++)this.h.h=!0,A+=this.h.i.decode(se[M],{stream:!(Me&&M==Ce-1)});se.length=0,this.h.g+=A,this.C=0,Je=this.h.g}else Je=this.g.oa();if(this.o=G==200,Mc(this.i,this.u,this.A,this.l,this.R,Pn,G),this.o){if(this.T&&!this.K){t:{if(this.g){var fr,mn=this.g;if((fr=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(fr)){var Zt=fr;break t}}Zt=null}if(G=Zt)J(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,G);else{this.o=!1,this.s=3,Jr(12),Sr(this),or(this);break e}}if(this.P){G=!0;let js;for(;!this.J&&this.C<Je.length;)if(js=Xe(this,Je),js==Oe){Pn==4&&(this.s=4,Jr(14),G=!1),J(this.i,this.l,null,"[Incomplete Response]");break}else if(js==Pe){this.s=4,Jr(15),J(this.i,this.l,Je,"[Invalid Chunk]"),G=!1;break}else J(this.i,this.l,js,null),Ua(this,js);if(ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Je.length!=0||this.h.h||(this.s=1,Jr(16),G=!1),this.o=this.o&&G,!G)J(this.i,this.l,Je,"[Invalid Chunked Response]"),Sr(this),or(this);else if(0<Je.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+Je.length),wp(Dn),Dn.M=!0,Jr(11))}}else J(this.i,this.l,Je,null),Ua(this,Je);Pn==4&&Sr(this),this.o&&!this.J&&(Pn==4?yy(this.j,this):(this.o=!1,rt(this)))}else Rk(this.g),G==400&&0<Je.indexOf("Unknown SID")?(this.s=3,Jr(12)):(this.s=0,Jr(13)),Sr(this),or(this)}}}catch{}finally{}};function ot(A){return A.g?A.u=="GET"&&A.L!=2&&A.j.Ca:!1}function Xe(A,M){var G=A.C,se=M.indexOf(`
`,G);return se==-1?Oe:(G=Number(M.substring(G,se)),isNaN(G)?Pe:(se+=1,se+G>M.length?Oe:(M=M.slice(se,se+G),A.C=se+G,M)))}Be.prototype.cancel=function(){this.J=!0,Sr(this)};function rt(A){A.S=Date.now()+A.I,St(A,A.I)}function St(A,M){if(A.B!=null)throw Error("WatchDog timer not null");A.B=Cr(f(A.ba,A),M)}function dr(A){A.B&&(o.clearTimeout(A.B),A.B=null)}Be.prototype.ba=function(){this.B=null;const A=Date.now();0<=A-this.S?(de(this.i,this.A),this.L!=2&&(Ba(),Jr(17)),Sr(this),this.s=2,or(this)):St(this,this.S-A)};function or(A){A.j.G==0||A.J||yy(A.j,A)}function Sr(A){dr(A);var M=A.M;M&&typeof M.ma=="function"&&M.ma(),A.M=null,it(A.U),A.g&&(M=A.g,A.g=null,M.abort(),M.ma())}function Ua(A,M){try{var G=A.j;if(G.G!=0&&(G.g==A||gs(G.h,A))){if(!A.K&&gs(G.h,A)&&G.G==3){try{var se=G.Da.g.parse(M)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Ce=se;if(Ce[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<A.F)uf(G),lf(G);else break e;Ap(G),Jr(18)}}else G.za=Ce[1],0<G.za-G.T&&37500>Ce[2]&&G.F&&G.v==0&&!G.C&&(G.C=Cr(f(G.Za,G),6e3));if(1>=ml(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else go(G,11)}else if((A.K||G.g==A)&&uf(G),!x(M))for(Ce=G.Da.g.parse(M),M=0;M<Ce.length;M++){let Zt=Ce[M];if(G.T=Zt[0],Zt=Zt[1],G.G==2)if(Zt[0]=="c"){G.K=Zt[1],G.ia=Zt[2];const Dn=Zt[3];Dn!=null&&(G.la=Dn,G.j.info("VER="+G.la));const Pn=Zt[4];Pn!=null&&(G.Aa=Pn,G.j.info("SVER="+G.Aa));const xl=Zt[5];xl!=null&&typeof xl=="number"&&0<xl&&(se=1.5*xl,G.L=se,G.j.info("backChannelRequestTimeoutMs_="+se)),se=G;const js=A.g;if(js){const ff=js.g?js.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ff){var Me=se.h;Me.g||ff.indexOf("spdy")==-1&&ff.indexOf("quic")==-1&&ff.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(bp(Me,Me.h),Me.h=null))}if(se.D){const Cp=js.g?js.g.getResponseHeader("X-HTTP-Session-Id"):null;Cp&&(se.ya=Cp,_r(se.I,se.D,Cp))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-A.F,G.j.info("Handshake RTT: "+G.R+"ms")),se=G;var Je=A;if(se.qa=by(se,se.J?se.ia:null,se.W),Je.K){Qx(se.h,Je);var fr=Je,mn=se.L;mn&&(fr.I=mn),fr.B&&(dr(fr),rt(fr)),se.g=Je}else vy(se);0<G.i.length&&cf(G)}else Zt[0]!="stop"&&Zt[0]!="close"||go(G,7);else G.G==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?go(G,7):Tp(G):Zt[0]!="noop"&&G.l&&G.l.ta(Zt),G.v=0)}}Ba(4)}catch{}}var po=class{constructor(A,M){this.g=A,this.map=M}};function _i(A){this.l=A||10,o.PerformanceNavigationTiming?(A=o.performance.getEntriesByType("navigation"),A=0<A.length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pa(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function ml(A){return A.h?1:A.g?A.g.size:0}function gs(A,M){return A.h?A.h==M:A.g?A.g.has(M):!1}function bp(A,M){A.g?A.g.add(M):A.h=M}function Qx(A,M){A.h&&A.h==M?A.h=null:A.g&&A.g.has(M)&&A.g.delete(M)}_i.prototype.cancel=function(){if(this.i=Jx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function Jx(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let M=A.i;for(const G of A.g.values())M=M.concat(G.D);return M}return g(A.i)}function xk(A){if(A.V&&typeof A.V=="function")return A.V();if(typeof Map<"u"&&A instanceof Map||typeof Set<"u"&&A instanceof Set)return Array.from(A.values());if(typeof A=="string")return A.split("");if(l(A)){for(var M=[],G=A.length,se=0;se<G;se++)M.push(A[se]);return M}M=[],G=0;for(se in A)M[G++]=A[se];return M}function yk(A){if(A.na&&typeof A.na=="function")return A.na();if(!A.V||typeof A.V!="function"){if(typeof Map<"u"&&A instanceof Map)return Array.from(A.keys());if(!(typeof Set<"u"&&A instanceof Set)){if(l(A)||typeof A=="string"){var M=[];A=A.length;for(var G=0;G<A;G++)M.push(G);return M}M=[],G=0;for(const se in A)M[G++]=se;return M}}}function Zx(A,M){if(A.forEach&&typeof A.forEach=="function")A.forEach(M,void 0);else if(l(A)||typeof A=="string")Array.prototype.forEach.call(A,M,void 0);else for(var G=yk(A),se=xk(A),Ce=se.length,Me=0;Me<Ce;Me++)M.call(void 0,se[Me],G&&G[Me],A)}var ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ek(A,M){if(A){A=A.split("&");for(var G=0;G<A.length;G++){var se=A[G].indexOf("="),Ce=null;if(0<=se){var Me=A[G].substring(0,se);Ce=A[G].substring(se+1)}else Me=A[G];M(Me,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function mo(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof mo){this.h=A.h,tf(this,A.j),this.o=A.o,this.g=A.g,rf(this,A.s),this.l=A.l;var M=A.i,G=new Uc;G.i=M.i,M.g&&(G.g=new Map(M.g),G.h=M.h),ty(this,G),this.m=A.m}else A&&(M=String(A).match(ey))?(this.h=!1,tf(this,M[1]||"",!0),this.o=Lc(M[2]||""),this.g=Lc(M[3]||"",!0),rf(this,M[4]),this.l=Lc(M[5]||"",!0),ty(this,M[6]||"",!0),this.m=Lc(M[7]||"")):(this.h=!1,this.i=new Uc(null,this.h))}mo.prototype.toString=function(){var A=[],M=this.j;M&&A.push(Bc(M,ry,!0),":");var G=this.g;return(G||M=="file")&&(A.push("//"),(M=this.o)&&A.push(Bc(M,ry,!0),"@"),A.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&A.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&A.push("/"),A.push(Bc(G,G.charAt(0)=="/"?Sk:bk,!0))),(G=this.i.toString())&&A.push("?",G),(G=this.m)&&A.push("#",Bc(G,Ak)),A.join("")};function Va(A){return new mo(A)}function tf(A,M,G){A.j=G?Lc(M,!0):M,A.j&&(A.j=A.j.replace(/:$/,""))}function rf(A,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);A.s=M}else A.s=null}function ty(A,M,G){M instanceof Uc?(A.i=M,wk(A.i,A.h)):(G||(M=Bc(M,Tk)),A.i=new Uc(M,A.h))}function _r(A,M,G){A.i.set(M,G)}function nf(A){return _r(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function Lc(A,M){return A?M?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function Bc(A,M,G){return typeof A=="string"?(A=encodeURI(A).replace(M,_k),G&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function _k(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var ry=/[#\/\?@]/g,bk=/[#\?:]/g,Sk=/[#\?]/g,Tk=/[#\?@]/g,Ak=/#/g;function Uc(A,M){this.h=this.g=null,this.i=A||null,this.j=!!M}function bi(A){A.g||(A.g=new Map,A.h=0,A.i&&Ek(A.i,function(M,G){A.add(decodeURIComponent(M.replace(/\+/g," ")),G)}))}t=Uc.prototype,t.add=function(A,M){bi(this),this.i=null,A=gl(this,A);var G=this.g.get(A);return G||this.g.set(A,G=[]),G.push(M),this.h+=1,this};function ny(A,M){bi(A),M=gl(A,M),A.g.has(M)&&(A.i=null,A.h-=A.g.get(M).length,A.g.delete(M))}function sy(A,M){return bi(A),M=gl(A,M),A.g.has(M)}t.forEach=function(A,M){bi(this),this.g.forEach(function(G,se){G.forEach(function(Ce){A.call(M,Ce,se,this)},this)},this)},t.na=function(){bi(this);const A=Array.from(this.g.values()),M=Array.from(this.g.keys()),G=[];for(let se=0;se<M.length;se++){const Ce=A[se];for(let Me=0;Me<Ce.length;Me++)G.push(M[se])}return G},t.V=function(A){bi(this);let M=[];if(typeof A=="string")sy(this,A)&&(M=M.concat(this.g.get(gl(this,A))));else{A=Array.from(this.g.values());for(let G=0;G<A.length;G++)M=M.concat(A[G])}return M},t.set=function(A,M){return bi(this),this.i=null,A=gl(this,A),sy(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[M]),this.h+=1,this},t.get=function(A,M){return A?(A=this.V(A),0<A.length?String(A[0]):M):M};function ay(A,M,G){ny(A,M),0<G.length&&(A.i=null,A.g.set(gl(A,M),g(G)),A.h+=G.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],M=Array.from(this.g.keys());for(var G=0;G<M.length;G++){var se=M[G];const Me=encodeURIComponent(String(se)),Je=this.V(se);for(se=0;se<Je.length;se++){var Ce=Me;Je[se]!==""&&(Ce+="="+encodeURIComponent(String(Je[se]))),A.push(Ce)}}return this.i=A.join("&")};function gl(A,M){return M=String(M),A.j&&(M=M.toLowerCase()),M}function wk(A,M){M&&!A.j&&(bi(A),A.i=null,A.g.forEach(function(G,se){var Ce=se.toLowerCase();se!=Ce&&(ny(this,se),ay(this,Ce,G))},A)),A.j=M}function Ck(A,M){const G=new kn;if(o.Image){const se=new Image;se.onload=p(Si,G,"TestLoadImage: loaded",!0,M,se),se.onerror=p(Si,G,"TestLoadImage: error",!1,M,se),se.onabort=p(Si,G,"TestLoadImage: abort",!1,M,se),se.ontimeout=p(Si,G,"TestLoadImage: timeout",!1,M,se),o.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=A}else M(!1)}function Ik(A,M){const G=new kn,se=new AbortController,Ce=setTimeout(()=>{se.abort(),Si(G,"TestPingServer: timeout",!1,M)},1e4);fetch(A,{signal:se.signal}).then(Me=>{clearTimeout(Ce),Me.ok?Si(G,"TestPingServer: ok",!0,M):Si(G,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Ce),Si(G,"TestPingServer: error",!1,M)})}function Si(A,M,G,se,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),se(G)}catch{}}function kk(){this.g=new Mt}function Dk(A,M,G){const se=G||"";try{Zx(A,function(Ce,Me){let Je=Ce;c(Ce)&&(Je=mt(Ce)),M.push(se+Me+"="+encodeURIComponent(Je))})}catch(Ce){throw M.push(se+"type="+encodeURIComponent("_badmap")),Ce}}function sf(A){this.l=A.Ub||null,this.j=A.eb||!1}m(sf,dt),sf.prototype.g=function(){return new af(this.l,this.j)},sf.prototype.i=function(A){return function(){return A}}({});function af(A,M){Le.call(this),this.D=A,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(af,Le),t=af.prototype,t.open=function(A,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=M,this.readyState=1,$c(this)},t.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(M.body=A),(this.D||o).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vc(this)),this.readyState=0},t.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,$c(this)),this.g&&(this.readyState=3,$c(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iy(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))};function iy(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}t.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var M=A.value?A.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!A.done}))&&(this.response=this.responseText+=M)}A.done?Vc(this):$c(this),this.readyState==3&&iy(this)}},t.Ra=function(A){this.g&&(this.response=this.responseText=A,Vc(this))},t.Qa=function(A){this.g&&(this.response=A,Vc(this))},t.ga=function(){this.g&&Vc(this)};function Vc(A){A.readyState=4,A.l=null,A.j=null,A.v=null,$c(A)}t.setRequestHeader=function(A,M){this.u.append(A,M)},t.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],M=this.h.entries();for(var G=M.next();!G.done;)G=G.value,A.push(G[0]+": "+G[1]),G=M.next();return A.join(`\r
`)};function $c(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(af.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function oy(A){let M="";return k(A,function(G,se){M+=se,M+=":",M+=G,M+=`\r
`}),M}function Sp(A,M,G){e:{for(se in G){var se=!1;break e}se=!0}se||(G=oy(G),typeof A=="string"?G!=null&&encodeURIComponent(String(G)):_r(A,M,G))}function Pr(A){Le.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Pr,Le);var Pk=/^https?$/i,Fk=["POST","PUT"];t=Pr.prototype,t.Ha=function(A){this.J=A},t.ea=function(A,M,G,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);M=M?M.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pe.g(),this.v=this.o?lt(this.o):lt(pe),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(M,String(A),!0),this.B=!1}catch(Me){ly(this,Me);return}if(A=G||"",G=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Ce in se)G.set(Ce,se[Ce]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Me of se.keys())G.set(Me,se.get(Me));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(G.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ce=o.FormData&&A instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Fk,M,void 0))||se||Ce||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,Je]of G)this.g.setRequestHeader(Me,Je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dy(this),this.u=!0,this.g.send(A),this.u=!1}catch(Me){ly(this,Me)}};function ly(A,M){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=M,A.m=5,cy(A),of(A)}function cy(A){A.A||(A.A=!0,We(A,"complete"),We(A,"error"))}t.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,We(this,"complete"),We(this,"abort"),of(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),of(this,!0)),Pr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uy(this):this.bb())},t.bb=function(){uy(this)};function uy(A){if(A.h&&typeof a<"u"&&(!A.v[1]||$a(A)!=4||A.Z()!=2)){if(A.u&&$a(A)==4)_e(A.Ea,0,A);else if(We(A,"readystatechange"),$a(A)==4){A.h=!1;try{const Je=A.Z();e:switch(Je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var G;if(!(G=M)){var se;if(se=Je===0){var Ce=String(A.D).match(ey)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),se=!Pk.test(Ce?Ce.toLowerCase():"")}G=se}if(G)We(A,"complete"),We(A,"success");else{A.m=6;try{var Me=2<$a(A)?A.g.statusText:""}catch{Me=""}A.l=Me+" ["+A.Z()+"]",cy(A)}}finally{of(A)}}}}function of(A,M){if(A.g){dy(A);const G=A.g,se=A.v[0]?()=>{}:null;A.g=null,A.v=null,M||We(A,"ready");try{G.onreadystatechange=se}catch{}}}function dy(A){A.I&&(o.clearTimeout(A.I),A.I=null)}t.isActive=function(){return!!this.g};function $a(A){return A.g?A.g.readyState:0}t.Z=function(){try{return 2<$a(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(A){if(this.g){var M=this.g.responseText;return A&&M.indexOf(A)==0&&(M=M.substring(A.length)),vt(M)}};function fy(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function Rk(A){const M={};A=(A.g&&2<=$a(A)&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<A.length;se++){if(x(A[se]))continue;var G=T(A[se]);const Ce=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Me=M[Ce]||[];M[Ce]=Me,Me.push(G)}w(M,function(se){return se.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jc(A,M,G){return G&&G.internalChannelParams&&G.internalChannelParams[A]||M}function hy(A){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jc("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jc("baseRetryDelayMs",5e3,A),this.cb=jc("retryDelaySeedMs",1e4,A),this.Wa=jc("forwardChannelMaxRetries",2,A),this.wa=jc("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new _i(A&&A.concurrentRequestLimit),this.Da=new kk,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hy.prototype,t.la=8,t.G=1,t.connect=function(A,M,G,se){Jr(0),this.W=A,this.H=M||{},G&&se!==void 0&&(this.H.OSID=G,this.H.OAID=se),this.F=this.X,this.I=by(this,null,this.W),cf(this)};function Tp(A){if(py(A),A.G==3){var M=A.U++,G=Va(A.I);if(_r(G,"SID",A.K),_r(G,"RID",M),_r(G,"TYPE","terminate"),Hc(A,G),M=new Be(A,A.j,M),M.L=2,M.v=nf(Va(G)),G=!1,o.navigator&&o.navigator.sendBeacon)try{G=o.navigator.sendBeacon(M.v.toString(),"")}catch{}!G&&o.Image&&(new Image().src=M.v,G=!0),G||(M.g=Sy(M.j,null),M.g.ea(M.v)),M.F=Date.now(),rt(M)}_y(A)}function lf(A){A.g&&(wp(A),A.g.cancel(),A.g=null)}function py(A){lf(A),A.u&&(o.clearTimeout(A.u),A.u=null),uf(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&o.clearTimeout(A.s),A.s=null)}function cf(A){if(!pa(A.h)&&!A.s){A.s=!0;var M=A.Ga;N||z(),V||(N(),V=!0),L.add(M,A),A.B=0}}function Ok(A,M){return ml(A.h)>=A.h.j-(A.s?1:0)?!1:A.s?(A.i=M.D.concat(A.i),!0):A.G==1||A.G==2||A.B>=(A.Va?0:A.Wa)?!1:(A.s=Cr(f(A.Ga,A,M),Ey(A,A.B)),A.B++,!0)}t.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;const Ce=new Be(this,this.j,A);let Me=this.o;if(this.S&&(Me?(Me=S(Me),b(Me,this.S)):Me=this.S),this.m!==null||this.O||(Ce.H=Me,Me=null),this.P)e:{for(var M=0,G=0;G<this.i.length;G++){t:{var se=this.i[G];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(M+=se,4096<M){M=G;break e}if(M===4096||G===this.i.length-1){M=G+1;break e}}M=1e3}else M=1e3;M=gy(this,Ce,M),G=Va(this.I),_r(G,"RID",A),_r(G,"CVER",22),this.D&&_r(G,"X-HTTP-Session-Id",this.D),Hc(this,G),Me&&(this.O?M="headers="+encodeURIComponent(String(oy(Me)))+"&"+M:this.m&&Sp(G,this.m,Me)),bp(this.h,Ce),this.Ua&&_r(G,"TYPE","init"),this.P?(_r(G,"$req",M),_r(G,"SID","null"),Ce.T=!0,qe(Ce,G,null)):qe(Ce,G,M),this.G=2}}else this.G==3&&(A?my(this,A):this.i.length==0||pa(this.h)||my(this))};function my(A,M){var G;M?G=M.l:G=A.U++;const se=Va(A.I);_r(se,"SID",A.K),_r(se,"RID",G),_r(se,"AID",A.T),Hc(A,se),A.m&&A.o&&Sp(se,A.m,A.o),G=new Be(A,A.j,G,A.B+1),A.m===null&&(G.H=A.o),M&&(A.i=M.D.concat(A.i)),M=gy(A,G,1e3),G.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),bp(A.h,G),qe(G,se,M)}function Hc(A,M){A.H&&k(A.H,function(G,se){_r(M,se,G)}),A.l&&Zx({},function(G,se){_r(M,se,G)})}function gy(A,M,G){G=Math.min(A.i.length,G);var se=A.l?f(A.l.Na,A.l,A):null;e:{var Ce=A.i;let Me=-1;for(;;){const Je=["count="+G];Me==-1?0<G?(Me=Ce[0].g,Je.push("ofs="+Me)):Me=0:Je.push("ofs="+Me);let fr=!0;for(let mn=0;mn<G;mn++){let Zt=Ce[mn].g;const Dn=Ce[mn].map;if(Zt-=Me,0>Zt)Me=Math.max(0,Ce[mn].g-100),fr=!1;else try{Dk(Dn,Je,"req"+Zt+"_")}catch{se&&se(Dn)}}if(fr){se=Je.join("&");break e}}}return A=A.i.splice(0,G),M.D=A,se}function vy(A){if(!A.g&&!A.u){A.Y=1;var M=A.Fa;N||z(),V||(N(),V=!0),L.add(M,A),A.v=0}}function Ap(A){return A.g||A.u||3<=A.v?!1:(A.Y++,A.u=Cr(f(A.Fa,A),Ey(A,A.v)),A.v++,!0)}t.Fa=function(){if(this.u=null,xy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=Cr(f(this.ab,this),A)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jr(10),lf(this),xy(this))};function wp(A){A.A!=null&&(o.clearTimeout(A.A),A.A=null)}function xy(A){A.g=new Be(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var M=Va(A.qa);_r(M,"RID","rpc"),_r(M,"SID",A.K),_r(M,"AID",A.T),_r(M,"CI",A.F?"0":"1"),!A.F&&A.ja&&_r(M,"TO",A.ja),_r(M,"TYPE","xmlhttp"),Hc(A,M),A.m&&A.o&&Sp(M,A.m,A.o),A.L&&(A.g.I=A.L);var G=A.g;A=A.ia,G.L=1,G.v=nf(Va(M)),G.m=null,G.P=!0,Qe(G,A)}t.Za=function(){this.C!=null&&(this.C=null,lf(this),Ap(this),Jr(19))};function uf(A){A.C!=null&&(o.clearTimeout(A.C),A.C=null)}function yy(A,M){var G=null;if(A.g==M){uf(A),wp(A),A.g=null;var se=2}else if(gs(A.h,M))G=M.D,Qx(A.h,M),se=1;else return;if(A.G!=0){if(M.o)if(se==1){G=M.m?M.m.length:0,M=Date.now()-M.F;var Ce=A.B;se=ls(),We(se,new ho(se,G)),cf(A)}else vy(A);else if(Ce=M.s,Ce==3||Ce==0&&0<M.X||!(se==1&&Ok(A,M)||se==2&&Ap(A)))switch(G&&0<G.length&&(M=A.h,M.i=M.i.concat(G)),Ce){case 1:go(A,5);break;case 4:go(A,10);break;case 3:go(A,6);break;default:go(A,2)}}}function Ey(A,M){let G=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||(G*=2),G*M}function go(A,M){if(A.j.info("Error code "+M),M==2){var G=f(A.fb,A),se=A.Xa;const Ce=!se;se=new mo(se||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||tf(se,"https"),nf(se),Ce?Ck(se.toString(),G):Ik(se.toString(),G)}else Jr(2);A.G=0,A.l&&A.l.sa(M),_y(A),py(A)}t.fb=function(A){A?(this.j.info("Successfully pinged google.com"),Jr(2)):(this.j.info("Failed to ping google.com"),Jr(1))};function _y(A){if(A.G=0,A.ka=[],A.l){const M=Jx(A.h);(M.length!=0||A.i.length!=0)&&(v(A.ka,M),v(A.ka,A.i),A.h.i.length=0,g(A.i),A.i.length=0),A.l.ra()}}function by(A,M,G){var se=G instanceof mo?Va(G):new mo(G);if(se.g!="")M&&(se.g=M+"."+se.g),rf(se,se.s);else{var Ce=o.location;se=Ce.protocol,M=M?M+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Me=new mo(null);se&&tf(Me,se),M&&(Me.g=M),Ce&&rf(Me,Ce),G&&(Me.l=G),se=Me}return G=A.D,M=A.ya,G&&M&&_r(se,G,M),_r(se,"VER",A.la),Hc(A,se),se}function Sy(A,M,G){if(M&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=A.Ca&&!A.pa?new Pr(new sf({eb:G})):new Pr(A.pa),M.Ha(A.J),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ty(){}t=Ty.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function df(){}df.prototype.g=function(A,M){return new vs(A,M)};function vs(A,M){Le.call(this),this.g=new hy(M),this.l=A,this.h=M&&M.messageUrlParams||null,A=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(A?A["X-WebChannel-Content-Type"]=M.messageContentType:A={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(A?A["X-WebChannel-Client-Profile"]=M.va:A={"X-WebChannel-Client-Profile":M.va}),this.g.S=A,(A=M&&M.Sb)&&!x(A)&&(this.g.m=A),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!x(M)&&(this.g.D=M,A=this.h,A!==null&&M in A&&(A=this.h,M in A&&delete A[M])),this.j=new vl(this)}m(vs,Le),vs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vs.prototype.close=function(){Tp(this.g)},vs.prototype.o=function(A){var M=this.g;if(typeof A=="string"){var G={};G.__data__=A,A=G}else this.u&&(G={},G.__data__=mt(A),A=G);M.i.push(new po(M.Ya++,A)),M.G==3&&cf(M)},vs.prototype.N=function(){this.g.l=null,delete this.j,Tp(this.g),delete this.g,vs.aa.N.call(this)};function Ay(A){Rt.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var M=A.__sm__;if(M){e:{for(const G in M){A=G;break e}A=void 0}(this.i=A)&&(A=this.i,M=M!==null&&A in M?M[A]:void 0),this.data=M}else this.data=A}m(Ay,Rt);function wy(){Er.call(this),this.status=1}m(wy,Er);function vl(A){this.g=A}m(vl,Ty),vl.prototype.ua=function(){We(this.g,"a")},vl.prototype.ta=function(A){We(this.g,new Ay(A))},vl.prototype.sa=function(A){We(this.g,new wy)},vl.prototype.ra=function(){We(this.g,"b")},df.prototype.createWebChannel=df.prototype.g,vs.prototype.send=vs.prototype.o,vs.prototype.open=vs.prototype.m,vs.prototype.close=vs.prototype.close,lw=function(){return new df},ow=function(){return ls()},iw=Yn,jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,s0=ce,fe.COMPLETE="complete",aw=fe,pt.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Le.prototype.listen=Le.prototype.K,au=pt,Pr.prototype.listenOnce=Pr.prototype.L,Pr.prototype.getLastError=Pr.prototype.Ka,Pr.prototype.getLastErrorCode=Pr.prototype.Ba,Pr.prototype.getStatus=Pr.prototype.Z,Pr.prototype.getResponseJson=Pr.prototype.Oa,Pr.prototype.getResponseText=Pr.prototype.oa,Pr.prototype.send=Pr.prototype.ea,Pr.prototype.setWithCredentials=Pr.prototype.Ha,sw=Pr}).apply(typeof Tf<"u"?Tf:typeof self<"u"?self:typeof window<"u"?window:{});const HE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new e1("@firebase/firestore");function Kc(){return $o.logLevel}function ft(t,...e){if($o.logLevel<=Gt.DEBUG){const r=e.map(m1);$o.debug(`Firestore (${Ac}): ${t}`,...r)}}function hi(t,...e){if($o.logLevel<=Gt.ERROR){const r=e.map(m1);$o.error(`Firestore (${Ac}): ${t}`,...r)}}function jo(t,...e){if($o.logLevel<=Gt.WARN){const r=e.map(m1);$o.warn(`Firestore (${Ac}): ${t}`,...r)}}function m1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: `+t;throw hi(e),new Error(e)}function cr(t,e){t||wt()}function Pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends ua{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Mn.UNAUTHENTICATED))}shutdown(){}}class z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class K6{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){cr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ei,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ei)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(cr(typeof n.accessToken=="string"),new cw(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cr(e===null||typeof e=="string"),new Mn(e)}}class q6{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class X6{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new q6(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){cr(this.o===void 0);const n=i=>{i.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ft("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(cr(typeof r.token=="string"),this.R=r.token,new Y6(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=J6(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function er(t,e){return t<e?-1:t>e?1:0}function uc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new tt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new tt($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new tt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Qr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?er(this.nanoseconds,e.nanoseconds):er(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Qr(0,0))}static max(){return new kt(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,r,n){r===void 0?r=0:r>e.length&&wt(),n===void 0?n=e.length-r:n>e.length-r&&wt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return nd.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof nd?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class gr extends nd{construct(e,r,n){return new gr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new tt($e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new gr(r)}static emptyPath(){return new gr([])}}const Z6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends nd{construct(e,r,n){return new un(e,r,n)}static isValidIdentifier(e){return Z6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new tt($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new tt($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new tt($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new tt($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(r)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.path=e}static fromPath(e){return new gt(gr.fromString(e))}static fromName(e){return new gt(gr.fromString(e).popFirst(5))}static empty(){return new gt(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return gr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gt(new gr(e.slice()))}}function eO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(n===1e9?new Qr(r+1,0):new Qr(r,n));return new ro(s,gt.empty(),e)}function tO(t){return new ro(t.readTime,t.key,-1)}class ro{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ro(kt.min(),gt.empty(),-1)}static max(){return new ro(kt.max(),gt.empty(),-1)}}function rO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=gt.comparator(t.documentKey,e.documentKey),r!==0?r:er(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(t){if(t.code!==$e.FAILED_PRECONDITION||t.message!==nO)throw t;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ke((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ke?r:Ke.resolve(r)}catch(r){return Ke.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ke.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ke.reject(r)}static resolve(e){return new Ke((r,n)=>{r(e)})}static reject(e){return new Ke((r,n)=>{n(e)})}static waitFor(e){return new Ke((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Ke.resolve(!1);for(const n of e)r=r.next(s=>s?Ke.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ke((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Ke((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function aO(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ld(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}v1.oe=-1;function jh(t){return t==null}function U0(t){return t===0&&1/t==-1/0}function iO(t){return typeof t=="number"&&Number.isInteger(t)&&!U0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function tl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function dw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,r){this.comparator=e,this.root=r||yn.EMPTY}insert(e,r){return new Dr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Af(this.root,e,this.comparator,!1)}getReverseIterator(){return new Af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Af(this.root,e,this.comparator,!0)}}class Af{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??yn.RED,this.left=s??yn.EMPTY,this.right=i??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new yn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new yn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new WE(this.data.getIterator())}getIteratorFrom(e){return new WE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new An(this.comparator);return r.data=e,r}}class WE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new bs([])}unionWith(e){let r=new An(un.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new bs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fw("Invalid base64 string: "+i):i}}(e);return new hn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new hn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return er(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const oO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(t){if(cr(!!t),typeof t=="string"){let e=0;const r=oO.exec(t);if(cr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:$r(t.seconds),nanos:$r(t.nanos)}}function $r(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ho(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function x1(t){const e=t.mapValue.fields.__previous_value__;return Hh(e)?x1(e):e}function sd(t){const e=no(t.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class dc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new dc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf={mapValue:{}};function Go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hh(t)?4:uO(t)?9007199254740991:cO(t)?10:11:wt()}function Da(t,e){if(t===e)return!0;const r=Go(t);if(r!==Go(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sd(t).isEqual(sd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=no(s.timestampValue),o=no(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ho(s.bytesValue).isEqual(Ho(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $r(s.geoPointValue.latitude)===$r(i.geoPointValue.latitude)&&$r(s.geoPointValue.longitude)===$r(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $r(s.integerValue)===$r(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=$r(s.doubleValue),o=$r(i.doubleValue);return a===o?U0(a)===U0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],Da);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(GE(a)!==GE(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Da(a[l],o[l])))return!1;return!0}(t,e);default:return wt()}}function ad(t,e){return(t.values||[]).find(r=>Da(r,e))!==void 0}function fc(t,e){if(t===e)return 0;const r=Go(t),n=Go(e);if(r!==n)return er(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return er(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=$r(i.integerValue||i.doubleValue),l=$r(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return zE(t.timestampValue,e.timestampValue);case 4:return zE(sd(t),sd(e));case 5:return er(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Ho(i),l=Ho(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=er(o[c],l[c]);if(u!==0)return u}return er(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=er($r(i.latitude),$r(a.latitude));return o!==0?o:er($r(i.longitude),$r(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return KE(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const d=i.fields||{},f=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,m=(l=f.value)===null||l===void 0?void 0:l.arrayValue,g=er(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return g!==0?g:KE(p,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===wf.mapValue&&a===wf.mapValue)return 0;if(i===wf.mapValue)return 1;if(a===wf.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=er(l[d],u[d]);if(f!==0)return f;const p=fc(o[l[d]],c[u[d]]);if(p!==0)return p}return er(l.length,u.length)}(t.mapValue,e.mapValue);default:throw wt()}}function zE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return er(t,e);const r=no(t),n=no(e),s=er(r.seconds,n.seconds);return s!==0?s:er(r.nanos,n.nanos)}function KE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=fc(r[s],n[s]);if(i)return i}return er(r.length,n.length)}function hc(t){return Hg(t)}function Hg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=no(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ho(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return gt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Hg(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Hg(r.fields[a])}`;return s+"}"}(t.mapValue):wt()}function V0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gg(t){return!!t&&"integerValue"in t}function y1(t){return!!t&&"arrayValue"in t}function qE(t){return!!t&&"nullValue"in t}function XE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function a0(t){return!!t&&"mapValue"in t}function cO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=wu(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=wu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function uO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!a0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(r)}setAll(e){let r=un.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=wu(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());a0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];a0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){tl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ms(wu(this.value))}}function hw(t){const e=[];return tl(t.fields,(r,n)=>{const s=new un([r]);if(a0(n)){const i=hw(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new bs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Un(e,0,kt.min(),kt.min(),kt.min(),ms.empty(),0)}static newFoundDocument(e,r,n,s){return new Un(e,1,r,kt.min(),n,s,0)}static newNoDocument(e,r){return new Un(e,2,r,kt.min(),kt.min(),ms.empty(),0)}static newUnknownDocument(e,r){return new Un(e,3,r,kt.min(),kt.min(),ms.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){this.position=e,this.inclusive=r}}function YE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=gt.comparator(gt.fromName(a.referenceValue),r.key):n=fc(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function QE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Da(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,r="asc"){this.field=e,this.dir=r}}function dO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{}class Yr extends pw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new hO(e,r,n):r==="array-contains"?new gO(e,n):r==="in"?new vO(e,n):r==="not-in"?new xO(e,n):r==="array-contains-any"?new yO(e,n):new Yr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new pO(e,n):new mO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(fc(r,this.value)):r!==null&&Go(this.value)===Go(r)&&this.matchesComparison(fc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oa extends pw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new oa(e,r)}matches(e){return mw(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mw(t){return t.op==="and"}function gw(t){return fO(t)&&mw(t)}function fO(t){for(const e of t.filters)if(e instanceof oa)return!1;return!0}function Wg(t){if(t instanceof Yr)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(gw(t))return t.filters.map(e=>Wg(e)).join(",");{const e=t.filters.map(r=>Wg(r)).join(",");return`${t.op}(${e})`}}function vw(t,e){return t instanceof Yr?function(n,s){return s instanceof Yr&&n.op===s.op&&n.field.isEqual(s.field)&&Da(n.value,s.value)}(t,e):t instanceof oa?function(n,s){return s instanceof oa&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&vw(a,s.filters[o]),!0):!1}(t,e):void wt()}function xw(t){return t instanceof Yr?function(r){return`${r.field.canonicalString()} ${r.op} ${hc(r.value)}`}(t):t instanceof oa?function(r){return r.op.toString()+" {"+r.getFilters().map(xw).join(" ,")+"}"}(t):"Filter"}class hO extends Yr{constructor(e,r,n){super(e,r,n),this.key=gt.fromName(n.referenceValue)}matches(e){const r=gt.comparator(e.key,this.key);return this.matchesComparison(r)}}class pO extends Yr{constructor(e,r){super(e,"in",r),this.keys=yw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class mO extends Yr{constructor(e,r){super(e,"not-in",r),this.keys=yw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function yw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>gt.fromName(n.referenceValue))}class gO extends Yr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return y1(r)&&ad(r.arrayValue,this.value)}}class vO extends Yr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ad(this.value.arrayValue,r)}}class xO extends Yr{constructor(e,r){super(e,"not-in",r)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ad(this.value.arrayValue,r)}}class yO extends Yr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!y1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ad(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function JE(t,e=null,r=[],n=[],s=null,i=null,a=null){return new EO(t,e,r,n,s,i,a)}function E1(t){const e=Pt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Wg(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),jh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>hc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>hc(n)).join(",")),e.ue=r}return e.ue}function _1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!dO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!vw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QE(t.startAt,e.startAt)&&QE(t.endAt,e.endAt)}function zg(t){return gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _O(t,e,r,n,s,i,a,o){return new rl(t,e,r,n,s,i,a,o)}function Gh(t){return new rl(t)}function ZE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function b1(t){return t.collectionGroup!==null}function Ql(t){const e=Pt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new An(un.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new id(i,n))}),r.has(un.keyField().canonicalString())||e.ce.push(new id(un.keyField(),n))}return e.ce}function Aa(t){const e=Pt(t);return e.le||(e.le=bO(e,Ql(t))),e.le}function bO(t,e){if(t.limitType==="F")return JE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new id(s.field,i)});const r=t.endAt?new pc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new pc(t.startAt.position,t.startAt.inclusive):null;return JE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Kg(t,e){const r=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function $0(t,e,r){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Wh(t,e){return _1(Aa(t),Aa(e))&&t.limitType===e.limitType}function Ew(t){return`${E1(Aa(t))}|lt:${t.limitType}`}function Dl(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>xw(s)).join(", ")}]`),jh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>hc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>hc(s)).join(",")),`Target(${n})`}(Aa(t))}; limitType=${t.limitType})`}function zh(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):gt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Ql(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=YE(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,Ql(n),s)||n.endAt&&!function(a,o,l){const c=YE(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,Ql(n),s))}(t,e)}function SO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _w(t){return(e,r)=>{let n=!1;for(const s of Ql(t)){const i=TO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function TO(t,e,r){const n=t.field.isKeyField()?gt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?fc(l,c):wt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){tl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return dw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new Dr(gt.comparator);function pi(){return AO}const bw=new Dr(gt.comparator);function iu(...t){let e=bw;for(const r of t)e=e.insert(r.key,r);return e}function Sw(t){let e=bw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ao(){return Cu()}function Tw(){return Cu()}function Cu(){return new wc(t=>t.toString(),(t,e)=>t.isEqual(e))}const wO=new Dr(gt.comparator),CO=new An(gt.comparator);function $t(...t){let e=CO;for(const r of t)e=e.add(r);return e}const IO=new An(er);function kO(){return IO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:U0(e)?"-0":e}}function Aw(t){return{integerValue:""+t}}function DO(t,e){return iO(e)?Aw(e):S1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function PO(t,e,r){return t instanceof od?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hh(i)&&(i=x1(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof ld?Cw(t,e):t instanceof cd?Iw(t,e):function(s,i){const a=ww(s,i),o=e_(a)+e_(s.Pe);return Gg(a)&&Gg(s.Pe)?Aw(o):S1(s.serializer,o)}(t,e)}function FO(t,e,r){return t instanceof ld?Cw(t,e):t instanceof cd?Iw(t,e):r}function ww(t,e){return t instanceof j0?function(n){return Gg(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class od extends Kh{}class ld extends Kh{constructor(e){super(),this.elements=e}}function Cw(t,e){const r=kw(e);for(const n of t.elements)r.some(s=>Da(s,n))||r.push(n);return{arrayValue:{values:r}}}class cd extends Kh{constructor(e){super(),this.elements=e}}function Iw(t,e){let r=kw(e);for(const n of t.elements)r=r.filter(s=>!Da(s,n));return{arrayValue:{values:r}}}class j0 extends Kh{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function e_(t){return $r(t.integerValue||t.doubleValue)}function kw(t){return y1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,r){this.field=e,this.transform=r}}function OO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ld&&s instanceof ld||n instanceof cd&&s instanceof cd?uc(n.elements,s.elements,Da):n instanceof j0&&s instanceof j0?Da(n.Pe,s.Pe):n instanceof od&&s instanceof od}(t.transform,e.transform)}class NO{constructor(e,r){this.version=e,this.transformResults=r}}class as{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function i0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qh{}function Dw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xh(t.key,as.none()):new Bd(t.key,t.data,as.none());{const r=t.data,n=ms.empty();let s=new An(un.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new oo(t.key,n,new bs(s.toArray()),as.none())}}function MO(t,e,r){t instanceof Bd?function(s,i,a){const o=s.value.clone(),l=r_(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof oo?function(s,i,a){if(!i0(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=r_(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(Pw(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Iu(t,e,r,n){return t instanceof Bd?function(i,a,o,l){if(!i0(i.precondition,a))return o;const c=i.value.clone(),u=n_(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof oo?function(i,a,o,l){if(!i0(i.precondition,a))return o;const c=n_(i.fieldTransforms,l,a),u=a.data;return u.setAll(Pw(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return i0(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function LO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=ww(n.transform,s||null);i!=null&&(r===null&&(r=ms.empty()),r.set(n.field,i))}return r||null}function t_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&uc(n,s,(i,a)=>OO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bd extends qh{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class oo extends qh{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pw(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function r_(t,e,r){const n=new Map;cr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,FO(a,o,r[s]))}return n}function n_(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,PO(i,a,e))}return n}class Xh extends qh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BO extends qh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&MO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Iu(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Iu(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Tw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=Dw(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(kt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),$t())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(r,n)=>t_(r,n))&&uc(this.baseMutations,e.baseMutations,(r,n)=>t_(r,n))}}class T1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){cr(e.mutations.length===n.length);let s=function(){return wO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new T1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,qt;function jO(t){switch(t){default:return wt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function Fw(t){if(t===void 0)return hi("GRPC error has no .code"),$e.UNKNOWN;switch(t){case Wr.OK:return $e.OK;case Wr.CANCELLED:return $e.CANCELLED;case Wr.UNKNOWN:return $e.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return $e.INTERNAL;case Wr.UNAVAILABLE:return $e.UNAVAILABLE;case Wr.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Wr.NOT_FOUND:return $e.NOT_FOUND;case Wr.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Wr.ABORTED:return $e.ABORTED;case Wr.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Wr.DATA_LOSS:return $e.DATA_LOSS;default:return wt()}}(qt=Wr||(Wr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Fo([4294967295,4294967295],0);function s_(t){const e=HO().encode(t),r=new nw;return r.update(e),new Uint8Array(r.digest())}function a_(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fo([r,n],0),new Fo([s,i],0)]}class A1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ou(`Invalid padding: ${r}`);if(n<0)throw new ou(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ou(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Fo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Fo.fromNumber(n)));return s.compare(GO)===1&&(s=new Fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=s_(e),[n,s]=a_(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new A1(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=s_(e),[n,s]=a_(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Ud.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Yh(kt.min(),s,new Dr(er),pi(),$t())}}class Ud{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ud(n,r,$t(),$t(),$t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class Rw{constructor(e,r){this.targetId=e,this.me=r}}class Ow{constructor(e,r,n=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class i_{constructor(){this.fe=0,this.ge=l_(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$t(),r=$t(),n=$t();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:wt()}}),new Ud(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=l_()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,cr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class WO{constructor(e){this.Le=e,this.Be=new Map,this.ke=pi(),this.qe=o_(),this.Qe=new Dr(er)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(zg(i))if(n===0){const a=new gt(i.path);this.Ue(r,a,Un.newNoDocument(a,kt.min()))}else cr(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=Ho(n).toUint8Array()}catch(l){if(l instanceof fw)return jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new A1(a,s,i)}catch(l){return jo(l instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&zg(o.target)){const l=new gt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Un.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=$t();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Yh(e,r,this.Qe,this.ke,n);return this.ke=pi(),this.qe=o_(),this.Qe=new Dr(er),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new i_,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new An(er),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ft("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new i_),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function o_(){return new Dr(gt.comparator)}function l_(){return new Dr(gt.comparator)}const zO={asc:"ASCENDING",desc:"DESCENDING"},KO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qO={and:"AND",or:"OR"};class XO{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function qg(t,e){return t.useProto3Json||jh(e)?e:{value:e}}function H0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YO(t,e){return H0(t,e.toTimestamp())}function wa(t){return cr(!!t),kt.fromTimestamp(function(r){const n=no(r);return new Qr(n.seconds,n.nanos)}(t))}function w1(t,e){return Xg(t,e).canonicalString()}function Xg(t,e){const r=function(s){return new gr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Mw(t){const e=gr.fromString(t);return cr($w(e)),e}function Yg(t,e){return w1(t.databaseId,e.path)}function qp(t,e){const r=Mw(e);if(r.get(1)!==t.databaseId.projectId)throw new tt($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new tt($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new gt(Bw(r))}function Lw(t,e){return w1(t.databaseId,e)}function QO(t){const e=Mw(t);return e.length===4?gr.emptyPath():Bw(e)}function Qg(t){return new gr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bw(t){return cr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function c_(t,e,r){return{name:Yg(t,e),fields:r.value.mapValue.fields}}function JO(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(cr(u===void 0||typeof u=="string"),hn.fromBase64String(u||"")):(cr(u===void 0||u instanceof Buffer||u instanceof Uint8Array),hn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?$e.UNKNOWN:Fw(c.code);return new tt(u,c.message||"")}(a);r=new Ow(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=qp(t,n.document.name),i=wa(n.document.updateTime),a=n.document.createTime?wa(n.document.createTime):kt.min(),o=new ms({mapValue:{fields:n.document.fields}}),l=Un.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new o0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=qp(t,n.document),i=n.readTime?wa(n.readTime):kt.min(),a=Un.newNoDocument(s,i),o=n.removedTargetIds||[];r=new o0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=qp(t,n.document),i=n.removedTargetIds||[];r=new o0([],i,s,null)}else{if(!("filter"in e))return wt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new $O(s,i),o=n.targetId;r=new Rw(o,a)}}return r}function ZO(t,e){let r;if(e instanceof Bd)r={update:c_(t,e.key,e.value)};else if(e instanceof Xh)r={delete:Yg(t,e.key)};else if(e instanceof oo)r={update:c_(t,e.key,e.data),updateMask:lN(e.fieldMask)};else{if(!(e instanceof BO))return wt();r={verify:Yg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof od)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ld)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof cd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof j0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw wt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:YO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:wt()}(t,e.precondition)),r}function eN(t,e){return t&&t.length>0?(cr(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?wa(s.updateTime):wa(i);return a.isEqual(kt.min())&&(a=wa(i)),new NO(a,s.transformResults||[])}(r,e))):[]}function tN(t,e){return{documents:[Lw(t,e.path)]}}function rN(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Lw(t,s);const i=function(c){if(c.length!==0)return Vw(oa.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Pl(f.field),direction:aN(f.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=qg(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function nN(t){let e=QO(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){cr(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const f=Uw(d);return f instanceof oa&&gw(f)?f.getFilters():[f]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(f=>function(m){return new id(Fl(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(r.orderBy));let o=null;r.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,jh(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new pc(p,f)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new pc(p,f)}(r.endAt)),_O(e,s,a,i,o,"F",l,c)}function sN(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Uw(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Fl(r.unaryFilter.field);return Yr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Fl(r.unaryFilter.field);return Yr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fl(r.unaryFilter.field);return Yr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fl(r.unaryFilter.field);return Yr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(t):t.fieldFilter!==void 0?function(r){return Yr.create(Fl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return oa.create(r.compositeFilter.filters.map(n=>Uw(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return wt()}}(r.compositeFilter.op))}(t):wt()}function aN(t){return zO[t]}function iN(t){return KO[t]}function oN(t){return qO[t]}function Pl(t){return{fieldPath:t.canonicalString()}}function Fl(t){return un.fromServerFormat(t.fieldPath)}function Vw(t){return t instanceof Yr?function(r){if(r.op==="=="){if(XE(r.value))return{unaryFilter:{field:Pl(r.field),op:"IS_NAN"}};if(qE(r.value))return{unaryFilter:{field:Pl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(XE(r.value))return{unaryFilter:{field:Pl(r.field),op:"IS_NOT_NAN"}};if(qE(r.value))return{unaryFilter:{field:Pl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pl(r.field),op:iN(r.op),value:r.value}}}(t):t instanceof oa?function(r){const n=r.getFilters().map(s=>Vw(s));return n.length===1?n[0]:{compositeFilter:{op:oN(r.op),filters:n}}}(t):wt()}function lN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function $w(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,r,n,s,i=kt.min(),a=kt.min(),o=hn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.ct=e}}function uN(t){const e=nN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.un=new fN}addToCollectionParentIndex(e,r){return this.un.add(r),Ke.resolve()}getCollectionParents(e,r){return Ke.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ke.resolve()}deleteFieldIndex(e,r){return Ke.resolve()}deleteAllFieldIndexes(e){return Ke.resolve()}createTargetIndexes(e,r){return Ke.resolve()}getDocumentsMatchingTarget(e,r){return Ke.resolve(null)}getIndexType(e,r){return Ke.resolve(0)}getFieldIndexes(e,r){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,r){return Ke.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,r){return Ke.resolve(ro.min())}updateCollectionGroup(e,r,n){return Ke.resolve()}updateIndexEntries(e,r){return Ke.resolve()}}class fN{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new An(gr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new An(gr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mc(0)}static kn(){return new mc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.changes=new wc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ke.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Iu(n.mutation,s,bs.empty(),Qr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,$t()).next(()=>n))}getLocalViewOfDocuments(e,r,n=$t()){const s=Ao();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=iu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Ao();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,$t()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=pi();const a=Cu(),o=function(){return Cu()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof oo)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Iu(u.mutation,c,u.mutation.getFieldMask(),Qr.now())):a.set(c.key,bs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new pN(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Cu();let s=new Dr((a,o)=>a-o),i=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||bs.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(s.get(o.batchId)||$t()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=Tw();u.forEach(f=>{if(!i.has(f)){const p=Dw(r.get(f),n.get(f));p!==null&&d.set(f,p),i=i.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ke.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return gt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):b1(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ke.resolve(Ao());let o=-1,l=i;return a.next(c=>Ke.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?Ke.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,$t())).next(u=>({batchId:o,changes:Sw(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new gt(r)).next(n=>{let s=iu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=iu();return this.indexManager.getCollectionParents(e,i).next(o=>Ke.forEach(o,l=>{const c=function(d,f){return new rl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Un.newInvalidDocument(u)))});let o=iu();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Iu(u.mutation,c,bs.empty(),Qr.now()),zh(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ke.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:wa(s.createTime)}}(r)),Ke.resolve()}getNamedQuery(e,r){return Ke.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:uN(s.bundledQuery),readTime:wa(s.readTime)}}(r)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.overlays=new Dr(gt.comparator),this.Ir=new Map}getOverlay(e,r){return Ke.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ao();return Ke.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ke.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ke.resolve()}getOverlaysForCollection(e,r,n){const s=Ao(),i=r.length+1,a=new gt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ke.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Dr((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Ao(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Ao(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Ke.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new VO(r,n));let i=this.Ir.get(r);i===void 0&&(i=$t(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return Ke.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.Tr=new An(an.Er),this.dr=new An(an.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new an(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new an(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new gt(new gr([])),n=new an(r,e),s=new an(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new gt(new gr([])),n=new an(r,e),s=new an(r,e+1);let i=$t();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new an(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class an{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return gt.comparator(e.key,r.key)||er(e.wr,r.wr)}static Ar(e,r){return er(e.wr,r.wr)||gt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new An(an.Er)}checkEmpty(e){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new UO(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new an(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ke.resolve(a)}lookupMutationBatch(e,r){return Ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new an(r,0),s=new an(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new An(er);return r.forEach(s=>{const i=new an(s,0),a=new an(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ke.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;gt.isDocumentKey(i)||(i=i.child(""));const a=new an(new gt(i),0);let o=new An(er);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Ke.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){cr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ke.forEach(r.mutations,s=>{const i=new an(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new an(r,0),s=this.br.firstAfterOrEqual(n);return Ke.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ke.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.Mr=e,this.docs=function(){return new Dr(gt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ke.resolve(n?n.document.mutableCopy():Un.newInvalidDocument(r))}getEntries(e,r){let n=pi();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Un.newInvalidDocument(s))}),Ke.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=pi();const a=r.path,o=new gt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||rO(tO(u),n)<=0||(s.has(u.key)||zh(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Ke.resolve(i)}getAllFromCollectionGroup(e,r,n,s){wt()}Or(e,r){return Ke.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new _N(this)}getSize(e){return Ke.resolve(this.size)}}class _N extends hN{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ke.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.persistence=e,this.Nr=new wc(r=>E1(r),_1),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new C1,this.targetCount=0,this.kr=mc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ke.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new mc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ke.resolve()}updateTargetData(e,r){return this.Kn(r),Ke.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ke.waitFor(i).next(()=>s)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ke.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ke.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ke.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ke.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ke.resolve(n)}containsKey(e,r){return Ke.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,r){this.qr={},this.overlays={},this.Qr=new v1(0),this.Kr=!1,this.Kr=!0,this.$r=new xN,this.referenceDelegate=e(this),this.Ur=new bN(this),this.indexManager=new dN,this.remoteDocumentCache=function(s){return new EN(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new cN(r),this.Gr=new gN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new vN,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new yN(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ft("MemoryPersistence","Starting transaction:",e);const s=new TN(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ke.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class TN extends sO{constructor(e){super(),this.currentSequenceNumber=e}}class I1{constructor(e){this.persistence=e,this.Jr=new C1,this.Yr=null}static Zr(e){return new I1(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ke.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ke.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ke.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Xr,n=>{const s=gt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,kt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ke.or([()=>Ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=$t(),s=$t();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new k1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RR()?8:aO(Kn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new AN;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Kc()<=Gt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Dl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ke.resolve()):(Kc()<=Gt.DEBUG&&ft("QueryEngine","Query:",Dl(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Kc()<=Gt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Dl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(r))):Ke.resolve())}Yi(e,r){if(ZE(r))return Ke.resolve(null);let n=Aa(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=$0(r,null,"F"),n=Aa(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=$t(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,$0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return ZE(r)||s.isEqual(kt.min())?Ke.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ke.resolve(null):(Kc()<=Gt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dl(r)),this.rs(e,a,r,eO(s,-1)).next(o=>o))})}ts(e,r){let n=new An(_w(e));return r.forEach((s,i)=>{zh(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Kc()<=Gt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Dl(r)),this.Ji.getDocumentsMatchingQuery(e,r,ro.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Dr(er),this._s=new wc(i=>E1(i),_1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function IN(t,e,r,n){return new CN(t,e,r,n)}async function jw(t,e){const r=Pt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=$t();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function kN(t,e){const r=Pt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,f=d.keys();let p=Ke.resolve();return f.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(g=>{const v=c.docVersions.get(m);cr(v!==null),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=$t();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Hw(t){const e=Pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function DN(t,e){const r=Pt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(hn.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(d,p),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let l=pi(),c=$t();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(PN(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(kt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Ke.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function PN(t,e,r){let n=$t(),s=$t();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=pi();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(kt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ft("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function FN(t,e){const r=Pt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function RN(t,e){const r=Pt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ke.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Hi(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Jg(t,e,r){const n=Pt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ld(a))throw a;ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function u_(t,e,r){const n=Pt(t);let s=kt.min(),i=$t();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=Pt(l),f=d._s.get(u);return f!==void 0?Ke.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(n,a,Aa(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:kt.min(),r?i:$t())).next(o=>(ON(n,SO(e),o),{documents:o,Ts:i})))}function ON(t,e,r){let n=t.us.get(e)||kt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class d_{constructor(){this.activeTargetIds=kO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NN{constructor(){this.so=new d_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new d_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf=null;function Xp(){return Cf===null?Cf=function(){return 268435456+Math.round(2147483648*Math.random())}():Cf++,"0x"+Cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class UN extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Xp(),l=this.xo(r,n.toUriEncodedString());ft("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(ft("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw jo("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ac}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=LN[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Xp();return new Promise((a,o)=>{const l=new sw;l.setWithCredentials(!0),l.listenOnce(aw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case s0.NO_ERROR:const u=l.getResponseJson();ft(Fn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case s0.TIMEOUT:ft(Fn,`RPC '${e}' ${i} timed out`),o(new tt($e.DEADLINE_EXCEEDED,"Request time out"));break;case s0.HTTP_ERROR:const d=l.getStatus();if(ft(Fn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const m=function(v){const E=v.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(E)>=0?E:$e.UNKNOWN}(p.status);o(new tt(m,p.message))}else o(new tt($e.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new tt($e.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{ft(Fn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ft(Fn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Xp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=lw(),o=ow(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");ft(Fn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=a.createWebChannel(u,l);let f=!1,p=!1;const m=new BN({Io:v=>{p?ft(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(ft(Fn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),ft(Fn,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},To:()=>d.close()}),g=(v,E,x)=>{v.listen(E,y=>{try{x(y)}catch(C){setTimeout(()=>{throw C},0)}})};return g(d,au.EventType.OPEN,()=>{p||(ft(Fn,`RPC '${e}' stream ${s} transport opened.`),m.yo())}),g(d,au.EventType.CLOSE,()=>{p||(p=!0,ft(Fn,`RPC '${e}' stream ${s} transport closed`),m.So())}),g(d,au.EventType.ERROR,v=>{p||(p=!0,jo(Fn,`RPC '${e}' stream ${s} transport errored:`,v),m.So(new tt($e.UNAVAILABLE,"The operation could not be completed")))}),g(d,au.EventType.MESSAGE,v=>{var E;if(!p){const x=v.data[0];cr(!!x);const y=x,C=y.error||((E=y[0])===null||E===void 0?void 0:E.error);if(C){ft(Fn,`RPC '${e}' stream ${s} received error:`,C);const P=C.status;let k=function(_){const b=Wr[_];if(b!==void 0)return Fw(b)}(P),w=C.message;k===void 0&&(k=$e.INTERNAL,w="Unknown error status: "+P+" with message "+C.message),p=!0,m.So(new tt(k,w)),d.close()}else ft(Fn,`RPC '${e}' stream ${s} received:`,x),m.bo(x)}}),g(o,iw.STAT_EVENT,v=>{v.stat===jg.PROXY?ft(Fn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===jg.NOPROXY&&ft(Fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function Yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){return new XO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ft("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===$e.RESOURCE_EXHAUSTED?(hi(r.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new tt($e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VN extends Ww{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=JO(this.serializer,e),n=function(i){if(!("targetChange"in i))return kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?wa(a.readTime):kt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Qg(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=zg(l)?{documents:tN(i,l)}:{query:rN(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Nw(i,a.resumeToken);const c=qg(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(kt.min())>0){o.readTime=H0(i,a.snapshotVersion.toTimestamp());const c=qg(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=sN(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Qg(this.serializer),r.removeTarget=e,this.a_(r)}}class $N extends Ww{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return cr(!!e.streamToken),this.lastStreamToken=e.streamToken,cr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){cr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=eN(e.writeResults,e.commitTime),n=wa(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Qg(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>ZO(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new tt($e.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Xg(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new tt($e.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Xg(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new tt($e.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class HN{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hi(r),this.D_=!1):ft("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{nl(this)&&(ft("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Pt(l);c.L_.add(4),await Vd(c),c.q_.set("Unknown"),c.L_.delete(4),await Jh(c)}(this))})}),this.q_=new HN(n,s)}}async function Jh(t){if(nl(t))for(const e of t.B_)await e(!0)}async function Vd(t){for(const e of t.B_)await e(!1)}function zw(t,e){const r=Pt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),R1(r)?F1(r):Cc(r).r_()&&P1(r,e))}function D1(t,e){const r=Pt(t),n=Cc(r);r.N_.delete(e),n.r_()&&Kw(r,e),r.N_.size===0&&(n.r_()?n.o_():nl(r)&&r.q_.set("Unknown"))}function P1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Cc(t).A_(e)}function Kw(t,e){t.Q_.xe(e),Cc(t).R_(e)}function F1(t){t.Q_=new WO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Cc(t).start(),t.q_.v_()}function R1(t){return nl(t)&&!Cc(t).n_()&&t.N_.size>0}function nl(t){return Pt(t).L_.size===0}function qw(t){t.Q_=void 0}async function WN(t){t.q_.set("Online")}async function zN(t){t.N_.forEach((e,r)=>{P1(t,e)})}async function KN(t,e){qw(t),R1(t)?(t.q_.M_(e),F1(t)):t.q_.set("Unknown")}async function qN(t,e,r){if(t.q_.set("Online"),e instanceof Ow&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await G0(t,n)}else if(e instanceof o0?t.Q_.Ke(e):e instanceof Rw?t.Q_.He(e):t.Q_.We(e),!r.isEqual(kt.min()))try{const n=await Hw(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(hn.EMPTY_BYTE_STRING,u.snapshotVersion)),Kw(i,l);const d=new Hi(u.target,l,c,u.sequenceNumber);P1(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ft("RemoteStore","Failed to raise snapshot:",n),await G0(t,n)}}async function G0(t,e,r){if(!Ld(e))throw e;t.L_.add(1),await Vd(t),t.q_.set("Offline"),r||(r=()=>Hw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ft("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Jh(t)})}function Xw(t,e){return e().catch(r=>G0(t,r,e))}async function Zh(t){const e=Pt(t),r=so(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XN(e);)try{const s=await FN(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,YN(e,s)}catch(s){await G0(e,s)}Yw(e)&&Qw(e)}function XN(t){return nl(t)&&t.O_.length<10}function YN(t,e){t.O_.push(e);const r=so(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Yw(t){return nl(t)&&!so(t).n_()&&t.O_.length>0}function Qw(t){so(t).start()}async function QN(t){so(t).p_()}async function JN(t){const e=so(t);for(const r of t.O_)e.m_(r.mutations)}async function ZN(t,e,r){const n=t.O_.shift(),s=T1.from(n,e,r);await Xw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zh(t)}async function e5(t,e){e&&so(t).V_&&await async function(n,s){if(function(a){return jO(a)&&a!==$e.ABORTED}(s.code)){const i=n.O_.shift();so(n).s_(),await Xw(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zh(n)}}(t,e),Yw(t)&&Qw(t)}async function h_(t,e){const r=Pt(t);r.asyncQueue.verifyOperationInProgress(),ft("RemoteStore","RemoteStore received new credentials");const n=nl(r);r.L_.add(3),await Vd(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Jh(r)}async function t5(t,e){const r=Pt(t);e?(r.L_.delete(2),await Jh(r)):e||(r.L_.add(2),await Vd(r),r.q_.set("Unknown"))}function Cc(t){return t.K_||(t.K_=function(r,n,s){const i=Pt(r);return i.w_(),new VN(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:WN.bind(null,t),Ro:zN.bind(null,t),mo:KN.bind(null,t),d_:qN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),R1(t)?F1(t):t.q_.set("Unknown")):(await t.K_.stop(),qw(t))})),t.K_}function so(t){return t.U_||(t.U_=function(r,n,s){const i=Pt(r);return i.w_(),new $N(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QN.bind(null,t),mo:e5.bind(null,t),f_:JN.bind(null,t),g_:ZN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Zh(t)):(await t.U_.stop(),t.O_.length>0&&(ft("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new O1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N1(t,e){if(hi("AsyncQueue",`${e}: ${t}`),Ld(t))return new tt($e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.comparator=e?(r,n)=>e(r,n)||gt.comparator(r.key,n.key):(r,n)=>gt.comparator(r.key,n.key),this.keyedMap=iu(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new Jl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Jl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.W_=new Dr(gt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class gc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new gc(e,r,Jl.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class n5{constructor(){this.queries=m_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Pt(r),i=s.queries;s.queries=m_(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new tt($e.ABORTED,"Firestore shutting down"))}}function m_(){return new wc(t=>Ew(t),Wh)}async function M1(t,e){const r=Pt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new r5,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=N1(a,`Initialization of query '${Dl(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&B1(r)}async function L1(t,e){const r=Pt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function s5(t,e){const r=Pt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&B1(r)}function a5(t,e,r){const n=Pt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function B1(t){t.Y_.forEach(e=>{e.next()})}var Zg,g_;(g_=Zg||(Zg={})).ea="default",g_.Cache="cache";class U1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new gc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.key=e}}class Zw{constructor(e){this.key=e}}class i5{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$t(),this.mutatedKeys=$t(),this.Aa=_w(e),this.Ra=new Jl(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new p_,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),p=zh(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?m!==g&&(n.track({type:3,doc:p}),v=!0):this.ga(f,p)||(n.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!f&&p?(n.track({type:0,doc:p}),v=!0):f&&!p&&(n.track({type:1,doc:f}),v=!0,(l||c)&&(o=!0)),v&&(p?(a=a.add(p),i=g?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(p,m){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return g(p)-g(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new gc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new p_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$t(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new Zw(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Jw(n))}),r}ba(e){this.Ta=e.Ts,this.da=$t();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return gc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class o5{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class l5{constructor(e){this.key=e,this.va=!1}}class c5{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new wc(o=>Ew(o),Wh),this.Ma=new Map,this.xa=new Set,this.Oa=new Dr(gt.comparator),this.Na=new Map,this.La=new C1,this.Ba={},this.ka=new Map,this.qa=mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function u5(t,e,r=!0){const n=aC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await eC(n,e,r,!0),s}async function d5(t,e){const r=aC(t);await eC(r,e,!0,!1)}async function eC(t,e,r,n){const s=await RN(t.localStore,Aa(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await f5(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&zw(t.remoteStore,s),o}async function f5(t,e,r,n,s){t.Ka=(d,f,p)=>async function(g,v,E,x){let y=v.view.ma(E);y.ns&&(y=await u_(g.localStore,v.query,!1).then(({documents:w})=>v.view.ma(w,y)));const C=x&&x.targetChanges.get(v.targetId),P=x&&x.targetMismatches.get(v.targetId)!=null,k=v.view.applyChanges(y,g.isPrimaryClient,C,P);return x_(g,v.targetId,k.wa),k.snapshot}(t,d,f,p);const i=await u_(t.localStore,e,!0),a=new i5(e,i.Ts),o=a.ma(i.documents),l=Ud.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);x_(t,r,c.wa);const u=new o5(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function h5(t,e,r){const n=Pt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Wh(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Jg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&D1(n.remoteStore,s.targetId),ev(n,s.targetId)}).catch(Md)):(ev(n,s.targetId),await Jg(n.localStore,s.targetId,!0))}async function p5(t,e){const r=Pt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),D1(r.remoteStore,n.targetId))}async function m5(t,e,r){const n=b5(t);try{const s=await function(a,o){const l=Pt(a),c=Qr.now(),u=o.reduce((p,m)=>p.add(m.key),$t());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=pi(),g=$t();return l.cs.getEntries(p,u).next(v=>{m=v,m.forEach((E,x)=>{x.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(v=>{d=v;const E=[];for(const x of o){const y=LO(x,d.get(x.key).overlayedDocument);y!=null&&E.push(new oo(x.key,y,hw(y.value.mapValue),as.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,o)}).next(v=>{f=v;const E=v.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Sw(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Dr(er)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await $d(n,s.changes),await Zh(n.remoteStore)}catch(s){const i=N1(s,"Failed to persist write");r.reject(i)}}async function tC(t,e){const r=Pt(t);try{const n=await DN(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(cr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?cr(a.va):s.removedDocuments.size>0&&(cr(a.va),a.va=!1))}),await $d(r,n,e)}catch(n){await Md(n)}}function v_(t,e,r){const n=Pt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Pt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(o)&&(c=!0)}),c&&B1(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function g5(t,e,r){const n=Pt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Dr(gt.comparator);a=a.insert(i,Un.newNoDocument(i,kt.min()));const o=$t().add(i),l=new Yh(kt.min(),new Map,new Dr(er),a,o);await tC(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),V1(n)}else await Jg(n.localStore,e,!1).then(()=>ev(n,e,r)).catch(Md)}async function v5(t,e){const r=Pt(t),n=e.batch.batchId;try{const s=await kN(r.localStore,e);nC(r,n,null),rC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await $d(r,s)}catch(s){await Md(s)}}async function x5(t,e,r){const n=Pt(t);try{const s=await function(a,o){const l=Pt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(cr(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);nC(n,e,r),rC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await $d(n,s)}catch(s){await Md(s)}}function rC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function nC(t,e,r){const n=Pt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function ev(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||sC(t,n)})}function sC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(D1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),V1(t))}function x_(t,e,r){for(const n of r)n instanceof Jw?(t.La.addReference(n.key,e),y5(t,n)):n instanceof Zw?(ft("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||sC(t,n.key)):wt()}function y5(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ft("SyncEngine","New document in limbo: "+r),t.xa.add(n),V1(t))}function V1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new gt(gr.fromString(e)),n=t.qa.next();t.Na.set(n,new l5(r)),t.Oa=t.Oa.insert(r,n),zw(t.remoteStore,new Hi(Aa(Gh(r.path)),n,"TargetPurposeLimboResolution",v1.oe))}}async function $d(t,e,r){const n=Pt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=k1.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Pt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ke.forEach(c,f=>Ke.forEach(f.$i,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>Ke.forEach(f.Ui,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Ld(d))throw d;ft("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.os.get(f),m=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(f,g)}}}(n.localStore,i))}async function E5(t,e){const r=Pt(t);if(!r.currentUser.isEqual(e)){ft("SyncEngine","User change. New user:",e.toKey());const n=await jw(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new tt($e.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $d(r,n.hs)}}function _5(t,e){const r=Pt(t),n=r.Na.get(e);if(n&&n.va)return $t().add(n.key);{let s=$t();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function aC(t){const e=Pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g5.bind(null,e),e.Ca.d_=s5.bind(null,e.eventManager),e.Ca.$a=a5.bind(null,e.eventManager),e}function b5(t){const e=Pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x5.bind(null,e),e}class W0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return IN(this.persistence,new wN,e.initialUser,this.serializer)}Ga(e){return new SN(I1.Zr,this.serializer)}Wa(e){return new NN}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}W0.provider={build:()=>new W0};class tv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>v_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=E5.bind(null,this.syncEngine),await t5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n5}()}createDatastore(e){const r=Qh(e.databaseInfo.databaseId),n=function(i){return new UN(i)}(e.databaseInfo);return function(i,a,o,l){return new jN(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new GN(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>v_(this.syncEngine,r,0),function(){return f_.D()?new f_:new MN}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const d=new c5(s,i,a,o,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Pt(s);ft("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Vd(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}tv.provider={build:()=>new tv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Mn.UNAUTHENTICATED,this.clientId=g1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{ft("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ft("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=N1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Qp(t,e){t.asyncQueue.verifyOperationInProgress(),ft("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await jw(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await T5(t);ft("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>h_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>h_(e.remoteStore,s)),t._onlineComponents=e}async function T5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ft("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===$e.FAILED_PRECONDITION||s.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;jo("Error using user provided cache. Falling back to memory cache: "+r),await Qp(t,new W0)}}else ft("FirestoreClient","Using default OfflineComponentProvider"),await Qp(t,new W0);return t._offlineComponents}async function iC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ft("FirestoreClient","Using user provided OnlineComponentProvider"),await y_(t,t._uninitializedComponentsProvider._online)):(ft("FirestoreClient","Using default OnlineComponentProvider"),await y_(t,new tv))),t._onlineComponents}function A5(t){return iC(t).then(e=>e.syncEngine)}async function z0(t){const e=await iC(t),r=e.eventManager;return r.onListen=u5.bind(null,e.syncEngine),r.onUnlisten=h5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=d5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=p5.bind(null,e.syncEngine),r}function w5(t,e,r={}){const n=new ei;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new $1({next:f=>{u.Za(),a.enqueueAndForget(()=>L1(i,d));const p=f.docs.has(o);!p&&f.fromCache?c.reject(new tt($e.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new tt($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new U1(Gh(o.path),u,{includeMetadataChanges:!0,_a:!0});return M1(i,d)}(await z0(t),t.asyncQueue,e,r,n)),n.promise}function C5(t,e,r={}){const n=new ei;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new $1({next:f=>{u.Za(),a.enqueueAndForget(()=>L1(i,d)),f.fromCache&&l.source==="server"?c.reject(new tt($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new U1(o,u,{includeMetadataChanges:!0,_a:!0});return M1(i,d)}(await z0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e,r){if(!r)throw new tt($e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cC(t,e,r,n){if(e===!0&&n===!0)throw new tt($e.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function __(t){if(!gt.isDocumentKey(t))throw new tt($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function b_(t){if(gt.isDocumentKey(t))throw new tt($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ep(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new tt($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ep(t);throw new tt($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function I5(t,e){if(e<=0)throw new tt($e.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new tt($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new tt($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new tt($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new tt($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new tt($e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new uw;switch(n.type){case"firstParty":return new X6(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new tt($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=E_.get(r);n&&(ft("ComponentProvider","Removing Datastore"),E_.delete(r),n.terminate())}(this),Promise.resolve()}}function uC(t,e,r,n={}){var s;const i=(t=Wn(t,tp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Mn.MOCK_USER;else{o=yA(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new tt($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mn(c)}t._authCredentials=new z6(new cw(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class wn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class ti extends da{constructor(e,r,n){super(e,r,Gh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new gt(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function Ft(t,e,...r){if(t=ir(t),lC("collection","path",e),t instanceof tp){const n=gr.fromString(e,...r);return b_(n),new ti(t,null,n)}{if(!(t instanceof wn||t instanceof ti))throw new tt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(gr.fromString(e,...r));return b_(n),new ti(t.firestore,null,n)}}function at(t,e,...r){if(t=ir(t),arguments.length===1&&(e=g1.newId()),lC("doc","path",e),t instanceof tp){const n=gr.fromString(e,...r);return __(n),new wn(t,null,new gt(n))}{if(!(t instanceof wn||t instanceof ti))throw new tt($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(gr.fromString(e,...r));return __(n),new wn(t.firestore,t instanceof ti?t.converter:null,new gt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gw(this,"async_queue_retry"),this.Vu=()=>{const n=Yp();n&&ft("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Yp();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Yp();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ei;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ld(e))throw e;ft("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw hi("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=O1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function A_(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class la extends tp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new T_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T_(e),this._firestoreClient=void 0,await e}}}function lo(t,e){const r=typeof t=="object"?t:Fd(),n=typeof t=="string"?t:"(default)",s=Pd(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Zv("firestore");i&&uC(s,...i)}return s}function Ic(t){if(t._terminated)throw new tt($e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k5(t),t._firestoreClient}function k5(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new lO(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,oC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new S5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(hn.fromBase64String(e))}catch(r){throw new tt($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Wo(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new tt($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new tt($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new tt($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return er(this._lat,e._lat)||er(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=/^__.*__$/;class P5{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Bd(e,this.data,r,this.fieldTransforms)}}class dC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new oo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function fC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class j1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new j1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return K0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fC(this.Cu)&&D5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class F5{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Qh(e)}Qu(e,r,n,s=!1){return new j1({Cu:e,methodName:r,qu:n,path:un.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dc(t){const e=t._freezeSettings(),r=Qh(t._databaseId);return new F5(t._databaseId,!!e.ignoreUndefinedProperties,r)}function H1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);W1("Data must be an object, but it was:",a,n);const o=gC(n,a);let l,c;if(i.merge)l=new bs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const f=rv(e,d,r);if(!a.contains(f))throw new tt($e.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);xC(u,f)||u.push(f)}l=new bs(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new P5(new ms(o),l,c)}class sp extends jd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sp}}class G1 extends jd{_toFieldTransform(e){return new RO(e.path,new od)}isEqual(e){return e instanceof G1}}function hC(t,e,r,n){const s=t.Qu(1,e,r);W1("Data must be an object, but it was:",s,n);const i=[],a=ms.empty();tl(n,(l,c)=>{const u=z1(e,l,r);c=ir(c);const d=s.Nu(u);if(c instanceof sp)i.push(u);else{const f=Hd(c,d);f!=null&&(i.push(u),a.set(u,f))}});const o=new bs(i);return new dC(a,o,s.fieldTransforms)}function pC(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[rv(e,n,r)],l=[s];if(i.length%2!=0)throw new tt($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)o.push(rv(e,i[f])),l.push(i[f+1]);const c=[],u=ms.empty();for(let f=o.length-1;f>=0;--f)if(!xC(c,o[f])){const p=o[f];let m=l[f];m=ir(m);const g=a.Nu(p);if(m instanceof sp)c.push(p);else{const v=Hd(m,g);v!=null&&(c.push(p),u.set(p,v))}}const d=new bs(c);return new dC(u,d,a.fieldTransforms)}function mC(t,e,r,n=!1){return Hd(r,t.Qu(n?4:3,e))}function Hd(t,e){if(vC(t=ir(t)))return W1("Unsupported field value:",e,t),gC(t,e);if(t instanceof jd)return function(n,s){if(!fC(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Hd(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=ir(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return DO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Qr.fromDate(n);return{timestampValue:H0(s.serializer,i)}}if(n instanceof Qr){const i=new Qr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:H0(s.serializer,i)}}if(n instanceof rp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Wo)return{bytesValue:Nw(s.serializer,n._byteString)};if(n instanceof wn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:w1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof np)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return S1(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${ep(n)}`)}(t,e)}function gC(t,e){const r={};return dw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tl(t,(n,s)=>{const i=Hd(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function vC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qr||t instanceof rp||t instanceof Wo||t instanceof wn||t instanceof jd||t instanceof np)}function W1(t,e,r){if(!vC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=ep(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function rv(t,e,r){if((e=ir(e))instanceof kc)return e._internalPath;if(typeof e=="string")return z1(t,e);throw K0("Field path arguments must be of type string or ",t,!1,void 0,r)}const R5=new RegExp("[~\\*/\\[\\]]");function z1(t,e,r){if(e.search(R5)>=0)throw K0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new kc(...e.split("."))._internalPath}catch{throw K0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function K0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new tt($e.INVALID_ARGUMENT,o+t+l)}function xC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ap("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class O5 extends K1{data(){return super.data()}}function ap(t,e){return typeof e=="string"?z1(t,e):e instanceof kc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new tt($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q1{}class Gd extends q1{}function lr(t,e,...r){let n=[];e instanceof q1&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof ip).length,o=i.filter(l=>l instanceof Wd).length;if(a>1||a>0&&o>0)throw new tt($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Wd extends Gd{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Wd(e,r,n)}_apply(e){const r=this._parse(e);return EC(e._query,r),new da(e.firestore,e.converter,Kg(e._query,r))}_parse(e){const r=Dc(e.firestore);return function(i,a,o,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new tt($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){C_(d,u);const p=[];for(const m of d)p.push(w_(l,i,m));f={arrayValue:{values:p}}}else f=w_(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||C_(d,u),f=mC(o,a,d,u==="in"||u==="not-in");return Yr.create(c,u,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Nr(t,e,r){const n=e,s=ap("where",t);return Wd._create(s,n,r)}class ip extends q1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ip(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:oa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)EC(a,l),a=Kg(a,l)}(e._query,r),new da(e.firestore,e.converter,Kg(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class op extends Gd{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new op(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new tt($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new tt($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new id(i,a)}(e._query,this._field,this._direction);return new da(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new rl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function ln(t,e="asc"){const r=e,n=ap("orderBy",t);return op._create(n,r)}class lp extends Gd{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new lp(e,r,n)}_apply(e){return new da(e.firestore,e.converter,$0(e._query,this._limit,this._limitType))}}function Qs(t){return I5("limit",t),lp._create("limit",t,"F")}class cp extends Gd{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new cp(e,r,n)}_apply(e){const r=N5(e,this.type,this._docOrFields,this._inclusive);return new da(e.firestore,e.converter,function(s,i){return new rl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function q0(...t){return cp._create("startAfter",t,!1)}function N5(t,e,r,n){if(r[0]=ir(r[0]),r[0]instanceof K1)return function(i,a,o,l,c){if(!l)throw new tt($e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Ql(i))if(d.field.isKeyField())u.push(V0(a,l.key));else{const f=l.data.field(d.field);if(Hh(f))throw new tt($e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new tt($e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(f)}return new pc(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Dc(t.firestore);return function(a,o,l,c,u,d){const f=a.explicitOrderBy;if(u.length>f.length)throw new tt($e.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let m=0;m<u.length;m++){const g=u[m];if(f[m].field.isKeyField()){if(typeof g!="string")throw new tt($e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!b1(a)&&g.indexOf("/")!==-1)throw new tt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const v=a.path.child(gr.fromString(g));if(!gt.isDocumentKey(v))throw new tt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const E=new gt(v);p.push(V0(o,E))}else{const v=mC(l,c,g);p.push(v)}}return new pc(p,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function w_(t,e,r){if(typeof(r=ir(r))=="string"){if(r==="")throw new tt($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b1(e)&&r.indexOf("/")!==-1)throw new tt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(gr.fromString(r));if(!gt.isDocumentKey(n))throw new tt($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return V0(t,new gt(n))}if(r instanceof wn)return V0(t,r._key);throw new tt($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ep(r)}.`)}function C_(t,e){if(!Array.isArray(t)||t.length===0)throw new tt($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new tt($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tt($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class _C{convertValue(e,r="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return tl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>$r(a.doubleValue));return new np(i)}convertGeoPoint(e){return new rp($r(e.latitude),$r(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=x1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(sd(e));default:return null}}convertTimestamp(e){const r=no(e);return new Qr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=gr.fromString(e);cr($w(n));const s=new dc(n.get(1),n.get(3)),i=new gt(n.popFirst(5));return s.isEqual(r)||hi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y1 extends K1{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ap("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ku extends Y1{data(e={}){return super.data(e)}}class Q1{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Ll(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ku(this._firestore,this._userDataWriter,n.key,n,new Ll(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new tt($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new ku(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ll(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new ku(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ll(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:M5(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function M5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){t=Wn(t,wn);const e=Wn(t.firestore,la);return w5(Ic(e),t._key).then(r=>SC(e,t,r))}class J1 extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,r)}}function Qt(t){t=Wn(t,da);const e=Wn(t.firestore,la),r=Ic(e),n=new J1(e);return yC(t._query),C5(r,t._query).then(s=>new Q1(e,n,t,s))}function tr(t,e,r){t=Wn(t,wn);const n=Wn(t.firestore,la),s=X1(t.converter,e,r);return Pc(n,[H1(Dc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,as.none())])}function up(t,e,r,...n){t=Wn(t,wn);const s=Wn(t.firestore,la),i=Dc(s);let a;return a=typeof(e=ir(e))=="string"||e instanceof kc?pC(i,"updateDoc",t._key,e,r,n):hC(i,"updateDoc",t._key,e),Pc(s,[a.toMutation(t._key,as.exists(!0))])}function zo(t){return Pc(Wn(t.firestore,la),[new Xh(t._key,as.none())])}function bC(t,e){const r=Wn(t.firestore,la),n=at(t),s=X1(t.converter,e);return Pc(r,[H1(Dc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,as.exists(!1))]).then(()=>n)}function Qi(t,...e){var r,n,s;t=ir(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||A_(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(A_(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof wn)c=Wn(t.firestore,la),u=Gh(t._key.path),l={next:d=>{e[a]&&e[a](SC(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=Wn(t,da);c=Wn(d.firestore,la),u=d._query;const f=new J1(c);l={next:p=>{e[a]&&e[a](new Q1(c,f,d,p))},error:e[a+1],complete:e[a+2]},yC(t._query)}return function(f,p,m,g){const v=new $1(g),E=new U1(p,v,m);return f.asyncQueue.enqueueAndForget(async()=>M1(await z0(f),E)),()=>{v.Za(),f.asyncQueue.enqueueAndForget(async()=>L1(await z0(f),E))}}(Ic(c),u,o,l)}function Pc(t,e){return function(n,s){const i=new ei;return n.asyncQueue.enqueueAndForget(async()=>m5(await A5(n),s,i)),i.promise}(Ic(t),e)}function SC(t,e,r){const n=r.docs.get(e._key),s=new J1(t);return new Y1(t,s,e._key,n,new Ll(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Dc(e)}set(e,r,n){this._verifyNotCommitted();const s=Jp(e,this._firestore),i=X1(s.converter,r,n),a=H1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,as.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Jp(e,this._firestore);let a;return a=typeof(r=ir(r))=="string"||r instanceof kc?pC(this._dataReader,"WriteBatch.update",i._key,r,n,s):hC(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,as.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Jp(e,this._firestore);return this._mutations=this._mutations.concat(new Xh(r._key,as.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tt($e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jp(t,e){if((t=ir(t)).firestore!==e)throw new tt($e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function sa(){return new G1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){return Ic(t=Wn(t,la)),new TC(t,e=>Pc(t,e))}(function(e,r=!0){(function(s){Ac=s})(el),to(new ui("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new la(new K6(n.getProvider("auth-internal")),new Q6(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new tt($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ms(HE,"4.7.3",e),Ms(HE,"4.7.3","esm2017")})();const L5=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_C,Bytes:Wo,CollectionReference:ti,DocumentReference:wn,DocumentSnapshot:Y1,FieldPath:kc,FieldValue:jd,Firestore:la,FirestoreError:tt,GeoPoint:rp,Query:da,QueryCompositeFilterConstraint:ip,QueryConstraint:Gd,QueryDocumentSnapshot:ku,QueryFieldFilterConstraint:Wd,QueryLimitConstraint:lp,QueryOrderByConstraint:op,QuerySnapshot:Q1,QueryStartAtConstraint:cp,SnapshotMetadata:Ll,Timestamp:Qr,VectorValue:np,WriteBatch:TC,_AutoId:g1,_ByteString:hn,_DatabaseId:dc,_DocumentKey:gt,_EmptyAuthCredentialsProvider:uw,_FieldPath:un,_cast:Wn,_logWarn:jo,_validateIsNotUsedTogether:cC,addDoc:bC,collection:Ft,connectFirestoreEmulator:uC,deleteDoc:zo,doc:at,ensureFirestoreConfigured:Ic,executeWrite:Pc,getDoc:sr,getDocs:Qt,getFirestore:lo,limit:Qs,onSnapshot:Qi,orderBy:ln,query:lr,serverTimestamp:sa,setDoc:tr,startAfter:q0,updateDoc:up,where:Nr,writeBatch:Z1},Symbol.toStringTag,{value:"Module"}));var B5="firebase",U5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(B5,U5,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="firebasestorage.googleapis.com",wC="storageBucket",V5=2*60*1e3,$5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends ua{constructor(e,r,n=0){super(Zp(e),`Firebase Storage: ${r} (${Zp(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lr||(Lr={}));function Zp(t){return"storage/"+t}function ex(){const t="An unknown error occurred, please check the error payload for server response.";return new Ur(Lr.UNKNOWN,t)}function j5(t){return new Ur(Lr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function H5(t){return new Ur(Lr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function G5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ur(Lr.UNAUTHENTICATED,t)}function W5(){return new Ur(Lr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function z5(t){return new Ur(Lr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function K5(){return new Ur(Lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function q5(){return new Ur(Lr.CANCELED,"User canceled the upload/download.")}function X5(t){return new Ur(Lr.INVALID_URL,"Invalid URL '"+t+"'.")}function Y5(t){return new Ur(Lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Q5(){return new Ur(Lr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wC+"' property when initializing the app?")}function J5(){return new Ur(Lr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z5(t){return new Ur(Lr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function X0(t){return new Ur(Lr.INVALID_ARGUMENT,t)}function CC(){return new Ur(Lr.APP_DELETED,"The Firebase app was deleted.")}function IC(t){return new Ur(Lr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Du(t,e){return new Ur(Lr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qc(t){throw new Ur(Lr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Hn.makeFromUrl(e,r)}catch{return new Hn(e,"")}if(n.path==="")return n;throw Y5(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),m={bucket:1,path:3},g=r===AC?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",E=new RegExp(`^https?://${g}/${s}/${v}`,"i"),y=[{regex:o,indices:l,postModify:i},{regex:p,indices:m,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<y.length;C++){const P=y[C],k=P.regex.exec(e);if(k){const w=k[P.indices.bucket];let S=k[P.indices.path];S||(S=""),n=new Hn(w,S),P.postModify(n);break}}if(n==null)throw X5(e);return n}}class e9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function f(){i&&clearTimeout(i)}function p(v,...E){if(c){f();return}if(v){f(),u.call(null,v,...E);return}if(l()||a){f(),u.call(null,v,...E);return}n<64&&(n*=2);let y;o===1?(o=2,y=0):y=(n+Math.random())*1e3,d(y)}let m=!1;function g(v){m||(m=!0,f(),!c&&(s!==null?(v||(o=2),clearTimeout(s),d(0)):v||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,g(!0)},r),g}function r9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t){return t!==void 0}function s9(t){return typeof t=="object"&&!Array.isArray(t)}function kC(t){return typeof t=="string"||t instanceof String}function I_(t){return tx()&&t instanceof Blob}function tx(){return typeof Blob<"u"}function nv(t,e,r,n){if(n<e)throw X0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw X0(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function a9(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Ro;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ro||(Ro={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,r,n,s,i,a,o,l,c,u,d,f=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new If(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Ro.NO_ERROR,l=i.getStatus();if(!o||i9(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Ro.ABORT;n(!1,new If(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new If(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());n9(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=ex();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?CC():q5();a(l)}else{const l=K5();a(l)}};this.canceled_?r(!1,new If(!1,null,!0)):this.backoffId_=t9(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&r9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class If{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function l9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function c9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function u9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function d9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function f9(t,e,r,n,s,i,a=!0){const o=a9(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return u9(c,e),l9(c,r),c9(c,i),d9(c,n),new o9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p9(...t){const e=h9();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(tx())return new Blob(t);throw new Ur(Lr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function m9(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t){if(typeof atob>"u")throw Z5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class em{constructor(e,r){this.data=e,this.contentType=r||null}}function nx(t,e){switch(t){case Rs.RAW:return new em(DC(e));case Rs.BASE64:case Rs.BASE64URL:return new em(PC(t,e));case Rs.DATA_URL:return new em(x9(e),y9(e))}throw ex()}function DC(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function v9(t){let e;try{e=decodeURIComponent(t)}catch{throw Du(Rs.DATA_URL,"Malformed data URL.")}return DC(e)}function PC(t,e){switch(t){case Rs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Du(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Rs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Du(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=g9(e)}catch(s){throw s.message.includes("polyfill")?s:Du(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class FC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Du(Rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=E9(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function x9(t){const e=new FC(t);return e.base64?PC(Rs.BASE64,e.rest):v9(e.rest)}function y9(t){return new FC(t).contentType}function E9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,r){let n=0,s="";I_(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(I_(this.data_)){const n=this.data_,s=m9(n,e,r);return s===null?null:new qa(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new qa(n,!0)}}static getBlob(...e){if(tx()){const r=e.map(n=>n instanceof qa?n.data_:n);return new qa(p9.apply(null,r))}else{const r=e.map(a=>kC(a)?nx(Rs.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new qa(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){let e;try{e=JSON.parse(t)}catch{return null}return s9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function b9(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function OC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t,e){return e}class Qn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||S9}}let kf=null;function T9(t){return!kC(t)||t.length<2?t:OC(t)}function A9(){if(kf)return kf;const t=[];t.push(new Qn("bucket")),t.push(new Qn("generation")),t.push(new Qn("metageneration")),t.push(new Qn("name","fullPath",!0));function e(i,a){return T9(a)}const r=new Qn("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new Qn("size");return s.xform=n,t.push(s),t.push(new Qn("timeCreated")),t.push(new Qn("updated")),t.push(new Qn("md5Hash",null,!0)),t.push(new Qn("cacheControl",null,!0)),t.push(new Qn("contentDisposition",null,!0)),t.push(new Qn("contentEncoding",null,!0)),t.push(new Qn("contentLanguage",null,!0)),t.push(new Qn("contentType",null,!0)),t.push(new Qn("metadata","customMetadata",!0)),kf=t,kf}function w9(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Hn(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function C9(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return w9(n,t),n}function I9(t,e,r){const n=RC(e);return n===null?null:C9(t,n,r)}function k9(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="prefixes",D_="items";function D9(t,e,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[k_])for(const s of r[k_]){const i=s.replace(/\/$/,""),a=t._makeStorageReference(new Hn(e,i));n.prefixes.push(a)}if(r[D_])for(const s of r[D_]){const i=t._makeStorageReference(new Hn(e,s.name));n.items.push(i)}return n}function P9(t,e,r){const n=RC(r);return n===null?null:D9(t,e,n)}class sx{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){if(!t)throw ex()}function F9(t,e){function r(n,s){const i=I9(t,s,e);return NC(i!==null),i}return r}function R9(t,e){function r(n,s){const i=P9(t,e,s);return NC(i!==null),i}return r}function ax(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=W5():s=G5():r.getStatus()===402?s=H5(t.bucket):r.getStatus()===403?s=z5(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function O9(t){const e=ax(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=j5(t.path)),i.serverResponse=s.serverResponse,i}return r}function N9(t,e,r,n,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),s&&(i.maxResults=s);const a=e.bucketOnlyServerUrl(),o=rx(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new sx(o,l,R9(t,e.bucket),c);return u.urlParams=i,u.errorHandler=ax(e),u}function M9(t,e){const r=e.fullServerUrl(),n=rx(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new sx(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=O9(e),o}function L9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function B9(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=L9(null,e)),n}function U9(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let y="";for(let C=0;C<2;C++)y=y+Math.random().toString().slice(2);return y}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=B9(e,n,s),u=k9(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=qa.getBlob(d,n,f);if(p===null)throw J5();const m={name:c.fullPath},g=rx(i,t.host,t._protocol),v="POST",E=t.maxUploadRetryTime,x=new sx(g,v,F9(t,r),E);return x.urlParams=m,x.headers=a,x.body=p.uploadData(),x.errorHandler=ax(e),x}class V9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw qc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $9 extends V9{initXhr(){this.xhr_.responseType="text"}}function ix(){return new $9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,r){this._service=e,r instanceof Hn?this._location=r:this._location=Hn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ko(e,r)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OC(this._location.path)}get storage(){return this._service}get parent(){const e=_9(this._location.path);if(e===null)return null;const r=new Hn(this._location.bucket,e);return new Ko(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw IC(e)}}function MC(t,e,r){t._throwIfRoot("uploadBytes");const n=U9(t.storage,t._location,A9(),new qa(e,!0),r);return t.storage.makeRequestWithTokens(n,ix).then(s=>({metadata:s,ref:t}))}function j9(t,e,r=Rs.RAW,n){t._throwIfRoot("uploadString");const s=nx(r,e),i=Object.assign({},n);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),MC(t,s.data,i)}function H9(t){const e={prefixes:[],items:[]};return LC(t,e).then(()=>e)}async function LC(t,e,r){const s=await G9(t,{pageToken:r});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await LC(t,e,s.nextPageToken)}function G9(t,e){e!=null&&typeof e.maxResults=="number"&&nv("options.maxResults",1,1e3,e.maxResults);const r=e||{},n=N9(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(n,ix)}function W9(t){t._throwIfRoot("deleteObject");const e=M9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ix)}function z9(t,e){const r=b9(t._location.path,e),n=new Hn(t._location.bucket,r);return new Ko(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){return/^[A-Za-z]+:\/\//.test(t)}function q9(t,e){return new Ko(t,e)}function BC(t,e){if(t instanceof ox){const r=t;if(r._bucket==null)throw Q5();const n=new Ko(r,r._bucket);return e!=null?BC(n,e):n}else return e!==void 0?z9(t,e):t}function X9(t,e){if(e&&K9(e)){if(t instanceof ox)return q9(t,e);throw X0("To use ref(service, url), the first argument must be a Storage instance.")}else return BC(t,e)}function P_(t,e){const r=e==null?void 0:e[wC];return r==null?null:Hn.makeFromBucketSpec(r,t)}function Y9(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:yA(s,t.app.options.projectId))}class ox{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=AC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V5,this._maxUploadRetryTime=$5,this._requests=new Set,s!=null?this._bucket=Hn.makeFromBucketSpec(s,this._host):this._bucket=P_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=P_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ko(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new e9(CC());{const a=f9(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const F_="@firebase/storage",R_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="storage";function Q9(t,e,r){return t=ir(t),MC(t,e,r)}function VC(t,e,r,n){return t=ir(t),j9(t,e,r,n)}function J9(t){return t=ir(t),H9(t)}function sv(t){return t=ir(t),W9(t)}function $C(t,e){return t=ir(t),X9(t,e)}function jC(t=Fd(),e){t=ir(t);const n=Pd(t,UC).getImmediate({identifier:e}),s=Zv("storage");return s&&HC(n,...s),n}function HC(t,e,r,n={}){Y9(t,e,r,n)}function Z9(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ox(r,n,s,e,el)}function eM(){to(new ui(UC,Z9,"PUBLIC").setMultipleInstances(!0)),Ms(F_,R_,""),Ms(F_,R_,"esm2017")}eM();const tM=Object.freeze(Object.defineProperty({__proto__:null,StorageError:Ur,get StorageErrorCode(){return Lr},StringFormat:Rs,_FbsBlob:qa,_Location:Hn,_dataFromString:nx,_invalidArgument:X0,_invalidRootOperation:IC,connectStorageEmulator:HC,deleteObject:sv,getStorage:jC,listAll:J9,ref:$C,uploadBytes:Q9,uploadString:VC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="type.googleapis.com/google.protobuf.Int64Value",nM="type.googleapis.com/google.protobuf.UInt64Value";function GC(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function av(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>av(e));if(typeof t=="function"||typeof t=="object")return GC(t,e=>av(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Y0(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case rM:case nM:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Y0(e)):typeof t=="function"||typeof t=="object"?GC(t,e=>Y0(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zl extends ua{constructor(e,r,n){super(`${lx}/${e}`,r||""),this.details=n}}function sM(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function aM(t,e){let r=sM(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!O_[a])return new Zl("internal","internal");r=O_[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=Y0(s))}}catch{}return r==="ok"?null:new Zl(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="us-central1";function oM(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Zl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class lM{constructor(e,r,n,s,i=iv,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new iM(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=iv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function cM(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function uM(t,e,r){return n=>fM(t,e,n,r||{})}async function dM(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function fM(t,e,r,n){const s=t._url(e);return hM(t,s,r,n)}async function hM(t,e,r,n){r=av(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=oM(o),c=await Promise.race([dM(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Zl("cancelled","Firebase Functions instance was deleted.");const u=aM(c.status,c.json);if(u)throw u;if(!c.json)throw new Zl("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Zl("internal","Response is missing data field.");return{data:Y0(d)}}const N_="@firebase/functions",M_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="auth-internal",mM="app-check-internal",gM="messaging-internal";function vM(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(pM),o=n.getProvider(gM),l=n.getProvider(mM);return new lM(i,a,o,l,s,t)};to(new ui(lx,r,"PUBLIC").setMultipleInstances(!0)),Ms(N_,M_,e),Ms(N_,M_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t=Fd(),e=iv){const n=Pd(ir(t),lx).getImmediate({identifier:e}),s=Zv("functions");return s&&WC(n,...s),n}function WC(t,e,r){cM(ir(t),e,r)}function ba(t,e,r){return uM(ir(t),e,r)}vM(fetch.bind(self));const m0e=Object.freeze(Object.defineProperty({__proto__:null,connectFunctionsEmulator:WC,getFunctions:ec,httpsCallable:ba},Symbol.toStringTag,{value:"Module"})),zC={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"},dp=bA(zC),nr=cc(dp),Ye=lo(dp),Q0=jC(dp),KC=ec(dp),qC=new _a;console.log("🔥 Connected to Firebase project:",zC.projectId);const XC=Object.freeze(Object.defineProperty({__proto__:null,auth:nr,db:Ye,functions:KC,googleProvider:qC,storage:Q0},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Rl=typeof document<"u";function YC(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function xM(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&YC(t.default)}const ar=Object.assign;function tm(t,e){const r={};for(const n in e){const s=e[n];r[n]=ca(s)?s.map(t):t(s)}return r}const Pu=()=>{},ca=Array.isArray,QC=/#/g,yM=/&/g,EM=/\//g,_M=/=/g,bM=/\?/g,JC=/\+/g,SM=/%5B/g,TM=/%5D/g,ZC=/%5E/g,AM=/%60/g,eI=/%7B/g,wM=/%7C/g,tI=/%7D/g,CM=/%20/g;function cx(t){return encodeURI(""+t).replace(wM,"|").replace(SM,"[").replace(TM,"]")}function IM(t){return cx(t).replace(eI,"{").replace(tI,"}").replace(ZC,"^")}function ov(t){return cx(t).replace(JC,"%2B").replace(CM,"+").replace(QC,"%23").replace(yM,"%26").replace(AM,"`").replace(eI,"{").replace(tI,"}").replace(ZC,"^")}function kM(t){return ov(t).replace(_M,"%3D")}function DM(t){return cx(t).replace(QC,"%23").replace(bM,"%3F")}function PM(t){return t==null?"":DM(t).replace(EM,"%2F")}function ud(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const FM=/\/$/,RM=t=>t.replace(FM,"");function rm(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=LM(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:ud(a)}}function OM(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function L_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function NM(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&vc(e.matched[n],r.matched[s])&&rI(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function vc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!MM(t[r],e[r]))return!1;return!0}function MM(t,e){return ca(t)?B_(t,e):ca(e)?B_(e,t):t===e}function B_(t,e){return ca(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function LM(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const wi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var dd;(function(t){t.pop="pop",t.push="push"})(dd||(dd={}));var Fu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Fu||(Fu={}));function BM(t){if(!t)if(Rl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),RM(t)}const UM=/^[^#]+#/;function VM(t,e){return t.replace(UM,"#")+e}function $M(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const fp=()=>({left:window.scrollX,top:window.scrollY});function jM(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=$M(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function U_(t,e){return(history.state?history.state.position-e:-1)+t}const lv=new Map;function HM(t,e){lv.set(t,e)}function GM(t){const e=lv.get(t);return lv.delete(t),e}let WM=()=>location.protocol+"//"+location.host;function nI(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),L_(l,"")}return L_(r,t)+n+s}function zM(t,e,r,n){let s=[],i=[],a=null;const o=({state:f})=>{const p=nI(t,location),m=r.value,g=e.value;let v=0;if(f){if(r.value=p,e.value=f,a&&a===m){a=null;return}v=g?f.position-g.position:0}else n(p);s.forEach(E=>{E(r.value,m,{delta:v,type:dd.pop,direction:v?v>0?Fu.forward:Fu.back:Fu.unknown})})};function l(){a=r.value}function c(f){s.push(f);const p=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return i.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(ar({},f.state,{scroll:fp()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function V_(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?fp():null}}function KM(t){const{history:e,location:r}=window,n={value:nI(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:WM()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(p){console.error(p),r[u?"replace":"assign"](f)}}function a(l,c){const u=ar({},e.state,V_(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=ar({},s.value,e.state,{forward:l,scroll:fp()});i(u.current,u,!0);const d=ar({},V_(n.value,l,null),{position:u.position+1},c);i(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function qM(t){t=BM(t);const e=KM(t),r=zM(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=ar({location:"",base:t,go:n,createHref:VM.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function XM(t){return typeof t=="string"||t&&typeof t=="object"}function sI(t){return typeof t=="string"||typeof t=="symbol"}const aI=Symbol("");var $_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($_||($_={}));function xc(t,e){return ar(new Error,{type:t,[aI]:!0},e)}function Ha(t,e){return t instanceof Error&&aI in t&&(e==null||!!(t.type&e))}const j_="[^/]+?",YM={sensitive:!1,strict:!1,start:!0,end:!0},QM=/[.+*?^${}()[\]/\\]/g;function JM(t,e){const r=ar({},YM,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=40+(r.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(QM,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:g,optional:v,regexp:E}=f;i.push({name:m,repeatable:g,optional:v});const x=E||j_;if(x!==j_){p+=10;try{new RegExp(`(${x})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+C.message)}}let y=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(y=v&&c.length<2?`(?:/${y})`:"/"+y),v&&(y+="?"),s+=y,p+=20,v&&(p+=-8),g&&(p+=-20),x===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=i[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:v}=p,E=m in c?c[m]:"";if(ca(E)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=ca(E)?E.join("/"):E;if(!x)if(v)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=x}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function ZM(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function iI(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=ZM(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(H_(n))return 1;if(H_(s))return-1}return s.length-n.length}function H_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const eL={type:0,value:""},tL=/[a-zA-Z0-9_]/;function rL(t){if(!t)return[[]];if(t==="/")return[[eL]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function d(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:tL.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),s}function nL(t,e,r){const n=JM(rL(t.path),r),s=ar(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function sL(t,e){const r=[],n=new Map;e=K_({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,f,p){const m=!p,g=W_(d);g.aliasOf=p&&p.record;const v=K_(e,d),E=[g];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const P of C)E.push(W_(ar({},g,{components:p?p.record.components:g.components,path:P,aliasOf:p?p.record:g})))}let x,y;for(const C of E){const{path:P}=C;if(f&&P[0]!=="/"){const k=f.record.path,w=k[k.length-1]==="/"?"":"/";C.path=f.record.path+(P&&w+P)}if(x=nL(C,f,v),p?p.alias.push(x):(y=y||x,y!==x&&y.alias.push(x),m&&d.name&&!z_(x)&&a(d.name)),oI(x)&&l(x),g.children){const k=g.children;for(let w=0;w<k.length;w++)i(k[w],x,p&&p.children[w])}p=p||x}return y?()=>{a(y)}:Pu}function a(d){if(sI(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return r}function l(d){const f=oL(d,r);r.splice(f,0,d),d.record.name&&!z_(d)&&n.set(d.record.name,d)}function c(d,f){let p,m={},g,v;if("name"in d&&d.name){if(p=n.get(d.name),!p)throw xc(1,{location:d});v=p.record.name,m=ar(G_(f.params,p.keys.filter(y=>!y.optional).concat(p.parent?p.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),d.params&&G_(d.params,p.keys.map(y=>y.name))),g=p.stringify(m)}else if(d.path!=null)g=d.path,p=r.find(y=>y.re.test(g)),p&&(m=p.parse(g),v=p.record.name);else{if(p=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!p)throw xc(1,{location:d,currentLocation:f});v=p.record.name,m=ar({},f.params,d.params),g=p.stringify(m)}const E=[];let x=p;for(;x;)E.unshift(x.record),x=x.parent;return{name:v,path:g,params:m,matched:E,meta:iL(E)}}t.forEach(d=>i(d));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function G_(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function W_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:aL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function aL(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function z_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function iL(t){return t.reduce((e,r)=>ar(e,r.meta),{})}function K_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function oL(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;iI(t,e[i])<0?n=i:r=i+1}const s=lL(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function lL(t){let e=t;for(;e=e.parent;)if(oI(e)&&iI(t,e)===0)return e}function oI({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function cL(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(JC," "),a=i.indexOf("="),o=ud(a<0?i:i.slice(0,a)),l=a<0?null:ud(i.slice(a+1));if(o in e){let c=e[o];ca(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function q_(t){let e="";for(let r in t){const n=t[r];if(r=kM(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(ca(n)?n.map(i=>i&&ov(i)):[n&&ov(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function uL(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=ca(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const dL=Symbol(""),X_=Symbol(""),hp=Symbol(""),ux=Symbol(""),cv=Symbol("");function Xc(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Ni(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=f=>{f===!1?l(xc(4,{from:r,to:e})):f instanceof Error?l(f):XM(f)?l(xc(2,{from:e,to:f})):(a&&n.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function nm(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(YC(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ni(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=xM(u)?u.default:u;a.mods[o]=u,a.components[o]=d;const p=(d.__vccOpts||d)[e];return p&&Ni(p,r,n,a,o,s)()}))}}return i}function Y_(t){const e=As(hp),r=As(ux),n=be(()=>{const l=oe(t.to);return e.resolve(l)}),s=be(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const f=d.findIndex(vc.bind(null,u));if(f>-1)return f;const p=Q_(l[c-2]);return c>1&&Q_(u)===p&&d[d.length-1].path!==p?d.findIndex(vc.bind(null,l[c-2])):f}),i=be(()=>s.value>-1&&gL(r.params,n.value.params)),a=be(()=>s.value>-1&&s.value===r.matched.length-1&&rI(r.params,n.value.params));function o(l={}){if(mL(l)){const c=e[oe(t.replace)?"replace":"push"](oe(t.to)).catch(Pu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:be(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function fL(t){return t.length===1?t[0]:t}const hL=Ad({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Y_,setup(t,{slots:e}){const r=Cs(Y_(t)),{options:n}=As(hp),s=be(()=>({[J_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[J_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&fL(e.default(r));return t.custom?i:Nh("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),pL=hL;function mL(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function gL(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!ca(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function Q_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const J_=(t,e,r)=>t??e??r,vL=Ad({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=As(cv),s=be(()=>t.route||n.value),i=As(X_,0),a=be(()=>{let c=oe(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=be(()=>s.value.matched[a.value]);_u(X_,be(()=>a.value+1)),_u(dL,o),_u(cv,s);const l=ue();return Ut(()=>[l.value,o.value,t.name],([c,u,d],[f,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!vc(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=o.value,f=d&&d.components[u];if(!f)return Z_(r.default,{Component:f,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=Nh(f,ar({},m,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Z_(r.default,{Component:v,route:c})||v}}});function Z_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const xL=vL;function yL(t){const e=sL(t.routes,t),r=t.parseQuery||cL,n=t.stringifyQuery||q_,s=t.history,i=Xc(),a=Xc(),o=Xc(),l=Bv(wi);let c=wi;Rl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=tm.bind(null,le=>""+le),d=tm.bind(null,PM),f=tm.bind(null,ud);function p(le,he){let Z,Q;return sI(le)?(Z=e.getRecordMatcher(le),Q=he):Q=le,e.addRoute(Q,Z)}function m(le){const he=e.getRecordMatcher(le);he&&e.removeRoute(he)}function g(){return e.getRoutes().map(le=>le.record)}function v(le){return!!e.getRecordMatcher(le)}function E(le,he){if(he=ar({},he||l.value),typeof le=="string"){const Y=rm(r,le,he.path),ge=e.resolve({path:Y.path},he),re=s.createHref(Y.fullPath);return ar(Y,ge,{params:f(ge.params),hash:ud(Y.hash),redirectedFrom:void 0,href:re})}let Z;if(le.path!=null)Z=ar({},le,{path:rm(r,le.path,he.path).path});else{const Y=ar({},le.params);for(const ge in Y)Y[ge]==null&&delete Y[ge];Z=ar({},le,{params:d(Y)}),he.params=d(he.params)}const Q=e.resolve(Z,he),ve=le.hash||"";Q.params=u(f(Q.params));const X=OM(n,ar({},le,{hash:IM(ve),path:Q.path})),q=s.createHref(X);return ar({fullPath:X,hash:ve,query:n===q_?uL(le.query):le.query||{}},Q,{redirectedFrom:void 0,href:q})}function x(le){return typeof le=="string"?rm(r,le,l.value.path):ar({},le)}function y(le,he){if(c!==le)return xc(8,{from:he,to:le})}function C(le){return w(le)}function P(le){return C(ar(x(le),{replace:!0}))}function k(le){const he=le.matched[le.matched.length-1];if(he&&he.redirect){const{redirect:Z}=he;let Q=typeof Z=="function"?Z(le):Z;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=x(Q):{path:Q},Q.params={}),ar({query:le.query,hash:le.hash,params:Q.path!=null?{}:le.params},Q)}}function w(le,he){const Z=c=E(le),Q=l.value,ve=le.state,X=le.force,q=le.replace===!0,Y=k(Z);if(Y)return w(ar(x(Y),{state:typeof Y=="object"?ar({},ve,Y.state):ve,force:X,replace:q}),he||Z);const ge=Z;ge.redirectedFrom=he;let re;return!X&&NM(n,Q,Z)&&(re=xc(16,{to:ge,from:Q}),H(Q,Q,!0,!1)),(re?Promise.resolve(re):b(ge,Q)).catch(ne=>Ha(ne)?Ha(ne,2)?ne:z(ne):V(ne,ge,Q)).then(ne=>{if(ne){if(Ha(ne,2))return w(ar({replace:q},x(ne.to),{state:typeof ne.to=="object"?ar({},ve,ne.to.state):ve,force:X}),he||ge)}else ne=I(ge,Q,!0,q,ve);return T(ge,Q,ne),ne})}function S(le,he){const Z=y(le,he);return Z?Promise.reject(Z):Promise.resolve()}function _(le){const he=K.values().next().value;return he&&typeof he.runWithContext=="function"?he.runWithContext(le):le()}function b(le,he){let Z;const[Q,ve,X]=EL(le,he);Z=nm(Q.reverse(),"beforeRouteLeave",le,he);for(const Y of Q)Y.leaveGuards.forEach(ge=>{Z.push(Ni(ge,le,he))});const q=S.bind(null,le,he);return Z.push(q),me(Z).then(()=>{Z=[];for(const Y of i.list())Z.push(Ni(Y,le,he));return Z.push(q),me(Z)}).then(()=>{Z=nm(ve,"beforeRouteUpdate",le,he);for(const Y of ve)Y.updateGuards.forEach(ge=>{Z.push(Ni(ge,le,he))});return Z.push(q),me(Z)}).then(()=>{Z=[];for(const Y of X)if(Y.beforeEnter)if(ca(Y.beforeEnter))for(const ge of Y.beforeEnter)Z.push(Ni(ge,le,he));else Z.push(Ni(Y.beforeEnter,le,he));return Z.push(q),me(Z)}).then(()=>(le.matched.forEach(Y=>Y.enterCallbacks={}),Z=nm(X,"beforeRouteEnter",le,he,_),Z.push(q),me(Z))).then(()=>{Z=[];for(const Y of a.list())Z.push(Ni(Y,le,he));return Z.push(q),me(Z)}).catch(Y=>Ha(Y,8)?Y:Promise.reject(Y))}function T(le,he,Z){o.list().forEach(Q=>_(()=>Q(le,he,Z)))}function I(le,he,Z,Q,ve){const X=y(le,he);if(X)return X;const q=he===wi,Y=Rl?history.state:{};Z&&(Q||q?s.replace(le.fullPath,ar({scroll:q&&Y&&Y.scroll},ve)):s.push(le.fullPath,ve)),l.value=le,H(le,he,Z,q),z()}let D;function O(){D||(D=s.listen((le,he,Z)=>{if(!ee.listening)return;const Q=E(le),ve=k(Q);if(ve){w(ar(ve,{replace:!0,force:!0}),Q).catch(Pu);return}c=Q;const X=l.value;Rl&&HM(U_(X.fullPath,Z.delta),fp()),b(Q,X).catch(q=>Ha(q,12)?q:Ha(q,2)?(w(ar(x(q.to),{force:!0}),Q).then(Y=>{Ha(Y,20)&&!Z.delta&&Z.type===dd.pop&&s.go(-1,!1)}).catch(Pu),Promise.reject()):(Z.delta&&s.go(-Z.delta,!1),V(q,Q,X))).then(q=>{q=q||I(Q,X,!1),q&&(Z.delta&&!Ha(q,8)?s.go(-Z.delta,!1):Z.type===dd.pop&&Ha(q,20)&&s.go(-1,!1)),T(Q,X,q)}).catch(Pu)}))}let R=Xc(),F=Xc(),N;function V(le,he,Z){z(le);const Q=F.list();return Q.length?Q.forEach(ve=>ve(le,he,Z)):console.error(le),Promise.reject(le)}function L(){return N&&l.value!==wi?Promise.resolve():new Promise((le,he)=>{R.add([le,he])})}function z(le){return N||(N=!le,O(),R.list().forEach(([he,Z])=>le?Z(le):he()),R.reset()),le}function H(le,he,Z,Q){const{scrollBehavior:ve}=t;if(!Rl||!ve)return Promise.resolve();const X=!Z&&GM(U_(le.fullPath,0))||(Q||!Z)&&history.state&&history.state.scroll||null;return Zo().then(()=>ve(le,he,X)).then(q=>q&&jM(q)).catch(q=>V(q,le,he))}const B=le=>s.go(le);let W;const K=new Set,ee={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:g,resolve:E,options:t,push:C,replace:P,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:F.add,isReady:L,install(le){const he=this;le.component("RouterLink",pL),le.component("RouterView",xL),le.config.globalProperties.$router=he,Object.defineProperty(le.config.globalProperties,"$route",{enumerable:!0,get:()=>oe(l)}),Rl&&!W&&l.value===wi&&(W=!0,C(s.location).catch(ve=>{}));const Z={};for(const ve in wi)Object.defineProperty(Z,ve,{get:()=>l.value[ve],enumerable:!0});le.provide(hp,he),le.provide(ux,Mv(Z)),le.provide(cv,l);const Q=le.unmount;K.add(le),le.unmount=function(){K.delete(le),K.size<1&&(c=wi,D&&D(),D=null,l.value=wi,W=!1,N=!1),Q()}}};function me(le){return le.reduce((he,Z)=>he.then(()=>_(Z)),Promise.resolve())}return ee}function EL(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>vc(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>vc(c,l))||s.push(l))}return[r,n,s]}function vi(){return As(hp)}function _L(t){return As(ux)}const fa=fA("auth",()=>{const t=ue(null),e=ue(""),r=ue(!0),n=vi(),s=()=>{d1(nr,async c=>{if(r.value=!0,c)try{const u=await sr(at(Ye,"users",c.uid));u.exists()?(t.value={uid:c.uid,email:c.email,name:c.displayName,...u.data()},console.log("✅ User authenticated:",t.value)):(console.log("⚠️ User not found in Firestore"),t.value=null)}catch(u){console.error("❌ Error fetching user data:",u),t.value=null}else t.value=null,console.log("👤 No user authenticated");r.value=!1})},i=async()=>{e.value="";try{const c=new _a,d=(await tw(nr,c)).user,f=await sr(at(Ye,"users",d.uid));if(!f.exists()){e.value="⚠️ User not found in system.";return}t.value={uid:d.uid,email:d.email,name:d.displayName,...f.data()},n.push("/")}catch(c){console.error("❌ Login error:",c),e.value=c.message||"Authentication failed."}},a=async()=>{try{await f1(nr),t.value=null,n.push("/login")}catch(c){console.error("❌ Logout error:",c)}},o=c=>{t.value=c},l=be(()=>t.value);return s(),{currentUser:t,user:l,errorMsg:e,isLoading:r,loginWithGoogle:i,logout:a,setUser:o}}),bL=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:fa},Symbol.toStringTag,{value:"Module"})),pp=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],eb=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],Yc=["admin","administrator","administrator_504_CM","sped_chair"],nt={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",MANAGE_SUBJECTS:"manage_subjects",MANAGE_ROLES:"manage_roles",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All"},Bl={admin:[nt.VIEW_USERS,nt.EDIT_USER,nt.DELETE_USER,nt.MANAGE_SUBJECTS,nt.MANAGE_ROLES,nt.VIEW_STUDENTS,nt.EDIT_STUDENT_ALL,nt.TESTING_ALL],administrator:[nt.VIEW_USERS,nt.EDIT_USER,nt.DELETE_USER,nt.MANAGE_SUBJECTS,nt.MANAGE_ROLES,nt.VIEW_STUDENTS,nt.EDIT_STUDENT_ALL,nt.TESTING_ALL],administrator_504_CM:[nt.VIEW_USERS,nt.EDIT_USER,nt.DELETE_USER,nt.MANAGE_SUBJECTS,nt.MANAGE_ROLES,nt.VIEW_STUDENTS,nt.EDIT_STUDENT_ALL],sped_chair:[nt.VIEW_USERS,nt.VIEW_STUDENTS,nt.EDIT_STUDENT_ALL],case_manager:[nt.VIEW_USERS,nt.VIEW_STUDENTS,nt.EDIT_STUDENT_CM,nt.TESTING_PARTIAL],teacher:[nt.VIEW_USERS,nt.VIEW_STUDENTS,nt.TESTING_PARTIAL],service_provider:[nt.VIEW_USERS,nt.VIEW_STUDENTS,nt.TESTING_PARTIAL],paraeducator:[nt.VIEW_USERS,nt.VIEW_STUDENTS]};function tb(t){return pp.includes(t)}const dx=fA("permission",()=>{const t=fa(),e=ue([]),r=ue({}),n=ue({}),s=ue(!1),i=async()=>{try{const d=at(Ye,"config/permissions_matrix"),f=await sr(d);f.exists()?(n.value=f.data(),console.log("Loaded permissions matrix from database:",n.value)):(n.value=Bl,console.log("Using default permissions matrix:",n.value)),s.value=!0,e.value.length>0&&(r.value=l(e.value))}catch(d){console.error("Error loading permissions matrix:",d),n.value=Bl,s.value=!0}};let a=null;const o=()=>{a&&a();const d=at(Ye,"config/permissions_matrix");a=Qi(d,f=>{console.log("Permissions matrix updated:",f.exists(),f.data()),f.exists()?n.value=f.data():n.value=Bl,s.value=!0,e.value.length>0&&(r.value=l(e.value),console.log("User permissions recalculated:",r.value))},f=>{console.error("Error watching permissions matrix:",f),n.value=Bl,s.value=!0})};function l(d){const f={};return console.log("Deriving permissions for roles:",d),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),d.forEach(p=>{const m=n.value[p]||[];console.log(`Role ${p} has permissions:`,m),m.forEach(g=>f[g]=!0)}),console.log("Final derived permissions:",f),f}let c=null;return Ut(()=>{var d;return(d=t.currentUser)==null?void 0:d.uid},()=>{var d;if(c&&c(),(d=t.currentUser)!=null&&d.uid){const f=at(Ye,"users",t.currentUser.uid);c=Qi(f,p=>{const m=p.data()||{};e.value=m.role?[m.role]:[],console.log("User roles updated:",e.value),t.currentUser&&(t.currentUser.value={...t.currentUser.value,...m},console.log("🔄 Updated auth store user data:",t.currentUser.value)),s.value&&(r.value=l(e.value))})}else e.value=[],r.value={}},{immediate:!0}),o(),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:d=>e.value.includes(d),can:d=>r.value[d]===!0,loadPermissionsMatrix:i}});function SL(){const t=dx(),e=be(()=>t.hasRole("admin")),r=be(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const yt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},TL={name:"UserRoleSwitcher",setup(){const t=fa();SL();const e=ue(!1),r=ue(""),n=ue({}),s=ue(!1),i=be(()=>t.user),a=[{value:"admin",label:"Admin"},{value:"administrator",label:"Administrator"},{value:"administrator_504_CM",label:"Administrator 504/CM"},{value:"sped_chair",label:"SPED Chair"},{value:"case_manager",label:"Case Manager"},{value:"paraeducator",label:"Paraeducator"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"}],o=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-administrator",name:"Test Administrator",email:"administrator@test.com",role:"administrator"},{uid:"test-administrator-504-cm",name:"Test Admin 504/CM",email:"admin504@test.com",role:"administrator_504_CM"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],l=async()=>{s.value=!0;try{const E=at(Ye,"config","permissions_matrix"),x=await sr(E);x.exists()?n.value=x.data():(console.warn("Permissions matrix not found in database"),n.value={})}catch(E){console.error("Error loading permissions matrix:",E),n.value={}}finally{s.value=!1}},c=be(()=>{var C;const E=[{action:nt.VIEW_USERS,label:"View Users"},{action:nt.EDIT_USER,label:"Edit User"},{action:nt.DELETE_USER,label:"Delete User"},{action:nt.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:nt.MANAGE_ROLES,label:"Manage Roles"},{action:nt.VIEW_STUDENTS,label:"View Students"},{action:nt.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:nt.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:nt.TESTING,label:"Testing"}],x=(C=i.value)==null?void 0:C.role,y=n.value[x]||[];return E.map(P=>({...P,granted:y.includes(P.action)}))}),u=()=>{e.value=!e.value},d=()=>{if(!r.value)return;const E={uid:`test-${r.value}-${Date.now()}`,email:`${r.value}@test.com`,name:`Test ${r.value.charAt(0).toUpperCase()+r.value.slice(1)}`,role:r.value,lastSyncTrigger:new Date().toISOString()};t.setUser(E),localStorage.setItem("debug-user",JSON.stringify(E)),r.value=""},f=E=>{t.setUser(E),localStorage.setItem("debug-user",JSON.stringify(E))},p=()=>{localStorage.removeItem("debug-user"),window.location.reload()},m=()=>{window.location.reload()};return jt(async()=>{await l();const E=localStorage.getItem("debug-user");if(E)try{const x=JSON.parse(E);t.setUser(x)}catch(x){console.error("Error parsing debug user:",x),localStorage.removeItem("debug-user")}return()=>{}}),{canSwitchRoles:be(()=>{var x;const E=(x=i.value)==null?void 0:x.role;return["admin","administrator"].includes(E)}),hideRoleSwitcher:()=>{console.log("Role switcher hidden")},isExpanded:e,selectedRole:r,currentUser:i,availableRoles:a,testUsers:o,currentPermissions:c,loadingPermissions:s,toggleExpanded:u,switchRole:d,switchToUser:f,resetToRealUser:p,refreshPage:m}}},AL=["title"],wL={key:0,class:"debug-label"},CL={key:0,class:"switcher-content"},IL={class:"current-user-info"},kL={class:"role-selector"},DL=["value"],PL={class:"test-users"},FL={class:"test-user-buttons"},RL=["onClick"],OL={class:"permission-info"},NL={key:0,class:"loading-permissions"},ML={key:1,class:"permission-list"},LL={class:"permission-icon"},BL={class:"actions"};function UL(t,e,r,n,s,i){var a,o,l,c,u;return n.canSwitchRoles?(U(),j("div",{key:0,class:et(["user-role-switcher",{collapsed:!n.isExpanded}])},[h("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...d)=>n.toggleExpanded&&n.toggleExpanded(...d)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[6]||(e[6]=h("span",{class:"debug-icon"},"🔧",-1)),n.isExpanded?(U(),j("span",wL,"Debug Role Switcher")):Ae("",!0),e[7]||(e[7]=h("span",{class:"beta-label"},"BETA",-1)),h("button",{onClick:e[0]||(e[0]=fn((...d)=>n.hideRoleSwitcher&&n.hideRoleSwitcher(...d),["stop"])),class:"close-debug-btn",title:"Close Role Switcher"},"×")],8,AL),n.isExpanded?(U(),j("div",CL,[e[18]||(e[18]=h("div",{class:"beta-warning"},[h("strong",null,"⚠️ BETA WARNING:"),Ne(" This debug tool is not working correctly and should be used with caution. It may not properly switch roles or could cause unexpected behavior. ")],-1)),h("div",IL,[e[8]||(e[8]=h("strong",null,"Current User:",-1)),Ne(" "+te(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[9]||(e[9]=h("br",null,null,-1)),e[10]||(e[10]=h("strong",null,"Role:",-1)),e[11]||(e[11]=Ne()),h("span",{class:et("role-"+((l=n.currentUser)==null?void 0:l.role))},te(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[12]||(e[12]=h("br",null,null,-1)),e[13]||(e[13]=h("strong",null,"UID:",-1)),Ne(" "+te(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),h("div",kL,[e[15]||(e[15]=h("label",{for:"role-select"},"Switch to Role:",-1)),Ve(h("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=d=>n.selectedRole=d),onChange:e[3]||(e[3]=(...d)=>n.switchRole&&n.switchRole(...d))},[e[14]||(e[14]=h("option",{value:""},"-- Select Role --",-1)),(U(!0),j(Fe,null,je(n.availableRoles,d=>(U(),j("option",{key:d.value,value:d.value},te(d.label),9,DL))),128))],544),[[vr,n.selectedRole]])]),h("div",PL,[e[16]||(e[16]=h("h5",null,"Quick Test Users:",-1)),h("div",FL,[(U(!0),j(Fe,null,je(n.testUsers,d=>{var f;return U(),j("button",{key:d.uid,onClick:p=>n.switchToUser(d),class:et(["test-user-btn",{active:((f=n.currentUser)==null?void 0:f.uid)===d.uid}])},[Ne(te(d.name)+" ",1),h("small",null,"("+te(d.role)+")",1)],10,RL)}),128))])]),h("div",OL,[e[17]||(e[17]=h("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(U(),j("div",NL," Loading permissions... ")):(U(),j("div",ML,[(U(!0),j(Fe,null,je(n.currentPermissions,d=>(U(),j("div",{key:d.action,class:et(["permission-item",{granted:d.granted}])},[h("span",LL,te(d.granted?"✅":"❌"),1),Ne(" "+te(d.label),1)],2))),128))]))]),e[19]||(e[19]=Sn('<div class="testing-scenarios" data-v-bae46714><h5 data-v-bae46714>🧪 Testing Scenarios:</h5><div class="scenario-list" data-v-bae46714><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Students Page:</strong><ul data-v-bae46714><li data-v-bae46714>✅ Can view students</li><li data-v-bae46714>✅ Can edit own caseload (CM)</li><li data-v-bae46714>✅ Can edit all students (Admin)</li><li data-v-bae46714>✅ Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Admin Panel:</strong><ul data-v-bae46714><li data-v-bae46714>✅ Users management</li><li data-v-bae46714>✅ Permissions matrix</li><li data-v-bae46714>✅ Aide assignments</li><li data-v-bae46714>✅ App settings</li></ul></div><div class="scenario-item" data-v-bae46714><strong data-v-bae46714>Navigation:</strong><ul data-v-bae46714><li data-v-bae46714>✅ Admin button visibility</li><li data-v-bae46714>✅ My Schedule button (Para)</li><li data-v-bae46714>✅ Role-based menu items</li></ul></div></div></div>',1)),h("div",BL,[h("button",{onClick:e[4]||(e[4]=(...d)=>n.resetToRealUser&&n.resetToRealUser(...d)),class:"reset-btn"}," 🔄 Reset to Real User "),h("button",{onClick:e[5]||(e[5]=(...d)=>n.refreshPage&&n.refreshPage(...d)),class:"refresh-btn"}," 🔄 Refresh Page ")])])):Ae("",!0)],2)):Ae("",!0)}const VL=yt(TL,[["render",UL],["__scopeId","data-v-bae46714"]]),$L={key:0,class:"debug-access-info"},jL={__name:"DebugAccessInfo",setup(t){const e=fa(),r=ue(!1),n=be(()=>e.currentUser),s=be(()=>{var o;const a=(o=n.value)==null?void 0:o.role;return["admin","administrator"].includes(a)}),i=()=>{r.value=!1,localStorage.setItem("debug-info-hidden","true")};return jt(()=>{const a=localStorage.getItem("debug-info-hidden");s.value&&!a&&setTimeout(()=>{r.value=!0},3e3)}),(a,o)=>r.value?(U(),j("div",$L,[h("div",{class:"debug-info-content"},[o[0]||(o[0]=h("span",{class:"debug-info-icon"},"🔧",-1)),o[1]||(o[1]=h("span",{class:"debug-info-text"},[Ne("Debug tools available - Press "),h("kbd",null,"Ctrl+Shift+D")],-1)),h("button",{onClick:i,class:"debug-info-close"},"×")])])):Ae("",!0)}},HL=yt(jL,[["__scopeId","data-v-358a31dd"]]);class GL{constructor(){this.timeoutId=null,this.warningTimeoutId=null,this.isEnabled=ue(!1),this.timeoutMinutes=ue(30),this.showWarning=ue(!1),this.warningCountdown=ue(0),this.lastActivity=Date.now(),this.router=null,this.unsubscribeSettings=null,this.activityEvents=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],this.init()}init(){this.loadSettings(),this.setupActivityListeners(),this.setupAuthWatcher()}setupAuthWatcher(){d1(nr,e=>{e?setTimeout(()=>{this.resetTimeout()},1e3):(this.clearTimeouts(),this.hideWarning())})}async loadSettings(){try{const e=at(Ye,"app_settings","security");this.unsubscribeSettings=Qi(e,r=>{if(r.exists()){const n=r.data(),s=this.isEnabled.value;this.isEnabled.value=n.sessionTimeoutEnabled||!1,this.timeoutMinutes.value=n.sessionTimeoutMinutes||30,nr.currentUser&&this.resetTimeout()}else this.isEnabled.value=!1,this.timeoutMinutes.value=30})}catch(e){console.error("Failed to load session timeout settings:",e)}}async updateSettings(e,r){var n;try{const s=at(Ye,"app_settings","security");await tr(s,{sessionTimeoutEnabled:e,sessionTimeoutMinutes:r,updatedAt:new Date().toISOString(),updatedBy:(n=nr.currentUser)==null?void 0:n.uid},{merge:!0})}catch(s){console.error("Failed to update session timeout settings:",s)}}setupActivityListeners(){this.activityEvents.forEach(e=>{document.addEventListener(e,this.handleActivity.bind(this),!0)})}handleActivity(){this.isEnabled.value&&(this.lastActivity=Date.now(),this.hideWarning(),this.resetTimeout())}resetTimeout(){if(!this.isEnabled.value||!nr.currentUser)return;this.clearTimeouts();const e=Math.round(this.timeoutMinutes.value*60*1e3),r=Math.max(0,e-2*60*1e3);r>0&&r<e&&(this.warningTimeoutId=setTimeout(()=>{this.showSessionWarning()},r)),this.timeoutId=setTimeout(()=>{this.handleSessionTimeout()},e)}showSessionWarning(){this.showWarning.value=!0,this.warningCountdown.value=120;const e=setInterval(()=>{this.warningCountdown.value--,this.warningCountdown.value<=0&&(clearInterval(e),this.handleSessionTimeout())},1e3);this.countdownInterval=e}hideWarning(){this.showWarning.value=!1,this.warningCountdown.value=0,this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}async handleSessionTimeout(){try{if(nr.currentUser){const e=at(Ye,"auditLogs",`timeout_${Date.now()}_${nr.currentUser.uid}`);await tr(e,{type:"session_timeout",userId:nr.currentUser.uid,userEmail:nr.currentUser.email,timeoutMinutes:this.timeoutMinutes.value,lastActivity:new Date(this.lastActivity),timestamp:new Date,userAgent:navigator.userAgent})}this.clearTimeouts(),this.hideWarning(),await f1(nr),alert(`Your session has expired after ${this.timeoutMinutes.value} minutes of inactivity. Please log in again.`),this.router?this.router.push("/login"):window.location.href="/login"}catch(e){console.error("Error during session timeout:",e)}}extendSession(){this.hideWarning(),this.resetTimeout()}clearTimeouts(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.warningTimeoutId&&(clearTimeout(this.warningTimeoutId),this.warningTimeoutId=null)}setRouter(e){this.router=e}destroy(){this.clearTimeouts(),this.hideWarning(),this.activityEvents.forEach(e=>{document.removeEventListener(e,this.handleActivity.bind(this),!0)}),this.unsubscribeSettings&&this.unsubscribeSettings()}}const Hs=new GL;function fx(){const t=vi();return Hs.setRouter(t),{isEnabled:Hs.isEnabled,timeoutMinutes:Hs.timeoutMinutes,showWarning:Hs.showWarning,warningCountdown:Hs.warningCountdown,updateSettings:Hs.updateSettings.bind(Hs),extendSession:Hs.extendSession.bind(Hs),resetTimeout:Hs.resetTimeout.bind(Hs)}}const WL={key:0,class:"session-timeout-overlay"},zL={class:"session-timeout-dialog"},KL={class:"dialog-content"},qL={class:"countdown"},XL={class:"countdown-time"},YL={class:"dialog-actions"},QL={__name:"SessionTimeoutDialog",setup(t){const e=vi(),{showWarning:r,warningCountdown:n,extendSession:s}=fx(),i=o=>{const l=Math.floor(o/60),c=o%60;return`${l}:${c.toString().padStart(2,"0")}`},a=async()=>{try{await f1(nr),e.push("/login")}catch(o){console.error("Error signing out:",o)}};return(o,l)=>oe(r)?(U(),j("div",WL,[h("div",zL,[l[3]||(l[3]=h("div",{class:"dialog-header"},[h("h3",null,"⏰ Session Timeout Warning")],-1)),h("div",KL,[l[1]||(l[1]=h("p",null,"Your session will expire in:",-1)),h("div",qL,[h("span",XL,te(i(oe(n))),1)]),l[2]||(l[2]=h("p",null,"You will be automatically logged out for security purposes.",-1))]),h("div",YL,[h("button",{onClick:l[0]||(l[0]=(...c)=>oe(s)&&oe(s)(...c)),class:"btn btn-primary"}," Stay Logged In "),h("button",{onClick:a,class:"btn btn-secondary"}," Logout Now ")])])])):Ae("",!0)}},JL=yt(QL,[["__scopeId","data-v-db34d9f2"]]),ZL={id:"app"},eB={id:"main-content"},tB={__name:"App",setup(t){const e=ue(!1),r=n=>{n.ctrlKey&&n.shiftKey&&n.key==="D"&&(n.preventDefault(),e.value=!e.value,console.log("Debug Role Switcher:",e.value?"Shown":"Hidden"))};return jt(()=>{document.addEventListener("keydown",r)}),Ra(()=>{document.removeEventListener("keydown",r)}),(n,s)=>{const i=Ir("router-view");return U(),j("div",ZL,[h("div",eB,[st(i)]),e.value?(U(),Xr(VL,{key:0})):Ae("",!0),st(HL),st(JL)])}}},rB="modulepreload",nB=function(t){return"/"+t},rb={},Oo=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=nB(l),l in rb)return;rb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":rB,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function cn(t,e=255){return typeof t!="string"?"":t.trim().replace(/\0/g,"").replace(/[<>'"&]/g,"").substring(0,e)}function sB(t){return typeof t!="string"?"":t.trim().toLowerCase().substring(0,255)}function nb(t,e=0,r=999999){const n=parseFloat(t);return isNaN(n)?0:Math.max(e,Math.min(r,n))}function l0(t,e){return!t||typeof t=="string"&&t.trim()===""?{isValid:!1,error:`${e} is required`}:{isValid:!0}}function aB(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"Invalid email format"}}function fd(t,e,r=0,n=255){return typeof t!="string"?{isValid:!1,error:`${e} must be a string`}:t.length<r?{isValid:!1,error:`${e} must be at least ${r} characters`}:t.length>n?{isValid:!1,error:`${e} must be no more than ${n} characters`}:{isValid:!0}}function iB(t){return["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"].includes(t)?{isValid:!0}:{isValid:!1,error:"Invalid role"}}function oB(t,e=[],r=10*1024*1024){return t?e.length>0&&!e.includes(t.type)?{isValid:!1,error:`Invalid file type. Allowed: ${e.join(", ")}`}:t.size>r?{isValid:!1,error:`File too large. Maximum size: ${r/(1024*1024)}MB`}:[/\.exe$/i,/\.bat$/i,/\.cmd$/i,/\.scr$/i,/\.vbs$/i,/\.js$/i,/\.jar$/i].some(s=>s.test(t.name))?{isValid:!1,error:"Suspicious file type detected"}:{isValid:!0}:{isValid:!1,error:"No file selected"}}function Hr(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt"),/<[^>]*>/i.test(t)&&e.push("HTML injection attempt"),/\0/.test(t)&&e.push("Null byte injection"),{isSafe:e.length===0,threats:e}}const bl={};function Ss(t,e=10,r=6e4){const n=Date.now(),s=`${t}_${Math.floor(n/r)}`;return bl[s]||(bl[s]=0),bl[s]++,bl[s]>e?{allowed:!1,error:`Rate limit exceeded. Maximum ${e} requests per ${r/1e3} seconds.`}:(Object.keys(bl).forEach(i=>{const a=parseInt(i.split("_").pop())*r;n-a>r*2&&delete bl[i]}),{allowed:!0})}function lI(t,e={}){const r=[],{isNew:n=!1}=e;if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid student data"]};if(!t.app||!t.app.studentData)return r.push("Student data structure is invalid"),{isValid:!1,errors:r};const s=t.app.studentData;return[{field:"firstName",name:"First Name"},{field:"lastName",name:"Last Name"},{field:"caseManagerId",name:"Case Manager"}].forEach(({field:l,name:c})=>{const u=l0(s[l],c);u.isValid||r.push(u.error)}),[{field:"firstName",name:"First Name",maxLength:100},{field:"lastName",name:"Last Name",maxLength:100},{field:"studentId",name:"Student ID",maxLength:50},{field:"grade",name:"Grade",maxLength:10}].forEach(({field:l,name:c,maxLength:u})=>{if(s[l]){const d=fd(s[l],c,1,u);d.isValid||r.push(d.error)}}),["firstName","lastName","studentId","grade"].forEach(l=>{if(s[l]){const c=Hr(s[l]);c.isSafe||r.push(`Security threat detected in ${l}: ${c.threats.join(", ")}`)}}),t.app.accommodations&&typeof t.app.accommodations!="string"&&t.app.accommodations!==null&&r.push("Accommodations must be encrypted string or null"),t.app.classServices&&typeof t.app.classServices!="string"&&t.app.classServices!==null&&r.push("Class services must be encrypted string or null"),s.plan&&typeof s.plan!="string"&&s.plan!==null&&r.push("Student plan must be encrypted string or null"),{isValid:r.length===0,errors:r}}function lB(t){const e=[];if(!t||typeof t!="object")return{isValid:!1,errors:["Invalid user data"]};const r=l0(t.name,"Name");r.isValid||e.push(r.error);const n=l0(t.email,"Email");n.isValid||e.push(n.error);const s=l0(t.role,"Role");if(s.isValid||e.push(s.error),t.email){const a=aB(t.email);a.isValid||e.push(a.error)}if(t.role){const a=iB(t.role);a.isValid||e.push(a.error)}if(t.name){const a=fd(t.name,"Name",1,100);a.isValid||e.push(a.error)}if(t.email){const a=fd(t.email,"Email",1,255);a.isValid||e.push(a.error)}return["name","email"].forEach(a=>{if(t[a]){const o=Hr(t[a]);o.isSafe||e.push(`Security threat detected in ${a}: ${o.threats.join(", ")}`)}}),{isValid:e.length===0,errors:e}}function cI(t){const e={...t};if(e.app&&e.app.studentData){const r=e.app.studentData;["firstName","lastName","studentId","grade"].forEach(s=>{r[s]&&(r[s]=cn(r[s],100))})}else["firstName","lastName","studentId","grade"].forEach(n=>{e[n]&&(e[n]=cn(e[n],100))});return e}function cB(t){const e={...t};return e.name&&(e.name=cn(e.name,100)),e.email&&(e.email=sB(e.email)),e}const uB=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i},Fc=oB;function J0(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(J0);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=J0(n)}return e}function Oa(){const t=ue([]);let e=null;async function r(){if(!e)try{const{useGoogleSheetsRealtime:c}=await Oo(async()=>{const{useGoogleSheetsRealtime:u}=await Promise.resolve().then(()=>qoe);return{useGoogleSheetsRealtime:u}},void 0);e=c()}catch(c){console.error("Failed to load Google Sheets sync:",c)}return e}async function n(){var d,f,p;const c=await Qt(Ft(Ye,"students"));t.value=c.docs.map(m=>{const g=m.data(),v=J0(g);return{id:m.id,...v}});const u=t.value.find(m=>m.aeries);u&&(console.log("🔍 useStudents DEBUG - Student with aeries:",u),console.log("🔍 useStudents DEBUG - aeries.schedule:",(d=u.aeries)==null?void 0:d.schedule),console.log("🔍 useStudents DEBUG - aeries.schedule type:",typeof((f=u.aeries)==null?void 0:f.schedule)),(p=u.aeries)!=null&&p.schedule&&console.log("🔍 useStudents DEBUG - schedule keys:",Object.keys(u.aeries.schedule)))}function s(c){t.value=c.map(u=>{const d=J0(u);return{id:u.id,...d}})}async function i(){return(await Qt(Ft(Ye,"students"))).docs.map(u=>({id:u.id,...u.data()}))}async function a(c,u){await up(at(Ye,"students",c),u);try{const d=await r();if(d&&d.linkedSheetId.value){const f=t.value.findIndex(p=>p.id===c);f!==-1&&(t.value[f]={...t.value[f],...u}),console.log("Syncing student update to Google Sheets..."),await d.updateSheetData(t.value)}}catch(d){console.error("Failed to sync to Google Sheets:",d)}}async function o(c){await zo(at(Ye,"students",c));try{const u=await r();u&&u.linkedSheetId.value&&(t.value=t.value.filter(d=>d.id!==c),console.log("Syncing student deletion to Google Sheets..."),await u.updateSheetData(t.value))}catch(u){console.error("Failed to sync to Google Sheets:",u)}}return{students:t,fetchStudents:n,setStudents:s,fetchAllStudents:i,updateStudent:a,deleteStudent:o,deleteAllStudents:async()=>{try{const u=(await Qt(Ft(Ye,"students"))).docs;return await uB(u,async d=>{const f=Z1(Ye);d.forEach(p=>{f.delete(p.ref)}),await f.commit()},50,2e3),{success:!0}}catch(c){throw console.error("Error deleting all students:",c),c}}}}function Na(){const t=ue({}),e=ue([]);async function r(){const a=await Qt(Ft(Ye,"users")),o={},l=[];a.forEach(c=>{const u=c.data();o[c.id]={id:c.id,...u},l.push({id:c.id,...u}),u.aeriesId&&console.log("🔍 Loaded user with Aeries ID:",{name:u.name,email:u.email,aeriesId:u.aeriesId,id:c.id})}),t.value=o,e.value=l,console.log("📚 Total users loaded:",l.length),console.log("🔑 Users with Aeries IDs:",l.filter(c=>c.aeriesId).length)}const n=be(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=be(()=>e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role))),i=be(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}function hx(){const t=ue({}),e=ue(!1);async function r(){e.value=!0;try{const f=await Qt(Ft(Ye,"aideSchedules")),p={};f.forEach(m=>{p[m.id]=m.data()}),t.value=p}catch(f){console.error("Error loading aide assignments:",f),t.value={}}finally{e.value=!1}}async function n(f){if(!f){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const p=await sr(at(Ye,"aideSchedules",f));p.exists()?t.value[f]=p.data():t.value[f]={classAssignment:{},directAssignment:[]}}catch(p){console.error("Error loading aide assignment:",p),t.value[f]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(f,p){try{const m=JSON.parse(JSON.stringify(p));await tr(at(Ye,"aideSchedules",f),m,{merge:!0}),t.value[f]=m}catch(m){throw console.error("Error saving aide assignment:",m),m}}async function i(){try{const f=Object.entries(t.value);for(const[p,m]of f){const g=JSON.parse(JSON.stringify(m));await tr(at(Ye,"aideSchedules",p),g,{merge:!0})}}catch(f){throw console.error("Error saving all aide assignments:",f),f}}function a(f,p){const m=[];return Object.entries(t.value).forEach(([g,v])=>{v.classAssignment&&v.classAssignment[p]&&(Array.isArray(v.classAssignment[p])?v.classAssignment[p]:[v.classAssignment[p]]).includes(f)&&m.push(g)}),m}function o(f){var m;const p=(m=t.value[f])==null?void 0:m.directAssignment;return Array.isArray(p)?p.length>0?p[0]:null:p||null}function l(f){return Object.keys(t.value).find(m=>{var v;const g=(v=t.value[m])==null?void 0:v.directAssignment;return Array.isArray(g)?g.includes(f):g===f})||null}function c(f,p,m){const g=[],v=t.value[f];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(x=>{if(x){const y=p.find(C=>C.id===x);y&&g.push({...y,assignmentType:"direct"})}}),Object.entries(v.classAssignment||{}).forEach(([x,y])=>{y&&(Array.isArray(y)?y:[y]).forEach(P=>{P&&p.forEach(k=>{const w=d(k);if(w){const S=w[x];if((typeof S=="string"?S:S==null?void 0:S.teacherId)===P){const b=g.findIndex(T=>T.id===k.id);b===-1?g.push({...k,assignmentType:"class",period:x,teacherId:P}):(g[b].assignmentType="both",g[b].period=x,g[b].teacherId=P)}}})})})),g}function u(f,p,m,g){if(!f||!p||!m||!g)return!1;const v=m.find(k=>k.id===p);if(!v)return!1;const E=t.value[f];if(!E)return!1;if((Array.isArray(E.directAssignment)?E.directAssignment:E.directAssignment?[E.directAssignment]:[]).includes(p))return!0;const y=d(v);if(!y)return!1;const C=E.classAssignment||{};return Object.entries(y).some(([k,w])=>{const S=typeof w=="string"?w:w==null?void 0:w.teacherId,_=C[k];return!_||!S?!1:(Array.isArray(_)?_:[_]).includes(S)})}function d(f){var p,m,g,v,E;return f.schedule?f.schedule:(m=(p=f.app)==null?void 0:p.schedule)!=null&&m.periods?f.app.schedule.periods:(v=(g=f.aeries)==null?void 0:g.schedule)!=null&&v.periods?f.aeries.schedule.periods:(E=f.aeries)!=null&&E.schedule?f.aeries.schedule:null}return{aideAssignment:be(()=>t.value),loading:be(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function px(){const t=ue(!1),e=ue(""),r=ue("");let n,s,i,a;try{n=ec(),s=ba(n,"sendTeacherFeedbackForm"),i=ba(n,"syncFormResponses"),a=ba(n,"getStudentFeedback")}catch(z){console.warn("Firebase Functions not available:",z),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=Ft(Ye,"feedbackForms"),l=Ft(Ye,"feedbackResponses"),c=Ft(Ye,"feedbackSendLog"),u=ue([]),d=ue(!0),f=ue([]),p=ue(!0),m=ue([]),g=ue(!0);let v,E,x;const y=be(()=>{var H;return(((H=u.value)==null?void 0:H.filter(B=>B.active!==!1))||[]).sort((B,W)=>{var me,le;const K=(me=B.createdAt)!=null&&me.seconds?new Date(B.createdAt.seconds*1e3):new Date(B.createdAt);return((le=W.createdAt)!=null&&le.seconds?new Date(W.createdAt.seconds*1e3):new Date(W.createdAt))-K})}),C=be(()=>{var z;return((z=f.value)==null?void 0:z.length)||0}),P=async z=>{try{t.value=!0,e.value="";const H={title:z.title,description:z.description,formUrl:z.formUrl,responseSpreadsheetId:z.responseSpreadsheetId,active:!0,createdAt:new Date,createdBy:z.createdBy},B=at(o);return await tr(B,H),r.value="Feedback form created successfully!",{id:B.id,...H}}catch(H){throw console.error("Error creating feedback form:",H),e.value=H.message,H}finally{t.value=!1}},k=async(z,H)=>{try{t.value=!0,e.value="";const B=at(o,z);await tr(B,{...H,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(B){throw console.error("Error updating feedback form:",B),e.value=B.message,B}finally{t.value=!1}},w=async z=>{try{t.value=!0,e.value="";const H=at(o,z);await zo(H),r.value="Feedback form deleted successfully!"}catch(H){throw console.error("Error deleting feedback form:",H),e.value=H.message,H}finally{t.value=!1}},S=async z=>{try{t.value=!0,e.value="";const H=await s(z);if(H.data.success)return r.value=H.data.message,H.data;throw new Error(H.data.message||"Failed to send feedback form")}catch(H){throw console.error("Error sending feedback form:",H),e.value=H.message,H}finally{t.value=!1}},_=async(z,H="Form Responses 1")=>{try{t.value=!0,e.value="";const B=await i({spreadsheetId:z,sheetName:H});if(B.data.success)return r.value=B.data.message,B.data;throw new Error(B.data.message||"Failed to sync responses")}catch(B){throw console.error("Error syncing responses:",B),e.value=B.message,B}finally{t.value=!1}},b=async z=>{try{t.value=!0,e.value="";const H=await a({studentId:z});if(H.data.success)return H.data.responses;throw new Error(H.data.message||"Failed to get student feedback")}catch(H){throw console.error("Error getting student feedback:",H),e.value=H.message,H}finally{t.value=!1}},T=z=>be(()=>{var H;return((H=f.value)==null?void 0:H.filter(B=>B.formId===z))||[]}),I=z=>be(()=>{var H;return((H=f.value)==null?void 0:H.filter(B=>B.spreadsheetId===z))||[]}),D=z=>be(()=>{var H;return((H=m.value)==null?void 0:H.filter(B=>B.studentId===z))||[]}),O=()=>{e.value="",r.value=""},R=z=>{const H=z.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return H?H[1]:null},F=z=>{const H=z.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return H?H[1]:null},N=()=>{try{v=Qi(o,z=>{u.value=z.docs.map(H=>({id:H.id,...H.data()})),d.value=!1},z=>{console.warn("Error listening to feedback forms:",z),d.value=!1}),E=Qi(l,z=>{f.value=z.docs.map(H=>({id:H.id,...H.data()})),p.value=!1},z=>{console.warn("Error listening to feedback responses:",z),p.value=!1}),x=Qi(c,z=>{m.value=z.docs.map(H=>({id:H.id,...H.data()})),g.value=!1},z=>{console.warn("Error listening to send log:",z),g.value=!1})}catch(z){console.warn("Error initializing Firestore listeners:",z),d.value=!1,p.value=!1,g.value=!1}},V=()=>{v&&v(),E&&E(),x&&x()};return jt(()=>{N()}),Ra(()=>{V()}),{isLoading:t,error:e,successMessage:r,formsLoading:d,responsesLoading:p,sendLogLoading:g,feedbackForms:u,feedbackResponses:f,sendLog:m,activeForms:y,totalResponses:C,createFeedbackForm:P,updateFeedbackForm:k,deleteFeedbackForm:w,sendFeedbackForm:S,syncResponses:_,getResponsesForStudent:b,getResponsesForForm:T,getResponsesForSpreadsheet:I,getSendLogForStudent:D,getTeacherEmails:async()=>{try{const z=Ft(Ye,"users"),H=lr(z,Nr("role","==","teacher"));return(await Qt(H)).docs.map(W=>{const K=W.data();return{id:W.id,name:K.name,email:K.email}})}catch(z){throw console.error("Error getting teacher emails:",z),z}},clearMessages:O,extractSpreadsheetId:R,extractFormId:F}}function dB(){const t=fa(),e=ue(!1),r=ue(null),n=ue([]),s=ue(0),i=be(()=>t.user),a=be(()=>{var y;return(y=t.user)==null?void 0:y.role}),o=be(()=>{var y;return(y=t.user)==null?void 0:y.uid}),l=async()=>{console.log("🔍 Admin query: Loading all students - START"),console.log("🔍 Admin query: currentUser:",i.value),console.log("🔍 Admin query: currentRole:",a.value),console.log("🔍 Admin query: currentUserId:",o.value);try{const y=lr(Ft(Ye,"students"),ln("app.studentData.lastName","asc"));console.log("🔍 Admin query created:",y);const C=await Qt(y);console.log("🔍 Admin query snapshot:",C.size,"documents");const P=C.docs.map(k=>({id:k.id,...k.data()}));if(console.log("🔍 Admin query result:",P.length,"students"),P.length>0)console.log("🔍 First student structure:",P[0]);else{console.log("🔍 Admin query: NO STUDENTS FOUND - checking collection directly");const k=lr(Ft(Ye,"students")),w=await Qt(k);console.log("🔍 Simple query found:",w.size,"documents")}return P}catch(y){console.error("🔴 Admin query error:",y),console.error("🔴 Admin query error details:",y.message,y.code);try{console.log("🔍 Trying fallback query without ordering...");const C=lr(Ft(Ye,"students")),P=await Qt(C);console.log("🔍 Fallback query found:",P.size,"documents");const k=P.docs.map(w=>({id:w.id,...w.data()}));return console.log("🔍 Fallback query returning:",k.length,"students"),k}catch(C){return console.error("🔴 Fallback query also failed:",C),console.error("🔴 Fallback query error details:",C.message,C.code),[]}}},c=async()=>{console.log("🔍 504 Admin query: Loading only IEP and 504 students");try{const y=lr(Ft(Ye,"students"),Nr("app.studentData.plan","in",["IEP","504"]));return(await Qt(y)).docs.map(P=>({id:P.id,...P.data()}))}catch(y){return console.error("🔴 504 Admin query error:",y),[]}},u=async y=>{console.log("🔒 Security: Loading students for case manager using staffIds:",y);try{const C=lr(Ft(Ye,"students"),Nr("app.staffIds","array-contains",y),ln("app.studentData.lastName","asc")),k=(await Qt(C)).docs.map(w=>({id:w.id,...w.data()}));return console.log("🔒 Security: Case manager has access to",k.length,"students via staffIds"),console.log("🔒 Security: CM accessible students:",k.map(w=>{var S,_,b,T;return`${(_=(S=w.app)==null?void 0:S.studentData)==null?void 0:_.firstName} ${(T=(b=w.app)==null?void 0:b.studentData)==null?void 0:T.lastName}`}).slice(0,5)),k}catch(C){return console.error("🔒 Security: Error loading case manager students:",C),[]}},d=async y=>{console.log("🔍 Teacher query: Loading students for teacher",y);try{const C=lr(Ft(Ye,"students"),Nr("app.staffIds","array-contains",y),ln("app.studentData.lastName","asc")),P=await Qt(C);return console.log("🔍 Teacher query: Found",P.size,"students with teacher in staffIds"),P.docs.map(k=>({id:k.id,...k.data()}))}catch(C){return console.error("🔒 Security: Error loading teacher students:",C),[]}},f=async y=>{var C,P,k,w;console.log("🔍 Service Provider query: Loading students for provider",y),console.log("🔍 Service Provider query: userId type:",typeof y),console.log("🔍 Service Provider query: userId value:",JSON.stringify(y));try{const S=lr(Ft(Ye,"students"),Nr("app.staffIds","array-contains",y));console.log("🔍 Service Provider query: Executing staffIds query...");const _=await Qt(S);console.log("🔍 Service Provider query: Success! Found",_.size,"students");const b=_.docs.map(T=>({id:T.id,...T.data()}));return b.sort((T,I)=>{var R,F,N,V;const D=((F=(R=T.app)==null?void 0:R.studentData)==null?void 0:F.lastName)||"",O=((V=(N=I.app)==null?void 0:N.studentData)==null?void 0:V.lastName)||"";return D.localeCompare(O)}),b}catch(S){console.error("🔴 Service Provider query FAILED:",S),console.error("🔴 Error code:",S.code),console.error("🔴 Error message:",S.message),console.error("🔴 Full error object:",S);const _=cc();return console.error("🔴 Current auth state:",{uid:(C=_.currentUser)==null?void 0:C.uid,email:(P=_.currentUser)==null?void 0:P.email,customClaims:"Check in browser dev tools"}),console.error("🔴 Auth mismatch check:",{queryUserId:y,authUid:(k=_.currentUser)==null?void 0:k.uid,match:y===((w=_.currentUser)==null?void 0:w.uid)}),[]}},p=async y=>{var C,P,k,w;console.log("🔍 Paraeducator query: Loading students for aide",y),console.log("🔍 Paraeducator query: userId type:",typeof y),console.log("🔍 Paraeducator query: userId value:",JSON.stringify(y));try{console.log("🔍 Paraeducator query: Trying staffIds approach first...");try{const O=lr(Ft(Ye,"students"),Nr("app.staffIds","array-contains",y),ln("app.studentData.lastName","asc")),R=await Qt(O);if(console.log("🔍 Paraeducator query: staffIds approach found",R.size,"students"),R.size>0){const F=R.docs.map(N=>({id:N.id,...N.data()}));return console.log("🔍 Paraeducator query: SUCCESS with staffIds approach"),F}}catch(O){console.log("🔍 Paraeducator query: staffIds approach failed:",O.message)}console.log("🔍 Paraeducator query: Using aideSchedules fallback...");const S=await sr(at(Ye,"aideSchedules",y));if(!S.exists())return console.log("🔍 Paraeducator query: No aide schedule document found for",y),[];const _=S.data();console.log("🔍 Paraeducator query: Found aide data:",_);let b=[];if(_.studentIds&&Array.isArray(_.studentIds)?(b=_.studentIds,console.log("🔍 Paraeducator query: Using studentIds array:",b)):_.directAssignment&&(b=Array.isArray(_.directAssignment)?_.directAssignment:[_.directAssignment],console.log("🔍 Paraeducator query: Using directAssignment as fallback:",b)),b.length===0)return console.log("🔍 Paraeducator query: No student assignments found for aide",y),[];console.log("🔍 Paraeducator query: Fetching",b.length,"assigned students individually...");const T=b.map(async O=>{try{const R=await sr(at(Ye,"students",O));return R.exists()?{id:R.id,...R.data()}:null}catch(R){return console.warn("🔍 Paraeducator query: Failed to fetch student",O,":",R.message),null}}),D=(await Promise.all(T)).filter(O=>O!==null);return D.sort((O,R)=>{var V,L,z,H;const F=((L=(V=O.app)==null?void 0:V.studentData)==null?void 0:L.lastName)||"",N=((H=(z=R.app)==null?void 0:z.studentData)==null?void 0:H.lastName)||"";return F.localeCompare(N)}),console.log("🔍 Paraeducator query: Successfully fetched",D.length,"students"),D}catch(S){console.error("🔴 Paraeducator query FAILED:",S),console.error("🔴 Error code:",S.code),console.error("🔴 Error message:",S.message),console.error("🔴 Full error object:",S);const _=cc();return console.error("🔴 Current auth state:",{uid:(C=_.currentUser)==null?void 0:C.uid,email:(P=_.currentUser)==null?void 0:P.email,customClaims:"Check in browser dev tools"}),console.error("🔴 Auth mismatch check:",{queryUserId:y,authUid:(k=_.currentUser)==null?void 0:k.uid,match:y===((w=_.currentUser)==null?void 0:w.uid)}),[]}},m=async()=>{console.log("🔍 Testing query: Loading students with testing flags");const y=lr(Ft(Ye,"students"),Nr("app.flags.flag2","==",!0),ln("app.studentData.lastName","asc")),C=lr(Ft(Ye,"students"),Nr("app.flags.separateSetting","==",!0),ln("app.studentData.lastName","asc")),[P,k]=await Promise.all([Qt(y),Qt(C)]),w=P.docs.map(b=>({id:b.id,...b.data()})),S=k.docs.map(b=>({id:b.id,...b.data()})),_=[...w];return S.forEach(b=>{_.find(T=>T.id===b.id)||_.push(b)}),_.sort((b,T)=>{var O,R,F,N;const I=((R=(O=b.app)==null?void 0:O.studentData)==null?void 0:R.lastName)||"",D=((N=(F=T.app)==null?void 0:F.studentData)==null?void 0:N.lastName)||"";return I.localeCompare(D)})},g=async(y={})=>{var C,P;if(console.log("🔍 loadStudents called - DEBUG AUTH STATE:"),console.log("  currentUserId.value:",o.value),console.log("  currentRole.value:",a.value),console.log("  authStore.user:",t.user),console.log("  authStore.user?.uid:",(C=t.user)==null?void 0:C.uid),console.log("  authStore.user?.role:",(P=t.user)==null?void 0:P.role),!o.value||!a.value)return console.error("🔴 No authenticated user or role - FAILING AUTH CHECK"),console.error("  currentUserId.value is:",o.value),console.error("  currentRole.value is:",a.value),r.value="Authentication required",[];e.value=!0,r.value=null;try{let k=[];switch(console.log("🔍 ROUTING to query based on role:",a.value),console.log("🔍 Available role cases: admin, administrator, sped_chair, administrator_504_CM, case_manager, teacher, service_provider, paraeducator"),a.value){case"admin":case"administrator":case"sped_chair":k=await l();break;case"administrator_504_CM":k=await l();break;case"case_manager":console.log("🔍 CALLING getCaseManagerStudents with userId:",o.value),k=await u(o.value),console.log("🔍 getCaseManagerStudents COMPLETED, returned:",k.length,"students");break;case"teacher":k=await d(o.value);break;case"service_provider":k=await f(o.value);break;case"paraeducator":k=await p(o.value);break;default:return console.error("🔴 Unknown role:",a.value),r.value="Invalid user role",[]}return y.testingOnly&&(k=await m()),n.value=k,s.value=k.length,console.log(`🟢 Loaded ${k.length} students for ${a.value}`),k}catch(k){return console.error("🔴 Error loading students:",k),r.value=k.message||"Failed to load students",[]}finally{e.value=!1}},v=async y=>{if(!y)throw new Error("Student ID is required");if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{const C=await sr(at(Ye,"students",y));if(!C.exists())throw new Error("Student not found");const P={id:C.id,...C.data()};if(!await E(P,o.value,a.value))throw new Error("Access denied to this student");return P}catch(C){throw console.error("🔴 Error getting student:",C),r.value=C.message,C}finally{e.value=!1}},E=async(y,C,P)=>{var k,w,S,_,b,T,I;if(!y||!C||!P)return!1;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(P))return!0;if(P==="case_manager")return((w=(k=y.app)==null?void 0:k.studentData)==null?void 0:w.caseManagerId)===C;if(P==="teacher"){if(!((_=(S=y.app)==null?void 0:S.schedule)!=null&&_.periods))return!1;const D=y.app.schedule.periods,O=Object.values(D);return O.includes(C)?!0:O.some(R=>{var F;return typeof R=="object"&&R!==null?R.teacherId===C||((F=R.coTeaching)==null?void 0:F.caseManagerId)===C:!1})}if(P==="service_provider"){if((b=y.app)!=null&&b.providers&&Object.values(y.app.providers).includes(C))return!0;if((I=(T=y.app)==null?void 0:T.schedule)!=null&&I.periods){const D=y.app.schedule.periods,O=Object.values(D);return O.includes(C)?!0:O.some(R=>{var F;return typeof R=="object"&&R!==null?R.teacherId===C||((F=R.coTeaching)==null?void 0:F.caseManagerId)===C:!1})}}return!1},x=async(y=50,C=null)=>{if(!o.value||!a.value)throw new Error("Authentication required");e.value=!0,r.value=null;try{let P=lr(Ft(Ye,"students"),ln("app.studentData.lastName","asc"),Qs(y));C&&(P=lr(P,q0(C))),a.value==="case_manager"&&(P=lr(Ft(Ye,"students"),Nr("app.studentData.caseManagerId","==",o.value),ln("app.studentData.lastName","asc"),Qs(y)),C&&(P=lr(P,q0(C))));const k=await Qt(P);return{students:k.docs.map(S=>({id:S.id,...S.data()})),lastDoc:k.docs[k.docs.length-1],hasMore:k.docs.length===y}}catch(P){throw console.error("🔴 Error loading paginated students:",P),r.value=P.message,P}finally{e.value=!1}};return{students:be(()=>n.value),loading:be(()=>e.value),error:be(()=>r.value),totalCount:be(()=>s.value),loadStudents:g,getStudent:v,verifyStudentAccess:E,loadStudentsPaginated:x,getAdminStudents:l,getAdmin504Students:c,getCaseManagerStudents:u,getTeacherStudents:d,getServiceProviderStudents:f,getParaeducatorStudents:p,getTestingStudents:m}}function fB(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;hB(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:pB(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function hB(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const d=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(d).includes(n);case"service_provider":const f=((l=t.app)==null?void 0:l.providers)||{},p=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},m=Object.values(f).includes(n),g=Object.values(p).includes(n);return m||g;case"paraeducator":return!0;default:return!1}}function pB(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const d=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${d})`;case"teacher":const f=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},p=Object.values(f);return`Teacher ${n} does not teach this student (teachers: ${p.join(", ")})`;case"service_provider":const m=((l=t.app)==null?void 0:l.providers)||{},g=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},v=Object.values(m).filter(x=>x),E=Object.values(g);return`Service provider ${n} is not assigned to student (providers: ${v.join(", ")}, teachers: ${E.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function mB(t){t.isSecure?console.log("✅ SECURITY TEST PASSED:",t.summary):(console.error("🚨 SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function sb(t,e){const r=fB(t,e);return mB(r),r}const uI=(t,e)=>{console.log(`🔍 DEBUG: Schedule Operation - ${t}:`,e)};function dI(t){return uI("getTeacherIdFromPeriod",{periodData:t,type:typeof t}),t?typeof t=="string"?t:t.teacherId||null:null}function mp(t){var e;return uI("getCoTeachingCaseManagerFromPeriod",{periodData:t}),!t||typeof t!="object"?null:((e=t.coTeaching)==null?void 0:e.caseManagerId)||null}function gB(t,e={}){if(!t||!t.periods)return[];const r=new Set;return Object.values(t.periods).forEach(n=>{const s=dI(n);s&&r.add(s);const i=mp(n);if(i){const a=e[i];a&&(a.role==="teacher"||a.roles&&a.roles.includes("teacher"))&&r.add(i)}}),Array.from(r)}function vB(t){if(!t||!t.periods)return[];const e=new Set;return Object.values(t.periods).forEach(r=>{const n=mp(r);n&&e.add(n)}),Array.from(e)}function xB(t,e){var r,n;return!((n=(r=t.app)==null?void 0:r.schedule)!=null&&n.periods)||!e?!1:Object.values(t.app.schedule.periods).some(s=>mp(s)===e)}function yB(){const t=vi(),e=fa(),{students:r,setStudents:n}=Oa(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=Na(),{loadAideAssignment:u,loadAideAssignments:d,shouldAideSeeStudent:f,aideAssignment:p}=hx(),{feedbackForms:m,formsLoading:g}=px(),{loadStudents:v}=dB(),E=ue(!1),x=ue(null),y=be(()=>e.currentUser),C=be(()=>{var R;const O=(R=y.value)==null?void 0:R.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(O)}),P=be(()=>{var O;return["case_manager","administrator_504_CM","sped_chair"].includes((O=y.value)==null?void 0:O.role)}),k=be(()=>s.value||{}),w=be(()=>{var O;return((O=i.value)==null?void 0:O.filter(R=>R.role==="paraeducator"))||[]}),S=async()=>{var O,R;console.log("🔍 useStudentData: fetchData() called"),E.value=!0,x.value=null;try{console.log("🔍 useStudentData: About to fetchUsers()..."),await a(),console.log("🔍 useStudentData: fetchUsers() completed");const F=y.value;if(console.log("🔍 useStudentData: Checking user for loadStudents call:",F),F){console.log("🔒 Security: Fetching students for user role:",F.role),console.log("🔍 useStudentData: About to call loadStudents()...");const V=await v();console.log("🔍 useStudentData: loadStudents() returned:",V.length,"students"),n(V);const L=sb(V,F);L.isSecure||console.error("🚨 SECURITY VIOLATION DETECTED:",L.violations)}else console.log("🔒 Security: No user found - setting empty student array"),n([]);const N=(O=y.value)==null?void 0:O.role;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(N))await d();else if(N==="paraeducator"&&y.value.uid){console.log("🔍 useStudentData: Loading individual aide assignment for paraeducator:",y.value.uid),await u(y.value.uid);const V=at(Ye,"aideSchedules",y.value.uid),L=Qi(V,async z=>{if(z.exists()){console.log("🔍 useStudentData: Aide schedule updated, reloading students..."),await u(y.value.uid);const H=await v();n(H)}});Ra(()=>L())}console.log("🔒 Security: Loaded",r.value.length,"students for",(R=y.value)==null?void 0:R.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(F){console.error("Error fetching data:",F),x.value=F.message||"Failed to load data"}finally{E.value=!1}},_=O=>r.value.find(R=>R.id===O)||{},b=O=>{const R=s.value[O];return R&&(R.name||R.email)||O},T=O=>{if(!O)return"N/A";const R=s.value[O];return R&&(R.name||R.email)||O},I=O=>{var R,F;return((F=(R=O.app)==null?void 0:R.studentData)==null?void 0:F.caseManagerId)||O.caseManagerId||O.casemanager_id},D=O=>{var R,F,N,V,L;return O.schedule?O.schedule:(F=(R=O.app)==null?void 0:R.schedule)!=null&&F.periods?O.app.schedule.periods:(V=(N=O.aeries)==null?void 0:N.schedule)!=null&&V.periods?O.aeries.schedule.periods:(L=O.aeries)!=null&&L.schedule?O.aeries.schedule:null};return jt(()=>{console.log("🔍 useStudentData: onMounted triggered, calling fetchData..."),S()}),Ut(()=>{var O;return(O=y.value)==null?void 0:O.role},async(O,R)=>{if(O&&O!==R){console.log("🔒 Security: User role changed from",R,"to",O,"- reloading students");const F=y.value;if(console.log("🔍 useStudentData: Role watcher - checking user:",F),F){console.log("🔍 useStudentData: Role watcher - about to call loadStudents()...");const N=await v();console.log("🔍 useStudentData: Role watcher - loadStudents() returned:",N.length,"students"),n(N);const V=sb(N,F);V.isSecure||console.error("🚨 SECURITY VIOLATION DETECTED:",V.violations),console.log("🔒 Security: Reloaded",N.length,"students for role",O)}}},{immediate:!1}),{isLoading:E,error:x,students:r,userMap:s,userList:i,userMapObj:k,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:p,feedbackForms:m,formsLoading:g,paraeducators:w,currentUser:y,isAdmin:C,showProviderView:P,fetchData:S,getStudentById:_,getUserName:b,getCaseManagerName:T,getCaseManagerId:I,getSchedule:D,shouldAideSeeStudent:f,getTeacherIdFromPeriod:dI,getCoTeachingCaseManagerFromPeriod:mp,getAllTeacherIdsFromSchedule:gB,getCoTeachingCaseManagersFromSchedule:vB,isCoTeachingCaseManager:xB,router:t}}function ct(t,e,r="—"){const n=(l,c)=>c.split(".").reduce((u,d)=>u&&u[d]!==void 0?u[d]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function Qc(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":"—"}function EB(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+|;/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div>—</div>"}function _B(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a,aideAssignment:o}=t,l=ue(!1),c=ue([]),u=Cs({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let d=null;const f=()=>{d&&clearTimeout(d),d=setTimeout(()=>{v()},300)},p=()=>{l.value=!l.value},m=()=>{u.sortBy="firstName",u.cm="all",u.teacher="all",u.paraeducator="all",u.plan="all",u.search="",u.providerView="all",u.viewMode="list",v()},g=()=>({paraeducator:u.paraeducator,teacher:u.teacher}),v=(E=u)=>{var P,k,w,S;console.log("🔍 FILTER DEBUG: applyFilters called with students.value.length:",e.value.length),console.log("🔍 FILTER DEBUG: currentUser:",(P=r.value)==null?void 0:P.role,(k=r.value)==null?void 0:k.uid);let x=e.value;const y=(w=r.value)==null?void 0:w.role,C=["admin","administrator"];if(console.log("🔍 FILTER DEBUG: Provider view filtering check:",{userRole:y,providerView:E.providerView,shouldSkip:C.includes(y),resultLengthBefore:x.length}),!C.includes(y)&&E.providerView==="case_manager"?(console.log("🔍 FILTER DEBUG: Applying case_manager filter"),x=x.filter(_=>{var b;return i(_)===((b=r.value)==null?void 0:b.uid)}),console.log("🔍 FILTER DEBUG: After case_manager filter:",x.length)):!C.includes(y)&&E.providerView==="service_provider"?(console.log("🔍 FILTER DEBUG: Applying service_provider filter"),x=x.filter(_=>{var O;const b=a(_),T=b?Object.entries(b).some(([R,F])=>{var N,V;return typeof F=="string"?F===((N=r.value)==null?void 0:N.uid):F&&typeof F=="object"?F.teacherId===((V=r.value)==null?void 0:V.uid):!1}):!1,I=(_.services||[]).some(R=>{var F;return R.includes((F=r.value)==null?void 0:F.uid)}),D=i(_)!==((O=r.value)==null?void 0:O.uid);return(T||I)&&D}),console.log("🔍 FILTER DEBUG: After service_provider filter:",x.length)):console.log("🔍 FILTER DEBUG: Skipping provider view filtering for role:",y),((S=r.value)==null?void 0:S.role)==="paraeducator"&&console.log("🔍 FILTER DEBUG: Paraeducator - using database-filtered students, no additional filtering"),E.search){const _=E.search.toLowerCase();x=x.filter(b=>{const T=ct(b,"firstName")||"",I=ct(b,"lastName")||"";return`${T} ${I}`.toLowerCase().includes(_)})}if(E.cm&&E.cm!=="all"&&(x=x.filter(_=>i(_)===E.cm)),E.teacher&&E.teacher!=="all"&&(x=x.filter(_=>{const b=a(_);return b?Object.entries(b).some(([T,I])=>typeof I=="string"?I===E.teacher:I&&typeof I=="object"?I.teacherId===E.teacher:!1):!1})),E.paraeducator&&E.paraeducator!=="all"){console.log("🔍 FILTER DEBUG: Applying paraeducator filter for:",E.paraeducator);const _=o.value[E.paraeducator];if(_){console.log("🔍 FILTER DEBUG: Found aide data:",_);let b=[];_.studentIds&&Array.isArray(_.studentIds)?(b=_.studentIds,console.log("🔍 FILTER DEBUG: Using studentIds array:",b)):_.directAssignment&&(b=Array.isArray(_.directAssignment)?_.directAssignment:[_.directAssignment],console.log("🔍 FILTER DEBUG: Using directAssignment as fallback:",b)),x=x.filter(T=>b.includes(T.id)),console.log("🔍 FILTER DEBUG: After paraeducator filter:",x.length,"students")}else console.log("🔍 FILTER DEBUG: No aide data found for:",E.paraeducator),x=[]}E.plan&&E.plan!=="all"&&(x=x.filter(_=>ct(_,"plan")===E.plan)),E.sortBy&&x.sort((_,b)=>{const T=ct(_,E.sortBy)||"",I=ct(b,E.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(E.sortBy)){const D=T?new Date(T).getTime():0,O=I?new Date(I).getTime():0;return D-O}return T.toString().toLowerCase().localeCompare(I.toString().toLowerCase())}),c.value=x,console.log("🔍 FILTER DEBUG: applyFilters completed. filteredStudents.value.length:",c.value.length)};return Ut(()=>[e.value,r.value],()=>{console.log("🔍 FILTER DEBUG: Watcher triggered. students.value.length:",e.value.length),e.value.length>0?(console.log("🔍 FILTER DEBUG: Calling applyFilters from watcher"),v()):console.log("🔍 FILTER DEBUG: No students to filter")},{deep:!0}),{showFilters:l,filteredStudents:c,currentFilters:u,toggleFilters:p,clearFilters:m,applyFilters:v,debouncedApplyFilters:f,getCurrentFilters:g}}const c0={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"]},Gs=ue({...c0}),ma=ue(!1),Ci=ue(null);let Jc=!1;function ha(){const t=at(Ye,"app_settings","global"),e=async()=>{if(ma.value)return new Promise(s=>{const i=Ut(ma,a=>{a||(i(),s(Gs.value))})});if(Jc&&!Ci.value)return Gs.value;ma.value=!0,Ci.value=null;try{const s=await sr(t);return s.exists()?(Gs.value=s.data(),console.log("useAppSettings: Loaded existing settings:",Gs.value)):(Gs.value={...c0},console.log("useAppSettings: No existing settings, using defaults:",Gs.value)),Jc=!0,Gs.value}catch(s){throw Ci.value=s.message,console.error("useAppSettings: Error loading settings:",s),s}finally{ma.value=!1}},r=async s=>{ma.value=!0,Ci.value=null;try{console.log("useAppSettings: Saving settings:",s),await tr(t,s),console.log("useAppSettings: Settings saved successfully"),Gs.value={...s},Jc=!0}catch(i){throw Ci.value=i.message,console.error("useAppSettings: Error saving settings:",i),i}finally{ma.value=!1}},n=async()=>{ma.value=!0,Ci.value=null;try{await tr(t,{...c0}),Gs.value={...c0},Jc=!0}catch(s){throw Ci.value=s.message,s}finally{ma.value=!1}};return!Jc&&!ma.value&&e(),Ut(Gs,s=>{console.log("appSettings changed:",s)},{deep:!0}),{appSettings:Gs,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,loading:ma,error:Ci}}function zd(){const{appSettings:t}=ha(),e=be(()=>{var l,c,u,d;if(console.log("🏷️ usePeriodLabels: appSettings.value:",t.value),console.log("🏷️ usePeriodLabels: periodLabels:",(l=t.value)==null?void 0:l.periodLabels),console.log("🏷️ usePeriodLabels: numPeriods:",(c=t.value)==null?void 0:c.numPeriods),(u=t.value)!=null&&u.periodLabels&&((d=t.value)!=null&&d.numPeriods)){const f=t.value.periodLabels.slice(0,t.value.numPeriods);return console.log("🏷️ usePeriodLabels: returning labels:",f),f}const o=["1","2","3","4","5","6","7"];return console.log("🏷️ usePeriodLabels: returning fallback labels:",o),o}),r=o=>{const l=parseInt(o);if(!l||l<1)return`Period ${o}`;const c=l-1,u=e.value[c]||`Period ${l}`;return console.log(`🏷️ getLabel(${o}) -> "${u}" (index: ${c}, labels:`,e.value,")"),u},n=o=>{const l=e.value.findIndex(c=>c===o);return l!==-1?l+1:null},s=be(()=>{var l;const o=((l=t.value)==null?void 0:l.numPeriods)||7;return Array.from({length:o},(c,u)=>u+1)}),i=be(()=>{const o={};return e.value.forEach((l,c)=>{o[l]=c+1}),o}),a=be(()=>{const o={};return e.value.forEach((l,c)=>{o[c+1]=l}),o});return{labels:e,getLabel:r,getNumber:n,numericPeriods:s,labelToNumberMap:i,numberToLabelMap:a}}function sl(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{getLabel:c}=zd(),{filteredStudents:u,currentFilters:d,applyFilters:f}=e,p=(R,F)=>{if(!R)return{periods:{},isTeacher:!1,isCoTeacher:!1};let N=!1,V=!1;const L={};return Object.entries(R).forEach(([z,H])=>{const B=typeof H=="string"?H:H==null?void 0:H.teacherId,W=typeof H=="object"?H==null?void 0:H.coTeaching:null,K=W==null?void 0:W.caseManagerId;L[z]={teacherId:B,coTeaching:W,coTeachingCM:K,teacherName:o(B),coTeacherName:K?o(K):null,label:c(z)},B===F&&(N=!0),K===F&&(V=!0)}),{periods:L,isTeacher:N,isCoTeacher:V}},m=(R,F,N)=>{if(!R||!F)return[];switch(N){case"case_manager":return R.filter(V=>i(V)===F);case"service_provider":return R.filter(V=>{const L=a(V);return L?Object.values(L).some(H=>{var B;return typeof H=="string"?H===F:H&&typeof H=="object"?H.teacherId===F||((B=H.coTeaching)==null?void 0:B.caseManagerId)===F:!1}):!1});case"all":return R;default:return console.warn(`Unknown provider view: ${N}`),[]}},g=(R,F)=>!R||!F?[]:R.filter(N=>{const{isTeacher:V,isCoTeacher:L}=p(a(N),F);return V||L}),v=(R,F)=>{const N={};return R.forEach(V=>{const L=a(V);if(!L)return;const{periods:z}=p(L,F);Object.entries(z).forEach(([H,B])=>{(B.teacherId===F||B.coTeachingCM===F)&&(N[H]||(N[H]=[]),N[H].push(V))})}),N},E=be(()=>u.value||[]),x=R=>{const F=ct(R,"firstName"),N=ct(R,"lastName");return`${F} ${N}`},y=R=>({name:x(R),grade:ct(R,"grade"),plan:ct(R,"plan"),caseManager:o(i(R))}),C=R=>({reviewDate:l(ct(R,"reviewDate")),reevalDate:l(ct(R,"reevalDate")),meetingDate:l(ct(R,"meetingDate"))}),P=R=>{const F=a(R);return F?Object.entries(F).reduce((N,[V,L])=>(N[V]={teacherId:L,teacherName:o(L)},N),{}):{}},k=R=>{d.search=R,f()},w=R=>{d.cm=R,f()},S=R=>{d.teacher=R,f()},_=R=>{d.viewMode=R,f()},b=be(()=>{const R={};return E.value.forEach(F=>{const N=ct(F,"grade");R[N]||(R[N]=[]),R[N].push(F)}),R}),T=be(()=>{const R={};return E.value.forEach(F=>{const N=ct(F,"plan");R[N]||(R[N]=[]),R[N].push(F)}),R}),I=be(()=>{var N;const R=(N=s.value)==null?void 0:N.role,F=d;return["teacher","paraeducator"].includes(R)?!1:R==="case_manager"||["sped_chair","administrator_504_CM"].includes(R)?F.providerView!=="service_provider"&&F.teacher==="all":["admin","administrator"].includes(R)?F.teacher==="all"&&F.paraeducator==="all":R==="service_provider"?F.providerView!=="service_provider":!0}),D=be(()=>{var F;const R=(F=s.value)==null?void 0:F.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(R)}),O=be(()=>{var F;const R=(F=s.value)==null?void 0:F.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(R)});return Ut(()=>I.value,R=>{R&&d.viewMode==="class"&&(console.log("🔄 Auto-switching from class view to list view because class view is now disabled"),d.viewMode="list",f())},{immediate:!1}),{visibleStudents:E,currentUser:s,userMapObj:n,standardizeScheduleAccess:p,getProviderViewStudents:m,getClassViewStudents:g,groupStudentsByPeriod:v,groupStudentsByGrade:b,groupStudentsByPlan:T,canAccessFilters:O,isClassViewDisabled:I,isAdminRole:D,formatStudentName:x,formatStudentInfo:y,formatDates:C,getStudentSchedule:P,filterByName:k,filterByCaseManager:w,filterByTeacher:S,setViewMode:_,currentFilters:d,showProviderView:!1,providerViewOptions:be(()=>[])}}function uv(t,e){const r=sl(t,e),n=be(()=>r.visibleStudents.value||[]);return be(()=>{const s={};return n.value.forEach(i=>{const a=t.getCaseManagerId(i);s[a]||(s[a]={caseManager:t.getUserName(a),students:[]}),s[a].students.push(i)}),s}),be(()=>{const s={};return n.value.forEach(i=>{var o;const a=((o=i.app)==null?void 0:o.providers)||{};Object.entries(a).forEach(([l,c])=>{c&&(s[c]||(s[c]={provider:t.getUserName(c),providerType:l,students:[]}),s[c].students.push(i))})}),s}),be(()=>{const s={instruction:[],assessment:[]};return n.value.forEach(i=>{var a,o,l,c;(o=(a=i.app)==null?void 0:a.accommodations)!=null&&o.instruction&&s.instruction.push(i),(c=(l=i.app)==null?void 0:l.accommodations)!=null&&c.assessment&&s.assessment.push(i)}),s}),{...r,visibleStudents:n,showProviderView:!1,providerViewOptions:be(()=>[])}}let xn={};function bB(t,e){xn={userId:t,userRole:e,databaseStudents:0,accessibleStudents:0,providerView:"",providerViewStudents:0,classViewPeriods:{},timestamp:new Date().toISOString()}}function SB(t,e,r=[]){xn.providerView=t,xn.providerViewStudents=e,xn.providerViewNames=r.slice(0,5)}function TB(t){xn.classViewPeriods=Object.entries(t).reduce((e,[r,n])=>(e[r]=n.length,e),{})}function AB(){console.log("🎯 === DEBUG SUMMARY ==="),console.log(`User: ${xn.userId} (${xn.userRole})`),console.log(`Database returned: ${xn.databaseStudents} students`),xn.databaseDetails&&(console.log(`  - Case managing: ${xn.databaseDetails.caseManaging||0}`),console.log(`  - Teaching: ${xn.databaseDetails.teaching||0}`)),console.log(`Accessible after role filter: ${xn.accessibleStudents} students`),console.log(`Provider view "${xn.providerView}": ${xn.providerViewStudents} students`),xn.classViewPeriods&&Object.keys(xn.classViewPeriods).length>0&&console.log("Class view periods:",xn.classViewPeriods),console.log("🎯 === END SUMMARY ===")}function wB(t,e){const r=sl(t,e),n=be(()=>{var d;return(d=r.currentUser.value)==null?void 0:d.uid});n.value&&bB(n.value,"case_manager");const s=be(()=>{if(!n.value)return[];const d=r.visibleStudents.value;console.log("🔵 CM visibleStudents: Starting with",d.length,"base students");const f=e.currentFilters.providerView;console.log("🔵 CM visibleStudents: Provider view:",f);let p;return f==="service_provider"?p=d.filter(m=>{var y,C,P,k,w,S,_,b;const g=t.getSchedule(m);if(console.log(`🔍 SP DEBUG: Checking student ${(C=(y=m.app)==null?void 0:y.studentData)==null?void 0:C.firstName}`),console.log("🔍 SP DEBUG: Raw schedule:",g),console.log("🔍 SP DEBUG: Looking for userId:",n.value),!g)return console.log("🔍 SP DEBUG: No schedule found"),!1;let v=!1,E=!1;Object.entries(g).forEach(([T,I])=>{var D;console.log(`🔍 SP DEBUG: Period ${T}:`,I),typeof I=="string"?I===n.value&&(v=!0,console.log(`✅ Found as teacher in ${T}`)):typeof I=="object"&&I!==null&&(I.teacherId===n.value&&(v=!0,console.log(`✅ Found as teacherId in ${T}`)),(I.coTeachingCaseManager||((D=I.coTeaching)==null?void 0:D.caseManagerId))===n.value&&(E=!0,console.log(`✅ Found as co-teaching CM in ${T}`)))});const x=v||E;return console.log(`🔍 SP DEBUG: Final result for ${(k=(P=m.app)==null?void 0:P.studentData)==null?void 0:k.firstName}:`,{isTeacher:v,isCoTeachingCM:E,hasAccess:x}),console.log(x?`✅ SP mode: User has access to ${(S=(w=m.app)==null?void 0:w.studentData)==null?void 0:S.firstName} (teacher=${v}, coTeachingCM=${E})`:`❌ SP mode: User does NOT have access to ${(b=(_=m.app)==null?void 0:_.studentData)==null?void 0:b.firstName}`),x}):f==="case_manager"?p=d.filter(m=>t.getCaseManagerId(m)===n.value):p=d.filter(m=>{var C,P;const g=t.getCaseManagerId(m)===n.value,v=t.getSchedule(m);let E=!1,x=!1;v&&Object.entries(v).forEach(([k,w])=>{var S;typeof w=="string"?w===n.value&&(E=!0):typeof w=="object"&&w!==null&&(w.teacherId===n.value&&(E=!0),(w.coTeachingCaseManager||((S=w.coTeaching)==null?void 0:S.caseManagerId))===n.value&&(x=!0))});const y=g||E||x;return y&&console.log(`✅ All mode: User has access to ${(P=(C=m.app)==null?void 0:C.studentData)==null?void 0:P.firstName}: CM=${g}, Teacher=${E}, CoTeachingCM=${x}`),y}),console.log("🟢 CM visibleStudents: Final count:",p.length),console.log("🟢 CM visibleStudents: Student names:",p.map(m=>{var g,v,E,x;return`${(v=(g=m.app)==null?void 0:g.studentData)==null?void 0:v.firstName} ${(x=(E=m.app)==null?void 0:E.studentData)==null?void 0:x.lastName}`}).slice(0,5),"..."),SB(f,p.length,p.map(m=>{var g,v,E,x;return`${(v=(g=m.app)==null?void 0:g.studentData)==null?void 0:v.firstName} ${(x=(E=m.app)==null?void 0:E.studentData)==null?void 0:x.lastName}`})),AB(),p}),i=be(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{}),a=be(()=>n.value?r.getProviderViewStudents(s.value,n.value,"case_manager"):[]),o=be(()=>n.value?r.getProviderViewStudents(s.value,n.value,"service_provider").filter(d=>t.getCaseManagerId(d)!==n.value):[]),l=be(()=>{const d={instruction:[],assessment:[],speech:[],ot:[],mh:[]};return s.value.forEach(f=>{var m,g,v,E,x;(g=(m=f.app)==null?void 0:m.accommodations)!=null&&g.instruction&&d.instruction.push(f),(E=(v=f.app)==null?void 0:v.accommodations)!=null&&E.assessment&&d.assessment.push(f);const p=((x=f.app)==null?void 0:x.providers)||{};p.speechId&&d.speech.push(f),p.otId&&d.ot.push(f),p.mhId&&d.mh.push(f)}),d}),c=be(()=>{const d=new Date,f=30*24*60*60*1e3,p={reviewDue:[],reevalDue:[],meetingScheduled:[]};return s.value.forEach(m=>{var x,y,C,P,k,w;const g=new Date((y=(x=m.app)==null?void 0:x.dates)==null?void 0:y.reviewDate),v=new Date((P=(C=m.app)==null?void 0:C.dates)==null?void 0:P.reevalDate),E=new Date((w=(k=m.app)==null?void 0:k.dates)==null?void 0:w.meetingDate);g&&g-d<f&&p.reviewDue.push(m),v&&v-d<f&&p.reevalDue.push(m),E&&E-d<f&&p.meetingScheduled.push(m)}),p});return{...r,visibleStudents:s,studentsByPeriod:i,managedStudents:a,serviceStudents:o,groupStudentsByService:l,groupStudentsByUpcomingDates:c,setViewMode:d=>{d==="class"&&(e.currentFilters.providerView="service_provider"),e.currentFilters.viewMode=d,e.applyFilters()},showProviderView:!0,providerViewOptions:be(()=>[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}])}}function CB(t,e){const r=sl(t,e),n=be(()=>{var l;return(l=r.currentUser.value)==null?void 0:l.uid}),s=be(()=>{var l;return(l=r.currentUser.value)==null?void 0:l.role}),i=be(()=>{const l=s.value;return l==="sped_chair"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_all",label:"*"}]:l==="administrator_504_CM"?[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}]:[]});Ut(i,l=>{const c=s.value;let u="";c==="administrator_504_CM"?u="iep_504_all":c==="sped_chair"&&(u="all");const d=l.map(f=>f.value);!d.includes(e.currentFilters.providerView)&&d.includes(u)&&(e.currentFilters.providerView=u,e.applyFilters())},{immediate:!0});const a=be(()=>{if(!n.value)return[];const l=r.visibleStudents.value,c=e.currentFilters.providerView,u=s.value;switch(c){case"case_manager":return r.getProviderViewStudents(l,n.value,"case_manager");case"service_provider":return r.getProviderViewStudents(l,n.value,"service_provider");case"all":return l.filter(d=>{const f=t.getCaseManagerId(d)===n.value,p=t.getSchedule(d),m=p?Object.values(p).some(g=>{var v;return typeof g=="string"?g===n.value:g&&typeof g=="object"?g.teacherId===n.value||((v=g.coTeaching)==null?void 0:v.caseManagerId)===n.value:!1}):!1;return f||m});case"iep_all":return u==="sped_chair"?l.filter(d=>ct(d,"plan")==="IEP"):[];case"iep_504_all":return u==="administrator_504_CM"?l.filter(d=>{const f=ct(d,"plan");return f==="IEP"||f==="504"}):[];default:return console.warn(`Unknown provider view: ${c}`),[]}}),o=be(()=>n.value?r.groupStudentsByPeriod(a.value,n.value):{});return{...r,visibleStudents:a,studentsByPeriod:o,providerViewOptions:i,showProviderView:!0}}function IB(t,e){const r=sl(t,e),n=be(()=>{var p;return(p=r.currentUser.value)==null?void 0:p.uid}),s=be(()=>n.value?t.students.value.filter(g=>{const v=t.getSchedule(g);return v?Object.values(v).some(x=>{var y;return typeof x=="string"?x===n.value:x&&typeof x=="object"?x.teacherId===n.value||((y=x.coTeaching)==null?void 0:y.caseManagerId)===n.value:!1}):!1}):[]),i=be(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{}),a=be(()=>{const p={instruction:[],assessment:[]};return s.value.forEach(m=>{var g,v,E,x;(v=(g=m.app)==null?void 0:g.accommodations)!=null&&v.instruction&&p.instruction.push(m),(x=(E=m.app)==null?void 0:E.accommodations)!=null&&x.assessment&&p.assessment.push(m)}),p}),o=be(()=>{const p={};return s.value.forEach(m=>{var v;const g=((v=m.app)==null?void 0:v.providers)||{};Object.entries(g).forEach(([E,x])=>{x&&(p[x]||(p[x]={provider:t.getUserName(x),providerType:E,students:[]}),p[x].students.push(m))})}),p});return{...r,visibleStudents:s,studentsByPeriod:i,studentsByAccommodation:a,studentsByServiceProvider:o,canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!0,canViewDates:!1,canEditStudents:!1,showProviderView:!1,providerViewOptions:be(()=>[])}}function kB(t,e){const r=sl(t,e),n=be(()=>{var a;return(a=r.currentUser.value)==null?void 0:a.uid}),s=be(()=>n.value?r.getProviderViewStudents(r.visibleStudents.value,n.value,"service_provider"):[]),i=be(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{});return{...r,visibleStudents:s,studentsByPeriod:i,showProviderView:!1,providerViewOptions:be(()=>[])}}function DB(t,e){const r=sl(t,e),n=be(()=>{var p;return(p=r.currentUser.value)==null?void 0:p.uid}),s=be(()=>n.value?r.visibleStudents.value||[]:[]),i=be(()=>{if(!n.value)return[];const p=t.aideAssignment.value[n.value];if(!(p!=null&&p.directAssignment))return[];const m=Array.isArray(p.directAssignment)?p.directAssignment:[p.directAssignment];return s.value.filter(g=>m.includes(g.id))}),a=be(()=>{if(!n.value)return{};const p=t.aideAssignment.value[n.value];if(!(p!=null&&p.classAssignment))return{};const m={};return s.value.forEach(g=>{const{periods:v}=r.standardizeScheduleAccess(t.getSchedule(g),n.value);Object.entries(v).forEach(([E,x])=>{const y=p.classAssignment[E];if(!y)return;(Array.isArray(y)?y:[y]).includes(x.teacherId)&&(m[E]||(m[E]={teacher:x.teacherName,students:[]}),m[E].students.push(g))})}),m}),o=be(()=>{const p={instruction:[],assessment:[]};return s.value.forEach(m=>{var g,v,E,x;(v=(g=m.app)==null?void 0:g.accommodations)!=null&&v.instruction&&p.instruction.push(m),(x=(E=m.app)==null?void 0:E.accommodations)!=null&&x.assessment&&p.assessment.push(m)}),p});return{...r,visibleStudents:s,directAssignments:i,classAssignments:a,studentsByAccommodation:o,canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!1,canViewDates:!1,canEditStudents:!1,showProviderView:!1,providerViewOptions:be(()=>[])}}function PB(t,e){return uv(t,e)}function FB(t,e){const r=sl(t,e),n=be(()=>{var o;return(o=r.currentUser.value)==null?void 0:o.uid}),s=be(()=>[{value:"case_manager",label:"CM"},{value:"iep_504_all",label:"*"}]);Ut(s,o=>{const l="case_manager";o.map(u=>u.value).includes(e.currentFilters.providerView)||(e.currentFilters.providerView=l,e.applyFilters())},{immediate:!0});const i=be(()=>{if(!n.value)return[];const o=r.visibleStudents.value;switch(e.currentFilters.providerView){case"case_manager":return r.getProviderViewStudents(o,n.value,"case_manager");case"iep_504_all":return o.filter(c=>{const u=ct(c,"plan");return u==="IEP"||u==="504"});default:return[]}}),a=be(()=>n.value?r.groupStudentsByPeriod(i.value,n.value):{});return{...r,visibleStudents:i,studentsByPeriod:a,providerViewOptions:s,showProviderView:!0}}function RB(t,e){const{currentUser:r}=t;dx();const n=be(()=>{var p;return((p=r.value)==null?void 0:p.role)||"guest"}),s=be(()=>{switch(n.value){case"admin":return uv(t,e);case"case_manager":return wB(t,e);case"sped_chair":return CB(t,e);case"administrator_504_CM":return FB(t,e);case"teacher":return IB(t,e);case"service_provider":return kB(t,e);case"paraeducator":return DB(t,e);case"administrator":return PB(t,e);default:return uv(t,e)}}),i=be(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","sped_chair"].includes(p)}),a=be(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["case_manager","administrator_504_CM"].includes(p)}),o=be(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(p)}),l=be(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","administrator","administrator_504_CM"].includes(p)}),c=be(()=>{var m;const p=(m=r.value)==null?void 0:m.role;return["admin","administrator","sped_chair"].includes(p)}),u=be(()=>!0),d=be(()=>!0),f=be(()=>!0);return{...s.value,currentRole:n,canEditAllStudents:i,canEditOwnStudents:a,canViewAllStudents:o,canManageUsers:l,canManageAides:c,canAccessTesting:u,canAccessTestingPartial:d,hasAnyTestingAccess:f}}function OB(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i,standardizeScheduleAccess:a,currentUser:o}=t,{filteredStudents:l,currentFilters:c,getCurrentFilters:u}=e,d=r||l,f=ue("list");Ut(()=>c.viewMode,x=>{f.value=x||"list"});const p=be(()=>d.value.filter(x=>{var y,C,P,k;return((C=(y=x.app)==null?void 0:y.flags)==null?void 0:C.flag2)||((k=(P=x.app)==null?void 0:P.flags)==null?void 0:k.separateSetting)||x.separateSetting||x.flag2||!1})),m=be(()=>{var w,S;const x={};if(f.value!=="class")return x;const y=(w=o.value)==null?void 0:w.uid;if(!y)return console.log("🔴 studentsByClass: No current user ID"),x;console.log("🔵 studentsByClass: Current user ID:",y);const C=(S=t.currentUser.value)==null?void 0:S.role;let P;C==="case_manager"?(P=t.students.value,console.log("🔵 studentsByClass: Case manager - using raw database students:",P.length)):(P=d.value,console.log("🔵 studentsByClass: Other role - using provider-filtered students:",P.length));const k=u();return k.paraeducator&&k.paraeducator,P.forEach(_=>{var T,I;const b=i(_)||{};console.log(`🕵️ studentsByClass full schedule for ${(I=(T=_.app)==null?void 0:T.studentData)==null?void 0:I.firstName}:`,b),Object.entries(b).forEach(([D,O])=>{var B,W,K;let R,F;if(typeof O=="string")R=O;else if(O&&typeof O=="object")R=O.teacherId,F=(B=O.coTeaching)==null?void 0:B.caseManagerId,O.coTeaching&&console.log(`🕵️ studentsByClass coTeaching data for ${(K=(W=_.app)==null?void 0:W.studentData)==null?void 0:K.firstName} in period ${D}:`,O.coTeaching);else return;let N=!1;const V=u(),L=V.teacher&&V.teacher!=="all",z=V.paraeducator&&V.paraeducator!=="all";if(C==="paraeducator"){const ee=n.value[y];ee!=null&&ee.classAssignment&&ee.classAssignment[D]&&(N=(Array.isArray(ee.classAssignment[D])?ee.classAssignment[D]:[ee.classAssignment[D]]).includes(R))}else if(["admin","administrator"].includes(C))if(L)N=R===V.teacher||F===V.teacher;else if(z){const ee=n.value[V.paraeducator];ee!=null&&ee.classAssignment&&ee.classAssignment[D]&&(N=(Array.isArray(ee.classAssignment[D])?ee.classAssignment[D]:[ee.classAssignment[D]]).includes(R))}else N=!0;else N=R===y||F===y;!N||(x[D]||(x[D]=[]),x[D].some(ee=>ee.id===_.id))||x[D].push(_)})}),console.log("🟢 studentsByClass: Final groups:",Object.keys(x).map(_=>`Period ${_}: ${x[_].length} students`)),TB(x),Object.keys(x).forEach(_=>{x[_].length===0&&delete x[_]}),Object.keys(x).sort((_,b)=>{const T=parseInt(_.replace(/\D/g,"")),I=parseInt(b.replace(/\D/g,""));return T-I}).reduce((_,b)=>(_[b]=x[b],_),{})}),g=be(()=>{var _,b;const x=u(),y=(_=t.currentUser.value)==null?void 0:_.role,C=(b=t.currentUser.value)==null?void 0:b.uid;let P=null;if(y==="paraeducator")P=C;else{if(!(x.paraeducator&&x.paraeducator!=="all"))return[];P=x.paraeducator}if(!P)return[];const k=n.value[P];if(!k||!k.directAssignment)return console.log("🔍 directAssignmentStudents: No aide data or direct assignment for",P),[];const w=Array.isArray(k.directAssignment)?k.directAssignment:[k.directAssignment];console.log("🔍 directAssignmentStudents: Direct student IDs:",w),console.log("🔍 directAssignmentStudents: Available students:",d.value.length);const S=d.value.filter(T=>w.includes(T.id));return console.log("🔍 directAssignmentStudents: Found direct assignment students:",S.length),S}),v=be(()=>{const x={};return d.value.forEach(y=>{const C=s(y);C&&(x[C]||(x[C]=[]),x[C].push(y))}),x});return{currentViewMode:f,studentsByClass:m,directAssignmentStudents:g,studentsByCaseManager:v,testingViewStudents:p,setViewMode:x=>{f.value=x,c.viewMode=x}}}function NB(t){const{router:e,fetchData:r}=t,n=ue(null),s=ue(null),i=ue(!1),a=ue(!1),o=ue(!1),l=ue(null),c=C=>{n.value=C},u=C=>{s.value=C},d=C=>{l.value=C,o.value=!0},f=()=>{console.log("Teacher feedback form sent successfully")},p=()=>{a.value=!1,r()},m=()=>{console.log("Student saved"),r()},g=()=>{e.push("/admin")},v=()=>{e.push("/testing")},E=()=>{e.push("/aide-schedule")},x=async C=>{switch(C){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":g();break;case"testing":v();break;case"aide-schedule":E();break;case"logout":await y();break}},y=async()=>{try{const{useAuthStore:C}=await Oo(async()=>{const{useAuthStore:k}=await Promise.resolve().then(()=>bL);return{useAuthStore:k}},void 0);await C().logout(),e.push("/login")}catch(C){console.error("Logout failed:",C)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:d,handleFormSent:f,handleStudentAdded:p,handleStudentSaved:m,navigateToAdmin:g,navigateToTesting:v,navigateToAideSchedule:E,handleNavAction:x,handleLogout:y}}const MB={class:"student-nav-menu"},LB=["title"],BB={class:"nav-content"},UB={class:"nav-section"},VB={class:"nav-buttons"},$B={key:0,class:"nav-section"},jB={class:"nav-buttons"},HB={key:1,class:"nav-section"},GB={class:"nav-buttons"},WB={class:"nav-section"},zB={class:"user-info"},KB={class:"user-details"},qB={key:0,class:"user-role"},XB={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=t,n=e,s=be(()=>{var u;const c=(u=r.currentUser)==null?void 0:u.role;return c!=="paraeducator"&&c!=="teacher"}),i=ue(!1);function a(){i.value=!i.value}function o(){i.value=!1}function l(c){n("action",c),o()}return(c,u)=>{var d,f,p,m;return U(),j("div",MB,[h("button",{onClick:a,class:et(["hamburger-btn",{active:i.value}]),title:i.value?"Close Menu":"Open Menu"},u[7]||(u[7]=[h("span",{class:"hamburger-line"},null,-1),h("span",{class:"hamburger-line"},null,-1),h("span",{class:"hamburger-line"},null,-1)]),10,LB),i.value?(U(),j("div",{key:0,class:"nav-overlay",onClick:o})):Ae("",!0),h("div",{class:et(["nav-panel",{open:i.value}])},[h("div",{class:"nav-header"},[u[8]||(u[8]=h("h3",null,"Student Management",-1)),h("button",{onClick:o,class:"close-btn"},"×")]),h("div",BB,[h("div",UB,[u[12]||(u[12]=h("h4",null,"Actions",-1)),h("div",VB,[s.value?(U(),j("button",{key:0,onClick:u[0]||(u[0]=g=>l("add-student")),class:"nav-btn primary"},u[9]||(u[9]=[h("span",null,"➕",-1),Ne(" Add Student ")]))):Ae("",!0),h("button",{onClick:u[1]||(u[1]=g=>l("export")),class:"nav-btn"},u[10]||(u[10]=[h("span",null,"📊",-1),Ne(" Export ")])),h("button",{onClick:u[2]||(u[2]=g=>l("print")),class:"nav-btn print-btn"},u[11]||(u[11]=[h("span",null,"🖨️",-1),Ne(" Print ")]))])]),t.isAdmin?(U(),j("div",$B,[u[15]||(u[15]=h("h4",null,"Admin",-1)),h("div",jB,[h("button",{onClick:u[3]||(u[3]=g=>l("admin")),class:"nav-btn"},u[13]||(u[13]=[h("span",null,"⚙️",-1),Ne(" Admin Panel ")])),h("button",{onClick:u[4]||(u[4]=g=>l("testing")),class:"nav-btn"},u[14]||(u[14]=[h("span",null,"🧪",-1),Ne(" Testing ")]))])])):Ae("",!0),((d=t.currentUser)==null?void 0:d.role)==="paraeducator"?(U(),j("div",HB,[u[17]||(u[17]=h("h4",null,"Schedule",-1)),h("div",GB,[h("button",{onClick:u[5]||(u[5]=g=>l("aide-schedule")),class:"nav-btn"},u[16]||(u[16]=[h("span",null,"📅",-1),Ne(" My Schedule ")]))])])):Ae("",!0),h("div",WB,[u[19]||(u[19]=h("h4",null,"User",-1)),h("div",zB,[h("div",KB,[h("strong",null,te(((f=t.currentUser)==null?void 0:f.name)||((p=t.currentUser)==null?void 0:p.email)||"User"),1),(m=t.currentUser)!=null&&m.role?(U(),j("span",qB,"("+te(t.currentUser.role)+")",1)):Ae("",!0)]),h("button",{onClick:u[6]||(u[6]=g=>l("logout")),class:"nav-btn danger"},u[18]||(u[18]=[h("span",null,"🚪",-1),Ne(" Logout ")]))])])])],2)])}}},YB=yt(XB,[["__scopeId","data-v-11a16ca2"]]);function QB(t){const{appSettings:e,loadAppSettings:r,loading:n,error:s}=ha(),{getLabel:i}=zd();jt(async()=>{try{console.log("StudentTable: Loading app settings..."),await r(),console.log("StudentTable: App settings loaded successfully")}catch(T){console.error("StudentTable: Error loading app settings:",T)}});const a=T=>{const I=t.userMap[T];return I&&(I.name||I.email)||T},o=T=>{const I=t.userMap[T];return I?I.initials?I.initials:I.name?I.name.split(" ").map(O=>O[0]).join("").toUpperCase():I.email?I.email[0].toUpperCase():"?":"?"},l=T=>{const I=t.userMap[T];if(!I)return T;if(I.name){const D=I.name.trim().split(" ");return D.length===1?D[0]:`${D[0][0]}. ${D.slice(1).join(" ")}`}return I.email?I.email[0].toUpperCase():T},c=T=>T?new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",u=T=>{if(!T)return"";const I=new Date,D=new Date(T),O=Math.ceil((D-I)/(1e3*60*60*24));return O<=0?"flag-critical":O<=7?"flag-high":O<=14?"flag-medium":O<=21?"flag-mid":O<=28?"flag-low":O<=35?"flag-prep":O<=60?"flag-prep-reeval":""},d=T=>u(ct(T,"meetingDate")),f=T=>u(ct(T,"reviewDate")),p=T=>u(ct(T,"reevalDate")),m=T=>{var I,D;return((D=(I=T.app)==null?void 0:I.studentData)==null?void 0:D.caseManagerId)||T.caseManagerId||T.casemanager_id},g=(T,I)=>{var D,O;return((O=(D=T.app)==null?void 0:D.flags)==null?void 0:O[I])||T[I]||!1},v=T=>{var I;return((I=T.app)==null?void 0:I.flags)&&Object.values(T.app.flags).some(Boolean)||T.flag1||T.flag2},E=(T,I)=>{var O,R,F,N,V;console.log("🔍 getDocumentUrl called with:",{studentId:T.id,type:I,appDocuments:(O=T.app)==null?void 0:O.documents,directUrl:T[`${I}Url`],underscoreUrl:T[`${I}_url`],appLevel:(R=T.app)==null?void 0:R[I]});const D=((N=(F=T.app)==null?void 0:F.documents)==null?void 0:N[I])||((V=T.app)==null?void 0:V[I])||T[I]||T[`${I}_url`]||null;return console.log("🔍 getDocumentUrl result:",D),D&&D.includes(".enc")&&console.log("🔍 Secure filename detected:",D),D},x=T=>{var I,D,O,R,F;if(T.schedule)return T.schedule;if((D=(I=T.app)==null?void 0:I.schedule)!=null&&D.periods)return T.app.schedule.periods;if((R=(O=T.aeries)==null?void 0:O.schedule)!=null&&R.periods)return T.aeries.schedule.periods;if((F=T.aeries)!=null&&F.schedule){const N={};return Object.entries(T.aeries.schedule).forEach(([V,L])=>{if(L&&L.teacherId){const z=parseInt(V.replace("period","")),H=i(z);let B=L.teacherId;if(t.userMap){let W=Object.values(t.userMap).find(K=>K.aeriesId===L.teacherId||K.aeriesId===parseInt(L.teacherId)||K.id===L.teacherId);if(W||(W=Object.values(t.userMap).find(K=>{var ee,me,le,he;return((ee=K.aeriesId)==null?void 0:ee.toString())===((me=L.teacherId)==null?void 0:me.toString())||((le=K.id)==null?void 0:le.toString())===((he=L.teacherId)==null?void 0:he.toString())})),W&&W.name){const K=W.name.split(" ");if(K.length>=2){const ee=K[0],me=K[K.length-1];B=`${ee.charAt(0)}. ${me}`}else B=W.name}else console.warn(`Teacher not found for ID: ${L.teacherId}`)}N[H]=B}}),Object.keys(N).length>0?N:null}return null},y=T=>{const I=[],D=x(T);return D&&Object.entries(D).forEach(([O,R])=>{if(R&&typeof R=="object"&&R.coTeaching){const F=R.coTeaching.subject;F&&I.push(`Co-teach: ${F}`)}}),I};return{appSettings:e,appSettingsLoading:n,appSettingsError:s,getUserName:a,getUserInitials:o,getUserInitialLastName:l,formatDate:c,getMeetingUrgencyClass:d,getReviewUrgencyClass:f,getReevalUrgencyClass:p,getCaseManagerId:m,getFlagValue:g,hasFlags:v,getDocumentUrl:E,getSchedule:x,getClassServices:T=>{var R,F;const I=((F=(R=T.app)==null?void 0:R.schedule)==null?void 0:F.classServices)||T.services||[],D=y(T),O=[...I,...D];if(n.value)return Array.isArray(O)?O.filter(N=>typeof N=="string"&&N.includes(":")):[];if(s.value)return Array.isArray(O)?O.filter(N=>typeof N=="string"&&N.includes(":")):[];if(e.value&&e.value.classServices){const N=e.value.classServices.filter(V=>V.enabledSubcategories&&V.enabledSubcategories.length>0).map(V=>V.name);return Array.isArray(O)?O.filter(V=>{if(typeof V!="string"||!V.includes(":"))return!1;const L=V.split(":")[0];return N.includes(L)}):[]}return Array.isArray(O)?O.filter(N=>typeof N=="string"&&N.includes(":")):[]},getOtherServices:T=>{var D,O;const I=((O=(D=T.app)==null?void 0:D.schedule)==null?void 0:O.otherServices)||T.other_services||[];return Array.isArray(I)?I.filter(R=>!!R):[]},getCoTeachingServices:y,hasServiceProviders:T=>{var R;const I=((R=T.app)==null?void 0:R.providers)||{},D=Object.values(I).some(Boolean);if(n.value||s.value){const F=T.speechId||T.speech_id||T.mhId||T.mh_id||T.otId||T.ot_id||T.ptId||T.pt_id||T.scId||T.sc_id||T.trId||T.tr_id||T.audId||T.aud_id||T.viId||T.vi_id||T.atId||T.at_id||T.dhhId||T.dhh_id||T.omId||T.om_id||T.bisId||T.bis_id||T.hnId||T.hn_id||T.swId||T.sw_id;return D||F}let O=!1;if(e.value&&e.value.serviceProviders){const F=e.value.serviceProviders,N={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};O=F.some(V=>{const L=N[V];return T[L]||T[L.replace("Id","_id")]})}else O=T.speechId||T.speech_id||T.mhId||T.mh_id||T.otId||T.ot_id||T.ptId||T.pt_id||T.scId||T.sc_id||T.trId||T.tr_id||T.audId||T.aud_id||T.viId||T.vi_id||T.atId||T.at_id||T.dhhId||T.dhh_id||T.omId||T.om_id||T.bisId||T.bis_id||T.hnId||T.hn_id||T.swId||T.sw_id;return D||O},getServiceProviderId:(T,I)=>{var O,R;return((R=(O=T.app)==null?void 0:O.providers)==null?void 0:R[I])||T[I]||T[I.replace("Id","_id")]||null},getProviderFieldName:T=>({SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"})[T]||`${T.toLowerCase()}Id`,isDirectAssignment:T=>{if(!t.currentUser||t.currentUser.role!=="paraeducator")return!1;const I=t.currentUser.uid;let D=t.aideSchedule[I];if(!D){const O=Object.entries(t.userMap).find(([R,F])=>F.uid===I||F.email===t.currentUser.email);if(O){const[R]=O;D=t.aideSchedule[R]}}return(D==null?void 0:D.directAssignment)===T},formatListFromText:EB,getFlagClass:T=>{const I=T.toLowerCase();return I.includes("critical")?"flag-critical":I.includes("high")?"flag-high":I.includes("medium")?"flag-medium":I.includes("mid")?"flag-mid":I.includes("low")?"flag-low":I.includes("prep")?"flag-prep":"flag-low"}}}let Df;const JB=new Uint8Array(16);function ZB(){if(!Df&&(Df=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Df))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Df(JB)}const gn=[];for(let t=0;t<256;++t)gn.push((t+256).toString(16).slice(1));function e7(t,e=0){return gn[t[e+0]]+gn[t[e+1]]+gn[t[e+2]]+gn[t[e+3]]+"-"+gn[t[e+4]]+gn[t[e+5]]+"-"+gn[t[e+6]]+gn[t[e+7]]+"-"+gn[t[e+8]]+gn[t[e+9]]+"-"+gn[t[e+10]]+gn[t[e+11]]+gn[t[e+12]]+gn[t[e+13]]+gn[t[e+14]]+gn[t[e+15]]}const t7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ab={randomUUID:t7};function r7(t,e,r){if(ab.randomUUID&&!t)return ab.randomUUID();t=t||{};const n=t.random||(t.rng||ZB)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,e7(n)}var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var hI={exports:{}};function n7(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sm={exports:{}};const s7={},a7=Object.freeze(Object.defineProperty({__proto__:null,default:s7},Symbol.toStringTag,{value:"Module"})),i7=mx(a7);var ib;function Kt(){return ib||(ib=1,function(t,e){(function(r,n){t.exports=n()})(Lt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Lt<"u"&&Lt.crypto&&(i=Lt.crypto),!i&&typeof n7=="function")try{i=i7}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function x(){}return function(y){var C;return x.prototype=y,C=new x,x.prototype=null,C}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(x){var y=o(this);return x&&y.mixIn(x),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var y in x)x.hasOwnProperty(y)&&(this[y]=x[y]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(x,y){x=this.words=x||[],y!=s?this.sigBytes=y:this.sigBytes=x.length*4},toString:function(x){return(x||p).stringify(this)},concat:function(x){var y=this.words,C=x.words,P=this.sigBytes,k=x.sigBytes;if(this.clamp(),P%4)for(var w=0;w<k;w++){var S=C[w>>>2]>>>24-w%4*8&255;y[P+w>>>2]|=S<<24-(P+w)%4*8}else for(var _=0;_<k;_+=4)y[P+_>>>2]=C[_>>>2];return this.sigBytes+=k,this},clamp:function(){var x=this.words,y=this.sigBytes;x[y>>>2]&=4294967295<<32-y%4*8,x.length=n.ceil(y/4)},clone:function(){var x=u.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var y=[],C=0;C<x;C+=4)y.push(a());return new d.init(y,x)}}),f=l.enc={},p=f.Hex={stringify:function(x){for(var y=x.words,C=x.sigBytes,P=[],k=0;k<C;k++){var w=y[k>>>2]>>>24-k%4*8&255;P.push((w>>>4).toString(16)),P.push((w&15).toString(16))}return P.join("")},parse:function(x){for(var y=x.length,C=[],P=0;P<y;P+=2)C[P>>>3]|=parseInt(x.substr(P,2),16)<<24-P%8*4;return new d.init(C,y/2)}},m=f.Latin1={stringify:function(x){for(var y=x.words,C=x.sigBytes,P=[],k=0;k<C;k++){var w=y[k>>>2]>>>24-k%4*8&255;P.push(String.fromCharCode(w))}return P.join("")},parse:function(x){for(var y=x.length,C=[],P=0;P<y;P++)C[P>>>2]|=(x.charCodeAt(P)&255)<<24-P%4*8;return new d.init(C,y)}},g=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return m.parse(unescape(encodeURIComponent(x)))}},v=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=g.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var y,C=this._data,P=C.words,k=C.sigBytes,w=this.blockSize,S=w*4,_=k/S;x?_=n.ceil(_):_=n.max((_|0)-this._minBufferSize,0);var b=_*w,T=n.min(b*4,k);if(b){for(var I=0;I<b;I+=w)this._doProcessBlock(P,I);y=P.splice(0,b),C.sigBytes-=T}return new d.init(y,T)},clone:function(){var x=u.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});c.Hasher=v.extend({cfg:u.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var y=this._doFinalize();return y},blockSize:16,_createHelper:function(x){return function(y,C){return new x.init(C).finalize(y)}},_createHmacHelper:function(x){return function(y,C){return new E.HMAC.init(x,C).finalize(y)}}});var E=l.algo={};return l}(Math);return r})}(sm)),sm.exports}var am={exports:{}},ob;function gp(){return ob||(ob=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var p=c[f];d.push(p.high),d.push(p.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),r})}(am)),am.exports}var im={exports:{}},lb;function o7(){return lb||(lb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(im)),im.exports}var om={exports:{}},cb;function l7(){return cb||(cb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var p=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(p))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var p=o(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(p))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=o(l.charCodeAt(d)<<16-d%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(om)),om.exports}var lm={exports:{}},ub;function al(){return ub||(ub=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],p=0;p<u;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,E=m<<16|g<<8|v,x=0;x<4&&p+x*.75<u;x++)f.push(d.charAt(E>>>6*(3-x)&63));var y=d.charAt(64);if(y)for(;f.length%4;)f.push(y);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var p=u.charAt(64);if(p){var m=l.indexOf(p);m!==-1&&(c=m)}return o(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var d=[],f=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,g=u[l.charCodeAt(p)]>>>6-p%4*2,v=m|g;d[f>>>2]|=v<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64})}(lm)),lm.exports}var cm={exports:{}},db;function c7(){return db||(db=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var p=[],m=0;m<d;m+=3)for(var g=u[m>>>2]>>>24-m%4*8&255,v=u[m+1>>>2]>>>24-(m+1)%4*8&255,E=u[m+2>>>2]>>>24-(m+2)%4*8&255,x=g<<16|v<<8|E,y=0;y<4&&m+y*.75<d;y++)p.push(f.charAt(x>>>6*(3-y)&63));var C=f.charAt(64);if(C)for(;p.length%4;)p.push(C);return p.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<d.length;p++)f[d.charCodeAt(p)]=p}var m=d.charAt(64);if(m){var g=l.indexOf(m);g!==-1&&(u=g)}return o(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var d=[],f=0,p=0;p<c;p++)if(p%4){var m=u[l.charCodeAt(p-1)]<<p%4*2,g=u[l.charCodeAt(p)]>>>6-p%4*2,v=m|g;d[f>>>2]|=v<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64url})}(cm)),cm.exports}var um={exports:{}},fb;function il(){return fb||(fb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var g=0;g<64;g++)c[g]=n.abs(n.sin(g+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,v){for(var E=0;E<16;E++){var x=v+E,y=g[x];g[x]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var C=this._hash.words,P=g[v+0],k=g[v+1],w=g[v+2],S=g[v+3],_=g[v+4],b=g[v+5],T=g[v+6],I=g[v+7],D=g[v+8],O=g[v+9],R=g[v+10],F=g[v+11],N=g[v+12],V=g[v+13],L=g[v+14],z=g[v+15],H=C[0],B=C[1],W=C[2],K=C[3];H=d(H,B,W,K,P,7,c[0]),K=d(K,H,B,W,k,12,c[1]),W=d(W,K,H,B,w,17,c[2]),B=d(B,W,K,H,S,22,c[3]),H=d(H,B,W,K,_,7,c[4]),K=d(K,H,B,W,b,12,c[5]),W=d(W,K,H,B,T,17,c[6]),B=d(B,W,K,H,I,22,c[7]),H=d(H,B,W,K,D,7,c[8]),K=d(K,H,B,W,O,12,c[9]),W=d(W,K,H,B,R,17,c[10]),B=d(B,W,K,H,F,22,c[11]),H=d(H,B,W,K,N,7,c[12]),K=d(K,H,B,W,V,12,c[13]),W=d(W,K,H,B,L,17,c[14]),B=d(B,W,K,H,z,22,c[15]),H=f(H,B,W,K,k,5,c[16]),K=f(K,H,B,W,T,9,c[17]),W=f(W,K,H,B,F,14,c[18]),B=f(B,W,K,H,P,20,c[19]),H=f(H,B,W,K,b,5,c[20]),K=f(K,H,B,W,R,9,c[21]),W=f(W,K,H,B,z,14,c[22]),B=f(B,W,K,H,_,20,c[23]),H=f(H,B,W,K,O,5,c[24]),K=f(K,H,B,W,L,9,c[25]),W=f(W,K,H,B,S,14,c[26]),B=f(B,W,K,H,D,20,c[27]),H=f(H,B,W,K,V,5,c[28]),K=f(K,H,B,W,w,9,c[29]),W=f(W,K,H,B,I,14,c[30]),B=f(B,W,K,H,N,20,c[31]),H=p(H,B,W,K,b,4,c[32]),K=p(K,H,B,W,D,11,c[33]),W=p(W,K,H,B,F,16,c[34]),B=p(B,W,K,H,L,23,c[35]),H=p(H,B,W,K,k,4,c[36]),K=p(K,H,B,W,_,11,c[37]),W=p(W,K,H,B,I,16,c[38]),B=p(B,W,K,H,R,23,c[39]),H=p(H,B,W,K,V,4,c[40]),K=p(K,H,B,W,P,11,c[41]),W=p(W,K,H,B,S,16,c[42]),B=p(B,W,K,H,T,23,c[43]),H=p(H,B,W,K,O,4,c[44]),K=p(K,H,B,W,N,11,c[45]),W=p(W,K,H,B,z,16,c[46]),B=p(B,W,K,H,w,23,c[47]),H=m(H,B,W,K,P,6,c[48]),K=m(K,H,B,W,I,10,c[49]),W=m(W,K,H,B,L,15,c[50]),B=m(B,W,K,H,b,21,c[51]),H=m(H,B,W,K,N,6,c[52]),K=m(K,H,B,W,S,10,c[53]),W=m(W,K,H,B,R,15,c[54]),B=m(B,W,K,H,k,21,c[55]),H=m(H,B,W,K,D,6,c[56]),K=m(K,H,B,W,z,10,c[57]),W=m(W,K,H,B,T,15,c[58]),B=m(B,W,K,H,V,21,c[59]),H=m(H,B,W,K,_,6,c[60]),K=m(K,H,B,W,F,10,c[61]),W=m(W,K,H,B,w,15,c[62]),B=m(B,W,K,H,O,21,c[63]),C[0]=C[0]+H|0,C[1]=C[1]+B|0,C[2]=C[2]+W|0,C[3]=C[3]+K|0},_doFinalize:function(){var g=this._data,v=g.words,E=this._nDataBytes*8,x=g.sigBytes*8;v[x>>>5]|=128<<24-x%32;var y=n.floor(E/4294967296),C=E;v[(x+64>>>9<<4)+15]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,v[(x+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,g.sigBytes=(v.length+1)*4,this._process();for(var P=this._hash,k=P.words,w=0;w<4;w++){var S=k[w];k[w]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return P},clone:function(){var g=o.clone.call(this);return g._hash=this._hash.clone(),g}});function d(g,v,E,x,y,C,P){var k=g+(v&E|~v&x)+y+P;return(k<<C|k>>>32-C)+v}function f(g,v,E,x,y,C,P){var k=g+(v&x|E&~x)+y+P;return(k<<C|k>>>32-C)+v}function p(g,v,E,x,y,C,P){var k=g+(v^E^x)+y+P;return(k<<C|k>>>32-C)+v}function m(g,v,E,x,y,C,P){var k=g+(E^(v|~x))+y+P;return(k<<C|k>>>32-C)+v}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(um)),um.exports}var dm={exports:{}},hb;function pI(){return hb||(hb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,p=f[0],m=f[1],g=f[2],v=f[3],E=f[4],x=0;x<80;x++){if(x<16)l[x]=u[d+x]|0;else{var y=l[x-3]^l[x-8]^l[x-14]^l[x-16];l[x]=y<<1|y>>>31}var C=(p<<5|p>>>27)+E+l[x];x<20?C+=(m&g|~m&v)+1518500249:x<40?C+=(m^g^v)+1859775393:x<60?C+=(m&g|m&v|g&v)-1894007588:C+=(m^g^v)-899497514,E=v,v=g,g=m<<30|m>>>2,m=p,p=C}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+g|0,f[3]=f[3]+v|0,f[4]=f[4]+E|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,p=u.sigBytes*8;return d[p>>>5]|=128<<24-p%32,d[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(p+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(dm)),dm.exports}var fm={exports:{}},pb;function gx(){return pb||(pb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function p(E){for(var x=n.sqrt(E),y=2;y<=x;y++)if(!(E%y))return!1;return!0}function m(E){return(E-(E|0))*4294967296|0}for(var g=2,v=0;v<64;)p(g)&&(v<8&&(c[v]=m(n.pow(g,1/2))),u[v]=m(n.pow(g,1/3)),v++),g++})();var d=[],f=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(p,m){for(var g=this._hash.words,v=g[0],E=g[1],x=g[2],y=g[3],C=g[4],P=g[5],k=g[6],w=g[7],S=0;S<64;S++){if(S<16)d[S]=p[m+S]|0;else{var _=d[S-15],b=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,T=d[S-2],I=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;d[S]=b+d[S-7]+I+d[S-16]}var D=C&P^~C&k,O=v&E^v&x^E&x,R=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),F=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),N=w+F+D+u[S]+d[S],V=R+O;w=k,k=P,P=C,C=y+N|0,y=x,x=E,E=v,v=N+V|0}g[0]=g[0]+v|0,g[1]=g[1]+E|0,g[2]=g[2]+x|0,g[3]=g[3]+y|0,g[4]=g[4]+C|0,g[5]=g[5]+P|0,g[6]=g[6]+k|0,g[7]=g[7]+w|0},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;return m[v>>>5]|=128<<24-v%32,m[(v+64>>>9<<4)+14]=n.floor(g/4294967296),m[(v+64>>>9<<4)+15]=g,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=o._createHelper(f),s.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256})}(fm)),fm.exports}var hm={exports:{}},mb;function u7(){return mb||(mb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),gx())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(hm)),hm.exports}var pm={exports:{}},gb;function mI(){return gb||(gb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),gp())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=u()})();var p=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(m,g){for(var v=this._hash.words,E=v[0],x=v[1],y=v[2],C=v[3],P=v[4],k=v[5],w=v[6],S=v[7],_=E.high,b=E.low,T=x.high,I=x.low,D=y.high,O=y.low,R=C.high,F=C.low,N=P.high,V=P.low,L=k.high,z=k.low,H=w.high,B=w.low,W=S.high,K=S.low,ee=_,me=b,le=T,he=I,Z=D,Q=O,ve=R,X=F,q=N,Y=V,ge=L,re=z,ne=H,ae=B,xe=W,Ee=K,we=0;we<80;we++){var Te,Ge,Ie=f[we];if(we<16)Ge=Ie.high=m[g+we*2]|0,Te=Ie.low=m[g+we*2+1]|0;else{var Ue=f[we-15],Le=Ue.high,We=Ue.low,ze=(Le>>>1|We<<31)^(Le>>>8|We<<24)^Le>>>7,_e=(We>>>1|Le<<31)^(We>>>8|Le<<24)^(We>>>7|Le<<25),ye=f[we-2],Se=ye.high,Re=ye.low,He=(Se>>>19|Re<<13)^(Se<<3|Re>>>29)^Se>>>6,it=(Re>>>19|Se<<13)^(Re<<3|Se>>>29)^(Re>>>6|Se<<26),mt=f[we-7],vt=mt.high,Mt=mt.low,dt=f[we-16],lt=dt.high,pt=dt.low;Te=_e+Mt,Ge=ze+vt+(Te>>>0<_e>>>0?1:0),Te=Te+it,Ge=Ge+He+(Te>>>0<it>>>0?1:0),Te=Te+pt,Ge=Ge+lt+(Te>>>0<pt>>>0?1:0),Ie.high=Ge,Ie.low=Te}var Ct=q&ge^~q&ne,Rt=Y&re^~Y&ae,Er=ee&le^ee&Z^le&Z,Yn=me&he^me&Q^he&Q,Ei=(ee>>>28|me<<4)^(ee<<30|me>>>2)^(ee<<25|me>>>7),ls=(me>>>28|ee<<4)^(me<<30|ee>>>2)^(me<<25|ee>>>7),hl=(q>>>14|Y<<18)^(q>>>18|Y<<14)^(q<<23|Y>>>9),Ba=(Y>>>14|q<<18)^(Y>>>18|q<<14)^(Y<<23|q>>>9),fo=d[we],Jr=fo.high,ho=fo.low,Cr=Ee+Ba,kn=xe+hl+(Cr>>>0<Ee>>>0?1:0),Cr=Cr+Rt,kn=kn+Ct+(Cr>>>0<Rt>>>0?1:0),Cr=Cr+ho,kn=kn+Jr+(Cr>>>0<ho>>>0?1:0),Cr=Cr+Te,kn=kn+Ge+(Cr>>>0<Te>>>0?1:0),pl=ls+Yn,Mc=Ei+Er+(pl>>>0<ls>>>0?1:0);xe=ne,Ee=ae,ne=ge,ae=re,ge=q,re=Y,Y=X+Cr|0,q=ve+kn+(Y>>>0<X>>>0?1:0)|0,ve=Z,X=Q,Z=le,Q=he,le=ee,he=me,me=Cr+pl|0,ee=kn+Mc+(me>>>0<Cr>>>0?1:0)|0}b=E.low=b+me,E.high=_+ee+(b>>>0<me>>>0?1:0),I=x.low=I+he,x.high=T+le+(I>>>0<he>>>0?1:0),O=y.low=O+Q,y.high=D+Z+(O>>>0<Q>>>0?1:0),F=C.low=F+X,C.high=R+ve+(F>>>0<X>>>0?1:0),V=P.low=V+Y,P.high=N+q+(V>>>0<Y>>>0?1:0),z=k.low=z+re,k.high=L+ge+(z>>>0<re>>>0?1:0),B=w.low=B+ae,w.high=H+ne+(B>>>0<ae>>>0?1:0),K=S.low=K+Ee,S.high=W+xe+(K>>>0<Ee>>>0?1:0)},_doFinalize:function(){var m=this._data,g=m.words,v=this._nDataBytes*8,E=m.sigBytes*8;g[E>>>5]|=128<<24-E%32,g[(E+128>>>10<<5)+30]=Math.floor(v/4294967296),g[(E+128>>>10<<5)+31]=v,m.sigBytes=g.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var m=i.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(pm)),pm.exports}var mm={exports:{}},vb;function d7(){return vb||(vb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),gp(),mI())})(Lt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(mm)),mm.exports}var gm={exports:{}},xb;function f7(){return xb||(xb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),gp())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,d=[],f=[],p=[];(function(){for(var v=1,E=0,x=0;x<24;x++){d[v+5*E]=(x+1)*(x+2)/2%64;var y=E%5,C=(2*v+3*E)%5;v=y,E=C}for(var v=0;v<5;v++)for(var E=0;E<5;E++)f[v+5*E]=E+(2*v+3*E)%5*5;for(var P=1,k=0;k<24;k++){for(var w=0,S=0,_=0;_<7;_++){if(P&1){var b=(1<<_)-1;b<32?S^=1<<b:w^=1<<b-32}P&128?P=P<<1^113:P<<=1}p[k]=c.create(w,S)}})();var m=[];(function(){for(var v=0;v<25;v++)m[v]=c.create()})();var g=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],E=0;E<25;E++)v[E]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,E){for(var x=this._state,y=this.blockSize/2,C=0;C<y;C++){var P=v[E+2*C],k=v[E+2*C+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var w=x[C];w.high^=k,w.low^=P}for(var S=0;S<24;S++){for(var _=0;_<5;_++){for(var b=0,T=0,I=0;I<5;I++){var w=x[_+5*I];b^=w.high,T^=w.low}var D=m[_];D.high=b,D.low=T}for(var _=0;_<5;_++)for(var O=m[(_+4)%5],R=m[(_+1)%5],F=R.high,N=R.low,b=O.high^(F<<1|N>>>31),T=O.low^(N<<1|F>>>31),I=0;I<5;I++){var w=x[_+5*I];w.high^=b,w.low^=T}for(var V=1;V<25;V++){var b,T,w=x[V],L=w.high,z=w.low,H=d[V];H<32?(b=L<<H|z>>>32-H,T=z<<H|L>>>32-H):(b=z<<H-32|L>>>64-H,T=L<<H-32|z>>>64-H);var B=m[f[V]];B.high=b,B.low=T}var W=m[0],K=x[0];W.high=K.high,W.low=K.low;for(var _=0;_<5;_++)for(var I=0;I<5;I++){var V=_+5*I,w=x[V],ee=m[V],me=m[(_+1)%5+5*I],le=m[(_+2)%5+5*I];w.high=ee.high^~me.high&le.high,w.low=ee.low^~me.low&le.low}var w=x[0],he=p[S];w.high^=he.high,w.low^=he.low}},_doFinalize:function(){var v=this._data,E=v.words;this._nDataBytes*8;var x=v.sigBytes*8,y=this.blockSize*32;E[x>>>5]|=1<<24-x%32,E[(n.ceil((x+1)/y)*y>>>5)-1]|=128,v.sigBytes=E.length*4,this._process();for(var C=this._state,P=this.cfg.outputLength/8,k=P/8,w=[],S=0;S<k;S++){var _=C[S],b=_.high,T=_.low;b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,w.push(T),w.push(b)}return new a.init(w,P)},clone:function(){for(var v=o.clone.call(this),E=v._state=this._state.slice(0),x=0;x<25;x++)E[x]=E[x].clone();return v}});s.SHA3=o._createHelper(g),s.HmacSHA3=o._createHmacHelper(g)}(Math),r.SHA3})}(gm)),gm.exports}var vm={exports:{}},yb;function h7(){return yb||(yb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),m=a.create([1352829926,1548603684,1836072691,2053994217,0]),g=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,w){for(var S=0;S<16;S++){var _=w+S,b=k[_];k[_]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var T=this._hash.words,I=p.words,D=m.words,O=c.words,R=u.words,F=d.words,N=f.words,V,L,z,H,B,W,K,ee,me,le;W=V=T[0],K=L=T[1],ee=z=T[2],me=H=T[3],le=B=T[4];for(var he,S=0;S<80;S+=1)he=V+k[w+O[S]]|0,S<16?he+=v(L,z,H)+I[0]:S<32?he+=E(L,z,H)+I[1]:S<48?he+=x(L,z,H)+I[2]:S<64?he+=y(L,z,H)+I[3]:he+=C(L,z,H)+I[4],he=he|0,he=P(he,F[S]),he=he+B|0,V=B,B=H,H=P(z,10),z=L,L=he,he=W+k[w+R[S]]|0,S<16?he+=C(K,ee,me)+D[0]:S<32?he+=y(K,ee,me)+D[1]:S<48?he+=x(K,ee,me)+D[2]:S<64?he+=E(K,ee,me)+D[3]:he+=v(K,ee,me)+D[4],he=he|0,he=P(he,N[S]),he=he+le|0,W=le,le=me,me=P(ee,10),ee=K,K=he;he=T[1]+z+me|0,T[1]=T[2]+H+le|0,T[2]=T[3]+B+W|0,T[3]=T[4]+V+K|0,T[4]=T[0]+L+ee|0,T[0]=he},_doFinalize:function(){var k=this._data,w=k.words,S=this._nDataBytes*8,_=k.sigBytes*8;w[_>>>5]|=128<<24-_%32,w[(_+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,k.sigBytes=(w.length+1)*4,this._process();for(var b=this._hash,T=b.words,I=0;I<5;I++){var D=T[I];T[I]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return b},clone:function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k}});function v(k,w,S){return k^w^S}function E(k,w,S){return k&w|~k&S}function x(k,w,S){return(k|~w)^S}function y(k,w,S){return k&S|w&~S}function C(k,w,S){return k^(w|~S)}function P(k,w){return k<<w|k>>>32-w}s.RIPEMD160=o._createHelper(g),s.HmacRIPEMD160=o._createHmacHelper(g)}(),r.RIPEMD160})}(vm)),vm.exports}var xm={exports:{}},Eb;function vx(){return Eb||(Eb=1,function(t,e){(function(r,n){t.exports=n(Kt())})(Lt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),m=this._iKey=u.clone(),g=p.words,v=m.words,E=0;E<d;E++)g[E]^=1549556828,v[E]^=909522486;p.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(xm)),xm.exports}var ym={exports:{}},_b;function p7(){return _b||(_b=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),gx(),vx())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var p=this.cfg,m=c.create(p.hasher,d),g=a.create(),v=a.create([1]),E=g.words,x=v.words,y=p.keySize,C=p.iterations;E.length<y;){var P=m.update(f).finalize(v);m.reset();for(var k=P.words,w=k.length,S=P,_=1;_<C;_++){S=m.finalize(S),m.reset();for(var b=S.words,T=0;T<w;T++)k[T]^=b[T]}g.concat(P),x[0]++}return g.sigBytes=y*4,g}});n.PBKDF2=function(d,f,p){return u.create(p).compute(d,f)}}(),r.PBKDF2})}(ym)),ym.exports}var Em={exports:{}},bb;function co(){return bb||(bb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pI(),vx())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,p=this.cfg,m=p.hasher.create(),g=a.create(),v=g.words,E=p.keySize,x=p.iterations;v.length<E;){f&&m.update(f),f=m.update(u).finalize(d),m.reset();for(var y=1;y<x;y++)f=m.finalize(f),m.reset();g.concat(f)}return g.sigBytes=E*4,g}});n.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),r.EvpKDF})}(Em)),Em.exports}var _m={exports:{}},Sb;function pn(){return Sb||(Sb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),co())})(Lt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,d=s.algo,f=d.EvpKDF,p=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(b,T){return this.create(this._ENC_XFORM_MODE,b,T)},createDecryptor:function(b,T){return this.create(this._DEC_XFORM_MODE,b,T)},init:function(b,T,I){this.cfg=this.cfg.extend(I),this._xformMode=b,this._key=T,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(b){return this._append(b),this._process()},finalize:function(b){b&&this._append(b);var T=this._doFinalize();return T},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function b(T){return typeof T=="string"?_:k}return function(T){return{encrypt:function(I,D,O){return b(D).encrypt(T,I,D,O)},decrypt:function(I,D,O){return b(D).decrypt(T,I,D,O)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var b=this._process(!0);return b},blockSize:1});var m=s.mode={},g=i.BlockCipherMode=a.extend({createEncryptor:function(b,T){return this.Encryptor.create(b,T)},createDecryptor:function(b,T){return this.Decryptor.create(b,T)},init:function(b,T){this._cipher=b,this._iv=T}}),v=m.CBC=function(){var b=g.extend();b.Encryptor=b.extend({processBlock:function(I,D){var O=this._cipher,R=O.blockSize;T.call(this,I,D,R),O.encryptBlock(I,D),this._prevBlock=I.slice(D,D+R)}}),b.Decryptor=b.extend({processBlock:function(I,D){var O=this._cipher,R=O.blockSize,F=I.slice(D,D+R);O.decryptBlock(I,D),T.call(this,I,D,R),this._prevBlock=F}});function T(I,D,O){var R,F=this._iv;F?(R=F,this._iv=n):R=this._prevBlock;for(var N=0;N<O;N++)I[D+N]^=R[N]}return b}(),E=s.pad={},x=E.Pkcs7={pad:function(b,T){for(var I=T*4,D=I-b.sigBytes%I,O=D<<24|D<<16|D<<8|D,R=[],F=0;F<D;F+=4)R.push(O);var N=o.create(R,D);b.concat(N)},unpad:function(b){var T=b.words[b.sigBytes-1>>>2]&255;b.sigBytes-=T}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:v,padding:x}),reset:function(){var b;p.reset.call(this);var T=this.cfg,I=T.iv,D=T.mode;this._xformMode==this._ENC_XFORM_MODE?b=D.createEncryptor:(b=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==b?this._mode.init(this,I&&I.words):(this._mode=b.call(D,this,I&&I.words),this._mode.__creator=b)},_doProcessBlock:function(b,T){this._mode.processBlock(b,T)},_doFinalize:function(){var b,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),b=this._process(!0)):(b=this._process(!0),T.unpad(b)),b},blockSize:128/32});var y=i.CipherParams=a.extend({init:function(b){this.mixIn(b)},toString:function(b){return(b||this.formatter).stringify(this)}}),C=s.format={},P=C.OpenSSL={stringify:function(b){var T,I=b.ciphertext,D=b.salt;return D?T=o.create([1398893684,1701076831]).concat(D).concat(I):T=I,T.toString(u)},parse:function(b){var T,I=u.parse(b),D=I.words;return D[0]==1398893684&&D[1]==1701076831&&(T=o.create(D.slice(2,4)),D.splice(0,4),I.sigBytes-=16),y.create({ciphertext:I,salt:T})}},k=i.SerializableCipher=a.extend({cfg:a.extend({format:P}),encrypt:function(b,T,I,D){D=this.cfg.extend(D);var O=b.createEncryptor(I,D),R=O.finalize(T),F=O.cfg;return y.create({ciphertext:R,key:I,iv:F.iv,algorithm:b,mode:F.mode,padding:F.padding,blockSize:b.blockSize,formatter:D.format})},decrypt:function(b,T,I,D){D=this.cfg.extend(D),T=this._parse(T,D.format);var O=b.createDecryptor(I,D).finalize(T.ciphertext);return O},_parse:function(b,T){return typeof b=="string"?T.parse(b,this):b}}),w=s.kdf={},S=w.OpenSSL={execute:function(b,T,I,D,O){if(D||(D=o.random(64/8)),O)var R=f.create({keySize:T+I,hasher:O}).compute(b,D);else var R=f.create({keySize:T+I}).compute(b,D);var F=o.create(R.words.slice(T),I*4);return R.sigBytes=T*4,y.create({key:R,iv:F,salt:D})}},_=i.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:S}),encrypt:function(b,T,I,D){D=this.cfg.extend(D);var O=D.kdf.execute(I,b.keySize,b.ivSize,D.salt,D.hasher);D.iv=O.iv;var R=k.encrypt.call(this,b,T,O.key,D);return R.mixIn(O),R},decrypt:function(b,T,I,D){D=this.cfg.extend(D),T=this._parse(T,D.format);var O=D.kdf.execute(I,b.keySize,b.ivSize,T.salt,D.hasher);D.iv=O.iv;var R=k.decrypt.call(this,b,T,O.key,D);return R}})}()})}(_m)),_m.exports}var bm={exports:{}},Tb;function m7(){return Tb||(Tb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<o;d++)i[a+d]^=c[d]}return n}(),r.mode.CFB})}(bm)),bm.exports}var Sm={exports:{}},Ab;function g7(){return Ab||(Ab=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);o.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)i[a+f]^=d[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(Sm)),Sm.exports}var Tm={exports:{}},wb;function v7(){return wb||(wb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),i(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<u;m++)o[l+m]^=p[m]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Tm)),Tm.exports}var Am={exports:{}},Cb;function x7(){return Cb||(Cb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var d=0;d<l;d++)i[a+d]^=u[d]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Am)),Am.exports}var wm={exports:{}},Ib;function y7(){return Ib||(Ib=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(wm)),wm.exports}var Cm={exports:{}},kb;function E7(){return kb||(kb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Cm)),Cm.exports}var Im={exports:{}},Db;function _7(){return Db||(Db=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Im)),Im.exports}var km={exports:{}},Pb;function b7(){return Pb||(Pb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(km)),km.exports}var Dm={exports:{}},Fb;function S7(){return Fb||(Fb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Dm)),Dm.exports}var Pm={exports:{}},Rb;function T7(){return Rb||(Rb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Pm)),Pm.exports}var Fm={exports:{}},Ob;function A7(){return Ob||(Ob=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),pn())})(Lt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Fm)),Fm.exports}var Rm={exports:{}},Nb;function w7(){return Nb||(Nb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),al(),il(),co(),pn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],d=[],f=[],p=[],m=[],g=[],v=[];(function(){for(var y=[],C=0;C<256;C++)C<128?y[C]=C<<1:y[C]=C<<1^283;for(var P=0,k=0,C=0;C<256;C++){var w=k^k<<1^k<<2^k<<3^k<<4;w=w>>>8^w&255^99,o[P]=w,l[w]=P;var S=y[P],_=y[S],b=y[_],T=y[w]*257^w*16843008;c[P]=T<<24|T>>>8,u[P]=T<<16|T>>>16,d[P]=T<<8|T>>>24,f[P]=T;var T=b*16843009^_*65537^S*257^P*16843008;p[w]=T<<24|T>>>8,m[w]=T<<16|T>>>16,g[w]=T<<8|T>>>24,v[w]=T,P?(P=S^y[y[y[b^S]]],k^=y[y[k]]):P=k=1}})();var E=[0,1,2,4,8,16,32,64,128,27,54],x=a.AES=i.extend({_doReset:function(){var y;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var C=this._keyPriorReset=this._key,P=C.words,k=C.sigBytes/4,w=this._nRounds=k+6,S=(w+1)*4,_=this._keySchedule=[],b=0;b<S;b++)b<k?_[b]=P[b]:(y=_[b-1],b%k?k>6&&b%k==4&&(y=o[y>>>24]<<24|o[y>>>16&255]<<16|o[y>>>8&255]<<8|o[y&255]):(y=y<<8|y>>>24,y=o[y>>>24]<<24|o[y>>>16&255]<<16|o[y>>>8&255]<<8|o[y&255],y^=E[b/k|0]<<24),_[b]=_[b-k]^y);for(var T=this._invKeySchedule=[],I=0;I<S;I++){var b=S-I;if(I%4)var y=_[b];else var y=_[b-4];I<4||b<=4?T[I]=y:T[I]=p[o[y>>>24]]^m[o[y>>>16&255]]^g[o[y>>>8&255]]^v[o[y&255]]}}},encryptBlock:function(y,C){this._doCryptBlock(y,C,this._keySchedule,c,u,d,f,o)},decryptBlock:function(y,C){var P=y[C+1];y[C+1]=y[C+3],y[C+3]=P,this._doCryptBlock(y,C,this._invKeySchedule,p,m,g,v,l);var P=y[C+1];y[C+1]=y[C+3],y[C+3]=P},_doCryptBlock:function(y,C,P,k,w,S,_,b){for(var T=this._nRounds,I=y[C]^P[0],D=y[C+1]^P[1],O=y[C+2]^P[2],R=y[C+3]^P[3],F=4,N=1;N<T;N++){var V=k[I>>>24]^w[D>>>16&255]^S[O>>>8&255]^_[R&255]^P[F++],L=k[D>>>24]^w[O>>>16&255]^S[R>>>8&255]^_[I&255]^P[F++],z=k[O>>>24]^w[R>>>16&255]^S[I>>>8&255]^_[D&255]^P[F++],H=k[R>>>24]^w[I>>>16&255]^S[D>>>8&255]^_[O&255]^P[F++];I=V,D=L,O=z,R=H}var V=(b[I>>>24]<<24|b[D>>>16&255]<<16|b[O>>>8&255]<<8|b[R&255])^P[F++],L=(b[D>>>24]<<24|b[O>>>16&255]<<16|b[R>>>8&255]<<8|b[I&255])^P[F++],z=(b[O>>>24]<<24|b[R>>>16&255]<<16|b[I>>>8&255]<<8|b[D&255])^P[F++],H=(b[R>>>24]<<24|b[I>>>16&255]<<16|b[D>>>8&255]<<8|b[O&255])^P[F++];y[C]=V,y[C+1]=L,y[C+2]=z,y[C+3]=H},keySize:256/32});n.AES=i._createHelper(x)}(),r.AES})}(Rm)),Rm.exports}var Om={exports:{}},Mb;function C7(){return Mb||(Mb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),al(),il(),co(),pn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=a.extend({_doReset:function(){for(var E=this._key,x=E.words,y=[],C=0;C<56;C++){var P=l[C]-1;y[C]=x[P>>>5]>>>31-P%32&1}for(var k=this._subKeys=[],w=0;w<16;w++){for(var S=k[w]=[],_=u[w],C=0;C<24;C++)S[C/6|0]|=y[(c[C]-1+_)%28]<<31-C%6,S[4+(C/6|0)]|=y[28+(c[C+24]-1+_)%28]<<31-C%6;S[0]=S[0]<<1|S[0]>>>31;for(var C=1;C<7;C++)S[C]=S[C]>>>(C-1)*4+3;S[7]=S[7]<<5|S[7]>>>27}for(var b=this._invSubKeys=[],C=0;C<16;C++)b[C]=k[15-C]},encryptBlock:function(E,x){this._doCryptBlock(E,x,this._subKeys)},decryptBlock:function(E,x){this._doCryptBlock(E,x,this._invSubKeys)},_doCryptBlock:function(E,x,y){this._lBlock=E[x],this._rBlock=E[x+1],m.call(this,4,252645135),m.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),m.call(this,1,1431655765);for(var C=0;C<16;C++){for(var P=y[C],k=this._lBlock,w=this._rBlock,S=0,_=0;_<8;_++)S|=d[_][((w^P[_])&f[_])>>>0];this._lBlock=w,this._rBlock=k^S}var b=this._lBlock;this._lBlock=this._rBlock,this._rBlock=b,m.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),E[x]=this._lBlock,E[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(E,x){var y=(this._lBlock>>>E^this._rBlock)&x;this._rBlock^=y,this._lBlock^=y<<E}function g(E,x){var y=(this._rBlock>>>E^this._lBlock)&x;this._lBlock^=y,this._rBlock^=y<<E}n.DES=a._createHelper(p);var v=o.TripleDES=a.extend({_doReset:function(){var E=this._key,x=E.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var y=x.slice(0,2),C=x.length<4?x.slice(0,2):x.slice(2,4),P=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=p.createEncryptor(i.create(y)),this._des2=p.createEncryptor(i.create(C)),this._des3=p.createEncryptor(i.create(P))},encryptBlock:function(E,x){this._des1.encryptBlock(E,x),this._des2.decryptBlock(E,x),this._des3.encryptBlock(E,x)},decryptBlock:function(E,x){this._des3.decryptBlock(E,x),this._des2.encryptBlock(E,x),this._des1.decryptBlock(E,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(v)}(),r.TripleDES})}(Om)),Om.exports}var Nm={exports:{}},Lb;function I7(){return Lb||(Lb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),al(),il(),co(),pn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,g=0;m<256;m++){var v=m%f,E=d[v>>>2]>>>24-v%4*8&255;g=(g+p[m]+E)%256;var x=p[m];p[m]=p[g],p[g]=x}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,p=0,m=0;m<4;m++){d=(d+1)%256,f=(f+u[d])%256;var g=u[d];u[d]=u[f],u[f]=g,p|=u[(u[d]+u[f])%256]<<24-m*8}return this._i=d,this._j=f,p}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(Nm)),Nm.exports}var Mm={exports:{}},Bb;function k7(){return Bb||(Bb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),al(),il(),co(),pn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],v=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)d.call(this);for(var m=0;m<8;m++)v[m]^=g[m+4&7];if(p){var E=p.words,x=E[0],y=E[1],C=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,k=C>>>16|P&4294901760,w=P<<16|C&65535;v[0]^=C,v[1]^=k,v[2]^=P,v[3]^=w,v[4]^=C,v[5]^=k,v[6]^=P,v[7]^=w;for(var m=0;m<4;m++)d.call(this)}},_doProcessBlock:function(f,p){var m=this._X;d.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,f[p+g]^=o[g]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var g=f[m]+p[m],v=g&65535,E=g>>>16,x=((v*v>>>17)+v*E>>>15)+E*E,y=((g&4294901760)*g|0)+((g&65535)*g|0);c[m]=x^y}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(Mm)),Mm.exports}var Lm={exports:{}},Ub;function D7(){return Ub||(Ub=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),al(),il(),co(),pn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)d.call(this);for(var v=0;v<8;v++)g[v]^=m[v+4&7];if(p){var E=p.words,x=E[0],y=E[1],C=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,P=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,k=C>>>16|P&4294901760,w=P<<16|C&65535;g[0]^=C,g[1]^=k,g[2]^=P,g[3]^=w,g[4]^=C,g[5]^=k,g[6]^=P,g[7]^=w;for(var v=0;v<4;v++)d.call(this)}},_doProcessBlock:function(f,p){var m=this._X;d.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var g=0;g<4;g++)o[g]=(o[g]<<8|o[g]>>>24)&16711935|(o[g]<<24|o[g]>>>8)&4278255360,f[p+g]^=o[g]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,p=this._C,m=0;m<8;m++)l[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<l[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<l[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<l[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<l[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<l[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<l[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<l[6]>>>0?1:0)|0,this._b=p[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var g=f[m]+p[m],v=g&65535,E=g>>>16,x=((v*v>>>17)+v*E>>>15)+E*E,y=((g&4294901760)*g|0)+((g&65535)*g|0);c[m]=x^y}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(Lm)),Lm.exports}var Bm={exports:{}},Vb;function P7(){return Vb||(Vb=1,function(t,e){(function(r,n,s){t.exports=n(Kt(),al(),il(),co(),pn())})(Lt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(v,E){let x=E>>24&255,y=E>>16&255,C=E>>8&255,P=E&255,k=v.sbox[0][x]+v.sbox[1][y];return k=k^v.sbox[2][C],k=k+v.sbox[3][P],k}function f(v,E,x){let y=E,C=x,P;for(let k=0;k<o;++k)y=y^v.pbox[k],C=d(v,y)^C,P=y,y=C,C=P;return P=y,y=C,C=P,C=C^v.pbox[o],y=y^v.pbox[o+1],{left:y,right:C}}function p(v,E,x){let y=E,C=x,P;for(let k=o+1;k>1;--k)y=y^v.pbox[k],C=d(v,y)^C,P=y,y=C,C=P;return P=y,y=C,C=P,C=C^v.pbox[1],y=y^v.pbox[0],{left:y,right:C}}function m(v,E,x){for(let w=0;w<4;w++){v.sbox[w]=[];for(let S=0;S<256;S++)v.sbox[w][S]=c[w][S]}let y=0;for(let w=0;w<o+2;w++)v.pbox[w]=l[w]^E[y],y++,y>=x&&(y=0);let C=0,P=0,k=0;for(let w=0;w<o+2;w+=2)k=f(v,C,P),C=k.left,P=k.right,v.pbox[w]=C,v.pbox[w+1]=P;for(let w=0;w<4;w++)for(let S=0;S<256;S+=2)k=f(v,C,P),C=k.left,P=k.right,v.sbox[w][S]=C,v.sbox[w][S+1]=P;return!0}var g=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,E=v.words,x=v.sigBytes/4;m(u,E,x)}},encryptBlock:function(v,E){var x=f(u,v[E],v[E+1]);v[E]=x.left,v[E+1]=x.right},decryptBlock:function(v,E){var x=p(u,v[E],v[E+1]);v[E]=x.left,v[E+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(g)}(),r.Blowfish})}(Bm)),Bm.exports}(function(t,e){(function(r,n,s){t.exports=n(Kt(),gp(),o7(),l7(),al(),c7(),il(),pI(),gx(),u7(),mI(),d7(),f7(),h7(),vx(),p7(),co(),pn(),m7(),g7(),v7(),x7(),y7(),E7(),_7(),b7(),S7(),T7(),A7(),w7(),C7(),I7(),k7(),D7(),P7())})(Lt,function(r){return r})})(hI);var F7=hI.exports;const Vi=fI(F7);class R7{constructor(){this.encryptionKey="your-dev-key-here"}async encryptAndUploadPdf(e,r){try{if(console.log("🔒 Starting PDF encryption for student:",r),console.log("📁 File details:",{name:e.name,size:e.size,type:e.type}),(!this.encryptionKey||this.encryptionKey==="your-dev-key-here")&&console.warn("⚠️ Using default encryption key - set VITE_PDF_ENCRYPTION_KEY in production"),!nr.currentUser)throw new Error("User not authenticated");if(console.log("👤 Current user:",nr.currentUser.uid),r){console.log("🔍 Checking student access for:",r);try{if(!(await sr(at(Ye,"students",r))).exists())throw new Error(`Student ${r} not found`);console.log("✅ Student document exists")}catch(l){throw console.error("❌ Student access check failed:",l),new Error(`Student access check failed: ${l.message}`)}}console.log("📖 Reading file as ArrayBuffer...");const n=await e.arrayBuffer();console.log("✅ ArrayBuffer read, size:",n.byteLength),console.log("🔄 Converting to Base64...");const s=btoa(new Uint8Array(n).reduce((l,c)=>l+String.fromCharCode(c),""));console.log("✅ Base64 conversion complete, length:",s.length),console.log("🔐 Encrypting content...");const i=Vi.AES.encrypt(s,this.encryptionKey).toString();console.log("✅ Encryption complete, length:",i.length);const a=`${r7()}.enc`;console.log("📝 Generated filename:",a),console.log("📤 Uploading to storage...");const o=$C(Q0,`students/${r}/${a}`);return console.log("📍 Storage path:",`students/${r}/${a}`),await VC(o,i),console.log("✅ Upload to storage successful"),console.log("💾 Storing metadata in Firestore..."),await tr(at(Ye,"pdfMetadata",a),{originalName:e.name,studentId:r,uploadedBy:nr.currentUser.uid,uploadedAt:sa(),accessCount:0,lastAccessed:null,encryptionVersion:"1.0",fileSize:e.size,mimeType:e.type}),console.log("✅ Metadata stored successfully"),a}catch(n){throw console.error("❌ PDF encryption failed:",n),console.error("❌ Error details:",{message:n.message,code:n.code,stack:n.stack}),new Error(`Failed to securely store PDF: ${n.message}`)}}async downloadAndDecryptPdf(e,r){try{if(!await this.verifyAccess(r))throw new Error("Access denied");const{auth:s}=await Oo(async()=>{const{auth:f}=await Promise.resolve().then(()=>XC);return{auth:f}},void 0),i=await s.currentUser.getIdToken(),a=`https://downloadstudentfile-zr6j2ycwuq-uc.a.run.app/downloadStudentFile?studentId=${r}&fileName=${e}`;console.log("🔗 Using proxy URL for secure download");const o=await fetch(a,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Failed to fetch file: ${o.status} ${o.statusText}`);const l=await o.text();console.log("✅ Downloaded encrypted content via proxy");const c=Vi.AES.decrypt(l,this.encryptionKey).toString(Vi.enc.Utf8),u=atob(c),d=new Blob([new Uint8Array(u.split("").map(f=>f.charCodeAt(0)))],{type:"application/pdf"});return console.log("✅ PDF decrypted and blob created"),d}catch(n){throw console.error("PDF decryption failed:",n),new Error("Failed to retrieve PDF")}}async verifyAccess(e){var r,n,s,i,a,o;try{const l=nr.currentUser;if(!l)return!1;const u=(await sr(at(Ye,"users",l.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager")return((s=(n=(r=(await sr(at(Ye,"students",e))).data())==null?void 0:r.app)==null?void 0:n.studentData)==null?void 0:s.caseManagerId)===l.uid;if(u.role==="teacher"){const f=((o=(a=(i=(await sr(at(Ye,"students",e))).data())==null?void 0:i.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(f).includes(l.uid)}return!1}catch(l){return console.error("Access verification failed:",l),!1}}async logAccess(e,r){try{await tr(at(Ye,"pdfAccessLogs",`${e}_${Date.now()}`),{fileId:e,studentId:r,userId:nr.currentUser.uid,userEmail:nr.currentUser.email,accessTime:sa(),userAgent:navigator.userAgent,accessType:"download"})}catch(n){console.error("Failed to log access:",n)}}async updateAccessMetadata(e){try{const r=at(Ye,"pdfMetadata",e),n=await sr(r);n.exists()&&await tr(r,{...n.data(),accessCount:(n.data().accessCount||0)+1,lastAccessed:sa()},{merge:!0})}catch(r){console.error("Failed to update access metadata:",r)}}async getFileAccessHistory(e){try{const r=lr(Ft(Ye,"pdfAccessLogs"),Nr("fileId","==",e),ln("accessTime","desc"));return(await Qt(r)).docs.map(s=>s.data())}catch(r){return console.error("Failed to fetch access history:",r),[]}}}const Um=new R7;function gI(){const t=ue(!1),e=ue(!1),r=ue(null);return{uploadPdf:async(a,o)=>{t.value=!0,r.value=null;try{if(a.type!=="application/pdf")throw new Error("Only PDF files are allowed");if(a.size>10*1024*1024)throw new Error("File size must be less than 10MB");return await Um.encryptAndUploadPdf(a,o)}catch(l){throw r.value=l.message,l}finally{t.value=!1}},downloadPdf:async(a,o,l)=>{e.value=!0,r.value=null;try{const c=await Um.downloadAndDecryptPdf(a,o),u=window.URL.createObjectURL(c),d=window.open(u,"_blank","noopener,noreferrer");setTimeout(()=>{window.URL.revokeObjectURL(u)},5e3)}catch(c){throw r.value=c.message,c}finally{e.value=!1}},getAccessHistory:async a=>{try{return await Um.getFileAccessHistory(a)}catch(o){return r.value=o.message,[]}},isUploading:t,isDownloading:e,error:r}}const O7={class:"docs-item"},N7={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0}},setup(t){const e=t,{downloadPdf:r}=gI(),n=async s=>{var i,a,o,l;try{if(!s){alert("File not found.");return}const c=((a=(i=e.student.app)==null?void 0:i.documents)==null?void 0:a.bipFileName)||((l=(o=e.student.app)==null?void 0:o.documents)==null?void 0:l.ataglanceFileName)||"document.pdf";await r(s,e.student.id,c)}catch(c){console.error("Error opening secure file:",c),alert("Error opening file. Please try again.")}};return(s,i)=>(U(),j("td",null,[h("div",O7,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(U(),j("a",{key:0,href:"#",onClick:i[0]||(i[0]=fn(a=>n(t.getDocumentUrl(t.student,"ataglancePdfUrl")),["prevent"]))}," At-A-Glance ")):Ae("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(U(),j("a",{key:1,href:"#",onClick:i[1]||(i[1]=fn(a=>n(t.getDocumentUrl(t.student,"bipPdfUrl")),["prevent"]))}," BIP ")):Ae("",!0),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")?(U(),j(Fe,{key:2},[Ne("—")],64)):Ae("",!0)])]))}},M7={class:"action-buttons"},L7=["title"],B7={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,n=be(()=>{var o,l,c;if(!((o=r.currentUser)!=null&&o.role))return!1;const i=r.currentUser.role;return i==="paraeducator"||i==="teacher"?!1:i==="case_manager"?((c=(l=r.student.app)==null?void 0:l.studentData)==null?void 0:c.caseManagerId)===r.currentUser.uid:["admin","administrator","sped_chair","administrator_504_CM","service_provider"].includes(i)});function s(i,a=!1){if(!(i!=null&&i.seconds))return"";const o=new Date(i.seconds*1e3);return a?o.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):o.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+" at "+o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}return(i,a)=>{var o,l,c;return U(),j("td",null,[h("div",M7,[n.value?(U(),j("button",{key:0,class:"edit-btn",onClick:a[0]||(a[0]=u=>i.$emit("edit",t.student.id)),title:"Edit Student"},"✏️")):Ae("",!0),h("button",{class:"email-btn",onClick:a[1]||(a[1]=u=>i.$emit("email",t.student.id)),title:"Email Student"},"✉️"),((o=t.currentUser)==null?void 0:o.role)==="case_manager"?(U(),j("button",{key:1,class:"teacher-feedback-btn",onClick:a[2]||(a[2]=u=>i.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},"📝")):Ae("",!0)]),(c=(l=t.student)==null?void 0:l.updatedAt)!=null&&c.seconds?(U(),j("div",{key:0,class:"updated-date",title:"Last Updated: "+s(t.student.updatedAt)},te(s(t.student.updatedAt,!0)),9,L7)):Ae("",!0)])}}},U7=yt(B7,[["__scopeId","data-v-16294252"]]),V7={key:0,class:"schedule-list"},$7={class:"period-assignment"},j7={class:"primary-line"},H7={class:"period-label"},G7={class:"primary-teacher"},W7={key:0,class:"coteaching-info"},z7=["title"],K7={key:1,class:"no-schedule"},q7={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){const e=r=>r&&typeof r=="object"&&r.coTeaching&&r.teacherId;return(r,n)=>(U(),j("td",null,[t.getSchedule(t.student)?(U(),j("div",V7,[h("ul",null,[(U(!0),j(Fe,null,je(t.getSchedule(t.student),(s,i)=>(U(),j("li",{key:i,class:"schedule-period"},[h("div",$7,[h("div",j7,[h("span",H7,te(i)+":",1),h("span",G7,te(t.getUserInitialLastName(s.teacherId||s)),1)]),e(s)?(U(),j("div",W7,[h("span",{class:"coteaching-indicator",title:`Co-teach ${s.coTeaching.subject}`},te(t.getUserInitialLastName(s.coTeaching.caseManagerId))+" (C"+te(s.coTeaching.subject.charAt(0))+") ",9,z7)])):Ae("",!0)])]))),128))])])):(U(),j("div",K7,"—"))]))}},X7={key:0,class:"services-section"},Y7={class:"services-container"},Q7={key:1,class:"services-section"},J7={class:"services-container"},Z7={key:0,class:"service-provider-item"},eU={key:0,class:"service-provider-item"},tU={key:1,class:"service-provider-item"},rU={key:2,class:"service-provider-item"},nU={key:3,class:"service-provider-item"},sU={key:4,class:"service-provider-item"},aU={key:5,class:"service-provider-item"},iU={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){return(e,r)=>(U(),j("td",null,[t.getClassServices(t.student).length>0||t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(U(),j(Fe,{key:0},[t.getClassServices(t.student).length>0?(U(),j("div",X7,[r[0]||(r[0]=h("strong",null,"Class Services:",-1)),h("div",Y7,[(U(!0),j(Fe,null,je(t.getClassServices(t.student),n=>(U(),j("span",{key:n,class:"service-item"},te(n),1))),128))])])):Ae("",!0),t.getOtherServices(t.student).length>0||t.hasServiceProviders(t.student)?(U(),j("div",Q7,[r[1]||(r[1]=h("strong",null,"Related Services:",-1)),h("div",J7,[(U(!0),j(Fe,null,je(t.getOtherServices(t.student),n=>(U(),j("span",{key:n,class:"service-item"},te(n),1))),128)),t.appSettings&&t.appSettings.value&&t.appSettings.value.serviceProviders?(U(!0),j(Fe,{key:0},je(t.appSettings.value.serviceProviders,n=>(U(),j(Fe,{key:n},[t.getServiceProviderId(t.student,t.getProviderFieldName(n))?(U(),j("span",Z7,te(n)+" ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,t.getProviderFieldName(n))))+") ",1)):Ae("",!0)],64))),128)):(U(),j(Fe,{key:1},[t.getServiceProviderId(t.student,"speechId")?(U(),j("span",eU,"SP ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,"speechId")))+")",1)):Ae("",!0),t.getServiceProviderId(t.student,"mhId")?(U(),j("span",tU,"MH ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,"mhId")))+")",1)):Ae("",!0),t.getServiceProviderId(t.student,"otId")?(U(),j("span",rU,"OT ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,"otId")))+")",1)):Ae("",!0),t.getServiceProviderId(t.student,"ptId")?(U(),j("span",nU,"PT ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,"ptId")))+")",1)):Ae("",!0),t.getServiceProviderId(t.student,"scId")?(U(),j("span",sU,"SC ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,"scId")))+")",1)):Ae("",!0),t.getServiceProviderId(t.student,"trId")?(U(),j("span",aU,"TR ("+te(t.getUserInitialLastName(t.getServiceProviderId(t.student,"trId")))+")",1)):Ae("",!0)],64))])])):Ae("",!0)],64)):(U(),j(Fe,{key:1},[Ne(" — ")],64))]))}},oU={key:1,class:"pill-list"},lU=["innerHTML"],cU={key:2},$b={__name:"AccommodationsCell",props:{student:{type:Object,required:!0},fieldName:{type:String,required:!0},flagType:{type:String,required:!0},flagText:{type:String,required:!0},flagClass:{type:String,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(U(),j("td",{class:et(["instruction-cell",{"with-flag":t.getFlagValue(t.student,t.flagType)}])},[t.getFlagValue(t.student,t.flagType)?(U(),j("div",{key:0,class:et(["flag-overlay",t.flagClass])},te(t.flagText),3)):Ae("",!0),oe(ct)(t.student,t.fieldName)?(U(),j("div",oU,[h("div",{innerHTML:t.formatListFromText(oe(ct)(t.student,t.fieldName))},null,8,lU)])):(U(),j("div",cU,"—"))],2))}},uU={class:"student-name"},dU={class:"std-info-subheading"},fU={key:0,class:"schedule-list"},hU={class:"period-assignment"},pU={class:"primary-line"},mU={class:"period-label"},gU={class:"primary-teacher"},vU={key:0,class:"coteaching-info"},xU=["title"],yU={key:1,class:"no-schedule"},EU={key:0,class:"flag-overlay flag-separate-setting"},_U={key:1,class:"bullet-list"},bU=["innerHTML"],SU={key:2},TU={class:"student-name"},AU=["title"],wU={class:"std-info-subheading"},CU={class:"student-dates print"},IU={key:0,class:"direct-assignment-badge"},Pf={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,getUserName:s,getUserInitialLastName:i,formatDate:a,getMeetingUrgencyClass:o,getReviewUrgencyClass:l,getReevalUrgencyClass:c,getCaseManagerId:u,getFlagValue:d,getDocumentUrl:f,getSchedule:p,getClassServices:m,getOtherServices:g,hasServiceProviders:v,getServiceProviderId:E,getProviderFieldName:x,isDirectAssignment:y,formatListFromText:C}=QB(r),P=k=>k&&typeof k=="object"&&k.coTeaching&&k.teacherId;return Ut(()=>r.student,k=>{var w,S,_,b,T,I,D;k&&Object.keys(k).length>0&&(form.schedule=((S=(w=k.app)==null?void 0:w.schedule)==null?void 0:S.periods)||k.schedule||((b=(_=k.aeries)==null?void 0:_.schedule)==null?void 0:b.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(T=r.student.aeries)==null?void 0:T.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(D=(I=r.student.app)==null?void 0:I.schedule)==null?void 0:D.periods))},{immediate:!0,deep:!0}),(k,w)=>(U(),j("table",{class:et(["students-table",{"testing-view":t.testingView}])},[h("thead",null,[h("tr",null,[t.testingView?(U(),j(Fe,{key:0},[w[0]||(w[0]=h("th",{class:"print"},"Student Info",-1)),w[1]||(w[1]=h("th",{class:"print"},"Schedule",-1)),w[2]||(w[2]=h("th",{class:"print"},"Assessment Accom.",-1))],64)):(U(),j(Fe,{key:1},[w[3]||(w[3]=h("th",{class:"print"},"Student Info",-1)),w[4]||(w[4]=h("th",{class:"print"},"Services",-1)),w[5]||(w[5]=h("th",{class:"print"},"Schedule",-1)),w[6]||(w[6]=h("th",{class:"print"},"Instruction Accom.",-1)),w[7]||(w[7]=h("th",{class:"print"},"Assessment Accom.",-1)),w[8]||(w[8]=h("th",{class:"print"},"Docs",-1)),w[9]||(w[9]=h("th",{class:"print"},"Actions",-1))],64))])]),h("tbody",null,[(U(!0),j(Fe,null,je(t.students,S=>{var _;return U(),j("tr",{key:S.id},[t.testingView?(U(),j(Fe,{key:0},[h("td",null,[h("div",uU,[h("strong",null,te(oe(ct)(S,"firstName"))+" "+te(oe(ct)(S,"lastName")),1)]),h("div",dU,[h("div",null,"Grd: "+te(oe(ct)(S,"grade"))+" | Prg: "+te(oe(ct)(S,"plan")),1),h("div",null,"CM: "+te(oe(s)(oe(u)(S))),1)])]),h("td",null,[oe(p)(S)?(U(),j("div",fU,[h("ul",null,[(U(!0),j(Fe,null,je(oe(p)(S),(b,T)=>(U(),j("li",{key:T,class:"schedule-period"},[h("div",hU,[h("div",pU,[h("span",mU,te(T)+":",1),h("span",gU,te(oe(i)(b.teacherId||b)),1)]),P(b)?(U(),j("div",vU,[h("span",{class:"coteaching-indicator",title:`Co-teach ${b.coTeaching.subject}`},te(oe(i)(b.coTeaching.caseManagerId))+" (C"+te(b.coTeaching.subject.charAt(0))+") ",9,xU)])):Ae("",!0)])]))),128))])])):(U(),j("div",yU,"—"))]),h("td",{class:et(["instruction-cell",{"with-flag":oe(d)(S,"flag2")}])},[oe(d)(S,"flag2")?(U(),j("div",EU,"Separate setting")):Ae("",!0),oe(ct)(S,"assessment")?(U(),j("div",_U,[h("div",{innerHTML:oe(C)(oe(ct)(S,"assessment"))},null,8,bU)])):(U(),j("div",SU,"—"))],2)],64)):(U(),j(Fe,{key:1},[h("td",null,[h("div",TU,[h("strong",null,te(oe(ct)(S,"firstName"))+" "+te(oe(ct)(S,"lastName")),1),h("span",{class:"data-source",title:`Data source: ${oe(Qc)(S,"firstName")}`},te(oe(Qc)(S,"firstName")==="Override"?"🔒":oe(Qc)(S,"firstName")==="App"?"📱":oe(Qc)(S,"firstName")==="Aeries"?"📊":oe(Qc)(S,"firstName")==="SEIS"?"📋":""),9,AU)]),h("div",wU,[h("div",null,"Grd: "+te(oe(ct)(S,"grade"))+" | Prg: "+te(oe(ct)(S,"plan")),1),h("div",null,"CM: "+te(oe(s)(oe(u)(S))),1)]),h("div",CU,[h("span",{class:et(["badge badge-review plan-review",oe(l)(S)])},"PR: "+te(oe(a)(oe(ct)(S,"reviewDate"))),3),h("span",{class:et(["badge badge-reeval reeval-due",oe(c)(S)])},"RE: "+te(oe(a)(oe(ct)(S,"reevalDate"))),3),h("span",{class:et(["badge badge-meeting meeting-date",[oe(o)(S),oe(ct)(S,"meetingDate")?"date-set":""]])}," 🗓 "+te(oe(a)(oe(ct)(S,"meetingDate"))||"Not set"),3)]),((_=t.currentUser)==null?void 0:_.role)==="paraeducator"&&oe(y)(S.id)?(U(),j("div",IU,w[10]||(w[10]=[h("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):Ae("",!0)]),st(iU,{student:S,"app-settings":oe(n),"get-class-services":oe(m),"get-other-services":oe(g),"has-service-providers":oe(v),"get-service-provider-id":oe(E),"get-provider-field-name":oe(x),"get-user-initial-last-name":oe(i)},null,8,["student","app-settings","get-class-services","get-other-services","has-service-providers","get-service-provider-id","get-provider-field-name","get-user-initial-last-name"]),st(q7,{student:S,"get-schedule":oe(p),"get-user-initial-last-name":oe(i)},null,8,["student","get-schedule","get-user-initial-last-name"]),st($b,{student:S,"field-name":"instruction","flag-type":"flag1","flag-text":"Preferential Seating","flag-class":"flag-preferential-seating","get-flag-value":oe(d),"format-list-from-text":oe(C)},null,8,["student","get-flag-value","format-list-from-text"]),st($b,{student:S,"field-name":"assessment","flag-type":"flag2","flag-text":"Separate Setting","flag-class":"flag-separate-setting","get-flag-value":oe(d),"format-list-from-text":oe(C)},null,8,["student","get-flag-value","format-list-from-text"]),st(N7,{student:S,"get-document-url":oe(f)},null,8,["student","get-document-url"]),st(U7,{student:S,"current-user":t.currentUser,onEdit:b=>k.$emit("edit",S.id),onEmail:b=>k.$emit("email",S.id),onTeacherFeedback:b=>k.$emit("teacher-feedback",S.id)},null,8,["student","current-user","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}};function kU(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=ha(),a=ue(!1);jt(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(b){console.error("useStudentForm: Error loading app settings:",b)}});const o=be(()=>{var T;const b=((T=r.value)==null?void 0:T.numPeriods)||7;return Array.from({length:b},(I,D)=>D+1)}),l=be(()=>{var b;return(b=r.value)!=null&&b.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),c=be(()=>{var b;if((b=r.value)!=null&&b.classServices&&r.value.classServices.length>0){const T=r.value.classServices.filter(I=>I.enabledSubcategories&&I.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",T.length,"services"),T}return console.log("useStudentForm: No class services available"),[]}),u=be(()=>{var b;return(b=r.value)!=null&&b.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),d=be(()=>{var b;return(b=r.value)!=null&&b.customServiceProviders?r.value.customServiceProviders:[]}),f=be(()=>{let b=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return b.teachers&&(b={...b,teachers:b.teachers.map(T=>({...T,id:String(T.id)}))}),b}),p=b=>{var T,I,D,O,R,F,N,V,L,z,H,B,W,K,ee,me,le,he,Z,Q,ve,X,q,Y,ge,re,ne,ae,xe,Ee,we,Te,Ge,Ie,Ue,Le,We,ze,_e,ye,Se,Re,He,it,mt,vt,Mt,dt;return{ssid:b.id||"",firstName:ct(b,"firstName")||"",lastName:ct(b,"lastName")||"",grade:ct(b,"grade")||"7",plan:ct(b,"plan")||"IEP",reviewDate:ct(b,"reviewDate")||"",reevalDate:ct(b,"reevalDate")||"",meetingDate:ct(b,"meetingDate")||"",caseManagerId:((I=(T=b.app)==null?void 0:T.studentData)==null?void 0:I.caseManagerId)||b.caseManagerId||b.casemanager_id||"",schedule:((O=(D=b.app)==null?void 0:D.schedule)==null?void 0:O.periods)||((F=(R=b.aeries)==null?void 0:R.schedule)==null?void 0:F.periods)||b.schedule||{},services:((V=(N=b.app)==null?void 0:N.schedule)==null?void 0:V.classServices)||b.services||[],speechId:((z=(L=b.app)==null?void 0:L.providers)==null?void 0:z.speechId)||b.speechId||b.speech_id||"",otId:((B=(H=b.app)==null?void 0:H.providers)==null?void 0:B.otId)||b.otId||b.ot_id||"",mhId:((K=(W=b.app)==null?void 0:W.providers)==null?void 0:K.mhId)||b.mhId||b.mh_id||"",ptId:((me=(ee=b.app)==null?void 0:ee.providers)==null?void 0:me.ptId)||b.ptId||b.pt_id||"",scId:((he=(le=b.app)==null?void 0:le.providers)==null?void 0:he.scId)||b.scId||b.sc_id||"",trId:((Q=(Z=b.app)==null?void 0:Z.providers)==null?void 0:Q.trId)||b.trId||b.tr_id||"",audId:((X=(ve=b.app)==null?void 0:ve.providers)==null?void 0:X.audId)||b.audId||b.aud_id||"",viId:((Y=(q=b.app)==null?void 0:q.providers)==null?void 0:Y.viId)||b.viId||b.vi_id||"",atId:((re=(ge=b.app)==null?void 0:ge.providers)==null?void 0:re.atId)||b.atId||b.at_id||"",dhhId:((ae=(ne=b.app)==null?void 0:ne.providers)==null?void 0:ae.dhhId)||b.dhhId||b.dhh_id||"",omId:((Ee=(xe=b.app)==null?void 0:xe.providers)==null?void 0:Ee.omId)||b.omId||b.om_id||"",bisId:((Te=(we=b.app)==null?void 0:we.providers)==null?void 0:Te.bisId)||b.bisId||b.bis_id||"",hnId:((Ie=(Ge=b.app)==null?void 0:Ge.providers)==null?void 0:Ie.hnId)||b.hnId||b.hn_id||"",swId:((Le=(Ue=b.app)==null?void 0:Ue.providers)==null?void 0:Le.swId)||b.swId||b.sw_id||"",instruction:ct(b,"instruction")||"",assessment:ct(b,"assessment")||"",flag1:((ze=(We=b.app)==null?void 0:We.flags)==null?void 0:ze.flag1)||b.flag1||!1,flag2:((ye=(_e=b.app)==null?void 0:_e.flags)==null?void 0:ye.flag2)||b.flag2||!1,ataglancePdfUrl:((Re=(Se=b.app)==null?void 0:Se.documents)==null?void 0:Re.ataglancePdfUrl)||b.ataglancePdfUrl||b.ataglance_pdf_url||"",bipPdfUrl:((it=(He=b.app)==null?void 0:He.documents)==null?void 0:it.bipPdfUrl)||b.bipPdfUrl||b.bip_pdf_url||"",ataglanceFileName:((vt=(mt=b.app)==null?void 0:mt.documents)==null?void 0:vt.ataglanceFileName)||b.ataglanceFileName||"",bipFileName:((dt=(Mt=b.app)==null?void 0:Mt.documents)==null?void 0:dt.bipFileName)||b.bipFileName||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1}},m=Cs(p(t.student||{})),g=b=>{const T=[];return b&&typeof b=="object"&&Object.entries(b).forEach(([I,D])=>{if(D&&typeof D=="object"&&D.coTeaching){const O=D.coTeaching.subject;O&&T.push(`Co-teach: ${O}`)}}),T},v=()=>{const b=g(m.schedule),T=m.services.filter(I=>!I.startsWith("Co-teach:"));m.services=[...T,...b]};Ut(()=>m.schedule,()=>{v()},{deep:!0}),Ut(()=>{var b;return(b=t.student)==null?void 0:b.id},(b,T)=>{var I,D,O,R,F,N,V;if(b&&b!==T){console.log("🔍 useStudentForm DEBUG - Student ID changed, updating form:",b),console.log("🔍 useStudentForm DEBUG - newStudent.app?.schedule?.periods:",JSON.stringify((O=(D=(I=t.student)==null?void 0:I.app)==null?void 0:D.schedule)==null?void 0:O.periods,null,2)),console.log("🔍 useStudentForm DEBUG - newStudent.aeries?.schedule?.periods:",JSON.stringify((N=(F=(R=t.student)==null?void 0:R.aeries)==null?void 0:F.schedule)==null?void 0:N.periods,null,2)),console.log("🔍 useStudentForm DEBUG - newStudent.schedule:",JSON.stringify((V=t.student)==null?void 0:V.schedule,null,2));const L=p(t.student);Object.assign(m,L),v(),console.log("🔍 useStudentForm DEBUG - Processed form.schedule:",m.schedule)}},{immediate:!0}),Ut(()=>r.value,b=>{console.log("useStudentForm: App settings watcher triggered:",b),b!=null&&b.grades&&b.grades.length>0&&(b.grades.includes(m.grade)||(m.grade=b.grades[0]||"7"))},{immediate:!0,deep:!0});const E=(b,T)=>{const I=b.target.files[0]||null;if(I){const D=Fc(I,{allowedTypes:["pdf"],maxSize:10485760,fieldName:T==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!D.isValid){alert(D.error),b.target.value="";return}const O=Hr(I.name);if(!O.isSafe){alert(`File name contains potentially dangerous content: ${O.threats.join(", ")}`),b.target.value="";return}}m[T]=I},x=b=>{b.preventDefault(),b.stopPropagation(),m.removeBipFile=!0,m.bipFile=null},y=b=>{b.preventDefault(),b.stopPropagation(),m.removeAtaglanceFile=!0,m.ataglanceFile=null},C={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},P=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],k=b=>{var I;if((I=r.value)!=null&&I.serviceProviders&&Array.isArray(r.value.serviceProviders)){const D=(r.value.serviceProvidersDetails||P).find(O=>O.abbreviation===b);if(D)return D.name+" ("+b+")"}const T=P.find(D=>D.abbreviation===b);return T?T.name+" ("+b+")":b},w=b=>{const I={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[b]||b.toLowerCase();return f.value[I]||[]},S=()=>{const b=cI(m),T={app:{studentData:{firstName:b.firstName,lastName:b.lastName,grade:b.grade,plan:b.plan,caseManagerId:b.caseManagerId}}},I=lI(T,{isNew:t.mode==="new"});if(!I.isValid)return alert(`Please fix the following errors:

${I.errors.join(`
`)}`),!1;const D=["firstName","lastName","instruction","assessment"];for(const O of D)if(m[O]){const R=Hr(m[O]);if(!R.isSafe)return alert(`Security threat detected in ${O}: ${R.threats.join(", ")}`),!1}return Object.assign(m,b),!0};return{form:m,isSaving:a,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:o,gradeOptions:l,availableClassServices:c,serviceProviders:u,customServiceProviders:d,userRoles:f,onFileChange:E,removeBipFile:x,removeAtaglanceFile:y,providerFieldMap:C,getProviderLabel:k,getProviderUsers:w,handleSubmit:async()=>{var b,T,I;try{if(a.value){console.log("Form submission already in progress, ignoring duplicate");return}if(console.log("Form submitted:",m),a.value=!0,console.log("🔍 AUTH DEBUG - Current user:",{uid:(b=nr.currentUser)==null?void 0:b.uid,email:(T=nr.currentUser)==null?void 0:T.email,claims:await((I=nr.currentUser)==null?void 0:I.getIdTokenResult())}),!S()){a.value=!1;return}const D=m.services.filter(z=>z&&z.includes(":")),O={};console.log("🔍 FORM SCHEDULE DEBUG - Complete form.schedule:",JSON.stringify(m.schedule,null,2)),console.log("🔍 FORM SCHEDULE DEBUG - periods.value:",o.value),o.value.forEach(z=>{if(console.log(`🔍 FORM SCHEDULE DEBUG - Period ${z} exists:`,!!m.schedule[z],"Value:",m.schedule[z]),m.schedule[z]){const H=m.schedule[z];console.log(`🔍 SCHEDULE DEBUG - Period ${z}:`,{type:typeof H,data:H,hasCoTeaching:!!(H&&H.coTeaching),hasCaseManagerId:!!(H&&H.coTeaching&&H.coTeaching.caseManagerId)}),typeof H=="string"?O[z]=H:typeof H=="object"&&H!==null&&(H.coTeaching&&H.coTeaching.caseManagerId?(console.log(`🔍 SCHEDULE DEBUG - Period ${z} has co-teaching, preserving structure`),O[z]={teacherId:H.teacherId,coTeaching:{caseManagerId:H.coTeaching.caseManagerId,subject:H.coTeaching.subject||""}}):(console.log(`🔍 SCHEDULE DEBUG - Period ${z} converting to simple format`),O[z]=H.teacherId||String(H)||H))}}),console.log("🔍 Schedule Composition Debug:"),console.log("Form schedule before:",JSON.stringify(m.schedule,null,2)),console.log("Composed schedule after:",JSON.stringify(O,null,2)),console.log("Composed data:",{classServices:D,schedule:O});let R=m.bipPdfUrl||null,F=m.ataglancePdfUrl||null;if(console.log("🔍 Form submission - PDF URLs:",{bipPdfUrl:R,ataglancePdfUrl:F,formBipPdfUrl:m.bipPdfUrl,formAtaglancePdfUrl:m.ataglancePdfUrl,bipFileName:m.bipFileName,ataglanceFileName:m.ataglanceFileName,bipFile:m.bipFile,ataglanceFile:m.ataglanceFile}),m.removeBipFile&&(console.log("Removing BIP file..."),R)){try{const z=ue(Q0,`students/${t.student.id||"temp"}/${R}`);await sv(z),await deleteDoc(at(Ye,"pdfMetadata",R)),console.log("Secure BIP file deleted:",R)}catch(z){console.warn("Error deleting secure BIP file:",z)}R=null}if(m.removeAtaglanceFile&&(console.log("Removing At-A-Glance file..."),F)){try{const z=ue(Q0,`students/${t.student.id||"temp"}/${F}`);await sv(z),await deleteDoc(at(Ye,"pdfMetadata",F)),console.log("Secure At-A-Glance file deleted:",F)}catch(z){console.warn("Error deleting secure At-A-Glance file:",z)}F=null}const N={studentData:{firstName:m.firstName,lastName:m.lastName,grade:m.grade,plan:m.plan,caseManagerId:m.caseManagerId},dates:{reviewDate:m.reviewDate,reevalDate:m.reevalDate,meetingDate:m.meetingDate},schedule:{periods:O,classServices:D},providers:{speechId:m.speechId,otId:m.otId,mhId:m.mhId,ptId:m.ptId,scId:m.scId,trId:m.trId,audId:m.audId,viId:m.viId,atId:m.atId,dhhId:m.dhhId,omId:m.omId,bisId:m.bisId,hnId:m.hnId,swId:m.swId},accommodations:{instruction:m.instruction,assessment:m.assessment},flags:{flag1:m.flag1,flag2:m.flag2},documents:{ataglancePdfUrl:F,bipPdfUrl:R,bipFileName:m.bipFileName||null,ataglanceFileName:m.ataglanceFileName||null}};console.log("📋 Documents being saved:",{ataglancePdfUrl:F,bipPdfUrl:R,bipFileName:m.bipFileName||null,ataglanceFileName:m.ataglanceFileName||null}),console.log("Saving payload:",N);const V={app:N,updatedAt:sa()};console.log("Saving payload:",V);let L=null;if(t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await tr(at(Ye,"students",t.student.id),V,{merge:!0}),L=t.student.id,console.log("Student updated successfully");else{if(console.log("Adding new student"),!m.ssid||m.ssid.trim()===""){alert("SSID is required for new students");return}const z=m.ssid.trim();V.app.studentData.ssid=z;const H=at(Ft(Ye,"students"));V.createdAt=sa(),await tr(H,V),L=H.id,V.id=L,console.log("Student added successfully with ID:",L,"SSID:",z)}e("saved",V),e("close")}catch(D){console.error("Error saving student:",D),console.error("Error details:",{code:D.code,message:D.message,stack:D.stack}),alert(`Error saving student: ${D.message||D}. Please try again.`)}finally{a.value=!1}},validateForm:S}}const DU={class:"form-col"},PU={class:"inner-grid-3"},FU={key:0,class:"ssid-field"},RU=["value"],OU=["value"],NU={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(U(),j("fieldset",DU,[r[21]||(r[21]=h("legend",null,"Student Info",-1)),h("div",PU,[t.mode==="new"?(U(),j("label",FU,[r[9]||(r[9]=h("span",{class:"field-label"},"SSID (State Student ID) *",-1)),Ve(h("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[At,t.form.ssid]]),r[10]||(r[10]=h("div",{class:"field-help"},[h("strong",null,"Required:"),Ne(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):Ae("",!0),h("label",null,[r[11]||(r[11]=Ne(" First Name: ")),Ve(h("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[At,t.form.firstName]])]),h("label",null,[r[12]||(r[12]=Ne(" Last Name: ")),Ve(h("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[At,t.form.lastName]])]),h("label",null,[r[13]||(r[13]=Ne(" Grade: ")),Ve(h("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(U(!0),j(Fe,null,je(t.gradeOptions,n=>(U(),j("option",{key:n,value:n},te(n),9,RU))),128))],512),[[vr,t.form.grade]])]),h("label",null,[r[15]||(r[15]=Ne(" Plan Type: ")),Ve(h("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[h("option",{value:"IEP"},"IEP",-1),h("option",{value:"504"},"504",-1)]),512),[[vr,t.form.plan]])]),h("label",null,[r[16]||(r[16]=Ne(" Review Date: ")),Ve(h("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[At,t.form.reviewDate]])]),h("label",null,[r[17]||(r[17]=Ne(" Reevaluation Date: ")),Ve(h("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[At,t.form.reevalDate]])]),h("label",null,[r[18]||(r[18]=Ne(" Meeting Date: ")),Ve(h("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[At,t.form.meetingDate]])]),h("label",null,[r[20]||(r[20]=Ne(" Case Manager: ")),Ve(h("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=h("option",{value:""},"-- Select Case Manager --",-1)),(U(!0),j(Fe,null,je(t.userRoles.caseManagers,n=>(U(),j("option",{key:n.id,value:n.id},te(n.name||n.email||n.id),9,OU))),128))],512),[[vr,t.form.caseManagerId]])])])]))}},MU=yt(NU,[["__scopeId","data-v-5eadce29"]]),LU={class:"form-col"},BU={class:"periods-container"},UU={class:"period-main"},VU={class:"period-label"},$U=["value","onChange"],jU=["value"],HU=["disabled","onClick"],GU={key:0,class:"coteaching-config"},WU={class:"coteaching-info"},zU={class:"classroom-teacher"},KU={class:"case-manager-name"},qU={class:"config-row"},XU=["value","onChange"],YU=["value"],QU={class:"config-row"},JU=["value","onChange"],ZU=["value"],eV={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0},appSettings:{type:Object,default:()=>({})}},setup(t){const e=t,{getLabel:r}=zd(),n=be(()=>(e.userRoles.caseManagers||[]).filter(E=>E.id&&(E.role==="case_manager"||E.role==="administrator_504_CM"||E.role==="sped_chair"||E.roles&&E.roles.includes("case_manager")))),s=be(()=>{var v;if((v=e.appSettings)!=null&&v.classServices){const E=e.appSettings.classServices.find(x=>x.name==="Co-teach"&&x.enabledSubcategories);if(E)return E.enabledSubcategories.sort()}return["English","Math","History","Science"]}),i=v=>{const E=e.form.schedule[v];return typeof E=="string"?E:typeof E=="object"&&E!==null&&E.teacherId||""},a=(v,E)=>{if(f("SET_TEACHER_START",{period:v,teacherId:E,isCoTeachingActive:c(v),currentValue:e.form.schedule[v]}),c(v)){const x=u(v),y=d(v);e.form.schedule[v]={teacherId:E,coTeaching:{caseManagerId:x,subject:y}},f("SET_TEACHER_COTEACHING",{period:v,newValue:e.form.schedule[v]})}else e.form.schedule[v]=E,f("SET_TEACHER_SIMPLE",{period:v,newValue:e.form.schedule[v]})},o=v=>{if(!v)return"Unknown";const E=(e.userRoles.teachers||[]).find(x=>x.id===v);return E&&(E.name||E.email)||v},l=v=>{if(!v)return"Select Case Manager";const E=n.value.find(x=>x.id===v);return E&&(E.name||E.email)||v},c=v=>{var x;const E=e.form.schedule[v];return typeof E=="object"&&E!==null?!!((x=E.coTeaching)!=null&&x.caseManagerId):!1},u=v=>{var x;const E=e.form.schedule[v];return typeof E=="object"&&E!==null&&((x=E.coTeaching)==null?void 0:x.caseManagerId)||""},d=v=>{var x;const E=e.form.schedule[v];return typeof E=="object"&&E!==null&&((x=E.coTeaching)==null?void 0:x.subject)||""},f=(v,E)=>{const x=new Date().toISOString();console.log(`🕒 [${x}] Schedule Process: ${v}`,E)},p=(v,E)=>{f("UPDATE_CM_START",{period:v,caseManagerId:E,currentValue:e.form.schedule[v]});const x=i(v),y=d(v);x?(e.form.schedule[v]={teacherId:x,coTeaching:{caseManagerId:E,subject:y}},f("UPDATE_CM_COMPLETE",{period:v,newValue:e.form.schedule[v]}),console.log("🔍 CO-TEACHING DEBUG - Case Manager Updated:",{period:v,periodType:typeof v,caseManagerId:E,teacherId:x,subject:y,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):f("UPDATE_CM_BLOCKED",{reason:"No teacher ID",period:v})},m=(v,E)=>{f("UPDATE_SUBJECT_START",{period:v,subject:E,currentValue:e.form.schedule[v]});const x=i(v),y=u(v);x?(e.form.schedule[v]={teacherId:x,coTeaching:{caseManagerId:y,subject:E}},f("UPDATE_SUBJECT_COMPLETE",{period:v,newValue:e.form.schedule[v]}),console.log("🔍 CO-TEACHING DEBUG - Subject Updated:",{period:v,periodType:typeof v,subject:E,teacherId:x,caseManagerId:y,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):f("UPDATE_SUBJECT_BLOCKED",{reason:"No teacher ID",period:v})},g=v=>{var y;f("TOGGLE_START",{period:v,currentValue:e.form.schedule[v],formVersion:e.formVersion});const E=i(v);if(!E){f("TOGGLE_BLOCKED",{reason:"No teacher selected",period:v});return}const x=c(v);if(f("TOGGLE_STATE",{period:v,isActive:x,teacherId:E,beforeValue:e.form.schedule[v]}),x)e.form.schedule[v]=E;else{const C={teacherId:E,coTeaching:{caseManagerId:((y=n.value[0])==null?void 0:y.id)||"",subject:s.value[0]||""}};e.form.schedule[v]=C,setTimeout(()=>{var P;console.log("🔍 CO-TEACHING PERSISTENCE CHECK - 100ms later:",{period:v,stillExists:!!e.form.schedule[v],currentValue:e.form.schedule[v],isObject:typeof e.form.schedule[v]=="object",hasCoTeaching:!!((P=e.form.schedule[v])!=null&&P.coTeaching)})},100),setTimeout(()=>{var P;console.log("🔍 CO-TEACHING PERSISTENCE CHECK - 1000ms later:",{period:v,stillExists:!!e.form.schedule[v],currentValue:e.form.schedule[v],isObject:typeof e.form.schedule[v]=="object",hasCoTeaching:!!((P=e.form.schedule[v])!=null&&P.coTeaching)})},1e3)}f("TOGGLE_COMPLETE",{period:v,afterValue:e.form.schedule[v],formVersion:e.formVersion}),console.log("🔍 CO-TEACHING DEBUG - Toggle Complete:",{period:v,periodType:typeof v,isActive:!x,finalValue:e.form.schedule[v],entireSchedule:JSON.stringify(e.form.schedule,null,2),availableCaseManagers:n.value.length,availableSubjects:s.value.length})};return Ut(()=>e.form.schedule,(v,E)=>{console.log("🔍 SCHEDULE WATCHER - Schedule changed:",{timestamp:new Date().toISOString(),newSchedule:JSON.stringify(v,null,2),oldSchedule:JSON.stringify(E,null,2),periodsWithObjects:Object.keys(v).filter(x=>typeof v[x]=="object"),periodsWithCoTeaching:Object.keys(v).filter(x=>{var y;return(y=v[x])==null?void 0:y.coTeaching})})},{deep:!0}),(v,E)=>(U(),j("fieldset",LU,[E[7]||(E[7]=h("legend",null,"Schedule",-1)),h("div",BU,[(U(!0),j(Fe,null,je(t.periods,x=>(U(),j("div",{key:x,class:"period-row"},[h("div",UU,[h("label",VU,te(oe(r)(x))+":",1),h("select",{value:i(x),onChange:y=>a(x,y.target.value),class:"teacher-select"},[E[0]||(E[0]=h("option",{value:""},"--",-1)),(U(!0),j(Fe,null,je(t.userRoles.teachers,y=>(U(),j("option",{key:y.id,value:y.id},te(y.name||y.email||y.id),9,jU))),128))],40,$U),h("button",{type:"button",class:et(["coteaching-toggle",{active:c(x)}]),disabled:!i(x),onClick:y=>g(x),title:"Co-Teaching"}," C ",10,HU)]),c(x)?(U(),j("div",GU,[h("div",WU,[E[1]||(E[1]=h("span",{class:"coteaching-label"},"Co-Teaching:",-1)),h("span",zU,te(o(i(x))),1),E[2]||(E[2]=h("span",{class:"plus-sign"},"+",-1)),h("span",KU,te(l(u(x))),1)]),h("div",qU,[E[4]||(E[4]=h("label",{class:"config-label"},"Subject:",-1)),h("select",{value:d(x),onChange:y=>m(x,y.target.value),class:"subject-select",required:""},[E[3]||(E[3]=h("option",{value:""},"-- Select Subject --",-1)),(U(!0),j(Fe,null,je(s.value,y=>(U(),j("option",{key:y,value:y},te(y),9,YU))),128))],40,XU)]),h("div",QU,[E[6]||(E[6]=h("label",{class:"config-label"},"Case Manager:",-1)),h("select",{value:u(x),onChange:y=>p(x,y.target.value),class:"cm-select",required:""},[E[5]||(E[5]=h("option",{value:""},"-- Select Case Manager --",-1)),(U(!0),j(Fe,null,je(n.value,y=>(U(),j("option",{key:y.id,value:y.id},te(y.name||y.email||y.id),9,ZU))),128))],40,JU)])])):Ae("",!0)]))),128))])]))}},tV=yt(eV,[["__scopeId","data-v-eee60512"]]),rV={class:"checkbox-inline-group"},nV=["value","checked","onChange"],jb={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(U(),j("fieldset",null,[h("legend",null,te(t.label),1),h("div",rV,[(U(!0),j(Fe,null,je(t.items,o=>(U(),j("label",{key:o},[h("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,nV),Ne(" "+te(o),1)]))),128))])]))}},sV={class:"form-col"},aV={class:"inner-grid-3"},iV={key:0,class:"loading-message"},oV={key:1,class:"error-message"},lV={style:{display:"none"}},cV={key:3,class:"no-services-message"},uV={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){const e=t,r=be(()=>e.availableClassServices.filter(s=>s.name!=="Co-teach")),n=be(()=>e.availableClassServices.filter(s=>s.name==="Co-teach"));return(s,i)=>(U(),j("fieldset",sV,[i[5]||(i[5]=h("legend",null,"Services: classes",-1)),h("div",aV,[t.appSettingsLoading?(U(),j("div",iV,i[2]||(i[2]=[h("span",{class:"loading-spinner"},"⏳",-1),Ne(" Loading app settings... ")]))):t.appSettingsError?(U(),j("div",oV,[i[3]||(i[3]=h("span",{class:"error-icon"},"⚠️",-1)),Ne(" Error loading app settings: "+te(t.appSettingsError),1)])):t.availableClassServices.length>0?(U(),j(Fe,{key:2},[(U(!0),j(Fe,null,je(r.value,a=>(U(),Xr(jb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[0]||(i[0]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128)),h("div",lV,[(U(!0),j(Fe,null,je(n.value,a=>(U(),Xr(jb,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[1]||(i[1]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128))])],64)):(U(),j("div",cV,i[4]||(i[4]=[h("span",{class:"info-icon"},"ℹ️",-1),Ne(" No class services configured. "),h("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},dV=yt(uV,[["__scopeId","data-v-d750acb2"]]),fV=["id","value"],hV=["value"],Hb={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(U(),j("label",null,[Ne(te(t.label)+": ",1),h("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=h("option",{value:""},"--",-1)),(U(!0),j(Fe,null,je(t.list,n=>(U(),j("option",{key:n.id,value:n.id},te(n.name),9,hV))),128))],40,fV)]))}},pV={class:"inner-grid-3"},mV={key:1,class:"no-services-message"},gV={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(U(),j("fieldset",null,[r[1]||(r[1]=h("legend",null,"Services: providers",-1)),h("div",pV,[t.serviceProviders.length>0?(U(),j(Fe,{key:0},[(U(!0),j(Fe,null,je(t.serviceProviders,n=>(U(),Xr(Hb,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(U(!0),j(Fe,null,je(t.customServiceProviders,n=>(U(),Xr(Hb,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(U(),j("div",mV,r[0]||(r[0]=[h("span",{class:"info-icon"},"ℹ️",-1),Ne(" No service providers configured. "),h("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},vV=yt(gV,[["__scopeId","data-v-faa02238"]]),xV={class:"form-col"},yV={class:"document-section"},EV={key:0,class:"current-file"},_V={key:1,class:"removed-file"},bV={key:2,class:"upload-status loading-pulse"},SV={key:3,class:"error-message"},TV={class:"document-section"},AV={key:0,class:"current-file"},wV={key:1,class:"removed-file"},CV={key:2,class:"upload-status loading-pulse"},IV={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0}},emits:["loading-change"],setup(t,{emit:e}){const r=t,n=e,{uploadPdf:s,downloadPdf:i,isUploading:a,error:o}=gI(),l=ue(null),c=be(()=>a.value||l.value!==null);Ut(c,p=>{n("loading-change",p)},{immediate:!0});const u=be(()=>{var m,g,v,E;const p=((m=r.student)==null?void 0:m.id)||((g=r.form)==null?void 0:g.id);return console.log("🔍 StudentDocuments - studentId computed:",{studentId:(v=r.student)==null?void 0:v.id,formId:(E=r.form)==null?void 0:E.id,finalId:p}),p}),d=async(p,m)=>{const g=p.target.files[0]||null;if(g){const v=Fc(g,{allowedTypes:["pdf"],maxSize:10485760,fieldName:m==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!v.isValid){alert(v.error),p.target.value="";return}const E=Hr(g.name);if(!E.isSafe){alert(`File name contains potentially dangerous content: ${E.threats.join(", ")}`),p.target.value="";return}try{if(l.value=m==="bipFile"?"bip":"ataglance",!u.value)throw new Error("Student ID is required for secure file upload");const x=m==="bipFile"?r.form.bipPdfUrl:r.form.ataglancePdfUrl;if(x){console.log(`🗑️ Cleaning up old ${m} file:`,x);try{const{ref:C,deleteObject:P}=await Oo(async()=>{const{ref:T,deleteObject:I}=await Promise.resolve().then(()=>tM);return{ref:T,deleteObject:I}},void 0),{doc:k,deleteDoc:w}=await Oo(async()=>{const{doc:T,deleteDoc:I}=await Promise.resolve().then(()=>L5);return{doc:T,deleteDoc:I}},void 0),{storage:S,db:_}=await Oo(async()=>{const{storage:T,db:I}=await Promise.resolve().then(()=>XC);return{storage:T,db:I}},void 0),b=C(S,`students/${u.value}/${x}`);await P(b),await w(k(_,"pdfMetadata",x)),console.log(`✅ Old ${m} file cleaned up:`,x)}catch(C){console.warn(`Failed to clean up old ${m} file:`,C.message)}}const y=await s(g,u.value);m==="bipFile"?(Object.assign(r.form,{bipPdfUrl:y,bipFileName:g.name}),console.log("✅ BIP file updated in form:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName})):(Object.assign(r.form,{ataglancePdfUrl:y,ataglanceFileName:g.name}),console.log("✅ At-A-Glance file updated in form:",{ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})),console.log(`✅ Secure PDF uploaded: ${y}`),console.log("📋 Current form state:",{bipPdfUrl:r.form.bipPdfUrl,bipFileName:r.form.bipFileName,ataglancePdfUrl:r.form.ataglancePdfUrl,ataglanceFileName:r.form.ataglanceFileName})}catch(x){console.error("Secure PDF upload failed:",x),alert(`Failed to upload PDF: ${x.message}`)}finally{l.value=null,p.target.value=""}}r.onFileChange(p,m)},f=async p=>{try{const m=p==="bip"?r.form.bipPdfUrl:r.form.ataglancePdfUrl,g=p==="bip"?r.form.bipFileName:r.form.ataglanceFileName;if(!m||!u.value)throw new Error("File not found or student ID missing");await i(m,u.value,g)}catch(m){console.error("Secure PDF download failed:",m),alert(`Failed to download PDF: ${m.message}`)}};return(p,m)=>(U(),j("fieldset",xV,[m[16]||(m[16]=h("legend",null,"Documents",-1)),h("div",yV,[h("label",null,[m[11]||(m[11]=Ne(" BIP: ")),h("input",{type:"file",accept:"application/pdf",onChange:m[0]||(m[0]=g=>d(g,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(U(),j("span",EV,[m[8]||(m[8]=Ne(" Current: ")),h("a",{href:"#",onClick:m[1]||(m[1]=fn(g=>f("bip"),["prevent"])),target:"_blank"},"View BIP"),h("button",{type:"button",onClick:m[2]||(m[2]=(...g)=>t.removeBipFile&&t.removeBipFile(...g)),class:"btn-remove"}," 🗑️ Remove ")])):Ae("",!0),t.form.removeBipFile?(U(),j("span",_V,[m[9]||(m[9]=Ne(" BIP file will be removed ")),h("button",{type:"button",onClick:m[3]||(m[3]=g=>t.form.removeBipFile=!1),class:"btn-undo"}," ↩️ Undo ")])):Ae("",!0),oe(a)&&l.value==="bip"?(U(),j("div",bV,m[10]||(m[10]=[h("span",{class:"loading-spinner"},"🔄",-1),h("strong",null,"Loading... Uploading BIP document...",-1)]))):Ae("",!0),oe(o)?(U(),j("div",SV,te(oe(o)),1)):Ae("",!0)])]),h("div",TV,[h("label",null,[m[15]||(m[15]=Ne(" At-A-Glance PDF: ")),h("input",{type:"file",accept:"application/pdf",onChange:m[4]||(m[4]=g=>d(g,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(U(),j("span",AV,[m[12]||(m[12]=Ne(" Current: ")),h("a",{href:"#",onClick:m[5]||(m[5]=fn(g=>f("ataglance"),["prevent"])),target:"_blank"},"View At-A-Glance"),h("button",{type:"button",onClick:m[6]||(m[6]=(...g)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(...g)),class:"btn-remove"}," 🗑️ Remove ")])):Ae("",!0),t.form.removeAtaglanceFile?(U(),j("span",wV,[m[13]||(m[13]=Ne(" At-A-Glance file will be removed ")),h("button",{type:"button",onClick:m[7]||(m[7]=g=>t.form.removeAtaglanceFile=!1),class:"btn-undo"}," ↩️ Undo ")])):Ae("",!0),oe(a)&&l.value==="ataglance"?(U(),j("div",CV,m[14]||(m[14]=[h("span",{class:"loading-spinner"},"🔄",-1),h("strong",null,"Loading... Uploading At-A-Glance document...",-1)]))):Ae("",!0)])])]))}},kV=yt(IV,[["__scopeId","data-v-078af5f3"]]),DV={class:"form-col"},PV={class:"inner-grid-2"},FV={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(U(),j("fieldset",DV,[r[4]||(r[4]=h("legend",null,"Accommodations",-1)),h("div",PV,[h("label",null,[r[2]||(r[2]=Ne(" Instruction: ")),Ve(h("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[At,t.form.instruction]])]),h("label",null,[r[3]||(r[3]=Ne(" Assessment: ")),Ve(h("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[At,t.form.assessment]])])])]))}},RV=yt(FV,[["__scopeId","data-v-4ce4f379"]]),OV={class:"flags-container"},NV={class:"checkbox-label"},MV={class:"checkbox-label"},LV={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(U(),j("fieldset",null,[r[4]||(r[4]=h("legend",null,"Flags",-1)),h("div",OV,[h("label",NV,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[xt,t.form.flag1]]),r[2]||(r[2]=Ne(" Preferential seating "))]),h("label",MV,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[xt,t.form.flag2]]),r[3]||(r[3]=Ne(" Separate setting "))])])]))}},BV=yt(LV,[["__scopeId","data-v-e7295a7a"]]),UV={class:"dialog-backdrop"},VV={class:"dialog"},$V=["disabled"],jV={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettings:a,appSettingsLoading:o,appSettingsError:l,periods:c,gradeOptions:u,availableClassServices:d,serviceProviders:f,customServiceProviders:p,userRoles:m,onFileChange:g,removeBipFile:v,removeAtaglanceFile:E,providerFieldMap:x,getProviderLabel:y,getProviderUsers:C,handleSubmit:P}=kU(r,n),k=ue(!1),w=be(()=>i.value||k.value),S=be(()=>k.value?"Loading files...":i.value?"Saving...":mode==="edit"?"Save":"Add Student"),_=b=>{k.value=b};return(b,T)=>(U(),j("div",UV,[h("div",VV,[h("header",null,[h("h2",null,te(t.mode==="edit"?"Edit Student":"Add Student"),1),h("button",{onClick:T[0]||(T[0]=I=>b.$emit("close")),class:"close-btn"},"×")]),h("form",{onSubmit:T[2]||(T[2]=fn((...I)=>oe(P)&&oe(P)(...I),["prevent"])),id:"student-form"},[st(MU,{form:oe(s),mode:t.mode,"grade-options":oe(u),"user-roles":oe(m)},null,8,["form","mode","grade-options","user-roles"]),st(tV,{form:oe(s),periods:oe(c),"user-roles":oe(m),"app-settings":oe(a)},null,8,["form","periods","user-roles","app-settings"]),st(dV,{form:oe(s),"available-class-services":oe(d),"app-settings-loading":oe(o),"app-settings-error":oe(l)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),st(vV,{form:oe(s),"service-providers":oe(f),"custom-service-providers":oe(p),"provider-field-map":oe(x),"get-provider-label":oe(y),"get-provider-users":oe(C)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),st(kV,{form:oe(s),student:t.student,mode:t.mode,"on-file-change":oe(g),"remove-bip-file":oe(v),"remove-ataglance-file":oe(E),onLoadingChange:_},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file"]),st(RV,{form:oe(s)},null,8,["form"]),st(BV,{form:oe(s)},null,8,["form"]),h("footer",null,[h("button",{type:"button",onClick:T[1]||(T[1]=I=>b.$emit("close")),class:"btn btn-secondary"}," Cancel "),h("button",{type:"submit",class:"btn btn-primary",disabled:w.value},te(S.value),9,$V)])],32)])]))}},vI=yt(jV,[["__scopeId","data-v-fc6bc021"]]),HV={key:0},GV={key:1,class:"loading-dialog"},WV={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s,fetchStudents:i}=Oa(),a=be(()=>{const l=s.value.find(c=>c.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - all students:",s.value),console.log("StudentEditDialog - found student:",l),l||{}});jt(async()=>{s.value.length===0&&(console.log("StudentEditDialog - fetching students..."),await i())});function o(l){console.log("StudentEditDialog - student saved:",l),n("saved",l)}return(l,c)=>a.value&&Object.keys(a.value).length>0?(U(),j("div",HV,[st(vI,{student:a.value,users:t.users,mode:"edit",onClose:c[0]||(c[0]=u=>l.$emit("close")),onSaved:o},null,8,["student","users"])])):(U(),j("div",GV,c[1]||(c[1]=[h("div",{class:"dialog"},[h("header",null,[h("h2",null,"Loading Student Data...")]),h("div",{class:"content"},[h("p",null,"Please wait while we load the student information.")])],-1)])))}},zV=yt(WV,[["__scopeId","data-v-0410ea60"]]),KV={class:"dialog-backdrop"},qV={class:"dialog"},XV={class:"button-group"},YV={key:0,class:"members-list"},QV={key:0,class:"email"},JV=["value"],ZV={class:"docs-option"},e$={key:0,class:"no-docs"},t$=["disabled"],r$=["disabled"],n$={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0}},emits:["close"],setup(t){const e=t,{student:r,userMap:n}=e,s=ue(""),i=ue([]),a=ue(!1),o=be(()=>{var E,x;if((x=(E=r.app)==null?void 0:E.schedule)!=null&&x.periods){const y=[];return Object.values(r.app.schedule.periods).forEach(C=>{var k;const P=typeof C=="string"?C:C==null?void 0:C.teacherId;P&&y.push(P),(k=C==null?void 0:C.coTeaching)!=null&&k.caseManagerId&&y.push(C.coTeaching.caseManagerId)}),y}const v=r.schedule||{};return Object.values(v).filter(Boolean)}),l=be(()=>[...new Set(o.value)]),c=be(()=>{var E;const v=[];(E=r.app)!=null&&E.providers&&Object.entries(r.app.providers).forEach(([x,y])=>{y&&!["caseManagerId"].includes(x)&&v.push(y)});for(const x in r)x.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(x)&&r[x]&&v.push(r[x]);return[...new Set(v)].filter(x=>!l.value.includes(x))}),u=be(()=>l.value.map(v=>({id:v,...n[v]||{}})).filter(v=>v&&v.email)),d=be(()=>c.value.map(v=>({id:v,...n[v]||{}})).filter(v=>v&&v.email)),f=be(()=>[...u.value,...d.value]),p=be(()=>{var v,E,x,y;return!!((E=(v=r.app)==null?void 0:v.documents)!=null&&E.ataglancePdfUrl||(y=(x=r.app)==null?void 0:x.documents)!=null&&y.bipPdfUrl||r.ataglancePdfUrl||r.ataglance_pdf_url||r.bipPdfUrl||r.bip_pdf_url)}),m=be(()=>s.value?s.value==="Individual"?i.value.length>0:!0:!1);function g(){var k,w,S,_,b,T,I,D;let v=[];s.value==="Teachers"?v=u.value:s.value==="TeachersAndService"?v=[...u.value,...d.value]:s.value==="Individual"&&(v=f.value.filter(O=>i.value.includes(O.id)));const E=v.map(O=>O.email).filter(Boolean).join(",");if(!E){alert("No email addresses found for the selected recipients.");return}const y=`${((((k=r.firstName)==null?void 0:k[0])||((w=r.first_name)==null?void 0:w[0])||"")+(((S=r.lastName)==null?void 0:S[0])||((_=r.last_name)==null?void 0:_[0])||"")).toUpperCase()} - Student Update`;let C="";if(a.value){C+=`Hi team!

Below are links to ${r.firstName||r.first_name||""} ${r.lastName||r.last_name||""}'s updated documents:

`;const O=((T=(b=r.app)==null?void 0:b.documents)==null?void 0:T.ataglancePdfUrl)||r.ataglancePdfUrl||r.ataglance_pdf_url,R=((D=(I=r.app)==null?void 0:I.documents)==null?void 0:D.bipPdfUrl)||r.bipPdfUrl||r.bip_pdf_url;O&&(C+=`At-A-Glance: ${O}
`),R&&(C+=`BIP:         ${R}
`)}else C="See attached.";const P=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(E)}&su=${encodeURIComponent(y)}&body=${encodeURIComponent(C)}`;window.open(P,"_blank","noopener")}return(v,E)=>(U(),j("div",KV,[h("div",qV,[h("header",null,[h("h2",null,"Email about "+te(oe(r).firstName||oe(r).first_name)+" "+te(oe(r).lastName||oe(r).last_name),1),h("button",{onClick:E[0]||(E[0]=x=>v.$emit("close")),title:"Close"},"×")]),h("main",null,[h("form",{onSubmit:E[6]||(E[6]=fn(()=>{},["prevent"]))},[h("div",XV,[h("button",{type:"button",class:et(["option-button",{active:s.value==="Teachers"}]),onClick:E[1]||(E[1]=x=>s.value="Teachers")}," Teachers ",2),h("button",{type:"button",class:et(["option-button",{active:s.value==="TeachersAndService"}]),onClick:E[2]||(E[2]=x=>s.value="TeachersAndService")}," Teachers and service providers ",2),h("button",{type:"button",class:et(["option-button",{active:s.value==="Individual"}]),onClick:E[3]||(E[3]=x=>s.value="Individual")}," Individual member of the IEP team ",2)]),s.value==="Individual"?(U(),j("div",YV,[E[8]||(E[8]=h("div",null,"Select members:",-1)),(U(!0),j(Fe,null,je(f.value,x=>(U(),j("div",{key:x.id},[h("label",null,[h("span",null,[Ne(te(x.name||x.displayName||x.email||x.id)+" ",1),x.email?(U(),j("span",QV,"("+te(x.email)+")",1)):Ae("",!0)]),Ve(h("input",{type:"checkbox",value:x.id,"onUpdate:modelValue":E[4]||(E[4]=y=>i.value=y)},null,8,JV),[[xt,i.value]])])]))),128))])):Ae("",!0),h("div",ZV,[h("label",null,[h("span",null,[E[9]||(E[9]=Ne(" Include documents ")),p.value?Ae("",!0):(U(),j("span",e$,"(No docs available)"))]),Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[5]||(E[5]=x=>a.value=x),disabled:!p.value},null,8,t$),[[xt,a.value]])])])],32)]),h("footer",null,[h("button",{onClick:E[7]||(E[7]=x=>v.$emit("close"))},"Cancel"),h("button",{disabled:!m.value,onClick:g},"Send",8,r$)])])]))}},s$=yt(n$,[["__scopeId","data-v-0ea92b37"]]),a$={class:"dialog-backdrop"},i$={class:"dialog"},o$={class:"field-groups"},l$={class:"field-group"},c$={class:"field-group"},u$={class:"field-group"},d$={class:"field-group"},f$={class:"field-group"},h$={class:"field-group"},p$=["disabled"],m$={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=fa(),i=dx(),a=ue({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=be(()=>Object.values(a.value).some(v=>Object.values(v).some(E=>E)));function c(v){if(!v||!r.userMap[v])return"";const E=r.userMap[v];return E.name||E.email||""}function u(v){const E=i.userPermissions||[];return Array.isArray(E)&&E.includes(v)}function d(){Object.keys(a.value).forEach(v=>{Object.keys(a.value[v]).forEach(E=>{a.value[v][E]=!0})})}function f(){Object.keys(a.value).forEach(v=>{Object.keys(a.value[v]).forEach(E=>{a.value[v][E]=!1})})}function p(v){var C,P,k,w,S,_,b,T,I,D,O,R,F,N,V,L,z,H,B,W,K,ee,me,le,he,Z,Q,ve,X,q,Y,ge;const E=s.currentUser;if((E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="administrator"||(E==null?void 0:E.role)==="sped_chair"||(E==null?void 0:E.role)==="administrator_504_CM")return m(v);const y={};return a.value.studentData.firstName&&(y.firstName=(P=(C=v.app)==null?void 0:C.studentData)==null?void 0:P.firstName),a.value.studentData.lastName&&(y.lastName=(w=(k=v.app)==null?void 0:k.studentData)==null?void 0:w.lastName),a.value.studentData.grade&&(y.grade=(_=(S=v.app)==null?void 0:S.studentData)==null?void 0:_.grade),a.value.studentData.plan&&(y.plan=(T=(b=v.app)==null?void 0:b.studentData)==null?void 0:T.plan),a.value.studentData.caseManagerId&&(y.caseManagerId=(D=(I=v.app)==null?void 0:I.studentData)==null?void 0:D.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(y.reviewDate=(R=(O=v.app)==null?void 0:O.dates)==null?void 0:R.reviewDate),a.value.dates.reevalDate&&(y.reevalDate=(N=(F=v.app)==null?void 0:F.dates)==null?void 0:N.reevalDate),a.value.dates.meetingDate&&(y.meetingDate=(L=(V=v.app)==null?void 0:V.dates)==null?void 0:L.meetingDate)),(u("view_service_providers")||((H=(z=v.app)==null?void 0:z.studentData)==null?void 0:H.caseManagerId)===(E==null?void 0:E.uid)||o.some(re=>{var ne,ae;return((ae=(ne=v.app)==null?void 0:ne.providers)==null?void 0:ae[re])===(E==null?void 0:E.uid)}))&&a.value.providers.all&&o.forEach(re=>{var ne,ae;y[re]=(ae=(ne=v.app)==null?void 0:ne.providers)==null?void 0:ae[re]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(y.instruction=(W=(B=v.app)==null?void 0:B.accommodations)==null?void 0:W.instruction),a.value.accommodations.assessment&&(y.assessment=(ee=(K=v.app)==null?void 0:K.accommodations)==null?void 0:ee.assessment)),(u("view_schedule")||Object.values(((le=(me=v.app)==null?void 0:me.schedule)==null?void 0:le.periods)||{}).includes(E==null?void 0:E.uid))&&(a.value.schedule.periods&&(y.schedule=(Z=(he=v.app)==null?void 0:he.schedule)==null?void 0:Z.periods),a.value.schedule.classServices&&(y.classServices=(ve=(Q=v.app)==null?void 0:Q.schedule)==null?void 0:ve.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(y.ataglancePdfUrl=(q=(X=v.app)==null?void 0:X.documents)==null?void 0:q.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(y.bipPdfUrl=(ge=(Y=v.app)==null?void 0:Y.documents)==null?void 0:ge.bipPdfUrl)),y}function m(v){var x,y,C,P,k,w,S,_,b,T,I,D,O,R,F,N,V,L,z,H,B,W,K,ee,me,le,he,Z;const E={};return a.value.studentData.firstName&&(E.firstName=(y=(x=v.app)==null?void 0:x.studentData)==null?void 0:y.firstName),a.value.studentData.lastName&&(E.lastName=(P=(C=v.app)==null?void 0:C.studentData)==null?void 0:P.lastName),a.value.studentData.grade&&(E.grade=(w=(k=v.app)==null?void 0:k.studentData)==null?void 0:w.grade),a.value.studentData.plan&&(E.plan=(_=(S=v.app)==null?void 0:S.studentData)==null?void 0:_.plan),a.value.studentData.caseManagerId&&(E.caseManagerId=(T=(b=v.app)==null?void 0:b.studentData)==null?void 0:T.caseManagerId),a.value.dates.reviewDate&&(E.reviewDate=(D=(I=v.app)==null?void 0:I.dates)==null?void 0:D.reviewDate),a.value.dates.reevalDate&&(E.reevalDate=(R=(O=v.app)==null?void 0:O.dates)==null?void 0:R.reevalDate),a.value.dates.meetingDate&&(E.meetingDate=(N=(F=v.app)==null?void 0:F.dates)==null?void 0:N.meetingDate),a.value.providers.all&&o.forEach(Q=>{var ve,X;E[Q]=(X=(ve=v.app)==null?void 0:ve.providers)==null?void 0:X[Q]}),a.value.accommodations.instruction&&(E.instruction=(L=(V=v.app)==null?void 0:V.accommodations)==null?void 0:L.instruction),a.value.accommodations.assessment&&(E.assessment=(H=(z=v.app)==null?void 0:z.accommodations)==null?void 0:H.assessment),a.value.schedule.periods&&(E.schedule=(W=(B=v.app)==null?void 0:B.schedule)==null?void 0:W.periods),a.value.schedule.classServices&&(E.classServices=(ee=(K=v.app)==null?void 0:K.schedule)==null?void 0:ee.classServices),a.value.documents.ataglancePdfUrl&&(E.ataglancePdfUrl=(le=(me=v.app)==null?void 0:me.documents)==null?void 0:le.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(E.bipPdfUrl=(Z=(he=v.app)==null?void 0:he.documents)==null?void 0:Z.bipPdfUrl),E}function g(){const v=r.students.map(S=>p(S)),E=[],x=[],y={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([S,_])=>{Object.entries(_).forEach(([b,T])=>{T&&(b==="all"?o.forEach(I=>{E.push(y[I])}):E.push(y[b]))})}),v.forEach(S=>{const _=[];Object.entries(a.value).forEach(([b,T])=>{Object.entries(T).forEach(([I,D])=>{if(D)if(I==="all")o.forEach(O=>{const R=S[O]||"";_.push(R?c(R):"")});else{let O=S[I]||"";I.endsWith("Id")?O=O?c(O):"":I==="classServices"?O=Array.isArray(S.classServices)?S.classServices.join(", "):"":I==="schedule"&&(O=S.schedule?Object.entries(S.schedule).map(([R,F])=>`${R}: ${c(F)}`).join("; "):""),_.push(O)}})}),x.push(_)});const C=[E.join(","),...x.map(S=>S.map(_=>`"${String(_).replace(/"/g,'""')}"`).join(","))].join(`
`),P=new Blob([C],{type:"text/csv"}),k=window.URL.createObjectURL(P),w=document.createElement("a");w.href=k,w.download="students-export.csv",w.click(),window.URL.revokeObjectURL(k),n("close")}return(v,E)=>(U(),j("div",a$,[h("div",i$,[h("header",null,[E[17]||(E[17]=h("h2",null,"Export Students",-1)),h("button",{onClick:E[0]||(E[0]=x=>v.$emit("close")),class:"close-btn"},"×")]),h("main",null,[h("p",null,"Export "+te(t.students.length)+" students",1),h("div",o$,[h("div",l$,[E[23]||(E[23]=h("h4",null,"Student Info",-1)),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[1]||(E[1]=x=>a.value.studentData.firstName=x)},null,512),[[xt,a.value.studentData.firstName]]),E[18]||(E[18]=Ne(" First Name "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[2]||(E[2]=x=>a.value.studentData.lastName=x)},null,512),[[xt,a.value.studentData.lastName]]),E[19]||(E[19]=Ne(" Last Name "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[3]||(E[3]=x=>a.value.studentData.grade=x)},null,512),[[xt,a.value.studentData.grade]]),E[20]||(E[20]=Ne(" Grade "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[4]||(E[4]=x=>a.value.studentData.plan=x)},null,512),[[xt,a.value.studentData.plan]]),E[21]||(E[21]=Ne(" Plan Type "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[5]||(E[5]=x=>a.value.studentData.caseManagerId=x)},null,512),[[xt,a.value.studentData.caseManagerId]]),E[22]||(E[22]=Ne(" Case Manager "))])]),h("div",c$,[E[27]||(E[27]=h("h4",null,"Important Dates",-1)),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[6]||(E[6]=x=>a.value.dates.reviewDate=x)},null,512),[[xt,a.value.dates.reviewDate]]),E[24]||(E[24]=Ne(" Plan Review "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[7]||(E[7]=x=>a.value.dates.reevalDate=x)},null,512),[[xt,a.value.dates.reevalDate]]),E[25]||(E[25]=Ne(" Reevaluation "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[8]||(E[8]=x=>a.value.dates.meetingDate=x)},null,512),[[xt,a.value.dates.meetingDate]]),E[26]||(E[26]=Ne(" Meeting Date "))])]),h("div",u$,[E[29]||(E[29]=h("h4",null,"Related Services",-1)),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[9]||(E[9]=x=>a.value.providers.all=x)},null,512),[[xt,a.value.providers.all]]),E[28]||(E[28]=Ne(" All Service Providers "))])]),h("div",d$,[E[32]||(E[32]=h("h4",null,"Accommodations",-1)),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[10]||(E[10]=x=>a.value.accommodations.instruction=x)},null,512),[[xt,a.value.accommodations.instruction]]),E[30]||(E[30]=Ne(" Instructional "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[11]||(E[11]=x=>a.value.accommodations.assessment=x)},null,512),[[xt,a.value.accommodations.assessment]]),E[31]||(E[31]=Ne(" Assessment "))])]),h("div",f$,[E[35]||(E[35]=h("h4",null,"Schedule & Services",-1)),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[12]||(E[12]=x=>a.value.schedule.periods=x)},null,512),[[xt,a.value.schedule.periods]]),E[33]||(E[33]=Ne(" Class Schedule "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[13]||(E[13]=x=>a.value.schedule.classServices=x)},null,512),[[xt,a.value.schedule.classServices]]),E[34]||(E[34]=Ne(" Class Services "))])]),h("div",h$,[E[38]||(E[38]=h("h4",null,"Documents",-1)),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[14]||(E[14]=x=>a.value.documents.ataglancePdfUrl=x)},null,512),[[xt,a.value.documents.ataglancePdfUrl]]),E[36]||(E[36]=Ne(" At-A-Glance "))]),h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":E[15]||(E[15]=x=>a.value.documents.bipPdfUrl=x)},null,512),[[xt,a.value.documents.bipPdfUrl]]),E[37]||(E[37]=Ne(" BIP "))])])]),h("div",{class:"quick-select"},[h("button",{onClick:d},"Select All"),h("button",{onClick:f},"Deselect All")])]),h("footer",null,[h("button",{onClick:E[16]||(E[16]=x=>v.$emit("close")),class:"btn-secondary"},"Cancel"),h("button",{onClick:g,class:"btn-primary",disabled:!l.value},"Export",8,p$)])])]))}},g$=yt(m$,[["__scopeId","data-v-9cb02217"]]),v$={class:"modal-body"},x$={class:"student-info"},y$={class:"case-manager-info"},E$={class:"form-group"},_$={key:0,class:"no-forms-message"},b$={key:1,class:"form-selection"},S$=["id","value"],T$=["for"],A$={class:"form-title"},w$={class:"form-details"},C$={key:0,class:"form-description"},I$={class:"form-date"},k$={key:0,class:"form-group"},D$={class:"teacher-selection"},P$={key:0,class:"no-teachers-message"},F$={key:1,class:"teacher-checkboxes"},R$=["id","value"],O$=["for"],N$={class:"teacher-email"},M$={key:1,class:"form-group"},L$={class:"send-options"},B$={class:"option-item"},U$={class:"option-item"},V$={class:"modal-footer"},$$=["disabled"],j$={key:0},H$={key:1},G$={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s,sendFeedbackForm:i}=px(),{users:a}=Na(),o=ue(""),l=ue([]),c=ue("copy"),u=ue(""),d=ue("success"),f=ue(!1),p=be(()=>s.value||[]),m=be(()=>{var k,w,S;if(!r.student||!a.value)return[];const P=new Set;return(w=(k=r.student.app)==null?void 0:k.schedule)!=null&&w.periods&&Object.values(r.student.app.schedule.periods).forEach(_=>{_&&P.add(_)}),(S=r.student.aeries)!=null&&S.schedule&&Object.values(r.student.aeries.schedule).forEach(_=>{_!=null&&_.teacherId&&P.add(_.teacherId)}),Array.from(P).map(_=>a.value.find(b=>b.id===_)).filter(Boolean).filter(_=>_.role==="teacher")}),g=be(()=>p.value.find(P=>P.id===o.value)),v=be(()=>o.value&&l.value.length>0&&c.value),E=P=>P?(P.seconds?new Date(P.seconds*1e3):new Date(P)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",x=async()=>{if(v.value)try{f.value=!0,u.value="";const P=g.value,k=l.value.map(S=>S.email),w=l.value.map(S=>S.name||S.email).join(", ");if(c.value==="copy")await navigator.clipboard.writeText(P.formUrl),u.value=`Form link copied to clipboard! Send to: ${w}`,d.value="success",y(P,l.value);else if(c.value==="email"){try{const S=await i({formUrl:P.formUrl,studentId:r.student.id,teacherEmails:k,formTitle:P.title,customMessage:null});if(S.success)u.value=`Successfully sent to ${S.sent} teachers`,S.failed>0&&(u.value+=` (${S.failed} failed)`),d.value="success";else throw new Error("Failed to send emails")}catch(S){console.error("Email sending failed:",S),u.value="Failed to send emails. Generating mailto link instead.",d.value="error";const _=`Teacher Feedback Request - ${r.student.firstName} ${r.student.lastName}`,b=`Dear Teachers,

I am requesting your feedback for ${r.student.firstName} ${r.student.lastName} (Grade ${r.student.grade}).

Please complete the following feedback form:
${P.formUrl}

Form: ${P.title}

Thank you for your time and feedback.

Best regards,
${r.currentUser.name||r.currentUser.email}
Case Manager`,T=`mailto:${k.join(",")}?subject=${encodeURIComponent(_)}&body=${encodeURIComponent(b)}`;window.open(T,"_blank"),u.value=`Email client opened for: ${w}`,d.value="success"}y(P,l.value)}n("form-sent",{form:P,student:r.student,teachers:l.value,method:c.value})}catch(P){console.error("Error sending form:",P),u.value="Failed to send form. Please try again.",d.value="error"}finally{f.value=!1}},y=(P,k)=>{const w=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),S={id:`${P.id}_${r.student.id}_${Date.now()}`,formId:P.id,formTitle:P.title,formUrl:P.formUrl,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:k.map(_=>({id:_.id,name:_.name,email:_.email})),sentAt:new Date().toISOString(),method:c.value};w.push(S),localStorage.setItem("casemanage_sent_forms",JSON.stringify(w))},C=()=>{n("close")};return jt(()=>{o.value="",l.value=[],c.value="copy",u.value=""}),(P,k)=>{var w,S;return U(),j("div",{class:"modal-overlay",onClick:C},[h("div",{class:"modal-content",onClick:k[4]||(k[4]=fn(()=>{},["stop"]))},[h("div",{class:"modal-header"},[k[5]||(k[5]=h("h3",null,"Send Teacher Feedback Form",-1)),h("button",{onClick:C,class:"close-btn"},"×")]),h("div",v$,[h("div",x$,[h("h4",null,te(t.student.firstName)+" "+te(t.student.lastName)+" (Grade "+te(t.student.grade)+")",1),h("p",y$,"Case Manager: "+te(((w=t.currentUser)==null?void 0:w.name)||((S=t.currentUser)==null?void 0:S.email)),1)]),h("div",E$,[k[7]||(k[7]=h("label",null,"Select Feedback Form to Send:",-1)),p.value.length===0?(U(),j("div",_$,k[6]||(k[6]=[h("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),h("p",null,[h("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(U(),j("div",b$,[(U(!0),j(Fe,null,je(p.value,_=>(U(),j("div",{key:_.id,class:"form-option"},[Ve(h("input",{type:"radio",id:_.id,value:_.id,"onUpdate:modelValue":k[0]||(k[0]=b=>o.value=b)},null,8,S$),[[ra,o.value]]),h("label",{for:_.id,class:"form-option-label"},[h("div",A$,te(_.title),1),h("div",w$,[_.description?(U(),j("span",C$,te(_.description),1)):Ae("",!0),h("span",I$,"Created: "+te(E(_.createdAt)),1)])],8,T$)]))),128))]))]),o.value?(U(),j("div",k$,[k[9]||(k[9]=h("label",null,"Select Teachers to Send Form To:",-1)),h("div",D$,[m.value.length===0?(U(),j("div",P$,k[8]||(k[8]=[h("p",null,"No teachers found for this student's schedule.",-1)]))):(U(),j("div",F$,[(U(!0),j(Fe,null,je(m.value,_=>(U(),j("div",{key:_.id,class:"checkbox-item"},[Ve(h("input",{type:"checkbox",id:`teacher-${_.id}`,value:_,"onUpdate:modelValue":k[1]||(k[1]=b=>l.value=b)},null,8,R$),[[xt,l.value]]),h("label",{for:`teacher-${_.id}`},[Ne(te(_.name||_.email)+" ",1),h("span",N$,"("+te(_.email)+")",1)],8,O$)]))),128))]))])])):Ae("",!0),o.value&&l.value.length>0?(U(),j("div",M$,[k[12]||(k[12]=h("label",null,"Send Method:",-1)),h("div",L$,[h("div",B$,[Ve(h("input",{type:"radio",id:"copy-link",value:"copy","onUpdate:modelValue":k[2]||(k[2]=_=>c.value=_)},null,512),[[ra,c.value]]),k[10]||(k[10]=h("label",{for:"copy-link"},"Copy form link to clipboard",-1))]),h("div",U$,[Ve(h("input",{type:"radio",id:"email-link",value:"email","onUpdate:modelValue":k[3]||(k[3]=_=>c.value=_)},null,512),[[ra,c.value]]),k[11]||(k[11]=h("label",{for:"email-link"},"Generate email with form link",-1))])])])):Ae("",!0),u.value?(U(),j("div",{key:2,class:et(["status-message",d.value])},te(u.value),3)):Ae("",!0)]),h("div",V$,[h("button",{onClick:C,class:"secondary-btn"},"Cancel"),h("button",{onClick:x,class:"primary-btn",disabled:!v.value||f.value},[f.value?(U(),j("span",j$,"Sending...")):(U(),j("span",H$,te(c.value==="copy"?"Copy Link":"Generate Email"),1))],8,$$)])])])}}},W$=yt(G$,[["__scopeId","data-v-bf0569a5"]]),z$={class:"students-view"},K$={class:"page-header"},q$={class:"header-left"},X$={class:"search-container"},Y$={class:"header-controls"},Q$={class:"filter-group"},J$={key:1,class:"filter-group"},Z$={class:"radio-group"},ej=["value"],tj={class:"filter-group"},rj={class:"radio-group"},nj=["checked"],sj=["checked","disabled"],aj=["checked"],ij={key:0,class:"filters-panel"},oj={class:"filters-content"},lj={class:"filter-group"},cj=["value"],uj={class:"filter-group"},dj=["value"],fj={class:"filter-group"},hj=["value"],pj={class:"filter-group"},mj={class:"content"},gj={key:0},vj={key:1,class:"view-container"},xj={key:0,class:"group-section"},yj={class:"group-header"},Ej={key:2,class:"view-section"},_j={__name:"StudentsView",setup(t){const e=yB(),r=_B(e),n=RB(e,r),s=NB(e),{students:i,userMapObj:a,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:u,paraeducators:d,currentUser:f,isAdmin:p,showProviderView:m,getStudentById:g}=e,{showFilters:v,filteredStudents:E,currentFilters:x,toggleFilters:y,clearFilters:C,applyFilters:P,debouncedApplyFilters:k}=r,{visibleStudents:w,canEditAllStudents:S,canEditOwnStudents:_,canViewAllStudents:b,canAccessTesting:T,canAccessTestingPartial:I,canAccessFilters:D,isClassViewDisabled:O,setViewMode:R,providerViewOptions:F}=n,N=OB(e,r,be(()=>n.visibleStudents.value)),{currentViewMode:V,studentsByClass:L,directAssignmentStudents:z,testingViewStudents:H}=N,{editingStudentId:B,emailingStudentId:W,showExport:K,showAddStudent:ee,showFeedbackDialog:me,feedbackStudentId:le,editStudent:he,emailStudent:Z,handleTeacherFeedback:Q,handleFormSent:ve,handleStudentAdded:X,handleStudentSaved:q,handleNavAction:Y}=s;return be(()=>{var re;return F!=null&&F.value?F.value:((re=f.value)==null?void 0:re.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]}),(ge,re)=>{var ne,ae,xe;return U(),j("div",z$,[st(YB,{"current-user":oe(f),"is-admin":oe(p),onAction:oe(Y)},null,8,["current-user","is-admin","onAction"]),h("div",K$,[h("div",q$,[re[24]||(re[24]=h("h1",null,"Student Management",-1)),h("div",X$,[Ve(h("input",{type:"text","onUpdate:modelValue":re[0]||(re[0]=Ee=>oe(x).search=Ee),onInput:re[1]||(re[1]=(...Ee)=>oe(k)&&oe(k)(...Ee)),placeholder:"Search students...",class:"search-input"},null,544),[[At,oe(x).search]])])]),h("div",Y$,[oe(D)?(U(),j("button",{key:0,onClick:re[2]||(re[2]=(...Ee)=>oe(y)&&oe(y)(...Ee)),class:et(["filter-toggle-btn",{active:oe(v)}])},re[25]||(re[25]=[h("span",null,"🔍",-1),Ne(" Filters ")]),2)):Ae("",!0),h("div",Q$,[Ve(h("select",{"onUpdate:modelValue":re[3]||(re[3]=Ee=>oe(x).sortBy=Ee),onChange:re[4]||(re[4]=Ee=>oe(P)()),class:"sort-select"},re[26]||(re[26]=[Sn('<option value="firstName" data-v-91952bff>First Name</option><option value="lastName" data-v-91952bff>Last Name</option><option value="grade" data-v-91952bff>Grade</option><option value="reviewDate" data-v-91952bff>Review Date</option><option value="reevalDate" data-v-91952bff>Re-evaluation Date</option><option value="meetingDate" data-v-91952bff>Meeting Date</option>',6)]),544),[[vr,oe(x).sortBy]])]),oe(F)&&oe(F).length?(U(),j("div",J$,[h("div",Z$,[(U(!0),j(Fe,null,je(oe(F),Ee=>(U(),j("label",{key:Ee.value,class:et(["radio-btn",{active:oe(x).providerView===Ee.value}])},[Ve(h("input",{type:"radio","onUpdate:modelValue":re[5]||(re[5]=we=>oe(x).providerView=we),value:Ee.value,onChange:re[6]||(re[6]=(...we)=>oe(P)&&oe(P)(...we))},null,40,ej),[[ra,oe(x).providerView]]),Ne(" "+te(Ee.label),1)],2))),128))])])):Ae("",!0),h("div",tj,[h("div",rj,[h("label",{class:et(["radio-btn",{active:oe(x).viewMode==="list"}])},[h("input",{type:"radio",value:"list",checked:oe(x).viewMode==="list",onChange:re[7]||(re[7]=Ee=>oe(R)("list"))},null,40,nj),re[27]||(re[27]=Ne(" List "))],2),h("label",{class:et(["radio-btn",{active:oe(x).viewMode==="class",disabled:oe(O)}])},[h("input",{type:"radio",value:"class",checked:oe(x).viewMode==="class",onChange:re[8]||(re[8]=Ee=>oe(R)("class")),disabled:oe(O)},null,40,sj),h("span",{class:et({strikethrough:oe(O)})},"Class",2)],2),oe(T)?(U(),j("label",{key:0,class:et(["radio-btn",{active:oe(x).viewMode==="testing"}])},[h("input",{type:"radio",value:"testing",checked:oe(x).viewMode==="testing",onChange:re[9]||(re[9]=Ee=>oe(R)("testing"))},null,40,aj),re[28]||(re[28]=Ne(" SS-Testing "))],2)):Ae("",!0)])]),h("button",{onClick:re[10]||(re[10]=(...Ee)=>oe(C)&&oe(C)(...Ee)),class:"reset-btn",title:"Reset all filters"}," 🔄 ")])]),oe(v)?(U(),j("div",ij,[h("div",oj,[h("div",lj,[re[30]||(re[30]=h("label",null,"Case Manager",-1)),Ve(h("select",{"onUpdate:modelValue":re[11]||(re[11]=Ee=>oe(x).cm=Ee),onChange:re[12]||(re[12]=Ee=>oe(P)()),class:"filter-select"},[re[29]||(re[29]=h("option",{value:"all"},"All Case Managers",-1)),(U(!0),j(Fe,null,je(oe(o),Ee=>(U(),j("option",{key:Ee.id,value:Ee.id},te(Ee.name||Ee.email||Ee.id),9,cj))),128))],544),[[vr,oe(x).cm]])]),h("div",uj,[re[32]||(re[32]=h("label",null,"Teacher",-1)),Ve(h("select",{"onUpdate:modelValue":re[13]||(re[13]=Ee=>oe(x).teacher=Ee),onChange:re[14]||(re[14]=Ee=>oe(P)()),class:"filter-select"},[re[31]||(re[31]=h("option",{value:"all"},"All Teachers",-1)),(U(!0),j(Fe,null,je(oe(l),Ee=>(U(),j("option",{key:Ee.id,value:Ee.id},te(Ee.name||Ee.email||Ee.id),9,dj))),128))],544),[[vr,oe(x).teacher]])]),h("div",fj,[re[34]||(re[34]=h("label",null,"Paraeducator",-1)),Ve(h("select",{"onUpdate:modelValue":re[15]||(re[15]=Ee=>oe(x).paraeducator=Ee),onChange:re[16]||(re[16]=Ee=>oe(P)()),class:"filter-select"},[re[33]||(re[33]=h("option",{value:"all"},"All Paraeducators",-1)),(U(!0),j(Fe,null,je(oe(d),Ee=>(U(),j("option",{key:Ee.id,value:Ee.id},te(Ee.name||Ee.email||Ee.id),9,hj))),128))],544),[[vr,oe(x).paraeducator]])]),h("div",pj,[re[36]||(re[36]=h("label",null,"Plan Type",-1)),Ve(h("select",{"onUpdate:modelValue":re[17]||(re[17]=Ee=>oe(x).plan=Ee),onChange:re[18]||(re[18]=Ee=>oe(P)()),class:"filter-select"},re[35]||(re[35]=[h("option",{value:"all"},"All Plans",-1),h("option",{value:"IEP"},"IEP",-1),h("option",{value:"504"},"504",-1)]),544),[[vr,oe(x).plan]])])])])):Ae("",!0),h("div",mj,[oe(V)==="list"?(U(),j("div",gj,[st(Pf,{students:oe(w),"user-map":oe(a),"current-user":oe(f),"can-edit-all":oe(S),"can-edit-own":oe(_),"can-view-all":oe(b),"can-access-testing":oe(T),"can-access-testing-partial":oe(I),"aide-schedule":((ne=oe(f))==null?void 0:ne.role)==="paraeducator"?oe(u):{},onEdit:oe(he),onEmail:oe(Z),onTeacherFeedback:oe(Q)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):oe(V)==="class"?(U(),j("div",vj,[oe(z).length>0?(U(),j("div",xj,[re[37]||(re[37]=h("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),st(Pf,{students:oe(z),"user-map":oe(a),"current-user":oe(f),"can-edit-all":oe(S),"can-edit-own":oe(_),"can-view-all":oe(b),"can-access-testing":oe(T),"can-access-testing-partial":oe(I),"aide-schedule":((ae=oe(f))==null?void 0:ae.role)==="paraeducator"?oe(u):{},onEdit:oe(he),onEmail:oe(Z),onTeacherFeedback:oe(Q)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Ae("",!0),(U(!0),j(Fe,null,je(oe(L),(Ee,we)=>{var Te;return U(),j("div",{key:we,class:"group-section"},[h("h3",yj,"Period "+te(we),1),st(Pf,{students:Ee,"user-map":oe(a),"current-user":oe(f),"can-edit-all":oe(S),"can-edit-own":oe(_),"can-view-all":oe(b),"can-access-testing":oe(T),"can-access-testing-partial":oe(I),"aide-schedule":((Te=oe(f))==null?void 0:Te.role)==="paraeducator"?oe(u):{},onEdit:oe(he),onEmail:oe(Z),onTeacherFeedback:oe(Q)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):oe(V)==="testing"?(U(),j("div",Ej,[st(Pf,{students:oe(H),"user-map":oe(a),"current-user":oe(f),"can-edit-all":oe(S),"can-edit-own":oe(_),"can-view-all":oe(b),"can-access-testing":oe(T),"can-access-testing-partial":oe(I),"testing-view":!0,"aide-schedule":((xe=oe(f))==null?void 0:xe.role)==="paraeducator"?oe(u):{},onEdit:oe(he),onEmail:oe(Z),onTeacherFeedback:oe(Q)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Ae("",!0)]),oe(B)?(U(),Xr(zV,{key:1,"student-id":oe(B),users:{userRoles:oe(c)},onClose:re[19]||(re[19]=Ee=>B.value=null),onSaved:oe(q)},null,8,["student-id","users","onSaved"])):Ae("",!0),oe(W)?(U(),Xr(s$,{key:2,student:oe(g)(oe(W)),"user-map":oe(a),onClose:re[20]||(re[20]=Ee=>W.value=null)},null,8,["student","user-map"])):Ae("",!0),oe(K)?(U(),Xr(g$,{key:3,students:oe(i),"user-map":oe(a),onClose:re[21]||(re[21]=Ee=>K.value=!1)},null,8,["students","user-map"])):Ae("",!0),oe(ee)?(U(),Xr(vI,{key:4,users:{userRoles:oe(c)},onClose:re[22]||(re[22]=Ee=>ee.value=!1),onSaved:oe(X)},null,8,["users","onSaved"])):Ae("",!0),oe(me)?(U(),Xr(W$,{key:5,student:oe(g)(oe(le)),"current-user":oe(f),onClose:re[23]||(re[23]=Ee=>me.value=!1),onFormSent:oe(ve)},null,8,["student","current-user","onFormSent"])):Ae("",!0)])}}},Gb=yt(_j,[["__scopeId","data-v-91952bff"]]),bj={class:"login-container"},Sj={__name:"LoginView",setup(t){const e=vi(),r=async()=>{try{const{user:n}=await tw(nr,qC),s=at(Ye,"users",n.uid);(await sr(s)).exists()||await tr(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(U(),j("div",bj,[s[0]||(s[0]=h("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=h("p",null,"Please sign in with your Google account:",-1)),h("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},Tj=yt(Sj,[["__scopeId","data-v-d9b5a53b"]]),Aj={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"],methods:{getStatusIcon(t){switch(t){case"not-active":return"⭐";case"not-working":return"❌";default:return""}},getStatusTooltip(t){switch(t){case"not-active":return"⭐ = Not active";case"not-working":return"❌ = Not working";default:return""}}}},wj={class:"admin-tab-bar"},Cj=["onClick","title"];function Ij(t,e,r,n,s,i){return U(),j("div",wj,[(U(!0),j(Fe,null,je(r.tabs,a=>(U(),j("button",{key:a.key,class:et({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key),title:i.getStatusTooltip(a.status)},[Ne(te(a.label)+" ",1),a.status?(U(),j("span",{key:0,class:et(["status-indicator",a.status])},te(i.getStatusIcon(a.status)),3)):Ae("",!0)],10,Cj))),128))])}const kj=yt(Aj,[["render",Ij],["__scopeId","data-v-5be36c07"]]),Dj={name:"UserAddForm",setup(){const t=ba(KC,"addUserWithRole"),e=lo(),r=Cs({name:"",email:"",role:"",provider:"",aeriesId:""}),n=ue(null),s=ue(""),i=ue(!1),a=ue(null),o=pp,{appSettings:l,loadAppSettings:c}=ha(),u=be(()=>{if(l&&l.value&&l.value.serviceProviders){const y=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(C=>y.find(P=>P.abbreviation===C)||{name:C,abbreviation:C})}return[]}),d=(y,C=!1)=>{s.value=y,i.value=C,setTimeout(()=>{s.value="",i.value=!1},5e3)},f=async(y,C,P,k,w)=>{try{const S={name:y,email:C,role:P,provider:k,aeriesId:w,createdAt:new Date,status:"active"};return{success:!0,userId:(await bC(Ft(e,"users"),S)).id}}catch(S){throw S}},p=async(y,C,P,k,w)=>{var S,_;try{try{return await t({name:y,email:C,role:P,provider:k,aeriesId:w}),{success:!0,method:"cloud-function"}}catch(b){return b.code==="functions/already-exists"||(S=b.message)!=null&&S.includes("409")||(_=b.message)!=null&&_.includes("already exists")?(console.log(`User ${C} already exists in Firebase Auth, skipping...`),{success:!0,method:"already-exists",message:"User already exists"}):(await f(y,C,P,k,w),{success:!0,method:"firestore"})}}catch(b){return{success:!1,error:b.message}}},m=async()=>{if(!Ss("addUser",5,6e4).allowed){d("Too many requests. Please wait before adding another user.",!0);return}const C=cB(r),P=lB(C);if(!P.isValid){d(`Please fix the following errors:
${P.errors.join(`
`)}`,!0);return}const k=["name","email","aeriesId"];for(const S of k)if(C[S]){const _=Hr(C[S]);if(!_.isSafe){d(`Security threat detected in ${S}: ${_.threats.join(", ")}`,!0);return}}Object.assign(r,C);const w=await p(r.name,r.email,r.role,r.provider,r.aeriesId);w.success?(d(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):d(`Error adding user: ${w.error}`,!0)},g=y=>{const C=y.target.files[0];if(C){const P=Fc(C,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!P.isValid){d(P.error,!0),y.target.value="";return}const k=Hr(C.name);if(!k.isSafe){d(`File name contains potentially dangerous content: ${k.threats.join(", ")}`,!0),y.target.value="";return}n.value=C}},v=async()=>{if(!n.value){d("Please select a file first",!0);return}const y=n.value.name.toLowerCase();if(!(y.endsWith(".csv")||y.endsWith(".xls")||y.endsWith(".xlsx"))){d("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}d("Processing file...");try{y.endsWith(".csv")?await E(n.value):await x(n.value)}catch(C){d(`Error processing file: ${C.message}`,!0),console.error("Bulk upload error:",C)}},E=async y=>new Promise((C,P)=>{const k=new FileReader;k.onload=async w=>{try{const _=w.target.result.trim().split(/\r?\n/);if(_.length===0){P(new Error("The CSV file is empty."));return}const b=V=>{const L=[];let z="",H=!1;for(let B=0;B<V.length;B++){const W=V[B];W==='"'?H=!H:W===","&&!H?(L.push(z.trim()),z=""):z+=W}return L.push(z.trim()),L};let T=0;const I={name:0,email:1,role:2,provider:3,aeriesId:4},D=b(_[0]);D.map(V=>V.toLowerCase()).some(V=>V.includes("name")||V.includes("email")||V.includes("role"))&&(D.forEach((V,L)=>{const z=V.trim().toLowerCase();(z==="name"||z==="displayname")&&(I.name=L),z==="email"&&(I.email=L),z==="role"&&(I.role=L),(z==="provider"||z==="providertype")&&(I.provider=L),(z==="aeriesid"||z==="aeries_id"||z==="teacherid")&&(I.aeriesId=L)}),T=1);let R=0;const F=[];for(let V=T;V<_.length;V++){const L=_[V].trim();if(!L)continue;const z=b(L),H=(z[I.name]||"").trim(),B=(z[I.email]||"").trim(),W=(z[I.role]||"").trim(),K=(z[I.provider]||"").trim(),ee=(z[I.aeriesId]||"").trim(),me=H.replace(/^"|"$/g,""),le=B.replace(/^"|"$/g,""),he=W.replace(/^"|"$/g,""),Z=K.replace(/^"|"$/g,""),Q=ee.replace(/^"|"$/g,"");if(!me||!le||!he){F.push(`Line ${V+1}: Missing name, email, or role.`);continue}if(!tb(he)){F.push(`Line ${V+1}: Invalid role "${he}".`);continue}const ve=await p(me,le,he,Z,Q);ve.success?(R++,ve.method==="already-exists"&&console.log(`Line ${V+1}: User ${le} already exists, skipped`)):F.push(`Line ${V+1}: ${ve.error}`)}let N=`${R} users added successfully.`;F.length>0&&(N+=`
${F.length} errors:
`+F.join(`
`)),d(N,F.length>0),n.value=null,a.value&&(a.value.value=""),C()}catch(S){P(new Error(`Error processing CSV file: ${S.message}`))}},k.onerror=()=>P(new Error("Failed to read the CSV file.")),k.readAsText(y)}),x=async y=>new Promise((C,P)=>{const k=new FileReader;k.onload=async w=>{try{if(typeof XLSX>"u"){P(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const S=new Uint8Array(w.target.result),_=XLSX.read(S,{type:"array"}),b=_.SheetNames[0],T=_.Sheets[b],I=XLSX.utils.sheet_to_json(T,{defval:""});if(I.length===0){P(new Error("The Excel file is empty or unrecognized."));return}let D=0;const O=[];for(let F=0;F<I.length;F++){const N=I[F];let V="",L="",z="",H="",B="";for(const ee in N){const me=ee.toLowerCase(),le=(""+N[ee]).trim();(me==="name"||me==="displayname")&&!V?V=le:me==="email"&&!L?L=le:me==="role"&&!z?z=le:(me==="provider"||me==="providertype")&&!H?H=le:(me==="aeriesid"||me==="aeries_id"||me==="teacherid")&&!B&&(B=le)}const W=Object.values(N).map(ee=>(""+ee).trim());if(!V&&W[0]&&(V=W[0]),!L&&W[1]&&(L=W[1]),!z&&W[2]&&(z=W[2]),!H&&W[3]&&(H=W[3]),!B&&W[4]&&(B=W[4]),!V||!L||!z){O.push(`Row ${F+1}: Missing name, email, or role.`);continue}if(!tb(z)){O.push(`Row ${F+1}: Invalid role "${z}".`);continue}const K=await p(V,L,z,H,B);K.success?(D++,K.method==="already-exists"&&console.log(`Row ${F+1}: User ${L} already exists, skipped`)):O.push(`Row ${F+1}: ${K.error}`)}let R=`${D} users added successfully.`;O.length>0&&(R+=`
${O.length} errors:
`+O.join(`
`)),d(R,O.length>0),n.value=null,a.value&&(a.value.value=""),C()}catch(S){P(new Error(`Error processing Excel file: ${S.message}`))}},k.onerror=()=>P(new Error("Failed to read the Excel file.")),k.readAsArrayBuffer(y)});return jt(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:m,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:g,uploadBulkUsers:v,appSettings:l}}},Pj={class:"add-user-wrapper"},Fj={class:"add-single"},Rj=["value"],Oj={key:0},Nj=["value"],Mj={class:"add-bulk"},Lj=["disabled"];function Bj(t,e,r,n,s,i){return U(),j("div",Pj,[h("div",Fj,[e[16]||(e[16]=h("h3",null,"Add Single User",-1)),h("form",{onSubmit:e[5]||(e[5]=fn((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[h("div",null,[h("label",null,[e[8]||(e[8]=Ne(" Name: ")),Ve(h("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[At,n.singleUser.name]])])]),h("div",null,[h("label",null,[e[9]||(e[9]=Ne(" Email: ")),Ve(h("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[At,n.singleUser.email]])])]),h("div",null,[h("label",null,[e[11]||(e[11]=Ne(" Role: ")),Ve(h("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=h("option",{value:"",disabled:""},"Select role...",-1)),(U(!0),j(Fe,null,je(n.validRoles,a=>(U(),j("option",{key:a,value:a},te(a),9,Rj))),128))],512),[[vr,n.singleUser.role]])])]),n.providerOptions.length>0?(U(),j("div",Oj,[h("label",null,[e[13]||(e[13]=Ne(" Provider Type: ")),Ve(h("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=h("option",{value:""},"None",-1)),(U(!0),j(Fe,null,je(n.providerOptions,a=>(U(),j("option",{key:a.abbreviation,value:a.abbreviation},te(a.name)+" ("+te(a.abbreviation)+") ",9,Nj))),128))],512),[[vr,n.singleUser.provider]])])])):Ae("",!0),h("div",null,[h("label",null,[e[14]||(e[14]=Ne(" Aeries ID: ")),Ve(h("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[At,n.singleUser.aeriesId]])])]),e[15]||(e[15]=h("button",{type:"submit"},"Add User",-1))],32)]),h("div",Mj,[e[17]||(e[17]=h("h3",null,"Bulk Upload Users",-1)),h("div",null,[h("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),h("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,Lj)]),e[18]||(e[18]=Sn(`<h4 data-v-4932f701>Example Formatting</h4><div data-v-4932f701>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-4932f701><p data-v-4932f701><strong data-v-4932f701>CSV Format:</strong></p><pre data-v-4932f701>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-4932f701><strong data-v-4932f701>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-4932f701><strong data-v-4932f701>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-4932f701><strong data-v-4932f701>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(U(),j("div",{key:0,class:et(["status-msg",{error:n.isError}])},te(n.statusMessage),3)):Ae("",!0)])}const Uj=yt(Dj,[["render",Bj],["__scopeId","data-v-4932f701"]]),Zc=20,Vj={name:"UserTable",setup(){const t=lo(),e=ue([]),r=ue(1),n=ue("name"),s=ue(""),i=ue(null),a=ue(""),o=ue(!1),l=ue(!1),c=ue([]),u=ue(null),d=pp,f=ha(),p=f.appSettings,m=f.loadAppSettings;let g=null;const v=()=>{g&&clearTimeout(g),g=setTimeout(()=>{C()},300)},E=be(()=>{var R;return Array.isArray((R=p.value)==null?void 0:R.serviceProviders)&&p.value.serviceProviders.length>0}),x=be(()=>{var R;return((R=p.value)==null?void 0:R.serviceProviders)||[]}),y=(R,F=!1)=>{a.value=R,o.value=F,setTimeout(()=>{a.value="",o.value=!1},3e3)},C=()=>{r.value=1,P()},P=async(R="first")=>{y("");const F=Ft(t,"users");let N;if(s.value&&n.value==="name"){const z=(await Qt(lr(F,ln("name"),Qs(1e3)))).docs.map(H=>({id:H.id,...H.data()})).filter(H=>(H.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=z,l.value=!1;return}s.value&&n.value==="email"?N=lr(F,ln("email"),Nr("email",">=",s.value),Nr("email","<=",s.value+""),Qs(Zc)):s.value?N=lr(F,ln("name"),Nr("name",">=",s.value),Nr("name","<=",s.value+""),Qs(Zc)):N=lr(F,ln("name"),Qs(Zc)),R==="next"&&c.value.length&&(N=lr(F,ln(n.value),q0(c.value[c.value.length-1]),Qs(Zc)));const V=await Qt(N);c.value=V.docs,i.value=null,e.value=c.value.map(L=>({id:L.id,...L.data()})),l.value=V.size===Zc},k=R=>{i.value||(i.value=R,u.value={...e.value.find(F=>F.id===R)})},w=()=>{i.value=null,u.value=null,P()},S=(R,F,N)=>{u.value&&u.value.id===R&&(u.value[F]=N)},_=async R=>{var F,N;if(!(!u.value||u.value.id!==R))try{const V={};u.value.name!==void 0&&(V.name=((F=u.value.name)==null?void 0:F.trim())||null),u.value.title!==void 0&&(V.title=((N=u.value.title)==null?void 0:N.trim())||null),u.value.role!==void 0&&(V.role=u.value.role),u.value.provider!==void 0&&(V.provider=u.value.provider||null),await up(at(t,"users",R),V),y("✅ User updated."),i.value=null,u.value=null,P()}catch(V){console.error("Error updating user:",V),y(`❌ Error updating user: ${V.message}`,!0)}},b=async R=>{if(confirm("Are you sure you want to delete this user?"))try{await zo(at(t,"users",R)),y("✅ User deleted."),i.value=null,u.value=null,P()}catch(F){console.error("Error deleting user:",F),y(`❌ Error deleting user: ${F.message}`,!0)}},T=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const F=await Qt(Ft(t,"users"));await Promise.all(F.docs.map(N=>zo(at(t,"users",N.id)))),y("✅ All users deleted."),r.value=1,P()}catch(F){console.error("Error deleting all users:",F),y(`❌ Error deleting all users: ${F.message}`,!0)}},I=()=>{r.value++,P("next")},D=()=>{r.value>1&&(r.value--,P())},O=R=>{var z,H;if(!R)return"";const F=((z=p.value)==null?void 0:z.serviceProviders)||[],N=((H=p.value)==null?void 0:H.customServiceProviders)||[];[...F,...N];const L=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Adapted PE",abbreviation:"APE"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf/Hard of Hearing",abbreviation:"DHH"},{name:"Vision Services",abbreviation:"VI"},{name:"Orientation & Mobility",abbreviation:"OM"},{name:"Other",abbreviation:"OTHER"}].find(B=>B.abbreviation===R);return L?`${L.name} (${L.abbreviation})`:R};return jt(async()=>{await m(),P()}),Ra(()=>{g&&clearTimeout(g)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:d,handleSearch:C,debouncedHandleSearch:v,startEdit:k,cancelEdit:w,updateUserField:S,saveUser:_,deleteUser:b,deleteAllUsers:T,loadNextPage:I,loadPreviousPage:D,getProviderLabel:O,appSettings:p,editingUser:u,providersLoaded:E,serviceProviders:x}}},$j={class:"admin-form-row"},jj={class:"user-admin-table users-table striped"},Hj={key:0},Gj=["data-userid"],Wj=["value","disabled","onInput"],zj=["value","disabled","onInput"],Kj=["disabled","value","onChange"],qj=["value"],Xj={key:0},Yj={key:0},Qj={key:1},Jj=["value"],Zj={key:1},eH={class:"admin-action-btns"},tH=["onClick"],rH=["onClick"],nH=["onClick"],sH={class:"admin-pagination"},aH=["disabled"],iH=["disabled"];function oH(t,e,r,n,s,i){return U(),j("div",null,[e[14]||(e[14]=h("h2",null,"Edit Users",-1)),h("div",$j,[Ve(h("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchTerm=a),placeholder:"Search by name or email",onInput:e[1]||(e[1]=(...a)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...a))},null,544),[[At,n.searchTerm]]),Ve(h("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchType=a),onChange:e[3]||(e[3]=(...a)=>n.handleSearch&&n.handleSearch(...a))},e[9]||(e[9]=[h("option",{value:"name"},"Name",-1),h("option",{value:"email"},"Email",-1)]),544),[[vr,n.searchType]]),h("button",{onClick:e[4]||(e[4]=(...a)=>n.deleteAllUsers&&n.deleteAllUsers(...a)),style:{"margin-left":"auto",background:"#f44336",color:"#fff",padding:"0.3rem 0.8rem",border:"none","border-radius":"4px",cursor:"pointer"}}," Delete All Users ")]),h("div",{class:et(["admin-status-msg",{error:n.isError}])},te(n.statusMessage),3),h("div",null,[h("table",jj,[e[13]||(e[13]=h("thead",null,[h("tr",null,[h("th",null,"Name"),h("th",null,"Title"),h("th",null,"Email"),h("th",null,"Role"),h("th",null,"Provider Type"),h("th",{style:{"text-align":"center"}},"Actions")])],-1)),h("tbody",null,[n.users.length===0?(U(),j("tr",Hj,e[10]||(e[10]=[h("td",{colspan:"5"},"No users found.",-1)]))):Ae("",!0),(U(!0),j(Fe,null,je(n.users,a=>(U(),j("tr",{key:a.id,class:et({"active-row":n.activeRowId===a.id}),"data-userid":a.id},[h("td",null,[h("input",{type:"text",value:a.name||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"name",o.target.value)},null,40,Wj)]),h("td",null,[h("input",{type:"text",value:a.title||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"title",o.target.value)},null,40,zj)]),h("td",null,te(a.email),1),h("td",null,[h("select",{class:"editable-select",disabled:n.activeRowId!==a.id,value:a.role,onChange:o=>n.updateUserField(a.id,"role",o.target.value)},[(U(!0),j(Fe,null,je(n.validRoles,o=>(U(),j("option",{key:o,value:o},te(o.replace(/_/g," ")),9,qj))),128))],40,Kj)]),n.providersLoaded?(U(),j("td",Xj,[n.activeRowId!==a.id?(U(),j("span",Yj,te(a.provider||"—"),1)):(U(),j("span",Qj,[Ve(h("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.editingUser.provider=o)},[e[11]||(e[11]=h("option",{value:""},"None",-1)),(U(!0),j(Fe,null,je(n.serviceProviders,o=>(U(),j("option",{key:o,value:o},te(o),9,Jj))),128))],512),[[vr,n.editingUser.provider]])]))])):(U(),j("td",Zj,e[12]||(e[12]=[h("span",null,"Loading...",-1)]))),h("td",eH,[n.activeRowId!==a.id?(U(),j("button",{key:0,class:"admin-action-btn edit",onClick:o=>n.startEdit(a.id)}," ✏️ ",8,tH)):(U(),j(Fe,{key:1},[h("button",{class:"admin-action-btn save",onClick:o=>n.saveUser(a.id)},"💾",8,rH),h("button",{class:"admin-action-btn cancel",onClick:e[6]||(e[6]=(...o)=>n.cancelEdit&&n.cancelEdit(...o))},"❌"),h("button",{class:"admin-action-btn delete",onClick:o=>n.deleteUser(a.id)},"🗑️",8,nH)],64))])],10,Gj))),128))])])]),h("div",sH,[h("button",{onClick:e[7]||(e[7]=(...a)=>n.loadPreviousPage&&n.loadPreviousPage(...a)),disabled:n.currentPage===1}," Previous ",8,aH),h("span",null,"Page "+te(n.currentPage),1),h("button",{onClick:e[8]||(e[8]=(...a)=>n.loadNextPage&&n.loadNextPage(...a)),disabled:!n.hasNextPage}," Next ",8,iH)])])}const lH=yt(Vj,[["render",oH],["__scopeId","data-v-025d820e"]]),cH=[nt.VIEW_USERS,nt.EDIT_USER,nt.DELETE_USER,nt.MANAGE_SUBJECTS,nt.MANAGE_ROLES,nt.VIEW_STUDENTS,nt.EDIT_STUDENT_CM,nt.EDIT_STUDENT_ALL],Wb=[nt.EDIT_USER,nt.DELETE_USER,nt.MANAGE_SUBJECTS,nt.MANAGE_ROLES,nt.EDIT_STUDENT_CM,nt.EDIT_STUDENT_ALL],uH={[nt.VIEW_USERS]:"View Users",[nt.EDIT_USER]:"Edit User",[nt.DELETE_USER]:"Delete User",[nt.MANAGE_SUBJECTS]:"Manage Subjects",[nt.MANAGE_ROLES]:"Manage Roles",[nt.VIEW_STUDENTS]:"View Students",[nt.EDIT_STUDENT_CM]:"Edit Students (Own Caseload)",[nt.EDIT_STUDENT_ALL]:"Edit All Students"},dH={name:"PermissionsMatrix",setup(){const t=lo(),e="config/permissions_matrix",r=Cs({}),n=ue(""),s=ue(!1),i=pp,a=cH,o=uH,l=(g,v=!1)=>{n.value=g,s.value=v,setTimeout(()=>{n.value="",s.value=!1},3e3)},c=async()=>{try{const g=at(t,e),v=await sr(g);if(v.exists()){const E=v.data();Object.assign(r,E)}else Object.assign(r,Bl)}catch(g){console.error("Error loading permissions matrix:",g),Object.assign(r,Bl)}},u=(g,v,E)=>{if(Wb.includes(v)){console.log(`Permission ${v} is read-only and cannot be changed`);return}if(r[g]||(r[g]=[]),E)r[g].includes(v)||r[g].push(v);else{const x=r[g].indexOf(v);x>-1&&r[g].splice(x,1)}},d=g=>Wb.includes(g),f=g=>r[g]?r[g].includes(nt.TESTING_ALL)?"all":r[g].includes(nt.TESTING_PARTIAL)?"partial":"none":"none",p=(g,v)=>{r[g]||(r[g]=[]),[nt.TESTING,nt.TESTING_ALL,nt.TESTING_PARTIAL].forEach(x=>{const y=r[g].indexOf(x);y>-1&&r[g].splice(y,1)}),v==="all"?r[g].push(nt.TESTING_ALL):v==="partial"&&r[g].push(nt.TESTING_PARTIAL)},m=async()=>{try{await tr(at(t,e),r),l("✅ Permissions updated.",!1)}catch(g){console.error("Error saving permissions:",g),l(`❌ Error saving: ${g.message}`,!0)}};return jt(()=>{c()}),{matrix:r,statusMessage:n,isError:s,validRoles:i,actionList:a,actionLabels:o,updatePermission:u,isReadOnlyPermission:d,getTestingLevel:f,updateTestingPermission:p,savePermissions:m}}},fH={class:"permissions-table-admin"},hH={style:{"font-weight":"bold"}},pH=["data-role","data-action","checked","disabled","onChange"],mH={key:0,class:"read-only-indicator",title:"This permission matches Firebase security rules and cannot be changed"},gH={style:{"text-align":"center"}},vH=["value","onChange"];function xH(t,e,r,n,s,i){return U(),j("div",null,[e[4]||(e[4]=h("h3",null,"Role Permissions Matrix",-1)),e[5]||(e[5]=h("div",{class:"permissions-note"},[h("p",null,[h("strong",null,"Note:"),Ne(" Permissions marked with 🔒 are read-only and match Firebase security rules. These cannot be changed to ensure database security consistency. Only view permissions and testing access can be modified.")])],-1)),h("table",fH,[h("thead",null,[h("tr",null,[e[1]||(e[1]=h("th",{style:{"min-width":"120px"}},"Role",-1)),(U(!0),j(Fe,null,je(n.actionList,a=>(U(),j("th",{key:a,style:{"min-width":"110px"}},te(n.actionLabels[a]),1))),128)),e[2]||(e[2]=h("th",{style:{"min-width":"120px"}},"Testing Access",-1))])]),h("tbody",null,[(U(!0),j(Fe,null,je(n.validRoles,a=>(U(),j("tr",{key:a},[h("td",hH,te(a),1),(U(!0),j(Fe,null,je(n.actionList,o=>{var l;return U(),j("td",{key:o,style:{"text-align":"center"}},[h("input",{type:"checkbox","data-role":a,"data-action":o,checked:(l=n.matrix[a])==null?void 0:l.includes(o),disabled:n.isReadOnlyPermission(o),class:et({"read-only":n.isReadOnlyPermission(o)}),onChange:c=>n.updatePermission(a,o,c.target.checked)},null,42,pH),n.isReadOnlyPermission(o)?(U(),j("span",mH,"🔒")):Ae("",!0)])}),128)),h("td",gH,[h("select",{value:n.getTestingLevel(a),onChange:o=>n.updateTestingPermission(a,o.target.value),style:{width:"100px",padding:"2px"}},e[3]||(e[3]=[h("option",{value:"none"},"None",-1),h("option",{value:"partial"},"Partial",-1),h("option",{value:"all"},"All",-1)]),40,vH)])]))),128))])]),h("button",{onClick:e[0]||(e[0]=(...a)=>n.savePermissions&&n.savePermissions(...a)),style:{padding:"0.5em 1.4em","font-size":"1.08em"}}," Save "),h("span",{style:_n({marginLeft:"1em",fontSize:"1em",color:n.isError?"#b42c2c":"#267838"})},te(n.statusMessage),5)])}const yH=yt(dH,[["render",xH],["__scopeId","data-v-0d793d95"]]),EH={class:"admin-students"},_H={class:"admin-form-row"},bH={class:"search-container"},SH={class:"user-admin-table students-table striped"},TH={key:0},AH=["data-id"],wH=["value","disabled","onInput"],CH=["value","disabled","onInput"],IH=["value","disabled","onInput"],kH=["value","disabled","onInput"],DH=["title"],PH={class:"admin-action-btns"},FH=["onClick"],RH=["onClick"],OH=["onClick"],NH={class:"admin-pagination"},MH=["disabled"],LH=["disabled"],Vm=50,BH={__name:"AdminStudents",setup(t){const e=lo(),{students:r,fetchStudents:n,updateStudent:s,deleteStudent:i}=Oa(),a=ue(""),o=ue([]),l=ue(1),c=ue(null),u=ue({}),d=ue(""),f=ue(!1);let p=null;const m=()=>{p&&clearTimeout(p),p=setTimeout(()=>{x()},300)},g=be(()=>{const O=(l.value-1)*Vm,R=O+Vm;return o.value.slice(O,R)}),v=be(()=>Math.ceil(o.value.length/Vm)),E=(O,R=!1)=>{d.value=O,f.value=R,setTimeout(()=>{d.value="",f.value=!1},5e3)},x=()=>{if(!Ss("studentSearch",20,6e4).allowed){E("Too many search requests. Please wait before searching again.",!0);return}const R=cn(a.value,{trim:!0,maxLength:100,removeDangerous:!0}),F=Hr(R);if(!F.isSafe){E(`Security threat detected in search: ${F.threats.join(", ")}`,!0),a.value=R;return}R!==a.value&&(a.value=R);const N=R.toLowerCase();N?o.value=r.value.filter(V=>{const L=ct(V,"firstName")||"",z=ct(V,"lastName")||"";return`${L} ${z}`.toLowerCase().includes(N)}):o.value=r.value,l.value=1},y=O=>{if(c.value)return;const R=r.value.find(F=>F.id===O);R&&(c.value=O,u.value={...R})},C=()=>{c.value=null,u.value={}},P=(O,R,F)=>{if(u.value.id===O){let N=F;if(typeof F=="string"){N=cn(F,{trim:!0,maxLength:R==="caseManagerId"?50:100,removeDangerous:!0});const V=Hr(N);if(!V.isSafe){E(`Security threat detected in ${R}: ${V.threats.join(", ")}`,!0);return}const L=fd(N,{max:R==="caseManagerId"?50:100,fieldName:R});if(!L.isValid){E(L.error,!0);return}}u.value[R]=N}},k=async O=>{try{if(!Ss("saveStudent",10,6e4).allowed){E("Too many save requests. Please wait before saving again.",!0);return}const F={};if(Object.keys(u.value).forEach(z=>{z!=="id"&&u.value[z]!==r.value.find(H=>H.id===O)[z]&&(F[z]=u.value[z])}),Object.keys(F).length===0){C();return}const N=cI(F),V=lI(N,{isNew:!1});if(!V.isValid){E(`Validation failed: ${V.errors.join(", ")}`,!0);return}Object.assign(u.value,N),await s(O,N);const L=r.value.findIndex(z=>z.id===O);L!==-1&&(r.value[L]={...r.value[L],...N}),E("✅ Student updated.")}catch(R){E("❌ Update failed.",!0),console.error("Update error:",R)}finally{C()}},w=async O=>{if(!Ss("deleteStudent",5,3e5).allowed){E("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await i(O),E("✅ Student deleted.");const F=r.value.findIndex(N=>N.id===O);F!==-1&&r.value.splice(F,1),x()}catch(F){E("❌ Delete failed.",!0),console.error("Delete error:",F)}},S=async()=>{if(!Ss("deleteAllStudents",1,36e5).allowed){E("Delete all operation rate limited. Please wait before trying again.",!0);return}const R=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(R)!=="DELETE ALL STUDENTS"){E("Delete all operation cancelled.",!1);return}try{E("Deleting all students...");const N=Z1(e);let V=0;for(const L of r.value)N.delete(at(e,"students",L.id)),V++,V>=500&&(await N.commit(),V=0);V>0&&await N.commit(),r.value=[],o.value=[],E("✅ All students deleted.")}catch(N){E("❌ Failed to delete all students.",!0),console.error("Delete all error:",N)}},_=O=>{if(!O)return"N/A";try{if(O&&typeof O.toDate=="function")return O.toDate().toLocaleDateString();const R=new Date(O);return isNaN(R.getTime())?"Invalid Date":R.toLocaleDateString()}catch{return"Invalid Date"}},b=O=>{var R;return((R=O.app)==null?void 0:R.staffIds)&&Array.isArray(O.app.staffIds)&&O.app.staffIds.length>0},T=O=>b(O)?`Staff ID Array present (${O.app.staffIds.length} staff members)`:"Staff ID Array missing or empty",I=()=>{l.value<v.value&&l.value++},D=()=>{l.value>1&&l.value--};return jt(async()=>{try{await n(),o.value=r.value}catch(O){E("Failed to load students.",!0),console.error("Load students error:",O)}}),Ra(()=>{p&&clearTimeout(p)}),(O,R)=>(U(),j("div",EH,[R[3]||(R[3]=h("h2",null,"Edit Students",-1)),h("div",_H,[h("div",bH,[Ve(h("input",{type:"text","onUpdate:modelValue":R[0]||(R[0]=F=>a.value=F),onInput:m,placeholder:"Search by name",class:"search-input"},null,544),[[At,a.value]]),h("button",{onClick:S,class:"delete-all-btn"},"Delete All Students")])]),d.value?(U(),j("div",{key:0,class:et(["admin-status-msg",{error:f.value}])},te(d.value),3)):Ae("",!0),h("table",SH,[R[2]||(R[2]=h("thead",null,[h("tr",null,[h("th",null,"ID"),h("th",null,"First Name"),h("th",null,"Last Name"),h("th",null,"Grade"),h("th",null,"Case Manager"),h("th",{title:"Staff ID Array present"},"staffIdArr"),h("th",null,"Date Added"),h("th",null,"Actions")])],-1)),h("tbody",null,[g.value.length?Ae("",!0):(U(),j("tr",TH,R[1]||(R[1]=[h("td",{colspan:"8"},"No students found.",-1)]))),(U(!0),j(Fe,null,je(g.value,F=>(U(),j("tr",{key:F.id,class:et({"active-row":c.value===F.id}),"data-id":F.id},[h("td",null,te(F.id),1),h("td",null,[h("input",{class:"editable-input","data-field":"first_name",value:oe(ct)(F,"firstName")||"",disabled:c.value!==F.id,onInput:N=>P(F.id,"first_name",N.target.value)},null,40,wH)]),h("td",null,[h("input",{class:"editable-input","data-field":"last_name",value:oe(ct)(F,"lastName")||"",disabled:c.value!==F.id,onInput:N=>P(F.id,"last_name",N.target.value)},null,40,CH)]),h("td",null,[h("input",{class:"editable-input","data-field":"grade",value:oe(ct)(F,"grade")||"",disabled:c.value!==F.id,onInput:N=>P(F.id,"grade",N.target.value)},null,40,IH)]),h("td",null,[h("input",{class:"editable-input","data-field":"caseManagerId",value:F.caseManagerId||"",disabled:c.value!==F.id,onInput:N=>P(F.id,"caseManagerId",N.target.value)},null,40,kH)]),h("td",{class:"staff-id-status",title:T(F)},[h("span",{class:et(["status-icon",b(F)?"present":"missing"])},te(b(F)?"✓":"✗"),3)],8,DH),h("td",null,te(_(F.created_at)),1),h("td",PH,[c.value===F.id?(U(),j(Fe,{key:0},[h("button",{onClick:N=>k(F.id),class:"admin-action-btn save",title:"Save"},"💾",8,FH),h("button",{onClick:C,class:"admin-action-btn cancel",title:"Cancel"},"❌"),h("button",{onClick:N=>w(F.id),class:"admin-action-btn delete",title:"Delete"},"🗑️",8,RH)],64)):(U(),j("button",{key:1,onClick:N=>y(F.id),class:"admin-action-btn edit",title:"Edit"},"✏️",8,OH))])],10,AH))),128))])]),h("div",NH,[h("button",{onClick:D,disabled:l.value===1,class:"admin-btn"}," Prev ",8,MH),h("span",null,"Page "+te(l.value)+" of "+te(v.value),1),h("button",{onClick:I,disabled:l.value===v.value,class:"admin-btn"}," Next ",8,LH)])]))}},UH=yt(BH,[["__scopeId","data-v-ac89687e"]]),VH={class:"bulk-importer"},$H={key:0,class:"step-container"},jH={class:"file-upload-section"},HH={class:"file-input-wrapper"},GH={for:"csv-file",class:"file-label"},WH={class:"file-text"},zH={key:0,class:"error-message"},KH={key:1,class:"file-info"},qH={key:0},XH={class:"step-actions"},YH=["disabled"],QH={key:1,class:"step-container"},JH={class:"field-mapping-section"},ZH={class:"mapping-grid"},eG={class:"csv-column"},tG={class:"app-field"},rG=["onUpdate:modelValue"],nG={class:"sample-data"},sG={key:0,class:"validation-errors"},aG={class:"step-actions"},iG=["disabled"],oG={key:2,class:"step-container"},lG={class:"preview-section"},cG={class:"preview-stats"},uG={class:"stat-item"},dG={class:"stat-value"},fG={class:"stat-item"},hG={class:"stat-value valid"},pG={class:"stat-item"},mG={class:"stat-value invalid"},gG={class:"preview-table-container"},vG={class:"preview-table"},xG={key:0,class:"error-list"},yG={key:1,class:"no-errors"},EG={class:"import-options"},_G={class:"options-grid"},bG={class:"option-item"},SG={class:"option-item"},TG={class:"option-item"},AG={class:"step-actions"},wG=["disabled"],CG={key:3,class:"step-container"},IG={class:"results-section"},kG={class:"results-stats"},DG={class:"stat-item success"},PG={class:"stat-value"},FG={class:"stat-item error"},RG={class:"stat-value"},OG={class:"stat-item"},NG={class:"stat-value"},MG={key:0,class:"import-errors"},LG={class:"results-actions"},BG={key:4,class:"loading-overlay"},UG={class:"loading-content"},VG={class:"progress-bar"},$G={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=Na(),i=ue(1),a=ue(""),o=ue(""),l=ue([]),c=ue([]),u=ue({}),d=ue(""),f=ue([]),p=ue([]),m=ue("valid-only"),g=ue(!1),v=ue(!1),E=ue(0),x=ue({successful:0,failed:0,errors:[],processingTime:0}),y=ue(null),C=be(()=>{const Z=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Q=Object.values(u.value).filter(X=>X),ve=Q.includes("app.studentData.ssid");return Z.every(X=>Q.includes(X))&&ve}),P=be(()=>p.value.filter(Z=>Z.errors.length===0)),k=be(()=>p.value.filter(Z=>Z.errors.length>0));jt(async()=>{console.log("🚀 StudentBulkImporter component mounted!");try{await s(),console.log("✅ Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(Z=>({id:Z.id,name:Z.name,role:Z.role})))}catch(Z){console.error("❌ Failed to load users:",Z)}});const w=async Z=>{const Q=Z.target.files[0];if(Q){if(!Q.name.toLowerCase().endsWith(".csv")&&Q.type!=="text/csv"){d.value="File must be a CSV file (.csv extension)";return}if(Q.size>10*1024*1024){d.value="File must be smaller than 10MB";return}d.value="",a.value=Q.name,o.value=z(Q.size);try{const ve=await Q.text();S(ve)}catch(ve){d.value="Failed to read CSV file: "+ve.message}}},S=Z=>{try{const Q=Z.trim().split(`
`);if(Q.length<2)throw new Error("CSV must have at least a header row and one data row");const ve=Q[0].split(",").map(q=>q.trim().replace(/"/g,""));c.value=ve;const X=[];for(let q=1;q<Q.length;q++){const Y={};let ge="",re=!1,ne=0;for(let ae=0;ae<Q[q].length;ae++){const xe=Q[q][ae];xe==='"'?re=!re:xe===","&&!re?(Y[ve[ne]]=ge.trim().replace(/^"|"$/g,""),ge="",ne++):ge+=xe}ne<ve.length&&(Y[ve[ne]]=ge.trim().replace(/^"|"$/g,"")),X.push(Y)}l.value=X,console.log("Parsed CSV data:",X.length,"records")}catch(Q){d.value="Failed to parse CSV: "+Q.message}},_=()=>{const Z={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Q=>{Z[Q]&&(u.value[Q]=Z[Q])})},b=()=>{u.value={}},T=Z=>{const Q=l.value[0];if(!Q)return"";const ve=Q[Z];return ve?Z==="ClassServices"&&ve.includes(",")?`"${ve}"`:ve:""},I=()=>{f.value=[];const Z=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Q=Object.values(u.value).filter(q=>q),ve=Q.includes("app.studentData.ssid");Z.forEach(q=>{if(!Q.includes(q)){const Y=q.split(".").pop();f.value.push(`Required field "${Y}" is not mapped`)}}),ve||f.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const X=Q.filter((q,Y)=>Q.indexOf(q)!==Y);X.length>0&&f.value.push(`Duplicate field mappings: ${X.join(", ")}`)},D=()=>{p.value=l.value.map(Z=>{const Q=O(Z),ve=F(Q);return console.log("Row mapping:",{original:Z,mapped:Q,errors:ve}),{data:Q,errors:ve}})},O=Z=>{const Q={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([ve,X])=>{if(!X||!Z[ve])return;let q=Z[ve].trim();if(!q)return;if(X==="app.schedule.classServices"){q.startsWith('"')&&q.endsWith('"')&&(q=q.slice(1,-1)),Q.app.schedule.classServices=q.split(",").map(re=>re.trim()).filter(Boolean);return}if(X.startsWith("app.schedule.periods.")){const re=X.split(".").pop(),ne=q.trim();if(ne){const ae=K(ne);console.log(`Mapping Period ${re} teacher:`,ne,"→",ae),Q.app.schedule.periods[re]=ae}return}if(X.startsWith("app.providers.")){const re=X.split(".").pop(),ne=q.trim();if(ne){const ae=ee(ne);console.log(`Mapping ${re} provider:`,ne,"→",ae),Q.app.providers[re]=ae}return}if(X==="app.accommodations.assessment"||X==="app.accommodations.instruction"){const re=X.split(".").pop();Q.app.accommodations[re]=q;return}if(X.startsWith("app.flags.")){const re=X.split(".").pop();Q.app.flags[re]=["true","1","yes","y"].includes(q.toLowerCase());return}if(X.includes("Date")){const[re,ne,ae]=X.split(".");Q[re][ne]||(Q[re][ne]={}),Q[re][ne][ae]=V(q);return}const Y=X.split(".");let ge=Q;for(let re=0;re<Y.length-1;re++){const ne=Y[re];ge[ne]||(ge[ne]={}),ge=ge[ne]}ge[Y[Y.length-1]]=q}),Q},R=Z=>{const Q=Object.values(n.value).find(ve=>ve.id===Z||ve.name===Z||ve.email===Z||ve.aeriesId===Z);return console.log("Mapping case manager:",Z,"to Firebase ID:",Q==null?void 0:Q.id),Q?Q.id:Z},F=Z=>{var X,q,Y,ge,re,ne,ae,xe,Ee,we,Te,Ge,Ie,Ue,Le,We,ze,_e;const Q=[],ve=Z.ssid||((q=(X=Z.app)==null?void 0:X.studentData)==null?void 0:q.ssid);return ve||Q.push("SSID is required (either top-level or in app.studentData)"),(ge=(Y=Z.app)==null?void 0:Y.studentData)!=null&&ge.firstName||Q.push("First name is required"),(ne=(re=Z.app)==null?void 0:re.studentData)!=null&&ne.lastName||Q.push("Last name is required"),(xe=(ae=Z.app)==null?void 0:ae.studentData)!=null&&xe.grade||Q.push("Grade is required"),ve&&!/^\d{9,10}$/.test(ve)&&Q.push("SSID must be 9-10 digits"),(we=(Ee=Z.app)==null?void 0:Ee.studentData)!=null&&we.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(Z.app.studentData.grade)&&Q.push("Grade must be K-12"),(Ge=(Te=Z.app)==null?void 0:Te.studentData)!=null&&Ge.plan&&!["IEP","504"].includes(Z.app.studentData.plan)&&Q.push("Plan must be IEP or 504"),(Ue=(Ie=Z.app)==null?void 0:Ie.dates)!=null&&Ue.reviewDate&&!N(Z.app.dates.reviewDate)&&Q.push("Invalid review date format (use YYYY-MM-DD)"),(We=(Le=Z.app)==null?void 0:Le.dates)!=null&&We.reevalDate&&!N(Z.app.dates.reevalDate)&&Q.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(_e=(ze=Z.app)==null?void 0:ze.dates)!=null&&_e.meetingDate&&!N(Z.app.dates.meetingDate)&&Q.push("Invalid meeting date format (use YYYY-MM-DD)"),Q},N=Z=>{if(!Z)return!0;const Q=new Date(Z);return!isNaN(Q.getTime())&&Z.match(/^\d{4}-\d{2}-\d{2}$/)},V=Z=>{if(!Z)return"";try{const Q=new Date(Z);return isNaN(Q.getTime())?"":Q.toISOString().split("T")[0]}catch{return""}},L=Z=>{var X,q,Y,ge;const Q=((q=(X=Z.app)==null?void 0:X.studentData)==null?void 0:q.firstName)||"",ve=((ge=(Y=Z.app)==null?void 0:Y.studentData)==null?void 0:ge.lastName)||"";return`${Q} ${ve}`.trim()||"Missing Name"},z=Z=>{if(Z===0)return"0 Bytes";const Q=1024,ve=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(Z)/Math.log(Q));return parseFloat((Z/Math.pow(Q,X)).toFixed(2))+" "+ve[X]},H=()=>{if(i.value===2){if(I(),f.value.length>0)return;D()}i.value++},B=()=>{i.value--},W=async()=>{v.value=!0,E.value=0;const Z=Date.now(),Q=m.value==="valid-only"?P.value:p.value;let ve=0,X=0;const q=[];try{for(let Y=0;Y<Q.length;Y++){const ge=Q[Y];try{await le(ge.data),ve++}catch(re){X++,q.push(`Row ${Y+1}: ${re.message}`)}E.value=Math.round((Y+1)/Q.length*100)}x.value={successful:ve,failed:X,errors:q,processingTime:Date.now()-Z},i.value=4,r("imported",{successful:ve,failed:X})}catch(Y){console.error("Import failed:",Y),q.push("Import process failed: "+Y.message),x.value={successful:ve,failed:X,errors:q,processingTime:Date.now()-Z},i.value=4}finally{v.value=!1}},K=Z=>{if(!Z)return"";console.log("🔍 Mapping teacher ID:",Z),console.log("📚 Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Q=Object.values(n.value).find(X=>{const q=String(X.aeriesId)===String(Z);return q&&console.log("✅ Found exact Aeries ID match:",{teacherId:Z,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),q});if(Q)return console.log("✅ Using Aeries ID match:",Z,"→",Q.id,"(",Q.name,")"),Q.id;const ve=Object.values(n.value).find(X=>X.id===Z);return ve?(console.log("✅ Using Firebase ID match:",Z,"→",ve.id,"(",ve.name,")"),ve.id):(console.warn("❌ No user found for teacher ID:",Z),Z)},ee=Z=>{if(!Z)return"";console.log("🔍 Mapping provider ID:",Z),console.log("📚 Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Q=Object.values(n.value).find(X=>{const q=String(X.aeriesId)===String(Z);return q&&console.log("✅ Found exact Aeries ID match:",{providerId:Z,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),q});if(Q)return console.log("✅ Using Aeries ID match:",Z,"→",Q.id,"(",Q.name,")"),Q.id;const ve=Object.values(n.value).find(X=>X.id===Z);return ve?(console.log("✅ Using Firebase ID match:",Z,"→",ve.id,"(",ve.name,")"),ve.id):(console.warn("❌ No user found for provider ID:",Z),Z)},me=Z=>{try{return Z.app&&Z.app.studentData&&Z.app.studentData.ssid&&Z.app.studentData.firstName&&Z.app.studentData.lastName&&Z.app.studentData.grade&&Z.app.schedule&&Array.isArray(Z.app.schedule.classServices)}catch{return!1}},le=async Z=>{try{const Q=Z.app.studentData.ssid,ve=Ft(Ye,"students"),X=lr(ve,Nr("app.studentData.ssid","==",Q)),q=await Qt(X);if(!q.empty&&!g.value)throw new Error(`Student with SSID ${Q} already exists`);const Y={createdAt:sa(),updatedAt:sa(),app:{studentData:{firstName:Z.app.studentData.firstName||"",lastName:Z.app.studentData.lastName||"",grade:Z.app.studentData.grade||"",plan:Z.app.studentData.plan||"",caseManagerId:R(Z.app.studentData.caseManagerId)||"",ssid:Q},dates:{reviewDate:Z.app.dates.reviewDate||"",reevalDate:Z.app.dates.reevalDate||"",meetingDate:Z.app.dates.meetingDate||""},schedule:{periods:Z.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(Z.app.schedule.classServices)?Z.app.schedule.classServices:[]},providers:Z.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:Z.app.accommodations.assessment||"",instruction:Z.app.accommodations.instruction||""},flags:{flag1:!!Z.app.flags.flag1,flag2:!!Z.app.flags.flag2},documents:{bipPdfUrl:Z.app.documents.bipPdfUrl||null,ataglancePdfUrl:Z.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:Y.app.studentData.ssid,schedule:Y.app.schedule.periods,providers:Y.app.providers}),!me(Y))throw new Error("Invalid student data structure");if(!q.empty&&g.value){const ge=q.docs[0];await tr(at(Ye,"students",ge.id),Y,{merge:!0})}else{const ge=at(Ft(Ye,"students"));await tr(ge,Y)}}catch(Q){throw console.error("Error importing student:",Q),Q}},he=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},d.value="",f.value=[],p.value=[],x.value={successful:0,failed:0,errors:[],processingTime:0},y.value&&(y.value.value="")};return(Z,Q)=>(U(),j("div",VH,[Q[30]||(Q[30]=h("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[h("strong",null,"✅ StudentBulkImporter Component Loaded Successfully")],-1)),Q[31]||(Q[31]=h("div",{class:"importer-header"},[h("h2",null,"Add Students - Bulk Import"),h("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(U(),j("div",$H,[Q[8]||(Q[8]=h("div",{class:"step-header"},[h("h3",null,"Step 1: Upload CSV File"),h("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),h("div",jH,[h("div",HH,[h("input",{type:"file",ref_key:"fileInput",ref:y,onChange:w,accept:".csv",class:"file-input",id:"csv-file"},null,544),h("label",GH,[Q[4]||(Q[4]=h("span",{class:"file-icon"},"📁",-1)),h("span",WH,te(a.value||"Choose CSV File"),1)])]),d.value?(U(),j("div",zH,te(d.value),1)):Ae("",!0),a.value?(U(),j("div",KH,[h("p",null,[Q[5]||(Q[5]=h("strong",null,"File:",-1)),Ne(" "+te(a.value),1)]),h("p",null,[Q[6]||(Q[6]=h("strong",null,"Size:",-1)),Ne(" "+te(o.value),1)]),l.value.length>0?(U(),j("p",qH,[Q[7]||(Q[7]=h("strong",null,"Records:",-1)),Ne(" "+te(l.value.length),1)])):Ae("",!0)])):Ae("",!0)]),Q[9]||(Q[9]=Sn('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),h("div",XH,[h("button",{onClick:H,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,YH)])])):Ae("",!0),i.value===2?(U(),j("div",QH,[Q[15]||(Q[15]=h("div",{class:"step-header"},[h("h3",null,"Step 2: Map CSV Fields"),h("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),h("div",JH,[h("div",ZH,[Q[12]||(Q[12]=Sn('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282>→</div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(U(!0),j(Fe,null,je(c.value,(ve,X)=>(U(),j("div",{key:X,class:"mapping-row"},[h("div",eG,[h("strong",null,te(ve),1)]),Q[11]||(Q[11]=h("div",{class:"arrow"},"→",-1)),h("div",tG,[Ve(h("select",{"onUpdate:modelValue":q=>u.value[ve]=q,class:"field-select"},Q[10]||(Q[10]=[Sn('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,rG),[[vr,u.value[ve]]])]),h("div",nG,[h("code",null,te(T(ve)),1)])]))),128))]),h("div",{class:"auto-mapping-section"},[Q[13]||(Q[13]=h("h4",null,"Quick Mapping Options:",-1)),h("div",{class:"quick-actions"},[h("button",{onClick:_,class:"btn btn-secondary"}," Auto-map Common Fields "),h("button",{onClick:b,class:"btn btn-secondary"}," Clear All Mappings ")])]),f.value.length>0?(U(),j("div",sG,[Q[14]||(Q[14]=h("h4",null,"Mapping Issues:",-1)),h("ul",null,[(U(!0),j(Fe,null,je(f.value,ve=>(U(),j("li",{key:ve,class:"error-item"},te(ve),1))),128))])])):Ae("",!0)]),h("div",aG,[h("button",{onClick:B,class:"btn btn-secondary"}," Back "),h("button",{onClick:H,disabled:!C.value,class:"btn btn-primary"}," Next: Preview Data ",8,iG)])])):Ae("",!0),i.value===3?(U(),j("div",oG,[Q[23]||(Q[23]=h("div",{class:"step-header"},[h("h3",null,"Step 3: Preview and Validate"),h("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),h("div",lG,[h("div",cG,[h("div",uG,[Q[16]||(Q[16]=h("span",{class:"stat-label"},"Total Records:",-1)),h("span",dG,te(l.value.length),1)]),h("div",fG,[Q[17]||(Q[17]=h("span",{class:"stat-label"},"Valid Records:",-1)),h("span",hG,te(P.value.length),1)]),h("div",pG,[Q[18]||(Q[18]=h("span",{class:"stat-label"},"Invalid Records:",-1)),h("span",mG,te(k.value.length),1)])]),h("div",gG,[h("table",vG,[Q[19]||(Q[19]=h("thead",null,[h("tr",null,[h("th",null,"Status"),h("th",null,"SSID"),h("th",null,"Name"),h("th",null,"Grade"),h("th",null,"Plan"),h("th",null,"Case Manager"),h("th",null,"Issues")])],-1)),h("tbody",null,[(U(!0),j(Fe,null,je(p.value,(ve,X)=>{var q,Y,ge,re,ne,ae,xe,Ee;return U(),j("tr",{key:X,class:et({"invalid-row":ve.errors.length>0})},[h("td",null,[h("span",{class:et(["status-badge",ve.errors.length>0?"error":"valid"])},te(ve.errors.length>0?"Error":"Valid"),3)]),h("td",null,te(ve.data.ssid||((Y=(q=ve.data.app)==null?void 0:q.studentData)==null?void 0:Y.ssid)||"Missing"),1),h("td",null,te(L(ve.data)),1),h("td",null,te(((re=(ge=ve.data.app)==null?void 0:ge.studentData)==null?void 0:re.grade)||"Missing"),1),h("td",null,te(((ae=(ne=ve.data.app)==null?void 0:ne.studentData)==null?void 0:ae.plan)||"Not set"),1),h("td",null,te(((Ee=(xe=ve.data.app)==null?void 0:xe.studentData)==null?void 0:Ee.caseManagerId)||"Not set"),1),h("td",null,[ve.errors.length>0?(U(),j("ul",xG,[(U(!0),j(Fe,null,je(ve.errors,we=>(U(),j("li",{key:we,class:"error-item"},te(we),1))),128))])):(U(),j("span",yG,"No issues"))])],2)}),128))])])]),h("div",EG,[Q[22]||(Q[22]=h("h4",null,"Import Options:",-1)),h("div",_G,[h("label",bG,[Ve(h("input",{type:"radio","onUpdate:modelValue":Q[0]||(Q[0]=ve=>m.value=ve),value:"valid-only"},null,512),[[ra,m.value]]),h("span",null,"Import only valid records ("+te(P.value.length)+" records)",1)]),h("label",SG,[Ve(h("input",{type:"radio","onUpdate:modelValue":Q[1]||(Q[1]=ve=>m.value=ve),value:"all"},null,512),[[ra,m.value]]),Q[20]||(Q[20]=h("span",null,"Import all records (may cause errors for invalid data)",-1))]),h("label",TG,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":Q[2]||(Q[2]=ve=>g.value=ve)},null,512),[[xt,g.value]]),Q[21]||(Q[21]=h("span",null,"Update existing students if SSID already exists",-1))])])])]),h("div",AG,[h("button",{onClick:B,class:"btn btn-secondary"}," Back "),h("button",{onClick:W,disabled:v.value||m.value==="valid-only"&&P.value.length===0,class:"btn btn-primary"},te(v.value?"Importing...":`Import ${m.value==="valid-only"?P.value.length:l.value.length} Students`),9,wG)])])):Ae("",!0),i.value===4?(U(),j("div",CG,[Q[28]||(Q[28]=h("div",{class:"step-header"},[h("h3",null,"Step 4: Import Complete"),h("p",null,"Your bulk import has been completed. Review the results below.")],-1)),h("div",IG,[h("div",kG,[h("div",DG,[Q[24]||(Q[24]=h("span",{class:"stat-label"},"Successfully Imported:",-1)),h("span",PG,te(x.value.successful),1)]),h("div",FG,[Q[25]||(Q[25]=h("span",{class:"stat-label"},"Failed to Import:",-1)),h("span",RG,te(x.value.failed),1)]),h("div",OG,[Q[26]||(Q[26]=h("span",{class:"stat-label"},"Total Processing Time:",-1)),h("span",NG,te(x.value.processingTime)+"ms",1)])]),x.value.errors.length>0?(U(),j("div",MG,[Q[27]||(Q[27]=h("h4",null,"Import Errors:",-1)),h("ul",null,[(U(!0),j(Fe,null,je(x.value.errors,ve=>(U(),j("li",{key:ve,class:"error-item"},te(ve),1))),128))])])):Ae("",!0),h("div",LG,[h("button",{onClick:he,class:"btn btn-secondary"}," Import More Students "),h("button",{onClick:Q[3]||(Q[3]=ve=>Z.$emit("close")),class:"btn btn-primary"}," Close ")])])])):Ae("",!0),v.value?(U(),j("div",BG,[h("div",UG,[Q[29]||(Q[29]=h("div",{class:"loading-spinner"},null,-1)),h("p",null,"Importing students... "+te(E.value)+"%",1),h("div",VG,[h("div",{class:"progress-fill",style:_n({width:E.value+"%"})},null,4)])])])):Ae("",!0)]))}},jG=yt($G,[["__scopeId","data-v-494a4282"]]),HG={class:"permissions-overview"},GG={class:"roles-summary"},WG={class:"role-icon"},zG={class:"role-info"},KG={class:"role-stats"},qG={class:"stat"},XG={class:"stat-number"},YG={class:"stat"},QG={class:"stat-number"},JG={class:"stat"},ZG={class:"stat-number"},eW={class:"permissions-matrix"},tW={class:"matrix-table-container"},rW={class:"matrix-table"},nW={class:"permission-info"},sW={class:"permission-name"},aW={class:"permission-description"},iW={class:"permission-firebase"},oW={class:"admin-panel-access"},lW={class:"access-grid"},cW={class:"access-header"},uW={class:"access-icon"},dW={class:"role-name"},fW={key:0,class:"access-details"},hW={class:"access-level"},pW={class:"access-description"},mW={key:1,class:"no-access"},gW={__name:"PermissionsOverview",setup(t){const e={admin:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_full","testing_all","security_controls","backup_restore","system_config"],administrator:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_full","testing_all"],administrator_504_CM:["view_users","edit_user","delete_user","manage_subjects","manage_roles","view_students","edit_student_all","admin_panel_limited"],sped_chair:["view_users","view_students","edit_student_all","admin_panel_sped","security_monitoring","aide_management"],case_manager:["view_users","view_students","edit_student_cm","testing_partial"],teacher:["view_users","view_students","testing_partial"],paraeducator:["view_users","view_students","aide_schedule"],service_provider:["view_users","view_students"]},r=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","paraeducator","service_provider"],n=[{key:"admin",name:"Admin",icon:"👑",description:"Full system access and control",adminAccess:!0,adminLevel:"Full Access",adminDescription:"All admin panel features including permissions management",testingLevel:"All",permissions:e.admin},{key:"administrator",name:"Administrator",icon:"👨‍💼",description:"Administrative management without system permissions",adminAccess:!0,adminLevel:"Full Access",adminDescription:"All admin panel features except permissions management",testingLevel:"All",permissions:e.administrator},{key:"administrator_504_CM",name:"Administrator 504/CM",icon:"📋",description:"504 plan and case management administration",adminAccess:!0,adminLevel:"Limited Access",adminDescription:"Student management and 504-related functions",testingLevel:"None",permissions:e.administrator_504_CM},{key:"sped_chair",name:"SPED Chair",icon:"🎓",description:"Special education program oversight",adminAccess:!0,adminLevel:"SPED Access",adminDescription:"SPED program management and aide oversight",testingLevel:"None",permissions:e.sped_chair},{key:"case_manager",name:"Case Manager",icon:"👩‍🏫",description:"Individual student case management",adminAccess:!1,testingLevel:"Partial",permissions:e.case_manager},{key:"teacher",name:"Teacher",icon:"🍎",description:"Classroom teacher with student access",adminAccess:!1,testingLevel:"Partial",permissions:e.teacher},{key:"paraeducator",name:"Paraeducator",icon:"🤝",description:"Educational aide with schedule access",adminAccess:!1,testingLevel:"None",permissions:e.paraeducator},{key:"service_provider",name:"Service Provider",icon:"⚕️",description:"Related services provider",adminAccess:!1,testingLevel:"None",permissions:e.service_provider}],s=[{key:"view_users",name:"View Users",description:"Can view user accounts and basic information",firebaseRule:"Authenticated users only"},{key:"edit_user",name:"Edit Users",description:"Can modify user accounts and roles",firebaseRule:"Admin, Administrator, Administrator 504/CM"},{key:"delete_user",name:"Delete Users",description:"Can remove user accounts",firebaseRule:"Admin, Administrator only"},{key:"view_students",name:"View Students",description:"Can view student records (role-filtered)",firebaseRule:"All authenticated users"},{key:"edit_student_all",name:"Edit All Students",description:"Can modify any student record",firebaseRule:"Admin, Administrator, Administrator 504/CM, SPED Chair"},{key:"edit_student_cm",name:"Edit Own Caseload",description:"Can modify students on own caseload",firebaseRule:"Case Manager (caseload validation)"},{key:"admin_panel_full",name:"Full Admin Panel",description:"Access to all admin panel features",firebaseRule:"Admin, Administrator"},{key:"admin_panel_limited",name:"Limited Admin Panel",description:"Access to student management features",firebaseRule:"Administrator 504/CM"},{key:"admin_panel_sped",name:"SPED Admin Panel",description:"Access to SPED program management",firebaseRule:"SPED Chair"},{key:"testing_all",name:"Full Testing Access",description:"Can access all students in testing view",firebaseRule:"Admin, Administrator"},{key:"testing_partial",name:"Partial Testing Access",description:"Can access assigned students in testing view",firebaseRule:"Case Manager, Teacher"},{key:"security_controls",name:"Security Controls",description:"Access to security monitoring and controls",firebaseRule:"Admin only"},{key:"aide_management",name:"Aide Management",description:"Can manage aide assignments and schedules",firebaseRule:"Admin, Administrator, SPED Chair"},{key:"aide_schedule",name:"Aide Schedule Access",description:"Can view own aide schedule",firebaseRule:"Paraeducator"}],i=(a,o)=>{var l;return((l=e[a])==null?void 0:l.includes(o))||!1};return(a,o)=>(U(),j("div",HG,[o[7]||(o[7]=h("div",{class:"overview-header"},[h("h2",null,"📋 Permissions Overview"),h("p",{class:"overview-description"}," This is an informational view showing the current role-based permissions that match your Firebase security rules and role-based view settings. These permissions are hard-coded for consistency and security. ")],-1)),h("div",GG,[(U(),j(Fe,null,je(n,l=>h("div",{class:"summary-card",key:l.key},[h("div",{class:et(["role-header",l.key])},[h("div",WG,te(l.icon),1),h("div",zG,[h("h3",null,te(l.name),1),h("p",null,te(l.description),1)])],2),h("div",KG,[h("div",qG,[h("span",XG,te(l.permissions.length),1),o[0]||(o[0]=h("span",{class:"stat-label"},"Permissions",-1))]),h("div",YG,[h("span",QG,te(l.adminAccess?"Yes":"No"),1),o[1]||(o[1]=h("span",{class:"stat-label"},"Admin Panel",-1))]),h("div",JG,[h("span",ZG,te(l.testingLevel),1),o[2]||(o[2]=h("span",{class:"stat-label"},"Testing Access",-1))])])])),64))]),h("div",eW,[o[4]||(o[4]=h("h3",null,"🔐 Detailed Permissions Matrix",-1)),o[5]||(o[5]=h("div",{class:"matrix-note"},[h("strong",null,"Note:"),Ne(" These permissions are synchronized with Firebase security rules and cannot be modified. They ensure consistent security across your application. ")],-1)),h("div",tW,[h("table",rW,[o[3]||(o[3]=h("thead",null,[h("tr",null,[h("th",{class:"permission-column"},"Permission"),h("th",{class:"role-header admin"},"Admin"),h("th",{class:"role-header administrator"},"Administrator"),h("th",{class:"role-header administrator_504_CM"},"Admin 504/CM"),h("th",{class:"role-header sped_chair"},"SPED Chair"),h("th",{class:"role-header case_manager"},"Case Manager"),h("th",{class:"role-header teacher"},"Teacher"),h("th",{class:"role-header paraeducator"},"Paraeducator"),h("th",{class:"role-header service_provider"},"Service Provider")])],-1)),h("tbody",null,[(U(),j(Fe,null,je(s,l=>h("tr",{key:l.key,class:"permission-row"},[h("td",nW,[h("div",sW,te(l.name),1),h("div",aW,te(l.description),1),h("div",iW,te(l.firebaseRule),1)]),(U(),j(Fe,null,je(r,c=>h("td",{key:c,class:"permission-cell"},[h("span",{class:et(["permission-indicator",{granted:i(c,l.key)}])},te(i(c,l.key)?"✅":"❌"),3)])),64))])),64))])])])]),h("div",oW,[o[6]||(o[6]=h("h3",null,"⚙️ Admin Panel Access",-1)),h("div",lW,[(U(),j(Fe,null,je(n,l=>h("div",{key:l.key,class:et(["access-card",{"has-access":l.adminAccess}])},[h("div",cW,[h("span",uW,te(l.adminAccess?"✅":"❌"),1),h("span",dW,te(l.name),1)]),l.adminAccess?(U(),j("div",fW,[h("div",hW,te(l.adminLevel),1),h("div",pW,te(l.adminDescription),1)])):(U(),j("div",mW," No admin panel access "))],2)),64))])]),o[8]||(o[8]=Sn('<div class="firebase-rules" data-v-d7ccf132><h3 data-v-d7ccf132>🔥 Firebase Security Rules Summary</h3><div class="rules-grid" data-v-d7ccf132><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132>👥 Users Collection</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> Admin, Administrator, Administrator 504/CM only</li><li data-v-d7ccf132><strong data-v-d7ccf132>Delete:</strong> Admin, Administrator only</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132>🎓 Students Collection</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users (role-filtered)</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write (All):</strong> Admin, Administrator, Administrator 504/CM, SPED Chair</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write (Own Caseload):</strong> Case Manager</li><li data-v-d7ccf132><strong data-v-d7ccf132>Read-only:</strong> Teacher, Paraeducator, Service Provider</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132>⚙️ App Settings</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> All authenticated users</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> Admin, Administrator only</li></ul></div><div class="rule-card" data-v-d7ccf132><h4 data-v-d7ccf132>📝 Audit Logs</h4><ul data-v-d7ccf132><li data-v-d7ccf132><strong data-v-d7ccf132>Read:</strong> Admin, Administrator, SPED Chair</li><li data-v-d7ccf132><strong data-v-d7ccf132>Write:</strong> All authenticated users (own actions)</li></ul></div></div></div>',1))]))}},vW=yt(gW,[["__scopeId","data-v-d7ccf132"]]),xW={class:"admin-permissions"},yW={__name:"AdminPermissions",setup(t){return(e,r)=>(U(),j("div",xW,[st(vW)]))}},EW=yt(yW,[["__scopeId","data-v-699444ca"]]);var xI={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Lt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var b=P(_);b.chunkSize=parseInt(b.chunkSize),_.step||_.chunk||(b.chunkSize=null),this._handle=new g(b),(this._handle.streamer=this)._config=b}).call(this,S),this.parseChunk=function(_,b){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let D=this._config.newline;D||(I=this._config.quoteChar||'"',D=this._handle.guessLineEndings(_,I)),_=[..._.split(D).slice(T)].join(D)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&(I=this._config.beforeFirstChunk(_))!==void 0&&(_=I),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+_,I=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=I.meta.cursor,T=(this._finished||(this._partialLine=T.substring(_-this._baseIndex),this._baseIndex=_),I&&I.data&&(this._rowCount+=I.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:I,workerId:c.WORKER_ID,finished:T});else if(w(this._config.chunk)&&!b){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=I=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),this._completed||!T||!w(this._config.complete)||I&&I.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||I&&I.meta.paused||this._nextChunk(),I}this._halted=!0},this._sendError=function(_){w(this._config.error)?this._config.error(_):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:_,finished:!1})}}function d(S){var _;(S=S||{}).chunkSize||(S.chunkSize=c.RemoteChunkSize),u.call(this,S),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(b){this._input=b,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=k(this._chunkLoaded,this),_.onerror=k(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var b,T=this._config.downloadRequestHeaders;for(b in T)_.setRequestHeader(b,T[b])}var I;this._config.chunkSize&&(I=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+I));try{_.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(b=>(b=b.getResponseHeader("Content-Range"))!==null?parseInt(b.substring(b.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(b){b=_.statusText||b,this._sendError(new Error(b))}}function f(S){(S=S||{}).chunkSize||(S.chunkSize=c.LocalChunkSize),u.call(this,S);var _,b,T=typeof FileReader<"u";this.stream=function(I){this._input=I,b=I.slice||I.webkitSlice||I.mozSlice,T?((_=new FileReader).onload=k(this._chunkLoaded,this),_.onerror=k(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var I=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),I=b.call(I,this._start,D)),_.readAsText(I,this._config.encoding));T||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(I){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(I.target.result)},this._chunkError=function(){this._sendError(_.error)}}function p(S){var _;u.call(this,S=S||{}),this.stream=function(b){return _=b,this._nextChunk()},this._nextChunk=function(){var b,T;if(!this._finished)return b=this._config.chunkSize,_=b?(T=_.substring(0,b),_.substring(b)):(T=_,""),this._finished=!_,this.parseChunk(T)}}function m(S){u.call(this,S=S||{});var _=[],b=!0,T=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(I){this._input=I,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):b=!0},this._streamData=k(function(I){try{_.push(typeof I=="string"?I:I.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(D){this._streamError(D)}},this),this._streamError=k(function(I){this._streamCleanUp(),this._sendError(I)},this),this._streamEnd=k(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(S){var _,b,T,I,D=Math.pow(2,53),O=-D,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,N=this,V=0,L=0,z=!1,H=!1,B=[],W={data:[],errors:[],meta:{}};function K(he){return S.skipEmptyLines==="greedy"?he.join("").trim()==="":he.length===1&&he[0].length===0}function ee(){if(W&&T&&(le("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),T=!1),S.skipEmptyLines&&(W.data=W.data.filter(function(ve){return!K(ve)})),me()){let ve=function(X,q){w(S.transformHeader)&&(X=S.transformHeader(X,q)),B.push(X)};if(W)if(Array.isArray(W.data[0])){for(var he=0;me()&&he<W.data.length;he++)W.data[he].forEach(ve);W.data.splice(0,1)}else W.data.forEach(ve)}function Z(ve,X){for(var q=S.header?{}:[],Y=0;Y<ve.length;Y++){var ge=Y,re=ve[Y],re=((ne,ae)=>(xe=>(S.dynamicTypingFunction&&S.dynamicTyping[xe]===void 0&&(S.dynamicTyping[xe]=S.dynamicTypingFunction(xe)),(S.dynamicTyping[xe]||S.dynamicTyping)===!0))(ne)?ae==="true"||ae==="TRUE"||ae!=="false"&&ae!=="FALSE"&&((xe=>{if(R.test(xe)&&(xe=parseFloat(xe),O<xe&&xe<D))return 1})(ae)?parseFloat(ae):F.test(ae)?new Date(ae):ae===""?null:ae):ae)(ge=S.header?Y>=B.length?"__parsed_extra":B[Y]:ge,re=S.transform?S.transform(re,ge):re);ge==="__parsed_extra"?(q[ge]=q[ge]||[],q[ge].push(re)):q[ge]=re}return S.header&&(Y>B.length?le("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+Y,L+X):Y<B.length&&le("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+Y,L+X)),q}var Q;W&&(S.header||S.dynamicTyping||S.transform)&&(Q=1,!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(Z),Q=W.data.length):W.data=Z(W.data,0),S.header&&W.meta&&(W.meta.fields=B),L+=Q)}function me(){return S.header&&B.length===0}function le(he,Z,Q,ve){he={type:he,code:Z,message:Q},ve!==void 0&&(he.row=ve),W.errors.push(he)}w(S.step)&&(I=S.step,S.step=function(he){W=he,me()?ee():(ee(),W.data.length!==0&&(V+=he.data.length,S.preview&&V>S.preview?b.abort():(W.data=W.data[0],I(W,N))))}),this.parse=function(he,Z,Q){var ve=S.quoteChar||'"',ve=(S.newline||(S.newline=this.guessLineEndings(he,ve)),T=!1,S.delimiter?w(S.delimiter)&&(S.delimiter=S.delimiter(he),W.meta.delimiter=S.delimiter):((ve=((X,q,Y,ge,re)=>{var ne,ae,xe,Ee;re=re||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var we=0;we<re.length;we++){for(var Te,Ge=re[we],Ie=0,Ue=0,Le=0,We=(xe=void 0,new E({comments:ge,delimiter:Ge,newline:q,preview:10}).parse(X)),ze=0;ze<We.data.length;ze++)Y&&K(We.data[ze])?Le++:(Te=We.data[ze].length,Ue+=Te,xe===void 0?xe=Te:0<Te&&(Ie+=Math.abs(Te-xe),xe=Te));0<We.data.length&&(Ue/=We.data.length-Le),(ae===void 0||Ie<=ae)&&(Ee===void 0||Ee<Ue)&&1.99<Ue&&(ae=Ie,ne=Ge,Ee=Ue)}return{successful:!!(S.delimiter=ne),bestDelimiter:ne}})(he,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=ve.bestDelimiter:(T=!0,S.delimiter=c.DefaultDelimiter),W.meta.delimiter=S.delimiter),P(S));return S.preview&&S.header&&ve.preview++,_=he,b=new E(ve),W=b.parse(_,Z,Q),ee(),z?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,b.abort(),_=w(S.chunk)?"":_.substring(b.getCharIndex())},this.resume=function(){N.streamer._halted?(z=!1,N.streamer.parseChunk(_,!0)):setTimeout(N.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,b.abort(),W.meta.aborted=!0,w(S.complete)&&S.complete(W),_=""},this.guessLineEndings=function(X,ve){X=X.substring(0,1048576);var ve=new RegExp(v(ve)+"([^]*?)"+v(ve),"gm"),Q=(X=X.replace(ve,"")).split("\r"),ve=X.split(`
`),X=1<ve.length&&ve[0].length<Q[0].length;if(Q.length===1||X)return`
`;for(var q=0,Y=0;Y<Q.length;Y++)Q[Y][0]===`
`&&q++;return q>=Q.length/2?`\r
`:"\r"}}function v(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(S){var _=(S=S||{}).delimiter,b=S.newline,T=S.comments,I=S.step,D=S.preview,O=S.fastMode,R=null,F=!1,N=S.quoteChar==null?'"':S.quoteChar,V=N;if(S.escapeChar!==void 0&&(V=S.escapeChar),(typeof _!="string"||-1<c.BAD_DELIMITERS.indexOf(_))&&(_=","),T===_)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<c.BAD_DELIMITERS.indexOf(T))&&(T=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var L=0,z=!1;this.parse=function(H,B,W){if(typeof H!="string")throw new Error("Input must be a string");var K=H.length,ee=_.length,me=b.length,le=T.length,he=w(I),Z=[],Q=[],ve=[],X=L=0;if(!H)return Ie();if(O||O!==!1&&H.indexOf(N)===-1){for(var q=H.split(b),Y=0;Y<q.length;Y++){if(ve=q[Y],L+=ve.length,Y!==q.length-1)L+=b.length;else if(W)return Ie();if(!T||ve.substring(0,le)!==T){if(he){if(Z=[],Ee(ve.split(_)),Ue(),z)return Ie()}else Ee(ve.split(_));if(D&&D<=Y)return Z=Z.slice(0,D),Ie(!0)}}return Ie()}for(var ge=H.indexOf(_,L),re=H.indexOf(b,L),ne=new RegExp(v(V)+v(N),"g"),ae=H.indexOf(N,L);;)if(H[L]===N)for(ae=L,L++;;){if((ae=H.indexOf(N,ae+1))===-1)return W||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:L}),Te();if(ae===K-1)return Te(H.substring(L,ae).replace(ne,N));if(N===V&&H[ae+1]===V)ae++;else if(N===V||ae===0||H[ae-1]!==V){ge!==-1&&ge<ae+1&&(ge=H.indexOf(_,ae+1));var xe=we((re=re!==-1&&re<ae+1?H.indexOf(b,ae+1):re)===-1?ge:Math.min(ge,re));if(H.substr(ae+1+xe,ee)===_){ve.push(H.substring(L,ae).replace(ne,N)),H[L=ae+1+xe+ee]!==N&&(ae=H.indexOf(N,L)),ge=H.indexOf(_,L),re=H.indexOf(b,L);break}if(xe=we(re),H.substring(ae+1+xe,ae+1+xe+me)===b){if(ve.push(H.substring(L,ae).replace(ne,N)),Ge(ae+1+xe+me),ge=H.indexOf(_,L),ae=H.indexOf(N,L),he&&(Ue(),z))return Ie();if(D&&Z.length>=D)return Ie(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:L}),ae++}}else if(T&&ve.length===0&&H.substring(L,L+le)===T){if(re===-1)return Ie();L=re+me,re=H.indexOf(b,L),ge=H.indexOf(_,L)}else if(ge!==-1&&(ge<re||re===-1))ve.push(H.substring(L,ge)),L=ge+ee,ge=H.indexOf(_,L);else{if(re===-1)break;if(ve.push(H.substring(L,re)),Ge(re+me),he&&(Ue(),z))return Ie();if(D&&Z.length>=D)return Ie(!0)}return Te();function Ee(Le){Z.push(Le),X=L}function we(Le){var We=0;return We=Le!==-1&&(Le=H.substring(ae+1,Le))&&Le.trim()===""?Le.length:We}function Te(Le){return W||(Le===void 0&&(Le=H.substring(L)),ve.push(Le),L=K,Ee(ve),he&&Ue()),Ie()}function Ge(Le){L=Le,Ee(ve),ve=[],re=H.indexOf(b,L)}function Ie(Le){if(S.header&&!B&&Z.length&&!F){var We=Z[0],ze=Object.create(null),_e=new Set(We);let ye=!1;for(let Se=0;Se<We.length;Se++){let Re=We[Se];if(ze[Re=w(S.transformHeader)?S.transformHeader(Re,Se):Re]){let He,it=ze[Re];for(;He=Re+"_"+it,it++,_e.has(He););_e.add(He),We[Se]=He,ze[Re]++,ye=!0,(R=R===null?{}:R)[He]=Re}else ze[Re]=1,We[Se]=Re;_e.add(Re)}ye&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:Z,errors:Q,meta:{delimiter:_,linebreak:b,aborted:z,truncated:!!Le,cursor:X+(B||0),renamedHeaders:R}}}function Ue(){I(Ie()),Z=[],Q=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return L}}function x(S){var _=S.data,b=o[_.workerId],T=!1;if(_.error)b.userError(_.error,_.file);else if(_.results&&_.results.data){var I={abort:function(){T=!0,y(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(w(b.userStep)){for(var D=0;D<_.results.data.length&&(b.userStep({data:_.results.data[D],errors:_.results.errors,meta:_.results.meta},I),!T);D++);delete _.results}else w(b.userChunk)&&(b.userChunk(_.results,I,_.file),delete _.results)}_.finished&&!T&&y(_.workerId,_.results)}function y(S,_){var b=o[S];w(b.userComplete)&&b.userComplete(_),b.terminate(),delete o[S]}function C(){throw new Error("Not implemented.")}function P(S){if(typeof S!="object"||S===null)return S;var _,b=Array.isArray(S)?[]:{};for(_ in S)b[_]=P(S[_]);return b}function k(S,_){return function(){S.apply(_,arguments)}}function w(S){return typeof S=="function"}return c.parse=function(S,_){var b=(_=_||{}).dynamicTyping||!1;if(w(b)&&(_.dynamicTypingFunction=b,b={}),_.dynamicTyping=b,_.transform=!!w(_.transform)&&_.transform,!_.worker||!c.WORKERS_SUPPORTED)return b=null,c.NODE_STREAM_INPUT,typeof S=="string"?(S=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(S),b=new(_.download?d:p)(_)):S.readable===!0&&w(S.read)&&w(S.on)?b=new m(_):(n.File&&S instanceof File||S instanceof Object)&&(b=new f(_)),b.stream(S);(b=(()=>{var T;return!!c.WORKERS_SUPPORTED&&(T=(()=>{var I=n.URL||n.webkitURL||null,D=r.toString();return c.BLOB_URL||(c.BLOB_URL=I.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(T=new n.Worker(T)).onmessage=x,T.id=l++,o[T.id]=T)})()).userStep=_.step,b.userChunk=_.chunk,b.userComplete=_.complete,b.userError=_.error,_.step=w(_.step),_.chunk=w(_.chunk),_.complete=w(_.complete),_.error=w(_.error),delete _.worker,b.postMessage({input:S,config:_,workerId:b.id})},c.unparse=function(S,_){var b=!1,T=!0,I=",",D=`\r
`,O='"',R=O+O,F=!1,N=null,V=!1,L=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||c.BAD_DELIMITERS.filter(function(B){return _.delimiter.indexOf(B)!==-1}).length||(I=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(b=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(F=_.skipEmptyLines),typeof _.newline=="string"&&(D=_.newline),typeof _.quoteChar=="string"&&(O=_.quoteChar),typeof _.header=="boolean"&&(T=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");N=_.columns}_.escapeChar!==void 0&&(R=_.escapeChar+O),_.escapeFormulae instanceof RegExp?V=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(V=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(O),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return z(null,S,F);if(typeof S[0]=="object")return z(N||Object.keys(S[0]),S,F)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||N),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),z(S.fields||[],S.data||[],F);throw new Error("Unable to serialize unrecognized input");function z(B,W,K){var ee="",me=(typeof B=="string"&&(B=JSON.parse(B)),typeof W=="string"&&(W=JSON.parse(W)),Array.isArray(B)&&0<B.length),le=!Array.isArray(W[0]);if(me&&T){for(var he=0;he<B.length;he++)0<he&&(ee+=I),ee+=H(B[he],he);0<W.length&&(ee+=D)}for(var Z=0;Z<W.length;Z++){var Q=(me?B:W[Z]).length,ve=!1,X=me?Object.keys(W[Z]).length===0:W[Z].length===0;if(K&&!me&&(ve=K==="greedy"?W[Z].join("").trim()==="":W[Z].length===1&&W[Z][0].length===0),K==="greedy"&&me){for(var q=[],Y=0;Y<Q;Y++){var ge=le?B[Y]:Y;q.push(W[Z][ge])}ve=q.join("").trim()===""}if(!ve){for(var re=0;re<Q;re++){0<re&&!X&&(ee+=I);var ne=me&&le?B[re]:re;ee+=H(W[Z][ne],re)}Z<W.length-1&&(!K||0<Q&&!X)&&(ee+=D)}}return ee}function H(B,W){var K,ee;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(ee=!1,V&&typeof B=="string"&&V.test(B)&&(B="'"+B,ee=!0),K=B.toString().replace(L,R),(ee=ee||b===!0||typeof b=="function"&&b(B,W)||Array.isArray(b)&&b[W]||((me,le)=>{for(var he=0;he<le.length;he++)if(-1<me.indexOf(le[he]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(I)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?O+K+O:K)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=E,c.ParserHandle=g,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=p,c.ReadableStreamStreamer=m,n.jQuery&&((s=n.jQuery).fn.parse=function(S){var _=S.config||{},b=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)b.push({file:this.files[O],inputElem:this,instanceConfig:s.extend({},_)})}),T(),this;function T(){if(b.length===0)w(S.complete)&&S.complete();else{var D,O,R,F,N=b[0];if(w(S.before)){var V=S.before(N.file,N.inputElem);if(typeof V=="object"){if(V.action==="abort")return D="AbortError",O=N.file,R=N.inputElem,F=V.reason,void(w(S.error)&&S.error({name:D},O,R,F));if(V.action==="skip")return void I();typeof V.config=="object"&&(N.instanceConfig=s.extend(N.instanceConfig,V.config))}else if(V==="skip")return void I()}var L=N.instanceConfig.complete;N.instanceConfig.complete=function(z){w(L)&&L(z,N.file,N.inputElem),I()},c.parse(N.file,N.instanceConfig)}}function I(){b.splice(0,1),T()}}),a&&(n.onmessage=function(S){S=S.data,c.WORKER_ID===void 0&&S&&(c.WORKER_ID=S.workerId),typeof S.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(S.input,S.config),finished:!0}):(n.File&&S.input instanceof File||S.input instanceof Object)&&(S=c.parse(S.input,S.config))&&n.postMessage({workerId:c.WORKER_ID,results:S,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(m.prototype=Object.create(u.prototype)).constructor=m,c})})(xI);var _W=xI.exports;const yI=fI(_W),wo=lo();function EI(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function bW(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function SW(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||EI(t)}function TW(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||EI(t)}async function AW(t){return new Promise((e,r)=>{yI.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function wW(t,e){var a;let r=0;const n=Ft(wo,"users"),s=await Qt(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const d=SW(u),f=o[u],p=f!=null&&typeof f=="string"?f.trim():f!=null?String(f):null;if(d.startsWith("schedule.periods.")){const m=d.split(".")[2];if(p){const g=await bW(p,i);g?(c.schedule.periods[m]=g,console.log(`Mapped Aeries teacher ID ${p} to Firebase user ID ${g} for period ${m}`)):console.warn(`Could not map Aeries teacher ID ${p} for period ${m}`)}}else c[d]=p}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=Ft(wo,"students"),d=lr(u,Nr("app.studentData.ssid","==",l)),f=await Qt(d);if(f.empty){const p=at(Ft(wo,"students")),m={app:{studentData:{ssid:l}},aeries:c,createdAt:sa()};await tr(p,m),console.log(`Created new student ${p.id} with Aeries data for SSID ${l}`)}else{const p=f.docs[0];await tr(at(wo,"students",p.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${p.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function CW(t){return new Promise((e,r)=>{yI.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function IW(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const d=TW(u);u==="IEP_Services"||u==="iep_services"?c[d]=((i=o[u])==null?void 0:i.split(";").map(f=>f.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[d]=((a=o[u])==null?void 0:a.split(";").map(f=>f.trim()))||[]:c[d]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=Ft(wo,"students"),d=lr(u,Nr("app.studentData.ssid","==",l)),f=await Qt(d);if(f.empty){const p=at(Ft(wo,"students")),m={app:{studentData:{ssid:l}},seis:c,createdAt:sa()};await tr(p,m),console.log(`Created new student ${p.id} with SEIS data for SSID ${l}`)}else{const p=f.docs[0];await tr(at(wo,"students",p.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${p.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const kW={name:"SeisImport",setup(){const t=ue(null),e=ue(null),r=ue([]),n=ue([]),s=ue([]),i=ue([]),a=ue(""),o=ue(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(p,m=!1)=>{a.value=p,o.value=m,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const m=p.target.files[0];if(m){const g=Fc(m,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!g.isValid){c(g.error,!0),p.target.value="";return}const v=Hr(m.name);if(!v.isSafe){c(`File name contains potentially dangerous content: ${v.threats.join(", ")}`,!0),p.target.value="";return}e.value=m}},previewFile:async()=>{const p=e.value;if(!p){c("❌ Please select a CSV file.",!0);return}if(!Ss("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const v=(await CW(p)).map(x=>{const y={};return Object.entries(x).forEach(([C,P])=>{const k=cn(C,{trim:!0,maxLength:100,removeDangerous:!0});let w=P;if(typeof P=="string"){w=cn(P,{trim:!0,maxLength:500,removeDangerous:!0});const S=Hr(w);S.isSafe||(console.warn(`Security threat detected in SEIS data: ${S.threats.join(", ")}`),w="")}y[k]=w}),y});r.value=v,c(`✅ Loaded ${r.value.length} rows.`);const E=Object.keys(r.value[0]||{}).filter(x=>x.length>0);n.value=E,s.value=[...E],i.value=r.value.slice(0,5)}catch(g){c(`❌ Error: ${g.message}`,!0),console.error("SEIS Parse Error:",g)}},importData:async()=>{if(!l.value){c("❌ Cannot import: No data or fields selected.",!0);return}if(!Ss("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const m=r.value.map(v=>{const E={};return s.value.forEach(x=>{v[x]!==void 0&&(E[x]=v[x])}),E}),g=m.filter(v=>Object.values(v).some(x=>x&&typeof x=="string"&&x.trim().length>0));if(g.length===0){c("❌ No valid records found to import.",!0);return}if(g.length!==m.length){const v=m.length-g.length;c(`⚠️ Skipping ${v} invalid records. Importing ${g.length} valid records.`)}await IW(g,s.value),c(`✅ Successfully imported ${g.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(m){c(`❌ Import failed: ${m.message}`,!0),console.error("SEIS Import Error:",m)}}}}}},DW={class:"seis-import"},PW=["disabled"],FW={key:0,id:"seis-field-options"},RW=["value"],OW={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},NW={border:"1",cellpadding:"4"},MW=["disabled"];function LW(t,e,r,n,s,i){return U(),j("div",DW,[e[5]||(e[5]=h("h3",null,"Upload SEIS CSV",-1)),h("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),h("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,PW),n.fieldOptions.length>0?(U(),j("div",FW,[e[4]||(e[4]=h("h4",null,"Select fields to import:",-1)),(U(!0),j(Fe,null,je(n.fieldOptions,a=>(U(),j("label",{key:a},[Ve(h("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,RW),[[xt,n.selectedFields]]),Ne(" "+te(a),1)]))),128))])):Ae("",!0),n.previewData.length>0?(U(),j("div",OW,[h("table",NW,[h("thead",null,[h("tr",null,[(U(!0),j(Fe,null,je(n.fieldOptions,a=>(U(),j("th",{key:a},te(a),1))),128))])]),h("tbody",null,[(U(!0),j(Fe,null,je(n.previewData,(a,o)=>(U(),j("tr",{key:o},[(U(!0),j(Fe,null,je(n.fieldOptions,l=>(U(),j("td",{key:l},te(a[l]||""),1))),128))]))),128))])]),h("p",null,"Showing first "+te(n.previewData.length)+" of "+te(n.parsedData.length)+" rows.",1)])):Ae("",!0),h("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,MW),h("p",{class:et(["status-msg",{error:n.isError}])},te(n.statusMessage),3)])}const BW=yt(kW,[["render",LW],["__scopeId","data-v-b942d3b4"]]),UW={name:"AeriesImport",setup(){const t=ue(null),e=ue(null),r=ue([]),n=ue([]),s=ue([]),i=ue([]),a=ue(""),o=ue(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(p,m=!1)=>{a.value=p,o.value=m,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:p=>{const m=p.target.files[0];if(m){const g=Fc(m,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!g.isValid){c(g.error,!0),p.target.value="";return}const v=Hr(m.name);if(!v.isSafe){c(`File name contains potentially dangerous content: ${v.threats.join(", ")}`,!0),p.target.value="";return}e.value=m}},previewFile:async()=>{const p=e.value;if(!p){c("❌ Please select a CSV file.",!0);return}if(!Ss("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const v=(await AW(p)).map(x=>{const y={};return Object.entries(x).forEach(([C,P])=>{const k=cn(C,{trim:!0,maxLength:100,removeDangerous:!0});let w=P;if(typeof P=="string"){w=cn(P,{trim:!0,maxLength:500,removeDangerous:!0});const S=Hr(w);S.isSafe||(console.warn(`Security threat detected in Aeries data: ${S.threats.join(", ")}`),w="")}y[k]=w}),y});r.value=v,c(`✅ Loaded ${r.value.length} rows.`);const E=Object.keys(r.value[0]||{}).filter(x=>x.length>0);n.value=E,s.value=[...E],i.value=r.value.slice(0,5)}catch(g){c(`❌ Error: ${g.message}`,!0),console.error("Aeries Parse Error:",g)}},importData:async()=>{if(!l.value){c("❌ Cannot import: No data or fields selected.",!0);return}if(!Ss("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const m=r.value.map(v=>{const E={};return s.value.forEach(x=>{v[x]!==void 0&&(E[x]=v[x])}),E}),g=m.filter(v=>Object.values(v).some(x=>x&&typeof x=="string"&&x.trim().length>0));if(g.length===0){c("❌ No valid records found to import.",!0);return}if(g.length!==m.length){const v=m.length-g.length;c(`⚠️ Skipping ${v} invalid records. Importing ${g.length} valid records.`)}await wW(g,s.value),c(`✅ Successfully imported ${g.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(m){c(`❌ Import failed: ${m.message}`,!0),console.error("Aeries Import Error:",m)}}}}}},VW={class:"aeries-import"},$W=["disabled"],jW={key:0,id:"aeries-field-options"},HW=["value"],GW={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},WW={border:"1",cellpadding:"4"},zW=["disabled"];function KW(t,e,r,n,s,i){return U(),j("div",VW,[e[5]||(e[5]=h("h3",null,"Upload Aeries CSV",-1)),h("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),h("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,$W),n.fieldOptions.length>0?(U(),j("div",jW,[e[4]||(e[4]=h("h4",null,"Select fields to import:",-1)),(U(!0),j(Fe,null,je(n.fieldOptions,a=>(U(),j("label",{key:a},[Ve(h("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,HW),[[xt,n.selectedFields]]),Ne(" "+te(a),1)]))),128))])):Ae("",!0),n.previewData.length>0?(U(),j("div",GW,[h("table",WW,[h("thead",null,[h("tr",null,[(U(!0),j(Fe,null,je(n.fieldOptions,a=>(U(),j("th",{key:a},te(a),1))),128))])]),h("tbody",null,[(U(!0),j(Fe,null,je(n.previewData,(a,o)=>(U(),j("tr",{key:o},[(U(!0),j(Fe,null,je(n.fieldOptions,l=>(U(),j("td",{key:l},te(a[l]||""),1))),128))]))),128))])]),h("p",null,"Showing first "+te(n.previewData.length)+" of "+te(n.parsedData.length)+" rows.",1)])):Ae("",!0),h("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,zW),h("p",{class:et(["status-msg",{error:n.isError}])},te(n.statusMessage),3)])}const qW=yt(UW,[["render",KW],["__scopeId","data-v-b40a9547"]]);function XW(){const t=ec(Fd()),e=ue(!1),r=ue(!1),n=ue(""),s=ue(""),i=ue(!1),a=Cs({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=ue([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(T,I=!1)=>{s.value=T,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const D=(await ba(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(D.success&&D.access_token)return n.value=D.access_token,e.value=!0,l("✅ Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(T){const I=T.message||"Connection failed";return l(`❌ Connection failed: ${I}`,!0),console.error("Aeries API Connection Error:",T),!1}finally{r.value=!1}},d=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},f=async T=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const O=(await ba(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:T,accessToken:n.value})).data;if(O.success)return l(`✅ Successfully fetched data from ${T}`),{data:O.data,responseTime:O.responseTime};throw new Error(O.error||"API call failed")}catch(I){const D=I.message||"API call failed";return l(`❌ API call failed: ${D}`,!0),console.error("Aeries API Test Error:",I),{error:D}}},p=async T=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const O=(await ba(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:T,accessToken:n.value})).data;return O.success?(l(`✅ Successfully fetched data from ${T}`),{data:O.data,responseTime:O.responseTime}):{error:O.error||"API call failed"}}catch(I){const D=I.message||"API call failed";return l(`❌ API call failed: ${D}`,!0),console.error("Custom Aeries API Test Error:",I),{error:D}}},m=async()=>await f("/students"),g=async()=>await f("/teachers"),v=async()=>{const T=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const I of T){const D=await p(I);if(D&&!D.error)return D}return{error:"No special education endpoints found"}},E=async()=>await p("/api/special-education/ieps"),x=async()=>await p("/api/special-education/504-plans"),y=async()=>await p("/api/special-education/accommodations"),C=async()=>await p("/api/special-education/services"),P=async()=>await p("/api/special-education/case-managers"),k=async()=>{const T={},I=o.value.filter(D=>D.path.includes("special-education")||D.path.includes("iep")||D.path.includes("504"));for(const D of I)T[D.path]=await p(D.path);return T},w=async()=>{var I;const T=await f("/students");if(T&&!T.error&&T.data){const D=((I=T.data.students)==null?void 0:I[0])||T.data[0],O=D&&(D.specialEducation||D.iep||D.plan504||D.disabilities||D.accommodations);return{success:!0,hasSpecialEdFields:O,sampleStudent:D,message:O?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return T},S=async()=>{const T=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],I={};for(const D of T)I[D]=await f(`/students${D}`);return I};async function _({baseUrl:T,accessToken:I}){const D=ec(),F=await ba(D,"testAeriesEndpoint")({baseUrl:T,endpoint:"/schools",accessToken:I});return F.data.data.orgs||F.data.data.schools||F.data.data||[]}async function b({baseUrl:T,accessToken:I,schoolId:D}){const O=ec(),R=ba(O,"testAeriesEndpoint"),F=`/classes?filter=school.sourcedId='${D}'`,N=await R({baseUrl:T,endpoint:F,accessToken:I});return N.data.data.classes||N.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:d,testEndpoint:f,testCustomEndpoint:p,fetchStudents:m,fetchTeachers:g,fetchSpecialEducationStudents:v,fetchIEPRecords:E,fetch504Plans:x,fetchAccommodations:y,fetchServices:C,fetchCaseManagers:P,testAllSpecialEducationEndpoints:k,testOneRosterForSpecialEd:w,testStudentsWithSpecialEd:S,fetchSchools:_,fetchClasses:b}}const $m=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},jm=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function YW(){const t=lo(),e=cc(),r=ue(!1),n=ue(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,d=s(),f={baseUrl:$m(c.baseUrl,d),clientId:$m(c.clientId,d),clientSecret:$m(c.clientSecret,d),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},p=at(t,"users",u.uid,"aeries_config","current");return await tr(p,f),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),d=at(t,"users",c.uid,"aeries_config","current"),f=await sr(d);if(!f.exists())return null;const p=f.data();if(p.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:jm(p.baseUrl,u),clientId:jm(p.clientId,u),clientSecret:jm(p.clientSecret,u),selectedSchoolId:p.selectedSchoolId||"",selectedClassIds:p.selectedClassIds||[],manualClassInput:p.manualClassInput||"",savedAt:p.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=at(t,"users",c.uid,"aeries_config","current");return await zo(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=at(t,"users",c.uid,"aeries_config","current");return(await sr(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const QW={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:d,testAllSpecialEducationEndpoints:f,testOneRosterForSpecialEd:p,testStudentsWithSpecialEd:m,fetchSchools:g,fetchClasses:v}=XW(),{isLoading:E,error:x,saveAeriesConfig:y,loadAeriesConfig:C,deleteAeriesConfig:P,hasSavedConfig:k}=YW(),w=ue(!1),S=ue(null),_=ue(""),b=ue(null),T=ue([]),I=ue(""),D=ue([]),O=ue([]),R=ue(!1),F=ue(""),N=ue(""),V=ue(!1),L=ue({oneroster:!1,nativeAeries:!1}),z=ue([]),H=ue([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),B=ue([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),W=be(()=>i.baseUrl&&i.clientId&&i.clientSecret),K=async()=>{if(await c())try{w.value=!0;const ae=await g({baseUrl:i.baseUrl,accessToken:r.value});T.value=ae||[],I.value=""}catch(ae){console.error("Failed to fetch schools:",ae),o("Failed to fetch schools",!0),T.value=[]}finally{w.value=!1}},ee=async ne=>{w.value=!0,_.value=ne,S.value=null,b.value=null;const ae=await d(ne);ae&&!ae.error?(S.value=ae.data,b.value=ae.responseTime):ae&&ae.error&&(S.value={error:ae.error}),w.value=!1},me=async()=>{w.value=!0,await f(),w.value=!1},le=async()=>{w.value=!0,_.value="/students (SPED check)",S.value=null,b.value=null;const ne=await p();ne&&!ne.error?(S.value=ne,o(ne.message)):ne&&ne.error&&(S.value={error:ne.error},o(`❌ OneRoster test failed: ${ne.error}`,!0)),w.value=!1},he=async()=>{w.value=!0,_.value="/students (SPED filters)",S.value=null,b.value=null;const ne=await m();ne&&(S.value=ne,o("OneRoster SPED filter tests completed")),w.value=!1};Ut(I,async ne=>{if(!ne){D.value=[],O.value=[];return}R.value=!1,F.value="",w.value=!0;try{D.value=await v({baseUrl:i.baseUrl,accessToken:r.value,schoolId:ne}),O.value=[]}catch{R.value=!0,D.value=[],O.value=[]}finally{w.value=!1}});const Z=be(()=>t.value&&T.value.length>0),Q=be(()=>Z.value&&I.value),ve=be(()=>L.value.oneroster||L.value.nativeAeries),X=()=>{const ne=[];L.value.oneroster&&ne.push(...H.value),L.value.nativeAeries&&ne.push(...B.value),a.value=ne},q=(ne,ae=!1)=>{N.value=ne,V.value=ae,setTimeout(()=>{N.value="",V.value=!1},5e3)},Y=async()=>{try{const ne={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:I.value,selectedClassIds:O.value,manualClassInput:F.value,selectedApiTypes:L.value,selectedEndpoints:z.value};await y(ne),q("✅ Configuration saved securely to Firebase!")}catch(ne){console.error("Failed to save configuration:",ne),q(`❌ Failed to save configuration: ${ne.message}`,!0)}},ge=async()=>{try{const ne=await C();if(!ne){q("❌ No saved configuration found",!0);return}i.baseUrl=ne.baseUrl||"",i.clientId=ne.clientId||"",i.clientSecret=ne.clientSecret||"",I.value=ne.selectedSchoolId||"",O.value=ne.selectedClassIds||[],F.value=ne.manualClassInput||"",ne.selectedApiTypes&&(L.value=ne.selectedApiTypes),ne.selectedEndpoints&&(z.value=ne.selectedEndpoints),X();const ae=ne.savedAt?new Date(ne.savedAt).toLocaleString():"Unknown";q(`✅ Configuration loaded securely (saved: ${ae})`)}catch(ne){console.error("Failed to load configuration:",ne),q(`❌ Failed to load configuration: ${ne.message}`,!0)}},re=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await P(),q("✅ Configuration permanently deleted from Firebase!")}catch(ne){console.error("Failed to clear configuration:",ne),q(`❌ Failed to clear configuration: ${ne.message}`,!0)}};return jt(async()=>{try{if(await k()){const ae=await C();ae&&(i.baseUrl=ae.baseUrl||"",i.clientId=ae.clientId||"",i.clientSecret=ae.clientSecret||"",ae.selectedApiTypes&&(L.value=ae.selectedApiTypes),ae.selectedEndpoints&&(z.value=ae.selectedEndpoints),X(),q("✅ Configuration auto-loaded securely from Firebase"))}}catch(ne){console.error("Failed to auto-load configuration:",ne)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:w,connectionStatus:n,isError:s,apiResults:S,currentEndpoint:_,responseTime:b,availableEndpoints:a,canConnect:W,loadDemoCredentials:l,connect:K,disconnect:u,testEndpoint:ee,handleTestSpecialEd:me,handleTestOneRosterSpecialEd:le,handleTestStudentsWithSpecialEd:he,schools:T,selectedSchoolId:I,classes:D,selectedClassIds:O,classesFetchError:R,manualClassInput:F,canShowSchoolDropdown:Z,canShowClasses:Q,configStatus:N,configError:V,storageLoading:E,storageError:x,saveConfiguration:Y,loadConfiguration:ge,clearConfiguration:re,selectedApiTypes:L,selectedEndpoints:z,onerosterEndpoints:H,nativeAeriesEndpoints:B,hasSelectedApiTypes:ve,updateAvailableEndpoints:X}}},JW={class:"aeries-api-connector"},ZW={class:"connection-form"},ez={class:"form-group"},tz=["disabled"],rz={class:"form-group"},nz=["disabled"],sz={class:"form-group"},az=["disabled"],iz={class:"button-group"},oz=["disabled"],lz=["disabled"],cz={class:"api-type-selection"},uz={class:"api-type-options"},dz={class:"api-type-option"},fz={class:"checkbox-label"},hz={class:"api-type-option"},pz={class:"checkbox-label"},mz={key:0,class:"endpoint-selection"},gz={class:"endpoint-categories"},vz={key:0,class:"endpoint-category"},xz={class:"endpoint-checkboxes"},yz=["value"],Ez={class:"endpoint-name"},_z={class:"endpoint-path-small"},bz={key:1,class:"endpoint-category"},Sz={class:"endpoint-checkboxes"},Tz=["value"],Az={class:"endpoint-name"},wz={class:"endpoint-path-small"},Cz={class:"config-management"},Iz={class:"config-buttons"},kz=["disabled"],Dz=["disabled"],Pz=["disabled"],Fz={key:1,class:"api-testing"},Rz={class:"special-ed-section"},Oz={class:"quick-test-buttons"},Nz=["disabled"],Mz=["disabled"],Lz=["disabled"],Bz=["disabled"],Uz=["disabled"],Vz=["disabled"],$z={class:"endpoint-grid"},jz={class:"endpoint-path"},Hz={class:"endpoint-description"},Gz=["onClick","disabled"],Wz={key:0,class:"api-results"},zz={class:"results-header"},Kz={class:"endpoint-tested"},qz={key:0,class:"response-time"},Xz={class:"results-content"},Yz={key:2,class:"form-group"},Qz=["value"],Jz={key:3,class:"form-group"},Zz={key:0},eK=["value"],tK={key:1};function rK(t,e,r,n,s,i){return U(),j("div",JW,[e[48]||(e[48]=Sn('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc>🔍 OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc>🎯 Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc>📋 CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students → Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),h("div",ZW,[h("div",ez,[e[24]||(e[24]=h("label",{for:"baseUrl"},"Base URL:",-1)),Ve(h("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,tz),[[At,n.connectionConfig.baseUrl]])]),h("div",rz,[e[25]||(e[25]=h("label",{for:"clientId"},"Client ID:",-1)),Ve(h("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,nz),[[At,n.connectionConfig.clientId]])]),h("div",sz,[e[26]||(e[26]=h("label",{for:"clientSecret"},"Client Secret:",-1)),Ve(h("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,az),[[At,n.connectionConfig.clientSecret]])]),h("div",iz,[h("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},te(n.isConnecting?"Connecting...":"Connect"),9,oz),n.isConnected?(U(),j("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):Ae("",!0),h("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,lz)]),h("div",cz,[e[37]||(e[37]=h("h4",null,"Select API Types",-1)),e[38]||(e[38]=h("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),h("div",uz,[h("div",dz,[h("label",fz,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[xt,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=h("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=h("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=h("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),h("div",hz,[h("label",pz,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[xt,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=h("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=h("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=h("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(U(),j("div",mz,[e[35]||(e[35]=h("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=h("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),h("div",gz,[n.selectedApiTypes.oneroster?(U(),j("div",vz,[e[33]||(e[33]=h("h6",null,"OneRoster Endpoints",-1)),h("div",xz,[(U(!0),j(Fe,null,je(n.onerosterEndpoints,a=>(U(),j("label",{key:a.path,class:"endpoint-checkbox"},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,yz),[[xt,n.selectedEndpoints]]),h("span",Ez,te(a.name),1),h("span",_z,te(a.path),1)]))),128))])])):Ae("",!0),n.selectedApiTypes.nativeAeries?(U(),j("div",bz,[e[34]||(e[34]=h("h6",null,"Native Aeries v5 Endpoints",-1)),h("div",Sz,[(U(!0),j(Fe,null,je(n.nativeAeriesEndpoints,a=>(U(),j("label",{key:a.path,class:"endpoint-checkbox"},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,Tz),[[xt,n.selectedEndpoints]]),h("span",Az,te(a.name),1),h("span",wz,te(a.path),1)]))),128))])])):Ae("",!0)])])):Ae("",!0)]),h("div",Cz,[e[39]||(e[39]=h("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=h("div",{class:"security-note"},[h("p",null,[h("strong",null,"🔒 Security:"),Ne(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),h("div",Iz,[h("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},te(n.storageLoading?"⏳ Saving...":"💾 Save Configuration"),9,kz),h("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},te(n.storageLoading?"⏳ Loading...":"📂 Load Saved Configuration"),9,Dz),h("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},te(n.storageLoading?"⏳ Deleting...":"🗑️ Clear Saved Configuration"),9,Pz)]),n.configStatus?(U(),j("div",{key:0,class:et(["config-status",{error:n.configError}])},te(n.configStatus),3)):Ae("",!0)])]),n.connectionStatus?(U(),j("div",{key:0,class:et(["status-message",{error:n.isError}])},te(n.connectionStatus),3)):Ae("",!0),n.isConnected?(U(),j("div",Fz,[e[43]||(e[43]=h("h4",null,"Test API Endpoints",-1)),h("div",Rz,[e[41]||(e[41]=h("h5",null,"Special Education Data (IEP/504)",-1)),h("div",Oz,[h("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},te(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,Nz),h("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,Mz),h("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,Lz),h("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,Bz),h("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,Uz),h("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,Vz)])]),h("div",$z,[(U(!0),j(Fe,null,je(n.availableEndpoints,a=>(U(),j("div",{key:a.path,class:"endpoint-card"},[h("h5",null,te(a.name),1),h("p",jz,te(a.path),1),h("p",Hz,te(a.description),1),h("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},te(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,Gz)]))),128))]),n.apiResults?(U(),j("div",Wz,[e[42]||(e[42]=h("h4",null,"API Response",-1)),h("div",zz,[h("span",Kz,"Endpoint: "+te(n.currentEndpoint),1),n.responseTime?(U(),j("span",qz,"Response time: "+te(n.responseTime)+"ms",1)):Ae("",!0)]),h("div",Xz,[h("pre",null,te(JSON.stringify(n.apiResults,null,2)),1)])])):Ae("",!0)])):Ae("",!0),n.canShowSchoolDropdown?(U(),j("div",Yz,[e[45]||(e[45]=h("label",null,"School",-1)),Ve(h("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=h("option",{value:"",disabled:""},"Select a school",-1)),(U(!0),j(Fe,null,je(n.schools,a=>(U(),j("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},te(a.name||a.title||a.schoolName),9,Qz))),128))],512),[[vr,n.selectedSchoolId]])])):Ae("",!0),n.canShowClasses?(U(),j("div",Jz,[e[47]||(e[47]=h("label",null,"Case Manager Classes",-1)),n.classesFetchError?(U(),j("div",tK,[e[46]||(e[46]=h("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),Ve(h("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[At,n.manualClassInput]])])):(U(),j("div",Zz,[Ve(h("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(U(!0),j(Fe,null,je(n.classes,a=>(U(),j("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},te(a.title||a.name||a.className),9,eK))),128))],512),[[vr,n.selectedClassIds]])]))])):Ae("",!0)])}const nK=yt(QW,[["render",rK],["__scopeId","data-v-0f37c4fc"]]),Sl=ue(null);function hd(){const t=new Promise(e=>{const r=d1(nr,async n=>{if(n)try{const s=at(Ye,"users",n.uid),i=await sr(s);i.exists()?Sl.value={uid:n.uid,email:n.email,displayName:n.displayName,...i.data()}:(console.warn(`User ${n.uid} exists in Auth but not in users collection`),Sl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null})}catch(s){console.error("Error fetching user document:",s),Sl.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null}}else Sl.value=null;e(Sl.value),r()})});return{currentUser:Sl,waitForAuthInit:t}}const sK={key:0,class:"app-settings-panel"},aK={class:"settings-section"},iK={class:"grades-checkboxes"},oK=["checked"],lK=["value"],cK={class:"settings-section"},uK={key:0,class:"class-service-fieldset"},dK={class:"checkbox-inline-group"},fK=["value"],hK={key:1,class:"class-service-fieldset"},pK={class:"checkbox-inline-group"},mK=["value"],gK={key:2,class:"class-service-fieldset"},vK={class:"checkbox-inline-group"},xK=["value"],yK={key:3,class:"class-service-fieldset"},EK={class:"checkbox-inline-group"},_K={key:4,class:"class-service-fieldset"},bK={class:"checkbox-inline-group"},SK=["onClick"],TK={class:"checkbox-inline-group"},AK=["onClick"],wK=["onClick"],CK={class:"add-class-service"},IK={class:"custom-chips"},kK=["onClick"],DK={class:"settings-section"},PK={class:"service-providers-defaults"},FK=["value"],RK={class:"service-providers-custom"},OK={class:"custom-provider-inputs"},NK={class:"custom-chips"},MK=["onClick"],LK={class:"settings-section"},BK={class:"periods-controls"},UK={class:"period-number-control"},VK={key:0,class:"period-labels"},$K={class:"period-labels-grid"},jK=["onUpdate:modelValue","placeholder"],HK={key:1,class:"period-preview"},GK={class:"settings-section"},WK={class:"admin-action-btns"},zK=["disabled"],KK=["disabled"],qK=["disabled"],XK={key:1,class:"not-admin"},YK={__name:"AppSettings",setup(t){const{currentUser:e}=hd(),r=be(()=>{var b;return((b=e.value)==null?void 0:b.role)||null}),n=be(()=>["admin","administrator","administrator_504_CM","sped_chair"].includes(r.value)),s=[{value:"K",label:"K"},...Array.from({length:12},(b,T)=>({value:(T+1).toString(),label:(T+1).toString()}))],i=["English","Math","History","Science"],a=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],{loadAppSettings:o,saveAppSettings:l}=ha(),c=ue(!1),u=ue(!1),d=ue(""),f=ue(!1),p=ue(""),m=ue(""),g=ue({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),v=()=>{const b=nb(g.value.numPeriods,{min:1,max:15,decimals:0});if(b===null)return k("Invalid number of periods. Must be between 1 and 15.",!0),!1;g.value.numPeriods=b;for(let T=0;T<g.value.numPeriods;T++){g.value.periodLabels[T]||(g.value.periodLabels[T]=`Per${T+1}`);const I=cn(g.value.periodLabels[T],{trim:!0,maxLength:3,removeDangerous:!0}),D=Hr(I);if(!D.isSafe)return k(`Security threat detected in period ${T+1} label: ${D.threats.join(", ")}`,!0),!1;const O=fd(I,{max:3,fieldName:`Period ${T+1} label`});if(!O.isValid)return k(O.error,!0),!1;g.value.periodLabels[T]=I}if(g.value.customServiceProviders)for(let T=0;T<g.value.customServiceProviders.length;T++){const I=g.value.customServiceProviders[T];if(I.name){const D=cn(I.name,{trim:!0,maxLength:100,removeDangerous:!0}),O=Hr(D);if(!O.isSafe)return k(`Security threat detected in custom provider ${T+1}: ${O.threats.join(", ")}`,!0),!1;I.name=D}if(I.abbreviation){const D=cn(I.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),O=Hr(D);if(!O.isSafe)return k(`Security threat detected in custom provider abbreviation ${T+1}: ${O.threats.join(", ")}`,!0),!1;I.abbreviation=D}}return!0},E=be(()=>a),x=be(()=>s.every(b=>g.value.grades.includes(b.value))),y=b=>{b.target.checked?g.value.grades=s.map(T=>T.value):g.value.grades=[]},C=()=>{if(!p.value.trim()||!m.value.trim()){k("Both name and abbreviation are required for custom service providers",!0);return}if(g.value.customServiceProviders.some(T=>T.abbreviation.toLowerCase()===m.value.toLowerCase())){k("A service provider with this abbreviation already exists",!0);return}g.value.customServiceProviders.push({name:p.value.trim(),abbreviation:m.value.trim()}),p.value="",m.value="",k("Custom service provider added successfully")},P=b=>{g.value.customServiceProviders.splice(b,1)};Ut(()=>g.value.numPeriods,b=>{const T=nb(b,{min:1,max:15,decimals:0});if(T!==null&&T!==b&&(g.value.numPeriods=T),g.value.periodLabels.length<g.value.numPeriods)for(let I=g.value.periodLabels.length;I<g.value.numPeriods;I++)g.value.periodLabels.push(`Per${I+1}`)}),Ut(()=>g.value.periodLabels,b=>{b.forEach((T,I)=>{T&&T.length>3&&(g.value.periodLabels[I]=T.substring(0,3))})},{deep:!0});const k=(b,T=!1)=>{d.value=b,f.value=T,setTimeout(()=>{d.value="",f.value=!1},5e3)},w=async(b=!1)=>{c.value=!0;try{const T=await o();if(T){if(g.value={...g.value,...T},!g.value.periodLabels||g.value.periodLabels.length<g.value.numPeriods){g.value.periodLabels=[];for(let I=0;I<g.value.numPeriods;I++)g.value.periodLabels[I]=g.value.periodLabels[I]||`Per${I+1}`}b&&k("Settings loaded successfully")}}catch(T){k("Error loading settings",!0),console.error("Load settings error:",T)}finally{c.value=!1}},S=async()=>{if(!Ss("saveAppSettings",10,6e4).allowed){k("Too many save requests. Please wait before saving again.",!0);return}if(v()){u.value=!0;try{await l(g.value),k("Settings saved successfully")}catch(T){k("Error saving settings",!0),console.error("Save settings error:",T)}finally{u.value=!1}}},_=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(g.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},k("Settings reset to defaults"))};return jt(()=>{w()}),(b,T)=>n.value?(U(),j("div",sK,[T[33]||(T[33]=h("h2",null,"App Settings",-1)),h("form",{onSubmit:fn(S,["prevent"])},[h("section",aK,[h("fieldset",null,[T[17]||(T[17]=h("legend",null,"Grades",-1)),h("div",iK,[h("label",null,[h("input",{type:"checkbox",checked:x.value,onChange:y},null,40,oK),T[16]||(T[16]=h("span",null,"Select All",-1))]),(U(),j(Fe,null,je(s,I=>h("label",{key:I.value},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[0]||(T[0]=D=>g.value.grades=D),value:I.value},null,8,lK),[[xt,g.value.grades]]),h("span",null,te(I.label),1)])),64))])])]),h("section",cK,[T[26]||(T[26]=h("h3",null,"Class Services",-1)),g.value.classServices[0]&&g.value.classServices[0].enabledSubcategories?(U(),j("div",uK,[h("fieldset",null,[T[18]||(T[18]=h("legend",null,"SDC",-1)),h("div",dK,[(U(),j(Fe,null,je(i,I=>h("label",{key:I},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[1]||(T[1]=D=>g.value.classServices[0].enabledSubcategories=D),value:I},null,8,fK),[[xt,g.value.classServices[0].enabledSubcategories]]),Ne(" "+te(I),1)])),64))])])])):Ae("",!0),g.value.classServices[1]&&g.value.classServices[1].enabledSubcategories?(U(),j("div",hK,[h("fieldset",null,[T[19]||(T[19]=h("legend",null,"Co-teach",-1)),h("div",pK,[(U(),j(Fe,null,je(i,I=>h("label",{key:I},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[2]||(T[2]=D=>g.value.classServices[1].enabledSubcategories=D),value:I},null,8,mK),[[xt,g.value.classServices[1].enabledSubcategories]]),Ne(" "+te(I),1)])),64))])])])):Ae("",!0),g.value.classServices[2]&&g.value.classServices[2].enabledSubcategories?(U(),j("div",gK,[h("fieldset",null,[T[20]||(T[20]=h("legend",null,"RSP",-1)),h("div",vK,[(U(),j(Fe,null,je(i,I=>h("label",{key:I},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[3]||(T[3]=D=>g.value.classServices[2].enabledSubcategories=D),value:I},null,8,xK),[[xt,g.value.classServices[2].enabledSubcategories]]),Ne(" "+te(I),1)])),64))])])])):Ae("",!0),g.value.classServices[3]&&g.value.classServices[3].enabledSubcategories?(U(),j("div",yK,[h("fieldset",null,[T[22]||(T[22]=h("legend",null,"Directed Studies",-1)),h("div",EK,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[4]||(T[4]=I=>g.value.classServices[3].enabledSubcategories=I),value:"Directed Studies"},null,512),[[xt,g.value.classServices[3].enabledSubcategories]]),T[21]||(T[21]=Ne(" Directed Studies "))])])])])):Ae("",!0),g.value.classServices[4]&&g.value.classServices[4].enabledSubcategories?(U(),j("div",_K,[h("fieldset",null,[T[24]||(T[24]=h("legend",null,"FA",-1)),h("div",bK,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[5]||(T[5]=I=>g.value.classServices[4].enabledSubcategories=I),value:"FA"},null,512),[[xt,g.value.classServices[4].enabledSubcategories]]),T[23]||(T[23]=Ne(" FA "))])])])])):Ae("",!0),(U(!0),j(Fe,null,je(g.value.classServices.slice(5),(I,D)=>(U(),j("div",{key:I.name,class:"class-service-fieldset"},[h("fieldset",null,[h("legend",null,[Ne(te(I.name)+" ",1),h("button",{type:"button",onClick:O=>b.removeClassService(D+5),title:"Remove Service"},"×",8,SK)]),h("div",TK,[(U(!0),j(Fe,null,je(I.subcategories,(O,R)=>(U(),j("label",{key:O},[T[25]||(T[25]=h("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),Ne(" "+te(O)+" ",1),h("button",{type:"button",onClick:F=>b.removeSubcategory(D+5,R),title:"Remove Subcategory"},"×",8,AK)]))),128)),h("button",{type:"button",onClick:O=>b.addSubcategory(D+5)},"+ Add Subcategory",8,wK)])])]))),128)),h("div",CK,[Ve(h("input",{type:"text","onUpdate:modelValue":T[6]||(T[6]=I=>b.newServiceName=I),placeholder:"New Service Name",maxlength:"18"},null,512),[[At,b.newServiceName]]),Ve(h("input",{type:"text","onUpdate:modelValue":T[7]||(T[7]=I=>b.newServiceSubcat=I),placeholder:"Add Subcategory",maxlength:"18",onKeyup:T[8]||(T[8]=eA((...I)=>b.addNewServiceSubcat&&b.addNewServiceSubcat(...I),["enter"]))},null,544),[[At,b.newServiceSubcat]]),h("button",{type:"button",onClick:T[9]||(T[9]=(...I)=>b.addNewServiceSubcat&&b.addNewServiceSubcat(...I))},"+ Add Subcategory"),h("div",IK,[(U(!0),j(Fe,null,je(b.newServiceSubcats,(I,D)=>(U(),j("span",{key:I,class:"chip"},[Ne(te(I)+" ",1),h("button",{type:"button",onClick:O=>b.removeNewServiceSubcat(D)},"×",8,kK)]))),128))]),h("button",{type:"button",onClick:T[10]||(T[10]=(...I)=>b.addClassService&&b.addClassService(...I))},"+ Add Class Service")])]),h("section",DK,[h("fieldset",null,[T[28]||(T[28]=h("legend",null,"Service Providers",-1)),h("div",PK,[(U(!0),j(Fe,null,je(E.value,I=>(U(),j("label",{key:I.abbreviation},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":T[11]||(T[11]=D=>g.value.serviceProviders=D),value:I.abbreviation},null,8,FK),[[xt,g.value.serviceProviders]]),h("span",null,te(I.name)+" ("+te(I.abbreviation)+")",1)]))),128))]),h("div",RK,[T[27]||(T[27]=h("label",null,"Add Custom Service Provider:",-1)),h("div",OK,[Ve(h("input",{type:"text","onUpdate:modelValue":T[12]||(T[12]=I=>p.value=I),placeholder:"Full Name",maxlength:"100"},null,512),[[At,p.value]]),Ve(h("input",{type:"text","onUpdate:modelValue":T[13]||(T[13]=I=>m.value=I),placeholder:"Abbreviation",maxlength:"10"},null,512),[[At,m.value]]),h("button",{type:"button",onClick:C},"Add")]),h("div",NK,[(U(!0),j(Fe,null,je(g.value.customServiceProviders,(I,D)=>(U(),j("span",{key:D,class:"chip"},[Ne(te(I.name)+" ("+te(I.abbreviation)+") ",1),h("button",{type:"button",onClick:O=>P(D)},"×",8,MK)]))),128))])])])]),h("section",LK,[h("fieldset",null,[T[32]||(T[32]=h("legend",null,"Periods",-1)),h("div",BK,[h("div",UK,[h("label",null,[T[29]||(T[29]=Ne(" Number of Periods (max 15): ")),Ve(h("input",{type:"number","onUpdate:modelValue":T[14]||(T[14]=I=>g.value.numPeriods=I),min:"1",max:"15",class:"period-number-input"},null,512),[[At,g.value.numPeriods]])])]),g.value.numPeriods>0?(U(),j("div",VK,[T[30]||(T[30]=h("h4",null,"Period Labels (3 chars max each):",-1)),h("div",$K,[(U(!0),j(Fe,null,je(g.value.numPeriods,I=>(U(),j("div",{key:I,class:"period-label-item"},[h("label",null,[Ne(" Period "+te(I)+": ",1),Ve(h("input",{type:"text","onUpdate:modelValue":D=>g.value.periodLabels[I-1]=D,maxlength:"3",placeholder:`Per${I}`,class:"period-label-input"},null,8,jK),[[At,g.value.periodLabels[I-1]]])])]))),128))])])):Ae("",!0),g.value.numPeriods>0?(U(),j("div",HK,[T[31]||(T[31]=h("strong",null,"Preview:",-1)),(U(!0),j(Fe,null,je(g.value.numPeriods,I=>(U(),j("span",{key:I,class:"period-preview-item"},te(g.value.periodLabels[I-1]||`Per${I}`),1))),128))])):Ae("",!0)])])]),h("section",GK,[h("div",WK,[h("button",{type:"submit",disabled:u.value||c.value,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},"💾 Save Settings",8,zK),h("button",{type:"button",onClick:T[15]||(T[15]=()=>w(!0)),disabled:c.value,class:"admin-action-btn info",style:{"min-width":"100px","max-width":"100px"}},"📂 Load",8,KK),h("button",{type:"button",onClick:_,disabled:c.value,class:"admin-action-btn warning",style:{"min-width":"100px","max-width":"100px"}},"↩️ Reset",8,qK)]),d.value?(U(),j("div",{key:0,class:et(["status-message",{error:f.value,success:!f.value}])},te(d.value),3)):Ae("",!0)])],32)])):(U(),j("div",XK,T[34]||(T[34]=[h("h2",null,"App Settings",-1),h("p",null,"Access denied. You must be an admin to view this page.",-1)])))}},QK=yt(YK,[["__scopeId","data-v-1689db17"]]),JK={class:"admin-aide-assignment"},ZK={class:"header"},eq={class:"header-actions"},tq=["disabled"],rq={key:0},nq={key:1},sq={class:"content"},aq={key:0,class:"error-message"},iq={key:1,class:"error-message"},oq={key:2,class:"loading"},lq={key:3,class:"schedule-container"},cq={class:"aide-schedule-table"},uq={class:"aide-name"},dq=["value","onChange"],fq=["value"],hq={class:"assignment-buttons"},pq=["onClick"],mq=["onClick"],gq={class:"direct-assignment-cell"},vq=["value","onChange"],xq=["value"],yq={class:"assignment-buttons"},Eq=["onClick"],_q=["onClick"],bq={__name:"AdminAideAssignment",setup(t){const e=vi(),{userList:r,fetchUsers:n}=Na(),{students:s,fetchStudents:i}=Oa(),a=fa(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=hx(),{appSettings:u,loadAppSettings:d}=ha(),f=ue(!0),p=ue(!1),m=be(()=>{var F;const R=(F=a.currentUser)==null?void 0:F.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(R)}),g=be(()=>{var R;return((R=r.value)==null?void 0:R.filter(F=>F.role==="paraeducator"))||[]}),v=be(()=>{var R;return((R=r.value)==null?void 0:R.filter(F=>F.role==="teacher"))||[]}),E=be(()=>{var F;const R=((F=u.value)==null?void 0:F.numPeriods)||7;return Array.from({length:R},(N,V)=>V+1)});function x(R){return R.id}function y(R){return R.id}function C(R,F){if(!o.value[R])return[""];o.value[R].classAssignment||(o.value[R].classAssignment={});let N=o.value[R].classAssignment[F];return Array.isArray(N)?N.length?N:[""]:typeof N=="string"&&N!==""?[N]:[""]}function P(R){if(!o.value[R])return[""];let F=o.value[R].directAssignment;return Array.isArray(F)?F.length?F:[""]:typeof F=="string"&&F!==""?[F]:[""]}function k(R,F,N,V){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]}),o.value[R].classAssignment||(o.value[R].classAssignment={});let L=C(R,F);for(L[N]=V;L.length>1&&L[L.length-1]==="";)L.pop();o.value[R].classAssignment[F]=[...L]}function w(R,F,N){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]});let V=P(R);for(V[F]=N;V.length>1&&V[V.length-1]==="";)V.pop();o.value[R].directAssignment=[...V]}function S(R,F){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]}),o.value[R].classAssignment||(o.value[R].classAssignment={});let N=C(R,F);N.push(""),o.value[R].classAssignment[F]=[...N]}function _(R,F,N){if(!o.value[R]||!o.value[R].classAssignment)return;let V=C(R,F);V.length<=1||(V.splice(N,1),o.value[R].classAssignment[F]=[...V])}function b(R){o.value[R]||(o.value[R]={classAssignment:{},directAssignment:[]});let F=P(R);F.push(""),o.value[R].directAssignment=[...F]}function T(R,F){if(!o.value[R])return;let N=P(R);N.length<=1||(N.splice(F,1),o.value[R].directAssignment=[...N])}async function I(){try{f.value=!0,await Promise.all([n(),i(),l(),d()]),f.value=!1}catch(R){console.error("Error loading data:",R),f.value=!1}}async function D(){try{p.value=!0,await c(),p.value=!1}catch(R){console.error("Error saving aide assignments:",R),p.value=!1}}function O(){e.push("/admin")}return jt(I),(R,F)=>(U(),j("div",JK,[h("div",ZK,[F[3]||(F[3]=h("h1",null,"Aide Assignment Management",-1)),h("div",eq,[h("button",{onClick:D,class:"btn btn-primary",disabled:p.value},[p.value?(U(),j("span",rq,"💾")):(U(),j("span",nq,"💾")),Ne(" "+te(p.value?"Saving...":"Save Assignments"),1)],8,tq),h("button",{onClick:O,class:"btn btn-secondary"},F[2]||(F[2]=[h("span",null,"←",-1),Ne(" Back ")]))])]),h("div",sq,[oe(a).currentUser?m.value?f.value?(U(),j("div",oq," Loading aide assignments... ")):(U(),j("div",lq,[h("table",cq,[h("thead",null,[h("tr",null,[F[8]||(F[8]=h("th",null,"Aide Name",-1)),(U(!0),j(Fe,null,je(E.value,N=>(U(),j("th",{key:N,class:"period-header"}," Period "+te(N),1))),128)),F[9]||(F[9]=h("th",null,"Direct Assignment",-1))])]),h("tbody",null,[(U(!0),j(Fe,null,je(g.value,N=>(U(),j("tr",{key:N.id,class:"aide-row"},[h("td",uq,te(N.name||N.email),1),(U(!0),j(Fe,null,je(E.value,V=>(U(),j("td",{key:V,class:"period-cell"},[(U(!0),j(Fe,null,je(C(x(N),V),(L,z)=>(U(),j("div",{key:"t-"+z,class:"assignment-row"},[h("select",{value:L,onChange:H=>k(x(N),V,z,H.target.value),class:"teacher-select"},[F[10]||(F[10]=h("option",{value:""},"No Assignment",-1)),(U(!0),j(Fe,null,je(v.value,H=>(U(),j("option",{key:y(H),value:y(H)},te(H.name||H.email),9,fq))),128))],40,dq),h("div",hq,[C(x(N),V).length>1?(U(),j("button",{key:0,onClick:H=>_(x(N),V,z),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"–",8,pq)):Ae("",!0),z===C(x(N),V).length-1?(U(),j("button",{key:1,onClick:H=>S(x(N),V),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,mq)):Ae("",!0)])]))),128))]))),128)),h("td",gq,[(U(!0),j(Fe,null,je(P(x(N)),(V,L)=>(U(),j("div",{key:"d-"+L,class:"assignment-row"},[h("select",{value:V,onChange:z=>w(x(N),L,z.target.value),class:"student-select"},[F[11]||(F[11]=h("option",{value:""},"No Assignment",-1)),(U(!0),j(Fe,null,je(oe(s),z=>(U(),j("option",{key:z.id,value:z.id},te(oe(ct)(z,"firstName"))+" "+te(oe(ct)(z,"lastName")),9,xq))),128))],40,vq),h("div",yq,[P(x(N)).length>1?(U(),j("button",{key:0,onClick:z=>T(x(N),L),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"–",8,Eq)):Ae("",!0),L===P(x(N)).length-1?(U(),j("button",{key:1,onClick:z=>b(x(N)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,_q)):Ae("",!0)])]))),128))])]))),128))])])])):(U(),j("div",iq,[F[6]||(F[6]=h("h2",null,"Access Denied",-1)),F[7]||(F[7]=h("p",null,"You do not have permission to access this page.",-1)),h("button",{onClick:F[1]||(F[1]=N=>oe(e).push("/")),class:"btn btn-primary"},"Go Home")])):(U(),j("div",aq,[F[4]||(F[4]=h("h2",null,"Authentication Required",-1)),F[5]||(F[5]=h("p",null,"Please log in to access this page.",-1)),h("button",{onClick:F[0]||(F[0]=N=>oe(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},_I=yt(bq,[["__scopeId","data-v-3361cb08"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var bI=1252,Sq=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],xx={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},yx=function(t){Sq.indexOf(t)!=-1&&(bI=xx[0]=t)};function Tq(){yx(1252)}var Zs=function(t){yx(t)};function SI(){Zs(1200),Tq()}function zb(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Aq(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function TI(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var lu=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Aq(t.slice(2)):e==254&&r==255?TI(t.slice(2)):e==65279?t.slice(1):t},Ff=function(e){return String.fromCharCode(e)},Kb=function(e){return String.fromCharCode(e)},pd,Gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function qb(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Gi.charAt(i)+Gi.charAt(a)+Gi.charAt(o)+Gi.charAt(l);return e}function ws(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Gi.indexOf(t.charAt(c++)),a=Gi.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Gi.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Gi.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var zt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ol=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function ao(t){return zt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Xb(t){return zt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Js=function(e){return zt?ol(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function ll(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Ex(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Ex(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var $i=zt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:ol(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function wq(t){for(var e=[],r=0,n=t.length+250,s=ao(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=ao(65535),n=65530)}return e.push(s.slice(0,r)),$i(e)}var is=/\u0000/g,cu=/[\u0001-\u0006]/g;function tc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ea(t,e){var r=""+t;return r.length>=e?r:Mr("0",e-r.length)+r}function _x(t,e){var r=""+t;return r.length>=e?r:Mr(" ",e-r.length)+r}function Z0(t,e){var r=""+t;return r.length>=e?r:r+Mr(" ",e-r.length)}function Cq(t,e){var r=""+Math.round(t);return r.length>=e?r:Mr("0",e-r.length)+r}function Iq(t,e){var r=""+t;return r.length>=e?r:Mr("0",e-r.length)+r}var Yb=Math.pow(2,32);function Tl(t,e){if(t>Yb||t<-Yb)return Cq(t,e);var r=Math.round(t);return Iq(r,e)}function eh(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var Qb=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Hm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function kq(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var Nt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},Jb={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Dq={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function th(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,u=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var f=Math.floor(n*o/u);return[f,n*o-f*u,u]}function Co(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=Mq(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var AI=new Date(1899,11,31,0,0,0),Pq=AI.getTime(),Fq=new Date(1900,2,1,0,0,0);function wI(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=Fq&&(r+=24*60*60*1e3),(r-(Pq+(t.getTimezoneOffset()-AI.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function bx(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Rq(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Oq(t){var e=t<0?12:11,r=bx(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function Nq(t){var e=bx(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function md(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=Oq(t):e===10?r=t.toFixed(10).substr(0,12):r=Nq(t),bx(Rq(r.toUpperCase()))}function qo(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):md(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Bs(14,wI(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Mq(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function Lq(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Hm[r.m-1][1];case 5:return Hm[r.m-1][0];default:return Hm[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return Qb[r.q][0];default:return Qb[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ea(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=ea(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?ea(l,c):"";return u}function Wi(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var CI=/%/g;function Bq(t,e,r){var n=e.replace(CI,""),s=e.length-n.length;return ri(t,n,r*Math.pow(10,2*s))+Mr("%",s)}function Uq(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ri(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function II(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+II(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var kI=/# (\?+)( ?)\/( ?)(\d+)/;function Vq(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Mr(" ",t[1].length+1+t[4].length):_x(a,t[1].length)+t[2]+"/"+t[3]+ea(o,t[4].length))}function $q(t,e,r){return r+(e===0?"":""+e)+Mr(" ",t[1].length+2+t[4].length)}var DI=/^#*0*\.([0#]+)/,PI=/\).*[0#]/,FI=/\(###\) ###\\?-####/;function es(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function Zb(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function e2(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function jq(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Hq(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Ps(t,e,r){if(t.charCodeAt(0)===40&&!e.match(PI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ps("n",n,r):"("+Ps("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Uq(t,e,r);if(e.indexOf("%")!==-1)return Bq(t,e,r);if(e.indexOf("E")!==-1)return II(e,r);if(e.charCodeAt(0)===36)return"$"+Ps(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Tl(l,e.length);if(e.match(/^[#?]+$/))return s=Tl(r,0),s==="0"&&(s=""),s.length>e.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(kI))return Vq(i,l,c);if(e.match(/^#+0+$/))return c+Tl(l,e.length-e.indexOf("0"));if(i=e.match(DI))return s=Zb(r,i[1].length).replace(/^([^\.]+)$/,"$1."+es(i[1])).replace(/\.$/,"."+es(i[1])).replace(/\.(\d*)$/,function(m,g){return"."+g+Mr("0",es(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+Zb(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Wi(Tl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ps(t,e,-r):Wi(""+(Math.floor(r)+jq(r,i[1].length)))+"."+ea(e2(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Ps(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=tc(Ps(t,e.replace(/[\\-]/g,""),r)),a=0,tc(tc(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(FI))return s=Ps(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=th(l,Math.pow(10,a)-1,!1),s=""+c,u=ri("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=Z0(o[2],a),u.length<i[4].length&&(u=es(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=th(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?_x(o[1],a)+i[2]+"/"+i[3]+Z0(o[2],a):Mr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Tl(r,0),e.length<=s.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return es(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=e2(r,i[1].length),r<0?"-"+Ps(t,e,-r):Wi(Hq(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?ea(0,3-m.length):"")+m})+"."+ea(a,i[1].length);switch(e){case"###,##0.00":return Ps(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Wi(Tl(l,0));return p!=="0"?c+p:"";case"###,###.00":return Ps(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ps(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Gq(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ri(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Wq(t,e,r){var n=e.replace(CI,""),s=e.length-n.length;return ri(t,n,r*Math.pow(10,2*s))+Mr("%",s)}function RI(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+RI(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function xa(t,e,r){if(t.charCodeAt(0)===40&&!e.match(PI)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xa("n",n,r):"("+xa("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Gq(t,e,r);if(e.indexOf("%")!==-1)return Wq(t,e,r);if(e.indexOf("E")!==-1)return RI(e,r);if(e.charCodeAt(0)===36)return"$"+xa(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+ea(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(kI))return $q(i,l,c);if(e.match(/^#+0+$/))return c+ea(l,e.length-e.indexOf("0"));if(i=e.match(DI))return s=(""+r).replace(/^([^\.]+)$/,"$1."+es(i[1])).replace(/\.$/,"."+es(i[1])),s=s.replace(/\.(\d*)$/,function(m,g){return"."+g+Mr("0",es(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Wi(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xa(t,e,-r):Wi(""+r)+"."+Mr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return xa(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=tc(xa(t,e.replace(/[\\-]/g,""),r)),a=0,tc(tc(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(FI))return s=xa(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=th(l,Math.pow(10,a)-1,!1),s=""+c,u=ri("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=Z0(o[2],a),u.length<i[4].length&&(u=es(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=th(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?_x(o[1],a)+i[2]+"/"+i[3]+Z0(o[2],a):Mr(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:es(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return es(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+xa(t,e,-r):Wi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?ea(0,3-m.length):"")+m})+"."+ea(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Wi(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return xa(t,e.slice(0,e.lastIndexOf(".")),r)+es(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ri(t,e,r){return(r|0)===r?xa(t,e,r):Ps(t,e,r)}function zq(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var OI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Rc(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":eh(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(OI))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Kq(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,d,f="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!eh(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var p=t.charAt(++a),m=p==="("||p===")"?p:"t";s[s.length]={t:m,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Co(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Co(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"上":var g={t:o,v:o};if(c==null&&(c=Co(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",f="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,f="h"):t.substr(a,5).toUpperCase()==="上午/下午"?(c!=null&&(g.v=c.H>=12?"下午":"上午"),g.t="T",a+=5,f="h"):(g.t="t",++a),c==null&&g.t==="T")return"";s[s.length]=g,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(OI)){if(c==null&&(c=Co(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Rc(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var v=0,E=0,x;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=f,l="h",v<1&&(v=1);break;case"s":(x=s[a].v.match(/\.0+$/))&&(E=Math.max(E,x[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[a].v.match(/[Hh]/)&&(v=1),v<2&&s[a].v.match(/[Mm]/)&&(v=2),v<3&&s[a].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var y="",C;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=Lq(s[a].t.charCodeAt(0),s[a].v,c,E),s[a].t="t";break;case"n":case"?":for(C=a+1;s[C]!=null&&((o=s[C].t)==="?"||o==="D"||(o===" "||o==="t")&&s[C+1]!=null&&(s[C+1].t==="?"||s[C+1].t==="t"&&s[C+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[C].v==="/"||s[C].v===" "&&s[C+1]!=null&&s[C+1].t=="?"));)s[a].v+=s[C].v,s[C]={v:"",t:";"},++C;y+=s[a].v,a=C-1;break;case"G":s[a].t="t",s[a].v=qo(e,r);break}var P="",k,w;if(y.length>0){y.charCodeAt(0)==40?(k=e<0&&y.charCodeAt(0)===45?-e:e,w=ri("n",y,k)):(k=e<0&&n>1?-e:e,w=ri("n",y,k),k<0&&s[0]&&s[0].t=="t"&&(w=w.substr(1),s[0].v="-"+s[0].v)),C=w.length-1;var S=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){S=a;break}var _=s.length;if(S===s.length&&w.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(C>=s[a].v.length-1?(C-=s[a].v.length,s[a].v=w.substr(C+1,s[a].v.length)):C<0?s[a].v="":(s[a].v=w.substr(0,C+1),C=-1),s[a].t="t",_=a);C>=0&&_<s.length&&(s[_].v=w.substr(0,C+1)+s[_].v)}else if(S!==s.length&&w.indexOf("E")===-1){for(C=w.indexOf(".")-1,a=S;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===S?s[a].v.indexOf(".")-1:s[a].v.length-1,P=s[a].v.substr(u+1);u>=0;--u)C>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(P=w.charAt(C--)+P);s[a].v=P,s[a].t="t",_=a}for(C>=0&&_<s.length&&(s[_].v=w.substr(0,C+1)+s[_].v),C=w.indexOf(".")+1,a=S;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==S)){for(u=s[a].v.indexOf(".")>-1&&a===S?s[a].v.indexOf(".")+1:0,P=s[a].v.substr(0,u);u<s[a].v.length;++u)C<w.length&&(P+=w.charAt(C++));s[a].v=P,s[a].t="t",_=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(k=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=ri(s[a].t,s[a].v,k),s[a].t="t");var b="";for(a=0;a!==s.length;++a)s[a]!=null&&(b+=s[a].v);return b}var t2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function r2(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function qq(t,e){var r=zq(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(t2),o=r[1].match(t2);return r2(e,a)?[n,r[0]]:r2(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Bs(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Nt)[t],n==null&&(n=r.table&&r.table[Jb[t]]||Nt[Jb[t]]),n==null&&(n=Dq[t]||"General");break}if(eh(n,0))return qo(e,r);e instanceof Date&&(e=wI(e,r.date1904));var s=qq(n,e);if(eh(s[1]))return qo(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Kq(s[1],e,r,s[0])}function No(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Nt[r]==null){e<0&&(e=r);continue}if(Nt[r]==t){e=r;break}}e<0&&(e=391)}return Nt[e]=t,e}function NI(){Nt=kq()}var Xq={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},MI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Yq(t){var e=typeof t=="number"?Nt[t]:t;return e=e.replace(MI,"(\\d+)"),new RegExp("^"+e+"$")}function Qq(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(MI)||[]).forEach(function(d,f){var p=parseInt(r[f+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var Jq=function(){var t={};t.version="1.2.0";function e(){for(var w=0,S=new Array(256),_=0;_!=256;++_)w=_,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,S[_]=w;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(w){var S=0,_=0,b=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(b=0;b!=256;++b)T[b]=w[b];for(b=0;b!=256;++b)for(_=w[b],S=256+b;S<4096;S+=256)_=T[S]=_>>>8^w[_&255];var I=[];for(b=1;b!=16;++b)I[b-1]=typeof Int32Array<"u"?T.subarray(b*256,b*256+256):T.slice(b*256,b*256+256);return I}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],f=s[7],p=s[8],m=s[9],g=s[10],v=s[11],E=s[12],x=s[13],y=s[14];function C(w,S){for(var _=S^-1,b=0,T=w.length;b<T;)_=_>>>8^r[(_^w.charCodeAt(b++))&255];return~_}function P(w,S){for(var _=S^-1,b=w.length-15,T=0;T<b;)_=y[w[T++]^_&255]^x[w[T++]^_>>8&255]^E[w[T++]^_>>16&255]^v[w[T++]^_>>>24]^g[w[T++]]^m[w[T++]]^p[w[T++]]^f[w[T++]]^d[w[T++]]^u[w[T++]]^c[w[T++]]^l[w[T++]]^o[w[T++]]^a[w[T++]]^i[w[T++]]^r[w[T++]];for(b+=15;T<b;)_=_>>>8^r[(_^w[T++])&255];return~_}function k(w,S){for(var _=S^-1,b=0,T=w.length,I=0,D=0;b<T;)I=w.charCodeAt(b++),I<128?_=_>>>8^r[(_^I)&255]:I<2048?(_=_>>>8^r[(_^(192|I>>6&31))&255],_=_>>>8^r[(_^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,D=w.charCodeAt(b++)&1023,_=_>>>8^r[(_^(240|I>>8&7))&255],_=_>>>8^r[(_^(128|I>>2&63))&255],_=_>>>8^r[(_^(128|D>>6&15|(I&3)<<4))&255],_=_>>>8^r[(_^(128|D&63))&255]):(_=_>>>8^r[(_^(224|I>>12&15))&255],_=_>>>8^r[(_^(128|I>>6&63))&255],_=_>>>8^r[(_^(128|I&63))&255]);return~_}return t.table=r,t.bstr=C,t.buf=P,t.str=k,t}(),Xt=function(){var e={};e.version="1.2.1";function r(J,de){for(var ie=J.split("/"),ce=de.split("/"),fe=0,pe=0,ke=Math.min(ie.length,ce.length);fe<ke;++fe){if(pe=ie[fe].length-ce[fe].length)return pe;if(ie[fe]!=ce[fe])return ie[fe]<ce[fe]?-1:1}return ie.length-ce.length}function n(J){if(J.charAt(J.length-1)=="/")return J.slice(0,-1).indexOf("/")===-1?J:n(J.slice(0,-1));var de=J.lastIndexOf("/");return de===-1?J:J.slice(0,de+1)}function s(J){if(J.charAt(J.length-1)=="/")return s(J.slice(0,-1));var de=J.lastIndexOf("/");return de===-1?J:J.slice(de+1)}function i(J,de){typeof de=="string"&&(de=new Date(de));var ie=de.getHours();ie=ie<<6|de.getMinutes(),ie=ie<<5|de.getSeconds()>>>1,J.write_shift(2,ie);var ce=de.getFullYear()-1980;ce=ce<<4|de.getMonth()+1,ce=ce<<5|de.getDate(),J.write_shift(2,ce)}function a(J){var de=J.read_shift(2)&65535,ie=J.read_shift(2)&65535,ce=new Date,fe=ie&31;ie>>>=5;var pe=ie&15;ie>>>=4,ce.setMilliseconds(0),ce.setFullYear(ie+1980),ce.setMonth(pe-1),ce.setDate(fe);var ke=de&31;de>>>=5;var Be=de&63;return de>>>=6,ce.setHours(de),ce.setMinutes(Be),ce.setSeconds(ke<<1),ce}function o(J){En(J,0);for(var de={},ie=0;J.l<=J.length-4;){var ce=J.read_shift(2),fe=J.read_shift(2),pe=J.l+fe,ke={};switch(ce){case 21589:ie=J.read_shift(1),ie&1&&(ke.mtime=J.read_shift(4)),fe>5&&(ie&2&&(ke.atime=J.read_shift(4)),ie&4&&(ke.ctime=J.read_shift(4))),ke.mtime&&(ke.mt=new Date(ke.mtime*1e3));break}J.l=pe,de[ce]=ke}return de}var l;function c(){return l||(l={})}function u(J,de){if(J[0]==80&&J[1]==75)return pt(J,de);if((J[0]|32)==109&&(J[1]|32)==105)return fo(J,de);if(J.length<512)throw new Error("CFB file size "+J.length+" < 512");var ie=3,ce=512,fe=0,pe=0,ke=0,Be=0,De=0,Pe=[],Oe=J.slice(0,512);En(Oe,0);var qe=d(Oe);switch(ie=qe[0],ie){case 3:ce=512;break;case 4:ce=4096;break;case 0:if(qe[1]==0)return pt(J,de);default:throw new Error("Major Version: Expected 3 or 4 saw "+ie)}ce!==512&&(Oe=J.slice(0,ce),En(Oe,28));var Qe=J.slice(0,ce);f(Oe,ie);var ot=Oe.read_shift(4,"i");if(ie===3&&ot!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ot);Oe.l+=4,ke=Oe.read_shift(4,"i"),Oe.l+=4,Oe.chk("00100000","Mini Stream Cutoff Size: "),Be=Oe.read_shift(4,"i"),fe=Oe.read_shift(4,"i"),De=Oe.read_shift(4,"i"),pe=Oe.read_shift(4,"i");for(var Xe=-1,rt=0;rt<109&&(Xe=Oe.read_shift(4,"i"),!(Xe<0));++rt)Pe[rt]=Xe;var St=p(J,ce);v(De,pe,St,ce,Pe);var dr=x(St,ke,Pe,ce);dr[ke].name="!Directory",fe>0&&Be!==D&&(dr[Be].name="!MiniFAT"),dr[Pe[0]].name="!FAT",dr.fat_addrs=Pe,dr.ssz=ce;var or={},Sr=[],Ua=[],po=[];y(ke,dr,St,Sr,fe,or,Ua,Be),m(Ua,po,Sr),Sr.shift();var _i={FileIndex:Ua,FullPaths:po};return de&&de.raw&&(_i.raw={header:Qe,sectors:St}),_i}function d(J){if(J[J.l]==80&&J[J.l+1]==75)return[0,0];J.chk(O,"Header Signature: "),J.l+=16;var de=J.read_shift(2,"u");return[J.read_shift(2,"u"),de]}function f(J,de){var ie=9;switch(J.l+=2,ie=J.read_shift(2)){case 9:if(de!=3)throw new Error("Sector Shift: Expected 9 saw "+ie);break;case 12:if(de!=4)throw new Error("Sector Shift: Expected 12 saw "+ie);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ie)}J.chk("0600","Mini Sector Shift: "),J.chk("000000000000","Reserved: ")}function p(J,de){for(var ie=Math.ceil(J.length/de)-1,ce=[],fe=1;fe<ie;++fe)ce[fe-1]=J.slice(fe*de,(fe+1)*de);return ce[ie-1]=J.slice(ie*de),ce}function m(J,de,ie){for(var ce=0,fe=0,pe=0,ke=0,Be=0,De=ie.length,Pe=[],Oe=[];ce<De;++ce)Pe[ce]=Oe[ce]=ce,de[ce]=ie[ce];for(;Be<Oe.length;++Be)ce=Oe[Be],fe=J[ce].L,pe=J[ce].R,ke=J[ce].C,Pe[ce]===ce&&(fe!==-1&&Pe[fe]!==fe&&(Pe[ce]=Pe[fe]),pe!==-1&&Pe[pe]!==pe&&(Pe[ce]=Pe[pe])),ke!==-1&&(Pe[ke]=ce),fe!==-1&&ce!=Pe[ce]&&(Pe[fe]=Pe[ce],Oe.lastIndexOf(fe)<Be&&Oe.push(fe)),pe!==-1&&ce!=Pe[ce]&&(Pe[pe]=Pe[ce],Oe.lastIndexOf(pe)<Be&&Oe.push(pe));for(ce=1;ce<De;++ce)Pe[ce]===ce&&(pe!==-1&&Pe[pe]!==pe?Pe[ce]=Pe[pe]:fe!==-1&&Pe[fe]!==fe&&(Pe[ce]=Pe[fe]));for(ce=1;ce<De;++ce)if(J[ce].type!==0){if(Be=ce,Be!=Pe[Be])do Be=Pe[Be],de[ce]=de[Be]+"/"+de[ce];while(Be!==0&&Pe[Be]!==-1&&Be!=Pe[Be]);Pe[ce]=-1}for(de[0]+="/",ce=1;ce<De;++ce)J[ce].type!==2&&(de[ce]+="/")}function g(J,de,ie){for(var ce=J.start,fe=J.size,pe=[],ke=ce;ie&&fe>0&&ke>=0;)pe.push(de.slice(ke*I,ke*I+I)),fe-=I,ke=So(ie,ke*4);return pe.length===0?en(0):$i(pe).slice(0,J.size)}function v(J,de,ie,ce,fe){var pe=D;if(J===D){if(de!==0)throw new Error("DIFAT chain shorter than expected")}else if(J!==-1){var ke=ie[J],Be=(ce>>>2)-1;if(!ke)return;for(var De=0;De<Be&&(pe=So(ke,De*4))!==D;++De)fe.push(pe);v(So(ke,ce-4),de-1,ie,ce,fe)}}function E(J,de,ie,ce,fe){var pe=[],ke=[];fe||(fe=[]);var Be=ce-1,De=0,Pe=0;for(De=de;De>=0;){fe[De]=!0,pe[pe.length]=De,ke.push(J[De]);var Oe=ie[Math.floor(De*4/ce)];if(Pe=De*4&Be,ce<4+Pe)throw new Error("FAT boundary crossed: "+De+" 4 "+ce);if(!J[Oe])break;De=So(J[Oe],Pe)}return{nodes:pe,data:f2([ke])}}function x(J,de,ie,ce){var fe=J.length,pe=[],ke=[],Be=[],De=[],Pe=ce-1,Oe=0,qe=0,Qe=0,ot=0;for(Oe=0;Oe<fe;++Oe)if(Be=[],Qe=Oe+de,Qe>=fe&&(Qe-=fe),!ke[Qe]){De=[];var Xe=[];for(qe=Qe;qe>=0;){Xe[qe]=!0,ke[qe]=!0,Be[Be.length]=qe,De.push(J[qe]);var rt=ie[Math.floor(qe*4/ce)];if(ot=qe*4&Pe,ce<4+ot)throw new Error("FAT boundary crossed: "+qe+" 4 "+ce);if(!J[rt]||(qe=So(J[rt],ot),Xe[qe]))break}pe[Qe]={nodes:Be,data:f2([De])}}return pe}function y(J,de,ie,ce,fe,pe,ke,Be){for(var De=0,Pe=ce.length?2:0,Oe=de[J].data,qe=0,Qe=0,ot;qe<Oe.length;qe+=128){var Xe=Oe.slice(qe,qe+128);En(Xe,64),Qe=Xe.read_shift(2),ot=Cx(Xe,0,Qe-Pe),ce.push(ot);var rt={name:ot,type:Xe.read_shift(1),color:Xe.read_shift(1),L:Xe.read_shift(4,"i"),R:Xe.read_shift(4,"i"),C:Xe.read_shift(4,"i"),clsid:Xe.read_shift(16),state:Xe.read_shift(4,"i"),start:0,size:0},St=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);St!==0&&(rt.ct=C(Xe,Xe.l-8));var dr=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);dr!==0&&(rt.mt=C(Xe,Xe.l-8)),rt.start=Xe.read_shift(4,"i"),rt.size=Xe.read_shift(4,"i"),rt.size<0&&rt.start<0&&(rt.size=rt.type=0,rt.start=D,rt.name=""),rt.type===5?(De=rt.start,fe>0&&De!==D&&(de[De].name="!StreamData")):rt.size>=4096?(rt.storage="fat",de[rt.start]===void 0&&(de[rt.start]=E(ie,rt.start,de.fat_addrs,de.ssz)),de[rt.start].name=rt.name,rt.content=de[rt.start].data.slice(0,rt.size)):(rt.storage="minifat",rt.size<0?rt.size=0:De!==D&&rt.start!==D&&de[De]&&(rt.content=g(rt,de[De].data,(de[Be]||{}).data))),rt.content&&En(rt.content,0),pe[ot]=rt,ke.push(rt)}}function C(J,de){return new Date((Es(J,de+4)/1e7*Math.pow(2,32)+Es(J,de)/1e7-11644473600)*1e3)}function P(J,de){return c(),u(l.readFileSync(J),de)}function k(J,de){var ie=de&&de.type;switch(ie||zt&&Buffer.isBuffer(J)&&(ie="buffer"),ie||"base64"){case"file":return P(J,de);case"base64":return u(Js(ws(J)),de);case"binary":return u(Js(J),de)}return u(J,de)}function w(J,de){var ie=de||{},ce=ie.root||"Root Entry";if(J.FullPaths||(J.FullPaths=[]),J.FileIndex||(J.FileIndex=[]),J.FullPaths.length!==J.FileIndex.length)throw new Error("inconsistent CFB structure");J.FullPaths.length===0&&(J.FullPaths[0]=ce+"/",J.FileIndex[0]={name:ce,type:5}),ie.CLSID&&(J.FileIndex[0].clsid=ie.CLSID),S(J)}function S(J){var de="Sh33tJ5";if(!Xt.find(J,"/"+de)){var ie=en(4);ie[0]=55,ie[1]=ie[3]=50,ie[2]=54,J.FileIndex.push({name:de,type:2,content:ie,size:4,L:69,R:69,C:69}),J.FullPaths.push(J.FullPaths[0]+de),_(J)}}function _(J,de){w(J);for(var ie=!1,ce=!1,fe=J.FullPaths.length-1;fe>=0;--fe){var pe=J.FileIndex[fe];switch(pe.type){case 0:ce?ie=!0:(J.FileIndex.pop(),J.FullPaths.pop());break;case 1:case 2:case 5:ce=!0,isNaN(pe.R*pe.L*pe.C)&&(ie=!0),pe.R>-1&&pe.L>-1&&pe.R==pe.L&&(ie=!0);break;default:ie=!0;break}}if(!(!ie&&!de)){var ke=new Date(1987,1,19),Be=0,De=Object.create?Object.create(null):{},Pe=[];for(fe=0;fe<J.FullPaths.length;++fe)De[J.FullPaths[fe]]=!0,J.FileIndex[fe].type!==0&&Pe.push([J.FullPaths[fe],J.FileIndex[fe]]);for(fe=0;fe<Pe.length;++fe){var Oe=n(Pe[fe][0]);ce=De[Oe],ce||(Pe.push([Oe,{name:s(Oe).replace("/",""),type:1,clsid:F,ct:ke,mt:ke,content:null}]),De[Oe]=!0)}for(Pe.sort(function(ot,Xe){return r(ot[0],Xe[0])}),J.FullPaths=[],J.FileIndex=[],fe=0;fe<Pe.length;++fe)J.FullPaths[fe]=Pe[fe][0],J.FileIndex[fe]=Pe[fe][1];for(fe=0;fe<Pe.length;++fe){var qe=J.FileIndex[fe],Qe=J.FullPaths[fe];if(qe.name=s(Qe).replace("/",""),qe.L=qe.R=qe.C=-(qe.color=1),qe.size=qe.content?qe.content.length:0,qe.start=0,qe.clsid=qe.clsid||F,fe===0)qe.C=Pe.length>1?1:-1,qe.size=0,qe.type=5;else if(Qe.slice(-1)=="/"){for(Be=fe+1;Be<Pe.length&&n(J.FullPaths[Be])!=Qe;++Be);for(qe.C=Be>=Pe.length?-1:Be,Be=fe+1;Be<Pe.length&&n(J.FullPaths[Be])!=n(Qe);++Be);qe.R=Be>=Pe.length?-1:Be,qe.type=1}else n(J.FullPaths[fe+1]||"")==n(Qe)&&(qe.R=fe+1),qe.type=2}}}function b(J,de){var ie=de||{};if(ie.fileType=="mad")return Jr(J,ie);switch(_(J),ie.fileType){case"zip":return Rt(J,ie)}var ce=function(ot){for(var Xe=0,rt=0,St=0;St<ot.FileIndex.length;++St){var dr=ot.FileIndex[St];if(dr.content){var or=dr.content.length;or>0&&(or<4096?Xe+=or+63>>6:rt+=or+511>>9)}}for(var Sr=ot.FullPaths.length+3>>2,Ua=Xe+7>>3,po=Xe+127>>7,_i=Ua+rt+Sr+po,pa=_i+127>>7,ml=pa<=109?0:Math.ceil((pa-109)/127);_i+pa+ml+127>>7>pa;)ml=++pa<=109?0:Math.ceil((pa-109)/127);var gs=[1,ml,pa,po,Sr,rt,Xe,0];return ot.FileIndex[0].size=Xe<<6,gs[7]=(ot.FileIndex[0].start=gs[0]+gs[1]+gs[2]+gs[3]+gs[4]+gs[5])+(gs[6]+7>>3),gs}(J),fe=en(ce[7]<<9),pe=0,ke=0;{for(pe=0;pe<8;++pe)fe.write_shift(1,R[pe]);for(pe=0;pe<8;++pe)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),pe=0;pe<3;++pe)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,ce[2]),fe.write_shift(4,ce[0]+ce[1]+ce[2]+ce[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,ce[3]?ce[0]+ce[1]+ce[2]-1:D),fe.write_shift(4,ce[3]),fe.write_shift(-4,ce[1]?ce[0]-1:D),fe.write_shift(4,ce[1]),pe=0;pe<109;++pe)fe.write_shift(-4,pe<ce[2]?ce[1]+pe:-1)}if(ce[1])for(ke=0;ke<ce[1];++ke){for(;pe<236+ke*127;++pe)fe.write_shift(-4,pe<ce[2]?ce[1]+pe:-1);fe.write_shift(-4,ke===ce[1]-1?D:ke+1)}var Be=function(ot){for(ke+=ot;pe<ke-1;++pe)fe.write_shift(-4,pe+1);ot&&(++pe,fe.write_shift(-4,D))};for(ke=pe=0,ke+=ce[1];pe<ke;++pe)fe.write_shift(-4,N.DIFSECT);for(ke+=ce[2];pe<ke;++pe)fe.write_shift(-4,N.FATSECT);Be(ce[3]),Be(ce[4]);for(var De=0,Pe=0,Oe=J.FileIndex[0];De<J.FileIndex.length;++De)Oe=J.FileIndex[De],Oe.content&&(Pe=Oe.content.length,!(Pe<4096)&&(Oe.start=ke,Be(Pe+511>>9)));for(Be(ce[6]+7>>3);fe.l&511;)fe.write_shift(-4,N.ENDOFCHAIN);for(ke=pe=0,De=0;De<J.FileIndex.length;++De)Oe=J.FileIndex[De],Oe.content&&(Pe=Oe.content.length,!(!Pe||Pe>=4096)&&(Oe.start=ke,Be(Pe+63>>6)));for(;fe.l&511;)fe.write_shift(-4,N.ENDOFCHAIN);for(pe=0;pe<ce[4]<<2;++pe){var qe=J.FullPaths[pe];if(!qe||qe.length===0){for(De=0;De<17;++De)fe.write_shift(4,0);for(De=0;De<3;++De)fe.write_shift(4,-1);for(De=0;De<12;++De)fe.write_shift(4,0);continue}Oe=J.FileIndex[pe],pe===0&&(Oe.start=Oe.size?Oe.start-1:D);var Qe=pe===0&&ie.root||Oe.name;if(Pe=2*(Qe.length+1),fe.write_shift(64,Qe,"utf16le"),fe.write_shift(2,Pe),fe.write_shift(1,Oe.type),fe.write_shift(1,Oe.color),fe.write_shift(-4,Oe.L),fe.write_shift(-4,Oe.R),fe.write_shift(-4,Oe.C),Oe.clsid)fe.write_shift(16,Oe.clsid,"hex");else for(De=0;De<4;++De)fe.write_shift(4,0);fe.write_shift(4,Oe.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,Oe.start),fe.write_shift(4,Oe.size),fe.write_shift(4,0)}for(pe=1;pe<J.FileIndex.length;++pe)if(Oe=J.FileIndex[pe],Oe.size>=4096)if(fe.l=Oe.start+1<<9,zt&&Buffer.isBuffer(Oe.content))Oe.content.copy(fe,fe.l,0,Oe.size),fe.l+=Oe.size+511&-512;else{for(De=0;De<Oe.size;++De)fe.write_shift(1,Oe.content[De]);for(;De&511;++De)fe.write_shift(1,0)}for(pe=1;pe<J.FileIndex.length;++pe)if(Oe=J.FileIndex[pe],Oe.size>0&&Oe.size<4096)if(zt&&Buffer.isBuffer(Oe.content))Oe.content.copy(fe,fe.l,0,Oe.size),fe.l+=Oe.size+63&-64;else{for(De=0;De<Oe.size;++De)fe.write_shift(1,Oe.content[De]);for(;De&63;++De)fe.write_shift(1,0)}if(zt)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function T(J,de){var ie=J.FullPaths.map(function(De){return De.toUpperCase()}),ce=ie.map(function(De){var Pe=De.split("/");return Pe[Pe.length-(De.slice(-1)=="/"?2:1)]}),fe=!1;de.charCodeAt(0)===47?(fe=!0,de=ie[0].slice(0,-1)+de):fe=de.indexOf("/")!==-1;var pe=de.toUpperCase(),ke=fe===!0?ie.indexOf(pe):ce.indexOf(pe);if(ke!==-1)return J.FileIndex[ke];var Be=!pe.match(cu);for(pe=pe.replace(is,""),Be&&(pe=pe.replace(cu,"!")),ke=0;ke<ie.length;++ke)if((Be?ie[ke].replace(cu,"!"):ie[ke]).replace(is,"")==pe||(Be?ce[ke].replace(cu,"!"):ce[ke]).replace(is,"")==pe)return J.FileIndex[ke];return null}var I=64,D=-2,O="d0cf11e0a1b11ae1",R=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",N={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(J,de,ie){c();var ce=b(J,ie);l.writeFileSync(de,ce)}function L(J){for(var de=new Array(J.length),ie=0;ie<J.length;++ie)de[ie]=String.fromCharCode(J[ie]);return de.join("")}function z(J,de){var ie=b(J,de);switch(de&&de.type||"buffer"){case"file":return c(),l.writeFileSync(de.filename,ie),ie;case"binary":return typeof ie=="string"?ie:L(ie);case"base64":return qb(typeof ie=="string"?ie:L(ie));case"buffer":if(zt)return Buffer.isBuffer(ie)?ie:ol(ie);case"array":return typeof ie=="string"?Js(ie):ie}return ie}var H;function B(J){try{var de=J.InflateRaw,ie=new de;if(ie._processChunk(new Uint8Array([3,0]),ie._finishFlushFlag),ie.bytesRead)H=J;else throw new Error("zlib does not expose bytesRead")}catch(ce){console.error("cannot use native zlib: "+(ce.message||ce))}}function W(J,de){if(!H)return dt(J,de);var ie=H.InflateRaw,ce=new ie,fe=ce._processChunk(J.slice(J.l),ce._finishFlushFlag);return J.l+=ce.bytesRead,fe}function K(J){return H?H.deflateRawSync(J):ye(J)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(J){var de=(J<<1|J<<11)&139536|(J<<5|J<<15)&558144;return(de>>16|de>>8|de)&255}for(var Z=typeof Uint8Array<"u",Q=Z?new Uint8Array(256):[],ve=0;ve<256;++ve)Q[ve]=he(ve);function X(J,de){var ie=Q[J&255];return de<=8?ie>>>8-de:(ie=ie<<8|Q[J>>8&255],de<=16?ie>>>16-de:(ie=ie<<8|Q[J>>16&255],ie>>>24-de))}function q(J,de){var ie=de&7,ce=de>>>3;return(J[ce]|(ie<=6?0:J[ce+1]<<8))>>>ie&3}function Y(J,de){var ie=de&7,ce=de>>>3;return(J[ce]|(ie<=5?0:J[ce+1]<<8))>>>ie&7}function ge(J,de){var ie=de&7,ce=de>>>3;return(J[ce]|(ie<=4?0:J[ce+1]<<8))>>>ie&15}function re(J,de){var ie=de&7,ce=de>>>3;return(J[ce]|(ie<=3?0:J[ce+1]<<8))>>>ie&31}function ne(J,de){var ie=de&7,ce=de>>>3;return(J[ce]|(ie<=1?0:J[ce+1]<<8))>>>ie&127}function ae(J,de,ie){var ce=de&7,fe=de>>>3,pe=(1<<ie)-1,ke=J[fe]>>>ce;return ie<8-ce||(ke|=J[fe+1]<<8-ce,ie<16-ce)||(ke|=J[fe+2]<<16-ce,ie<24-ce)||(ke|=J[fe+3]<<24-ce),ke&pe}function xe(J,de,ie){var ce=de&7,fe=de>>>3;return ce<=5?J[fe]|=(ie&7)<<ce:(J[fe]|=ie<<ce&255,J[fe+1]=(ie&7)>>8-ce),de+3}function Ee(J,de,ie){var ce=de&7,fe=de>>>3;return ie=(ie&1)<<ce,J[fe]|=ie,de+1}function we(J,de,ie){var ce=de&7,fe=de>>>3;return ie<<=ce,J[fe]|=ie&255,ie>>>=8,J[fe+1]=ie,de+8}function Te(J,de,ie){var ce=de&7,fe=de>>>3;return ie<<=ce,J[fe]|=ie&255,ie>>>=8,J[fe+1]=ie&255,J[fe+2]=ie>>>8,de+16}function Ge(J,de){var ie=J.length,ce=2*ie>de?2*ie:de+5,fe=0;if(ie>=de)return J;if(zt){var pe=Xb(ce);if(J.copy)J.copy(pe);else for(;fe<J.length;++fe)pe[fe]=J[fe];return pe}else if(Z){var ke=new Uint8Array(ce);if(ke.set)ke.set(J);else for(;fe<ie;++fe)ke[fe]=J[fe];return ke}return J.length=ce,J}function Ie(J){for(var de=new Array(J),ie=0;ie<J;++ie)de[ie]=0;return de}function Ue(J,de,ie){var ce=1,fe=0,pe=0,ke=0,Be=0,De=J.length,Pe=Z?new Uint16Array(32):Ie(32);for(pe=0;pe<32;++pe)Pe[pe]=0;for(pe=De;pe<ie;++pe)J[pe]=0;De=J.length;var Oe=Z?new Uint16Array(De):Ie(De);for(pe=0;pe<De;++pe)Pe[fe=J[pe]]++,ce<fe&&(ce=fe),Oe[pe]=0;for(Pe[0]=0,pe=1;pe<=ce;++pe)Pe[pe+16]=Be=Be+Pe[pe-1]<<1;for(pe=0;pe<De;++pe)Be=J[pe],Be!=0&&(Oe[pe]=Pe[Be+16]++);var qe=0;for(pe=0;pe<De;++pe)if(qe=J[pe],qe!=0)for(Be=X(Oe[pe],ce)>>ce-qe,ke=(1<<ce+4-qe)-1;ke>=0;--ke)de[Be|ke<<qe]=qe&15|pe<<4;return ce}var Le=Z?new Uint16Array(512):Ie(512),We=Z?new Uint16Array(32):Ie(32);if(!Z){for(var ze=0;ze<512;++ze)Le[ze]=0;for(ze=0;ze<32;++ze)We[ze]=0}(function(){for(var J=[],de=0;de<32;de++)J.push(5);Ue(J,We,32);var ie=[];for(de=0;de<=143;de++)ie.push(8);for(;de<=255;de++)ie.push(9);for(;de<=279;de++)ie.push(7);for(;de<=287;de++)ie.push(8);Ue(ie,Le,288)})();var _e=function(){for(var de=Z?new Uint8Array(32768):[],ie=0,ce=0;ie<le.length-1;++ie)for(;ce<le[ie+1];++ce)de[ce]=ie;for(;ce<32768;++ce)de[ce]=29;var fe=Z?new Uint8Array(259):[];for(ie=0,ce=0;ie<me.length-1;++ie)for(;ce<me[ie+1];++ce)fe[ce]=ie;function pe(Be,De){for(var Pe=0;Pe<Be.length;){var Oe=Math.min(65535,Be.length-Pe),qe=Pe+Oe==Be.length;for(De.write_shift(1,+qe),De.write_shift(2,Oe),De.write_shift(2,~Oe&65535);Oe-- >0;)De[De.l++]=Be[Pe++]}return De.l}function ke(Be,De){for(var Pe=0,Oe=0,qe=Z?new Uint16Array(32768):[];Oe<Be.length;){var Qe=Math.min(65535,Be.length-Oe);if(Qe<10){for(Pe=xe(De,Pe,+(Oe+Qe==Be.length)),Pe&7&&(Pe+=8-(Pe&7)),De.l=Pe/8|0,De.write_shift(2,Qe),De.write_shift(2,~Qe&65535);Qe-- >0;)De[De.l++]=Be[Oe++];Pe=De.l*8;continue}Pe=xe(De,Pe,+(Oe+Qe==Be.length)+2);for(var ot=0;Qe-- >0;){var Xe=Be[Oe];ot=(ot<<5^Xe)&32767;var rt=-1,St=0;if((rt=qe[ot])&&(rt|=Oe&-32768,rt>Oe&&(rt-=32768),rt<Oe))for(;Be[rt+St]==Be[Oe+St]&&St<250;)++St;if(St>2){Xe=fe[St],Xe<=22?Pe=we(De,Pe,Q[Xe+1]>>1)-1:(we(De,Pe,3),Pe+=5,we(De,Pe,Q[Xe-23]>>5),Pe+=3);var dr=Xe<8?0:Xe-4>>2;dr>0&&(Te(De,Pe,St-me[Xe]),Pe+=dr),Xe=de[Oe-rt],Pe=we(De,Pe,Q[Xe]>>3),Pe-=3;var or=Xe<4?0:Xe-2>>1;or>0&&(Te(De,Pe,Oe-rt-le[Xe]),Pe+=or);for(var Sr=0;Sr<St;++Sr)qe[ot]=Oe&32767,ot=(ot<<5^Be[Oe])&32767,++Oe;Qe-=St-1}else Xe<=143?Xe=Xe+48:Pe=Ee(De,Pe,1),Pe=we(De,Pe,Q[Xe]),qe[ot]=Oe&32767,++Oe}Pe=we(De,Pe,0)-1}return De.l=(Pe+7)/8|0,De.l}return function(De,Pe){return De.length<8?pe(De,Pe):ke(De,Pe)}}();function ye(J){var de=en(50+Math.floor(J.length*1.1)),ie=_e(J,de);return de.slice(0,ie)}var Se=Z?new Uint16Array(32768):Ie(32768),Re=Z?new Uint16Array(32768):Ie(32768),He=Z?new Uint16Array(128):Ie(128),it=1,mt=1;function vt(J,de){var ie=re(J,de)+257;de+=5;var ce=re(J,de)+1;de+=5;var fe=ge(J,de)+4;de+=4;for(var pe=0,ke=Z?new Uint8Array(19):Ie(19),Be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],De=1,Pe=Z?new Uint8Array(8):Ie(8),Oe=Z?new Uint8Array(8):Ie(8),qe=ke.length,Qe=0;Qe<fe;++Qe)ke[ee[Qe]]=pe=Y(J,de),De<pe&&(De=pe),Pe[pe]++,de+=3;var ot=0;for(Pe[0]=0,Qe=1;Qe<=De;++Qe)Oe[Qe]=ot=ot+Pe[Qe-1]<<1;for(Qe=0;Qe<qe;++Qe)(ot=ke[Qe])!=0&&(Be[Qe]=Oe[ot]++);var Xe=0;for(Qe=0;Qe<qe;++Qe)if(Xe=ke[Qe],Xe!=0){ot=Q[Be[Qe]]>>8-Xe;for(var rt=(1<<7-Xe)-1;rt>=0;--rt)He[ot|rt<<Xe]=Xe&7|Qe<<3}var St=[];for(De=1;St.length<ie+ce;)switch(ot=He[ne(J,de)],de+=ot&7,ot>>>=3){case 16:for(pe=3+q(J,de),de+=2,ot=St[St.length-1];pe-- >0;)St.push(ot);break;case 17:for(pe=3+Y(J,de),de+=3;pe-- >0;)St.push(0);break;case 18:for(pe=11+ne(J,de),de+=7;pe-- >0;)St.push(0);break;default:St.push(ot),De<ot&&(De=ot);break}var dr=St.slice(0,ie),or=St.slice(ie);for(Qe=ie;Qe<286;++Qe)dr[Qe]=0;for(Qe=ce;Qe<30;++Qe)or[Qe]=0;return it=Ue(dr,Se,286),mt=Ue(or,Re,30),de}function Mt(J,de){if(J[0]==3&&!(J[1]&3))return[ao(de),2];for(var ie=0,ce=0,fe=Xb(de||1<<18),pe=0,ke=fe.length>>>0,Be=0,De=0;!(ce&1);){if(ce=Y(J,ie),ie+=3,ce>>>1)ce>>1==1?(Be=9,De=5):(ie=vt(J,ie),Be=it,De=mt);else{ie&7&&(ie+=8-(ie&7));var Pe=J[ie>>>3]|J[(ie>>>3)+1]<<8;if(ie+=32,Pe>0)for(!de&&ke<pe+Pe&&(fe=Ge(fe,pe+Pe),ke=fe.length);Pe-- >0;)fe[pe++]=J[ie>>>3],ie+=8;continue}for(;;){!de&&ke<pe+32767&&(fe=Ge(fe,pe+32767),ke=fe.length);var Oe=ae(J,ie,Be),qe=ce>>>1==1?Le[Oe]:Se[Oe];if(ie+=qe&15,qe>>>=4,!(qe>>>8&255))fe[pe++]=qe;else{if(qe==256)break;qe-=257;var Qe=qe<8?0:qe-4>>2;Qe>5&&(Qe=0);var ot=pe+me[qe];Qe>0&&(ot+=ae(J,ie,Qe),ie+=Qe),Oe=ae(J,ie,De),qe=ce>>>1==1?We[Oe]:Re[Oe],ie+=qe&15,qe>>>=4;var Xe=qe<4?0:qe-2>>1,rt=le[qe];for(Xe>0&&(rt+=ae(J,ie,Xe),ie+=Xe),!de&&ke<ot&&(fe=Ge(fe,ot+100),ke=fe.length);pe<ot;)fe[pe]=fe[pe-rt],++pe}}}return de?[fe,ie+7>>>3]:[fe.slice(0,pe),ie+7>>>3]}function dt(J,de){var ie=J.slice(J.l||0),ce=Mt(ie,de);return J.l+=ce[1],ce[0]}function lt(J,de){if(J)typeof console<"u"&&console.error(de);else throw new Error(de)}function pt(J,de){var ie=J;En(ie,0);var ce=[],fe=[],pe={FileIndex:ce,FullPaths:fe};w(pe,{root:de.root});for(var ke=ie.length-4;(ie[ke]!=80||ie[ke+1]!=75||ie[ke+2]!=5||ie[ke+3]!=6)&&ke>=0;)--ke;ie.l=ke+4,ie.l+=4;var Be=ie.read_shift(2);ie.l+=6;var De=ie.read_shift(4);for(ie.l=De,ke=0;ke<Be;++ke){ie.l+=20;var Pe=ie.read_shift(4),Oe=ie.read_shift(4),qe=ie.read_shift(2),Qe=ie.read_shift(2),ot=ie.read_shift(2);ie.l+=8;var Xe=ie.read_shift(4),rt=o(ie.slice(ie.l+qe,ie.l+qe+Qe));ie.l+=qe+Qe+ot;var St=ie.l;ie.l=Xe+4,Ct(ie,Pe,Oe,pe,rt),ie.l=St}return pe}function Ct(J,de,ie,ce,fe){J.l+=2;var pe=J.read_shift(2),ke=J.read_shift(2),Be=a(J);if(pe&8257)throw new Error("Unsupported ZIP encryption");for(var De=J.read_shift(4),Pe=J.read_shift(4),Oe=J.read_shift(4),qe=J.read_shift(2),Qe=J.read_shift(2),ot="",Xe=0;Xe<qe;++Xe)ot+=String.fromCharCode(J[J.l++]);if(Qe){var rt=o(J.slice(J.l,J.l+Qe));(rt[21589]||{}).mt&&(Be=rt[21589].mt),((fe||{})[21589]||{}).mt&&(Be=fe[21589].mt)}J.l+=Qe;var St=J.slice(J.l,J.l+Pe);switch(ke){case 8:St=W(J,Oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ke)}var dr=!1;pe&8&&(De=J.read_shift(4),De==134695760&&(De=J.read_shift(4),dr=!0),Pe=J.read_shift(4),Oe=J.read_shift(4)),Pe!=de&&lt(dr,"Bad compressed size: "+de+" != "+Pe),Oe!=ie&&lt(dr,"Bad uncompressed size: "+ie+" != "+Oe),Cr(ce,ot,St,{unsafe:!0,mt:Be})}function Rt(J,de){var ie=de||{},ce=[],fe=[],pe=en(1),ke=ie.compression?8:0,Be=0,De=0,Pe=0,Oe=0,qe=0,Qe=J.FullPaths[0],ot=Qe,Xe=J.FileIndex[0],rt=[],St=0;for(De=1;De<J.FullPaths.length;++De)if(ot=J.FullPaths[De].slice(Qe.length),Xe=J.FileIndex[De],!(!Xe.size||!Xe.content||ot=="Sh33tJ5")){var dr=Oe,or=en(ot.length);for(Pe=0;Pe<ot.length;++Pe)or.write_shift(1,ot.charCodeAt(Pe)&127);or=or.slice(0,or.l),rt[qe]=Jq.buf(Xe.content,0);var Sr=Xe.content;ke==8&&(Sr=K(Sr)),pe=en(30),pe.write_shift(4,67324752),pe.write_shift(2,20),pe.write_shift(2,Be),pe.write_shift(2,ke),Xe.mt?i(pe,Xe.mt):pe.write_shift(4,0),pe.write_shift(-4,rt[qe]),pe.write_shift(4,Sr.length),pe.write_shift(4,Xe.content.length),pe.write_shift(2,or.length),pe.write_shift(2,0),Oe+=pe.length,ce.push(pe),Oe+=or.length,ce.push(or),Oe+=Sr.length,ce.push(Sr),pe=en(46),pe.write_shift(4,33639248),pe.write_shift(2,0),pe.write_shift(2,20),pe.write_shift(2,Be),pe.write_shift(2,ke),pe.write_shift(4,0),pe.write_shift(-4,rt[qe]),pe.write_shift(4,Sr.length),pe.write_shift(4,Xe.content.length),pe.write_shift(2,or.length),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(4,0),pe.write_shift(4,dr),St+=pe.l,fe.push(pe),St+=or.length,fe.push(or),++qe}return pe=en(22),pe.write_shift(4,101010256),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,qe),pe.write_shift(2,qe),pe.write_shift(4,St),pe.write_shift(4,Oe),pe.write_shift(2,0),$i([$i(ce),$i(fe),pe])}var Er={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Yn(J,de){if(J.ctype)return J.ctype;var ie=J.name||"",ce=ie.match(/\.([^\.]+)$/);return ce&&Er[ce[1]]||de&&(ce=(ie=de).match(/[\.\\]([^\.\\])+$/),ce&&Er[ce[1]])?Er[ce[1]]:"application/octet-stream"}function Ei(J){for(var de=qb(J),ie=[],ce=0;ce<de.length;ce+=76)ie.push(de.slice(ce,ce+76));return ie.join(`\r
`)+`\r
`}function ls(J){var de=J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Pe){var Oe=Pe.charCodeAt(0).toString(16).toUpperCase();return"="+(Oe.length==1?"0"+Oe:Oe)});de=de.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),de.charAt(0)==`
`&&(de="=0D"+de.slice(1)),de=de.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ie=[],ce=de.split(`\r
`),fe=0;fe<ce.length;++fe){var pe=ce[fe];if(pe.length==0){ie.push("");continue}for(var ke=0;ke<pe.length;){var Be=76,De=pe.slice(ke,ke+Be);De.charAt(Be-1)=="="?Be--:De.charAt(Be-2)=="="?Be-=2:De.charAt(Be-3)=="="&&(Be-=3),De=pe.slice(ke,ke+Be),ke+=Be,ke<pe.length&&(De+="="),ie.push(De)}}return ie.join(`\r
`)}function hl(J){for(var de=[],ie=0;ie<J.length;++ie){for(var ce=J[ie];ie<=J.length&&ce.charAt(ce.length-1)=="=";)ce=ce.slice(0,ce.length-1)+J[++ie];de.push(ce)}for(var fe=0;fe<de.length;++fe)de[fe]=de[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(pe){return String.fromCharCode(parseInt(pe.slice(1),16))});return Js(de.join(`\r
`))}function Ba(J,de,ie){for(var ce="",fe="",pe="",ke,Be=0;Be<10;++Be){var De=de[Be];if(!De||De.match(/^\s*$/))break;var Pe=De.match(/^(.*?):\s*([^\s].*)$/);if(Pe)switch(Pe[1].toLowerCase()){case"content-location":ce=Pe[2].trim();break;case"content-type":pe=Pe[2].trim();break;case"content-transfer-encoding":fe=Pe[2].trim();break}}switch(++Be,fe.toLowerCase()){case"base64":ke=Js(ws(de.slice(Be).join("")));break;case"quoted-printable":ke=hl(de.slice(Be));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var Oe=Cr(J,ce.slice(ie.length),ke,{unsafe:!0});pe&&(Oe.ctype=pe)}function fo(J,de){if(L(J.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ie=de&&de.root||"",ce=(zt&&Buffer.isBuffer(J)?J.toString("binary"):L(J)).split(`\r
`),fe=0,pe="";for(fe=0;fe<ce.length;++fe)if(pe=ce[fe],!!/^Content-Location:/i.test(pe)&&(pe=pe.slice(pe.indexOf("file")),ie||(ie=pe.slice(0,pe.lastIndexOf("/")+1)),pe.slice(0,ie.length)!=ie))for(;ie.length>0&&(ie=ie.slice(0,ie.length-1),ie=ie.slice(0,ie.lastIndexOf("/")+1),pe.slice(0,ie.length)!=ie););var ke=(ce[1]||"").match(/boundary="(.*?)"/);if(!ke)throw new Error("MAD cannot find boundary");var Be="--"+(ke[1]||""),De=[],Pe=[],Oe={FileIndex:De,FullPaths:Pe};w(Oe);var qe,Qe=0;for(fe=0;fe<ce.length;++fe){var ot=ce[fe];ot!==Be&&ot!==Be+"--"||(Qe++&&Ba(Oe,ce.slice(qe,fe),ie),qe=fe)}return Oe}function Jr(J,de){var ie=de||{},ce=ie.boundary||"SheetJS";ce="------="+ce;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ce.slice(2)+'"',"","",""],pe=J.FullPaths[0],ke=pe,Be=J.FileIndex[0],De=1;De<J.FullPaths.length;++De)if(ke=J.FullPaths[De].slice(pe.length),Be=J.FileIndex[De],!(!Be.size||!Be.content||ke=="Sh33tJ5")){ke=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(St){return"_x"+St.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(St){return"_u"+St.charCodeAt(0).toString(16)+"_"});for(var Pe=Be.content,Oe=zt&&Buffer.isBuffer(Pe)?Pe.toString("binary"):L(Pe),qe=0,Qe=Math.min(1024,Oe.length),ot=0,Xe=0;Xe<=Qe;++Xe)(ot=Oe.charCodeAt(Xe))>=32&&ot<128&&++qe;var rt=qe>=Qe*4/5;fe.push(ce),fe.push("Content-Location: "+(ie.root||"file:///C:/SheetJS/")+ke),fe.push("Content-Transfer-Encoding: "+(rt?"quoted-printable":"base64")),fe.push("Content-Type: "+Yn(Be,ke)),fe.push(""),fe.push(rt?ls(Oe):Ei(Oe))}return fe.push(ce+`--\r
`),fe.join(`\r
`)}function ho(J){var de={};return w(de,J),de}function Cr(J,de,ie,ce){var fe=ce&&ce.unsafe;fe||w(J);var pe=!fe&&Xt.find(J,de);if(!pe){var ke=J.FullPaths[0];de.slice(0,ke.length)==ke?ke=de:(ke.slice(-1)!="/"&&(ke+="/"),ke=(ke+de).replace("//","/")),pe={name:s(de),type:2},J.FileIndex.push(pe),J.FullPaths.push(ke),fe||Xt.utils.cfb_gc(J)}return pe.content=ie,pe.size=ie?ie.length:0,ce&&(ce.CLSID&&(pe.clsid=ce.CLSID),ce.mt&&(pe.mt=ce.mt),ce.ct&&(pe.ct=ce.ct)),pe}function kn(J,de){w(J);var ie=Xt.find(J,de);if(ie){for(var ce=0;ce<J.FileIndex.length;++ce)if(J.FileIndex[ce]==ie)return J.FileIndex.splice(ce,1),J.FullPaths.splice(ce,1),!0}return!1}function pl(J,de,ie){w(J);var ce=Xt.find(J,de);if(ce){for(var fe=0;fe<J.FileIndex.length;++fe)if(J.FileIndex[fe]==ce)return J.FileIndex[fe].name=s(ie),J.FullPaths[fe]=ie,!0}return!1}function Mc(J){_(J,!0)}return e.find=T,e.read=k,e.parse=u,e.write=z,e.writeFile=V,e.utils={cfb_new:ho,cfb_add:Cr,cfb_del:kn,cfb_mov:pl,cfb_gc:Mc,ReadShift:Ru,CheckField:s4,prep_blob:En,bconcat:$i,use_zlib:B,_deflateRaw:ye,_inflateRaw:dt,consts:N},e}();function Zq(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Pa(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Sx(t){for(var e=[],r=Pa(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var rh=new Date(1899,11,30,0,0,0);function os(t,e){var r=t.getTime(),n=rh.getTime()+(t.getTimezoneOffset()-rh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var LI=new Date,eX=rh.getTime()+(LI.getTimezoneOffset()-rh.getTimezoneOffset())*6e4,n2=LI.getTimezoneOffset();function vp(t){var e=new Date;return e.setTime(t*24*60*60*1e3+eX),e.getTimezoneOffset()!==n2&&e.setTime(e.getTime()+(e.getTimezoneOffset()-n2)*6e4),e}function tX(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var s2=new Date("2017-02-19T19:06:09.000Z"),BI=isNaN(s2.getFullYear())?new Date("2/19/17"):s2,rX=BI.getFullYear()==2017;function dn(t,e){var r=new Date(t);if(rX)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(BI.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Xo(t,e){if(zt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return du(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return du(TI(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return du(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return du(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Cn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Cn(t[r]));return e}function Mr(t,e){for(var r="";r.length<e;)r+=t;return r}function aa(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var nX=["january","february","march","april","may","june","july","august","september","october","november","december"];function yc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&nX.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var sX=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function UI(t){return t?t.content&&t.type?Xo(t.content,!0):t.data?lu(t.data):t.asNodeBuffer&&zt?lu(t.asNodeBuffer().toString("binary")):t.asBinary?lu(t.asBinary()):t._data&&t._data.getContent?lu(Xo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function VI(t){if(!t)return null;if(t.data)return zb(t.data);if(t.asNodeBuffer&&zt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?zb(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function aX(t){return t&&t.name.slice(-4)===".bin"?VI(t):UI(t)}function Fs(t,e){for(var r=t.FullPaths||Pa(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Tx(t,e){var r=Fs(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Kr(t,e,r){if(!r)return aX(Tx(t,e));if(!e)return null;try{return Kr(t,e)}catch{return null}}function _s(t,e,r){if(!r)return UI(Tx(t,e));if(!e)return null;try{return _s(t,e)}catch{return null}}function iX(t,e,r){return VI(Tx(t,e))}function a2(t){for(var e=t.FullPaths||Pa(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function oX(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return zt?n=ol(r):n=wq(r),Xt.utils.cfb_add(t,e,n)}Xt.utils.cfb_add(t,e,r)}else t.file(e,r)}function $I(t,e){switch(e.type){case"base64":return Xt.read(t,{type:"base64"});case"binary":return Xt.read(t,{type:"binary"});case"buffer":case"array":return Xt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function uu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var jI=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,lX=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,i2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,cX=/<[^>]*>/g,Xn=jI.match(i2)?i2:cX,uX=/<\w*:/,dX=/<(\/?)\w+:/;function bt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(lX),o=0,l="",c=0,u="",d="",f=1;if(a)for(c=0;c!=a.length;++c){for(d=a[c],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(u=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(f=(s=d.charCodeAt(i+1))==34||s==39?1:0,l=d.slice(i+1+f,d.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var p=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[p]&&u.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function Ma(t){return t.replace(dX,"<$1")}var HI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},fX=Sx(HI),Jt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return HI[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),hX=/[&<>'"]/g,pX=/[\u0000-\u001f]/g;function Ax(t){var e=t+"";return e.replace(hX,function(r){return fX[r]}).replace(/\n/g,"<br/>").replace(pX,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var o2=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Ar(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Gm(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function l2(t){var e=ao(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function c2(t){return ol(t,"binary").toString("utf8")}var Rf="foo bar bazâð£",xr=zt&&(c2(Rf)==Gm(Rf)&&c2||l2(Rf)==Gm(Rf)&&l2)||Gm,du=zt?function(t){return ol(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},gd=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),GI=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),mX=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),gX=/<\/?(?:vt:)?variant>/g,vX=/<(?:vt:)([^>]*)>([\s\S]*)</;function u2(t,e){var r=bt(t),n=t.match(mX(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(gX,"").match(vX);a&&s.push({v:xr(a[2]),t:a[1]})}),s}var xX=/(^\s|\s$|\n)/;function yX(t){return Pa(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function EX(t,e,r){return"<"+t+(r!=null?yX(r):"")+(e!=null?(e.match(xX)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function wx(t){if(zt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return xr(ll(Ex(t)));throw new Error("Bad input format: expected Buffer or string")}var vd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,_X={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},bX=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function SX(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function TX(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var d2=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},f2=zt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:ol(e)})):d2(t)}:d2,h2=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(Za(t,s)));return n.join("").replace(is,"")},Cx=zt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(is,""):h2(t,e,r)}:h2,p2=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},WI=zt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):p2(t,e,r)}:p2,m2=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Ol(t,s)));return n.join("")},Kd=zt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):m2(e,r,n)}:m2,zI=function(t,e){var r=Es(t,e);return r>0?Kd(t,e+4,e+4+r-1):""},KI=zI,qI=function(t,e){var r=Es(t,e);return r>0?Kd(t,e+4,e+4+r-1):""},XI=qI,YI=function(t,e){var r=2*Es(t,e);return r>0?Kd(t,e+4,e+4+r-1):""},QI=YI,JI=function(e,r){var n=Es(e,r);return n>0?Cx(e,r+4,r+4+n):""},ZI=JI,e4=function(t,e){var r=Es(t,e);return r>0?Kd(t,e+4,e+4+r):""},t4=e4,r4=function(t,e){return SX(t,e)},nh=r4,n4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};zt&&(KI=function(e,r){if(!Buffer.isBuffer(e))return zI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},XI=function(e,r){if(!Buffer.isBuffer(e))return qI(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},QI=function(e,r){if(!Buffer.isBuffer(e))return YI(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},ZI=function(e,r){if(!Buffer.isBuffer(e))return JI(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},t4=function(e,r){if(!Buffer.isBuffer(e))return e4(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},nh=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):r4(e,r)},n4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ol=function(t,e){return t[e]},Za=function(t,e){return t[e+1]*256+t[e]},AX=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Es=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},So=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},wX=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Ru(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,zt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Za(this,c)),c+=2;t*=2;break;case"utf8":r=Kd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Cx(this,this.l,this.l+t);break;case"wstr":return Ru.call(this,t,"dbcs");case"lpstr-ansi":r=KI(this,this.l),t=4+Es(this,this.l);break;case"lpstr-cp":r=XI(this,this.l),t=4+Es(this,this.l);break;case"lpwstr":r=QI(this,this.l),t=4+2*Es(this,this.l);break;case"lpp4":t=4+Es(this,this.l),r=ZI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Es(this,this.l),r=t4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Ol(this,this.l+t++))!==0;)i.push(Ff(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=Za(this,this.l+t))!==0;)i.push(Ff(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Ol(this,c),this.l=c+1,o=Ru.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Ff(Za(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Ol(this,c),this.l=c+1,o=Ru.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Ff(Ol(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Ol(this,this.l),this.l++,n;case 2:return n=(e==="i"?AX:Za)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?So:wX)(this,this.l),this.l+=4,n):(s=Es(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=nh(this,this.l):s=nh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=WI(this,this.l,t);break}}return this.l+=t,r}var CX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},IX=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},kX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function DX(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)kX(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,CX(this,e,this.l);break;case 8:if(n=8,r==="f"){TX(this,e,this.l);break}case 16:break;case-4:n=4,IX(this,e,this.l);break}return this.l+=n,this}function s4(t,e){var r=WI(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function En(t,e){t.l=e,t.read_shift=Ru,t.chk=s4,t.write_shift=DX}function qn(t,e){t.l+=e}function en(t){var e=ao(t);return En(e,0),e}function xi(t,e,r){if(t){var n,s,i;En(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=ch[o]||ch[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function dv(){var t=[],e=zt?256:2048,r=function(c){var u=en(c);return En(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),$i(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function Ou(t,e,r){var n=Cn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function g2(t,e,r){var n=Cn(t);return n.s=Ou(n.s,e.s,r),n.e=Ou(n.e,e.s,r),n}function Nu(t,e){if(t.cRel&&t.c<0)for(t=Cn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Cn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Dt(t);return!t.cRel&&t.cRel!=null&&(r=RX(r)),!t.rRel&&t.rRel!=null&&(r=PX(r)),r}function Wm(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+nn(t.s.c)+":"+(t.e.cRel?"":"$")+nn(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+In(t.s.r)+":"+(t.e.rRel?"":"$")+In(t.e.r):Nu(t.s,e.biff)+":"+Nu(t.e,e.biff)}function Ix(t){return parseInt(FX(t),10)-1}function In(t){return""+(t+1)}function PX(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function FX(t){return t.replace(/\$(\d+)$/,"$1")}function kx(t){for(var e=OX(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function nn(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function RX(t){return t.replace(/^([A-Z])/,"$$$1")}function OX(t){return t.replace(/^\$([A-Z])/,"$1")}function NX(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ss(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Dt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Oc(t){var e=t.indexOf(":");return e==-1?{s:ss(t),e:ss(t)}:{s:ss(t.slice(0,e)),e:ss(t.slice(e+1))}}function Yt(t,e){return typeof e>"u"||typeof e=="number"?Yt(t.s,t.e):(typeof t!="string"&&(t=Dt(t)),typeof e!="string"&&(e=Dt(e)),t==e?t:t+":"+e)}function Br(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function v2(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Bs(t.z,r?os(e):e)}catch{}try{return t.w=Bs((t.XF||{}).numFmtId||(r?14:0),r?os(e):e)}catch{return""+e}}function mi(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?dl[t.v]||t.v:e==null?v2(t,t.v):v2(t,e))}function uo(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function a4(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Br(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[d].length;++f)if(!(typeof e[d][f]>"u")){var p={v:e[d][f]},m=a+d,g=o+f;if(c.s.r>m&&(c.s.r=m),c.s.c>g&&(c.s.c=g),c.e.r<m&&(c.e.r=m),c.e.c<g&&(c.e.c=g),e[d][f]&&typeof e[d][f]=="object"&&!Array.isArray(e[d][f])&&!(e[d][f]instanceof Date))p=e[d][f];else if(Array.isArray(p.v)&&(p.f=e[d][f][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Nt[14],n.cellDates?(p.t="d",p.w=Bs(p.z,os(p.v))):(p.t="n",p.v=os(p.v),p.w=Bs(p.z,p.v))):p.t="s";if(s)i[m]||(i[m]=[]),i[m][g]&&i[m][g].z&&(p.z=i[m][g].z),i[m][g]=p;else{var v=Dt({c:g,r:m});i[v]&&i[v].z&&(p.z=i[v].z),i[v]=p}}}return c.s.c<1e7&&(i["!ref"]=Yt(c)),i}function Nc(t,e){return a4(null,t,e)}function MX(t){return t.read_shift(4,"i")}function zn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function LX(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Dx(t,e){var r=t.l,n=t.read_shift(1),s=zn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(LX(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var BX=Dx;function $s(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function cl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var UX=zn;function Px(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var VX=zn,fv=Px;function Fx(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?nh([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):So(e,0)>>2;return r?s/100:s}function i4(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var ul=i4;function Vn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function $X(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=Mo[s];c&&(e.rgb=yd(c));break;case 2:e.rgb=yd([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function jX(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function o4(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function HX(t){return o4(t,1)}function GX(t){return o4(t,2)}var Rx=2,fs=3,Of=11,x2=12,sh=19,Nf=64,WX=65,zX=71,KX=4108,qX=4126,on=80,l4=81,XX=[on,l4],YX={1:{n:"CodePage",t:Rx},2:{n:"Category",t:on},3:{n:"PresentationFormat",t:on},4:{n:"ByteCount",t:fs},5:{n:"LineCount",t:fs},6:{n:"ParagraphCount",t:fs},7:{n:"SlideCount",t:fs},8:{n:"NoteCount",t:fs},9:{n:"HiddenCount",t:fs},10:{n:"MultimediaClipCount",t:fs},11:{n:"ScaleCrop",t:Of},12:{n:"HeadingPairs",t:KX},13:{n:"TitlesOfParts",t:qX},14:{n:"Manager",t:on},15:{n:"Company",t:on},16:{n:"LinksUpToDate",t:Of},17:{n:"CharacterCount",t:fs},19:{n:"SharedDoc",t:Of},22:{n:"HyperlinksChanged",t:Of},23:{n:"AppVersion",t:fs,p:"version"},24:{n:"DigSig",t:WX},26:{n:"ContentType",t:on},27:{n:"ContentStatus",t:on},28:{n:"Language",t:on},29:{n:"Version",t:on},255:{},2147483648:{n:"Locale",t:sh},2147483651:{n:"Behavior",t:sh},1919054434:{}},QX={1:{n:"CodePage",t:Rx},2:{n:"Title",t:on},3:{n:"Subject",t:on},4:{n:"Author",t:on},5:{n:"Keywords",t:on},6:{n:"Comments",t:on},7:{n:"Template",t:on},8:{n:"LastAuthor",t:on},9:{n:"RevNumber",t:on},10:{n:"EditTime",t:Nf},11:{n:"LastPrinted",t:Nf},12:{n:"CreatedDate",t:Nf},13:{n:"ModifiedDate",t:Nf},14:{n:"PageCount",t:fs},15:{n:"WordCount",t:fs},16:{n:"CharCount",t:fs},17:{n:"Thumbnail",t:zX},18:{n:"Application",t:on},19:{n:"DocSecurity",t:fs},255:{},2147483648:{n:"Locale",t:sh},2147483651:{n:"Behavior",t:sh},1919054434:{}},y2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},JX=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ZX(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var eY=ZX([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Mo=Cn(eY),dl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},c4={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},E2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function tY(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function rY(t){var e=tY();if(!t||!t.match)return e;var r={};if((t.match(Xn)||[]).forEach(function(n){var s=bt(n);switch(s[0].replace(uX,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[E2[s.ContentType]]!==void 0&&e[E2[s.ContentType]].push(s.PartName);break}}),e.xmlns!==_X.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Ul={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function hv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Mu(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Xn)||[]).forEach(function(s){var i=bt(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:uu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var nY="application/vnd.oasis.opendocument.spreadsheet";function sY(t,e){for(var r=wx(t),n,s;n=vd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=bt(n[0],!1),s.path=="/"&&s.type!==nY)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var Lu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],aY=function(){for(var t=new Array(Lu.length),e=0;e<Lu.length;++e){var r=Lu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function u4(t){var e={};t=xr(t);for(var r=0;r<Lu.length;++r){var n=Lu[r],s=t.match(aY[r]);s!=null&&s.length>0&&(e[n[1]]=Jt(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=dn(e[n[1]]))}return e}var iY=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function d4(t,e,r,n){var s=[];if(typeof t=="string")s=u2(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?u2(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function oY(t,e,r){var n={};return e||(e={}),t=xr(t),iY.forEach(function(s){var i=(t.match(gd(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=Jt(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&d4(n.HeadingPairs,n.TitlesOfParts,e,r),e}var lY=/<[^>]+>[^<]*/g;function cY(t,e){var r={},n="",s=t.match(lY);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=bt(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Jt(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Jt(u);break;case"bool":r[n]=Ar(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=dn(u);break;case"cy":case"error":r[n]=Jt(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var uY={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},zm;function dY(t,e,r){zm||(zm=Sx(uY)),e=zm[e]||e,t[e]=r}function Ox(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function f4(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function h4(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function p4(t,e,r){return e===31?h4(t):f4(t,e,r)}function pv(t,e,r){return p4(t,e,r===!1?0:4)}function fY(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return p4(t,e,0)}function hY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(is,""),t.l-s&2&&(t.l+=2)}return r}function pY(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(is,"");return r}function mY(t){var e=t.l,r=ah(t,l4);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=ah(t,fs);return[r,n]}function gY(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(mY(t));return r}function _2(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(is,"").replace(cu,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function m4(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function vY(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function ah(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==x2&&n!==e&&XX.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===x2?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return f4(t,n,4).replace(is,"");case 31:return h4(t);case 64:return Ox(t);case 65:return m4(t);case 71:return vY(t);case 80:return pv(t,n,!i.raw).replace(is,"");case 81:return fY(t,n).replace(is,"");case 4108:return gY(t);case 4126:case 4127:return n==4127?hY(t):pY(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function b2(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),d=t.read_shift(4);i[a]=[u,d+r]}i.sort(function(x,y){return x[1]-y[1]});var f={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var p=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,p=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],p=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(p=!1,t.l=i[a][1]),p)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var m=e[i[a][0]];if(f[m.n]=ah(t,m.t,{raw:!0}),m.p==="version"&&(f[m.n]=String(f[m.n]>>16)+"."+("0000"+String(f[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(f[m.n]){case 0:f[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zs(o=f[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[m.n])}}else if(i[a][0]===1){if(o=f.CodePage=ah(t,Rx),Zs(o),l!==-1){var g=t.l;t.l=i[l][1],c=_2(t,o),t.l=g}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=_2(t,o)}else{var v=c[i[a][0]],E;switch(t[t.l]){case 65:t.l+=4,E=m4(t);break;case 30:t.l+=4,E=pv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,E=pv(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,E=t.read_shift(4,"i");break;case 19:t.l+=4,E=t.read_shift(4);break;case 5:t.l+=4,E=t.read_shift(8,"f");break;case 11:t.l+=4,E=Vr(t,4);break;case 64:t.l+=4,E=dn(Ox(t));break;default:throw new Error("unparsed value: "+t[t.l])}f[v]=E}}return t.l=r+n,f}function S2(t,e,r){var n=t.content;if(!n)return{};En(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==Xt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var d=b2(n,e),f={SystemIdentifier:c};for(var p in d)f[p]=d[p];if(f.FMTID=i,s===1)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var m;try{m=b2(n,null)}catch{}for(p in m)f[p]=m[p];return f.FMTID=[i,a],f}function Ii(t,e){return t.read_shift(e),null}function xY(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function Vr(t,e){return t.read_shift(e)===1}function qr(t){return t.read_shift(2,"u")}function g4(t,e){return xY(t,e,qr)}function yY(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function qd(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function EY(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Yo(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Xd(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Yo(t,n,r)}function fl(t,e,r){if(r.biff>5)return Xd(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function _Y(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function bY(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(is,"");return n&&(t.l+=24),s}function SY(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(is,"");return r+a}function TY(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return bY(t);case"0303000000000000c000000000000046":return SY(t);default:throw new Error("Unsupported Moniker "+r)}}function Mf(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(is,""):"";return r}function AY(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,d;s&16&&(i=Mf(t,r-t.l)),s&128&&(a=Mf(t,r-t.l)),(s&257)===257&&(o=Mf(t,r-t.l)),(s&257)===1&&(l=TY(t,r-t.l)),s&8&&(c=Mf(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(d=Ox(t)),t.l=r;var f=a||o||l||"";f&&c&&(f+="#"+c),f||(f="#"+c),s&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var p={Target:f};return u&&(p.guid=u),d&&(p.time=d),i&&(p.Tooltip=i),p}function v4(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function x4(t,e){var r=v4(t);return r[3]=0,r}function La(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function wY(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function CY(t,e,r){return e===0?"":fl(t,e,r)}function IY(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function y4(t){var e=t.read_shift(2),r=Fx(t);return[e,r]}function kY(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=qd(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function xp(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function E4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var DY=E4;function _4(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function PY(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function FY(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Rn(t){t.l+=2,t.l+=t.read_shift(2)}var RY={0:Rn,4:Rn,5:Rn,6:Rn,7:FY,8:Rn,9:Rn,10:Rn,11:Rn,12:Rn,13:PY,14:Rn,15:Rn,16:Rn,17:Rn,18:Rn,19:Rn,20:Rn,21:_4};function OY(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(RY[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Lf(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function NY(t,e){return e===0||t.read_shift(2),1200}function MY(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=fl(t,0,r);return t.read_shift(e+n-t.l),s}function LY(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function BY(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=qd(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function UY(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(EY(t));return i.Count=n,i.Unique=s,i}function VY(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function $Y(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function jY(t){var e=wY(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function HY(t){return t.read_shift(2),t.read_shift(4)}function T2(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function GY(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function WY(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function zY(){}function KY(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=qd(t,0,r),n}function qY(t){var e=La(t);return e.isst=t.read_shift(4),e}function XY(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=La(t);r.biff==2&&t.l++;var i=Xd(t,n-t.l,r);return s.val=i,s}function YY(t,e,r){var n=t.read_shift(2),s=fl(t,0,r);return[n,s]}var QY=fl;function A2(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function JY(t){var e=t.read_shift(2),r=t.read_shift(2),n=y4(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function ZY(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(y4(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function eQ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function tQ(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=JX[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function rQ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=tQ(t,e,n.fStyle,r),n}function nQ(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function w2(t,e,r){var n=La(t);(r.biff==2||e==9)&&++t.l;var s=yY(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function sQ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=La(t),s=Vn(t);return n.val=s,n}var C2=CY;function aQ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=Yo(t,i),o=[];n>t.l;)o.push(Xd(t));return[i,s,a,o]}function I2(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=kY(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var iQ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function k2(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=Yo(t,a,r);s&32&&(c=iQ[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var d=n==t.l||o===0||!(u>0)?[]:$ee(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:d}}function b4(t,e,r){if(r.biff<8)return oQ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(IY(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function oQ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=qd(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function lQ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=Yo(t,n,r),a=Yo(t,s,r);return[i,a]}function cQ(t,e,r){var n=E4(t);t.l++;var s=t.read_shift(1);return e-=8,[jee(t,e,r),s,n]}function D2(t,e,r){var n=DY(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,Uee(t,e,r)]}function uQ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function dQ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=fl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function fQ(t,e,r){return dQ(t,e,r)}function hQ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(xp(t));return r}function pQ(t,e,r){if(r&&r.biff<8)return gQ(t,e,r);var n=_4(t),s=OY(t,e-22,n[1]);return{cmo:n,ft:s}}var mQ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function gQ(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((mQ[n]||qn)(t,e,r)),{cmo:[s,n,i],ft:a}}function vQ(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=_Y(t,6,r);var o=t.read_shift(2);t.read_shift(2),qr(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],d=Yo(t,t.lens[c+1]-t.lens[c]-1);if(s+=d,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function xQ(t,e){var r=xp(t);t.l+=16;var n=AY(t,e-24);return[r,n]}function yQ(t,e){t.read_shift(2);var r=xp(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(is,""),[r,n]}function EQ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=y2[r]||r,r=t.read_shift(2),e[1]=y2[r]||r,e}function _Q(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(x4(t));return r}function bQ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(x4(t));return r}function SQ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function S4(t,e,r){if(!r.cellStyles)return qn(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function TQ(t,e){var r={};return e<32||(t.l+=16,r.header=Vn(t),r.footer=Vn(t),t.l+=2),r}function AQ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var wQ=La,CQ=g4,IQ=Xd;function kQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function DQ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=La(t);++t.l;var s=fl(t,e-7,r);return n.t="str",n.val=s,n}function PQ(t){var e=La(t);++t.l;var r=Vn(t);return e.t="n",e.val=r,e}function FQ(t){var e=La(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function RQ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function OQ(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function NQ(t,e,r){var n=t.l+e,s=La(t),i=t.read_shift(2),a=Yo(t,i,r);return t.l=n,s.t="str",s.val=a,s}var MQ=[2,3,48,49,131,139,140,245],P2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Sx({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=ao(1);switch(l.type){case"base64":u=Js(ws(o));break;case"binary":u=Js(o);break;case"buffer":case"array":u=o;break}En(u,0);var d=u.read_shift(1),f=!!(d&136),p=!1,m=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,f=!0;break;case 49:p=!0,f=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var g=0,v=521;d==2&&(g=u.read_shift(2)),u.l+=3,d!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),d!=2&&(v=u.read_shift(2));var E=u.read_shift(2),x=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(x=t[u[u.l]]),u.l+=1,u.l+=2),m&&(u.l+=36);for(var y=[],C={},P=Math.min(u.length,d==2?521:v-10-(p?264:0)),k=m?32:11;u.l<P&&u[u.l]!=13;)switch(C={},C.name=pd.utils.decode(x,u.slice(u.l,u.l+k)).replace(/[\u0000\r\n].*$/g,""),u.l+=k,C.type=String.fromCharCode(u.read_shift(1)),d!=2&&!m&&(C.offset=u.read_shift(4)),C.len=u.read_shift(1),d==2&&(C.offset=u.read_shift(2)),C.dec=u.read_shift(1),C.name.length&&y.push(C),d!=2&&(u.l+=m?13:14),C.type){case"B":(!p||C.len!=8)&&l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var w=0,S=0;for(c[0]=[],S=0;S!=y.length;++S)c[0][S]=y[S].name;for(;g-- >0;){if(u[u.l]===42){u.l+=E;continue}for(++u.l,c[++w]=[],S=0,S=0;S!=y.length;++S){var _=u.slice(u.l,u.l+y[S].len);u.l+=y[S].len,En(_,0);var b=pd.utils.decode(x,_);switch(y[S].type){case"C":b.trim().length&&(c[w][S]=b.replace(/\s+$/,""));break;case"D":b.length===8?c[w][S]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):c[w][S]=b;break;case"F":c[w][S]=parseFloat(b.trim());break;case"+":case"I":c[w][S]=m?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":c[w][S]=!0;break;case"N":case"F":c[w][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[w][S]="##MEMO##"+(m?parseInt(b.trim(),10):_.read_shift(4));break;case"N":b=b.replace(/\u0000/g,"").trim(),b&&b!="."&&(c[w][S]=+b||0);break;case"@":c[w][S]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":c[w][S]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":c[w][S]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[w][S]=-_.read_shift(-8,"f");break;case"B":if(p&&y[S].len==8){c[w][S]=_.read_shift(8,"f");break}case"G":case"P":_.l+=y[S].len;break;case"0":if(y[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[S].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=y,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Nc(r(o,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function s(o,l){try{return uo(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&Zs(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=dv(),d=Ev(o,{header:1,raw:!0,cellDates:!0}),f=d[0],p=d.slice(1),m=o["!cols"]||[],g=0,v=0,E=0,x=1;for(g=0;g<f.length;++g){if(((m[g]||{}).DBF||{}).name){f[g]=m[g].DBF.name,++E;continue}if(f[g]!=null){if(++E,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(v=0;v<1024;++v)if(f.indexOf(f[g]+"_"+v)==-1){f[g]+="_"+v;break}}}}var y=Br(o["!ref"]),C=[],P=[],k=[];for(g=0;g<=y.e.c-y.s.c;++g){var w="",S="",_=0,b=[];for(v=0;v<p.length;++v)p[v][g]!=null&&b.push(p[v][g]);if(b.length==0||f[g]==null){C[g]="?";continue}for(v=0;v<b.length;++v){switch(typeof b[v]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=b[v]instanceof Date?"D":"C";break;default:S="C"}_=Math.max(_,String(b[v]).length),w=w&&w!=S?"C":S}_>250&&(_=250),S=((m[g]||{}).DBF||{}).type,S=="C"&&m[g].DBF.len>_&&(_=m[g].DBF.len),w=="B"&&S=="N"&&(w="N",k[g]=m[g].DBF.dec,_=m[g].DBF.len),P[g]=w=="C"||S=="N"?_:i[w]||0,x+=P[g],C[g]=w}var T=u.next(32);for(T.write_shift(4,318902576),T.write_shift(4,p.length),T.write_shift(2,296+32*E),T.write_shift(2,x),g=0;g<4;++g)T.write_shift(4,0);for(T.write_shift(4,0|(+e[bI]||3)<<8),g=0,v=0;g<f.length;++g)if(f[g]!=null){var I=u.next(32),D=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,D,"sbcs"),I.write_shift(1,C[g]=="?"?"C":C[g],"sbcs"),I.write_shift(4,v),I.write_shift(1,P[g]||i[C[g]]||0),I.write_shift(1,k[g]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),v+=P[g]||i[C[g]]||0}var O=u.next(264);for(O.write_shift(4,13),g=0;g<65;++g)O.write_shift(4,0);for(g=0;g<p.length;++g){var R=u.next(x);for(R.write_shift(1,0),v=0;v<f.length;++v)if(f[v]!=null)switch(C[v]){case"L":R.write_shift(1,p[g][v]==null?63:p[g][v]?84:70);break;case"B":R.write_shift(8,p[g][v]||0,"f");break;case"N":var F="0";for(typeof p[g][v]=="number"&&(F=p[g][v].toFixed(k[v]||0)),E=0;E<P[v]-F.length;++E)R.write_shift(1,32);R.write_shift(1,F,"sbcs");break;case"D":p[g][v]?(R.write_shift(4,("0000"+p[g][v].getFullYear()).slice(-4),"sbcs"),R.write_shift(2,("00"+(p[g][v].getMonth()+1)).slice(-2),"sbcs"),R.write_shift(2,("00"+p[g][v].getDate()).slice(-2),"sbcs")):R.write_shift(8,"00000000","sbcs");break;case"C":var N=String(p[g][v]!=null?p[g][v]:"").slice(0,P[v]);for(R.write_shift(1,N,"sbcs"),E=0;E<P[v]-N.length;++E)R.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),LQ=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Pa(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,p){var m=t[p];return typeof m=="number"?Kb(m):m},n=function(f,p,m){var g=p.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return g==59?f:Kb(g)};t["|"]=254;function s(f,p){switch(p.type){case"base64":return i(ws(f),p);case"binary":return i(f,p);case"buffer":return i(zt&&Buffer.isBuffer(f)?f.toString("binary"):ll(f),p);case"array":return i(Xo(f),p)}throw new Error("Unrecognized type "+p.type)}function i(f,p){var m=f.split(/[\n\r]+/),g=-1,v=-1,E=0,x=0,y=[],C=[],P=null,k={},w=[],S=[],_=[],b=0,T;for(+p.codepage>=0&&Zs(+p.codepage);E!==m.length;++E){b=0;var I=m[E].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=I.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),O=D[0],R;if(I.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&C.push(I.slice(3).replace(/;;/g,";"));break;case"C":var F=!1,N=!1,V=!1,L=!1,z=-1,H=-1;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"A":break;case"X":v=parseInt(D[x].slice(1))-1,N=!0;break;case"Y":for(g=parseInt(D[x].slice(1))-1,N||(v=0),T=y.length;T<=g;++T)y[T]=[];break;case"K":R=D[x].slice(1),R.charAt(0)==='"'?R=R.slice(1,R.length-1):R==="TRUE"?R=!0:R==="FALSE"?R=!1:isNaN(aa(R))?isNaN(yc(R).getDate())||(R=dn(R)):(R=aa(R),P!==null&&Rc(P)&&(R=vp(R))),F=!0;break;case"E":L=!0;var B=rc(D[x].slice(1),{r:g,c:v});y[g][v]=[y[g][v],B];break;case"S":V=!0,y[g][v]=[y[g][v],"S5S"];break;case"G":break;case"R":z=parseInt(D[x].slice(1))-1;break;case"C":H=parseInt(D[x].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}if(F&&(y[g][v]&&y[g][v].length==2?y[g][v][0]=R:y[g][v]=R,P=null),V){if(L)throw new Error("SYLK shared formula cannot have own formula");var W=z>-1&&y[z][H];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");y[g][v][1]=R4(W[1],{r:g-z,c:v-H})}break;case"F":var K=0;for(x=1;x<D.length;++x)switch(D[x].charAt(0)){case"X":v=parseInt(D[x].slice(1))-1,++K;break;case"Y":for(g=parseInt(D[x].slice(1))-1,T=y.length;T<=g;++T)y[T]=[];break;case"M":b=parseInt(D[x].slice(1))/20;break;case"F":break;case"G":break;case"P":P=C[parseInt(D[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=D[x].slice(1).split(" "),T=parseInt(_[0],10);T<=parseInt(_[1],10);++T)b=parseInt(_[2],10),S[T-1]=b===0?{hidden:!0}:{wch:b},Ec(S[T-1]);break;case"C":v=parseInt(D[x].slice(1))-1,S[v]||(S[v]={});break;case"R":g=parseInt(D[x].slice(1))-1,w[g]||(w[g]={}),b>0?(w[g].hpt=b,w[g].hpx=Ed(b)):b===0&&(w[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}K<1&&(P=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}}return w.length>0&&(k["!rows"]=w),S.length>0&&(k["!cols"]=S),p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),[y,k]}function a(f,p){var m=s(f,p),g=m[0],v=m[1],E=Nc(g,p);return Pa(v).forEach(function(x){E[x]=v[x]}),E}function o(f,p){return uo(a(f,p),p)}function l(f,p,m,g){var v="C;Y"+(m+1)+";X"+(g+1)+";K";switch(f.t){case"n":v+=f.v||0,f.f&&!f.F&&(v+=";E"+SZ(f.f,{r:m,c:g}));break;case"b":v+=f.v?"TRUE":"FALSE";break;case"e":v+=f.w||f.v;break;case"d":v+='"'+(f.w||f.v)+'"';break;case"s":v+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function c(f,p){p.forEach(function(m,g){var v="F;W"+(g+1)+" "+(g+1)+" ";m.hidden?v+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=oh(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=lh(m.wpx)),typeof m.wch=="number"&&(v+=Math.round(m.wch))),v.charAt(v.length-1)!=" "&&f.push(v)})}function u(f,p){p.forEach(function(m,g){var v="F;";m.hidden?v+="M0;":m.hpt?v+="M"+20*m.hpt+";":m.hpx&&(v+="M"+20*D4(m.hpx)+";"),v.length>2&&f.push(v+"R"+(g+1))})}function d(f,p){var m=["ID;PWXL;N;E"],g=[],v=Br(f["!ref"]),E,x=Array.isArray(f),y=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),f["!cols"]&&c(m,f["!cols"]),f["!rows"]&&u(m,f["!rows"]),m.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var C=v.s.r;C<=v.e.r;++C)for(var P=v.s.c;P<=v.e.c;++P){var k=Dt({r:C,c:P});E=x?(f[C]||[])[P]:f[k],!(!E||E.v==null&&(!E.f||E.F))&&g.push(l(E,f,C,P))}return m.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),BQ=function(){function t(i,a){switch(a.type){case"base64":return e(ws(i),a);case"binary":return e(i,a);case"buffer":return e(zt&&Buffer.isBuffer(i)?i.toString("binary"):ll(i),a);case"array":return e(Xo(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,d=[];u!==o.length;++u){if(o[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var f=o[u].trim().split(","),p=f[0],m=f[1];++u;for(var g=o[u]||"";(g.match(/["]/g)||[]).length&1&&u<o.length-1;)g+=`
`+o[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){d[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?d[l][c]=!0:g==="FALSE"?d[l][c]=!1:isNaN(aa(m))?isNaN(yc(m).getDate())?d[l][c]=m:d[l][c]=dn(m):d[l][c]=aa(m),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),d[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return Nc(t(i,a),a)}function n(i,a){return uo(r(i,a),a)}var s=function(){var i=function(l,c,u,d,f){l.push(c),l.push(u+","+d),l.push('"'+f.replace(/"/g,'""')+'"')},a=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Br(l["!ref"]),d,f=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){a(c,-1,0,"BOT");for(var m=u.s.c;m<=u.e.c;++m){var g=Dt({r:p,c:m});if(d=f?(l[p]||[])[m]:l[g],!d){a(c,1,0,"");continue}switch(d.t){case"n":var v=d.w;!v&&d.v!=null&&(v=d.v),v==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,v,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Bs(d.z||Nt[14],os(dn(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var E=`\r
`,x=c.join(E);return x}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),UQ=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,f){for(var p=d.split(`
`),m=-1,g=-1,v=0,E=[];v!==p.length;++v){var x=p[v].trim().split(":");if(x[0]==="cell"){var y=ss(x[1]);if(E.length<=y.r)for(m=E.length;m<=y.r;++m)E[m]||(E[m]=[]);switch(m=y.r,g=y.c,x[2]){case"t":E[m][g]=t(x[3]);break;case"v":E[m][g]=+x[3];break;case"vtf":var C=x[x.length-1];case"vtc":switch(x[3]){case"nl":E[m][g]=!!+x[4];break;default:E[m][g]=+x[4];break}x[2]=="vtf"&&(E[m][g]=[E[m][g],C])}}}return f&&f.sheetRows&&(E=E.slice(0,f.sheetRows)),E}function n(d,f){return Nc(r(d,f),f)}function s(d,f){return uo(n(d,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var f=[],p=[],m,g="",v=Oc(d["!ref"]),E=Array.isArray(d),x=v.s.r;x<=v.e.r;++x)for(var y=v.s.c;y<=v.e.c;++y)if(g=Dt({r:x,c:y}),m=E?(d[x]||[])[y]:d[g],!(!m||m.v==null||m.t==="z")){switch(p=["cell",g,"t"],m.t){case"s":case"str":p.push(e(m.v));break;case"n":m.f?(p[2]="vtf",p[3]="n",p[4]=m.v,p[5]=e(m.f)):(p[2]="v",p[3]=m.v);break;case"b":p[2]="vt"+(m.f?"f":"c"),p[3]="nl",p[4]=m.v?"1":"0",p[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var C=os(dn(m.v));p[2]="vtc",p[3]="nd",p[4]=""+C,p[5]=m.w||Bs(m.z||Nt[14],C);break;case"e":continue}f.push(p.join(":"))}return f.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),xd=function(){function t(u,d,f,p,m){m.raw?d[f][p]=u:u===""||(u==="TRUE"?d[f][p]=!0:u==="FALSE"?d[f][p]=!1:isNaN(aa(u))?isNaN(yc(u).getDate())?d[f][p]=u:d[f][p]=dn(u):d[f][p]=aa(u))}function e(u,d){var f=d||{},p=[];if(!u||u.length===0)return p;for(var m=u.split(/[\r\n]/),g=m.length-1;g>=0&&m[g].length===0;)--g;for(var v=10,E=0,x=0;x<=g;++x)E=m[x].indexOf(" "),E==-1?E=m[x].length:E++,v=Math.max(v,E);for(x=0;x<=g;++x){p[x]=[];var y=0;for(t(m[x].slice(0,v).trim(),p,x,y,f),y=1;y<=(m[x].length-v)/10+1;++y)t(m[x].slice(v+(y-1)*10,v+y*10).trim(),p,x,y,f)}return f.sheetRows&&(p=p.slice(0,f.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var d={},f=!1,p=0,m=0;p<u.length;++p)(m=u.charCodeAt(p))==34?f=!f:!f&&m in r&&(d[m]=(d[m]||0)+1);m=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&m.push([d[p],p]);if(!m.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&m.push([d[p],p])}return m.sort(function(g,v){return g[0]-v[0]||n[g[1]]-n[v[1]]}),r[m.pop()[1]]||44}function i(u,d){var f=d||{},p="",m=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):f&&f.FS?p=f.FS:p=s(u.slice(0,1024));var v=0,E=0,x=0,y=0,C=0,P=p.charCodeAt(0),k=!1,w=0,S=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var _=f.dateNF!=null?Yq(f.dateNF):null;function b(){var T=u.slice(y,C),I={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)I.t="z";else if(f.raw)I.t="s",I.v=T;else if(T.trim().length===0)I.t="s",I.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(I.t="s",I.v=T.slice(2,-1).replace(/""/g,'"')):AZ(T)?(I.t="n",I.f=T.slice(1)):(I.t="s",I.v=T);else if(T=="TRUE")I.t="b",I.v=!0;else if(T=="FALSE")I.t="b",I.v=!1;else if(!isNaN(x=aa(T)))I.t="n",f.cellText!==!1&&(I.w=T),I.v=x;else if(!isNaN(yc(T).getDate())||_&&T.match(_)){I.z=f.dateNF||Nt[14];var D=0;_&&T.match(_)&&(T=Qq(T,f.dateNF,T.match(_)||[]),D=1),f.cellDates?(I.t="d",I.v=dn(T,D)):(I.t="n",I.v=os(dn(T,D))),f.cellText!==!1&&(I.w=Bs(I.z,I.v instanceof Date?os(I.v):I.v)),f.cellNF||delete I.z}else I.t="s",I.v=T;if(I.t=="z"||(f.dense?(m[v]||(m[v]=[]),m[v][E]=I):m[Dt({c:E,r:v})]=I),y=C+1,S=u.charCodeAt(y),g.e.c<E&&(g.e.c=E),g.e.r<v&&(g.e.r=v),w==P)++E;else if(E=0,++v,f.sheetRows&&f.sheetRows<=v)return!0}e:for(;C<u.length;++C)switch(w=u.charCodeAt(C)){case 34:S===34&&(k=!k);break;case P:case 10:case 13:if(!k&&b())break e;break}return C-y>0&&b(),m["!ref"]=Yt(g),m}function a(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,d):Nc(e(u,d),d)}function o(u,d){var f="",p=d.type=="string"?[0,0,0,0]:jx(u,d);switch(d.type){case"base64":f=ws(u);break;case"binary":f=u;break;case"buffer":d.codepage==65001?f=u.toString("utf8"):d.codepage&&typeof pd<"u"||(f=zt&&Buffer.isBuffer(u)?u.toString("binary"):ll(u));break;case"array":f=Xo(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?f=xr(f.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?f=xr(f):d.type=="binary"&&typeof pd<"u",f.slice(0,19)=="socialcalc:version:"?UQ.to_sheet(d.type=="string"?f:xr(f),d):a(f,d)}function l(u,d){return uo(o(u,d),d)}function c(u){for(var d=[],f=Br(u["!ref"]),p,m=Array.isArray(u),g=f.s.r;g<=f.e.r;++g){for(var v=[],E=f.s.c;E<=f.e.c;++E){var x=Dt({r:g,c:E});if(p=m?(u[g]||[])[E]:u[x],!p||p.v==null){v.push("          ");continue}for(var y=(p.w||(mi(p),p.w)||"").slice(0,10);y.length<10;)y+=" ";v.push(y+(E===0?" ":""))}d.push(v.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function VQ(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=LQ.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return xd.to_workbook(t,e)}}var Bu=function(){function t(B,W,K){if(B){En(B,B.l||0);for(var ee=K.Enum||z;B.l<B.length;){var me=B.read_shift(2),le=ee[me]||ee[65535],he=B.read_shift(2),Z=B.l+he,Q=le.f&&le.f(B,he,K);if(B.l=Z,W(Q,le,me))return}}}function e(B,W){switch(W.type){case"base64":return r(Js(ws(B)),W);case"binary":return r(Js(B),W);case"buffer":case"array":return r(B,W)}throw"Unsupported type "+W.type}function r(B,W){if(!B)return B;var K=W||{},ee=K.dense?[]:{},me="Sheet1",le="",he=0,Z={},Q=[],ve=[],X={s:{r:0,c:0},e:{r:0,c:0}},q=K.sheetRows||0;if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)K.Enum=z,t(B,function(ne,ae,xe){switch(xe){case 0:K.vers=ne,ne>=4096&&(K.qpro=!0);break;case 6:X=ne;break;case 204:ne&&(le=ne);break;case 222:le=ne;break;case 15:case 51:K.qpro||(ne[1].v=ne[1].v.slice(1));case 13:case 14:case 16:xe==14&&(ne[2]&112)==112&&(ne[2]&15)>1&&(ne[2]&15)<15&&(ne[1].z=K.dateNF||Nt[14],K.cellDates&&(ne[1].t="d",ne[1].v=vp(ne[1].v))),K.qpro&&ne[3]>he&&(ee["!ref"]=Yt(X),Z[me]=ee,Q.push(me),ee=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},he=ne[3],me=le||"Sheet"+(he+1),le="");var Ee=K.dense?(ee[ne[0].r]||[])[ne[0].c]:ee[Dt(ne[0])];if(Ee){Ee.t=ne[1].t,Ee.v=ne[1].v,ne[1].z!=null&&(Ee.z=ne[1].z),ne[1].f!=null&&(Ee.f=ne[1].f);break}K.dense?(ee[ne[0].r]||(ee[ne[0].r]=[]),ee[ne[0].r][ne[0].c]=ne[1]):ee[Dt(ne[0])]=ne[1];break}},K);else if(B[2]==26||B[2]==14)K.Enum=H,B[2]==14&&(K.qpro=!0,B.l=0),t(B,function(ne,ae,xe){switch(xe){case 204:me=ne;break;case 22:ne[1].v=ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ne[3]>he&&(ee["!ref"]=Yt(X),Z[me]=ee,Q.push(me),ee=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},he=ne[3],me="Sheet"+(he+1)),q>0&&ne[0].r>=q)break;K.dense?(ee[ne[0].r]||(ee[ne[0].r]=[]),ee[ne[0].r][ne[0].c]=ne[1]):ee[Dt(ne[0])]=ne[1],X.e.c<ne[0].c&&(X.e.c=ne[0].c),X.e.r<ne[0].r&&(X.e.r=ne[0].r);break;case 27:ne[14e3]&&(ve[ne[14e3][0]]=ne[14e3][1]);break;case 1537:ve[ne[0]]=ne[1],ne[0]==he&&(me=ne[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(ee["!ref"]=Yt(X),Z[le||me]=ee,Q.push(le||me),!ve.length)return{SheetNames:Q,Sheets:Z};for(var Y={},ge=[],re=0;re<ve.length;++re)Z[Q[re]]?(ge.push(ve[re]||Q[re]),Y[ve[re]]=Z[ve[re]]||Z[Q[re]]):(ge.push(ve[re]),Y[ve[re]]={"!ref":"A1"});return{SheetNames:ge,Sheets:Y}}function n(B,W){var K=W||{};if(+K.codepage>=0&&Zs(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=dv(),me=Br(B["!ref"]),le=Array.isArray(B),he=[];zs(ee,0,i(1030)),zs(ee,6,l(me));for(var Z=Math.min(me.e.r,8191),Q=me.s.r;Q<=Z;++Q)for(var ve=In(Q),X=me.s.c;X<=me.e.c;++X){Q===me.s.r&&(he[X]=nn(X));var q=he[X]+ve,Y=le?(B[Q]||[])[X]:B[q];if(!(!Y||Y.t=="z"))if(Y.t=="n")(Y.v|0)==Y.v&&Y.v>=-32768&&Y.v<=32767?zs(ee,13,p(Q,X,Y.v)):zs(ee,14,g(Q,X,Y.v));else{var ge=mi(Y);zs(ee,15,d(Q,X,ge.slice(0,239)))}}return zs(ee,1),ee.end()}function s(B,W){var K=W||{};if(+K.codepage>=0&&Zs(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=dv();zs(ee,0,a(B));for(var me=0,le=0;me<B.SheetNames.length;++me)(B.Sheets[B.SheetNames[me]]||{})["!ref"]&&zs(ee,27,L(B.SheetNames[me],le++));var he=0;for(me=0;me<B.SheetNames.length;++me){var Z=B.Sheets[B.SheetNames[me]];if(!(!Z||!Z["!ref"])){for(var Q=Br(Z["!ref"]),ve=Array.isArray(Z),X=[],q=Math.min(Q.e.r,8191),Y=Q.s.r;Y<=q;++Y)for(var ge=In(Y),re=Q.s.c;re<=Q.e.c;++re){Y===Q.s.r&&(X[re]=nn(re));var ne=X[re]+ge,ae=ve?(Z[Y]||[])[re]:Z[ne];if(!(!ae||ae.t=="z"))if(ae.t=="n")zs(ee,23,b(Y,re,he,ae.v));else{var xe=mi(ae);zs(ee,22,w(Y,re,he,xe.slice(0,239)))}}++he}}return zs(ee,1),ee.end()}function i(B){var W=en(2);return W.write_shift(2,B),W}function a(B){var W=en(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,ee=0,me=0,le=0;le<B.SheetNames.length;++le){var he=B.SheetNames[le],Z=B.Sheets[he];if(!(!Z||!Z["!ref"])){++me;var Q=Oc(Z["!ref"]);K<Q.e.r&&(K=Q.e.r),ee<Q.e.c&&(ee=Q.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,me),W.write_shift(1,ee),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(B,W,K){var ee={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(ee.s.c=B.read_shift(1),B.l++,ee.s.r=B.read_shift(2),ee.e.c=B.read_shift(1),B.l++,ee.e.r=B.read_shift(2),ee):(ee.s.c=B.read_shift(2),ee.s.r=B.read_shift(2),W==12&&K.qpro&&(B.l+=2),ee.e.c=B.read_shift(2),ee.e.r=B.read_shift(2),W==12&&K.qpro&&(B.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function l(B){var W=en(8);return W.write_shift(2,B.s.c),W.write_shift(2,B.s.r),W.write_shift(2,B.e.c),W.write_shift(2,B.e.r),W}function c(B,W,K){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(ee[0].c=B.read_shift(1),ee[3]=B.read_shift(1),ee[0].r=B.read_shift(2),B.l+=2):(ee[2]=B.read_shift(1),ee[0].c=B.read_shift(2),ee[0].r=B.read_shift(2)),ee}function u(B,W,K){var ee=B.l+W,me=c(B,W,K);if(me[1].t="s",K.vers==20768){B.l++;var le=B.read_shift(1);return me[1].v=B.read_shift(le,"utf8"),me}return K.qpro&&B.l++,me[1].v=B.read_shift(ee-B.l,"cstr"),me}function d(B,W,K){var ee=en(7+K.length);ee.write_shift(1,255),ee.write_shift(2,W),ee.write_shift(2,B),ee.write_shift(1,39);for(var me=0;me<ee.length;++me){var le=K.charCodeAt(me);ee.write_shift(1,le>=128?95:le)}return ee.write_shift(1,0),ee}function f(B,W,K){var ee=c(B,W,K);return ee[1].v=B.read_shift(2,"i"),ee}function p(B,W,K){var ee=en(7);return ee.write_shift(1,255),ee.write_shift(2,W),ee.write_shift(2,B),ee.write_shift(2,K,"i"),ee}function m(B,W,K){var ee=c(B,W,K);return ee[1].v=B.read_shift(8,"f"),ee}function g(B,W,K){var ee=en(13);return ee.write_shift(1,255),ee.write_shift(2,W),ee.write_shift(2,B),ee.write_shift(8,K,"f"),ee}function v(B,W,K){var ee=B.l+W,me=c(B,W,K);if(me[1].v=B.read_shift(8,"f"),K.qpro)B.l=ee;else{var le=B.read_shift(2);C(B.slice(B.l,B.l+le),me),B.l+=le}return me}function E(B,W,K){var ee=W&32768;return W&=-32769,W=(ee?B:0)+(W>=8192?W-16384:W),(ee?"":"$")+(K?nn(W):In(W))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(B,W){En(B,0);for(var K=[],ee=0,me="",le="",he="",Z="";B.l<B.length;){var Q=B[B.l++];switch(Q){case 0:K.push(B.read_shift(8,"f"));break;case 1:le=E(W[0].c,B.read_shift(2),!0),me=E(W[0].r,B.read_shift(2),!1),K.push(le+me);break;case 2:{var ve=E(W[0].c,B.read_shift(2),!0),X=E(W[0].r,B.read_shift(2),!1);le=E(W[0].c,B.read_shift(2),!0),me=E(W[0].r,B.read_shift(2),!1),K.push(ve+X+":"+le+me)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(B.read_shift(2));break;case 6:{for(var q="";Q=B[B.l++];)q+=String.fromCharCode(Q);K.push('"'+q.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:Z=K.pop(),he=K.pop(),K.push(["AND","OR"][Q-20]+"("+he+","+Z+")");break;default:if(Q<32&&y[Q])Z=K.pop(),he=K.pop(),K.push(he+y[Q]+Z);else if(x[Q]){if(ee=x[Q][1],ee==69&&(ee=B[B.l++]),ee>K.length){console.error("WK1 bad formula parse 0x"+Q.toString(16)+":|"+K.join("|")+"|");return}var Y=K.slice(-ee);K.length-=ee,K.push(x[Q][0]+"("+Y.join(",")+")")}else return Q<=7?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=24?console.error("WK1 unsupported op "+Q.toString(16)):Q<=30?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=115?console.error("WK1 unsupported function opcode "+Q.toString(16)):console.error("WK1 unrecognized opcode "+Q.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function P(B){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=B.read_shift(2),W[3]=B[B.l++],W[0].c=B[B.l++],W}function k(B,W){var K=P(B);return K[1].t="s",K[1].v=B.read_shift(W-4,"cstr"),K}function w(B,W,K,ee){var me=en(6+ee.length);me.write_shift(2,B),me.write_shift(1,K),me.write_shift(1,W),me.write_shift(1,39);for(var le=0;le<ee.length;++le){var he=ee.charCodeAt(le);me.write_shift(1,he>=128?95:he)}return me.write_shift(1,0),me}function S(B,W){var K=P(B);K[1].v=B.read_shift(2);var ee=K[1].v>>1;if(K[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return K[1].v=ee,K}function _(B,W){var K=P(B),ee=B.read_shift(4),me=B.read_shift(4),le=B.read_shift(2);if(le==65535)return ee===0&&me===3221225472?(K[1].t="e",K[1].v=15):ee===0&&me===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var he=le&32768;return le=(le&32767)-16446,K[1].v=(1-he*2)*(me*Math.pow(2,le+32)+ee*Math.pow(2,le)),K}function b(B,W,K,ee){var me=en(14);if(me.write_shift(2,B),me.write_shift(1,K),me.write_shift(1,W),ee==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var le=0,he=0,Z=0,Q=0;return ee<0&&(le=1,ee=-ee),he=Math.log2(ee)|0,ee/=Math.pow(2,he-31),Q=ee>>>0,Q&2147483648||(ee/=2,++he,Q=ee>>>0),ee-=Q,Q|=2147483648,Q>>>=0,ee*=Math.pow(2,32),Z=ee>>>0,me.write_shift(4,Z),me.write_shift(4,Q),he+=16383+(le?32768:0),me.write_shift(2,he),me}function T(B,W){var K=_(B);return B.l+=W-14,K}function I(B,W){var K=P(B),ee=B.read_shift(4);return K[1].v=ee>>6,K}function D(B,W){var K=P(B),ee=B.read_shift(8,"f");return K[1].v=ee,K}function O(B,W){var K=D(B);return B.l+=W-10,K}function R(B,W){return B[B.l+W-1]==0?B.read_shift(W,"cstr"):""}function F(B,W){var K=B[B.l++];K>W-1&&(K=W-1);for(var ee="";ee.length<K;)ee+=String.fromCharCode(B[B.l++]);return ee}function N(B,W,K){if(!(!K.qpro||W<21)){var ee=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var me=B.read_shift(W-21,"cstr");return[ee,me]}}function V(B,W){for(var K={},ee=B.l+W;B.l<ee;){var me=B.read_shift(2);if(me==14e3){for(K[me]=[0,""],K[me][0]=B.read_shift(2);B[B.l];)K[me][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return K}function L(B,W){var K=en(5+B.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var ee=0;ee<B.length;++ee){var me=B.charCodeAt(ee);K[K.l++]=me>127?95:me}return K[K.l++]=0,K}var z={0:{n:"BOF",f:qr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:R},222:{n:"SHEETNAMELP",f:F},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:O},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:R},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:N},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function $Q(t){var e={},r=t.match(Xn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=bt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=xx[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var jQ=function(){var t=gd("t"),e=gd("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:Jt(a[1])},l=i.match(e);return l&&(o.s=$Q(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),HQ=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),GQ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,WQ=/<(?:\w+:)?r>/,zQ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Nx(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Jt(xr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=xr(t),r&&(n.h=Ax(n.t))):t.match(WQ)&&(n.r=xr(t),n.t=Jt(xr((t.replace(zQ,"").match(GQ)||[]).join("").replace(Xn,""))),r&&(n.h=HQ(jQ(n.r)))),n):{t:""}}var KQ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,qQ=/<(?:\w+:)?(?:si|sstItem)>/g,XQ=/<\/(?:\w+:)?(?:si|sstItem)>/;function YQ(t,e){var r=[],n="";if(!t)return r;var s=t.match(KQ);if(s){n=s[2].replace(qQ,"").split(XQ);for(var i=0;i!=n.length;++i){var a=Nx(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=bt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function QQ(t){return[t.read_shift(4),t.read_shift(4)]}function JQ(t,e){var r=[],n=!1;return xi(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function T4(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function ni(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function ZQ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=ni(t,4),e.U=ni(t,4),e.W=ni(t,4),e}function eJ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function tJ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(eJ(t));return e}function rJ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function nJ(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=ni(t,4),e.U=ni(t,4),e.W=ni(t,4),e}function sJ(t){var e=nJ(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function A4(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function w4(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function aJ(t){var e=ni(t);switch(e.Minor){case 2:return[e.Minor,iJ(t)];case 3:return[e.Minor,oJ()];case 4:return[e.Minor,lJ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function iJ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=A4(t,r),s=w4(t,t.length-t.l);return{t:"Std",h:n,v:s}}function oJ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function lJ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Xn,function(i){var a=bt(i);switch(Ma(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function cJ(t,e){var r={},n=r.EncryptionVersionInfo=ni(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=A4(t,s),e-=s,r.EncryptionVerifier=w4(t,e),r}function uJ(t){var e={},r=e.EncryptionVersionInfo=ni(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function dJ(t){var e=0,r,n=T4(t),s=n.length+1,i,a,o,l,c;for(r=ao(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var C4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],d=0;d!=7;++d)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=T4(a),l=i(o),c=o.length,u=ao(16),d=0;d!=16;++d)u[d]=0;var f,p,m;for((c&1)===1&&(f=l>>8,u[c]=s(t[0],f),--c,f=l&255,p=o[o.length-1],u[c]=s(p,f));c>0;)--c,f=l>>8,u[c]=s(o[c],f),--c,f=l&255,u[c]=s(o[c],f);for(c=15,m=15-o.length;m>0;)f=l>>8,u[c]=s(t[m],f),--c,--m,f=l&255,u[c]=s(o[c],f),--c,--m;return u}}(),fJ=function(t,e,r,n,s){s||(s=e),n||(n=C4(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},hJ=function(t){var e=0,r=C4(t);return function(n){var s=fJ("",n,e,r);return e=s[1],s[0]}};function pJ(t,e,r,n){var s={key:qr(t),verificationBytes:qr(t)};return r.password&&(s.verifier=dJ(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=hJ(r.password)),s}function mJ(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=uJ(t):n.Data=cJ(t,e),n}function gJ(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?mJ(t,e-2,n):pJ(t,r.biff>=8?e:e-2,r,n),n}var vJ=function(){function t(s,i){switch(i.type){case"base64":return e(ws(s),i);case"binary":return e(s,i);case"buffer":return e(zt&&Buffer.isBuffer(s)?s.toString("binary"):ll(s),i);case"array":return e(Xo(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(o)&&(o[d]=[]);for(var f=/\\\w+\b/g,p=0,m,g=-1;m=f.exec(u);){switch(m[0]){case"\\cell":var v=u.slice(p,f.lastIndex-m[0].length);if(v[0]==" "&&(v=v.slice(1)),++g,v.length){var E={v,t:"s"};Array.isArray(o)?o[d][g]=E:o[Dt({r:d,c:g})]=E}break}p=f.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=Yt(c),o}function r(s,i){return uo(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Br(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var d=Dt({r:c,c:u});o=l?(s[c]||[])[u]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(mi(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function xJ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function yd(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function yJ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function EJ(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function ih(t,e){if(e===0)return t;var r=yJ(xJ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),yd(EJ(r))}var I4=6,_J=15,bJ=1,ns=I4;function oh(t){return Math.floor((t+Math.round(128/ns)/256)*ns)}function lh(t){return Math.floor((t-5)/ns*100+.5)/100}function mv(t){return Math.round((t*ns+5)/ns*256)/256}function Km(t){return mv(lh(oh(t)))}function Mx(t){var e=Math.abs(t-Km(t)),r=ns;if(e>.005)for(ns=bJ;ns<_J;++ns)Math.abs(t-Km(t))<=e&&(e=Math.abs(t-Km(t)),r=ns);ns=r}function Ec(t){t.width?(t.wpx=oh(t.width),t.wch=lh(t.wpx),t.MDW=ns):t.wpx?(t.wch=lh(t.wpx),t.width=mv(t.wch),t.MDW=ns):typeof t.wch=="number"&&(t.width=mv(t.wch),t.wpx=oh(t.width),t.MDW=ns),t.customWidth&&delete t.customWidth}var SJ=96,k4=SJ;function D4(t){return t*96/k4}function Ed(t){return t*k4/96}var TJ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function AJ(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Xn)||[]).forEach(function(a){var o=bt(a);switch(Ma(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ar(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ar(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function wJ(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Xn)||[]).forEach(function(a){var o=bt(a);switch(Ma(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function CJ(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Xn)||[]).forEach(function(a){var o=bt(a);switch(Ma(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=xr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ar(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ar(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ar(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ar(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ar(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ar(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ar(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=xx[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ar(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Mo[s.color.index];s.color.index==81&&(l=Mo[1]),l||(l=Mo[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=ih(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function IJ(t,e,r){e.NumberFmt=[];for(var n=Pa(Nt),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Nt[n[s]];var i=t[0].match(Xn);if(i)for(s=0;s<i.length;++s){var a=bt(i[s]);switch(Ma(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Jt(xr(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}No(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var Bf=["numFmtId","fillId","fontId","borderId","xfId"],Uf=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function kJ(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Xn)||[]).forEach(function(i){var a=bt(i),o=0;switch(Ma(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<Bf.length;++o)n[Bf[o]]&&(n[Bf[o]]=parseInt(n[Bf[o]],10));for(o=0;o<Uf.length;++o)n[Uf[o]]&&(n[Uf[o]]=Ar(n[Uf[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Ar(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var DJ=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&IJ(d,u,c),(d=o.match(s))&&CJ(d,u,l,c),(d=o.match(n))&&wJ(d,u,l,c),(d=o.match(i))&&AJ(d,u,l,c),(d=o.match(r))&&kJ(d,u,c),u}}();function PJ(t,e){var r=t.read_shift(2),n=zn(t);return[r,n]}function FJ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=jX(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=$X(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=zn(t),n}var RJ=qn;function OJ(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var NJ=qn;function MJ(t,e,r){var n={};n.NumberFmt=[];for(var s in Nt)n.NumberFmt[s]=Nt[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return xi(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],No(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=ih(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var LJ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function BJ(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Xn)||[]).forEach(function(s){var i=bt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[LJ.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function UJ(){}function VJ(){}var $J=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,jJ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,HJ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function GJ(t,e,r){e.themeElements={};var n;[["clrScheme",$J,BJ],["fontScheme",jJ,UJ],["fmtScheme",HJ,VJ]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var WJ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function P4(t,e){(!t||t.length===0)&&(t=zJ());var r,n={};if(!(r=t.match(WJ)))throw new Error("themeElements not found in theme");return GJ(r[0],n,e),n.raw=t,n}function zJ(t,e){var r=[jI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function KJ(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=$I(i,{type:"array"})}catch{return}var o=_s(a,"theme/theme/theme1.xml",!0);if(o)return P4(o,r)}}function qJ(t){return t.read_shift(4)}function XJ(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=YJ(t,4);break;case 2:e.xclrValue=v4(t);break;case 3:e.xclrValue=qJ(t);break;case 4:t.l+=4;break}return t.l+=8,e}function YJ(t,e){return qn(t,e)}function QJ(t,e){return qn(t,e)}function JJ(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=XJ(t);break;case 6:n[1]=QJ(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function ZJ(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(JJ(t,r-t.l));return{ixfe:n,ext:i}}function eZ(t,e){e.forEach(function(r){switch(r[0]){}})}function tZ(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:zn(t)}}function rZ(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function nZ(t){return t.l+=4,t.read_shift(4)!=0}function sZ(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return xi(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function aZ(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Xn,function(o){var l=bt(o);switch(Ma(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function iZ(t){var e=[];if(!t)return e;var r=1;return(t.match(Xn)||[]).forEach(function(n){var s=bt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function oZ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Dt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function lZ(t,e,r){var n=[];return xi(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function cZ(t,e,r,n){if(!t)return t;var s=n||{},i=!1;xi(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function uZ(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function F2(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=ss(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Br(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Yt(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(u.a==n[d].id){u.a=n[d].name||u.a;break}}i.c.push(u)})}function dZ(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=bt(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=ss(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var d=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!d&&!!d[1]&&Nx(d[1])||{r:"",t:"",h:""};c.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),c.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=f.h),n.push(c)}}}}),n}function fZ(t,e){var r=[],n=!1,s={},i=0;return t.replace(Xn,function(o,l){var c=bt(o);switch(Ma(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function hZ(t,e){var r=[],n=!1;return t.replace(Xn,function(i){var a=bt(i);switch(Ma(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function pZ(t){var e={};e.iauthor=t.read_shift(4);var r=ul(t);return e.rfx=r.s,e.ref=Dt(r.s),t.l+=16,e}var mZ=zn;function gZ(t,e){var r=[],n=[],s={},i=!1;return xi(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var vZ="application/vnd.ms-office.vbaProject";function xZ(t){var e=Xt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Xt.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Xt.write(e)}function yZ(){return{"!type":"dialog"}}function EZ(){return{"!type":"dialog"}}function _Z(){return{"!type":"macro"}}function bZ(){return{"!type":"macro"}}var rc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+nn(u)+(l?"":"$")+In(c)}return function(s,i){return e=i,s.replace(t,r)}}(),F4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,SZ=function(){return function(e,r){return e.replace(F4,function(n,s,i,a,o,l){var c=kx(a)-(i?0:r.c),u=Ix(l)-(o?0:r.r),d=u==0?"":o?u+1:"["+u+"]",f=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+f})}}();function R4(t,e){return t.replace(F4,function(r,n,s,i,a,o){return n+(s=="$"?s+i:nn(kx(i)+e.c))+(a=="$"?a+o:In(Ix(o)+e.r))})}function TZ(t,e,r){var n=Oc(e),s=n.s,i=ss(r),a={r:i.r-s.r,c:i.c-s.c};return R4(t,a)}function AZ(t){return t.length!=1}function R2(t){return t.replace(/_xlfn\./g,"")}function Gr(t){t.l+=1}function io(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function O4(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return N4(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=io(t),o=io(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function N4(t){var e=io(t),r=io(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function wZ(t,e,r){if(r.biff<8)return N4(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=io(t),a=io(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function M4(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return CZ(t);var n=t.read_shift(r&&r.biff==12?4:2),s=io(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function CZ(t){var e=io(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function IZ(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function kZ(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return DZ(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function DZ(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function PZ(t,e,r){var n=(t[t.l++]&96)>>5,s=O4(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function FZ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=O4(t,i,r);return[n,s,a]}function RZ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function OZ(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function NZ(t,e,r){var n=(t[t.l++]&96)>>5,s=wZ(t,e-1,r);return[n,s]}function MZ(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function O2(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function LZ(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function BZ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function UZ(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function VZ(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function $Z(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function L4(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function jZ(t){return t.read_shift(2),L4(t)}function HZ(t){return t.read_shift(2),L4(t)}function GZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=M4(t,0,r);return[n,s]}function WZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=kZ(t,0,r);return[n,s]}function zZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=M4(t,0,r);return[n,s,i]}function KZ(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[qee[s],V4[s],n]}function qZ(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:XZ(t);return[s,(i[0]===0?V4:Kee)[i[1]]]}function XZ(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function YZ(t,e,r){t.l+=r&&r.biff==2?3:4}function QZ(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function JZ(t){return t.l++,dl[t.read_shift(1)]}function ZZ(t){return t.l++,t.read_shift(2)}function eee(t){return t.l++,t.read_shift(1)!==0}function tee(t){return t.l++,Vn(t)}function ree(t,e,r){return t.l++,qd(t,e-1,r)}function nee(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Vr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=dl[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Vn(t);break;case 2:r[1]=fl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function see(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?ul:xp)(t));return s}function aee(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=nee(t,r.biff);return a}function iee(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function oee(t,e,r){if(r.biff==5)return lee(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function lee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function cee(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function uee(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function dee(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function fee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var hee=qn,pee=qn,mee=qn;function Yd(t,e,r){return t.l+=2,[IZ(t)]}function Lx(t){return t.l+=6,[]}var gee=Yd,vee=Lx,xee=Lx,yee=Yd;function B4(t){return t.l+=2,[qr(t),t.read_shift(2)&1]}var Eee=Yd,_ee=B4,bee=Lx,See=Yd,Tee=Yd,Aee=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function wee(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=Aee[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function Cee(t){return t.l+=2,[t.read_shift(4)]}function Iee(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function kee(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Dee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Pee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Fee(t){return t.l+=4,[0,0]}var N2={1:{n:"PtgExp",f:QZ},2:{n:"PtgTbl",f:mee},3:{n:"PtgAdd",f:Gr},4:{n:"PtgSub",f:Gr},5:{n:"PtgMul",f:Gr},6:{n:"PtgDiv",f:Gr},7:{n:"PtgPower",f:Gr},8:{n:"PtgConcat",f:Gr},9:{n:"PtgLt",f:Gr},10:{n:"PtgLe",f:Gr},11:{n:"PtgEq",f:Gr},12:{n:"PtgGe",f:Gr},13:{n:"PtgGt",f:Gr},14:{n:"PtgNe",f:Gr},15:{n:"PtgIsect",f:Gr},16:{n:"PtgUnion",f:Gr},17:{n:"PtgRange",f:Gr},18:{n:"PtgUplus",f:Gr},19:{n:"PtgUminus",f:Gr},20:{n:"PtgPercent",f:Gr},21:{n:"PtgParen",f:Gr},22:{n:"PtgMissArg",f:Gr},23:{n:"PtgStr",f:ree},26:{n:"PtgSheet",f:Iee},27:{n:"PtgEndSheet",f:kee},28:{n:"PtgErr",f:JZ},29:{n:"PtgBool",f:eee},30:{n:"PtgInt",f:ZZ},31:{n:"PtgNum",f:tee},32:{n:"PtgArray",f:MZ},33:{n:"PtgFunc",f:KZ},34:{n:"PtgFuncVar",f:qZ},35:{n:"PtgName",f:iee},36:{n:"PtgRef",f:GZ},37:{n:"PtgArea",f:PZ},38:{n:"PtgMemArea",f:cee},39:{n:"PtgMemErr",f:hee},40:{n:"PtgMemNoMem",f:pee},41:{n:"PtgMemFunc",f:uee},42:{n:"PtgRefErr",f:dee},43:{n:"PtgAreaErr",f:RZ},44:{n:"PtgRefN",f:WZ},45:{n:"PtgAreaN",f:NZ},46:{n:"PtgMemAreaN",f:Dee},47:{n:"PtgMemNoMemN",f:Pee},57:{n:"PtgNameX",f:oee},58:{n:"PtgRef3d",f:zZ},59:{n:"PtgArea3d",f:FZ},60:{n:"PtgRefErr3d",f:fee},61:{n:"PtgAreaErr3d",f:OZ},255:{}},Ree={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Oee={1:{n:"PtgElfLel",f:B4},2:{n:"PtgElfRw",f:See},3:{n:"PtgElfCol",f:gee},6:{n:"PtgElfRwV",f:Tee},7:{n:"PtgElfColV",f:yee},10:{n:"PtgElfRadical",f:Eee},11:{n:"PtgElfRadicalS",f:bee},13:{n:"PtgElfColS",f:vee},15:{n:"PtgElfColSV",f:xee},16:{n:"PtgElfRadicalLel",f:_ee},25:{n:"PtgList",f:wee},29:{n:"PtgSxName",f:Cee},255:{}},Nee={0:{n:"PtgAttrNoop",f:Fee},1:{n:"PtgAttrSemi",f:$Z},2:{n:"PtgAttrIf",f:UZ},4:{n:"PtgAttrChoose",f:LZ},8:{n:"PtgAttrGoto",f:BZ},16:{n:"PtgAttrSum",f:YZ},32:{n:"PtgAttrBaxcel",f:O2},33:{n:"PtgAttrBaxcel",f:O2},64:{n:"PtgAttrSpace",f:jZ},65:{n:"PtgAttrSpaceSemi",f:HZ},128:{n:"PtgAttrIfError",f:VZ},255:{}};function Qd(t,e,r,n){if(n.biff<8)return qn(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=aee(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=see(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(qn(t,e)),i}function Jd(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=N2[i]||N2[Ree[i]],(i===24||i===25)&&(s=(i===24?Oee:Nee)[t[t.l+1]]),!s||!s.f?qn(t,e):a.push([s.n,s.f(t,e,r)]);return a}function Mee(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Lee={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Bee(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function U4(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function M2(t,e,r){var n=U4(t,e,r);return n=="#REF"?n:Bee(n,r)}function Ln(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,d=0,f=0,p,m="";if(!t[0]||!t[0][0])return"";for(var g=-1,v="",E=0,x=t[0].length;E<x;++E){var y=t[0][E];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(t[0][g][1][0]){case 0:v=Mr(" ",t[0][g][1][1]);break;case 1:v=Mr("\r",t[0][g][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}c=c+v,g=-1}o.push(c+Lee[y[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Ou(y[1][1],a,s),o.push(Nu(u,i));break;case"PtgRefN":u=r?Ou(y[1][1],r,s):y[1][1],o.push(Nu(u,i));break;case"PtgRef3d":d=y[1][1],u=Ou(y[1][2],a,s),m=M2(n,d,s),o.push(m+"!"+Nu(u,i));break;case"PtgFunc":case"PtgFuncVar":var C=y[1][0],P=y[1][1];C||(C=0),C&=127;var k=C==0?[]:o.slice(-C);o.length-=C,P==="User"&&(P=k.shift()),o.push(P+"("+k.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":p=g2(y[1][1],r?{s:r}:a,s),o.push(Wm(p,s));break;case"PtgArea":p=g2(y[1][1],a,s),o.push(Wm(p,s));break;case"PtgArea3d":d=y[1][1],p=y[1][2],m=M2(n,d,s),o.push(m+"!"+Wm(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=y[1][2];var w=(n.names||[])[f-1]||(n[0]||[])[f],S=w?w.Name:"SH33TJSNAME"+String(f);S&&S.slice(0,6)=="_xlfn."&&!s.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var _=y[1][1];f=y[1][2];var b;if(s.biff<=5)_<0&&(_=-_),n[_]&&(b=n[_][f]);else{var T="";if(((n[_]||[])[0]||[])[0]==14849||(((n[_]||[])[0]||[])[0]==1025?n[_][f]&&n[_][f].itab>0&&(T=n.SheetNames[n[_][f].itab-1]+"!"):T=n.SheetNames[f-1]+"!"),n[_]&&n[_][f])T+=n[_][f].Name;else if(n[0]&&n[0][f])T+=n[0][f].Name;else{var I=(U4(n,_,s)||"").split(";;");I[f-1]?T=I[f-1]:T+="SH33TJSERRX"}o.push(T);break}b||(b={Name:"SH33TJSERRY"}),o.push(b.Name);break;case"PtgParen":var D="(",O=")";if(g>=0){switch(v="",t[0][g][1][0]){case 2:D=Mr(" ",t[0][g][1][1])+D;break;case 3:D=Mr("\r",t[0][g][1][1])+D;break;case 4:O=Mr(" ",t[0][g][1][1])+O;break;case 5:O=Mr("\r",t[0][g][1][1])+O;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}o.push(D+o.pop()+O);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:y[1][1],r:y[1][0]};var R={c:r.c,r:r.r};if(n.sharedf[Dt(u)]){var F=n.sharedf[Dt(u)];o.push(Ln(F,a,R,n,s))}else{var N=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Ln(c[1],a,R,n,s)),N=!0;break}N||o.push(y[1])}break;case"PtgArray":o.push("{"+Mee(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=E;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&V.indexOf(t[0][E][0])==-1){y=t[0][g];var L=!0;switch(y[1][0]){case 4:L=!1;case 0:v=Mr(" ",y[1][1]);break;case 5:L=!1;case 1:v=Mr("\r",y[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((L?v:"")+o.pop()+(L?"":v)),g=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Uee(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],qn(t,e-2)];var o=Jd(t,a,r);return e!==a+s&&(i=Qd(t,e-a-s,o,r)),t.l=n,[o,i]}function Vee(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],qn(t,e-2)];var o=Jd(t,a,r);return e!==a+s&&(i=Qd(t,e-a-s,o,r)),t.l=n,[o,i]}function $ee(t,e,r,n){var s=t.l+e,i=Jd(t,n,r),a;return s!==t.l&&(a=Qd(t,s-t.l,i,r)),[i,a]}function jee(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=Jd(t,i,r);return i==65535?[[],qn(t,e-2)]:(e!==i+2&&(s=Qd(t,n-i-2,a,r)),[a,s])}function Hee(t){var e;if(Za(t,t.l+6)!==65535)return[Vn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function qm(t,e,r){var n=t.l+e,s=La(t);r.biff==2&&++t.l;var i=Hee(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=Vee(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function yp(t,e,r){var n=t.read_shift(4),s=Jd(t,n,r),i=t.read_shift(4),a=i>0?Qd(t,i,s,r):null;return[s,a]}var Gee=yp,Ep=yp,Wee=yp,zee=yp,Kee={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},V4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qee={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function L2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Xm(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var Uu={},nc={};function Vu(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function $4(t,e,r,n,s,i){try{n.cellNF&&(t.z=Nt[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=dn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Nt[e]==null&&No(Xq[e]||"General",e),t.t==="e")t.w=t.w||dl[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=md(t.v);else if(t.t==="d"){var a=os(t.v);(a|0)===a?t.w=a.toString(10):t.w=md(a)}else{if(t.v===void 0)return"";t.w=qo(t.v,nc)}else t.t==="d"?t.w=Bs(e,os(t.v),nc):t.w=Bs(e,t.v,nc)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=ih(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=ih(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function Xee(t,e){var r=Br(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Yt(r))}var Yee=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Qee=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Jee=/<(?:\w:)?hyperlink [^>]*>/mg,Zee=/"(\w*:\w*)"/,ete=/<(?:\w:)?col\b[^>]*[\/]?>/g,tte=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,rte=/<(?:\w:)?pageMargins[^>]*\/>/g,j4=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,nte=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ste=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function ate(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",d=t.match(Qee);d?(c=t.slice(0,d.index),u=t.slice(d.index+d[0].length)):c=u=t;var f=c.match(j4);f?Bx(f[0],o,s,r):(f=c.match(nte))&&ite(f[0],f[1]||"",o,s,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var m=c.slice(p,p+50).match(Zee);m&&Xee(o,m[1])}var g=c.match(ste);g&&g[1]&&fte(g[1],s);var v=[];if(e.cellStyles){var E=c.match(ete);E&&cte(v,E)}d&&hte(d[1],o,e,l,i,a);var x=u.match(tte);x&&(o["!autofilter"]=ute(x[0]));var y=[],C=u.match(Yee);if(C)for(p=0;p!=C.length;++p)y[p]=Br(C[p].slice(C[p].indexOf('"')+1));var P=u.match(Jee);P&&ote(o,P,n);var k=u.match(rte);if(k&&(o["!margins"]=lte(bt(k[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Yt(l)),e.sheetRows>0&&o["!ref"]){var w=Br(o["!ref"]);e.sheetRows<=+w.e.r&&(w.e.r=e.sheetRows-1,w.e.r>l.e.r&&(w.e.r=l.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>l.e.c&&(w.e.c=l.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Yt(w))}return v.length>0&&(o["!cols"]=v),y.length>0&&(o["!merges"]=y),o}function Bx(t,e,r,n){var s=bt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Jt(xr(s.codeName)))}function ite(t,e,r,n,s){Bx(t.slice(0,t.indexOf(">")),r,n,s)}function ote(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=bt(xr(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+Jt(i.location))):(i.Target="#"+Jt(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Br(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Dt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function lte(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function cte(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=bt(e[n],!0);s.hidden&&(s.hidden=Ar(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Mx(s.width)),Ec(s);i<=a;)t[i++]=Cn(s)}}function ute(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var dte=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function fte(t,e){e.Views||(e.Views=[{}]),(t.match(dte)||[]).forEach(function(r,n){var s=bt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Ar(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var hte=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=gd("v"),a=gd("f");return function(l,c,u,d,f,p){for(var m=0,g="",v=[],E=[],x=0,y=0,C=0,P="",k,w,S=0,_=0,b,T,I=0,D=0,O=Array.isArray(p.CellXf),R,F=[],N=[],V=Array.isArray(c),L=[],z={},H=!1,B=!!u.sheetStubs,W=l.split(e),K=0,ee=W.length;K!=ee;++K){g=W[K].trim();var me=g.length;if(me!==0){var le=0;e:for(m=0;m<me;++m)switch(g[m]){case">":if(g[m-1]!="/"){++m;break e}if(u&&u.cellStyles){if(w=bt(g.slice(le,m),!0),S=w.r!=null?parseInt(w.r,10):S+1,_=-1,u.sheetRows&&u.sheetRows<S)continue;z={},H=!1,w.ht&&(H=!0,z.hpt=parseFloat(w.ht),z.hpx=Ed(z.hpt)),w.hidden=="1"&&(H=!0,z.hidden=!0),w.outlineLevel!=null&&(H=!0,z.level=+w.outlineLevel),H&&(L[S-1]=z)}break;case"<":le=m;break}if(le>=m)break;if(w=bt(g.slice(le,m),!0),S=w.r!=null?parseInt(w.r,10):S+1,_=-1,!(u.sheetRows&&u.sheetRows<S)){d.s.r>S-1&&(d.s.r=S-1),d.e.r<S-1&&(d.e.r=S-1),u&&u.cellStyles&&(z={},H=!1,w.ht&&(H=!0,z.hpt=parseFloat(w.ht),z.hpx=Ed(z.hpt)),w.hidden=="1"&&(H=!0,z.hidden=!0),w.outlineLevel!=null&&(H=!0,z.level=+w.outlineLevel),H&&(L[S-1]=z)),v=g.slice(m).split(t);for(var he=0;he!=v.length&&v[he].trim().charAt(0)=="<";++he);for(v=v.slice(he),m=0;m!=v.length;++m)if(g=v[m].trim(),g.length!==0){if(E=g.match(r),x=m,y=0,C=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,E!=null&&E.length===2){for(x=0,P=E[1],y=0;y!=P.length&&!((C=P.charCodeAt(y)-64)<1||C>26);++y)x=26*x+C;--x,_=x}else++_;for(y=0;y!=g.length&&g.charCodeAt(y)!==62;++y);if(++y,w=bt(g.slice(0,y),!0),w.r||(w.r=Dt({r:S-1,c:_})),P=g.slice(y),k={t:""},(E=P.match(i))!=null&&E[1]!==""&&(k.v=Jt(E[1])),u.cellFormula){if((E=P.match(a))!=null&&E[1]!==""){if(k.f=Jt(xr(E[1])).replace(/\r\n/g,`
`),u.xlfn||(k.f=R2(k.f)),E[0].indexOf('t="array"')>-1)k.F=(P.match(s)||[])[1],k.F.indexOf(":")>-1&&F.push([Br(k.F),k.F]);else if(E[0].indexOf('t="shared"')>-1){T=bt(E[0]);var Z=Jt(xr(E[1]));u.xlfn||(Z=R2(Z)),N[parseInt(T.si,10)]=[T,Z,w.r]}}else(E=P.match(/<f[^>]*\/>/))&&(T=bt(E[0]),N[T.si]&&(k.f=TZ(N[T.si][1],N[T.si][2],w.r)));var Q=ss(w.r);for(y=0;y<F.length;++y)Q.r>=F[y][0].s.r&&Q.r<=F[y][0].e.r&&Q.c>=F[y][0].s.c&&Q.c<=F[y][0].e.c&&(k.F=F[y][1])}if(w.t==null&&k.v===void 0)if(k.f||k.F)k.v=0,k.t="n";else if(B)k.t="z";else continue;else k.t=w.t||"n";switch(d.s.c>_&&(d.s.c=_),d.e.c<_&&(d.e.c=_),k.t){case"n":if(k.v==""||k.v==null){if(!B)continue;k.t="z"}else k.v=parseFloat(k.v);break;case"s":if(typeof k.v>"u"){if(!B)continue;k.t="z"}else b=Uu[parseInt(k.v,10)],k.v=b.t,k.r=b.r,u.cellHTML&&(k.h=b.h);break;case"str":k.t="s",k.v=k.v!=null?xr(k.v):"",u.cellHTML&&(k.h=Ax(k.v));break;case"inlineStr":E=P.match(n),k.t="s",E!=null&&(b=Nx(E[1]))?(k.v=b.t,u.cellHTML&&(k.h=b.h)):k.v="";break;case"b":k.v=Ar(k.v);break;case"d":u.cellDates?k.v=dn(k.v,1):(k.v=os(dn(k.v,1)),k.t="n");break;case"e":(!u||u.cellText!==!1)&&(k.w=k.v),k.v=c4[k.v];break}if(I=D=0,R=null,O&&w.s!==void 0&&(R=p.CellXf[w.s],R!=null&&(R.numFmtId!=null&&(I=R.numFmtId),u.cellStyles&&R.fillId!=null&&(D=R.fillId))),$4(k,I,D,u,f,p),u.cellDates&&O&&k.t=="n"&&Rc(Nt[I])&&(k.t="d",k.v=vp(k.v)),w.cm&&u.xlmeta){var ve=(u.xlmeta.Cell||[])[+w.cm-1];ve&&ve.type=="XLDAPR"&&(k.D=!0)}if(V){var X=ss(w.r);c[X.r]||(c[X.r]=[]),c[X.r][X.c]=k}else c[w.r]=k}}}}L.length>0&&(c["!rows"]=L)}}();function pte(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var mte=ul;function gte(){}function vte(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=UX(t),r}function xte(t){var e=$s(t);return[e]}function yte(t){var e=cl(t);return[e]}function Ete(t){var e=$s(t),r=t.read_shift(1);return[e,r,"b"]}function _te(t){var e=cl(t),r=t.read_shift(1);return[e,r,"b"]}function bte(t){var e=$s(t),r=t.read_shift(1);return[e,r,"e"]}function Ste(t){var e=cl(t),r=t.read_shift(1);return[e,r,"e"]}function Tte(t){var e=$s(t),r=t.read_shift(4);return[e,r,"s"]}function Ate(t){var e=cl(t),r=t.read_shift(4);return[e,r,"s"]}function wte(t){var e=$s(t),r=Vn(t);return[e,r,"n"]}function H4(t){var e=cl(t),r=Vn(t);return[e,r,"n"]}function Cte(t){var e=$s(t),r=Fx(t);return[e,r,"n"]}function Ite(t){var e=cl(t),r=Fx(t);return[e,r,"n"]}function kte(t){var e=$s(t),r=Dx(t);return[e,r,"is"]}function Dte(t){var e=$s(t),r=zn(t);return[e,r,"str"]}function Pte(t){var e=cl(t),r=zn(t);return[e,r,"str"]}function Fte(t,e,r){var n=t.l+e,s=$s(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=Ep(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}function Rte(t,e,r){var n=t.l+e,s=$s(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=Ep(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}function Ote(t,e,r){var n=t.l+e,s=$s(t);s.r=r["!row"];var i=Vn(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=Ep(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}function Nte(t,e,r){var n=t.l+e,s=$s(t);s.r=r["!row"];var i=zn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=Ep(t,n-t.l,r);a[3]=Ln(o,null,s,r.supbooks,r)}else t.l=n;return a}var Mte=ul;function Lte(t,e){var r=t.l+e,n=ul(t),s=Px(t),i=zn(t),a=zn(t),o=zn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function Bte(){}function Ute(t,e,r){var n=t.l+e,s=i4(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=Gee(t,n-t.l,r);a[1]=o}else t.l=n;return a}function Vte(t,e,r){var n=t.l+e,s=ul(t),i=[s];if(r.cellFormula){var a=zee(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var $te=["left","right","top","bottom","header","footer"];function jte(t){var e={};return $te.forEach(function(r){e[r]=Vn(t)}),e}function Hte(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Gte(){}function Wte(){}function zte(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,f=!1,p,m,g,v,E,x,y,C,P,k=[];o.biff=12,o["!row"]=0;var w=0,S=!1,_=[],b={},T=o.supbooks||s.supbooks||[[]];if(T.sharedf=b,T.arrayf=_,T.SheetNames=s.SheetNames||s.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=T,s.Names))for(var I=0;I<s.Names.length;++I)T[0][I+1]=s.Names[I];var D=[],O=[],R=!1;ch[16]={n:"BrtShortReal",f:H4};var F;if(xi(t,function(L,z,H){if(!f)switch(H){case 148:c=L;break;case 0:p=L,o.sheetRows&&o.sheetRows<=p.r&&(f=!0),C=In(v=p.r),o["!row"]=p.r,(L.hidden||L.hpt||L.level!=null)&&(L.hpt&&(L.hpx=Ed(L.hpt)),O[L.r]=L);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:L[2]},L[2]){case"n":m.v=L[1];break;case"s":y=Uu[L[1]],m.v=y.t,m.r=y.r;break;case"b":m.v=!!L[1];break;case"e":m.v=L[1],o.cellText!==!1&&(m.w=dl[m.v]);break;case"str":m.t="s",m.v=L[1];break;case"is":m.t="s",m.v=L[1].t;break}if((g=a.CellXf[L[0].iStyleRef])&&$4(m,g.numFmtId,null,o,i,a),E=L[0].c==-1?E+1:L[0].c,o.dense?(l[v]||(l[v]=[]),l[v][E]=m):l[nn(E)+C]=m,o.cellFormula){for(S=!1,w=0;w<_.length;++w){var B=_[w];p.r>=B[0].s.r&&p.r<=B[0].e.r&&E>=B[0].s.c&&E<=B[0].e.c&&(m.F=Yt(B[0]),S=!0)}!S&&L.length>3&&(m.f=L[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>E&&(u.s.c=E),u.e.r<p.r&&(u.e.r=p.r),u.e.c<E&&(u.e.c=E),o.cellDates&&g&&m.t=="n"&&Rc(Nt[g.numFmtId])){var W=Co(m.v);W&&(m.t="d",m.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}F&&(F.type=="XLDAPR"&&(m.D=!0),F=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;m={t:"z",v:void 0},E=L[0].c==-1?E+1:L[0].c,o.dense?(l[v]||(l[v]=[]),l[v][E]=m):l[nn(E)+C]=m,u.s.r>p.r&&(u.s.r=p.r),u.s.c>E&&(u.s.c=E),u.e.r<p.r&&(u.e.r=p.r),u.e.c<E&&(u.e.c=E),F&&(F.type=="XLDAPR"&&(m.D=!0),F=void 0);break;case 176:k.push(L);break;case 49:F=((o.xlmeta||{}).Cell||[])[L-1];break;case 494:var K=n["!id"][L.relId];for(K?(L.Target=K.Target,L.loc&&(L.Target+="#"+L.loc),L.Rel=K):L.relId==""&&(L.Target="#"+L.loc),v=L.rfx.s.r;v<=L.rfx.e.r;++v)for(E=L.rfx.s.c;E<=L.rfx.e.c;++E)o.dense?(l[v]||(l[v]=[]),l[v][E]||(l[v][E]={t:"z",v:void 0}),l[v][E].l=L):(x=Dt({c:E,r:v}),l[x]||(l[x]={t:"z",v:void 0}),l[x].l=L);break;case 426:if(!o.cellFormula)break;_.push(L),P=o.dense?l[v][E]:l[nn(E)+C],P.f=Ln(L[1],u,{r:p.r,c:E},T,o),P.F=Yt(L[0]);break;case 427:if(!o.cellFormula)break;b[Dt(L[0].s)]=L[1],P=o.dense?l[v][E]:l[nn(E)+C],P.f=Ln(L[1],u,{r:p.r,c:E},T,o);break;case 60:if(!o.cellStyles)break;for(;L.e>=L.s;)D[L.e--]={width:L.w/256,hidden:!!(L.flags&1),level:L.level},R||(R=!0,Mx(L.w/256)),Ec(D[L.e+1]);break;case 161:l["!autofilter"]={ref:Yt(L)};break;case 476:l["!margins"]=L;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),L.name&&(s.Sheets[r].CodeName=L.name),(L.above||L.left)&&(l["!outline"]={above:L.above,left:L.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),L.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!z.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Yt(c||u)),o.sheetRows&&l["!ref"]){var N=Br(l["!ref"]);o.sheetRows<=+N.e.r&&(N.e.r=o.sheetRows-1,N.e.r>u.e.r&&(N.e.r=u.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>u.e.c&&(N.e.c=u.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Yt(N))}return k.length>0&&(l["!merges"]=k),D.length>0&&(l["!cols"]=D),O.length>0&&(l["!rows"]=O),l}function Kte(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=Jt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function qte(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var f=Kte(d);u.s.r=u.s.c=0,u.e.c=o,c=nn(o),f[0].forEach(function(p,m){a[c+In(m)]={t:"n",v:p,z:f[1]},l=m}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=Yt(u)),a}function Xte(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(j4);return o&&Bx(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Yte(t,e){t.l+=10;var r=zn(t);return{name:r}}function Qte(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return xi(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var G4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Jte=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Zte=[],ere=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function B2(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ar(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function U2(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ar(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function W4(t){U2(t.WBProps,G4),U2(t.CalcPr,ere),B2(t.WBView,Jte),B2(t.Sheets,Zte),nc.date1904=Ar(t.WBProps.date1904)}var tre="][*?/\\".split("");function rre(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return tre.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var nre=/<\w+:workbook/;function sre(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Xn,function(l,c){var u=bt(l);switch(Ma(u[0])){case"<?xml":break;case"<workbook":l.match(nre)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":G4.forEach(function(d){if(u[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=Ar(u[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(u[d[0]],10);break;default:r.WBProps[d[0]]=u[d[0]]}}),u.codeName&&(r.WBProps.CodeName=xr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Jt(xr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=xr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Ar(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=Jt(xr(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),bX.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return W4(r),r}function are(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=fv(t),r.name=zn(t),r}function ire(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?zn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ore(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function lre(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=VX(t),a=Wee(t,0,r),o=Px(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function cre(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],ch[16]={n:"BrtFRTArchID$",f:ore},xi(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Ln(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),W4(r),r.Names=i,r.supbooks=a,r}function ure(t,e,r){return e.slice(-4)===".bin"?cre(t,r):sre(t,r)}function dre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?zte(t,n,r,s,i,a,o):ate(t,n,r,s,i,a,o)}function fre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Qte(t,n,r,s,i):Xte(t,n,r,s,i)}function hre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?_Z():bZ()}function pre(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?yZ():EZ()}function mre(t,e,r,n){return e.slice(-4)===".bin"?MJ(t,r,n):DJ(t,r,n)}function gre(t,e,r){return P4(t,r)}function vre(t,e,r){return e.slice(-4)===".bin"?JQ(t,r):YQ(t,r)}function xre(t,e,r){return e.slice(-4)===".bin"?gZ(t,r):dZ(t,r)}function yre(t,e,r){return e.slice(-4)===".bin"?lZ(t):iZ(t)}function Ere(t,e,r,n){return r.slice(-4)===".bin"?cZ(t,e,r,n):void 0}function _re(t,e,r){return e.slice(-4)===".bin"?sZ(t,e,r):aZ(t,e,r)}var z4=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,K4=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ws(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(z4),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(K4),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function bre(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(z4),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(K4),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var $u;function Sre(t,e){var r=$u[t]||Jt(t);return r==="General"?qo(e):Bs(r,e)}function Tre(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ar(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=dn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Jt(e)]=s}function Are(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||dl[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=md(t.v):t.w=qo(t.v):t.w=Sre(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=$u[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Rc(n)){var s=Co(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function wre(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=TJ[n.Pattern]||n.Pattern)}t[e.ID]=e}function Cre(t,e,r,n,s,i,a,o,l,c){var u="General",d=n.StyleID,f={};c=c||{};var p=[],m=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&a&&(d=a.StyleID);i[d]!==void 0&&(i[d].nf&&(u=i[d].nf),i[d].Interior&&p.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ar(t);break;case"String":n.t="s",n.r=o2(Jt(t)),n.v=t.indexOf("<")>-1?Jt(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(dn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Jt(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=c4[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=o2(e||t));break}if(Are(n,u,c),c.cellFormula!==!1)if(n.Formula){var g=Jt(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=rc(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=rc("RC:RC",s):n.ArrayRange&&(n.F=rc(n.ArrayRange,s),l.push([Br(n.F),n.F]))}else for(m=0;m<l.length;++m)s.r>=l[m][0].s.r&&s.r<=l[m][0].e.r&&s.c>=l[m][0].s.c&&s.c<=l[m][0].e.c&&(n.F=l[m][1]);c.cellStyles&&(p.forEach(function(v){!f.patternType&&v.patternType&&(f.patternType=v.patternType)}),n.s=f),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Ire(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Ym(t,e){var r=e||{};NI();var n=lu(wx(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=xr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=Cn(r);return a.type="string",xd.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ae){s.indexOf("<"+ae)>=0&&(i=!0)}),i)return Lre(n,r);$u={"General Number":"General","General Date":Nt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Nt[15],"Short Date":Nt[14],"Long Time":Nt[19],"Medium Time":Nt[18],"Short Time":Nt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Nt[2],Standard:Nt[4],Percent:Nt[10],Scientific:Nt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},d=[],f=r.dense?[]:{},p="",m={},g={},v=Ws('<Data ss:Type="String">'),E=0,x=0,y=0,C={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},k={},w="",S=0,_=[],b={},T={},I=0,D=[],O=[],R={},F=[],N,V=!1,L=[],z=[],H={},B=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},ee={};vd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var me="";o=vd.exec(n);)switch(o[3]=(me=o[3]).toLowerCase()){case"data":if(me=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Cre(n.slice(E,o.index),w,v,l[l.length-1][0]=="comment"?R:m,{c:x,r:y},P,F[x],g,L,r):(w="",v=Ws(o[0]),E=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(O.length>0&&(m.c=O),(!r.sheetRows||r.sheetRows>y)&&m.v!==void 0&&(r.dense?(f[y]||(f[y]=[]),f[y][x]=m):f[nn(x)+In(y)]=m),m.HRef&&(m.l={Target:Jt(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(B=x+(parseInt(m.MergeAcross,10)|0),W=y+(parseInt(m.MergeDown,10)|0),_.push({s:{c:x,r:y},e:{c:B,r:W}})),!r.sheetStubs)m.MergeAcross?x=B+1:++x;else if(m.MergeAcross||m.MergeDown){for(var le=x;le<=B;++le)for(var he=y;he<=W;++he)(le>x||he>y)&&(r.dense?(f[he]||(f[he]=[]),f[he][le]={t:"z"}):f[nn(le)+In(he)]={t:"z"});x=B+1}else++x;else m=bre(o[0]),m.Index&&(x=+m.Index-1),x<C.s.c&&(C.s.c=x),x>C.e.c&&(C.e.c=x),o[0].slice(-2)==="/>"&&++x,O=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(y<C.s.r&&(C.s.r=y),y>C.e.r&&(C.e.r=y),o[0].slice(-2)==="/>"&&(g=Ws(o[0]),g.Index&&(y=+g.Index-1)),x=0,++y):(g=Ws(o[0]),g.Index&&(y=+g.Index-1),H={},(g.AutoFitHeight=="0"||g.Height)&&(H.hpx=parseInt(g.Height,10),H.hpt=D4(H.hpx),z[y]=H),g.Hidden=="1"&&(H.hidden=!0,z[y]=H));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(p),C.s.r<=C.e.r&&C.s.c<=C.e.c&&(f["!ref"]=Yt(C),r.sheetRows&&r.sheetRows<=C.e.r&&(f["!fullref"]=f["!ref"],C.e.r=r.sheetRows-1,f["!ref"]=Yt(C))),_.length&&(f["!merges"]=_),F.length>0&&(f["!cols"]=F),z.length>0&&(f["!rows"]=z),u[p]=f}else C={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=x=0,l.push([o[3],!1]),c=Ws(o[0]),p=Jt(c.Name),f=r.dense?[]:{},_=[],L=[],z=[],ee={name:p,Hidden:0},K.Sheets.push(ee);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),F=[],V=!1}break;case"style":o[1]==="/"?wre(P,k,r):k=Ws(o[0]);break;case"numberformat":k.nf=Jt(Ws(o[0]).Format||"General"),$u[k.nf]&&(k.nf=$u[k.nf]);for(var Z=0;Z!=392&&Nt[Z]!=k.nf;++Z);if(Z==392){for(Z=57;Z!=392;++Z)if(Nt[Z]==null){No(k.nf,Z);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(N=Ws(o[0]),N.Hidden&&(N.hidden=!0,delete N.Hidden),N.Width&&(N.wpx=parseInt(N.Width,10)),!V&&N.wpx>10){V=!0,ns=I4;for(var Q=0;Q<F.length;++Q)F[Q]&&Ec(F[Q])}V&&Ec(N),F[N.Index-1||F.length]=N;for(var ve=0;ve<+N.Span;++ve)F[F.length]=Cn(N);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var X=bt(o[0]),q={Name:X.Name,Ref:rc(X.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(q.Sheet=K.Sheets.length-1),K.Names.push(q);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(S,o.index):S=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;k.Interior=Ws(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?dY(b,me,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));Ire(R),O.push(R)}else l.push([o[3],!1]),c=Ws(o[0]),R={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Y=Ws(o[0]);f["!autofilter"]={ref:rc(Y.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return W2(n,r);var ge=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ge=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ge=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ge=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ge=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else I=o.index+o[0].length;break;case"header":f["!margins"]||Vu(f["!margins"]={},"xlml"),isNaN(+bt(o[0]).Margin)||(f["!margins"].header=+bt(o[0]).Margin);break;case"footer":f["!margins"]||Vu(f["!margins"]={},"xlml"),isNaN(+bt(o[0]).Margin)||(f["!margins"].footer=+bt(o[0]).Margin);break;case"pagemargins":var re=bt(o[0]);f["!margins"]||Vu(f["!margins"]={},"xlml"),isNaN(+re.Top)||(f["!margins"].top=+re.Top),isNaN(+re.Left)||(f["!margins"].left=+re.Left),isNaN(+re.Right)||(f["!margins"].right=+re.Right),isNaN(+re.Bottom)||(f["!margins"].bottom=+re.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ge=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ge=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ge=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ge=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ge=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ge=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ge=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ge=!1}break;case"smarttags":break;default:ge=!1;break}if(ge||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Tre(T,me,D,n.slice(I,o.index)):(D=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ne={};return!r.bookSheets&&!r.bookProps&&(ne.Sheets=u),ne.SheetNames=d,ne.Workbook=K,ne.SSF=Cn(Nt),ne.Props=b,ne.Custprops=T,ne}function gv(t,e){switch($x(e=e||{}),e.type||"base64"){case"base64":return Ym(ws(t),e);case"binary":case"buffer":case"file":return Ym(t,e);case"array":return Ym(ll(t),e)}}function kre(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=HX(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=GX(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Dre=[60,1084,2066,2165,2175];function Pre(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=Za(r,r.l),c=vv[l],u=0;c!=null&&Dre.indexOf(l)>-1;)i=Za(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=vv[l=Za(r,r.l)];var d=$i(a);En(d,0);var f=0;d.lens=[];for(var p=0;p<a.length;++p)d.lens.push(f),f+=a[p].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,s)}function ga(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Nt[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||dl[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=md(t.v):t.w=qo(t.v):t.w=Bs(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&Rc(Nt[n]||String(n))){var s=Co(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Vf(t,e,r){return{v:t,ixfe:e,t:r}}function Fre(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},d,f="",p,m,g,v,E={},x=[],y,C,P=[],k=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},_=function(ye){return ye<8?Mo[ye]:ye<64&&k[ye-8]||Mo[ye]},b=function(ye,Se,Re){var He=Se.XF.data;if(!(!He||!He.patternType||!Re||!Re.cellStyles)){Se.s={},Se.s.patternType=He.patternType;var it;(it=yd(_(He.icvFore)))&&(Se.s.fgColor={rgb:it}),(it=yd(_(He.icvBack)))&&(Se.s.bgColor={rgb:it})}},T=function(ye,Se,Re){if(!(H>1)&&!(Re.sheetRows&&ye.r>=Re.sheetRows)){if(Re.cellStyles&&Se.XF&&Se.XF.data&&b(ye,Se,Re),delete Se.ixfe,delete Se.XF,d=ye,f=Dt(ye),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),ye.r<a.s.r&&(a.s.r=ye.r),ye.c<a.s.c&&(a.s.c=ye.c),ye.r+1>a.e.r&&(a.e.r=ye.r+1),ye.c+1>a.e.c&&(a.e.c=ye.c+1),Re.cellFormula&&Se.f){for(var He=0;He<x.length;++He)if(!(x[He][0].s.c>ye.c||x[He][0].s.r>ye.r)&&!(x[He][0].e.c<ye.c||x[He][0].e.r<ye.r)){Se.F=Yt(x[He][0]),(x[He][0].s.c!=ye.c||x[He][0].s.r!=ye.r)&&delete Se.f,Se.f&&(Se.f=""+Ln(x[He][1],a,ye,L,I));break}}Re.dense?(s[ye.r]||(s[ye.r]=[]),s[ye.r][ye.c]=Se):s[f]=Se}},I={enc:!1,sbcch:0,snames:[],sharedf:E,arrayf:x,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(I.password=e.password);var D,O=[],R=[],F=[],N=[],V=!1,L=[];L.SheetNames=I.snames,L.sharedf=I.sharedf,L.arrayf=I.arrayf,L.names=[],L.XTI=[];var z=0,H=0,B=0,W=[],K=[],ee;I.codepage=1200,Zs(1200);for(var me=!1;t.l<t.length-1;){var le=t.l,he=t.read_shift(2);if(he===0&&z===10)break;var Z=t.l===t.length?0:t.read_shift(2),Q=vv[he];if(Q&&Q.f){if(e.bookSheets&&z===133&&he!==133)break;if(z=he,Q.r===2||Q.r==12){var ve=t.read_shift(2);if(Z-=2,!I.enc&&ve!==he&&((ve&255)<<8|ve>>8)!==he)throw new Error("rt mismatch: "+ve+"!="+he);Q.r==12&&(t.l+=10,Z-=10)}var X={};if(he===10?X=Q.f(t,Z,I):X=Pre(he,Q,t,Z,I),H==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(he){case 34:r.opts.Date1904=w.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(t.l=0),I.enc=X,!e.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=X;break;case 66:var q=Number(X);switch(q){case 21010:q=1200;break;case 32768:q=1e4;break;case 32769:q=1252;break}Zs(I.codepage=q),me=!0;break;case 317:I.rrtabid=X;break;case 25:I.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:I.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(s["!type"]="dialog"),X.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),X.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:P.push(X);break;case 430:L.push([X]),L[L.length-1].XTI=[];break;case 35:case 547:L[L.length-1].push(X);break;case 24:case 536:ee={Name:X.Name,Ref:Ln(X.rgce,a,null,L,I)},X.itab>0&&(ee.Sheet=X.itab-1),L.names.push(ee),L[0]||(L[0]=[],L[0].XTI=[]),L[L.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(K[X.itab-1]={ref:Yt(X.rgce[0][0][1][2])});break;case 22:I.ExternCount=X;break;case 23:L.length==0&&(L[0]=[],L[0].XTI=[]),L[L.length-1].XTI=L[L.length-1].XTI.concat(X),L.XTI=L.XTI.concat(X);break;case 2196:if(I.biff<8)break;ee!=null&&(ee.Comment=X[1]);break;case 18:s["!protect"]=X;break;case 19:X!==0&&I.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,I.snames.push(X.name);break;case 10:{if(--H)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=Yt(a),e.sheetRows&&e.sheetRows<=a.e.r){var Y=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Yt(a),a.e.r=Y}a.e.r++,a.e.c++}O.length>0&&(s["!merges"]=O),R.length>0&&(s["!objects"]=R),F.length>0&&(s["!cols"]=F),N.length>0&&(s["!rows"]=N),w.Sheets.push(S)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),I.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(I.biff=5,me=!0,Zs(I.codepage=28591)),I.biff==8&&X.BIFFVer==0&&X.dt==16&&(I.biff=2),H++)break;if(s=e.dense?[]:{},I.biff<8&&!me&&(me=!0,Zs(I.codepage=e.codepage||1252)),I.biff<5||X.BIFFVer==0&&X.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ge={pos:t.l-Z,name:c};i[ge.pos]=ge,I.snames.push(c)}else c=(i[le]||{name:""}).name;X.dt==32&&(s["!type"]="chart"),X.dt==64&&(s["!type"]="macro"),O=[],R=[],I.arrayf=x=[],F=[],N=[],V=!1,S={Hidden:(i[le]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[X.r]||[])[X.c]:s[Dt({c:X.c,r:X.r})])&&++X.c,y={ixfe:X.ixfe,XF:P[X.ixfe]||{},v:X.val,t:"n"},B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:X.c,r:X.r},y,e);break;case 5:case 517:y={ixfe:X.ixfe,XF:P[X.ixfe],v:X.val,t:X.t},B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:X.c,r:X.r},y,e);break;case 638:y={ixfe:X.ixfe,XF:P[X.ixfe],v:X.rknum,t:"n"},B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:X.c,r:X.r},y,e);break;case 189:for(var re=X.c;re<=X.C;++re){var ne=X.rkrec[re-X.c][0];y={ixfe:ne,XF:P[ne],v:X.rkrec[re-X.c][1],t:"n"},B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:re,r:X.r},y,e)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(y=Vf(X.val,X.cell.ixfe,X.tt),y.XF=P[y.ixfe],e.cellFormula){var ae=X.formula;if(ae&&ae[0]&&ae[0][0]&&ae[0][0][0]=="PtgExp"){var xe=ae[0][0][1][0],Ee=ae[0][0][1][1],we=Dt({r:xe,c:Ee});E[we]?y.f=""+Ln(X.formula,a,X.cell,L,I):y.F=((e.dense?(s[xe]||[])[Ee]:s[we])||{}).F}else y.f=""+Ln(X.formula,a,X.cell,L,I)}B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T(X.cell,y,e),o=X}break;case 7:case 519:if(o)o.val=X,y=Vf(X,o.cell.ixfe,"s"),y.XF=P[y.ixfe],e.cellFormula&&(y.f=""+Ln(o.formula,a,o.cell,L,I)),B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T(o.cell,y,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{x.push(X);var Te=Dt(X[0].s);if(p=e.dense?(s[X[0].s.r]||[])[X[0].s.c]:s[Te],e.cellFormula&&p){if(!o||!Te||!p)break;p.f=""+Ln(X[1],a,X[0],L,I),p.F=Yt(X[0])}}break;case 1212:{if(!e.cellFormula)break;if(f){if(!o)break;E[Dt(o.cell)]=X[0],p=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Dt(o.cell)],(p||{}).f=""+Ln(X[0],a,d,L,I)}}break;case 253:y=Vf(l[X.isst].t,X.ixfe,"s"),l[X.isst].h&&(y.h=l[X.isst].h),y.XF=P[y.ixfe],B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:X.c,r:X.r},y,e);break;case 513:e.sheetStubs&&(y={ixfe:X.ixfe,XF:P[X.ixfe],t:"z"},B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:X.c,r:X.r},y,e));break;case 190:if(e.sheetStubs)for(var Ge=X.c;Ge<=X.C;++Ge){var Ie=X.ixfe[Ge-X.c];y={ixfe:Ie,XF:P[Ie],t:"z"},B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:Ge,r:X.r},y,e)}break;case 214:case 516:case 4:y=Vf(X.val,X.ixfe,"s"),y.XF=P[y.ixfe],B>0&&(y.z=W[y.ixfe>>8&63]),ga(y,e,r.opts.Date1904),T({c:X.c,r:X.r},y,e);break;case 0:case 512:H===1&&(a=X);break;case 252:l=X;break;case 1054:if(I.biff==4){W[B++]=X[1];for(var Ue=0;Ue<B+163&&Nt[Ue]!=X[1];++Ue);Ue>=163&&No(X[1],B+163)}else No(X[1],X[0]);break;case 30:{W[B++]=X;for(var Le=0;Le<B+163&&Nt[Le]!=X;++Le);Le>=163&&No(X,B+163)}break;case 229:O=O.concat(X);break;case 93:R[X.cmo[0]]=I.lastobj=X;break;case 438:I.lastobj.TxO=X;break;case 127:I.lastobj.ImData=X;break;case 440:for(v=X[0].s.r;v<=X[0].e.r;++v)for(g=X[0].s.c;g<=X[0].e.c;++g)p=e.dense?(s[v]||[])[g]:s[Dt({c:g,r:v})],p&&(p.l=X[1]);break;case 2048:for(v=X[0].s.r;v<=X[0].e.r;++v)for(g=X[0].s.c;g<=X[0].e.c;++g)p=e.dense?(s[v]||[])[g]:s[Dt({c:g,r:v})],p&&p.l&&(p.l.Tooltip=X[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;p=e.dense?(s[X[0].r]||[])[X[0].c]:s[Dt(X[0])];var We=R[X[2]];p||(e.dense?(s[X[0].r]||(s[X[0].r]=[]),p=s[X[0].r][X[0].c]={t:"z"}):p=s[Dt(X[0])]={t:"z"},a.e.r=Math.max(a.e.r,X[0].r),a.s.r=Math.min(a.s.r,X[0].r),a.e.c=Math.max(a.e.c,X[0].c),a.s.c=Math.min(a.s.c,X[0].c)),p.c||(p.c=[]),m={a:X[1],t:We.TxO.t},p.c.push(m)}break;case 2173:eZ(P[X.ixfe],X.ext);break;case 125:{if(!I.cellStyles)break;for(;X.e>=X.s;)F[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},V||(V=!0,Mx(X.w/256)),Ec(F[X.e+1])}break;case 520:{var ze={};X.level!=null&&(N[X.r]=ze,ze.level=X.level),X.hidden&&(N[X.r]=ze,ze.hidden=!0),X.hpt&&(N[X.r]=ze,ze.hpt=X.hpt,ze.hpx=Ed(X.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Vu(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=X;break;case 161:s["!margins"]||Vu(s["!margins"]={}),s["!margins"].header=X.header,s["!margins"].footer=X.footer;break;case 574:X.RTL&&(w.Views[0].RTL=!0);break;case 146:k=X;break;case 2198:D=X;break;case 140:C=X;break;case 442:c?S.CodeName=X||S.name:w.WBProps.CodeName=X||"ThisWorkbook";break}}else Q||console.error("Missing Info for XLS Record 0x"+he.toString(16)),t.l+=Z}return r.SheetNames=Pa(i).sort(function(_e,ye){return Number(_e)-Number(ye)}).map(function(_e){return i[_e].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&K.forEach(function(_e,ye){r.Sheets[r.SheetNames[ye]]["!autofilter"]=_e}),r.Strings=l,r.SSF=Cn(Nt),I.enc&&(r.Encryption=I.enc),D&&(r.Themes=D),r.Metadata={},C!==void 0&&(r.Metadata.Country=C),L.names.length>0&&(w.Names=L.names),r.Workbook=w,r}var V2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Rre(t,e,r){var n=Xt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=S2(n,YX,V2.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=Xt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=S2(a,QX,V2.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(d4(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function q4(t,e){e||(e={}),$x(e),SI(),e.codepage&&yx(e.codepage);var r,n;if(t.FullPaths){if(Xt.find(t,"/encryption"))throw new Error("File is password-protected");r=Xt.find(t,"!CompObj"),n=Xt.find(t,"/Workbook")||Xt.find(t,"/Book")}else{switch(e.type){case"base64":t=Js(ws(t));break;case"binary":t=Js(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}En(t,0),n={content:t}}var s,i;if(r&&kre(r),e.bookProps&&!e.bookSheets)s={};else{var a=zt?"buffer":"array";if(n&&n.content)s=Fre(n.content,e);else if((i=Xt.find(t,"PerfectOffice_MAIN"))&&i.content)s=Bu.to_workbook(i.content,(e.type=a,e));else if((i=Xt.find(t,"NativeContent_MAIN"))&&i.content)s=Bu.to_workbook(i.content,(e.type=a,e));else throw(i=Xt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Xt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=xZ(t))}var o={};return t.FullPaths&&Rre(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var ch={0:{f:pte},1:{f:xte},2:{f:Cte},3:{f:bte},4:{f:Ete},5:{f:wte},6:{f:Dte},7:{f:Tte},8:{f:Nte},9:{f:Ote},10:{f:Fte},11:{f:Rte},12:{f:yte},13:{f:Ite},14:{f:Ste},15:{f:_te},16:{f:H4},17:{f:Pte},18:{f:Ate},19:{f:Dx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:lre},40:{},42:{},43:{f:FJ},44:{f:PJ},45:{f:RJ},46:{f:NJ},47:{f:OJ},48:{},49:{f:MX},50:{},51:{f:rZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:S4},62:{f:kte},63:{f:oZ},64:{f:Gte},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:qn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Hte},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:vte},148:{f:mte,p:16},151:{f:Bte},152:{},153:{f:ire},154:{},155:{},156:{f:are},157:{},158:{},159:{T:1,f:QQ},160:{T:-1},161:{T:1,f:ul},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Mte},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:tZ},336:{T:-1},337:{f:nZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:fv},357:{},358:{},359:{},360:{T:1},361:{},362:{f:b4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Ute},427:{f:Vte},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jte},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:gte},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Lte},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:fv},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:mZ},633:{T:1},634:{T:-1},635:{T:1,f:pZ},636:{T:-1},637:{f:BX},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Yte},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Wte},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},vv={6:{f:qm},10:{f:Ii},12:{f:qr},13:{f:qr},14:{f:Vr},15:{f:Vr},16:{f:Vn},17:{f:Vr},18:{f:Vr},19:{f:qr},20:{f:C2},21:{f:C2},23:{f:b4},24:{f:k2},25:{f:Vr},26:{},27:{},28:{f:fQ},29:{},34:{f:Vr},35:{f:I2},38:{f:Vn},39:{f:Vn},40:{f:Vn},41:{f:Vn},42:{f:Vr},43:{f:Vr},47:{f:gJ},49:{f:KY},51:{f:qr},60:{},61:{f:GY},64:{f:Vr},65:{f:zY},66:{f:qr},77:{},80:{},81:{},82:{},85:{f:qr},89:{},90:{},91:{},92:{f:MY},93:{f:pQ},94:{},95:{f:Vr},96:{},97:{},99:{f:Vr},125:{f:S4},128:{f:nQ},129:{f:LY},130:{f:qr},131:{f:Vr},132:{f:Vr},133:{f:BY},134:{},140:{f:EQ},141:{f:qr},144:{},146:{f:bQ},151:{},152:{},153:{},154:{},155:{},156:{f:qr},157:{},158:{},160:{f:CQ},161:{f:TQ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:ZY},190:{f:eQ},193:{f:Ii},197:{},198:{},199:{},200:{},201:{},202:{f:Vr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:qr},220:{},221:{f:Vr},222:{},224:{f:rQ},225:{f:NY},226:{f:Ii},227:{},229:{f:hQ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:UY},253:{f:qY},255:{f:VY},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:g4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Vr},353:{f:Ii},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:aQ},431:{f:Vr},432:{},433:{},434:{},437:{},438:{f:vQ},439:{f:Vr},440:{f:xQ},441:{},442:{f:Xd},443:{},444:{f:qr},445:{},446:{},448:{f:Ii},449:{f:HY,r:2},450:{f:Ii},512:{f:A2},513:{f:wQ},515:{f:sQ},516:{f:XY},517:{f:w2},519:{f:IQ},520:{f:$Y},523:{},545:{f:D2},549:{f:T2},566:{},574:{f:WY},638:{f:JY},659:{},1048:{},1054:{f:YY},1084:{},1212:{f:cQ},2048:{f:yQ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Lf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ii},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:SQ,r:12},2173:{f:ZJ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Vr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:lQ,r:12},2197:{},2198:{f:KJ,r:12},2199:{},2200:{},2201:{},2202:{f:uQ,r:12},2203:{f:Ii},2204:{},2205:{},2206:{},2207:{},2211:{f:jY},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:qr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:AQ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:_Q},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:A2},1:{},2:{f:FQ},3:{f:PQ},4:{f:DQ},5:{f:w2},7:{f:RQ},8:{},9:{f:Lf},11:{},22:{f:qr},30:{f:QY},31:{},32:{},33:{f:D2},36:{},37:{f:T2},50:{f:OQ},62:{},52:{},67:{},68:{f:qr},69:{},86:{},126:{},127:{f:kQ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:NQ},223:{},234:{},354:{},421:{},518:{f:qm},521:{f:Lf},536:{f:k2},547:{f:I2},561:{},579:{},1030:{f:qm},1033:{f:Lf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function zs(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&n4(r)&&t.push(r)}}function $2(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=sX(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,d=0,f=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(a=0;a<l.length;++a){var g=l[a].trim(),v=g.slice(0,3).toLowerCase();if(v=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(v!="<td"&&v!="<th")){var E=g.split(/<\/t[dh]>/i);for(o=0;o<E.length;++o){var x=E[o].trim();if(x.match(/<t[dh]/i)){for(var y=x,C=0;y.charAt(0)=="<"&&(C=y.indexOf(">"))>-1;)y=y.slice(C+1);for(var P=0;P<m.length;++P){var k=m[P];k.s.c==u&&k.s.r<c&&c<=k.e.r&&(u=k.e.c+1,P=-1)}var w=bt(x.slice(0,x.indexOf(">")));f=w.colspan?+w.colspan:1,((d=+w.rowspan)>1||f>1)&&m.push({s:{r:c,c:u},e:{r:c+(d||1)-1,c:u+f-1}});var S=w.t||w["data-t"]||"";if(!y.length){u+=f;continue}if(y=GI(y),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!y.length){u+=f;continue}var _={t:"s",v:y};r.raw||!y.trim().length||S=="s"||(y==="TRUE"?_={t:"b",v:!0}:y==="FALSE"?_={t:"b",v:!1}:isNaN(aa(y))?isNaN(yc(y).getDate())||(_={t:"d",v:dn(y)},r.cellDates||(_={t:"n",v:os(_.v)}),_.z=r.dateNF||Nt[14]):_={t:"n",v:aa(y)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=_):n[Dt({r:c,c:u})]=_,u+=f}}}}return n["!ref"]=Yt(p),m.length&&(n["!merges"]=m),n}function Ore(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Dt({r,c:a}),d=n.dense?(t[r]||[])[a]:t[u],f=d&&d.v!=null&&(d.h||Ax(d.w||(mi(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?f='<span contenteditable="true">'+f+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+d.l.Target+'">'+f+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(EX("td",f,p))}}var m="<tr>";return m+i.join("")+"</tr>"}var Nre='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Mre="</body></html>";function Lre(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return uo($2(r[0],e),e);var n=Hx();return r.forEach(function(s,i){Gx(n,$2(s,e),"Sheet"+(i+1))}),n}function Bre(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Ure(t,e){var r=e||{},n=r.header!=null?r.header:Nre,s=r.footer!=null?r.footer:Mre,i=[n],a=Oc(t["!ref"]);r.dense=Array.isArray(t),i.push(Bre(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(Ore(t,a,o,r));return i.push("</table>"+s),i.join("")}function X4(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?ss(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=Oc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var d=[],f=0,p=t["!rows"]||(t["!rows"]=[]),m=0,g=0,v=0,E=0,x=0,y=0;for(t["!cols"]||(t["!cols"]=[]);m<o.length&&g<l;++m){var C=o[m];if(j2(C)){if(n.display)continue;p[g]={hidden:!0}}var P=C.children;for(v=E=0;v<P.length;++v){var k=P[v];if(!(n.display&&j2(k))){var w=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):GI(k.innerHTML),S=k.getAttribute("data-z")||k.getAttribute("z");for(f=0;f<d.length;++f){var _=d[f];_.s.c==E+i&&_.s.r<g+s&&g+s<=_.e.r&&(E=_.e.c+1-i,f=-1)}y=+k.getAttribute("colspan")||1,((x=+k.getAttribute("rowspan")||1)>1||y>1)&&d.push({s:{r:g+s,c:E+i},e:{r:g+s+(x||1)-1,c:E+i+(y||1)-1}});var b={t:"s",v:w},T=k.getAttribute("data-t")||k.getAttribute("t")||"";w!=null&&(w.length==0?b.t=T||"z":n.raw||w.trim().length==0||T=="s"||(w==="TRUE"?b={t:"b",v:!0}:w==="FALSE"?b={t:"b",v:!1}:isNaN(aa(w))?isNaN(yc(w).getDate())||(b={t:"d",v:dn(w)},n.cellDates||(b={t:"n",v:os(b.v)}),b.z=n.dateNF||Nt[14]):b={t:"n",v:aa(w)})),b.z===void 0&&S!=null&&(b.z=S);var I="",D=k.getElementsByTagName("A");if(D&&D.length)for(var O=0;O<D.length&&!(D[O].hasAttribute("href")&&(I=D[O].getAttribute("href"),I.charAt(0)!="#"));++O);I&&I.charAt(0)!="#"&&(b.l={Target:I}),n.dense?(t[g+s]||(t[g+s]=[]),t[g+s][E+i]=b):t[Dt({c:E+i,r:g+s})]=b,c.e.c<E+i&&(c.e.c=E+i),E+=y}}++g}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,g-1+s),t["!ref"]=Yt(c),g>=l&&(t["!fullref"]=Yt((c.e.r=o.length-m+g-1+s,c))),t}function Y4(t,e){var r=e||{},n=r.dense?[]:{};return X4(n,t,e)}function Vre(t,e){return uo(Y4(t,e),e)}function j2(t){var e="",r=$re(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function $re(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function jre(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Jt(e.replace(/<[^>]*>/g,""));return[r]}var H2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Q4(t,e){var r=e||{},n=wx(t),s=[],i,a,o={name:""},l="",c=0,u,d,f={},p=[],m=r.dense?[]:{},g,v,E={value:""},x="",y=0,C=[],P=-1,k=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,_={},b=[],T={},I=0,D=0,O=[],R=1,F=1,N=[],V={Names:[]},L={},z=["",""],H=[],B={},W="",K=0,ee=!1,me=!1,le=0;for(vd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=vd.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"工作表":g[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?m["!ref"]=Yt(w):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(m["!fullref"]=m["!ref"],w.e.r=r.sheetRows-1,m["!ref"]=Yt(w)),b.length&&(m["!merges"]=b),O.length&&(m["!rows"]=O),u.name=u.名称||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),f[u.name]=m,me=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=bt(g[0],!1),P=k=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,m=r.dense?[]:{},b=[],O=[],me=!0);break;case"table-row-group":g[1]==="/"?--S:++S;break;case"table-row":case"行":if(g[1]==="/"){P+=R,R=1;break}if(d=bt(g[0],!1),d.行号?P=d.行号-1:P==-1&&(P=0),R=+d["number-rows-repeated"]||1,R<10)for(le=0;le<R;++le)S>0&&(O[P+le]={level:S});k=-1;break;case"covered-table-cell":g[1]!=="/"&&++k,r.sheetStubs&&(r.dense?(m[P]||(m[P]=[]),m[P][k]={t:"z"}):m[Dt({r:P,c:k})]={t:"z"}),x="",C=[];break;case"table-cell":case"数据":if(g[0].charAt(g[0].length-2)==="/")++k,E=bt(g[0],!1),F=parseInt(E["number-columns-repeated"]||"1",10),v={t:"z",v:null},E.formula&&r.cellFormula!=!1&&(v.f=L2(Jt(E.formula))),(E.数据类型||E["value-type"])=="string"&&(v.t="s",v.v=Jt(E["string-value"]||""),r.dense?(m[P]||(m[P]=[]),m[P][k]=v):m[Dt({r:P,c:k})]=v),k+=F-1;else if(g[1]!=="/"){++k,x="",y=0,C=[],F=1;var he=R?P+R-1:P;if(k>w.e.c&&(w.e.c=k),k<w.s.c&&(w.s.c=k),P<w.s.r&&(w.s.r=P),he>w.e.r&&(w.e.r=he),E=bt(g[0],!1),H=[],B={},v={t:E.数据类型||E["value-type"],v:null},r.cellFormula)if(E.formula&&(E.formula=Jt(E.formula)),E["number-matrix-columns-spanned"]&&E["number-matrix-rows-spanned"]&&(I=parseInt(E["number-matrix-rows-spanned"],10)||0,D=parseInt(E["number-matrix-columns-spanned"],10)||0,T={s:{r:P,c:k},e:{r:P+I-1,c:k+D-1}},v.F=Yt(T),N.push([T,v.F])),E.formula)v.f=L2(E.formula);else for(le=0;le<N.length;++le)P>=N[le][0].s.r&&P<=N[le][0].e.r&&k>=N[le][0].s.c&&k<=N[le][0].e.c&&(v.F=N[le][1]);switch((E["number-columns-spanned"]||E["number-rows-spanned"])&&(I=parseInt(E["number-rows-spanned"],10)||0,D=parseInt(E["number-columns-spanned"],10)||0,T={s:{r:P,c:k},e:{r:P+I-1,c:k+D-1}},b.push(T)),E["number-columns-repeated"]&&(F=parseInt(E["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ar(E["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(E.value);break;case"percentage":v.t="n",v.v=parseFloat(E.value);break;case"currency":v.t="n",v.v=parseFloat(E.value);break;case"date":v.t="d",v.v=dn(E["date-value"]),r.cellDates||(v.t="n",v.v=os(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=tX(E["time-value"])/86400,r.cellDates&&(v.t="d",v.v=vp(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(E.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",E["string-value"]!=null&&(x=Jt(E["string-value"]),C=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(ee=!1,v.t==="s"&&(v.v=x||"",C.length&&(v.R=C),ee=y==0),L.Target&&(v.l=L),H.length>0&&(v.c=H,H=[]),x&&r.cellText!==!1&&(v.w=x),ee&&(v.t="z",delete v.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var Z=0;Z<R;++Z){if(F=parseInt(E["number-columns-repeated"]||"1",10),r.dense)for(m[P+Z]||(m[P+Z]=[]),m[P+Z][k]=Z==0?v:Cn(v);--F>0;)m[P+Z][k+F]=Cn(v);else for(m[Dt({r:P+Z,c:k})]=v;--F>0;)m[Dt({r:P+Z,c:k+F})]=Cn(v);w.e.c<=k&&(w.e.c=k)}F=parseInt(E["number-columns-repeated"]||"1",10),k+=F-1,F=0,v={},x="",C=[]}L={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;B.t=x,C.length&&(B.R=C),B.a=W,H.push(B)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);W="",K=0,x="",y=0,C=[];break;case"creator":g[1]==="/"?W=n.slice(K,g.index):K=g.index+g[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);x="",y=0,C=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(_[o.name]=l,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=bt(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=bt(g[0],!1),l+=H2[g[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=bt(g[0],!1),l+=H2[g[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,g.index);break}else c=g.index+g[0].length;break;case"named-range":a=bt(g[0],!1),z=Xm(a["cell-range-address"]);var Q={Name:a.name,Ref:z[0]+"!"+z[1]};me&&(Q.Sheet=p.length),V.Names.push(Q);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!E||!E["string-value"])){var ve=jre(n.slice(y,g.index));x=(x.length>0?x+`
`:"")+ve[0]}else bt(g[0],!1),y=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{z=Xm(bt(g[0])["target-range-address"]),f[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(L=bt(g[0],!1),!L.href)break;L.Target=Jt(L.href),delete L.href,L.Target.charAt(0)=="#"&&L.Target.indexOf(".")>-1?(z=Xm(L.Target.slice(1)),L.Target="#"+z[0]+"!"+z[1]):L.Target.match(/^\.\.[\\\/]/)&&(L.Target=L.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(g)}}var X={Sheets:f,SheetNames:p,Workbook:V};return r.bookSheets&&delete X.Sheets,X}function G2(t,e){e=e||{},Fs(t,"META-INF/manifest.xml")&&sY(Kr(t,"META-INF/manifest.xml"),e);var r=_s(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Q4(xr(r),e);return Fs(t,"meta.xml")&&(n.Props=u4(Kr(t,"meta.xml"))),n}function W2(t,e){return Q4(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ux(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xv(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):xr(ll(t))}function yv(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function z2(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Hre(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function _d(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function sn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Gn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=_d(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=_d(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Vx(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Gre(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=_d(t,n),i=Gn(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:sn(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Gn(o.data),c=sn(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=sn(i[3][0].data)>>>0>0),r.push(a)}return r}function Wre(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=_d(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[yv(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=yv(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function zre(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Wre(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return yv(e)}function Kre(t,e,r,n){var s=Ux(t),i=s.getUint32(4,!0),a=(n>1?12:8)+z2(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=z2(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function qre(t,e,r){var n=Ux(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=Hre(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1)d={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return d}function Xre(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return Kre(t,e,r,t[0]);case 5:return qre(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ji(t){var e=Gn(t);return _d(e[1][0].data)}function K2(t,e){var r=Gn(e.data),n=sn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=Gn(a.data),l=sn(o[1][0].data)>>>0;switch(n){case 1:i[l]=xv(o[3][0].data);break;case 8:{var c=t[Ji(o[9][0].data)][0],u=Gn(c.data),d=t[Ji(u[1][0].data)][0],f=sn(d.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var p=Gn(d.data);i[l]=p[3].map(function(m){return xv(m.data)}).join("")}break}}),i}function Yre(t,e){var r,n,s,i,a,o,l,c,u,d,f,p,m,g,v=Gn(t),E=sn(v[1][0].data)>>>0,x=sn(v[2][0].data)>>>0,y=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&sn(v[8][0].data)>0||!1,C,P;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&e!=0)C=(o=(a=v[7])==null?void 0:a[0])==null?void 0:o.data,P=(c=(l=v[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(u=v[4])==null?void 0:u[0])!=null&&d.data&&e!=1)C=(p=(f=v[4])==null?void 0:f[0])==null?void 0:p.data,P=(g=(m=v[3])==null?void 0:m[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var k=y?4:1,w=Ux(C),S=[],_=0;_<C.length/2;++_){var b=w.getUint16(_*2,!0);b<65535&&S.push([_,b])}if(S.length!=x)throw"Expected ".concat(x," cells, found ").concat(S.length);var T=[];for(_=0;_<S.length-1;++_)T[S[_][0]]=P.subarray(S[_][1]*k,S[_+1][1]*k);return S.length>=1&&(T[S[S.length-1][0]]=P.subarray(S[S.length-1][1]*k)),{R:E,cells:T}}function Qre(t,e){var r,n=Gn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?sn(n[7][0].data)>>>0>0?1:0:-1,i=Vx(n[5],function(a){return Yre(a,s)});return{nrows:sn(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function Jre(t,e,r){var n,s=Gn(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(sn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(sn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Yt(i);var a=Gn(s[4][0].data),o=K2(t,t[Ji(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?K2(t,t[Ji(a[17][0].data)][0]):[],c=Gn(a[3][0].data),u=0;c[1].forEach(function(d){var f=Gn(d.data),p=t[Ji(f[2][0].data)][0],m=sn(p.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var g=Qre(t,p);g.data.forEach(function(v,E){v.forEach(function(x,y){var C=Dt({r:u+E,c:y}),P=Xre(x,o,l);P&&(r[C]=P)})}),u+=g.nrows})}function Zre(t,e){var r=Gn(e.data),n={"!ref":"A1"},s=t[Ji(r[2][0].data)],i=sn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Jre(t,s[0],n),n}function ene(t,e){var r,n=Gn(e.data),s={name:(r=n[1])!=null&&r[0]?xv(n[1][0].data):"",sheets:[]},i=Vx(n[2],Ji);return i.forEach(function(a){t[a].forEach(function(o){var l=sn(o.meta[1][0].data);l==6e3&&s.sheets.push(Zre(t,o))})}),s}function tne(t,e){var r=Hx(),n=Gn(e.data),s=Vx(n[1],Ji);if(s.forEach(function(i){t[i].forEach(function(a){var o=sn(a.meta[1][0].data);if(o==2){var l=ene(t,a);l.sheets.forEach(function(c,u){Gx(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Qm(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=zre(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var u;try{u=Gre(c)}catch(d){return console.log("## "+(d.message||d))}u.forEach(function(d){i[d.id]=d.messages,a.push(d.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&sn(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=sn(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return tne(i,o)}function rne(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function $x(t){rne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function nne(t){return Ul.WS.indexOf(t)>-1?"sheet":t==Ul.CS?"chart":t==Ul.DS?"dialog":t==Ul.MS?"macro":t&&t.length?t:"sheet"}function sne(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,nne(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function ane(t,e,r,n,s,i,a,o,l,c,u,d){try{i[n]=Mu(_s(t,r,!0),e);var f=Kr(t,e),p;switch(o){case"sheet":p=dre(f,e,s,l,i[n],c,u,d);break;case"chart":if(p=fre(f,e,s,l,i[n],c,u,d),!p||!p["!drawel"])break;var m=uu(p["!drawel"].Target,e),g=hv(m),v=uZ(_s(t,m,!0),Mu(_s(t,g,!0),m)),E=uu(v,m),x=hv(E);p=qte(_s(t,E,!0),E,l,Mu(_s(t,x,!0),E),c,p);break;case"macro":p=hre(f,e,s,l,i[n],c,u,d);break;case"dialog":p=pre(f,e,s,l,i[n],c,u,d);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=p;var y=[];i&&i[n]&&Pa(i[n]).forEach(function(C){var P="";if(i[n][C].Type==Ul.CMNT){P=uu(i[n][C].Target,e);var k=xre(Kr(t,P,!0),P,l);if(!k||!k.length)return;F2(p,k,!1)}i[n][C].Type==Ul.TCMNT&&(P=uu(i[n][C].Target,e),y=y.concat(fZ(Kr(t,P,!0),l)))}),y&&y.length&&F2(p,y,!0,l.people||[])}catch(C){if(l.WTF)throw C}}function ks(t){return t.charAt(0)=="/"?t.slice(1):t}function ine(t,e){if(NI(),e=e||{},$x(e),Fs(t,"META-INF/manifest.xml")||Fs(t,"objectdata.xml"))return G2(t,e);if(Fs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Qm<"u"){if(t.FileIndex)return Qm(t);var r=Xt.utils.cfb_new();return a2(t).forEach(function(O){oX(r,O,iX(t,O))}),Qm(r)}throw new Error("Unsupported NUMBERS file")}if(!Fs(t,"[Content_Types].xml"))throw Fs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Fs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=a2(t),s=rY(_s(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Kr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Kr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(Uu=[],s.sst)try{Uu=vre(Kr(t,ks(s.sst)),s.sst,e)}catch(O){if(e.WTF)throw O}e.cellStyles&&s.themes.length&&(l=gre(_s(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=mre(Kr(t,ks(s.style)),s.style,l,e))}s.links.map(function(O){try{var R=Mu(_s(t,hv(ks(O))),O);return Ere(Kr(t,ks(O)),R,O,e)}catch{}});var u=ure(Kr(t,ks(s.workbooks[0])),s.workbooks[0],e),d={},f="";s.coreprops.length&&(f=Kr(t,ks(s.coreprops[0]),!0),f&&(d=u4(f)),s.extprops.length!==0&&(f=Kr(t,ks(s.extprops[0]),!0),f&&oY(f,d,e)));var p={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(f=_s(t,ks(s.custprops[0]),!0),f&&(p=cY(f,e)));var m={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(R){return R.name}):d.Worksheets&&d.SheetNames.length>0&&(a=d.SheetNames),e.bookProps&&(m.Props=d,m.Custprops=p),e.bookSheets&&typeof a<"u"&&(m.SheetNames=a),e.bookSheets?m.SheetNames:e.bookProps))return m;a={};var g={};e.bookDeps&&s.calcchain&&(g=yre(Kr(t,ks(s.calcchain)),s.calcchain));var v=0,E={},x,y;{var C=u.Sheets;d.Worksheets=C.length,d.SheetNames=[];for(var P=0;P!=C.length;++P)d.SheetNames[P]=C[P].name}var k=i?"bin":"xml",w=s.workbooks[0].lastIndexOf("/"),S=(s.workbooks[0].slice(0,w+1)+"_rels/"+s.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");Fs(t,S)||(S="xl/_rels/workbook."+k+".rels");var _=Mu(_s(t,S,!0),S.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=_re(Kr(t,ks(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=hZ(Kr(t,ks(s.people[0])),e)),_&&(_=sne(_,u.Sheets));var b=Kr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=d.Worksheets;++v){var T="sheet";if(_&&_[v]?(x="xl/"+_[v][1].replace(/[\/]?xl\//,""),Fs(t,x)||(x=_[v][1]),Fs(t,x)||(x=S.replace(/_rels\/.*$/,"")+_[v][1]),T=_[v][2]):(x="xl/worksheets/sheet"+(v+1-b)+"."+k,x=x.replace(/sheet0\./,"sheet.")),y=x.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(v!=e.sheets)continue e;break;case"string":if(d.SheetNames[v].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var I=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==v&&(I=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==d.SheetNames[v].toLowerCase()&&(I=1);if(!I)continue e}}ane(t,x,y,d.SheetNames[v],v,E,a,T,e,u,l,c)}return m={Directory:s,Workbook:u,Props:d,Custprops:p,Deps:g,Sheets:a,SheetNames:d.SheetNames,Strings:Uu,Styles:c,Themes:l,SSF:Cn(Nt)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(O,R){O=O.replace(/^Root Entry[\/]/,""),m.keys.push(O),m.files[O]=t.FileIndex[R]}))),e&&e.bookVBA&&(s.vba.length>0?m.vbaraw=Kr(t,ks(s.vba[0]),!0):s.defaults&&s.defaults.bin===vZ&&(m.vbaraw=Kr(t,"xl/vbaProject.bin",!0))),m}function one(t,e){var r=e||{},n="Workbook",s=Xt.find(t,n);try{if(n="/!DataSpaces/Version",s=Xt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(ZQ(s.content),n="/!DataSpaces/DataSpaceMap",s=Xt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=tJ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Xt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=rJ(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Xt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);sJ(s.content)}catch{}if(n="/EncryptionInfo",s=Xt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=aJ(s.content);if(n="/EncryptedPackage",s=Xt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function jx(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ws(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function lne(t,e){return Xt.find(t,"EncryptedPackage")?one(t,e):q4(t,e)}function cne(t,e){var r,n=t,s=e||{};return s.type||(s.type=zt&&Buffer.isBuffer(t)?"buffer":"base64"),r=$I(n,s),ine(r,s)}function J4(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return gv(t.slice(r),e);default:break e}return xd.to_workbook(t,e)}function une(t,e){var r="",n=jx(t,e);switch(e.type){case"base64":r=ws(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Xo(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=xr(r)),e.type="binary",J4(r,e)}function dne(t,e){var r=t;return e.type=="base64"&&(r=ws(r)),r=pd.utils.decode(1200,r.slice(2),"str"),e.type="binary",J4(r,e)}function fne(t){return t.match(/[^\x00-\x7F]/)?du(t):t}function Jm(t,e,r,n){return n?(r.type="string",xd.to_workbook(t,r)):xd.to_workbook(e,r)}function uh(t,e){SI();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return uh(new Uint8Array(t),(r=Cn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),nc={},r.dateNF&&(nc.dateNF=r.dateNF),r.type||(r.type=zt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=zt?"buffer":"binary",n=Zq(t),typeof Uint8Array<"u"&&!zt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=fne(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=Cn(r),r.type="array",uh(Ex(n),r)}switch((s=jx(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return lne(Xt.read(n,r),r);break;case 9:if(s[1]<=8)return q4(n,r);break;case 60:return gv(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return VQ(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return BQ.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?cne(n,r):Jm(t,n,r,i);case 239:return s[3]===60?gv(n,r):Jm(t,n,r,i);case 255:if(s[1]===254)return dne(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Bu.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Bu.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return P2.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return vJ.to_workbook(n,r);break;case 10:case 13:case 32:return une(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return MQ.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?P2.to_workbook(n,r):Jm(t,n,r,i)}function hne(t,e,r,n,s,i,a,o){var l=In(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var m=a?t[r][p]:t[n[p]+l];if(m===void 0||m.t===void 0){if(c===void 0)continue;i[p]!=null&&(f[i[p]]=c);continue}var g=m.v;switch(m.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(i[p]!=null){if(g==null)if(m.t=="e"&&g===null)f[i[p]]=null;else if(c!==void 0)f[i[p]]=c;else if(u&&g===null)f[i[p]]=null;else continue;else f[i[p]]=u&&(m.t!=="n"||m.t==="n"&&o.rawNumbers!==!1)?g:mi(m,g,o);g!=null&&(d=!1)}}return{row:f,isempty:d}}function Ev(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Br(u);break;case"number":l=Br(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var d=In(l.s.r),f=[],p=[],m=0,g=0,v=Array.isArray(t),E=l.s.r,x=0,y={};v&&!t[E]&&(t[E]=[]);var C=c.skipHidden&&t["!cols"]||[],P=c.skipHidden&&t["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(C[x]||{}).hidden)switch(f[x]=nn(x),r=v?t[E][x]:t[f[x]+d],n){case 1:i[x]=x-l.s.c;break;case 2:i[x]=f[x];break;case 3:i[x]=c.header[x-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=mi(r,null,c),g=y[a]||0,!g)y[a]=1;else{do o=a+"_"+g++;while(y[o]);y[a]=g,y[o]=1}i[x]=o}for(E=l.s.r+s;E<=l.e.r;++E)if(!(P[E]||{}).hidden){var k=hne(t,l,E,f,n,i,v,c);(k.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[m++]=k.row)}return p.length=m,p}var q2=/"/g;function pne(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",d=In(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var p=o.dense?(t[r]||[])[f]:t[n[f]+d];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(o.rawNumbers&&p.t=="n"?p.v:mi(p,null,o));for(var m=0,g=0;m!==u.length;++m)if((g=u.charCodeAt(m))===s||g===i||g===34||o.forceQuotes){u='"'+u.replace(q2,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(q2,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function Z4(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Br(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",d=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],m=s.s.c;m<=s.e.c;++m)(f[m]||{}).hidden||(d[m]=nn(m));for(var g=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(u=pne(t,s,v,d,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((g++?o:"")+u)));return delete n.dense,r.join("")}function mne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=Z4(t,e);return r}function gne(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Br(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=nn(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=In(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function ek(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=Br(i["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),a==-1&&(a=d.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var f=n.header||[],p=0;e.forEach(function(g,v){Pa(g).forEach(function(E){(p=f.indexOf(E))==-1&&(f[p=f.length]=E);var x=g[E],y="z",C="",P=Dt({c:o+p,r:a+v+s});c=bd(i,P),x&&typeof x=="object"&&!(x instanceof Date)?i[P]=x:(typeof x=="number"?y="n":typeof x=="boolean"?y="b":typeof x=="string"?y="s":x instanceof Date?(y="d",n.cellDates||(y="n",x=os(x)),C=n.dateNF||Nt[14]):x===null&&n.nullError&&(y="e",x=0),c?(c.t=y,c.v=x,delete c.w,delete c.R,C&&(c.z=C)):i[P]=c={t:y,v:x},C&&(c.z=C))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var m=In(a);if(s)for(p=0;p<f.length;++p)i[nn(p+o)+m]={t:"s",v:f[p]};return i["!ref"]=Yt(u),i}function vne(t,e){return ek(null,t,e)}function bd(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=ss(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?bd(t,Dt(e)):bd(t,Dt({r:e,c:r||0}))}function xne(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Hx(){return{SheetNames:[],Sheets:{}}}function Gx(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(rre(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function yne(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=xne(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Ene(t,e){return t.z=e,t}function tk(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function _ne(t,e,r){return tk(t,"#"+e,r)}function bne(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Sne(t,e,r,n){for(var s=typeof e!="string"?e:Br(e),i=typeof e=="string"?e:Yt(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=bd(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Tne={encode_col:nn,encode_row:In,encode_cell:Dt,encode_range:Yt,decode_col:kx,decode_row:Ix,split_cell:NX,decode_cell:ss,decode_range:Oc,format_cell:mi,sheet_add_aoa:a4,sheet_add_json:ek,sheet_add_dom:X4,aoa_to_sheet:Nc,json_to_sheet:vne,table_to_sheet:Y4,table_to_book:Vre,sheet_to_csv:Z4,sheet_to_txt:mne,sheet_to_json:Ev,sheet_to_html:Ure,sheet_to_formulae:gne,sheet_to_row_object_array:Ev,sheet_get_cell:bd,book_new:Hx,book_append_sheet:Gx,book_set_sheet_visibility:yne,cell_set_number_format:Ene,cell_set_hyperlink:tk,cell_set_internal_link:_ne,cell_add_comment:bne,sheet_set_array_formula:Sne,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Ane={class:"admin-time-table"},wne={class:"header"},Cne={class:"admin-action-btns"},Ine=["disabled"],kne={class:"import-section"},Dne={key:0,class:"import-preview"},Pne={class:"import-options"},Fne={class:"import-option-group"},Rne=["disabled"],One=["value"],Nne={class:"import-option-group"},Mne=["disabled"],Lne={class:"import-actions"},Bne=["disabled"],Une={class:"content"},Vne={key:0,class:"loading"},$ne={key:1,class:"time-tables-container"},jne={key:0,class:"empty-state"},Hne={key:1,class:"time-tables-list"},Gne={class:"time-table-header"},Wne={class:"time-table-info"},zne={class:"time-table-days"},Kne={class:"admin-action-btns"},qne=["onClick"],Xne=["onClick"],Yne={class:"time-table-schedule"},Qne={class:"schedule-item-info"},Jne={class:"item-name"},Zne={class:"item-time"},ese={class:"schedule-item-type"},tse={class:"dialog-header"},rse={class:"dialog-content"},nse={class:"form-group"},sse={class:"form-group"},ase={class:"days-checkboxes"},ise=["value"],ose={class:"form-group"},lse={class:"schedule-items"},cse={class:"item-row"},use=["onUpdate:modelValue"],dse=["onUpdate:modelValue"],fse=["onUpdate:modelValue"],hse=["onUpdate:modelValue"],pse=["onClick"],mse={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=ha(),r=ue(!0),n=ue(!1),s=ue([]),i=ue(!1),a=ue(-1),o=ue({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=ue(null),u=ue([]),d=ue([]),f=ue("overwrite"),p=ue(""),m=ue(""),g=be(()=>f.value==="overwrite"?p.value!=="":m.value.trim()!==""),v=()=>{const N=cn(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),V=Hr(N);if(!V.isSafe)return alert(`Security threat detected in time table name: ${V.threats.join(", ")}`),!1;if(o.value.name=N,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let L=0;L<o.value.schedule.length;L++){const z=o.value.schedule[L],H=cn(z.name,{trim:!0,maxLength:50,removeDangerous:!0}),B=Hr(H);if(!B.isSafe)return alert(`Security threat detected in schedule item ${L+1}: ${B.threats.join(", ")}`),!1;if(z.name=H,!z.name.trim())return alert(`Please enter a name for schedule item ${L+1}`),!1;if(!z.startTime||!z.endTime)return alert(`Please enter start and end times for ${z.name}`),!1;if(z.startTime>=z.endTime)return alert(`${z.name}: Start time must be before end time`),!1}return!0},E=N=>{const V=cn(N,{trim:!0,maxLength:100,removeDangerous:!0}),L=Hr(V);return L.isSafe?V:(alert(`Security threat detected in import name: ${L.threats.join(", ")}`),null)};async function x(){try{console.log("Loading time tables..."),r.value=!0;const N=await sr(at(Ye,"app_settings","global"));if(N.exists()){const V=N.data();s.value=V.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(N){console.error("Error loading time tables:",N),r.value=!1}}function y(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function C(N){a.value=N,o.value=JSON.parse(JSON.stringify(s.value[N])),i.value=!0}function P(N){confirm("Are you sure you want to delete this time table?")&&s.value.splice(N,1)}function k(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function w(N){o.value.schedule.splice(N,1)}function S(){if(!v())return;if(!Ss("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),_()}function _(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function b(){try{if(!Ss("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const V=await sr(at(Ye,"app_settings","global")),z={...V.exists()?V.data():{},timeTables:s.value};await e(z),n.value=!1,console.log("Time tables saved successfully")}catch(N){console.error("Error saving time tables:",N),n.value=!1}}function T(N){return N.length===0?"No days selected":N.length===7?"Every day":N.length===5&&N.includes("monday")&&N.includes("friday")?"Weekdays":N.map(V=>{const L=l.find(z=>z.value===V);return L?L.label:V}).join(", ")}function I(N){if(!N)return"";const[V,L]=N.split(":"),z=parseInt(V),H=z>=12?"PM":"AM";return`${z===0?12:z>12?z-12:z}:${L} ${H}`}function D(){c.value&&c.value.click()}function O(N){const V=N.target.files[0];if(!V)return;const L=Fc(V,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!L.isValid){alert(L.error),N.target.value="";return}const z=Hr(V.name);if(!z.isSafe){alert(`File name contains potentially dangerous content: ${z.threats.join(", ")}`),N.target.value="";return}const H=new FileReader;H.onload=B=>{try{let W=B.target.result,K;V.name.endsWith(".csv")?K=uh(W,{type:"binary"}):K=uh(W,{type:"binary"});const ee=K.SheetNames[0],me=K.Sheets[ee],he=Tne.sheet_to_json(me,{defval:""}).map(Z=>{const Q={};return Object.entries(Z).forEach(([ve,X])=>{const q=cn(ve,{trim:!0,maxLength:50,removeDangerous:!0}),Y=cn(String(X),{trim:!0,maxLength:100,removeDangerous:!0});Q[q]=Y}),Q});u.value=he,d.value=he.length?Object.keys(he[0]):[]}catch(W){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",W)}},H.readAsBinaryString(V)}function R(){try{if(!Ss("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const V=u.value.map(L=>{const z=L.name||L.Name||L.period||L.Period||L.item||L.Item||"Unknown",H=L.startTime||L["Start Time"]||L.start||L.Start||"08:00",B=L.endTime||L["End Time"]||L.end||L.End||"08:55",W=cn(z,{trim:!0,maxLength:50,removeDangerous:!0}),K=Hr(W);if(!K.isSafe)return console.warn(`Security threat detected in imported item: ${K.threats.join(", ")}`),null;let ee="period";const me=L.type||L.Type||"",le=W.toLowerCase();return me.toLowerCase().includes("lunch")||le.includes("lunch")?ee="lunch":me.toLowerCase().includes("break")||le.includes("break")?ee="break":(me.toLowerCase().includes("other")||le.includes("other"))&&(ee="other"),{name:W,type:ee,startTime:H,endTime:B}}).filter(L=>L&&L.name&&L.name!=="Unknown");if(V.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(f.value==="overwrite"){if(p.value===""){alert("Please select a time table to overwrite");return}const L=parseInt(p.value);s.value[L]={...s.value[L],schedule:V}}else{const L=E(m.value);if(!L)return;const z={name:L,days:["monday","tuesday","wednesday","thursday","friday"],schedule:V};s.value.push(z)}u.value=[],d.value=[],f.value="overwrite",p.value="",m.value="",alert("Time table imported successfully!")}catch(N){console.error("Error importing time table:",N),alert("Error importing time table. Please check your file format and try again.")}}function F(){u.value=[],d.value=[],f.value="overwrite",p.value="",m.value=""}return jt(x),(N,V)=>(U(),j("div",Ane,[h("div",wne,[V[7]||(V[7]=h("h1",null,"Time Table Management",-1)),h("div",Cne,[h("button",{onClick:b,class:"admin-action-btn primary",disabled:n.value,style:{"min-width":"160px","max-width":"160px"}},te(n.value?"Saving...":"Save Time Tables"),9,Ine),h("button",{onClick:y,class:"admin-action-btn secondary",style:{"min-width":"140px","max-width":"140px"}}," Add Time Table ")])]),h("div",kne,[h("button",{onClick:D,class:"admin-action-btn info",style:{"min-width":"150px","max-width":"150px"}},"Import CSV/XLSX"),h("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:O},null,544),V[8]||(V[8]=h("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(U(),j("div",Dne,[V[13]||(V[13]=h("h3",null,"Preview Imported Time Table",-1)),h("table",null,[h("thead",null,[h("tr",null,[(U(!0),j(Fe,null,je(d.value,L=>(U(),j("th",{key:L},te(L),1))),128))])]),h("tbody",null,[(U(!0),j(Fe,null,je(u.value,(L,z)=>(U(),j("tr",{key:z},[(U(!0),j(Fe,null,je(d.value,H=>(U(),j("td",{key:H},te(L[H]),1))),128))]))),128))])]),h("div",Pne,[V[12]||(V[12]=h("h4",null,"Import Options",-1)),h("div",Fne,[h("label",null,[Ve(h("input",{type:"radio","onUpdate:modelValue":V[0]||(V[0]=L=>f.value=L),value:"overwrite"},null,512),[[ra,f.value]]),V[9]||(V[9]=Ne(" Overwrite existing time table: "))]),Ve(h("select",{"onUpdate:modelValue":V[1]||(V[1]=L=>p.value=L),disabled:f.value!=="overwrite",class:"form-select"},[V[10]||(V[10]=h("option",{value:""},"Select a time table...",-1)),(U(!0),j(Fe,null,je(s.value,(L,z)=>(U(),j("option",{key:z,value:z},te(L.name),9,One))),128))],8,Rne),[[vr,p.value]])]),h("div",Nne,[h("label",null,[Ve(h("input",{type:"radio","onUpdate:modelValue":V[2]||(V[2]=L=>f.value=L),value:"create"},null,512),[[ra,f.value]]),V[11]||(V[11]=Ne(" Create new time table: "))]),Ve(h("input",{"onUpdate:modelValue":V[3]||(V[3]=L=>m.value=L),type:"text",placeholder:"Enter time table name...",disabled:f.value!=="create",class:"form-input"},null,8,Mne),[[At,m.value]])])]),h("div",Lne,[h("button",{onClick:R,class:"btn btn-primary",disabled:!g.value},te(f.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,Bne),h("button",{onClick:F,class:"btn btn-secondary"},"Cancel")])])):Ae("",!0),h("div",Une,[r.value?(U(),j("div",Vne," Loading time tables... ")):(U(),j("div",$ne,[s.value.length===0?(U(),j("div",jne,[V[14]||(V[14]=h("h3",null,"No Time Tables Created",-1)),V[15]||(V[15]=h("p",null,"Create your first time table to get started.",-1)),h("button",{onClick:y,class:"btn btn-primary"},"Create Time Table")])):(U(),j("div",Hne,[(U(!0),j(Fe,null,je(s.value,(L,z)=>(U(),j("div",{key:z,class:"time-table-card"},[h("div",Gne,[h("div",Wne,[h("h3",null,te(L.name),1),h("p",zne,te(T(L.days)),1)]),h("div",Kne,[h("button",{onClick:H=>C(z),class:"admin-action-btn edit"}," Edit ",8,qne),h("button",{onClick:H=>P(z),class:"admin-action-btn delete"}," Delete ",8,Xne)])]),h("div",Yne,[(U(!0),j(Fe,null,je(L.schedule,(H,B)=>(U(),j("div",{key:B,class:"schedule-item"},[h("div",Qne,[h("span",Jne,te(H.name),1),h("span",Zne,te(I(H.startTime))+" - "+te(I(H.endTime)),1)]),h("div",ese,[h("span",{class:et(["type-badge",H.type])},te(H.type),3)])]))),128))])]))),128))]))]))]),i.value?(U(),j("div",{key:1,class:"edit-dialog-overlay",onClick:_},[h("div",{class:"edit-dialog",onClick:V[6]||(V[6]=fn(()=>{},["stop"]))},[h("div",tse,[h("h2",null,te(a.value===-1?"Create Time Table":"Edit Time Table"),1),h("button",{onClick:_,class:"btn-close"},"×")]),h("div",rse,[h("div",nse,[V[16]||(V[16]=h("label",{for:"timeTableName"},"Time Table Name",-1)),Ve(h("input",{id:"timeTableName","onUpdate:modelValue":V[4]||(V[4]=L=>o.value.name=L),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[At,o.value.name]])]),h("div",sse,[V[17]||(V[17]=h("label",null,"Days This Schedule Applies",-1)),h("div",ase,[(U(),j(Fe,null,je(l,L=>h("label",{key:L.value,class:"day-checkbox"},[Ve(h("input",{type:"checkbox",value:L.value,"onUpdate:modelValue":V[5]||(V[5]=z=>o.value.days=z)},null,8,ise),[[xt,o.value.days]]),Ne(" "+te(L.label),1)])),64))])]),h("div",ose,[V[20]||(V[20]=h("label",null,"Schedule Items",-1)),h("div",lse,[(U(!0),j(Fe,null,je(o.value.schedule,(L,z)=>(U(),j("div",{key:z,class:"schedule-item-edit"},[h("div",cse,[Ve(h("input",{"onUpdate:modelValue":H=>L.name=H,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,use),[[At,L.name]]),Ve(h("select",{"onUpdate:modelValue":H=>L.type=H,class:"form-select item-type-select"},V[18]||(V[18]=[h("option",{value:"period"},"Period",-1),h("option",{value:"break"},"Break",-1),h("option",{value:"lunch"},"Lunch",-1),h("option",{value:"other"},"Other",-1)]),8,dse),[[vr,L.type]]),Ve(h("input",{"onUpdate:modelValue":H=>L.startTime=H,type:"time",class:"form-input time-input"},null,8,fse),[[At,L.startTime]]),V[19]||(V[19]=h("span",{class:"time-separator"},"to",-1)),Ve(h("input",{"onUpdate:modelValue":H=>L.endTime=H,type:"time",class:"form-input time-input"},null,8,hse),[[At,L.endTime]]),h("button",{onClick:H=>w(z),class:"admin-action-btn delete"}," Delete ",8,pse)])]))),128)),h("button",{onClick:k,class:"admin-action-btn secondary",style:{"min-width":"150px","max-width":"150px"}}," Add Schedule Item ")])])]),h("div",{class:"admin-action-btns"},[h("button",{onClick:_,class:"admin-action-btn cancel",style:{"min-width":"100px","max-width":"100px"}},"Cancel"),h("button",{onClick:S,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},"Save Time Table")])])])):Ae("",!0)]))}},rk=yt(mse,[["__scopeId","data-v-428c8e72"]]);function gse(){const t=ue({}),e=ue(!1);async function r(){e.value=!0;try{const d=await Qt(Ft(Ye,"aideSchedules")),f={};d.forEach(p=>{f[p.id]=p.data()}),t.value=f}catch(d){console.error("Error loading aide schedules:",d),t.value={}}finally{e.value=!1}}async function n(d){e.value=!0;try{const f=await sr(at(Ye,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={schedule:{},directAssignment:[]}}catch(f){console.error("Error loading aide schedule:",f),t.value[d]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f,p=!0){try{const m=JSON.parse(JSON.stringify(f));p?await tr(at(Ye,"aideSchedules",d),m,{merge:!0}):await tr(at(Ye,"aideSchedules",d),m),t.value[d]=m}catch(m){throw console.error("Error saving aide schedule:",m),m}}async function i(){try{const d=Object.entries(t.value);for(const[f,p]of d){const m=JSON.parse(JSON.stringify(p));await tr(at(Ye,"aideSchedules",f),m,{merge:!0})}}catch(d){throw console.error("Error saving all aide schedules:",d),d}}function a(d,f){const p=[];return Object.entries(t.value).forEach(([m,g])=>{g.schedule&&g.schedule[f]&&(Array.isArray(g.schedule[f])?g.schedule[f]:[g.schedule[f]]).includes(d)&&p.push(m)}),p}function o(d){var p;const f=(p=t.value[d])==null?void 0:p.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(p=>{var g;const m=(g=t.value[p])==null?void 0:g.directAssignment;return Array.isArray(m)?m.includes(d):m===d})||null}function c(d,f,p){const m=[],g=t.value[d];return g&&((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).forEach(E=>{if(E){const x=f.find(y=>y.id===E);x&&m.push({...x,assignmentType:"direct"})}}),Object.entries(g.schedule||{}).forEach(([E,x])=>{x&&(Array.isArray(x)?x:[x]).forEach(C=>{C&&f.forEach(P=>{if(P.schedule&&P.schedule[E]===C){const k=m.findIndex(w=>w.id===P.id);k===-1?m.push({...P,assignmentType:"class",period:E,teacherId:C}):(m[k].assignmentType="both",m[k].period=E,m[k].teacherId=C)}})})})),m}function u(d,f,p,m){if(!d||!f||!p||!m)return!1;const g=p.find(C=>C.id===f);if(!g)return!1;const v=t.value[d];if(!v)return!1;if((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).includes(f))return!0;if(!g.schedule)return!1;const x=v.schedule||{};return Object.entries(g.schedule).some(([C,P])=>{const k=x[C];return k?(Array.isArray(k)?k:[k]).includes(P):!1})}return{aideSchedule:be(()=>t.value),loading:be(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var vse={exports:{}};const xse=mx(fR);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function X2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X2(Object(r),!0).forEach(function(n){yse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u0=function(e){return typeof e}:u0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}function yse(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Us(){return Us=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Us.apply(this,arguments)}function Ese(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function _se(t,e){if(t==null)return{};var r=Ese(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bse(t){return Sse(t)||Tse(t)||Ase(t)||wse()}function Sse(t){if(Array.isArray(t))return _v(t)}function Tse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ase(t,e){if(t){if(typeof t=="string")return _v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(t,e)}}function _v(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Cse="1.14.0";function si(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var yi=si(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zd=si(/Edge/i),Y2=si(/firefox/i),ju=si(/safari/i)&&!si(/chrome/i)&&!si(/android/i),nk=si(/iP(ad|od|hone)/i),Ise=si(/chrome/i)&&si(/android/i),sk={capture:!1,passive:!1};function Vt(t,e,r){t.addEventListener(e,r,!yi&&sk)}function Bt(t,e,r){t.removeEventListener(e,r,!yi&&sk)}function dh(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function kse(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Xs(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&dh(t,e):dh(t,e))||n&&t===r)return t;if(t===r)break}while(t=kse(t))}return null}var Q2=/\s+/g;function kr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Q2," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(Q2," ")}}function ht(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Lo(t,e){var r="";if(typeof t=="string")r=t;else do{var n=ht(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function ak(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function Ca(){var t=document.scrollingElement;return t||document.documentElement}function wr(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,d;if(t!==window&&t.parentNode&&t!==Ca()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!yi))do if(s&&s.getBoundingClientRect&&(ht(s,"transform")!=="none"||r&&ht(s,"position")!=="static")){var f=s.getBoundingClientRect();a-=f.top+parseInt(ht(s,"border-top-width")),o-=f.left+parseInt(ht(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var p=Lo(s||t),m=p&&p.a,g=p&&p.d;p&&(a/=g,o/=m,d/=m,u/=g,l=a+u,c=o+d)}return{top:a,left:o,bottom:l,right:c,width:d,height:u}}}function J2(t,e,r){for(var n=zi(t,!0),s=wr(t)[e];n;){var i=wr(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===Ca())break;n=zi(n,!1)}return!1}function _c(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==_t.ghost&&(n||a[i]!==_t.dragged)&&Xs(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function Wx(t,e){for(var r=t.lastElementChild;r&&(r===_t.ghost||ht(r,"display")==="none"||e&&!dh(r,e));)r=r.previousElementSibling;return r||null}function Or(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_t.clone&&(!e||dh(t,e))&&r++;return r}function Z2(t){var e=0,r=0,n=Ca();if(t)do{var s=Lo(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function Dse(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function zi(t,e){if(!t||!t.getBoundingClientRect)return Ca();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=ht(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Ca();if(n||e)return r;n=!0}}while(r=r.parentNode);return Ca()}function Pse(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Zm(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Hu;function ik(t,e){return function(){if(!Hu){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),Hu=setTimeout(function(){Hu=void 0},e)}}}function Fse(){clearTimeout(Hu),Hu=void 0}function ok(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function zx(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function eS(t,e){ht(t,"position","absolute"),ht(t,"top",e.top),ht(t,"left",e.left),ht(t,"width",e.width),ht(t,"height",e.height)}function eg(t){ht(t,"position",""),ht(t,"top",""),ht(t,"left",""),ht(t,"width",""),ht(t,"height","")}var $n="Sortable"+new Date().getTime();function Rse(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(ht(s,"display")==="none"||s===_t.ghost)){t.push({target:s,rect:wr(s)});var i=Fa({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Lo(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(Dse(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,d=wr(c),f=c.prevFromRect,p=c.prevToRect,m=o.rect,g=Lo(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&Zm(f,d)&&!Zm(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Nse(m,f,p,s.options)),Zm(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,m,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){ht(n,"transition",""),ht(n,"transform","");var o=Lo(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),d=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!d,ht(n,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Ose(n),ht(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),ht(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){ht(n,"transition",""),ht(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function Ose(t){return t.offsetWidth}function Nse(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Al=[],tg={initializeByDefault:!0},ef={mount:function(e){for(var r in tg)tg.hasOwnProperty(r)&&!(r in e)&&(e[r]=tg[r]);Al.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Al.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Al.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Fa({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Fa({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Al.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,Us(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return Al.forEach(function(s){typeof s.eventProperties=="function"&&Us(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Al.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function fu(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,p=t.putSortable,m=t.extraEventProperties;if(e=e||r&&r[$n],!!e){var g,v=e.options,E="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!yi&&!Zd?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=a||r,g.from=o||r,g.item=s||r,g.clone=i,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=p?p.lastPutMode:void 0;var x=Fa(Fa({},m),ef.getEventProperties(n,e));for(var y in x)g[y]=x[y];r&&r.dispatchEvent(g),v[E]&&v[E].call(e,g)}}var Mse=["evt"],cs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=_se(n,Mse);ef.pluginEvent.bind(_t)(e,r,Fa({dragEl:Ze,parentEl:Fr,ghostEl:Ot,rootEl:Tr,nextEl:bo,lastDownEl:d0,cloneEl:Rr,cloneHidden:ji,dragStarted:hu,putSortable:vn,activeSortable:_t.active,originalEvent:s,oldIndex:Vl,oldDraggableIndex:Gu,newIndex:ys,newDraggableIndex:Mi,hideGhostForTarget:dk,unhideGhostForTarget:fk,cloneNowHidden:function(){ji=!0},cloneNowShown:function(){ji=!1},dispatchSortableEvent:function(o){Zn({sortable:r,name:o,originalEvent:s})}},i))};function Zn(t){fu(Fa({putSortable:vn,cloneEl:Rr,targetEl:Ze,rootEl:Tr,oldIndex:Vl,oldDraggableIndex:Gu,newIndex:ys,newDraggableIndex:Mi},t))}var Ze,Fr,Ot,Tr,bo,d0,Rr,ji,Vl,ys,Gu,Mi,$f,vn,Nl=!1,fh=!1,hh=[],yo,Ks,rg,ng,tS,rS,hu,wl,Wu,zu=!1,jf=!1,f0,On,sg=[],bv=!1,ph=[],_p=typeof document<"u",Hf=nk,nS=Zd||yi?"cssFloat":"float",Lse=_p&&!Ise&&!nk&&"draggable"in document.createElement("div"),lk=function(){if(_p){if(yi)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),ck=function(e,r){var n=ht(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=_c(e,0,r),a=_c(e,1,r),o=i&&ht(i),l=a&&ht(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+wr(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+wr(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var d=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[nS]==="none"||a&&n[nS]==="none"&&c+u>s)?"vertical":"horizontal"},Bse=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},Use=function(e,r){var n;return hh.some(function(s){var i=s[$n].options.emptyInsertThreshold;if(!(!i||Wx(s))){var a=wr(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},uk=function(e){function r(i,a){return function(o,l,c,u){var d=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var f=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},s=e.group;(!s||u0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},dk=function(){!lk&&Ot&&ht(Ot,"display","none")},fk=function(){!lk&&Ot&&ht(Ot,"display","")};_p&&document.addEventListener("click",function(t){if(fh)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),fh=!1,!1},!0);var Eo=function(e){if(Ze){e=e.touches?e.touches[0]:e;var r=Use(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[$n]._onDragOver(n)}}},Vse=function(e){Ze&&Ze.parentNode[$n]._isOutsideThisEl(e.target)};function _t(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Us({},e),t[$n]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ck(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_t.supportPointer!==!1&&"PointerEvent"in window&&!ju,emptyInsertThreshold:5};ef.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);uk(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Lse,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Vt(t,"pointerdown",this._onTapStart):(Vt(t,"mousedown",this._onTapStart),Vt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Vt(t,"dragover",this),Vt(t,"dragenter",this)),hh.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Us(this,Rse())}_t.prototype={constructor:_t,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(wl=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,Ze):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(qse(n),!Ze&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&ju&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Xs(l,s.draggable,n,!1),!(l&&l.animated)&&d0!==l)){if(Vl=Or(l),Gu=Or(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Zn({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),cs("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Xs(c,d.trim(),n,!1),d)return Zn({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),cs("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!Xs(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!Ze&&n.parentNode===i){var c=wr(n);if(Tr=i,Ze=n,Fr=Ze.parentNode,bo=Ze.nextSibling,d0=n,$f=a.group,_t.dragged=Ze,yo={target:Ze,clientX:(r||e).clientX,clientY:(r||e).clientY},tS=yo.clientX-c.left,rS=yo.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,Ze.style["will-change"]="all",l=function(){if(cs("delayEnded",s,{evt:e}),_t.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Y2&&s.nativeDraggable&&(Ze.draggable=!0),s._triggerDragStart(e,r),Zn({sortable:s,name:"choose",originalEvent:e}),kr(Ze,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){ak(Ze,u.trim(),ag)}),Vt(o,"dragover",Eo),Vt(o,"mousemove",Eo),Vt(o,"touchmove",Eo),Vt(o,"mouseup",s._onDrop),Vt(o,"touchend",s._onDrop),Vt(o,"touchcancel",s._onDrop),Y2&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ze.draggable=!0),cs("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Zd||yi))){if(_t.eventCanceled){this._onDrop();return}Vt(o,"mouseup",s._disableDelayedDrag),Vt(o,"touchend",s._disableDelayedDrag),Vt(o,"touchcancel",s._disableDelayedDrag),Vt(o,"mousemove",s._delayedDragTouchMoveHandler),Vt(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Vt(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ze&&ag(Ze),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Bt(e,"mouseup",this._disableDelayedDrag),Bt(e,"touchend",this._disableDelayedDrag),Bt(e,"touchcancel",this._disableDelayedDrag),Bt(e,"mousemove",this._delayedDragTouchMoveHandler),Bt(e,"touchmove",this._delayedDragTouchMoveHandler),Bt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?Vt(document,"pointermove",this._onTouchMove):r?Vt(document,"touchmove",this._onTouchMove):Vt(document,"mousemove",this._onTouchMove):(Vt(Ze,"dragend",this),Vt(Tr,"dragstart",this._onDragStart));try{document.selection?h0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Nl=!1,Tr&&Ze){cs("dragStarted",this,{evt:r}),this.nativeDraggable&&Vt(document,"dragover",Vse);var n=this.options;!e&&kr(Ze,n.dragClass,!1),kr(Ze,n.ghostClass,!0),_t.active=this,e&&this._appendGhost(),Zn({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(Ks){this._lastX=Ks.clientX,this._lastY=Ks.clientY,dk();for(var e=document.elementFromPoint(Ks.clientX,Ks.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ks.clientX,Ks.clientY),e!==r);)r=e;if(Ze.parentNode[$n]._isOutsideThisEl(e),r)do{if(r[$n]){var n=void 0;if(n=r[$n]._onDragOver({clientX:Ks.clientX,clientY:Ks.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);fk()}},_onTouchMove:function(e){if(yo){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Ot&&Lo(Ot,!0),o=Ot&&a&&a.a,l=Ot&&a&&a.d,c=Hf&&On&&Z2(On),u=(i.clientX-yo.clientX+s.x)/(o||1)+(c?c[0]-sg[0]:0)/(o||1),d=(i.clientY-yo.clientY+s.y)/(l||1)+(c?c[1]-sg[1]:0)/(l||1);if(!_t.active&&!Nl){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Ot){a?(a.e+=u-(rg||0),a.f+=d-(ng||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ht(Ot,"webkitTransform",f),ht(Ot,"mozTransform",f),ht(Ot,"msTransform",f),ht(Ot,"transform",f),rg=u,ng=d,Ks=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ot){var e=this.options.fallbackOnBody?document.body:Tr,r=wr(Ze,!0,Hf,!0,e),n=this.options;if(Hf){for(On=e;ht(On,"position")==="static"&&ht(On,"transform")==="none"&&On!==document;)On=On.parentNode;On!==document.body&&On!==document.documentElement?(On===document&&(On=Ca()),r.top+=On.scrollTop,r.left+=On.scrollLeft):On=Ca(),sg=Z2(On)}Ot=Ze.cloneNode(!0),kr(Ot,n.ghostClass,!1),kr(Ot,n.fallbackClass,!0),kr(Ot,n.dragClass,!0),ht(Ot,"transition",""),ht(Ot,"transform",""),ht(Ot,"box-sizing","border-box"),ht(Ot,"margin",0),ht(Ot,"top",r.top),ht(Ot,"left",r.left),ht(Ot,"width",r.width),ht(Ot,"height",r.height),ht(Ot,"opacity","0.8"),ht(Ot,"position",Hf?"absolute":"fixed"),ht(Ot,"zIndex","100000"),ht(Ot,"pointerEvents","none"),_t.ghost=Ot,e.appendChild(Ot),ht(Ot,"transform-origin",tS/parseInt(Ot.style.width)*100+"% "+rS/parseInt(Ot.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(cs("dragStart",this,{evt:e}),_t.eventCanceled){this._onDrop();return}cs("setupClone",this),_t.eventCanceled||(Rr=zx(Ze),Rr.draggable=!1,Rr.style["will-change"]="",this._hideClone(),kr(Rr,this.options.chosenClass,!1),_t.clone=Rr),n.cloneId=h0(function(){cs("clone",n),!_t.eventCanceled&&(n.options.removeCloneOnHide||Tr.insertBefore(Rr,Ze),n._hideClone(),Zn({sortable:n,name:"clone"}))}),!r&&kr(Ze,i.dragClass,!0),r?(fh=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Bt(document,"mouseup",n._onDrop),Bt(document,"touchend",n._onDrop),Bt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,Ze)),Vt(document,"drop",n),ht(Ze,"transform","translateZ(0)")),Nl=!0,n._dragStartId=h0(n._dragStarted.bind(n,r,e)),Vt(document,"selectstart",n),hu=!0,ju&&ht(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=_t.active,u=$f===l,d=o.sort,f=vn||c,p,m=this,g=!1;if(bv)return;function v(V,L){cs(V,m,Fa({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:d,fromSortable:f,target:n,completed:x,onMove:function(H,B){return Gf(Tr,r,Ze,s,H,wr(H),e,B)},changed:y},L))}function E(){v("dragOverAnimationCapture"),m.captureAnimationState(),m!==f&&f.captureAnimationState()}function x(V){return v("dragOverCompleted",{insertion:V}),V&&(u?c._hideClone():c._showClone(m),m!==f&&(kr(Ze,vn?vn.options.ghostClass:c.options.ghostClass,!1),kr(Ze,o.ghostClass,!0)),vn!==m&&m!==_t.active?vn=m:m===_t.active&&vn&&(vn=null),f===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){v("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===Ze&&!Ze.animated||n===r&&!n.animated)&&(wl=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(Ze.parentNode[$n]._isOutsideThisEl(e.target),!V&&Eo(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function y(){ys=Or(Ze),Mi=Or(Ze,o.draggable),Zn({sortable:m,name:"change",toEl:r,newIndex:ys,newDraggableIndex:Mi,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Xs(n,o.draggable,r,!0),v("dragOver"),_t.eventCanceled)return g;if(Ze.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return x(!1);if(fh=!1,c&&!o.disabled&&(u?d||(a=Fr!==Tr):vn===this||(this.lastPutMode=$f.checkPull(this,c,Ze,e))&&l.checkPut(this,c,Ze,e))){if(p=this._getDirection(e,n)==="vertical",s=wr(Ze),v("dragOverValid"),_t.eventCanceled)return g;if(a)return Fr=Tr,E(),this._hideClone(),v("revert"),_t.eventCanceled||(bo?Tr.insertBefore(Ze,bo):Tr.appendChild(Ze)),x(!0);var C=Wx(r,o.draggable);if(!C||Gse(e,p,this)&&!C.animated){if(C===Ze)return x(!1);if(C&&r===e.target&&(n=C),n&&(i=wr(n)),Gf(Tr,r,Ze,s,n,i,e,!!n)!==!1)return E(),r.appendChild(Ze),Fr=r,y(),x(!0)}else if(C&&Hse(e,p,this)){var P=_c(r,0,o,!0);if(P===Ze)return x(!1);if(n=P,i=wr(n),Gf(Tr,r,Ze,s,n,i,e,!1)!==!1)return E(),r.insertBefore(Ze,P),Fr=r,y(),x(!0)}else if(n.parentNode===r){i=wr(n);var k=0,w,S=Ze.parentNode!==r,_=!Bse(Ze.animated&&Ze.toRect||s,n.animated&&n.toRect||i,p),b=p?"top":"left",T=J2(n,"top","top")||J2(Ze,"top","top"),I=T?T.scrollTop:void 0;wl!==n&&(w=i[b],zu=!1,jf=!_&&o.invertSwap||S),k=Wse(e,n,i,p,_?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,jf,wl===n);var D;if(k!==0){var O=Or(Ze);do O-=k,D=Fr.children[O];while(D&&(ht(D,"display")==="none"||D===Ot))}if(k===0||D===n)return x(!1);wl=n,Wu=k;var R=n.nextElementSibling,F=!1;F=k===1;var N=Gf(Tr,r,Ze,s,n,i,e,F);if(N!==!1)return(N===1||N===-1)&&(F=N===1),bv=!0,setTimeout(jse,30),E(),F&&!R?r.appendChild(Ze):n.parentNode.insertBefore(Ze,F?R:n),T&&ok(T,0,I-T.scrollTop),Fr=Ze.parentNode,w!==void 0&&!jf&&(f0=Math.abs(w-wr(n)[b])),y(),x(!0)}if(r.contains(Ze))return x(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Bt(document,"mousemove",this._onTouchMove),Bt(document,"touchmove",this._onTouchMove),Bt(document,"pointermove",this._onTouchMove),Bt(document,"dragover",Eo),Bt(document,"mousemove",Eo),Bt(document,"touchmove",Eo)},_offUpEvents:function(){var e=this.el.ownerDocument;Bt(e,"mouseup",this._onDrop),Bt(e,"touchend",this._onDrop),Bt(e,"pointerup",this._onDrop),Bt(e,"touchcancel",this._onDrop),Bt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(ys=Or(Ze),Mi=Or(Ze,n.draggable),cs("drop",this,{evt:e}),Fr=Ze&&Ze.parentNode,ys=Or(Ze),Mi=Or(Ze,n.draggable),_t.eventCanceled){this._nulling();return}Nl=!1,jf=!1,zu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Sv(this.cloneId),Sv(this._dragStartId),this.nativeDraggable&&(Bt(document,"drop",this),Bt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ju&&ht(document.body,"user-select",""),ht(Ze,"transform",""),e&&(hu&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Ot&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),(Tr===Fr||vn&&vn.lastPutMode!=="clone")&&Rr&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),Ze&&(this.nativeDraggable&&Bt(Ze,"dragend",this),ag(Ze),Ze.style["will-change"]="",hu&&!Nl&&kr(Ze,vn?vn.options.ghostClass:this.options.ghostClass,!1),kr(Ze,this.options.chosenClass,!1),Zn({sortable:this,name:"unchoose",toEl:Fr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Tr!==Fr?(ys>=0&&(Zn({rootEl:Fr,name:"add",toEl:Fr,fromEl:Tr,originalEvent:e}),Zn({sortable:this,name:"remove",toEl:Fr,originalEvent:e}),Zn({rootEl:Fr,name:"sort",toEl:Fr,fromEl:Tr,originalEvent:e}),Zn({sortable:this,name:"sort",toEl:Fr,originalEvent:e})),vn&&vn.save()):ys!==Vl&&ys>=0&&(Zn({sortable:this,name:"update",toEl:Fr,originalEvent:e}),Zn({sortable:this,name:"sort",toEl:Fr,originalEvent:e})),_t.active&&((ys==null||ys===-1)&&(ys=Vl,Mi=Gu),Zn({sortable:this,name:"end",toEl:Fr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){cs("nulling",this),Tr=Ze=Fr=Ot=bo=Rr=d0=ji=yo=Ks=hu=ys=Mi=Vl=Gu=wl=Wu=vn=$f=_t.dragged=_t.ghost=_t.clone=_t.active=null,ph.forEach(function(e){e.checked=!0}),ph.length=rg=ng=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ze&&(this._onDragOver(e),$se(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],Xs(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||Kse(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];Xs(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return Xs(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=ef.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&uk(n)},destroy:function(){cs("destroy",this);var e=this.el;e[$n]=null,Bt(e,"mousedown",this._onTapStart),Bt(e,"touchstart",this._onTapStart),Bt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Bt(e,"dragover",this),Bt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),hh.splice(hh.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ji){if(cs("hideClone",this),_t.eventCanceled)return;ht(Rr,"display","none"),this.options.removeCloneOnHide&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),ji=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ji){if(cs("showClone",this),_t.eventCanceled)return;Ze.parentNode==Tr&&!this.options.group.revertClone?Tr.insertBefore(Rr,Ze):bo?Tr.insertBefore(Rr,bo):Tr.appendChild(Rr),this.options.group.revertClone&&this.animate(Ze,Rr),ht(Rr,"display",""),ji=!1}}};function $se(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Gf(t,e,r,n,s,i,a,o){var l,c=t[$n],u=c.options.onMove,d;return window.CustomEvent&&!yi&&!Zd?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||wr(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function ag(t){t.draggable=!1}function jse(){bv=!1}function Hse(t,e,r){var n=wr(_c(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function Gse(t,e,r){var n=wr(Wx(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function Wse(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,f=!1;if(!a){if(o&&f0<c*s){if(!zu&&(Wu===1?l>u+c*i/2:l<d-c*i/2)&&(zu=!0),zu)f=!0;else if(Wu===1?l<u+f0:l>d-f0)return-Wu}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return zse(e)}return f=f||a,f&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function zse(t){return Or(Ze)<Or(t)?1:-1}function Kse(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function qse(t){ph.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&ph.push(n)}}function h0(t){return setTimeout(t,0)}function Sv(t){return clearTimeout(t)}_p&&Vt(document,"touchmove",function(t){(_t.active||Nl)&&t.cancelable&&t.preventDefault()});_t.utils={on:Vt,off:Bt,css:ht,find:ak,is:function(e,r){return!!Xs(e,r,e,!1)},extend:Pse,throttle:ik,closest:Xs,toggleClass:kr,clone:zx,index:Or,nextTick:h0,cancelNextTick:Sv,detectDirection:ck,getChild:_c};_t.get=function(t){return t[$n]};_t.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(_t.utils=Fa(Fa({},_t.utils),n.utils)),ef.mount(n)})};_t.create=function(t,e){return new _t(t,e)};_t.version=Cse;var zr=[],pu,Tv,Av=!1,ig,og,mh,mu;function Xse(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Vt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Vt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Vt(document,"touchmove",this._handleFallbackAutoScroll):Vt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Bt(document,"dragover",this._handleAutoScroll):(Bt(document,"pointermove",this._handleFallbackAutoScroll),Bt(document,"touchmove",this._handleFallbackAutoScroll),Bt(document,"mousemove",this._handleFallbackAutoScroll)),sS(),p0(),Fse()},nulling:function(){mh=Tv=pu=Av=mu=ig=og=null,zr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(mh=r,n||this.options.forceAutoScrollFallback||Zd||yi||ju){lg(r,this.options,o,n);var l=zi(o,!0);Av&&(!mu||i!==ig||a!==og)&&(mu&&sS(),mu=setInterval(function(){var c=zi(document.elementFromPoint(i,a),!0);c!==l&&(l=c,p0()),lg(r,s.options,c,n)},10),ig=i,og=a)}else{if(!this.options.bubbleScroll||zi(o,!0)===Ca()){p0();return}lg(r,this.options,zi(o,!1),!1)}}},Us(t,{pluginName:"scroll",initializeByDefault:!0})}function p0(){zr.forEach(function(t){clearInterval(t.pid)}),zr=[]}function sS(){clearInterval(mu)}var lg=ik(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Ca(),c=!1,u;Tv!==r&&(Tv=r,p0(),pu=e.scroll,u=e.scrollFn,pu===!0&&(pu=zi(r,!0)));var d=0,f=pu;do{var p=f,m=wr(p),g=m.top,v=m.bottom,E=m.left,x=m.right,y=m.width,C=m.height,P=void 0,k=void 0,w=p.scrollWidth,S=p.scrollHeight,_=ht(p),b=p.scrollLeft,T=p.scrollTop;p===l?(P=y<w&&(_.overflowX==="auto"||_.overflowX==="scroll"||_.overflowX==="visible"),k=C<S&&(_.overflowY==="auto"||_.overflowY==="scroll"||_.overflowY==="visible")):(P=y<w&&(_.overflowX==="auto"||_.overflowX==="scroll"),k=C<S&&(_.overflowY==="auto"||_.overflowY==="scroll"));var I=P&&(Math.abs(x-s)<=a&&b+y<w)-(Math.abs(E-s)<=a&&!!b),D=k&&(Math.abs(v-i)<=a&&T+C<S)-(Math.abs(g-i)<=a&&!!T);if(!zr[d])for(var O=0;O<=d;O++)zr[O]||(zr[O]={});(zr[d].vx!=I||zr[d].vy!=D||zr[d].el!==p)&&(zr[d].el=p,zr[d].vx=I,zr[d].vy=D,clearInterval(zr[d].pid),(I!=0||D!=0)&&(c=!0,zr[d].pid=setInterval((function(){n&&this.layer===0&&_t.active._onTouchMove(mh);var R=zr[this.layer].vy?zr[this.layer].vy*o:0,F=zr[this.layer].vx?zr[this.layer].vx*o:0;typeof u=="function"&&u.call(_t.dragged.parentNode[$n],F,R,t,mh,zr[this.layer].el)!=="continue"||ok(zr[this.layer].el,F,R)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=zi(f,!1)));Av=c}},30),hk=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Kx(){}Kx.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=_c(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:hk};Us(Kx,{pluginName:"revertOnSpill"});function qx(){}qx.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:hk};Us(qx,{pluginName:"removeOnSpill"});var Ds;function Yse(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;Ds=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var d=Ds;i(s)!==!1?(kr(s,u.swapClass,!0),Ds=s):Ds=null,d&&d!==Ds&&kr(d,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;Ds&&kr(Ds,o.swapClass,!1),Ds&&(o.swap||s&&s.options.swap)&&i!==Ds&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),Qse(i,Ds),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){Ds=null}},Us(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Ds}}})}function Qse(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=Or(t),i=Or(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var It=[],xs=[],eu,qs,tu=!1,us=!1,Cl=!1,pr,ru,Wf;function Jse(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?Vt(document,"pointerup",this._deselectMultiDrag):(Vt(document,"mouseup",this._deselectMultiDrag),Vt(document,"touchend",this._deselectMultiDrag)),Vt(document,"keydown",this._checkKeyDown),Vt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";It.length&&qs===e?It.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;pr=n},delayEnded:function(){this.isMultiDrag=~It.indexOf(pr)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<It.length;i++)xs.push(zx(It[i])),xs[i].sortableIndex=It[i].sortableIndex,xs[i].draggable=!1,xs[i].style["will-change"]="",kr(xs[i],this.options.selectedClass,!1),It[i]===pr&&kr(xs[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||It.length&&qs===n&&(aS(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(aS(!1,s),xs.forEach(function(a){ht(a,"display","")}),n(),Wf=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(xs.forEach(function(a){ht(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),Wf=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&qs&&qs.multiDrag._deselectMultiDrag(),It.forEach(function(n){n.sortableIndex=Or(n)}),It=It.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Cl=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){It.forEach(function(a){a!==pr&&ht(a,"position","absolute")});var i=wr(pr,!1,!0,!0);It.forEach(function(a){a!==pr&&eS(a,i)}),us=!0,tu=!0}s.animateAll(function(){us=!1,tu=!1,n.options.animation&&It.forEach(function(a){eg(a)}),n.options.sort&&zf()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;us&&~It.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;It.length>1&&(It.forEach(function(o){i.addAnimationState({target:o,rect:us?wr(o):a}),eg(o),o.fromRect=a,n.removeAnimationState(o)}),us=!1,Zse(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),tu=!1,c.animation&&It.length>1&&(us||!s&&!a.options.sort&&!l)){var u=wr(pr,!1,!0,!0);It.forEach(function(f){f!==pr&&(eS(f,u),o.appendChild(f))}),us=!0}if(!s)if(us||zf(),It.length>1){var d=Wf;a._showClone(n),a.options.animation&&!Wf&&d&&xs.forEach(function(f){a.addAnimationState({target:f,rect:ru}),f.fromRect=ru,f.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(It.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){ru=Us({},n);var a=Lo(pr,!0);ru.top-=a.f,ru.left-=a.e}},dragOverAnimationComplete:function(){us&&(us=!1,zf())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var d=this.options,f=i.children;if(!Cl)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),kr(pr,d.selectedClass,!~It.indexOf(pr)),~It.indexOf(pr))It.splice(It.indexOf(pr),1),eu=null,fu({sortable:a,rootEl:s,name:"deselect",targetEl:pr});else{if(It.push(pr),fu({sortable:a,rootEl:s,name:"select",targetEl:pr}),n.shiftKey&&eu&&a.el.contains(eu)){var p=Or(eu),m=Or(pr);if(~p&&~m&&p!==m){var g,v;for(m>p?(v=p,g=m):(v=m,g=p+1);v<g;v++)~It.indexOf(f[v])||(kr(f[v],d.selectedClass,!0),It.push(f[v]),fu({sortable:a,rootEl:s,name:"select",targetEl:f[v]}))}}else eu=pr;qs=u}if(Cl&&this.isMultiDrag){if(us=!1,(i[$n].options.sort||i!==s)&&It.length>1){var E=wr(pr),x=Or(pr,":not(."+this.options.selectedClass+")");if(!tu&&d.animation&&(pr.thisAnimationDuration=null),u.captureAnimationState(),!tu&&(d.animation&&(pr.fromRect=E,It.forEach(function(C){if(C.thisAnimationDuration=null,C!==pr){var P=us?wr(C):E;C.fromRect=P,u.addAnimationState({target:C,rect:P})}})),zf(),It.forEach(function(C){f[x]?i.insertBefore(C,f[x]):i.appendChild(C),x++}),l===Or(pr))){var y=!1;It.forEach(function(C){if(C.sortableIndex!==Or(C)){y=!0;return}}),y&&o("update")}It.forEach(function(C){eg(C)}),u.animateAll()}qs=u}(s===i||c&&c.lastPutMode!=="clone")&&xs.forEach(function(C){C.parentNode&&C.parentNode.removeChild(C)})}},nullingGlobal:function(){this.isMultiDrag=Cl=!1,xs.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Bt(document,"pointerup",this._deselectMultiDrag),Bt(document,"mouseup",this._deselectMultiDrag),Bt(document,"touchend",this._deselectMultiDrag),Bt(document,"keydown",this._checkKeyDown),Bt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Cl<"u"&&Cl)&&qs===this.sortable&&!(r&&Xs(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;It.length;){var n=It[0];kr(n,this.options.selectedClass,!1),It.shift(),fu({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Us(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[$n];!n||!n.options.multiDrag||~It.indexOf(r)||(qs&&qs!==n&&(qs.multiDrag._deselectMultiDrag(),qs=n),kr(r,n.options.selectedClass,!0),It.push(r))},deselect:function(r){var n=r.parentNode[$n],s=It.indexOf(r);!n||!n.options.multiDrag||!~s||(kr(r,n.options.selectedClass,!1),It.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return It.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;us&&i!==pr?a=-1:us?a=Or(i,":not(."+r.options.selectedClass+")"):a=Or(i),s.push({multiDragElement:i,index:a})}),{items:bse(It),clones:[].concat(xs),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function Zse(t,e){It.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function aS(t,e){xs.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function zf(){It.forEach(function(t){t!==pr&&t.parentNode&&t.parentNode.removeChild(t)})}_t.mount(new Xse);_t.mount(qx,Kx);const eae=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Jse,Sortable:_t,Swap:Yse,default:_t},Symbol.toStringTag,{value:"Module"})),tae=mx(eae);(function(t,e){(function(n,s){t.exports=s(xse,tae)})(typeof self<"u"?self:Lt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(d){return o[d]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,f){return l.call(c,d,f)};case 3:return function(d,f,p){return l.call(c,d,f,p)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return l(f)}catch{return u.slice()}};s.exports.f=function(p){return u&&c.call(p)=="[object Window]"?d(p):l(o(p))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),d=a("c04e"),f=a("5135"),p=a("0cfb"),m=Object.getOwnPropertyDescriptor;i.f=o?m:function(v,E){if(v=u(v),E=d(E,!0),p)try{return m(v,E)}catch{}if(f(v,E))return c(!l.f.call(v,E),v[E])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),d=c("reduce"),f=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!d||!f},{reduce:function(m){return l(this,m,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var f=d.call(c,u);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var d in l){var f=o[d],p=f&&f.prototype;if(p&&p.forEach!==c)try{u(p,"forEach",c)}catch{p.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),d=c("forEach");s.exports=!u||!d?function(p){return o(this,p,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(f,p){if(!p&&!c)return!1;var m=!1;try{var g={};g[l]=function(){return{next:function(){return{done:m=!0}}}},f(g)}catch{}return m}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(d){return c>=51||!o(function(){var f=[],p=f.constructor={};return p[u]=function(){return{foo:1}},f[d](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,d){var f=o(u);return f<0?l(f+d,0):c(f,d)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),d=a("ce4e"),f=a("e893"),p=a("94ca");s.exports=function(m,g){var v=m.target,E=m.global,x=m.stat,y,C,P,k,w,S;if(E?C=o:x?C=o[v]||d(v,{}):C=(o[v]||{}).prototype,C)for(P in g){if(w=g[P],m.noTargetGet?(S=l(C,P),k=S&&S.value):k=C[P],y=p(E?P:v+(x?".":"#")+P,m.forced),!y&&k!==void 0){if(typeof w==typeof k)continue;f(w,k)}(m.sham||k&&k.sham)&&c(w,"sham",!0),u(C,P,w,m)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(d){return o(d,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),d="toString",f=RegExp.prototype,p=f[d],m=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),g=p.name!=d;(m||g)&&o(RegExp.prototype,d,function(){var E=l(this),x=String(E.source),y=E.flags,C=String(y===void 0&&E instanceof RegExp&&!("flags"in f)?u.call(E):y);return"/"+x+"/"+C},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),d=a("1d80"),f=a("ab13"),p=a("c430"),m="".startsWith,g=Math.min,v=f("startsWith"),E=!p&&!v&&!!function(){var x=l(String.prototype,"startsWith");return x&&!x.writable}();o({target:"String",proto:!0,forced:!E&&!v},{startsWith:function(y){var C=String(d(this));u(y);var P=c(g(arguments.length>1?arguments[1]:void 0,C.length)),k=String(y);return m?m.call(C,k,P):C.slice(P,P+k.length)===k}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,d=u&&u.v8,f,p;d?(f=d.split("."),p=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(p=f[1]))),s.exports=p&&+p},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||l[o(d)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(f,p){c(f);for(var m=u(p),g=m.length,v=0,E;g>v;)l.f(f,E=m[v++],p[E]);return f}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",d=l.set,f=l.getterFor(u);c(String,"String",function(p){d(this,{type:u,string:String(p),index:0})},function(){var m=f(this),g=m.string,v=m.index,E;return v>=g.length?{value:void 0,done:!0}:(E=o(g,v),m.index+=E.length,{value:E,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:l(null)}),s.exports=function(f){d[u][f]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(d){var f;return o(d)&&((f=d[u])!==void 0?!!f:l(d)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(d){return function(f,p,m){var g=o(f),v=l(g.length),E=c(m,v),x;if(d&&p!=p){for(;v>E;)if(x=g[E++],x!=x)return!0}else for(;v>E;E++)if((d||E in g)&&g[E]===p)return d||E||0;return!d&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),d=c("filter"),f=u("filter");o({target:"Array",proto:!0,forced:!d||!f},{filter:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),d=a("50c4"),f=a("8418"),p=a("35a1");s.exports=function(g){var v=l(g),E=typeof this=="function"?this:Array,x=arguments.length,y=x>1?arguments[1]:void 0,C=y!==void 0,P=p(v),k=0,w,S,_,b,T,I;if(C&&(y=o(y,x>2?arguments[2]:void 0,2)),P!=null&&!(E==Array&&u(P)))for(b=P.call(v),T=b.next,S=new E;!(_=T.call(b)).done;k++)I=C?c(b,y,[_.value,k],!0):_.value,f(S,k,I);else for(w=d(v.length),S=new E(w);w>k;k++)I=C?y(v[k],k):v[k],f(S,k,I);return S.length=k,S}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),d=a("a691"),f=a("1d80"),p=a("8aa5"),m=a("14c3"),g=Math.max,v=Math.min,E=Math.floor,x=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g,C=function(P){return P===void 0?P:String(P)};o("replace",2,function(P,k,w,S){var _=S.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=S.REPLACE_KEEPS_$0,T=_?"$":"$0";return[function(O,R){var F=f(this),N=O==null?void 0:O[P];return N!==void 0?N.call(O,F,R):k.call(String(F),O,R)},function(D,O){if(!_&&b||typeof O=="string"&&O.indexOf(T)===-1){var R=w(k,D,this,O);if(R.done)return R.value}var F=l(D),N=String(this),V=typeof O=="function";V||(O=String(O));var L=F.global;if(L){var z=F.unicode;F.lastIndex=0}for(var H=[];;){var B=m(F,N);if(B===null||(H.push(B),!L))break;var W=String(B[0]);W===""&&(F.lastIndex=p(N,u(F.lastIndex),z))}for(var K="",ee=0,me=0;me<H.length;me++){B=H[me];for(var le=String(B[0]),he=g(v(d(B.index),N.length),0),Z=[],Q=1;Q<B.length;Q++)Z.push(C(B[Q]));var ve=B.groups;if(V){var X=[le].concat(Z,he,N);ve!==void 0&&X.push(ve);var q=String(O.apply(void 0,X))}else q=I(le,N,he,Z,ve,O);he>=ee&&(K+=N.slice(ee,he)+q,ee=he+le.length)}return K+N.slice(ee)}];function I(D,O,R,F,N,V){var L=R+D.length,z=F.length,H=y;return N!==void 0&&(N=c(N),H=x),k.call(V,H,function(B,W){var K;switch(W.charAt(0)){case"$":return"$";case"&":return D;case"`":return O.slice(0,R);case"'":return O.slice(L);case"<":K=N[W.slice(1,-1)];break;default:var ee=+W;if(ee===0)return B;if(ee>z){var me=E(ee/10);return me===0?B:me<=z?F[me-1]===void 0?W.charAt(1):F[me-1]+W.charAt(1):B}K=F[ee-1]}return K===void 0?"":K})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(f){var p=l.f(u(f)),m=c.f;return m?p.concat(m(f)):p}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),d=a("1c0b"),f=a("65f0");o({target:"Array",proto:!0},{flatMap:function(m){var g=c(this),v=u(g.length),E;return d(m),E=f(g,0),E.length=l(E,g,g,v,0,1,m,arguments.length>1?arguments[1]:void 0),E}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(d,f){var p=String(l(d)),m=o(f),g=p.length,v,E;return m<0||m>=g?u?"":void 0:(v=p.charCodeAt(m),v<55296||v>56319||m+1===g||(E=p.charCodeAt(m+1))<56320||E>57343?u?p.charAt(m):v:u?p.slice(m,m+2):(v-55296<<10)+(E-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(d,f){var p;return l(d)&&(p=d.constructor,typeof p=="function"&&(p===Array||l(p.prototype))?p=void 0:o(p)&&(p=p[u],p===null&&(p=void 0))),new(p===void 0?Array:p)(f===0?0:f)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),d=a("5135"),f=a("f772"),p=a("d012"),m=l.WeakMap,g,v,E,x=function(_){return E(_)?v(_):g(_,{})},y=function(_){return function(b){var T;if(!c(b)||(T=v(b)).type!==_)throw TypeError("Incompatible receiver, "+_+" required");return T}};if(o){var C=new m,P=C.get,k=C.has,w=C.set;g=function(_,b){return w.call(C,_,b),b},v=function(_){return P.call(C,_)||{}},E=function(_){return k.call(C,_)}}else{var S=f("state");p[S]=!0,g=function(_,b){return u(_,S,b),b},v=function(_){return d(_,S)?_[S]:{}},E=function(_){return d(_,S)}}s.exports={set:g,get:v,has:E,enforce:x,getterFor:y}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),d=a("8925"),f=a("69f3"),p=f.get,m=f.enforce,g=String(String).split("String");(s.exports=function(v,E,x,y){var C=y?!!y.unsafe:!1,P=y?!!y.enumerable:!1,k=y?!!y.noTargetGet:!1;if(typeof x=="function"&&(typeof E=="string"&&!c(x,"name")&&l(x,"name",E),m(x).source=g.join(typeof E=="string"?E:"")),v===o){P?v[E]=x:u(E,x);return}else C?!k&&v[E]&&(P=!0):delete v[E];P?v[E]=x:l(v,E,x)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||d(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,d=function(f){return function(p){for(var m=c(p),g=l(m),v=g.length,E=0,x=[],y;v>E;)y=g[E++],(!o||u.call(m,y))&&x.push(f?[y,m[y]]:m[y]);return x}};s.exports={entries:d(!0),values:d(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(d){var f=o.Symbol||(o.Symbol={});l(f,d)||u(f,d,{value:c.f(d)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),d=a("1be4"),f=a("cc12"),p=a("f772"),m=">",g="<",v="prototype",E="script",x=p("IE_PROTO"),y=function(){},C=function(_){return g+E+m+_+g+"/"+E+m},P=function(_){_.write(C("")),_.close();var b=_.parentWindow.Object;return _=null,b},k=function(){var _=f("iframe"),b="java"+E+":",T;return _.style.display="none",d.appendChild(_),_.src=String(b),T=_.contentWindow.document,T.open(),T.write(C("document.F=Object")),T.close(),T.F},w,S=function(){try{w=document.domain&&new ActiveXObject("htmlfile")}catch{}S=w?P(w):k();for(var _=c.length;_--;)delete S[v][c[_]];return S()};u[x]=!0,s.exports=Object.create||function(b,T){var I;return b!==null?(y[v]=o(b),I=new y,y[v]=null,I[x]=b):I=S(),T===void 0?I:l(I,T)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),d=a("d44e"),f=a("9112"),p=a("6eeb"),m=a("b622"),g=a("c430"),v=a("3f8c"),E=a("ae93"),x=E.IteratorPrototype,y=E.BUGGY_SAFARI_ITERATORS,C=m("iterator"),P="keys",k="values",w="entries",S=function(){return this};s.exports=function(_,b,T,I,D,O,R){l(T,b,I);var F=function(me){if(me===D&&H)return H;if(!y&&me in L)return L[me];switch(me){case P:return function(){return new T(this,me)};case k:return function(){return new T(this,me)};case w:return function(){return new T(this,me)}}return function(){return new T(this)}},N=b+" Iterator",V=!1,L=_.prototype,z=L[C]||L["@@iterator"]||D&&L[D],H=!y&&z||F(D),B=b=="Array"&&L.entries||z,W,K,ee;if(B&&(W=c(B.call(new _)),x!==Object.prototype&&W.next&&(!g&&c(W)!==x&&(u?u(W,x):typeof W[C]!="function"&&f(W,C,S)),d(W,N,!0,!0),g&&(v[N]=S))),D==k&&z&&z.name!==k&&(V=!0,H=function(){return z.call(this)}),(!g||R)&&L[C]!==H&&f(L,C,H),v[b]=H,D)if(K={values:F(k),keys:O?H:F(P),entries:F(w)},R)for(ee in K)(y||V||!(ee in L))&&p(L,ee,K[ee]);else o({target:b,proto:!0,forced:y||V},K);return K}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,d,f){var p=o(d);p in u?l.f(u,p,c(0,f)):u[p]=f}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,d){l=[],o=d,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(w){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,p=/@([^@]*):(\d+):(\d+)\s*$/ig,m=f.exec(w.stack)||p.exec(w.stack),g=m&&m[1]||!1,v=m&&m[2]||!1,E=document.location.href.replace(document.location.hash,""),x,y,C,P=document.getElementsByTagName("script");g===E&&(x=document.documentElement.outerHTML,y=new RegExp("(?:[^\\n]+?\\n){0,"+(v-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),C=x.replace(y,"$1").trim());for(var k=0;k<P.length;k++)if(P[k].readyState==="interactive"||P[k].src===g||g===E&&P[k].innerHTML&&P[k].innerHTML.trim()===C)return P[k];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,d,f){return l.f(u,d,c(1,f))}:function(u,d,f){return u[d]=f,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,f=function(){var v=/a/,E=/b*/g;return c.call(v,"a"),c.call(E,"a"),v.lastIndex!==0||E.lastIndex!==0}(),p=l.UNSUPPORTED_Y||l.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0,g=f||m||p;g&&(d=function(E){var x=this,y,C,P,k,w=p&&x.sticky,S=o.call(x),_=x.source,b=0,T=E;return w&&(S=S.replace("y",""),S.indexOf("g")===-1&&(S+="g"),T=String(E).slice(x.lastIndex),x.lastIndex>0&&(!x.multiline||x.multiline&&E[x.lastIndex-1]!==`
`)&&(_="(?: "+_+")",T=" "+T,b++),C=new RegExp("^(?:"+_+")",S)),m&&(C=new RegExp("^"+_+"$(?!\\s)",S)),f&&(y=x.lastIndex),P=c.call(w?C:x,T),w?P?(P.input=P.input.slice(b),P[0]=P[0].slice(b),P.index=x.lastIndex,x.lastIndex+=P[0].length):x.lastIndex=0:f&&P&&(x.lastIndex=x.global?P.index+P[0].length:y),m&&P&&P.length>1&&u.call(P[0],C,function(){for(k=1;k<arguments.length-2;k++)arguments[k]===void 0&&(P[k]=void 0)}),P}),s.exports=d},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(m,g){var v=d[u(m)];return v==p?!0:v==f?!1:typeof g=="function"?o(g):!!g},u=c.normalize=function(m){return String(m).replace(l,".").toLowerCase()},d=c.data={},f=c.NATIVE="N",p=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),d=a("7b0b"),f=a("50c4"),p=a("8418"),m=a("65f0"),g=a("1dde"),v=a("b622"),E=a("2d00"),x=v("isConcatSpreadable"),y=9007199254740991,C="Maximum allowed index exceeded",P=E>=51||!l(function(){var _=[];return _[x]=!1,_.concat()[0]!==_}),k=g("concat"),w=function(_){if(!u(_))return!1;var b=_[x];return b!==void 0?!!b:c(_)},S=!P||!k;o({target:"Array",proto:!0,forced:S},{concat:function(b){var T=d(this),I=m(T,0),D=0,O,R,F,N,V;for(O=-1,F=arguments.length;O<F;O++)if(V=O===-1?T:arguments[O],w(V)){if(N=f(V.length),D+N>y)throw TypeError(C);for(R=0;R<N;R++,D++)R in V&&p(I,D,V[R])}else{if(D>=y)throw TypeError(C);p(I,D++,V)}return I.length=D,I}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,d){try{return d?c(o(u)[0],u[1]):c(u)}catch(p){var f=l.return;throw f!==void 0&&o(f.call(l)),p}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),d=Object.defineProperty;i.f=o?d:function(p,m,g){if(c(p),m=u(m,!0),c(g),l)try{return d(p,m,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(p[m]=g.value),p}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),d=a("3f8c"),f=function(){return this};s.exports=function(p,m,g){var v=m+" Iterator";return p.prototype=l(o,{next:c(1,g)}),u(p,v,!1,!0),d[v]=f,p}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(d,f,p,m,g,v,E,x){for(var y=g,C=0,P=E?c(E,x,3):!1,k;C<m;){if(C in p){if(k=P?P(p[C],C,f):p[C],v>0&&o(k))y=u(d,f,k,l(k.length),y,v-1)-1;else{if(y>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[y]=k}y++}C++}return y};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),d=a("7b0b"),f=a("65f0"),p=a("8418"),m=a("1dde"),g=a("ae40"),v=m("splice"),E=g("splice",{ACCESSORS:!0,0:0,1:2}),x=Math.max,y=Math.min,C=9007199254740991,P="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!v||!E},{splice:function(w,S){var _=d(this),b=u(_.length),T=l(w,b),I=arguments.length,D,O,R,F,N,V;if(I===0?D=O=0:I===1?(D=0,O=b-T):(D=I-2,O=y(x(c(S),0),b-T)),b+D-O>C)throw TypeError(P);for(R=f(_,O),F=0;F<O;F++)N=T+F,N in _&&p(R,F,_[N]);if(R.length=O,D<O){for(F=T;F<b-O;F++)N=F+O,V=F+D,N in _?_[V]=_[N]:delete _[V];for(F=b;F>b-O+D;F--)delete _[F-1]}else if(D>O)for(F=b-O;F>T;F--)N=F+O-1,V=F+D-1,N in _?_[V]=_[N]:delete _[V];for(F=0;F<D;F++)_[F+T]=arguments[F+2];return _.length=b-O+D,R}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),d=a("83ab"),f=a("4930"),p=a("fdbf"),m=a("d039"),g=a("5135"),v=a("e8b5"),E=a("861d"),x=a("825a"),y=a("7b0b"),C=a("fc6a"),P=a("c04e"),k=a("5c6c"),w=a("7c73"),S=a("df75"),_=a("241c"),b=a("057f"),T=a("7418"),I=a("06cf"),D=a("9bf2"),O=a("d1e7"),R=a("9112"),F=a("6eeb"),N=a("5692"),V=a("f772"),L=a("d012"),z=a("90e3"),H=a("b622"),B=a("e538"),W=a("746f"),K=a("d44e"),ee=a("69f3"),me=a("b727").forEach,le=V("hidden"),he="Symbol",Z="prototype",Q=H("toPrimitive"),ve=ee.set,X=ee.getterFor(he),q=Object[Z],Y=l.Symbol,ge=c("JSON","stringify"),re=I.f,ne=D.f,ae=b.f,xe=O.f,Ee=N("symbols"),we=N("op-symbols"),Te=N("string-to-symbol-registry"),Ge=N("symbol-to-string-registry"),Ie=N("wks"),Ue=l.QObject,Le=!Ue||!Ue[Z]||!Ue[Z].findChild,We=d&&m(function(){return w(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a!=7})?function(dt,lt,pt){var Ct=re(q,lt);Ct&&delete q[lt],ne(dt,lt,pt),Ct&&dt!==q&&ne(q,lt,Ct)}:ne,ze=function(dt,lt){var pt=Ee[dt]=w(Y[Z]);return ve(pt,{type:he,tag:dt,description:lt}),d||(pt.description=lt),pt},_e=p?function(dt){return typeof dt=="symbol"}:function(dt){return Object(dt)instanceof Y},ye=function(lt,pt,Ct){lt===q&&ye(we,pt,Ct),x(lt);var Rt=P(pt,!0);return x(Ct),g(Ee,Rt)?(Ct.enumerable?(g(lt,le)&&lt[le][Rt]&&(lt[le][Rt]=!1),Ct=w(Ct,{enumerable:k(0,!1)})):(g(lt,le)||ne(lt,le,k(1,{})),lt[le][Rt]=!0),We(lt,Rt,Ct)):ne(lt,Rt,Ct)},Se=function(lt,pt){x(lt);var Ct=C(pt),Rt=S(Ct).concat(vt(Ct));return me(Rt,function(Er){(!d||He.call(Ct,Er))&&ye(lt,Er,Ct[Er])}),lt},Re=function(lt,pt){return pt===void 0?w(lt):Se(w(lt),pt)},He=function(lt){var pt=P(lt,!0),Ct=xe.call(this,pt);return this===q&&g(Ee,pt)&&!g(we,pt)?!1:Ct||!g(this,pt)||!g(Ee,pt)||g(this,le)&&this[le][pt]?Ct:!0},it=function(lt,pt){var Ct=C(lt),Rt=P(pt,!0);if(!(Ct===q&&g(Ee,Rt)&&!g(we,Rt))){var Er=re(Ct,Rt);return Er&&g(Ee,Rt)&&!(g(Ct,le)&&Ct[le][Rt])&&(Er.enumerable=!0),Er}},mt=function(lt){var pt=ae(C(lt)),Ct=[];return me(pt,function(Rt){!g(Ee,Rt)&&!g(L,Rt)&&Ct.push(Rt)}),Ct},vt=function(lt){var pt=lt===q,Ct=ae(pt?we:C(lt)),Rt=[];return me(Ct,function(Er){g(Ee,Er)&&(!pt||g(q,Er))&&Rt.push(Ee[Er])}),Rt};if(f||(Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var lt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),pt=z(lt),Ct=function(Rt){this===q&&Ct.call(we,Rt),g(this,le)&&g(this[le],pt)&&(this[le][pt]=!1),We(this,pt,k(1,Rt))};return d&&Le&&We(q,pt,{configurable:!0,set:Ct}),ze(pt,lt)},F(Y[Z],"toString",function(){return X(this).tag}),F(Y,"withoutSetter",function(dt){return ze(z(dt),dt)}),O.f=He,D.f=ye,I.f=it,_.f=b.f=mt,T.f=vt,B.f=function(dt){return ze(H(dt),dt)},d&&(ne(Y[Z],"description",{configurable:!0,get:function(){return X(this).description}}),u||F(q,"propertyIsEnumerable",He,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Y}),me(S(Ie),function(dt){W(dt)}),o({target:he,stat:!0,forced:!f},{for:function(dt){var lt=String(dt);if(g(Te,lt))return Te[lt];var pt=Y(lt);return Te[lt]=pt,Ge[pt]=lt,pt},keyFor:function(lt){if(!_e(lt))throw TypeError(lt+" is not a symbol");if(g(Ge,lt))return Ge[lt]},useSetter:function(){Le=!0},useSimple:function(){Le=!1}}),o({target:"Object",stat:!0,forced:!f,sham:!d},{create:Re,defineProperty:ye,defineProperties:Se,getOwnPropertyDescriptor:it}),o({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:mt,getOwnPropertySymbols:vt}),o({target:"Object",stat:!0,forced:m(function(){T.f(1)})},{getOwnPropertySymbols:function(lt){return T.f(y(lt))}}),ge){var Mt=!f||m(function(){var dt=Y();return ge([dt])!="[null]"||ge({a:dt})!="{}"||ge(Object(dt))!="{}"});o({target:"JSON",stat:!0,forced:Mt},{stringify:function(lt,pt,Ct){for(var Rt=[lt],Er=1,Yn;arguments.length>Er;)Rt.push(arguments[Er++]);if(Yn=pt,!(!E(pt)&&lt===void 0||_e(lt)))return v(pt)||(pt=function(Ei,ls){if(typeof Yn=="function"&&(ls=Yn.call(this,Ei,ls)),!_e(ls))return ls}),Rt[1]=pt,ge.apply(null,Rt)}})}Y[Z][Q]||R(Y[Z],Q,Y[Z].valueOf),K(Y,he),L[le]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(d){Array.from(d)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,d={},f=function(p){throw p};s.exports=function(p,m){if(c(d,p))return d[p];m||(m={});var g=[][p],v=c(m,"ACCESSORS")?m.ACCESSORS:!1,E=c(m,0)?m[0]:f,x=c(m,1)?m[1]:void 0;return d[p]=!!g&&!l(function(){if(v&&!o)return!0;var y={length:-1};v?u(y,1,{enumerable:!0,get:f}):y[1]=1,g.call(y,E,x)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),d=a("c430"),f=u("iterator"),p=!1,m=function(){return this},g,v,E;[].keys&&(E=[].keys(),"next"in E?(v=o(o(E)),v!==Object.prototype&&(g=v)):p=!0),g==null&&(g={}),!d&&!c(g,f)&&l(g,f,m),s.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:p}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,f="name";o&&!(f in c)&&l(c,f,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),d=a("4930"),f=a("fdbf"),p=l("wks"),m=o.Symbol,g=f?m:m&&m.withoutSetter||u;s.exports=function(v){return c(p,v)||(d&&c(m,v)?p[v]=m[v]:p[v]=g("Symbol."+v)),p[v]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),d=u(function(){c(1)});o({target:"Object",stat:!0,forced:d},{keys:function(p){return c(l(p))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),d=a("65f0"),f=[].push,p=function(m){var g=m==1,v=m==2,E=m==3,x=m==4,y=m==6,C=m==5||y;return function(P,k,w,S){for(var _=c(P),b=l(_),T=o(k,w,3),I=u(b.length),D=0,O=S||d,R=g?O(P,I):v?O(P,0):void 0,F,N;I>D;D++)if((C||D in b)&&(F=b[D],N=T(F,D,_),m)){if(g)R[D]=N;else if(N)switch(m){case 3:return!0;case 5:return F;case 6:return D;case 2:f.call(R,F)}else if(x)return!1}return y?-1:E||x?x:R}};s.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,d;if(c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(d=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),d="findIndex",f=!0,p=u(d);d in[]&&Array(1)[d](function(){f=!1}),o({target:"Array",proto:!0,forced:f||!p},{findIndex:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),d=[].indexOf,f=!!d&&1/[1].indexOf(1,-0)<0,p=c("indexOf"),m=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:f||!p||!m},{indexOf:function(v){return f?d.apply(this,arguments)||0:l(this,v,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(d,f){var p=l(d),m=0,g=[],v;for(v in p)!o(u,v)&&o(p,v)&&g.push(v);for(;f.length>m;)o(p,v=f[m++])&&(~c(g,v)||g.push(v));return g}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!d},{includes:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,d){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][d]||l[u]&&l[u][d]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(d){var f=l(this,d);return!!f&&f.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(p,m){return o(p),l(m),c?d.call(p,m):p.__proto__=m,p}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(d,f,p){d&&!l(d=p?d:d.prototype,u)&&o(d,u,{configurable:!0,value:f})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),d=function(f){return function(p,m,g,v){o(m);var E=l(p),x=c(E),y=u(E.length),C=f?y-1:0,P=f?-1:1;if(g<2)for(;;){if(C in x){v=x[C],C+=P;break}if(C+=P,f?C<0:y<=C)throw TypeError("Reduce of empty array with no initial value")}for(;f?C>=0:y>C;C+=P)C in x&&(v=m(v,x[C],C,E));return v}};s.exports={left:d(!1),right:d(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),d=a("9112"),f=c("species"),p=!l(function(){var x=/./;return x.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(x,"$<a>")!=="7"}),m=function(){return"a".replace(/./,"$0")==="$0"}(),g=c("replace"),v=function(){return/./[g]?/./[g]("a","$0")==="":!1}(),E=!l(function(){var x=/(?:)/,y=x.exec;x.exec=function(){return y.apply(this,arguments)};var C="ab".split(x);return C.length!==2||C[0]!=="a"||C[1]!=="b"});s.exports=function(x,y,C,P){var k=c(x),w=!l(function(){var D={};return D[k]=function(){return 7},""[x](D)!=7}),S=w&&!l(function(){var D=!1,O=/a/;return x==="split"&&(O={},O.constructor={},O.constructor[f]=function(){return O},O.flags="",O[k]=/./[k]),O.exec=function(){return D=!0,null},O[k](""),!D});if(!w||!S||x==="replace"&&!(p&&m&&!v)||x==="split"&&!E){var _=/./[k],b=C(k,""[x],function(D,O,R,F,N){return O.exec===u?w&&!N?{done:!0,value:_.call(O,R,F)}:{done:!0,value:D.call(R,O,F)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),T=b[0],I=b[1];o(String.prototype,x,T),o(RegExp.prototype,k,y==2?function(D,O){return I.call(D,this,O)}:function(D){return I.call(D,this)})}P&&d(RegExp.prototype[k],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),d=c("map"),f=u("map");o({target:"Array",proto:!0,forced:!d||!f},{map:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),d=a("06cf"),f=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(m){for(var g=u(m),v=d.f,E=c(g),x={},y=0,C,P;E.length>y;)P=v(g,C=E[y++]),P!==void 0&&f(x,C,P);return x}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),d=a("b622"),f=d("iterator"),p=d("toStringTag"),m=c.values;for(var g in l){var v=o[g],E=v&&v.prototype;if(E){if(E[f]!==m)try{u(E,f,m)}catch{E[f]=m}if(E[p]||u(E,p,g),l[g]){for(var x in c)if(E[x]!==c[x])try{u(E,x,c[x])}catch{E[x]=c[x]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),d=a("861d"),f=a("9bf2").f,p=a("e893"),m=c.Symbol;if(l&&typeof m=="function"&&(!("description"in m.prototype)||m().description!==void 0)){var g={},v=function(){var k=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof v?new m(k):k===void 0?m():m(k);return k===""&&(g[w]=!0),w};p(v,m);var E=v.prototype=m.prototype;E.constructor=v;var x=E.toString,y=String(m("test"))=="Symbol(test)",C=/^Symbol\((.*)\)[^)]+$/;f(E,"description",{configurable:!0,get:function(){var k=d(this)?this.valueOf():this,w=x.call(k);if(u(g,k))return"";var S=y?w.slice(7,-1):w.replace(C,"$1");return S===""?void 0:S}}),o({global:!0,forced:!0},{Symbol:v})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),d=c("IE_PROTO"),f=Object.prototype;s.exports=u?Object.getPrototypeOf:function(p){return p=l(p),o(p,d)?p[d]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?f:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),d=a("7dd0"),f="Array Iterator",p=u.set,m=u.getterFor(f);s.exports=d(Array,"Array",function(g,v){p(this,{type:f,target:o(g),index:0,kind:v})},function(){var g=m(this),v=g.target,E=g.kind,x=g.index++;return!v||x>=v.length?(g.target=void 0,{value:void 0,done:!0}):E=="keys"?{value:x,done:!1}:E=="values"?{value:v[x],done:!1}:{value:[x,v[x]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,d=a("83ab"),f=l(function(){u(1)}),p=!d||f;o({target:"Object",stat:!0,forced:p,sham:!d},{getOwnPropertyDescriptor:function(g,v){return u(c(g),v)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(d,f){for(var p=l(f),m=u.f,g=c.f,v=0;v<p.length;v++){var E=p[v];o(d,E)||m(d,E,g(f,E))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(d){return d!==void 0&&(l.Array===d||u[c]===d)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",f=function(p,m){try{return p[m]}catch{}};s.exports=o?l:function(p){var m,g,v;return p===void 0?"Undefined":p===null?"Null":typeof(g=f(m=Object(p),u))=="string"?g:d?l(m):(v=l(m))=="Object"&&typeof m.callee=="function"?"Arguments":v}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(_e,ye,Se){return ye in _e?Object.defineProperty(_e,ye,{value:Se,enumerable:!0,configurable:!0,writable:!0}):_e[ye]=Se,_e}function d(_e,ye){var Se=Object.keys(_e);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(_e);ye&&(Re=Re.filter(function(He){return Object.getOwnPropertyDescriptor(_e,He).enumerable})),Se.push.apply(Se,Re)}return Se}function f(_e){for(var ye=1;ye<arguments.length;ye++){var Se=arguments[ye]!=null?arguments[ye]:{};ye%2?d(Object(Se),!0).forEach(function(Re){u(_e,Re,Se[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Se)):d(Object(Se)).forEach(function(Re){Object.defineProperty(_e,Re,Object.getOwnPropertyDescriptor(Se,Re))})}return _e}function p(_e){if(Array.isArray(_e))return _e}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function m(_e,ye){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_e)))){var Se=[],Re=!0,He=!1,it=void 0;try{for(var mt=_e[Symbol.iterator](),vt;!(Re=(vt=mt.next()).done)&&(Se.push(vt.value),!(ye&&Se.length===ye));Re=!0);}catch(Mt){He=!0,it=Mt}finally{try{!Re&&mt.return!=null&&mt.return()}finally{if(He)throw it}}return Se}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function g(_e,ye){(ye==null||ye>_e.length)&&(ye=_e.length);for(var Se=0,Re=new Array(ye);Se<ye;Se++)Re[Se]=_e[Se];return Re}function v(_e,ye){if(_e){if(typeof _e=="string")return g(_e,ye);var Se=Object.prototype.toString.call(_e).slice(8,-1);if(Se==="Object"&&_e.constructor&&(Se=_e.constructor.name),Se==="Map"||Se==="Set")return Array.from(_e);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return g(_e,ye)}}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(_e,ye){return p(_e)||m(_e,ye)||v(_e,ye)||E()}function y(_e){if(Array.isArray(_e))return g(_e)}function C(_e){if(typeof Symbol<"u"&&Symbol.iterator in Object(_e))return Array.from(_e)}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(_e){return y(_e)||C(_e)||v(_e)||P()}var w=a("a352"),S=a.n(w);function _(_e){_e.parentElement!==null&&_e.parentElement.removeChild(_e)}function b(_e,ye,Se){var Re=Se===0?_e.children[0]:_e.children[Se-1].nextSibling;_e.insertBefore(ye,Re)}var T=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function I(_e){var ye=Object.create(null);return function(Re){var He=ye[Re];return He||(ye[Re]=_e(Re))}}var D=/-(\w)/g,O=I(function(_e){return _e.replace(D,function(ye,Se){return Se.toUpperCase()})});a("5db7"),a("73d9");var R=["Start","Add","Remove","Update","End"],F=["Choose","Unchoose","Sort","Filter","Clone"],N=["Move"],V=[N,R,F].flatMap(function(_e){return _e}).map(function(_e){return"on".concat(_e)}),L={manage:N,manageAndEmit:R,emit:F};function z(_e){return V.indexOf(_e)!==-1}a("caad"),a("2ca0");var H=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function B(_e){return H.includes(_e)}function W(_e){return["transition-group","TransitionGroup"].includes(_e)}function K(_e){return["id","class","role","style"].includes(_e)||_e.startsWith("data-")||_e.startsWith("aria-")||_e.startsWith("on")}function ee(_e){return _e.reduce(function(ye,Se){var Re=x(Se,2),He=Re[0],it=Re[1];return ye[He]=it,ye},{})}function me(_e){var ye=_e.$attrs,Se=_e.componentData,Re=Se===void 0?{}:Se,He=ee(Object.entries(ye).filter(function(it){var mt=x(it,2),vt=mt[0];return mt[1],K(vt)}));return f(f({},He),Re)}function le(_e){var ye=_e.$attrs,Se=_e.callBackBuilder,Re=ee(he(ye));Object.entries(Se).forEach(function(it){var mt=x(it,2),vt=mt[0],Mt=mt[1];L[vt].forEach(function(dt){Re["on".concat(dt)]=Mt(dt)})});var He="[data-draggable]".concat(Re.draggable||"");return f(f({},Re),{},{draggable:He})}function he(_e){return Object.entries(_e).filter(function(ye){var Se=x(ye,2),Re=Se[0];return Se[1],!K(Re)}).map(function(ye){var Se=x(ye,2),Re=Se[0],He=Se[1];return[O(Re),He]}).filter(function(ye){var Se=x(ye,2),Re=Se[0];return Se[1],!z(Re)})}a("c740");function Z(_e,ye){if(!(_e instanceof ye))throw new TypeError("Cannot call a class as a function")}function Q(_e,ye){for(var Se=0;Se<ye.length;Se++){var Re=ye[Se];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(_e,Re.key,Re)}}function ve(_e,ye,Se){return ye&&Q(_e.prototype,ye),_e}var X=function(ye){var Se=ye.el;return Se},q=function(ye,Se){return ye.__draggable_context=Se},Y=function(ye){return ye.__draggable_context},ge=function(){function _e(ye){var Se=ye.nodes,Re=Se.header,He=Se.default,it=Se.footer,mt=ye.root,vt=ye.realList;Z(this,_e),this.defaultNodes=He,this.children=[].concat(k(Re),k(He),k(it)),this.externalComponent=mt.externalComponent,this.rootTransition=mt.transition,this.tag=mt.tag,this.realList=vt}return ve(_e,[{key:"render",value:function(Se,Re){var He=this.tag,it=this.children,mt=this._isRootComponent,vt=mt?{default:function(){return it}}:it;return Se(He,Re,vt)}},{key:"updated",value:function(){var Se=this.defaultNodes,Re=this.realList;Se.forEach(function(He,it){q(X(He),{element:Re[it],index:it})})}},{key:"getUnderlyingVm",value:function(Se){return Y(Se)}},{key:"getVmIndexFromDomIndex",value:function(Se,Re){var He=this.defaultNodes,it=He.length,mt=Re.children,vt=mt.item(Se);if(vt===null)return it;var Mt=Y(vt);if(Mt)return Mt.index;if(it===0)return 0;var dt=X(He[0]),lt=k(mt).findIndex(function(pt){return pt===dt});return Se<lt?0:it}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),_e}(),re=a("8bbf");function ne(_e,ye){var Se=_e[ye];return Se?Se():[]}function ae(_e){var ye=_e.$slots,Se=_e.realList,Re=_e.getKey,He=Se||[],it=["header","footer"].map(function(pt){return ne(ye,pt)}),mt=x(it,2),vt=mt[0],Mt=mt[1],dt=ye.item;if(!dt)throw new Error("draggable element must have an item slot");var lt=He.flatMap(function(pt,Ct){return dt({element:pt,index:Ct}).map(function(Rt){return Rt.key=Re(pt),Rt.props=f(f({},Rt.props||{}),{},{"data-draggable":!0}),Rt})});if(lt.length!==He.length)throw new Error("Item slot must have only one child");return{header:vt,footer:Mt,default:lt}}function xe(_e){var ye=W(_e),Se=!B(_e)&&!ye;return{transition:ye,externalComponent:Se,tag:Se?Object(re.resolveComponent)(_e):ye?re.TransitionGroup:_e}}function Ee(_e){var ye=_e.$slots,Se=_e.tag,Re=_e.realList,He=_e.getKey,it=ae({$slots:ye,realList:Re,getKey:He}),mt=xe(Se);return new ge({nodes:it,root:mt,realList:Re})}function we(_e,ye){var Se=this;Object(re.nextTick)(function(){return Se.$emit(_e.toLowerCase(),ye)})}function Te(_e){var ye=this;return function(Se,Re){if(ye.realList!==null)return ye["onDrag".concat(_e)](Se,Re)}}function Ge(_e){var ye=this,Se=Te.call(this,_e);return function(Re,He){Se.call(ye,Re,He),we.call(ye,_e,Re)}}var Ie=null,Ue={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ye){return ye}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Le=["update:modelValue","change"].concat(k([].concat(k(L.manageAndEmit),k(L.emit)).map(function(_e){return _e.toLowerCase()}))),We=Object(re.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ue,emits:Le,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ye=this.$slots,Se=this.$attrs,Re=this.tag,He=this.componentData,it=this.realList,mt=this.getKey,vt=Ee({$slots:ye,tag:Re,realList:it,getKey:mt});this.componentStructure=vt;var Mt=me({$attrs:Se,componentData:He});return vt.render(re.h,Mt)}catch(dt){return this.error=!0,Object(re.h)("pre",{style:{color:"red"}},dt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&T.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ye=this;if(!this.error){var Se=this.$attrs,Re=this.$el,He=this.componentStructure;He.updated();var it=le({$attrs:Se,callBackBuilder:{manageAndEmit:function(Mt){return Ge.call(ye,Mt)},emit:function(Mt){return we.bind(ye,Mt)},manage:function(Mt){return Te.call(ye,Mt)}}}),mt=Re.nodeType===1?Re:Re.parentElement;this._sortable=new S.a(mt,it),this.targetDomElement=mt,mt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ye=this.list;return ye||this.modelValue},getKey:function(){var ye=this.itemKey;return typeof ye=="function"?ye:function(Se){return Se[ye]}}},watch:{$attrs:{handler:function(ye){var Se=this._sortable;Se&&he(ye).forEach(function(Re){var He=x(Re,2),it=He[0],mt=He[1];Se.option(it,mt)})},deep:!0}},methods:{getUnderlyingVm:function(ye){return this.componentStructure.getUnderlyingVm(ye)||null},getUnderlyingPotencialDraggableComponent:function(ye){return ye.__draggable_component__},emitChanges:function(ye){var Se=this;Object(re.nextTick)(function(){return Se.$emit("change",ye)})},alterList:function(ye){if(this.list){ye(this.list);return}var Se=k(this.modelValue);ye(Se),this.$emit("update:modelValue",Se)},spliceList:function(){var ye=arguments,Se=function(He){return He.splice.apply(He,k(ye))};this.alterList(Se)},updatePosition:function(ye,Se){var Re=function(it){return it.splice(Se,0,it.splice(ye,1)[0])};this.alterList(Re)},getRelatedContextFromMoveEvent:function(ye){var Se=ye.to,Re=ye.related,He=this.getUnderlyingPotencialDraggableComponent(Se);if(!He)return{component:He};var it=He.realList,mt={list:it,component:He};if(Se!==Re&&it){var vt=He.getUnderlyingVm(Re)||{};return f(f({},vt),mt)}return mt},getVmIndexFromDomIndex:function(ye){return this.componentStructure.getVmIndexFromDomIndex(ye,this.targetDomElement)},onDragStart:function(ye){this.context=this.getUnderlyingVm(ye.item),ye.item._underlying_vm_=this.clone(this.context.element),Ie=ye.item},onDragAdd:function(ye){var Se=ye.item._underlying_vm_;if(Se!==void 0){_(ye.item);var Re=this.getVmIndexFromDomIndex(ye.newIndex);this.spliceList(Re,0,Se);var He={element:Se,newIndex:Re};this.emitChanges({added:He})}},onDragRemove:function(ye){if(b(this.$el,ye.item,ye.oldIndex),ye.pullMode==="clone"){_(ye.clone);return}var Se=this.context,Re=Se.index,He=Se.element;this.spliceList(Re,1);var it={element:He,oldIndex:Re};this.emitChanges({removed:it})},onDragUpdate:function(ye){_(ye.item),b(ye.from,ye.item,ye.oldIndex);var Se=this.context.index,Re=this.getVmIndexFromDomIndex(ye.newIndex);this.updatePosition(Se,Re);var He={element:this.context.element,oldIndex:Se,newIndex:Re};this.emitChanges({moved:He})},computeFutureIndex:function(ye,Se){if(!ye.element)return 0;var Re=k(Se.to.children).filter(function(vt){return vt.style.display!=="none"}),He=Re.indexOf(Se.related),it=ye.component.getVmIndexFromDomIndex(He),mt=Re.indexOf(Ie)!==-1;return mt||!Se.willInsertAfter?it:it+1},onDragMove:function(ye,Se){var Re=this.move,He=this.realList;if(!Re||!He)return!0;var it=this.getRelatedContextFromMoveEvent(ye),mt=this.computeFutureIndex(it,ye),vt=f(f({},this.context),{},{futureIndex:mt}),Mt=f(f({},ye),{},{relatedContext:it,draggedContext:vt});return Re(Mt,Se)},onDragEnd:function(){Ie=null}}}),ze=We;i.default=ze},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),d=a("50c4"),f=a("fc6a"),p=a("8418"),m=a("b622"),g=a("1dde"),v=a("ae40"),E=g("slice"),x=v("slice",{ACCESSORS:!0,0:0,1:2}),y=m("species"),C=[].slice,P=Math.max;o({target:"Array",proto:!0,forced:!E||!x},{slice:function(w,S){var _=f(this),b=d(_.length),T=u(w,b),I=u(S===void 0?b:S,b),D,O,R;if(c(_)&&(D=_.constructor,typeof D=="function"&&(D===Array||c(D.prototype))?D=void 0:l(D)&&(D=D[y],D===null&&(D=void 0)),D===Array||D===void 0))return C.call(_,T,I);for(O=new(D===void 0?Array:D)(P(I-T,0)),R=0;T<I;T++,R++)T in _&&p(O,R,_[T]);return O.length=R,O}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(vse);const rae={class:"assignment-dialog-modal"},nae={class:"form-row"},sae={key:0,class:"form-row"},aae=["value"],iae={key:1,class:"form-row"},oae=["value"],lae={key:2,class:"form-row"},cae={class:"form-row"},uae={class:"form-row"},dae={class:"form-row"},fae={class:"dialog-actions"},hae={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=ue("lunch"),i=ue(""),a=ue(""),o=ue(""),l=ue("12:00"),c=ue("12:30"),u=ue(""),d=ue(""),f=ue("");Ut(()=>r.assignment,g=>{g?(d.value=g.id||Date.now().toString(),f.value=g.blockId||d.value||`block-${Date.now()}`,s.value=g.type||"lunch",i.value=g.teacherId||"",a.value=g.studentId||"",o.value=g.type==="other"?g.label:"",l.value=g.start||"12:00",c.value=g.end||"12:30",u.value=g.note||""):(d.value=Date.now().toString(),f.value=`block-${d.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const p=be(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const g=r.teachers.find(v=>v.id===i.value);return g?g.name||g.email||g.id:""}if(s.value==="student"){const g=r.students.find(v=>v.id===a.value);return g?`${g.firstName} ${g.lastName}`:""}return s.value==="other"?o.value:""});function m(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:d.value,blockId:f.value,type:s.value,label:p.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(g,v)=>(U(),j("div",{class:"assignment-dialog-overlay",onClick:v[8]||(v[8]=fn(E=>g.$emit("close"),["self"]))},[h("div",rae,[v[20]||(v[20]=h("h2",null,"Add Assignment",-1)),h("form",{onSubmit:fn(m,["prevent"])},[h("div",nae,[v[10]||(v[10]=h("label",null,"Type:",-1)),Ve(h("select",{"onUpdate:modelValue":v[0]||(v[0]=E=>s.value=E)},v[9]||(v[9]=[Sn('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[vr,s.value]])]),s.value==="class"?(U(),j("div",sae,[v[12]||(v[12]=h("label",null,"Teacher:",-1)),Ve(h("select",{"onUpdate:modelValue":v[1]||(v[1]=E=>i.value=E)},[v[11]||(v[11]=h("option",{value:""},"Select teacher...",-1)),(U(!0),j(Fe,null,je(t.teachers,E=>(U(),j("option",{key:E.id,value:E.id},te(E.name||E.email||E.id),9,aae))),128))],512),[[vr,i.value]])])):Ae("",!0),s.value==="student"?(U(),j("div",iae,[v[14]||(v[14]=h("label",null,"Student:",-1)),Ve(h("select",{"onUpdate:modelValue":v[2]||(v[2]=E=>a.value=E)},[v[13]||(v[13]=h("option",{value:""},"Select student...",-1)),(U(!0),j(Fe,null,je(t.students,E=>(U(),j("option",{key:E.id,value:E.id},te(E.firstName)+" "+te(E.lastName),9,oae))),128))],512),[[vr,a.value]])])):Ae("",!0),s.value==="other"?(U(),j("div",lae,[v[15]||(v[15]=h("label",null,"Label:",-1)),Ve(h("input",{"onUpdate:modelValue":v[3]||(v[3]=E=>o.value=E),placeholder:"Custom label"},null,512),[[At,o.value]])])):Ae("",!0),h("div",cae,[v[16]||(v[16]=h("label",null,"Start Time:",-1)),Ve(h("input",{"onUpdate:modelValue":v[4]||(v[4]=E=>l.value=E),type:"time",required:""},null,512),[[At,l.value]])]),h("div",uae,[v[17]||(v[17]=h("label",null,"End Time:",-1)),Ve(h("input",{"onUpdate:modelValue":v[5]||(v[5]=E=>c.value=E),type:"time",required:""},null,512),[[At,c.value]])]),h("div",dae,[v[18]||(v[18]=h("label",null,"Note:",-1)),Ve(h("input",{"onUpdate:modelValue":v[6]||(v[6]=E=>u.value=E),placeholder:"Optional note"},null,512),[[At,u.value]])]),h("div",fae,[v[19]||(v[19]=h("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),h("button",{type:"button",class:"btn btn-secondary",onClick:v[7]||(v[7]=E=>g.$emit("close"))},"Cancel")])],32)])]))}},pae=yt(hae,[["__scopeId","data-v-f2af98a0"]]),mae={class:"vertical-time-grid-wrapper"},gae={class:"grid-block-label-time"},vae=["title"],xae=["title"],yae=["onDragstart","onDrag","onDragend"],Eae={class:"assignment-content"},_ae={class:"assignment-label-time"},bae={class:"assignment-time-label"},Sae={class:"assignment-actions"},Tae=["onClick"],Aae=["onClick"],wae=["onMousedown"],iS=24,Cae={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=ue(null);ue(!1);const i=ue(r.assignments?r.assignments.map(F=>({...F})):[]);Ut(()=>r.assignments,F=>{i.value=F?F.map(N=>({...N})):[]},{immediate:!0});function a(F){const[N,V]=F.split(":").map(Number);return N*60+V}function o(F){const N=Math.floor(F/60),V=F%60;return`${N<10?"0":""}${N}:${V<10?"0":""}${V}`}const l=be(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((F,N)=>N.startTime<F?N.startTime:F,r.blocks[0].startTime)),c=be(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((F,N)=>N.endTime>F?N.endTime:F,r.blocks[0].endTime)),u=be(()=>a(l.value)),d=be(()=>a(c.value)),f=be(()=>d.value-u.value),p=be(()=>f.value*2.5+iS*2);be(()=>{if(!r.blocks)return[];const F=[];return r.blocks.forEach(N=>{F.includes(N.startTime)||F.push(N.startTime),F.includes(N.endTime)||F.push(N.endTime)}),F.sort((N,V)=>a(N)-a(V))});function m(F){return(a(F)-u.value)*2.5+iS-10}function g(F,N){if(!F||!N)return!1;const V=a(F.startTime),L=a(F.endTime),z=a(N.startTime),H=a(N.endTime);return V<H&&L>z}function v(F){const N=[];for(let L=0;L<F.length;L++){const z=F[L];let H=null;for(let B=0;B<N.length;B++)if(N[B].ids.some(W=>g(z,F.find(K=>K.id===W)))){H=N[B];break}H?(H.ids.push(z.id),H.blocks.push(z)):N.push({ids:[z.id],blocks:[z]})}let V=!0;for(;V;){V=!1;for(let L=0;L<N.length;L++){for(let z=L+1;z<N.length;z++)if(N[L].ids.some(H=>N[z].ids.some(B=>g(F.find(W=>W.id===H),F.find(W=>W.id===B))))){N[L].ids=Array.from(new Set([...N[L].ids,...N[z].ids])),N[L].blocks=Array.from(new Set([...N[L].blocks,...N[z].blocks])),N.splice(z,1),V=!0;break}if(V)break}}return N.map(L=>{const z=L.blocks.sort((W,K)=>W.startTime.localeCompare(K.startTime)||W.id.localeCompare(K.id)),H=z.reduce((W,K)=>K.startTime<W?K.startTime:W,z[0].startTime),B=z.reduce((W,K)=>K.endTime>W?K.endTime:W,z[0].endTime);return{ids:L.ids,startTime:H,endTime:B}})}be(()=>v(E.value));const E=be(()=>(r.blocks||[]).map((F,N)=>({...F,id:F.id||`block-${N}`})));function x(F){const N=[];for(let z=0;z<F.length;z++){const H=F[z];let B=null;for(let W=0;W<N.length;W++)if(N[W].some(K=>g(H,F.find(ee=>ee.id===K)))){B=N[W];break}B?B.push(H.id):N.push([H.id])}let V=!0;for(;V;){V=!1;for(let z=0;z<N.length;z++){for(let H=z+1;H<N.length;H++)if(N[z].some(B=>N[H].some(W=>g(F.find(K=>K.id===B),F.find(K=>K.id===W))))){N[z]=Array.from(new Set([...N[z],...N[H]])),N.splice(H,1),V=!0;break}if(V)break}}const L={};for(const z of N){const H=z.map(B=>F.find(W=>W.id===B)).sort((B,W)=>B.startTime.localeCompare(W.startTime)||B.id.localeCompare(W.id));H.forEach((B,W)=>{L[B.id]={groupSize:H.length,colIndex:W}})}return L}function y(F,N){const V=x(E.value)[F.id]||{groupSize:1,colIndex:0},L=m(F.startTime),z=(a(F.endTime)-a(F.startTime))*2.5,H=100/V.groupSize;return{position:"absolute",left:H*V.colIndex+"%",width:H+"%",top:L+"px",height:z+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function C(F,N){const V=i.value.filter((Z,Q)=>{if(Z.id===F.id)return!1;const ve=a(Z.start),X=a(Z.end),q=a(F.start),Y=a(F.end);return ve<Y&&X>q}),L=V.length+1,H=[F,...V].sort((Z,Q)=>Z.start.localeCompare(Q.start)||Z.id.localeCompare(Q.id)).findIndex(Z=>Z.id===F.id),B=m(F.start),W=(a(F.end)-a(F.start))*2.5,K=Math.max(W,2.5),ee=73,me=27,le=ee/L;return{position:"absolute",left:me+le*H+"%",width:le+"%",top:B+"px",height:K+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const P=ue(null),k=ue(0),w=ue(0),S=ue(null);function _(F,N){P.value=N,k.value=F.clientY,w.value=a(N.start),S.value="move",N.isDragging=!0,F.target.classList.add("background-dragging-div");const L=document.createElement("div");L.className="drag-preview-div",L.style.width="160px",L.style.height="40px",L.style.background="transparent",L.style.border="2px solid #007bff",L.style.position="absolute",L.style.top="-9999px",L.style.left="-9999px",document.body.appendChild(L),F.dataTransfer.setDragImage(L,80,20),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",N.id)}function b(F,N){if(!P.value||F.clientY===0)return;const V=F.clientY-k.value,L=Math.round(V/2.5);if(S.value==="move"){let z=w.value+L,H=z+(a(N.end)-a(N.start));z=Math.max(u.value,Math.min(z,d.value-1)),H=Math.max(z+1,Math.min(H,d.value)),N.start=o(z),N.end=o(H)}}function T(F,N){P.value=null,S.value=null,N.isDragging=!1,n("update:assignments",i.value)}function I(F,N){P.value=N,k.value=F.clientY,w.value=a(N.end),S.value="resize",window.addEventListener("mousemove",D),window.addEventListener("mouseup",O)}function D(F){if(!P.value)return;const N=F.clientY-k.value;let V=w.value+Math.round(N/2.5);const L=a(P.value.start);V=Math.max(L+1,Math.min(V,d.value)),P.value.end=o(V)}function O(F){P.value=null,S.value=null,window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",O)}function R(F){const N=i.value.findIndex(V=>V.id===F);N!==-1&&(i.value.splice(N,1),n("update:assignments",i.value))}return(F,N)=>(U(),j("div",mae,[h("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:_n({position:"relative",height:p.value+"px"})},[(U(!0),j(Fe,null,je(E.value,(V,L)=>(U(),j("div",{key:V.id,class:et(["grid-block-bg",V.type==="period"?"blocktype-period":"blocktype-"+(V.type||"period")]),style:_n(y(V))},[h("div",gae,[h("span",{class:"grid-block-label",title:V.name||(V.type==="period"?V.label||V.periodName||V.periodNumber||"Period":V.type?V.type.charAt(0).toUpperCase()+V.type.slice(1):"")},te(V.name||(V.type==="period"?V.label||V.periodName||V.periodNumber||"Period":V.type?V.type.charAt(0).toUpperCase()+V.type.slice(1):"")),9,vae),h("span",{class:"grid-block-time",title:V.startTime},te(V.startTime),9,xae)])],6))),128)),(U(!0),j(Fe,null,je(i.value,(V,L)=>(U(),j("div",{key:V.id,class:et(["dialog-assignment-box",["type-"+(V.type||"other"),{dragging:V.isDragging}]]),style:_n(C(V)),draggable:"true",onDragstart:z=>_(z,V),onDrag:z=>b(z,V),onDragend:z=>T(z,V)},[h("div",Eae,[h("div",_ae,[h("span",bae,te(V.start)+"–"+te(V.end)+" "+te(V.label),1)])]),h("div",Sae,[h("button",{class:"edit-btn",onClick:z=>F.$emit("edit-assignment",V)},"✏️",8,Tae),h("button",{class:"delete-btn",onClick:z=>R(V.id)},"🗑️",8,Aae)]),h("div",{class:"resize-handle",onMousedown:fn(z=>I(z,V),["stop"]),title:"Drag to resize block"},null,40,wae)],46,yae))),128))],4)]))}},Iae=yt(Cae,[["__scopeId","data-v-8f5880e4"]]),kae={class:"dialog-header"},Dae={class:"dialog-header-actions"},Pae={class:"dialog-content"},Fae={style:{display:"flex","align-items":"flex-start"}},Rae={class:"dialog-actions"},Oae=["disabled"],Nae={key:0},Mae={key:1},Lae={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=ue([]),n=ue(!1),s=ue(null);jt(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),Ut(()=>e.blocks,d=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",d)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(d){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...d},n.value=!0}function l(d){if(s.value){const f=r.value.findIndex(p=>p.id===d.id);f!==-1&&(r.value[f]={...d}),s.value=null}else r.value=[...r.value,d];n.value=!1}function c(){s.value=null,n.value=!1}function u(d){console.log("handleUpdateAssignments called with:",d),r.value=d}return(d,f)=>(U(),j("div",{class:"dialog-overlay",onClick:f[4]||(f[4]=(...p)=>t.onClose&&t.onClose(...p))},[h("div",{class:"edit-dialog",onClick:f[3]||(f[3]=fn(()=>{},["stop"]))},[h("div",kae,[h("h2",null,"Edit Schedule: "+te(t.aideName),1),h("div",Dae,[h("button",{onClick:f[0]||(f[0]=(...p)=>t.onImportAssignments&&t.onImportAssignments(...p)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),h("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),h("button",{onClick:f[1]||(f[1]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary close-btn"},"×")])]),h("div",Pae,[h("div",Fae,[st(Iae,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(U(),Xr(pae,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):Ae("",!0)]),h("div",Rae,[h("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(U(),j("span",Nae,"💾")):(U(),j("span",Mae,"💾")),Ne(" "+te(t.saving?"Saving...":"Save Schedule"),1)],8,Oae),h("button",{onClick:f[2]||(f[2]=(...p)=>t.onClose&&t.onClose(...p)),class:"btn btn-secondary"},"Cancel")])])]))}},Bae={class:"master-schedule"},Uae={key:0,class:"no-time-table"},Vae={class:"no-data-message"},$ae={key:1,class:"schedule-graph-container"},jae={class:"timeline-header"},Hae={class:"block-time"},Gae={class:"block-name"},Wae={class:"block-time"},zae={class:"aide-header"},Kae={class:"aide-name"},qae=["onClick"],Xae={class:"time-line-container"},Yae={class:"time-blocks-background"},Qae={class:"assignment-bars"},Jae={class:"assignment-label"},cg=30,Zae={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=ue([]);function s(E){const x=r.getAideTimeBlocks(E).filter(y=>y.assignment).map(y=>({id:y.id,label:y.assignment,type:y.assignmentType,start:y.start||y.displayTime.split(" - ")[0],end:y.end||y.displayTime.split(" - ")[1]}));return i(x)}function i(E){if(E.length===0)return[];const x=[...E].sort((k,w)=>d(k.start)-d(w.start)),y=[];let C=[];for(const k of x)C.length===0?C=[k]:C.some(S=>d(k.start)<d(S.end)&&d(k.end)>d(S.start))?C.push(k):(y.push(C),C=[k]);C.length>0&&y.push(C);const P=[];for(const k of y)k.forEach((w,S)=>{w.overlapIndex=S,w.overlapCount=k.length,P.push(w)});return P}function a(E){if(!E.overlapCount||E.overlapCount<=1)return 10;const x=40;return(60-(E.overlapCount*x+(E.overlapCount-1)*2))/2+E.overlapIndex*(x+2)}function o(E){if(!r.blocks||r.blocks.length===0)return 0;const x=r.blocks[0],y=r.blocks[r.blocks.length-1],C=d(x.startTime),k=d(y.endTime)-C,S=(d(E)-C)/k*100;return Math.max(0,Math.min(95,S))}function l(E,x){if(!r.blocks||r.blocks.length===0)return 10;const y=r.blocks[0],C=r.blocks[r.blocks.length-1],P=d(y.startTime),w=d(C.endTime)-P,S=d(E),b=(d(x)-S)/w*100;return Math.max(5,Math.min(95,b))}function c(E){if(!r.blocks||r.blocks.length===0)return 0;const x=r.blocks[0],y=r.blocks[r.blocks.length-1],C=d(x.startTime),k=d(y.endTime)-C,S=(d(E)-C)/k*100;return Math.max(0,Math.min(95,S))}function u(E,x){if(!r.blocks||r.blocks.length===0)return 10;const y=r.blocks[0],C=r.blocks[r.blocks.length-1],P=d(y.startTime),w=d(C.endTime)-P,S=d(E),b=(d(x)-S)/w*100;return Math.max(5,Math.min(95,b))}function d(E){const[x,y]=E.split(":").map(Number);return x*60+y}function f(E){var y;const x=((y=E.name)==null?void 0:y.toLowerCase())||"";return x.includes("lunch")?"lunch":x.includes("break")||x.includes("recess")?"break":x.includes("period")||x.includes("class")?"period":"other"}function p(E){const x=[...E].sort((P,k)=>d(P.startTime)-d(k.startTime)),y=[];for(const P of x){let k=!1;for(let w=0;w<y.length;w++){const S=y[w];if(!S.some(b=>d(P.startTime)<d(b.endTime)&&d(P.endTime)>d(b.startTime))){S.push(P),P.overlapIndex=w,k=!0;break}}k||(P.overlapIndex=y.length,y.push([P]))}const C=y.length;return x.map(P=>({...P,overlapIndex:P.overlapIndex,overlapCount:C}))}const m=be(()=>p(r.blocks||[])),g=be(()=>Math.max(...m.value.map(E=>E.overlapCount||1),1)),v=be(()=>g.value*cg);return Ut(()=>r.aideAssignments,E=>{n.value=E?JSON.parse(JSON.stringify(E)):[]},{immediate:!0}),(E,x)=>(U(),j("div",Bae,[x[4]||(x[4]=h("h2",null,"Master Schedule View",-1)),tT(E.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(U(),j("div",Uae,[h("div",Vae,[x[1]||(x[1]=h("h3",null,"No Time Table Configured",-1)),x[2]||(x[2]=h("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),h("button",{onClick:x[0]||(x[0]=y=>E.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(U(),j("div",$ae,[h("div",jae,[x[3]||(x[3]=h("div",{class:"aide-name-header"},"Aide Name",-1)),h("div",{class:"timeline-container",style:_n({height:v.value+"px"})},[h("div",{class:"time-blocks-header",style:_n({height:v.value+"px"})},[(U(!0),j(Fe,null,je(m.value,y=>(U(),j("div",{key:y.id+"-"+y.overlapIndex,class:et(["time-block-header",f(y)]),style:_n({left:o(y.startTime)+"%",width:l(y.startTime,y.endTime)+"%",top:y.overlapIndex*cg+"px",height:cg+"px",zIndex:10})},[h("div",Hae,te(y.startTime),1),h("div",Gae,te(y.name||y.type),1),h("div",Wae,te(y.endTime),1)],6))),128))],4)],4)]),(U(!0),j(Fe,null,je(t.paraeducators,y=>(U(),j("div",{key:y.id,class:"aide-row"},[h("div",zae,[h("span",Kae,te(t.getAideName(y.id)),1),h("button",{onClick:C=>E.$emit("editAideAssignment",y.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,qae)]),h("div",Xae,[h("div",Yae,[(U(!0),j(Fe,null,je(t.blocks,C=>(U(),j("div",{key:C.id,class:et(["time-block-bg",f(C)]),style:_n({left:o(C.startTime)+"%",width:l(C.startTime,C.endTime)+"%"})},null,6))),128)),(U(!0),j(Fe,null,je(t.blocks.slice(0,-1),(C,P)=>(U(),j("div",{key:`bg-gap-${C.id}`,class:"time-block-bg-gap",style:_n({left:o(C.endTime)-.5+"%",width:"1%"})},null,4))),128))]),h("div",Qae,[(U(!0),j(Fe,null,je(s(y.id),C=>(U(),j("div",{key:C.id,class:et(["master-assignment-bar",C.type]),style:_n({left:c(C.start)+"%",width:u(C.start,C.end)+"%",top:a(C)+"px"})},[h("span",Jae,te(C.label),1)],6))),128))])])]))),128))]))]))}},eie=yt(Zae,[["__scopeId","data-v-40c5158e"]]);function Kf(t){return(t==null?void 0:t.schedule)||[]}function tie(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function rie(t){return be(()=>{const{min:e,max:r}=tie(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const d=l<10?`0${l}`:`${l}`,f=c<10?`0${c}`:`${c}`;o.push({time:`${d}:${f}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(d=>d.startTime);for(const d of u)o.find(f=>f.time===d)||o.push({time:d});return o=Array.from(new Set(o.map(d=>d.time))).sort().map(d=>({time:d})),o})}function nie(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const sie={class:"admin-aide-schedule-detailed"},aie={class:"header"},iie={class:"header-actions"},oie=["disabled"],lie={key:0},cie={key:1},uie={class:"content"},die={key:0,class:"error-message"},fie={key:1,class:"error-message"},hie={key:2,class:"loading"},pie={key:3,class:"schedule-container"},mie={key:0,class:"time-table-tab-bar"},gie=["onClick"],pk={__name:"AdminAideSchedule",setup(t){const e=vi(),r=fa(),{userList:n,fetchUsers:s}=Na(),{students:i,fetchStudents:a}=Oa(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=ha(),{labels:u}=zd(),{aideSchedule:d,loadAideSchedules:f,saveAideSchedule:p}=gse(),{aideAssignment:m}=hx(),g=ue(!0),v=ue(!1),E=ue(null),x=ue({}),y=ue({}),C=ue(null);ue([]);const P=ue({}),k=be(()=>x.value&&Array.isArray(x.value.timeTables)&&x.value.timeTables.length>0?x.value.timeTables.map((ae,xe)=>({id:ae.name?ae.name.toLowerCase().replace(/\s+/g,"-"):`tt-${xe}`,label:ae.name||`Time Table ${xe+1}`,...ae})):x.value&&x.value.schedule?[{id:"default",label:x.value.label||"Default Schedule",schedule:x.value.schedule}]:[]);jt(async()=>{console.log("Loaded timeTableData:",x.value),console.log("Computed allTimeTables:",k.value),k.value.length>0&&!C.value&&(C.value=k.value[0].id,console.log("Set selectedTimeTable:",C.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(x.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",x.value)):o.value.schedule&&(x.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",x.value))}),Ut(k,ae=>{console.log("allTimeTables changed:",ae)}),Ut(C,ae=>{console.log("selectedTimeTable changed:",ae)});const w=be(()=>{const ae=k.value.find(xe=>xe.id===C.value)||k.value[0];return console.log("currentTimeTable:",ae),ae}),S=be(()=>Kf(w.value)),_=rie(S);function b(ae){return nie(ae,S.value)}const T=be(()=>{var xe;const ae=(xe=r.currentUser)==null?void 0:xe.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(ae)}),I=be(()=>{var ae;return((ae=n.value)==null?void 0:ae.filter(xe=>xe.role==="paraeducator"))||[]}),D=be(()=>{var ae;return((ae=n.value)==null?void 0:ae.filter(xe=>xe.role==="teacher"))||[]});be(()=>u.value);function O(ae){if(!S.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",ae),console.log("DEBUG: aideSchedule.value:",d.value),console.log("DEBUG: aideAssignment.value:",m.value);const Ee=(d.value[ae]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",Ee);const we=Object.values(Ee).filter(Te=>Te.start&&Te.end&&Te.label).map(Te=>({id:Te.id||Te.blockId||`assignment-${Date.now()}`,assignment:Te.label,assignmentType:Te.type||"custom",displayTime:`${Te.start} - ${Te.end}`,start:Te.start,end:Te.end}));return console.log("DEBUG: individualAssignments:",we),we.length>0?we:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function R(ae){const xe=I.value.find(Ee=>Ee.id===ae);return xe?xe.name||xe.email:"Unknown Aide"}function F(ae){E.value=ae,Z.value=!0}function N(){E.value=null}async function V(){try{v.value=!0;const xe={...await l(),detailedAideSchedule:y.value};await c(xe),console.log("Detailed aide schedule saved successfully")}catch(ae){console.error("Error saving detailed aide schedule:",ae)}finally{v.value=!1}}function L(){e.push("/admin")}async function z(){try{g.value=!0,await Promise.all([s(),a(),l()]);const ae=await sr(at(Ye,"app_settings","global"));if(ae.exists()){const xe=ae.data();y.value=xe.detailedAideSchedule||{}}g.value=!1}catch(ae){console.error("Error loading aide schedule data:",ae),g.value=!1}}jt(z);function H(ae,xe){return ae.assignments&&ae.assignments[xe]||""}function B(){var Te,Ge;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",E.value),console.log("DEBUG: aideAssignment.value:",m.value),console.log("DEBUG: All aide IDs:",Object.keys(m.value)),console.log("DEBUG: All aide data:",Object.entries(m.value).map(([Ie,Ue])=>({id:Ie,keys:Object.keys(Ue)}))),!E.value||!m.value[E.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const ae=Y.value.length;if(ae>0&&!confirm(`WARNING: This will remove ${ae} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const xe=m.value[E.value];console.log("DEBUG: aideData:",xe),console.log("DEBUG: aideData.classAssignment:",xe.classAssignment),console.log("DEBUG: aideData.directAssignment:",xe.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(xe)),console.log("DEBUG: aideData.schedule:",xe.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof xe.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(xe.schedule));let Ee=0;Y.value=[];const we=Kf(w.value);console.log("DEBUG: timeTableBlocks:",we),console.log("DEBUG: timeTableBlocks with period numbers:",we.map(Ie=>({name:Ie.name,periodNumber:Ie.periodNumber,type:Ie.type})));for(const Ie of we){console.log("DEBUG: Processing block:",Ie),console.log("DEBUG: Block periodNumber:",Ie.periodNumber),console.log("DEBUG: Block name:",Ie.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(xe.classAssignment||{}));let Ue=Ie.periodNumber;if(!Ue&&Ie.name){const ze=Ie.name.match(/Period\s*(\d+)/i);ze&&(Ue=ze[1],console.log("DEBUG: Extracted periodNumber from name:",Ue))}let Le="",We=[];if(Ue&&xe.classAssignment&&xe.classAssignment[Ue]){console.log("DEBUG: Found class assignment for periodNumber:",Ue);const ze=Array.isArray(xe.classAssignment[Ue])?xe.classAssignment[Ue]:[xe.classAssignment[Ue]];We=ze.filter(Boolean).map(_e=>{const ye=D.value.find(Se=>Se.id===_e);return ye?ye.name||ye.email:"Unknown Teacher"}),Le=ze.filter(Boolean).map(_e=>`teacher:${_e}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",Le)}if(!Le&&Ie.name&&xe.classAssignment){console.log("DEBUG: Trying to match by block name:",Ie.name);const ze=Object.keys(xe.classAssignment).find(_e=>_e.toLowerCase().trim()===Ie.name.toLowerCase().trim());if(ze){console.log("DEBUG: Found match by block name:",ze);const _e=Array.isArray(xe.classAssignment[ze])?xe.classAssignment[ze]:[xe.classAssignment[ze]];We=_e.filter(Boolean).map(ye=>{const Se=D.value.find(Re=>Re.id===ye);return Se?Se.name||Se.email:"Unknown Teacher"}),Le=_e.filter(Boolean).map(ye=>`teacher:${ye}`).join(","),console.log("DEBUG: Created assignment for block name:",Le)}}if(Le){const ze=Ie.startTime,_e=W(Ie.startTime,30),ye=Le.split(",").map(Re=>Re.replace("teacher:","")).filter(Boolean),Se={id:`imported-class-${Date.now()}-${Ee}`,label:We.join(", "),start:ze,end:_e,type:"class",blockId:`imported-block-${Ee}`,teacherId:ye[0]||"",note:ye.length>1?`Multiple teachers: ${We.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",Se),Y.value.push(Se),Ee++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",xe.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof xe.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(xe.directAssignment)),xe.directAssignment){console.log("DEBUG: Found directAssignment:",xe.directAssignment);const Ie=Array.isArray(xe.directAssignment)?xe.directAssignment:[xe.directAssignment];console.log("DEBUG: directStudentIds:",Ie),console.log("DEBUG: students.value length:",(Te=i.value)==null?void 0:Te.length),console.log("DEBUG: students.value sample:",(Ge=i.value)==null?void 0:Ge.slice(0,3));for(const Ue of Ie)if(console.log("DEBUG: Processing studentId:",Ue),Ue&&Ue!==""){const Le=i.value.find(We=>We.id===Ue);if(console.log("DEBUG: Found student:",Le),Le){const We=`${ct(Le,"firstName")} ${ct(Le,"lastName")}`;console.log("DEBUG: Student name:",We);const ze=Kf(w.value).find(_e=>_e.type==="period");if(console.log("DEBUG: First period block:",ze),ze){const _e=ze.startTime,ye=W(ze.startTime,30),Se={id:`imported-direct-${Date.now()}-${Ee}`,label:We,start:_e,end:ye,type:"student",blockId:`imported-direct-block-${Ee}`,studentId:Ue};console.log("DEBUG: Adding direct assignment:",Se),Y.value.push(Se),Ee++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",Ee),console.log("DEBUG: Final localAideAssignments:",Y.value),Ee>0){alert(`Successfully imported ${Ee} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const Ie=E.value,Ue=d.value[Ie]||{},Le={};Y.value.forEach(ze=>{const _e=ze.blockId||ze.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Le[_e]={id:ze.id,blockId:_e,type:ze.type,label:ze.label,start:ze.start,end:ze.end,note:ze.note,teacherId:ze.teacherId,studentId:ze.studentId}});const We={...Ue,schedule:Le};p(Ie,We).then(()=>{f().then(()=>{N(),Zo(()=>{F(Ie)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function W(ae,xe){const[Ee,we]=ae.split(":").map(Number),Te=Ee*60+we+xe,Ge=Math.floor(Te/60),Ie=Te%60;return`${Ge.toString().padStart(2,"0")}:${Ie.toString().padStart(2,"0")}`}Ut(()=>Kf(w.value),ae=>{const xe={};for(const Ee of ae){const we=H(Ee,E.value);xe[Ee.id]=we?[{id:we,value:we}]:[]}P.value=xe},{immediate:!0});function K(ae,xe){Q.value=xe,ve.value=ae.clientY,X.value=_.value.findIndex(Ee=>Ee.time===xe.start),q.value=0,ae.dataTransfer.effectAllowed="move",ae.dataTransfer.setData("text/plain",xe.id)}function ee(ae,xe){if(!Q.value||ae.clientY===0)return;const Ee=ae.clientY-ve.value;q.value=Ee,xe._dragOffset=Ee}function me(ae,xe){if(!Q.value)return;const Ee=24,we=_.value.length;let Te=X.value+Math.round(q.value/Ee);Te=Math.max(0,Math.min(we-2,Te));const Ge=_.value[Te].time,Ie=_.value.findIndex(We=>We.time===xe.end)-X.value;let Ue=Te+Ie;Ue=Math.max(Te+1,Math.min(we-1,Ue));const Le=_.value[Ue].time;xe.start=Ge,xe.end=Le,xe._dragOffset=0,Q.value=null,q.value=0}function le(ae){const xe=_.value.findIndex(Le=>Le.time===ae.start),Ee=_.value.findIndex(Le=>Le.time===ae.end),we=24;if(xe===-1||Ee===-1)return{display:"none"};const Te=xe*we+(ae._dragOffset||0),Ge=Math.max((Ee-xe)*we,we);let Ie,Ue;return ae.type==="class"?(Ie="#e8f4fd",Ue="#4a90e2"):ae.type==="student"?(Ie="#f0f8e8",Ue="#7cb342"):(Ie="#f5f5f5",Ue="#9e9e9e"),{position:"absolute",left:"20px",top:`${Te}px`,height:`${Ge}px`,width:"200px",minHeight:"24px",background:Ie,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${Ue}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:Q.value===ae?"none":"top 0.2s"}}function he(){const ae=S.value&&S.value.length>0?S.value[0].startTime:"08:00",xe=S.value&&S.value.length>0?S.value[0].endTime:"08:30";Y.value.push({id:`custom:${Date.now()}`,label:"",start:ae,end:xe,blockId:`block-${Date.now()}`})}const Z=ue(!1);ue(null);const Q=ue(null),ve=ue(0),X=ue(0),q=ue(0),Y=ue([]);Ut(E,ae=>{if(!ae){Y.value=[];return}const Ee=(d.value[ae]||{}).schedule||{};Y.value=Object.entries(Ee).map(([we,Te])=>({id:we+"-"+(ae||""),label:Te.label||"",start:Te.start,end:Te.end,blockId:we,type:Te.type||"lunch",teacherId:Te.teacherId||"",studentId:Te.studentId||"",note:Te.note||""}))},{immediate:!0});async function ge(ae){if(E.value)try{v.value=!0;const xe=d.value[E.value]||{},Ee={};ae.forEach(Te=>{const Ge=Te.blockId||Te.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Ee[Ge]={id:Te.id,blockId:Ge,type:Te.type,label:Te.label,start:Te.start,end:Te.end,note:Te.note,teacherId:Te.teacherId,studentId:Te.studentId}});const we={...xe,schedule:Ee};await p(E.value,we),await f(),N(),alert("Schedule saved!")}catch(xe){alert("Failed to save schedule: "+xe.message)}finally{v.value=!1}}Ut(()=>S,ae=>{console.log("DEBUG: blocks",ae)},{immediate:!0}),Ut(E,ae=>{ae&&(console.log("DEBUG: Opening edit dialog for aide",ae),console.log("DEBUG: blocks passed to dialog",S.value))});function re(ae,xe){console.log("Resize start:",xe)}function ne(){he()}return(ae,xe)=>(U(),j("div",sie,[h("div",aie,[xe[4]||(xe[4]=h("h1",null,"Aide Schedule Management",-1)),h("div",iie,[h("button",{onClick:V,class:"btn btn-primary",disabled:v.value},[v.value?(U(),j("span",lie,"💾")):(U(),j("span",cie,"💾")),Ne(" "+te(v.value?"Saving...":"Save Schedule"),1)],8,oie),h("button",{onClick:L,class:"btn btn-secondary"},xe[3]||(xe[3]=[h("span",null,"←",-1),Ne(" Back ")]))])]),h("div",uie,[oe(r).currentUser?T.value?g.value?(U(),j("div",hie," Loading aide schedules... ")):(U(),j("div",pie,[st(eie,{paraeducators:I.value,blocks:S.value,getAideTimeBlocks:O,getAideName:R,currentTimeTable:w.value,onEditAideAssignment:F,onGotoTimeTableConfig:xe[2]||(xe[2]=()=>oe(e).push("/admin?tab=time-table"))},{"tab-bar":Ih(()=>[k.value.length>1?(U(),j("div",mie,[(U(!0),j(Fe,null,je(k.value,Ee=>(U(),j("div",{key:Ee.id,class:et(["tab-btn",{active:C.value===Ee.id}]),onClick:we=>C.value=Ee.id},te(Ee.label),11,gie))),128))])):Ae("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),E.value?(U(),Xr(Lae,{key:0,aideName:R(E.value),timeTicks:oe(_),isTickInAnyBlock:b,aideAssignments:Y.value,getAssignmentBoxStyle:le,onAssignmentDragStart:K,onAssignmentDrag:ee,onAssignmentDragEnd:me,onResizeStart:re,showAddAssignment:Z.value,addAssignment:ne,onImportAssignments:B,onSave:ge,onClose:N,saving:v.value,blocks:S.value,teachers:D.value,students:oe(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):Ae("",!0)])):(U(),j("div",fie,[xe[7]||(xe[7]=h("h2",null,"Access Denied",-1)),xe[8]||(xe[8]=h("p",null,"You do not have permission to access this page.",-1)),h("button",{onClick:xe[1]||(xe[1]=Ee=>oe(e).push("/")),class:"btn btn-primary"},"Go Home")])):(U(),j("div",die,[xe[5]||(xe[5]=h("h2",null,"Authentication Required",-1)),xe[6]||(xe[6]=h("p",null,"Please log in to access this page.",-1)),h("button",{onClick:xe[0]||(xe[0]=Ee=>oe(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},vie={name:"AdminBackupRestore",setup(){const t=ue([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"app_settings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"}]),e=ue(["users","students","app_settings"]),r=ue(""),n=ue(!1),s=ue(!1),i=ue(null),a=ue(null),o=ue([]),l=ue(""),c=ue("info"),u=Cs({overwrite:!1,validate:!0}),d=ue(null),f=async()=>{try{const O=Ft(Ye,"backups"),R=lr(O,ln("createdAt","desc"),Qs(20)),F=await Qt(R);o.value=F.docs.map(N=>({id:N.id,...N.data()}))}catch(O){console.error("Error loading backups:",O),C("Error loading backups","error")}},p=async()=>{if(e.value.length===0){C("Please select at least one collection","error");return}n.value=!0,C("Creating backup...","info");try{const O={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const N of e.value)if(N==="app_settings"){const V=at(Ye,"app_settings","global"),L=await sr(V);O.collections[N]=L.exists()?L.data():{}}else{const V=Ft(Ye,N),L=await Qt(V);O.collections[N]=L.docs.map(z=>({id:z.id,...z.data()}))}const R=`backup_${Date.now()}`,F=at(Ye,"backups",R);await tr(F,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(O).length,data:O}),r.value="",await f(),C("Backup created successfully!","success")}catch(O){console.error("Error creating backup:",O),C("Error creating backup: "+O.message,"error")}finally{n.value=!1}},m=O=>{const R=O.target.files[0];if(!R)return;i.value=R,a.value=null;const F=new FileReader;F.onload=N=>{try{const V=JSON.parse(N.target.result);V.metadata&&V.collections?(a.value=V,C("Backup file loaded successfully","success")):C("Invalid backup file format","error")}catch{C("Error parsing JSON file","error")}},F.readAsText(R)},g=async()=>{if(!i.value||!a.value){C("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,C("Restoring backup...","info");try{for(const[O,R]of Object.entries(a.value.collections))if(O==="app_settings"||O==="appSettings"){const F=at(Ye,"app_settings","global");await tr(F,R,{merge:!u.overwrite})}else{const F=Ft(Ye,O);if(Array.isArray(R))for(const N of R){const V=at(F,N.id);u.overwrite?await tr(V,N):await tr(V,N,{merge:!0})}}C("Backup restored successfully!","success"),i.value=null,a.value=null,d.value&&(d.value.value="")}catch(O){console.error("Error restoring backup:",O),C("Error restoring backup: "+O.message,"error")}finally{s.value=!1}},v=O=>{const R=JSON.stringify(O.data,null,2),F=new Blob([R],{type:"application/json"}),N=URL.createObjectURL(F),V=document.createElement("a");V.href=N,V.download=`${O.name||"backup"}.json`,V.click(),URL.revokeObjectURL(N)},E=async O=>{if(confirm("Are you sure you want to delete this backup?"))try{await zo(at(Ye,"backups",O)),await f(),C("Backup deleted successfully","success")}catch(F){console.error("Error deleting backup:",F),C("Error deleting backup","error")}},x=O=>{if(O===0)return"0 Bytes";const R=1024,F=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(O)/Math.log(R));return parseFloat((O/Math.pow(R,N)).toFixed(2))+" "+F[N]},y=O=>new Date(O).toLocaleString(),C=(O,R="info")=>{l.value=O,c.value=R,setTimeout(()=>{l.value=""},5e3)},P=ue(!1),k=ue(""),w=ue(null),S=ue({total:0,processed:0,updated:0}),_={1:1,P1:1,2:2,P2:2,3:3,P3:3,4:4,P4:4,5:5,P5:5,6:6,P6:6,7:7,SH:7,F:7};function b(O){const R=new Date().toLocaleTimeString();k.value+=`[${R}] ${O}
`,w.value&&(w.value.scrollTop=w.value.scrollHeight)}function T(O){if(!O||typeof O!="object")return{};const R={};return Object.entries(O).forEach(([F,N])=>{const V=_[F];V&&N&&(R[V]?(typeof R[V]=="string"&&typeof N=="object"||typeof R[V]=="object"&&typeof N=="object"&&N.coTeaching&&!R[V].coTeaching)&&(R[V]=N):R[V]=N)}),R}async function I(){var O,R;if(!P.value){P.value=!0,k.value="",S.value={total:0,processed:0,updated:0};try{b("🔄 Starting schedule normalization...");const N=(await Qt(Ft(Ye,"students"))).docs;S.value.total=N.length,b(`📚 Found ${N.length} students to process`);for(const V of N){const L=V.data(),z=V.id;if(S.value.processed++,(R=(O=L.app)==null?void 0:O.schedule)!=null&&R.periods){const H=L.app.schedule.periods,B=T(H),W=Object.keys(H).sort(),K=Object.keys(B).map(me=>String(me)).sort();(JSON.stringify(W)!==JSON.stringify(K)||JSON.stringify(H)!==JSON.stringify(B))&&(b(`📝 Updating student ${z}:`),b(`   Before: ${JSON.stringify(H)}`),b(`   After:  ${JSON.stringify(B)}`),await up(at(Ye,"students",z),{"app.schedule.periods":B}),S.value.updated++)}S.value.processed%10===0&&await new Promise(H=>setTimeout(H,100))}b("✅ Schedule normalization complete!"),b(`📊 Final stats: ${S.value.processed} processed, ${S.value.updated} updated`)}catch(F){b(`❌ Error during normalization: ${F.message}`),console.error("Normalization error:",F)}finally{P.value=!1}}}function D(){k.value="",S.value={total:0,processed:0,updated:0}}return jt(()=>{f()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:d,createBackup:p,handleFileSelect:m,restoreBackup:g,downloadBackup:v,deleteBackup:E,formatFileSize:x,formatDate:y,normalizationInProgress:P,normalizationLog:k,normalizationLogRef:w,normalizationProgress:S,startNormalization:I,clearNormalizationLog:D}}},xie={class:"admin-backup-restore"},yie={class:"content"},Eie={class:"section"},_ie={class:"backup-options"},bie={class:"option-group"},Sie={class:"checkbox-group"},Tie=["value","disabled"],Aie={class:"option-group"},wie=["disabled"],Cie=["disabled"],Iie={key:0},kie={key:1},Die={class:"section"},Pie={class:"restore-options"},Fie={class:"file-upload"},Rie=["disabled"],Oie={key:0,class:"file-info"},Nie={key:0,class:"option-group"},Mie={class:"backup-info"},Lie={class:"collection-name"},Bie={class:"collection-count"},Uie={key:1,class:"option-group"},Vie={class:"checkbox-group"},$ie={class:"checkbox"},jie=["disabled"],Hie={class:"checkbox"},Gie=["disabled"],Wie=["disabled"],zie={key:0},Kie={key:1},qie={class:"section"},Xie={key:0,class:"backup-list"},Yie={class:"backup-info"},Qie={class:"admin-action-btns"},Jie=["onClick"],Zie=["onClick"],eoe={key:1,class:"no-backups"},toe={class:"section"},roe={class:"admin-action-btns"},noe=["disabled"],soe={key:0,class:"progress-section"},aoe={class:"progress-bar"},ioe={class:"progress-text"},ooe={class:"log-container"};function loe(t,e,r,n,s,i){return U(),j("div",xie,[e[22]||(e[22]=h("h1",null,"🔧 Admin Tools",-1)),e[23]||(e[23]=h("div",{class:"header"},[h("h1",null,"Backup & Restore"),h("p",null,"Manage database backups and restore data from JSON files")],-1)),h("div",yie,[h("div",Eie,[e[11]||(e[11]=h("h2",null,"Create Backup",-1)),h("div",_ie,[h("div",bie,[e[9]||(e[9]=h("label",null,"Collections to backup:",-1)),h("div",Sie,[(U(!0),j(Fe,null,je(n.collections,a=>(U(),j("label",{key:a.id,class:"checkbox"},[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,Tie),[[xt,n.selectedCollections]]),Ne(" "+te(a.name),1)]))),128))])]),h("div",Aie,[e[10]||(e[10]=h("label",null,"Backup name (optional):",-1)),Ve(h("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,wie),[[At,n.backupName]])]),h("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"admin-action-btn primary",style:{"min-width":"140px","max-width":"140px"}},[n.isBackingUp?(U(),j("span",Iie,"Creating Backup...")):(U(),j("span",kie,"Create Backup"))],8,Cie)])]),h("div",Die,[e[17]||(e[17]=h("h2",null,"Restore from Backup",-1)),h("div",Pie,[h("div",Fie,[e[12]||(e[12]=h("label",null,"Select JSON backup file:",-1)),h("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,Rie),n.selectedFile?(U(),j("p",Oie," Selected: "+te(n.selectedFile.name)+" ("+te(n.formatFileSize(n.selectedFile.size))+") ",1)):Ae("",!0)]),n.backupData?(U(),j("div",Nie,[e[13]||(e[13]=h("label",null,"Collections in backup:",-1)),h("div",Mie,[(U(!0),j(Fe,null,je(n.backupData.collections,(a,o)=>(U(),j("div",{key:o,class:"collection-info"},[h("span",Lie,te(o)+":",1),h("span",Bie,te(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):Ae("",!0),n.backupData?(U(),j("div",Uie,[e[16]||(e[16]=h("label",null,"Restore options:",-1)),h("div",Vie,[h("label",$ie,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,jie),[[xt,n.restoreOptions.overwrite]]),e[14]||(e[14]=Ne(" Overwrite existing data "))]),h("label",Hie,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,Gie),[[xt,n.restoreOptions.validate]]),e[15]||(e[15]=Ne(" Validate data before restore "))])])])):Ae("",!0),h("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"admin-action-btn warning",style:{"min-width":"140px","max-width":"140px"}},[n.isRestoring?(U(),j("span",zie,"Restoring...")):(U(),j("span",Kie,"Restore Backup"))],8,Wie)])]),h("div",qie,[e[18]||(e[18]=h("h2",null,"Backup History",-1)),n.backups.length>0?(U(),j("div",Xie,[(U(!0),j(Fe,null,je(n.backups,a=>(U(),j("div",{key:a.id,class:"backup-item"},[h("div",Yie,[h("h3",null,te(a.name||"Unnamed Backup"),1),h("p",null,"Created: "+te(n.formatDate(a.createdAt)),1),h("p",null,"Size: "+te(n.formatFileSize(a.size)),1),h("p",null,"Collections: "+te(a.collections.join(", ")),1)]),h("div",Qie,[h("button",{onClick:o=>n.downloadBackup(a),class:"admin-action-btn secondary"},"Download",8,Jie),h("button",{onClick:o=>n.deleteBackup(a.id),class:"admin-action-btn delete"},"Delete",8,Zie)])]))),128))])):(U(),j("p",eoe,"No backups found"))]),h("div",toe,[e[19]||(e[19]=h("h2",null,"🔄 Schedule Period Normalization",-1)),e[20]||(e[20]=h("p",{class:"description"}," This tool normalizes all student schedule periods to use numeric format (1-7) and merges co-teaching data from string periods (P1, P2, etc.) into numeric periods. ",-1)),e[21]||(e[21]=h("div",{class:"warning-box"},[h("strong",null,"⚠️ Important:"),Ne(" This operation will modify all student records. Make sure to backup first! ")],-1)),h("div",roe,[h("button",{onClick:e[7]||(e[7]=(...a)=>n.startNormalization&&n.startNormalization(...a)),disabled:n.normalizationInProgress,class:"admin-action-btn primary",style:{"min-width":"220px","max-width":"220px"}},te(n.normalizationInProgress?"Normalizing...":"Start Schedule Normalization"),9,noe),h("button",{onClick:e[8]||(e[8]=(...a)=>n.clearNormalizationLog&&n.clearNormalizationLog(...a)),class:"admin-action-btn secondary",style:{"min-width":"100px","max-width":"100px"}},"Clear Log")]),n.normalizationProgress.total>0?(U(),j("div",soe,[h("div",aoe,[h("div",{class:"progress-fill",style:_n({width:n.normalizationProgress.processed/n.normalizationProgress.total*100+"%"})},null,4)]),h("p",ioe," Progress: "+te(n.normalizationProgress.processed)+"/"+te(n.normalizationProgress.total)+" processed, "+te(n.normalizationProgress.updated)+" updated ",1)])):Ae("",!0),h("div",ooe,[h("pre",{class:"log-output",ref:"normalizationLogRef"},te(n.normalizationLog),513)])])]),n.statusMessage?(U(),j("div",{key:0,class:et(["status-message",n.statusType])},te(n.statusMessage),3)):Ae("",!0)])}const mk=yt(vie,[["render",loe],["__scopeId","data-v-b8a17214"]]),coe={name:"AdminTeacherFeedback",setup(){const{isLoading:t,error:e,successMessage:r,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,createFeedbackForm:o,deleteFeedbackForm:l,syncResponses:c,getResponsesForSpreadsheet:u,clearMessages:d,extractSpreadsheetId:f}=px(),{fetchStudents:p}=Oa(),{fetchUsers:m}=Na(),g=fa(),v=ue(!1),E=ue(""),x=ue(""),y=ue(""),C=ue(""),P=be(()=>E.value.trim()&&y.value.trim()&&C.value.trim()),k=async()=>{if(P.value)try{d();const F={title:E.value.trim(),description:x.value.trim(),formUrl:y.value.trim(),responseSpreadsheetId:f(C.value),createdBy:g.user.uid};await o(F),w()}catch(F){console.error("Error adding form:",F)}},w=()=>{v.value=!1,E.value="",x.value="",y.value="",C.value="",d()},S=F=>{window.open(F.formUrl,"_blank")},_=async F=>{try{await c(F.responseSpreadsheetId)}catch(N){console.error("Error syncing responses:",N)}},b=async F=>{window.open(F.formUrl,"_blank")},T=async F=>{if(confirm(`Are you sure you want to delete "${F.title}"?`))try{await l(F.id)}catch(N){console.error("Error deleting form:",N)}},I=F=>u(F).value.length,D=F=>{var L,z;const N=u(F);if(N.value.length===0)return"Never";const V=((L=N.value[0])==null?void 0:L.syncedAt)||((z=N.value[0])==null?void 0:z.autoSyncedAt);return V?new Date(V.seconds*1e3).toLocaleDateString():"Never"},O=F=>`https://docs.google.com/spreadsheets/d/${F}`,R=F=>F?(F.seconds?new Date(F.seconds*1e3):new Date(F)).toLocaleDateString():"N/A";return jt(async()=>{try{await Promise.all([p(),m()])}catch(F){console.error("Error initializing teacher feedback:",F)}}),{isLoading:t,error:e,successMessage:r,showCreateModal:v,formTitle:E,formDescription:x,formUrl:y,responseSpreadsheetUrl:C,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,canAddForm:P,addForm:k,closeCreateForm:w,openForm:S,syncFormResponses:_,editForm:b,deleteForm:T,getResponseCount:I,getLastSyncDate:D,getSpreadsheetUrl:O,formatDate:R}}},uoe={class:"teacher-feedback-admin"},doe={key:0,class:"status-message loading"},foe={key:1,class:"status-message success"},hoe={key:2,class:"status-message error"},poe={class:"quick-actions"},moe=["disabled"],goe={class:"modal-header"},voe={class:"modal-body"},xoe={class:"form-group"},yoe={class:"form-group"},Eoe={class:"form-group"},_oe={class:"form-group"},boe={class:"modal-footer"},Soe=["disabled"],Toe={key:0},Aoe={key:1},woe={class:"forms-list"},Coe={key:0,class:"loading"},Ioe={key:1,class:"empty-state"},koe={key:2,class:"forms-grid"},Doe={class:"form-header"},Poe={class:"admin-action-btns"},Foe=["onClick"],Roe=["onClick"],Ooe=["onClick"],Noe=["onClick"],Moe={class:"form-meta"},Loe={key:0},Boe=["href"],Uoe=["href"],Voe={class:"form-stats"},$oe={class:"stat"},joe={class:"stat-value"},Hoe={class:"stat"},Goe={class:"stat-value"};function Woe(t,e,r,n,s,i){return U(),j("div",uoe,[e[29]||(e[29]=h("div",{class:"admin-header"},[h("h2",null,"Teacher Feedback Forms"),h("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Forms can be customized with different question templates and sent to specific teachers. ")],-1)),n.isLoading?(U(),j("div",doe," Processing... ")):Ae("",!0),n.successMessage?(U(),j("div",foe,te(n.successMessage),1)):Ae("",!0),n.error?(U(),j("div",hoe,te(n.error),1)):Ae("",!0),h("div",poe,[h("button",{onClick:e[0]||(e[0]=a=>n.showCreateModal=!0),class:"primary-btn",disabled:n.isLoading},e[10]||(e[10]=[h("span",null,"📝",-1),Ne(" Add Form ")]),8,moe)]),n.showCreateModal?(U(),j("div",{key:3,class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a))},[h("div",{class:"modal-content",onClick:e[8]||(e[8]=fn(()=>{},["stop"]))},[h("div",goe,[e[11]||(e[11]=h("h3",null,"Add Teacher Feedback Form",-1)),h("button",{onClick:e[1]||(e[1]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"close-btn"},"×")]),h("div",voe,[h("div",xoe,[e[12]||(e[12]=h("label",null,"Form Title:",-1)),Ve(h("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>n.formTitle=a),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[At,n.formTitle]])]),h("div",yoe,[e[13]||(e[13]=h("label",null,"Form Description (optional):",-1)),Ve(h("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.formDescription=a),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[At,n.formDescription]])]),h("div",Eoe,[e[14]||(e[14]=h("label",null,"Google Form URL:",-1)),Ve(h("input",{type:"url","onUpdate:modelValue":e[4]||(e[4]=a=>n.formUrl=a),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[At,n.formUrl]]),e[15]||(e[15]=h("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),h("div",_oe,[e[16]||(e[16]=h("label",null,"Response Spreadsheet URL:",-1)),Ve(h("input",{type:"url","onUpdate:modelValue":e[5]||(e[5]=a=>n.responseSpreadsheetUrl=a),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id",class:"form-input",required:""},null,512),[[At,n.responseSpreadsheetUrl]]),e[17]||(e[17]=h("small",{class:"form-help"},"Link to the Google Sheet where responses are collected",-1))]),e[18]||(e[18]=h("div",{class:"form-info"},[h("h4",null,"📋 Setup Instructions:"),h("ol",null,[h("li",null,"Create your Google Form manually with the questions you want"),h("li",null,[Ne("Go to "),h("strong",null,"Responses"),Ne(" tab in your form")]),h("li",null,[Ne("Click "),h("strong",null,"Create Spreadsheet"),Ne(" to link it to a Google Sheet")]),h("li",null,"Copy both URLs and paste them above")])],-1))]),h("div",boe,[h("button",{onClick:e[6]||(e[6]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"secondary-btn"},"Cancel"),h("button",{onClick:e[7]||(e[7]=(...a)=>n.addForm&&n.addForm(...a)),class:"primary-btn",disabled:!n.canAddForm||n.isLoading},[n.isLoading?(U(),j("span",Toe,"Adding Form...")):(U(),j("span",Aoe,"Add Form"))],8,Soe)])])])):Ae("",!0),h("div",woe,[e[28]||(e[28]=h("h3",null,"Feedback Forms",-1)),n.formsLoading?(U(),j("div",Coe,"Loading forms...")):n.activeForms.length===0?(U(),j("div",Ioe,e[19]||(e[19]=[h("p",null,"No feedback forms added yet.",-1),h("p",null,'Click "Add Form" to get started.',-1)]))):(U(),j("div",koe,[(U(!0),j(Fe,null,je(n.activeForms,a=>(U(),j("div",{key:a.id,class:"form-card"},[h("div",Doe,[h("h4",null,te(a.title||"Untitled Form"),1),h("div",Poe,[h("button",{onClick:o=>n.openForm(a),class:"admin-action-btn info",title:"View Form"}," 👁️ ",8,Foe),h("button",{onClick:o=>n.syncFormResponses(a),class:"admin-action-btn warning",title:"Sync Responses"}," 🔄 ",8,Roe),h("button",{onClick:o=>n.editForm(a),class:"admin-action-btn edit",title:"Edit Form"}," ✏️ ",8,Ooe),h("button",{onClick:o=>n.deleteForm(a),class:"admin-action-btn delete",title:"Delete Form"}," 🗑️ ",8,Noe)])]),h("div",Moe,[h("p",null,[e[20]||(e[20]=h("strong",null,"Created:",-1)),Ne(" "+te(n.formatDate(a.createdAt)),1)]),a.description?(U(),j("p",Loe,[e[21]||(e[21]=h("strong",null,"Description:",-1)),Ne(" "+te(a.description),1)])):Ae("",!0),h("p",null,[e[22]||(e[22]=h("strong",null,"Form URL:",-1)),e[23]||(e[23]=Ne()),h("a",{href:a.formUrl,target:"_blank",class:"form-link"},"Open Form",8,Boe)]),h("p",null,[e[24]||(e[24]=h("strong",null,"Responses:",-1)),e[25]||(e[25]=Ne()),h("a",{href:n.getSpreadsheetUrl(a.responseSpreadsheetId),target:"_blank",class:"form-link"},"View Sheet",8,Uoe)])]),h("div",Voe,[h("div",$oe,[e[26]||(e[26]=h("span",{class:"stat-label"},"Responses:",-1)),h("span",joe,te(n.getResponseCount(a.responseSpreadsheetId)),1)]),h("div",Hoe,[e[27]||(e[27]=h("span",{class:"stat-label"},"Last Sync:",-1)),h("span",Goe,te(n.getLastSyncDate(a.responseSpreadsheetId)),1)])])]))),128))]))])])}const zoe=yt(coe,[["render",Woe],["__scopeId","data-v-b3ebd1dc"]]);function Koe(t,e,r){const{getLabel:n}=zd(),s=be(()=>{var f;const d=((f=r.value)==null?void 0:f.numPeriods)||7;return Array.from({length:d},(p,m)=>({value:m.toString(),label:n(m+1),periodIndex:m}))}),i=be(()=>{const d=new Set;return console.log("🔍 Finding teachers from students:",t.value.length),t.value.forEach(f=>{var p,m,g,v,E;(p=f.aeries)!=null&&p.schedule&&Object.values(f.aeries.schedule).forEach(x=>{x&&x.teacherId&&(console.log("🔍 Found teacher ID in aeries.schedule:",x.teacherId),d.add(String(x.teacherId)))}),(g=(m=f.app)==null?void 0:m.schedule)!=null&&g.periods&&Object.values(f.app.schedule.periods).forEach(x=>{x&&(console.log("🔍 Found teacher ID in app.schedule.periods:",x),d.add(String(x)))});for(let x=1;x<=7;x++){const y=`period${x}TeacherId`,C=f[y]||((v=f.aeries)==null?void 0:v[y])||((E=f.app)==null?void 0:E[y]);C&&(console.log("🔍 Found teacher ID in",y,":",C),d.add(String(C)))}}),console.log("🔍 Unique teacher IDs found:",Array.from(d)),console.log("🔍 Users available:",e.value.length),Array.from(d).map(f=>{let p=e.value.find(m=>m.id===f);return!p&&/^\d+$/.test(f)&&(p=e.value.find(m=>m.aeriesId===f)),{id:f,name:p?p.name||`${p.firstName} ${p.lastName}`:`Teacher ${f}`,actualUserId:p?p.id:null}}).sort((f,p)=>f.name.localeCompare(p.name))}),a=(d,f=[])=>{let p=-1;if(/^\d+$/.test(d))p=parseInt(d)-1;else if(d==="SH")p=6;else if(d.startsWith("Per")){const m=d.replace("Per","");/^\d+$/.test(m)&&(p=parseInt(m)-1)}return f.includes(p.toString())};return{availablePeriods:s,availableTeachers:i,getStudentsForTeachers:(d,f=[])=>t.value.filter(p=>{var g,v,E,x,y,C,P;if(!(((v=(g=p.app)==null?void 0:g.flags)==null?void 0:v.flag1)||p.flag1||!1))return!1;if((E=p.aeries)!=null&&E.schedule){const k=Object.entries(p.aeries.schedule);for(let w=0;w<k.length;w++){const[S,_]=k[w];if(_&&_.teacherId&&d.includes(String(_.teacherId))&&!a(S,f))return!0}}if((y=(x=p.app)==null?void 0:x.schedule)!=null&&y.periods){const k=Object.entries(p.app.schedule.periods);for(let w=0;w<k.length;w++){const[S,_]=k[w];if(_&&d.includes(String(_))&&!a(S,f))return!0}}for(let k=0;k<7;k++){const w=`period${k+1}TeacherId`,S=p[w]||((C=p.aeries)==null?void 0:C[w])||((P=p.app)==null?void 0:P[w]);if(S&&d.includes(String(S))&&!f.includes(k.toString()))return!0}return!1}),getStudentTeacherPeriods:(d,f,p=[])=>{var g,v,E,x,y;const m=[];if((g=d.aeries)!=null&&g.schedule){const C=Object.entries(d.aeries.schedule);for(let P=0;P<C.length;P++){const[k,w]=C[P];if(w&&w.teacherId&&f.includes(String(w.teacherId))&&!a(k,p)){let S=e.value.find(b=>b.id===String(w.teacherId));!S&&/^\d+$/.test(w.teacherId)&&(S=e.value.find(b=>b.aeriesId===String(w.teacherId)));const _=n(P+1);m.push({period:_,teacherName:S?S.name||`${S.firstName} ${S.lastName}`:`Teacher ${w.teacherId}`})}}}if((E=(v=d.app)==null?void 0:v.schedule)!=null&&E.periods){const C=Object.entries(d.app.schedule.periods);for(let P=0;P<C.length;P++){const[k,w]=C[P];if(w&&f.includes(String(w))&&!a(k,p)){const S=e.value.find(b=>b.id===String(w)),_=n(parseInt(k));m.push({period:_,teacherName:S?S.name||`${S.firstName} ${S.lastName}`:`Teacher ${w}`})}}}for(let C=0;C<7;C++){const P=`period${C+1}TeacherId`,k=d[P]||((x=d.aeries)==null?void 0:x[P])||((y=d.app)==null?void 0:y[P]);if(k&&f.includes(String(k))&&!p.includes(C.toString())){let w=e.value.find(_=>_.id===String(k));!w&&/^\d+$/.test(k)&&(w=e.value.find(_=>_.aeriesId===String(k)));const S=n(C+1);m.push({period:S,teacherName:w?w.name||`${w.firstName} ${w.lastName}`:`Teacher ${k}`})}}return m},generateCSV:()=>{const d=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],f=t.value.map(m=>{var P,k,w,S,_;const g=ct(m,"firstName")||"",v=ct(m,"lastName")||"",E=ct(m,"grade")||"",x=m.caseManagerId||((k=(P=m.app)==null?void 0:P.studentData)==null?void 0:k.caseManagerId)||"",y=((S=(w=m.app)==null?void 0:w.accommodations)==null?void 0:S.assessment)||[],C=((_=m.app)==null?void 0:_.classServices)||[];return[m.id||"",g,v,E,x,Array.isArray(y)?y.join("; "):y,Array.isArray(C)?C.map(b=>b.name||b).join("; "):C]});return[d,...f].map(m=>m.map(g=>`"${String(g).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(d,f)=>{const p=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(p),m.download=f,m.click(),URL.revokeObjectURL(m.href)},isPeriodExcluded:a}}const ug="casemanage_linked_sheet_id",qf="Student Data";function Xx(){const t=ue(!1),e=ue(localStorage.getItem(ug)||""),r=ue(""),n=ue(null),s=ue("idle"),i=ue(""),a=ue(null),o=ue("");let l=null;const c=()=>new Promise((w,S)=>{var b,T,I;if((T=(b=window.google)==null?void 0:b.accounts)!=null&&T.oauth2&&((I=window.gapi)!=null&&I.client)){w();return}const _=document.createElement("script");_.src="https://accounts.google.com/gsi/client",_.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:O=>{O.access_token?(o.value=O.access_token,t.value=!0,window.gapi.client.setToken({access_token:O.access_token}),l&&(l(O),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const D=document.createElement("script");D.src="https://apis.google.com/js/api.js",D.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),w()})},document.head.appendChild(D)},_.onerror=()=>S(new Error("Failed to load Google Identity Services")),document.head.appendChild(_)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((w,S)=>{l=w;const _=setTimeout(()=>{l=null,S(new Error("Token request timed out"))},3e4),b=a.value.callback;a.value.callback=T=>{clearTimeout(_),a.value.callback=b,T.access_token?(o.value=T.access_token,t.value=!0,window.gapi.client.setToken({access_token:T.access_token}),l&&(l(T),l=null)):(console.error("Failed to get access token:",T),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(T){clearTimeout(_),a.value.callback=b,S(T)}})},d=async(w,S=[])=>{var _;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const T=((_=cc().currentUser)==null?void 0:_.email)||"",I=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:qf,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),D=I.result.spreadsheetId;e.value=D,r.value=`https://docs.google.com/spreadsheets/d/${D}`,localStorage.setItem(ug,D),await f(w,S);const O=I.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:D,resource:{requests:[{repeatCell:{range:{sheetId:O,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:O,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:O},description:`Read-only protection for ${qf}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:D,url:r.value}}catch(b){throw console.error("Error creating sheet:",b),s.value="error",i.value=`Failed to create sheet: ${b.message}`,b}},f=async(w,S=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const _=w.filter(O=>{var F,N;return((N=(F=O.app)==null?void 0:F.flags)==null?void 0:N.flag1)||O.flag1||!1});console.log("🔍 Google Sheets - Original students:",w.length),console.log("🔍 Google Sheets - Filtered students (separate setting only):",_.length),console.log("🔍 Google Sheets - Students data:",_),_&&_.length>0&&console.log("🔍 Google Sheets - First student:",_[0]);const b=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],T=_.map(O=>{var R,F,N,V,L,z,H,B,W,K,ee,me;return console.log("🔍 Processing student:",O.id,{firstName:O.firstName||((F=(R=O.app)==null?void 0:R.studentData)==null?void 0:F.firstName),lastName:O.lastName||((V=(N=O.app)==null?void 0:N.studentData)==null?void 0:V.lastName),grade:O.grade||((z=(L=O.app)==null?void 0:L.studentData)==null?void 0:z.grade)}),[O.id||"",O.firstName||((B=(H=O.app)==null?void 0:H.studentData)==null?void 0:B.firstName)||"",O.lastName||((K=(W=O.app)==null?void 0:W.studentData)==null?void 0:K.lastName)||"",O.grade||((me=(ee=O.app)==null?void 0:ee.studentData)==null?void 0:me.grade)||"",m(O,S)||"",E(O)||"",g(O,"assessment")||"",v(O)||"",new Date().toLocaleString()]}),I=[b,...T];console.log("🔍 Google Sheets - Data to write:",I),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${qf}!A:Z`});const D=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${qf}!A1`,valueInputOption:"RAW",resource:{values:I}});console.log("🔍 Google Sheets - Update response:",D),s.value="success",i.value=`Updated ${T.length} students (separate setting only)`,n.value=new Date}catch(_){throw console.error("Error updating sheet:",_),s.value="error",i.value=`Failed to update: ${_.message}`,_.status===401&&(o.value="",await u()),_}},p=()=>{e.value="",r.value="",localStorage.removeItem(ug),s.value="idle",i.value="",n.value=null},m=(w,S=[])=>{var T,I;const _=w.caseManagerId||((I=(T=w.app)==null?void 0:T.studentData)==null?void 0:I.caseManagerId)||w.casemanager_id;if(!_)return"Not Assigned";const b=S.find(D=>D.id===_);return b&&(b.name||`${b.firstName} ${b.lastName}`||b.email)||_},g=(w,S)=>{var b,T,I;const _=((T=(b=w.app)==null?void 0:b.accommodations)==null?void 0:T[S])||((I=w.accommodations)==null?void 0:I[S])||[];return Array.isArray(_)?_.join(", "):_},v=w=>{var _;const S=((_=w.app)==null?void 0:_.classServices)||w.classServices||[];return Array.isArray(S)?S.map(b=>b.name||b).join(", "):S},E=w=>{var _,b;return((b=(_=w.app)==null?void 0:_.flags)==null?void 0:b.flag1)||w.flag1||!1?"True":"False"},x=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(w){return w.status===404&&p(),!1}},y=async(w,S,_,b=[],T=[])=>{var I;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const O=((I=cc().currentUser)==null?void 0:I.email)||"";console.log("🔍 Creating custom tab:",w,"for teachers:",_,"excluding periods:",T);const F=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:w,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log("🔍 Created sheet with ID:",F);const N=S.filter(H=>{var W,K;return((K=(W=H.app)==null?void 0:W.flags)==null?void 0:K.flag1)||H.flag1||!1});console.log("🔍 Custom tab - Original students:",S.length),console.log("🔍 Custom tab - Filtered students (separate setting only):",N.length);const V=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],L=[];N.forEach(H=>{const B=C(H,_,b,T);console.log("🔍 Student:",H.id,"Periods found:",B.length,"Excluded periods:",T),B.forEach(W=>{console.log("🔍 Adding row for period:",W.period,"teacher:",W.teacherName,"source:",W.source||"unknown")}),B.forEach(W=>{var K,ee,me,le,he,Z;L.push([H.id||"",H.firstName||((ee=(K=H.app)==null?void 0:K.studentData)==null?void 0:ee.firstName)||"",H.lastName||((le=(me=H.app)==null?void 0:me.studentData)==null?void 0:le.lastName)||"",H.grade||((Z=(he=H.app)==null?void 0:he.studentData)==null?void 0:Z.grade)||"",m(H,b)||"",W.period||"",W.teacherName||"",W.subject||"",E(H)||"",g(H,"assessment")||"",v(H)||"",new Date().toLocaleString()])})});const z=[V,...L];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${w}!A1`,valueInputOption:"RAW",resource:{values:z}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:F,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:F,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:F},description:`Read-only protection for ${w}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log("🔍 Custom tab created successfully with",L.length,"rows and read-only protection"),{sheetId:F,rowCount:L.length}}catch(D){throw console.error("Error creating custom tab:",D),D}},C=(w,S,_=[],b=[])=>{var D,O,R,F,N;const T=[];console.log("🔍 getStudentPeriodsForTeachers for student:",w.id,"teacherIds:",S,"excludedPeriods:",b,"excludedPeriods array:",JSON.stringify(b));const I=V=>{let L=-1;if(/^\d+$/.test(V))L=parseInt(V)-1;else if(V==="SH")L=6;else if(V.startsWith("Per")){const z=V.replace("Per","");/^\d+$/.test(z)&&(L=parseInt(z)-1)}return console.log("🔍 Period",V,"maps to index",L,"excluded?",b.includes(L.toString())),b.includes(L.toString())};if((D=w.aeries)!=null&&D.schedule){const V=Object.entries(w.aeries.schedule);console.log("🔍 Aeries schedule entries:",V.length);for(let L=0;L<V.length;L++){const[z,H]=V[L],B=I(z);console.log("🔍 Checking aeries period key:",z,"teacherId:",H==null?void 0:H.teacherId,"excluded?",B),H&&H.teacherId&&S.includes(String(H.teacherId))&&(B?console.log("🔍 Excluding aeries period",z):(console.log("🔍 Including aeries period",z),T.push({period:z.replace("period",""),teacherId:H.teacherId,teacherName:P(H.teacherId,_),subject:H.subject||"",source:"aeries"})))}}if((R=(O=w.app)==null?void 0:O.schedule)!=null&&R.periods){const V=Object.entries(w.app.schedule.periods);console.log("🔍 App schedule entries:",V.length);for(let L=0;L<V.length;L++){const[z,H]=V[L],B=I(z);console.log("🔍 Checking app period key:",z,"teacherId:",H,"excluded?",B),H&&S.includes(String(H))&&(B?console.log("🔍 Excluding app period",z):(console.log("🔍 Including app period",z),T.push({period:z,teacherId:H,teacherName:P(H,_),subject:"",source:"app"})))}}for(let V=0;V<7;V++){const L=`period${V+1}TeacherId`,z=w[L]||((F=w.aeries)==null?void 0:F[L])||((N=w.app)==null?void 0:N[L]);if(z&&S.includes(String(z))){const H=b.includes(V.toString());console.log("🔍 Checking CSV period index",V,"field:",L,"teacherId:",z,"excluded?",H),H?console.log("🔍 Excluding CSV period",V):(console.log("🔍 Including CSV period",V),T.push({period:(V+1).toString(),teacherId:z,teacherName:P(z,_),subject:"",source:"csv"}))}}return console.log("🔍 Final periods for student",w.id,":",T.length,T),T},P=(w,S=[])=>{let _=S.find(b=>b.id===w);return!_&&/^\d+$/.test(w)&&(_=S.find(b=>b.aeriesId===w)),_?_.name||`${_.firstName} ${_.lastName}`||`Teacher ${w}`:`Teacher ${w}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:y,deleteCustomTab:async w=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:w}}]}}),console.log("🔍 Deleted custom tab with sheet ID:",w)}catch(S){throw console.error("Error deleting custom tab:",S),S}},unlinkSheet:p,checkSheetConnection:x}}const qoe=Object.freeze(Object.defineProperty({__proto__:null,useGoogleSheetsRealtime:Xx},Symbol.toStringTag,{value:"Module"}));function Xoe(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:p,deleteCustomTab:m,unlinkSheet:g,checkSheetConnection:v}=Xx();let E=null,x=!1;const y=async()=>{try{const D=localStorage.getItem("casemanage_linked_sheet_id");D&&D.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await v()&&(await w(),C())}catch(D){console.error("Failed to initialize Google Auth:",D)}};Ut(()=>t.value,(D,O)=>{D&&O&&D!==O&&(x=!0,console.log("📝 Student data changed, will sync on next interval")),D!=null&&D.length},{deep:!0});const C=()=>{E&&clearInterval(E),E=setInterval(async()=>{if(i.value&&x&&l.value!=="syncing")try{console.log("🔄 Hourly auto-sync starting..."),await w(),x=!1,console.log("✅ Hourly auto-sync completed")}catch(D){console.error("❌ Hourly auto-sync failed:",D)}},36e5)},P=()=>{E&&clearInterval(E)},k=async()=>{try{await d(t.value,e.value),C()}catch(D){console.error("Failed to create linked sheet:",D),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},w=async()=>{if(!(!i.value||l.value==="syncing"))try{await f(t.value,e.value)}catch(D){console.error("Failed to sync sheet:",D),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:y,createLinkedGoogleSheet:k,syncNow:w,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:g,createCustomTab:p,deleteCustomTab:m,createGoogleSheetWithData:()=>{const D=n();s(D,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const D=n();s(D,"student_data_export.csv")},formatTime:D=>new Date(D).toLocaleString(),setupAutoSync:C,cleanupAutoSync:P}}function Yoe(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=ue([]),a=ue(!1),o=ue(""),l=ue([]),c=ue([]),u=5,d=be(()=>l.value.length===0?[]:r(l.value,c.value)),f=async v=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const E=r(l.value,c.value),x=await n(o.value.trim(),E,l.value,v,c.value),y={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:x.rowCount,sheetId:x.sheetId};i.value.push(y),m(),console.log("Custom tab added:",y),alert(`Custom tab "${y.name}" created successfully with ${x.rowCount} student entries!`)}catch(E){console.error("Failed to create custom tab:",E),alert("Failed to create custom tab in Google Sheet. Please try again.")}},p=async v=>{const E=i.value.find(x=>x.id===v);if(E&&confirm(`Are you sure you want to remove the "${E.name}" tab?`))try{E.sheetId&&await s(E.sheetId),i.value=i.value.filter(x=>x.id!==v),console.log("Custom tab removed:",v),alert(`Tab "${E.name}" removed successfully.`)}catch(x){console.error("Failed to delete custom tab:",x),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(y=>y.id!==v)}},m=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:d,addCustomTab:f,removeCustomTab:p,resetForm:m,toggleAddTabForm:()=>{a.value=!a.value,a.value||m()}}}const Qoe={class:"sheets-section"},Joe={key:0,class:"linked-sheet-status"},Zoe={class:"status-card success"},ele={class:"sync-info"},tle={key:0},rle={key:1,class:"syncing"},nle={key:2,class:"success"},sle={key:3,class:"error"},ale={class:"sheet-actions"},ile=["disabled"],ole={key:1,class:"create-sheet-section"},lle={class:"alternative-options"},cle={class:"button-group"},ule={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(U(),j("div",Qoe,[n[12]||(n[12]=h("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(U(),j("div",Joe,[h("div",Zoe,[n[7]||(n[7]=h("h5",null,"📊 Linked Google Sheet",-1)),n[8]||(n[8]=h("p",null,"Your student data is synced to Google Sheets",-1)),h("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet → "),h("div",ele,[t.lastSyncTime?(U(),j("span",tle,"Last synced: "+te(e(t.lastSyncTime)),1)):Ae("",!0),t.syncStatus==="syncing"?(U(),j("span",rle,"🔄 Syncing...")):t.syncStatus==="success"?(U(),j("span",nle,"✅ Synced")):t.syncStatus==="error"?(U(),j("span",sle,"❌ "+te(t.syncMessage),1)):Ae("",!0)]),n[9]||(n[9]=h("div",{class:"auto-sync-info"},[h("span",{class:"auto-sync-badge"},[h("span",{class:"pulse"}),Ne(" Auto-sync enabled ")]),h("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),h("div",ale,[h("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,ile),h("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(U(),j("div",ole,[n[10]||(n[10]=Sn('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0>🔄</span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0>📝</span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0>🔗</span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),h("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"}," 🔗 Create & Link Google Sheet ")])),h("div",lle,[n[11]||(n[11]=h("h5",null,"Other Export Options",-1)),h("div",cle,[h("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"}," 📊 Create Google Sheet with Data (One-time) "),h("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"}," 📄 Create Blank Google Sheet "),h("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"}," 💾 Export to CSV Only ")])])]))}},dle=yt(ule,[["__scopeId","data-v-ec72cef0"]]),fle={class:"preview-section"},hle={class:"preview-table"},ple={key:0},mle={key:0},gle={key:0,class:"preview-note"},dg=5,vle={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=be(()=>e.filteredStudents.slice(0,dg)),n=a=>{const o=ct(a,"firstName")||"",l=ct(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>ct(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(U(),j("div",fle,[h("h6",null,"Preview ("+te(t.filteredStudents.length)+" students)",1),h("div",hle,[h("table",null,[o[0]||(o[0]=h("thead",null,[h("tr",null,[h("th",null,"Name"),h("th",null,"Grade"),h("th",null,"Period"),h("th",null,"Teacher")])],-1)),h("tbody",null,[(U(!0),j(Fe,null,je(r.value,l=>(U(),j("tr",{key:l.id},[h("td",null,te(n(l)),1),h("td",null,te(s(l)),1),h("td",null,[(U(!0),j(Fe,null,je(i(l),(c,u)=>(U(),j("span",{key:u},[Ne(te(c.period),1),u<i(l).length-1?(U(),j("span",ple,", ")):Ae("",!0)]))),128))]),h("td",null,[(U(!0),j(Fe,null,je(i(l),(c,u)=>(U(),j("span",{key:u},[Ne(te(c.teacherName),1),u<i(l).length-1?(U(),j("span",mle,", ")):Ae("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>dg?(U(),j("p",gle," ... and "+te(t.filteredStudents.length-dg)+" more students ",1)):Ae("",!0)])]))}},xle=yt(vle,[["__scopeId","data-v-936b1ce9"]]),yle={class:"custom-tabs-config"},Ele={class:"add-tab-controls"},_le=["disabled"],ble={key:0,class:"max-tabs-warning"},Sle={key:0,class:"add-tab-form"},Tle={class:"form-group"},Ale=["value"],wle={class:"form-group"},Cle={class:"teacher-checkboxes"},Ile=["value","checked","onChange"],kle={class:"form-group"},Dle={class:"period-checkboxes"},Ple=["value","checked","onChange"],Fle={class:"form-actions"},Rle={key:1,class:"existing-tabs"},Ole={class:"tab-teachers"},Nle=["onClick"],Mle={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(U(),j("div",yle,[r[8]||(r[8]=h("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=h("p",null,"Create custom tabs with data filtered by specific teachers",-1)),h("div",Ele,[h("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,_le),t.customTabs.length>=t.maxCustomTabs?(U(),j("span",ble," Maximum of "+te(t.maxCustomTabs)+" custom tabs allowed ",1)):Ae("",!0)]),t.showAddTabForm?(U(),j("div",Sle,[h("div",Tle,[r[4]||(r[4]=h("label",null,"Tab Name",-1)),h("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,Ale)]),h("div",wle,[r[5]||(r[5]=h("label",null,"Select Teachers",-1)),h("div",Cle,[(U(!0),j(Fe,null,je(t.availableTeachers,n=>(U(),j("label",{key:n.id,class:"checkbox-label"},[h("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,Ile),Ne(" "+te(n.name),1)]))),128))])]),h("div",kle,[r[6]||(r[6]=h("label",null,"Exclude Periods (Optional)",-1)),h("div",Dle,[(U(!0),j(Fe,null,je(t.availablePeriods,n=>(U(),j("label",{key:n.value,class:"checkbox-label"},[h("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,Ple),Ne(" "+te(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(U(),Xr(xle,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):Ae("",!0),h("div",Fle,[h("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),h("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):Ae("",!0),t.customTabs.length>0?(U(),j("div",Rle,[r[7]||(r[7]=h("h6",null,"Current Custom Tabs",-1)),(U(!0),j(Fe,null,je(t.customTabs,n=>(U(),j("div",{key:n.id,class:"tab-item"},[h("div",null,[h("strong",null,te(n.name),1),h("span",Ole,te(n.teachers.length)+" teacher(s), "+te(n.studentCount)+" students ",1)]),h("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,Nle)]))),128))])):Ae("",!0)]))}},Lle=yt(Mle,[["__scopeId","data-v-236484db"]]),Ble={class:"export-options-section"},Ule={class:"export-grid"},Vle={class:"export-card"},$le={class:"export-card"},jle={class:"export-card"},Hle={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(U(),j("div",Ble,[r[12]||(r[12]=h("h4",null,"Export Options",-1)),r[13]||(r[13]=h("p",null,"Additional ways to export and work with your student data",-1)),h("div",Ule,[h("div",Vle,[r[3]||(r[3]=h("div",{class:"export-icon"},"📊",-1)),r[4]||(r[4]=h("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=h("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),h("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),h("div",$le,[r[6]||(r[6]=h("div",{class:"export-icon"},"📄",-1)),r[7]||(r[7]=h("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=h("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),h("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),h("div",jle,[r[9]||(r[9]=h("div",{class:"export-icon"},"💾",-1)),r[10]||(r[10]=h("h5",null,"CSV Export",-1)),r[11]||(r[11]=h("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),h("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=h("div",{class:"export-info"},[h("h5",null,"Export Information"),h("ul",null,[h("li",null,[h("strong",null,"Linked Sheets:"),Ne(" Automatically sync when data changes")]),h("li",null,[h("strong",null,"One-time Exports:"),Ne(" Snapshot of data at export time")]),h("li",null,[h("strong",null,"CSV Files:"),Ne(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},Gle=yt(Hle,[["__scopeId","data-v-3bc6896f"]]),Wle={class:"testing-links-container"},zle={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Oa(),{userList:n,fetchUsers:s}=Na(),{appSettings:i,loadAppSettings:a}=ha(),o=Koe(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,d=Xoe(e,n,o),{linkedSheetId:f,lastSyncTime:p,syncStatus:m,syncMessage:g,initializeIntegration:v,createLinkedGoogleSheet:E,syncNow:x,openGoogleSheet:y,unlinkSheet:C,createGoogleSheetWithData:P,createBlankGoogleSheet:k,exportToCSV:w,cleanupAutoSync:S}=d,_=Yoe(o,d),{customTabs:b,showAddTabForm:T,newTabName:I,selectedTeachers:D,selectedExcludedPeriods:O,maxCustomTabs:R,filteredStudentsPreview:F,addCustomTab:N,removeCustomTab:V,resetForm:L,toggleAddTabForm:z}=_,H=(K,ee)=>{if(ee)D.value.includes(K)||D.value.push(K);else{const me=D.value.indexOf(K);me>-1&&D.value.splice(me,1)}},B=(K,ee)=>{if(ee)O.value.includes(K)||O.value.push(K);else{const me=O.value.indexOf(K);me>-1&&O.value.splice(me,1)}},W=async()=>{await N(n.value)};return jt(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await v()}catch(K){console.error("Failed to initialize TestingLinks:",K)}}),Ra(()=>{S()}),(K,ee)=>(U(),j("div",Wle,[ee[1]||(ee[1]=h("h3",null,"Testing Links & Google Sheets Integration",-1)),st(dle,{"linked-sheet-id":oe(f),"last-sync-time":oe(p),"sync-status":oe(m),"sync-message":oe(g),onOpenGoogleSheet:oe(y),onSyncNow:oe(x),onUnlinkSheet:oe(C),onCreateLinkedGoogleSheet:oe(E),onCreateGoogleSheetWithData:oe(P),onCreateBlankGoogleSheet:oe(k),onExportToCsv:oe(w)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),oe(f)?(U(),Xr(Lle,{key:0,"custom-tabs":oe(b),"show-add-tab-form":oe(T),"new-tab-name":oe(I),"selected-teachers":oe(D),"selected-excluded-periods":oe(O),"max-custom-tabs":oe(R),"available-teachers":oe(c),"available-periods":oe(l),"filtered-students-preview":oe(F),"get-student-teacher-periods":oe(u),onToggleAddTabForm:oe(z),"onUpdate:newTabName":ee[0]||(ee[0]=me=>I.value=me),onUpdateSelectedTeachers:H,onUpdateSelectedExcludedPeriods:B,onAddCustomTab:W,onRemoveCustomTab:oe(V),onResetForm:oe(L)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):Ae("",!0),st(Gle,{onCreateGoogleSheetWithData:oe(P),onCreateBlankGoogleSheet:oe(k),onExportToCsv:oe(w)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},Kle=yt(zle,[["__scopeId","data-v-8d441fb1"]]),qle={class:"admin-dashboard"},Xle={class:"stats-grid"},Yle={class:"stat-card"},Qle={class:"stat-content"},Jle={class:"stat-card"},Zle={class:"stat-content"},ece={class:"stat-card"},tce={class:"stat-content"},rce={class:"stat-card"},nce={class:"stat-content"},sce={class:"categories-grid"},ace={class:"category-card"},ice={class:"category-header"},oce={class:"category-card"},lce={class:"category-header"},cce={class:"category-card"},uce={class:"category-header"},dce={class:"category-card"},fce={class:"category-header"},hce={class:"system-status"},pce={class:"status-grid"},mce={class:"status-card"},gce={class:"sync-status"},vce={class:"sync-item"},xce={key:0,class:"sync-time"},yce={class:"sync-item"},Ece={class:"sync-time"},_ce={class:"status-card"},bce={class:"user-activity"},Sce={class:"activity-item"},Tce={class:"activity-count"},Ace={class:"activity-item"},wce={class:"activity-count"},Cce={class:"quick-actions"},Ice={class:"actions-grid"},kce={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Oa(),{userList:n,fetchUsers:s}=Na(),{linkedSheetId:i,lastSyncTime:a}=Xx(),o=ue(12),l=ue(8),c=ue(!0),u=ue("Connected"),d=be(()=>{var E;return((E=e.value)==null?void 0:E.length)||0}),f=be(()=>{var E;return((E=n.value)==null?void 0:E.length)||0}),p=be(()=>{var E;return((E=n.value)==null?void 0:E.filter(x=>x.role==="paraeducator").length)||0}),m=be(()=>i.value?1:0),g=be(()=>!!i.value),v=E=>E?new Date(E).toLocaleString():"Never";return jt(async()=>{try{await Promise.all([r(),s()])}catch(E){console.error("Error loading dashboard data:",E)}}),(E,x)=>(U(),j("div",qle,[h("div",Xle,[h("div",Yle,[x[9]||(x[9]=h("div",{class:"stat-icon"},"👥",-1)),h("div",Qle,[h("h3",null,te(d.value),1),x[8]||(x[8]=h("p",null,"Total Students",-1))])]),h("div",Jle,[x[11]||(x[11]=h("div",{class:"stat-icon"},"👨‍🏫",-1)),h("div",Zle,[h("h3",null,te(f.value),1),x[10]||(x[10]=h("p",null,"System Users",-1))])]),h("div",ece,[x[13]||(x[13]=h("div",{class:"stat-icon"},"🤝",-1)),h("div",tce,[h("h3",null,te(p.value),1),x[12]||(x[12]=h("p",null,"Paraeducators",-1))])]),h("div",rce,[x[15]||(x[15]=h("div",{class:"stat-icon"},"📊",-1)),h("div",nce,[h("h3",null,te(m.value),1),x[14]||(x[14]=h("p",null,"Linked Sheets",-1))])])]),h("div",sce,[h("div",ace,[h("div",ice,[x[16]||(x[16]=h("h2",null,"👥 User & Student Management",-1)),h("button",{onClick:x[0]||(x[0]=y=>E.$emit("goToCategory","users-students")),class:"category-btn"}," Manage → ")]),x[17]||(x[17]=Sn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>➕</span><div data-v-ecd98979><h4 data-v-ecd98979>Add Users</h4><p data-v-ecd98979>Create new user accounts with role assignments</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>✏️</span><div data-v-ecd98979><h4 data-v-ecd98979>Manage Users</h4><p data-v-ecd98979>Edit existing users, roles, and permissions</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>🎓</span><div data-v-ecd98979><h4 data-v-ecd98979>Student Administration</h4><p data-v-ecd98979>Comprehensive student data management</p></div></div></div></div>',1))]),h("div",oce,[h("div",lce,[x[18]||(x[18]=h("h2",null,"🤝 Aide Management",-1)),h("button",{onClick:x[1]||(x[1]=y=>E.$emit("goToCategory","aide-management")),class:"category-btn"}," Manage → ")]),x[19]||(x[19]=Sn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>📋</span><div data-v-ecd98979><h4 data-v-ecd98979>Aide Assignment</h4><p data-v-ecd98979>Assign paraeducators to students and periods</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>📅</span><div data-v-ecd98979><h4 data-v-ecd98979>Aide Schedule</h4><p data-v-ecd98979>Manage paraeducator schedules and assignments</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>⏰</span><div data-v-ecd98979><h4 data-v-ecd98979>Time Table</h4><p data-v-ecd98979>Configure school periods and time slots</p></div></div></div></div>',1))]),h("div",cce,[h("div",uce,[x[20]||(x[20]=h("h2",null,"📊 Data & Integration",-1)),h("button",{onClick:x[2]||(x[2]=y=>E.$emit("goToCategory","data-integration")),class:"category-btn"}," Manage → ")]),x[21]||(x[21]=Sn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>📥</span><div data-v-ecd98979><h4 data-v-ecd98979>SEIS Import</h4><p data-v-ecd98979>Import student data from SEIS system</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>🔗</span><div data-v-ecd98979><h4 data-v-ecd98979>Aeries API &amp; Import</h4><p data-v-ecd98979>Connect to Aeries SIS for data synchronization</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>🧪</span><div data-v-ecd98979><h4 data-v-ecd98979>Testing Links</h4><p data-v-ecd98979>Google Sheets integration and export tools</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>📝</span><div data-v-ecd98979><h4 data-v-ecd98979>Teacher Feedback</h4><p data-v-ecd98979>Manage teacher feedback forms and responses</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>💾</span><div data-v-ecd98979><h4 data-v-ecd98979>Backup &amp; Restore</h4><p data-v-ecd98979>System backup and data restoration tools</p></div></div></div></div>',1))]),h("div",dce,[h("div",fce,[x[22]||(x[22]=h("h2",null,"⚙️ System Configuration",-1)),h("button",{onClick:x[3]||(x[3]=y=>E.$emit("goToCategory","system-config")),class:"category-btn"}," Manage → ")]),x[23]||(x[23]=Sn('<div class="category-content" data-v-ecd98979><div class="feature-list" data-v-ecd98979><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>🔐</span><div data-v-ecd98979><h4 data-v-ecd98979>Permissions</h4><p data-v-ecd98979>Role-based access control and permissions matrix</p></div></div><div class="feature-item" data-v-ecd98979><span class="feature-icon" data-v-ecd98979>🔧</span><div data-v-ecd98979><h4 data-v-ecd98979>App Settings</h4><p data-v-ecd98979>Configure application settings and preferences</p></div></div></div></div>',1))])]),h("div",hce,[x[31]||(x[31]=h("h2",null,"📈 System Status",-1)),h("div",pce,[h("div",mce,[x[26]||(x[26]=h("h3",null,"🔄 Data Sync Status",-1)),h("div",gce,[h("div",vce,[h("span",{class:et(["sync-indicator",{active:g.value}])},null,2),x[24]||(x[24]=h("span",null,"Google Sheets",-1)),oe(a)?(U(),j("span",xce,te(v(oe(a))),1)):Ae("",!0)]),h("div",yce,[h("span",{class:et(["sync-indicator",{active:c.value}])},null,2),x[25]||(x[25]=h("span",null,"Aeries SIS",-1)),h("span",Ece,te(u.value),1)])])]),h("div",_ce,[x[29]||(x[29]=h("h3",null,"👤 User Activity",-1)),h("div",bce,[h("div",Sce,[x[27]||(x[27]=h("span",null,"Active Users Today",-1)),h("span",Tce,te(o.value),1)]),h("div",Ace,[x[28]||(x[28]=h("span",null,"Recent Logins",-1)),h("span",wce,te(l.value),1)])])]),x[30]||(x[30]=Sn('<div class="status-card" data-v-ecd98979><h3 data-v-ecd98979>📊 System Health</h3><div class="health-indicators" data-v-ecd98979><div class="health-item" data-v-ecd98979><span data-v-ecd98979>Database</span><span class="health-status healthy" data-v-ecd98979>✅ Healthy</span></div><div class="health-item" data-v-ecd98979><span data-v-ecd98979>Functions</span><span class="health-status healthy" data-v-ecd98979>✅ Operational</span></div></div></div>',1))])]),h("div",Cce,[x[36]||(x[36]=h("h2",null,"🚀 Quick Actions",-1)),h("div",Ice,[h("button",{onClick:x[4]||(x[4]=y=>E.$emit("goToStudents")),class:"admin-action-btn primary",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[32]||(x[32]=[h("span",{class:"action-icon"},"👥",-1),h("span",null,"View Students",-1)])),h("button",{onClick:x[5]||(x[5]=y=>E.$emit("goToCategory","users-students")),class:"admin-action-btn success",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[33]||(x[33]=[h("span",{class:"action-icon"},"👨‍🏫",-1),h("span",null,"Manage Users",-1)])),h("button",{onClick:x[6]||(x[6]=y=>E.$emit("goToCategory","aide-management")),class:"admin-action-btn warning",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[34]||(x[34]=[h("span",{class:"action-icon"},"🤝",-1),h("span",null,"Aide Management",-1)])),h("button",{onClick:x[7]||(x[7]=y=>E.$emit("goToCategory","data-integration")),class:"admin-action-btn info",style:{"min-width":"160px","max-width":"160px",height:"60px","flex-direction":"column",gap:"8px"}},x[35]||(x[35]=[h("span",{class:"action-icon"},"📊",-1),h("span",null,"Data & Integration",-1)]))])])]))}},Dce=yt(kce,[["__scopeId","data-v-ecd98979"]]);var Pce={};class Fce{constructor(){this.encryptionKey="default-dev-key-replace-in-production",this.encryptionEnabled=!0,console.log("🔒 IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log("🔒 IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn("⚠️ Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log("🔓 Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log("🔓 Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Vi.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Vi.AES.decrypt(e,this.encryptionKey).toString(Vi.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=at(Ft(Ye,"iepAccessLogs"));await tr(a,{studentId:e,userId:(s=nr.currentUser)==null?void 0:s.uid,userEmail:(i=nr.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:sa(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!nr.currentUser)return!1;try{const u=(await sr(at(Ye,"users",nr.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const f=((i=(s=(n=(await sr(at(Ye,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===nr.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:f,role:"case_manager"}),f}if(u.role==="teacher"&&r==="read"){const f=((l=(o=(a=(await sr(at(Ye,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},p=Object.values(f).includes(nr.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:p,role:"teacher"}),p}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=lr(Ft(Ye,"iepAccessLogs"),Nr("studentId","==",e),Nr("timestamp",">=",new Date(Date.now()-2592e6)));return(await Qt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Vi.AES.decrypt(e,this.encryptionKey).toString(Vi.enc.Utf8),!0)}catch{return!1}}getEncryptionStatus(){return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:Pce.VUE_APP_ENABLE_ENCRYPTION}}}const Xf=new Fce,Rce={class:"debug-encryption"},Oce={class:"debug-header"},Nce={class:"encryption-status"},Mce={class:"status-row"},Lce={class:"encryption-toggle"},Bce=["checked"],Uce={key:0,class:"warning"},Vce={class:"status-details"},$ce={class:"status-row"},jce={class:"status-value"},Hce={class:"status-row"},Gce={class:"status-value"},Wce={class:"status-row"},zce={class:"status-value"},Kce={key:0,class:"debug-info"},qce={class:"field-name"},Xce={class:"field-value"},Yce={class:"value-preview"},Qce={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=be(()=>Xf.getEncryptionStatus()),n=be(()=>Xf.isEncryptionEnabled()),s=be(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{Xf.setEncryptionEnabled(!n.value)},o=(u,d)=>d.split(".").reduce((f,p)=>f&&f[p],u),l=u=>{if(!e.selectedStudent)return!1;const d=o(e.selectedStudent,u);return d?Xf.isValueEncrypted(d):!1},c=u=>{if(!e.selectedStudent)return"No data";const d=o(e.selectedStudent,u);if(!d)return"Empty";if(l(u))return d.substring(0,20)+"...";const f=typeof d=="object"?JSON.stringify(d):String(d);return f.length>40?f.substring(0,40)+"...":f};return(u,d)=>(U(),j("div",Rce,[h("div",Oce,[d[0]||(d[0]=h("h3",null,"🔒 IEP Encryption Control",-1)),h("div",{class:et(["environment-badge",s.value])},te(s.value.toUpperCase()),3)]),h("div",Nce,[h("div",Mce,[d[1]||(d[1]=h("div",{class:"status-label"},"Status:",-1)),h("div",{class:et(["status-value",{enabled:n.value}])},te(n.value?"🔒 Enabled":"🔓 Disabled"),3)]),h("div",Lce,[h("label",null,[h("input",{type:"checkbox",checked:n.value,onChange:a},null,40,Bce),d[2]||(d[2]=Ne(" Toggle Encryption "))]),s.value==="production"&&!n.value?(U(),j("div",Uce," ⚠️ Warning: Encryption disabled in production ")):Ae("",!0)]),h("div",Vce,[h("div",$ce,[d[3]||(d[3]=h("div",{class:"status-label"},"Environment:",-1)),h("div",jce,te(s.value),1)]),h("div",Hce,[d[4]||(d[4]=h("div",{class:"status-label"},"Encryption Key:",-1)),h("div",Gce,te(r.value.keyAvailable?"✅ Available":"❌ Missing"),1)]),h("div",Wce,[d[5]||(d[5]=h("div",{class:"status-label"},"ENV Variable:",-1)),h("div",zce,te(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(U(),j("div",Kce,[d[6]||(d[6]=h("h4",null,"Selected Student Data:",-1)),(U(),j(Fe,null,je(i,f=>h("div",{class:"field-status",key:f},[h("div",qce,te(f)+":",1),h("div",Xce,[h("div",{class:et(["encryption-status",{encrypted:l(f)}])},te(l(f)?"🔒 Encrypted":"🔓 Plain Text"),3),h("div",Yce,te(c(f)),1)])])),64))])):Ae("",!0)]))}},gk=yt(Qce,[["__scopeId","data-v-94726d44"]]),Jce={class:"session-debug"},Zce={class:"debug-info"},eue={class:"info-row"},tue={class:"info-row"},rue={class:"info-row"},nue={class:"info-row"},sue={key:0,class:"info-row"},aue={class:"countdown"},iue={class:"debug-actions"},oue={class:"timeout-setter"},lue={__name:"SessionTimeoutDebug",setup(t){const{isEnabled:e,timeoutMinutes:r,showWarning:n,warningCountdown:s,updateSettings:i,resetTimeout:a}=fx(),{currentUser:o}=hd(),l=ue(!1),c=ue(30),u=ue(.17);jt(()=>{l.value=e.value,c.value=r.value});const d=async()=>{!l.value&&!c.value&&(l.value=e.value,c.value=r.value),await i(!0,u.value),setTimeout(()=>{a()},100)},f=async()=>{await i(l.value,c.value),setTimeout(()=>{a()},100)},p=()=>{document.dispatchEvent(new Event("click"))},m=()=>{};return(g,v)=>(U(),j("div",Jce,[v[8]||(v[8]=h("h4",null,"🔒 Session Timeout Debug",-1)),h("div",Zce,[h("div",eue,[v[1]||(v[1]=h("strong",null,"Timeout Enabled:",-1)),h("span",{class:et({"status-active":oe(e),"status-inactive":!oe(e)})},te(oe(e)?"✅ YES":"❌ NO"),3)]),h("div",tue,[v[2]||(v[2]=h("strong",null,"Timeout Minutes:",-1)),h("span",null,te(oe(r))+" minutes",1)]),h("div",rue,[v[3]||(v[3]=h("strong",null,"User Logged In:",-1)),h("span",{class:et({"status-active":!!oe(o),"status-inactive":!oe(o)})},te(oe(o)?"✅ YES":"❌ NO"),3)]),h("div",nue,[v[4]||(v[4]=h("strong",null,"Warning Showing:",-1)),h("span",{class:et({"status-warning":oe(n),"status-inactive":!oe(n)})},te(oe(n)?"⚠️ YES":"❌ NO"),3)]),oe(n)?(U(),j("div",sue,[v[5]||(v[5]=h("strong",null,"Countdown:",-1)),h("span",aue,te(oe(s))+"s",1)])):Ae("",!0)]),h("div",iue,[h("div",oue,[h("label",null,[v[7]||(v[7]=Ne(" Set Test Timeout: ")),Ve(h("select",{"onUpdate:modelValue":v[0]||(v[0]=E=>u.value=E),class:"timeout-select"},v[6]||(v[6]=[Sn('<option value="0.05" data-v-bea6538b>3 seconds</option><option value="0.17" data-v-bea6538b>10 seconds</option><option value="0.5" data-v-bea6538b>30 seconds</option><option value="1" data-v-bea6538b>1 minute</option><option value="2" data-v-bea6538b>2 minutes</option><option value="5" data-v-bea6538b>5 minutes</option>',6)]),512),[[vr,u.value]])]),h("button",{onClick:d,class:"btn btn-warning"}," Apply Test Timeout ")]),h("div",{class:"admin-action-btns"},[h("button",{onClick:p,class:"admin-action-btn",style:{"min-width":"120px","max-width":"120px"}}," Trigger Activity "),h("button",{onClick:m,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Show Console Info "),h("button",{onClick:f,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," Reset to Original ")])])]))}},cue=yt(lue,[["__scopeId","data-v-bea6538b"]]),uue={class:"security-control-center"},due={class:"security-section"},fue={class:"security-section"},hue={class:"log-filters"},pue={key:0,class:"log-table"},mue={key:1,class:"no-logs"},gue={class:"security-section"},vue={class:"setting-group"},xue={key:0,class:"setting-group"},yue={class:"setting-group"},Eue={class:"setting-group"},_ue={class:"security-section"},bue={class:"setting-group"},Sue={class:"setting-group"},Tue={class:"setting-group"},Aue={class:"security-section"},wue={class:"ip-list"},Cue={class:"ip-input"},Iue={key:0,class:"ip-table"},kue=["onClick"],Due={key:1,class:"no-ips"},Pue={class:"security-section"},Fue={class:"alert-settings"},Rue={class:"setting-group"},Oue={class:"setting-group"},Nue={class:"setting-group"},Mue={class:"alert-emails"},Lue={class:"email-input"},Bue={key:0,class:"email-list"},Uue=["onClick"],Vue={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=ue([]),r=ue(1),{isEnabled:n,timeoutMinutes:s,updateSettings:i}=fx(),a=ue(!1),o=ue(!1),l=ue(!0),c=ue(!0),u=ue(5),d=ue([]),f=ue(""),p=ue({failedLogins:!0,unusualAccess:!0,bulkExport:!0}),m=ue([]),g=ue(""),v=async()=>{try{const O=new Date;O.setDate(O.getDate()-r.value);try{const N=lr(Ft(Ye,"auditLogs"),Nr("timestamp",">=",O),ln("timestamp","desc"),Qs(100)),V=await Qt(N);if(e.value=V.docs.map(L=>({id:L.id,...L.data()})),e.value.length>0){console.log("📋 Loaded",e.value.length,"audit logs");return}}catch{console.log("📋 No audit logs found, trying legacy iepAccessLogs")}const R=lr(Ft(Ye,"iepAccessLogs"),Nr("timestamp",">=",O),ln("timestamp","desc"),Qs(100)),F=await Qt(R);e.value=F.docs.map(N=>({id:N.id,...N.data()})),console.log("📋 Loaded",e.value.length,"legacy access logs")}catch(O){console.error("Failed to fetch logs:",O),e.value=[]}},E=O=>{if(!O)return"";const R=O.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(R)},x=async()=>{try{await i(n.value,s.value)}catch(O){console.error("Failed to toggle session timeout:",O)}},y=async()=>{try{await i(n.value,s.value)}catch(O){console.error("Failed to update session timeout:",O)}},C=()=>{console.log("Password policy updated:",a.value)},P=()=>{console.log("MFA policy updated:",o.value)},k=()=>{console.log("Export policy updated:",l.value)},w=()=>{console.log("PDF policy updated:",c.value)},S=()=>{console.log("Login policy updated:",u.value)},_=()=>{f.value&&!d.value.includes(f.value)&&(d.value.push(f.value),f.value="")},b=O=>{d.value=d.value.filter(R=>R!==O)},T=()=>{console.log("Alert settings updated:",p.value)},I=()=>{g.value&&!m.value.includes(g.value)&&(m.value.push(g.value),g.value="")},D=O=>{m.value=m.value.filter(R=>R!==O)};return jt(()=>{v()}),(O,R)=>(U(),j("div",uue,[h("div",due,[R[13]||(R[13]=h("h3",null,"🔒 IEP Data Encryption",-1)),st(gk,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),h("div",fue,[R[16]||(R[16]=h("h3",null,"📋 Access Logs",-1)),h("div",hue,[Ve(h("select",{"onUpdate:modelValue":R[0]||(R[0]=F=>r.value=F),class:"form-select"},R[14]||(R[14]=[h("option",{value:"1"},"Last 24 hours",-1),h("option",{value:"7"},"Last 7 days",-1),h("option",{value:"30"},"Last 30 days",-1)]),512),[[vr,r.value]]),h("button",{onClick:v,class:"btn btn-secondary"}," Refresh ")]),e.value.length?(U(),j("div",pue,[h("table",null,[R[15]||(R[15]=h("thead",null,[h("tr",null,[h("th",null,"Time"),h("th",null,"User"),h("th",null,"Action"),h("th",null,"Student"),h("th",null,"Status")])],-1)),h("tbody",null,[(U(!0),j(Fe,null,je(e.value,F=>(U(),j("tr",{key:F.id},[h("td",null,te(E(F.timestamp)),1),h("td",null,te(F.userEmail),1),h("td",null,te(F.action),1),h("td",null,te(F.studentId),1),h("td",{class:et(F.success?"success":"error")},te(F.success?"✅":"❌"),3)]))),128))])])])):(U(),j("div",mue," No access logs found for selected period "))]),h("div",gue,[R[23]||(R[23]=h("h3",null,"⏲️ Session Security",-1)),st(cue),h("div",vue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=F=>br(n)?n.value=F:null),onChange:x},null,544),[[xt,oe(n)]]),R[17]||(R[17]=Ne(" Enable Auto Logout Timer "))]),R[18]||(R[18]=h("div",{class:"setting-description"}," Automatically log out users after a period of inactivity ",-1))]),oe(n)?(U(),j("div",xue,[h("label",null,[R[19]||(R[19]=Ne(" Auto Logout Timer (minutes): ")),Ve(h("input",{type:"number","onUpdate:modelValue":R[2]||(R[2]=F=>br(s)?s.value=F:null),min:"5",max:"120",onChange:y},null,544),[[At,oe(s)]])]),R[20]||(R[20]=h("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))])):Ae("",!0),h("div",yue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[3]||(R[3]=F=>a.value=F),onChange:C},null,544),[[xt,a.value]]),R[21]||(R[21]=Ne(" Enforce Password Change Every 90 Days "))])]),h("div",Eue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[4]||(R[4]=F=>o.value=F),onChange:P},null,544),[[xt,o.value]]),R[22]||(R[22]=Ne(" Require Two-Factor Authentication for Admin Access "))])])]),h("div",_ue,[R[27]||(R[27]=h("h3",null,"🔑 Data Access Controls",-1)),h("div",bue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[5]||(R[5]=F=>l.value=F),onChange:k},null,544),[[xt,l.value]]),R[24]||(R[24]=Ne(" Restrict Data Export to Admins Only "))])]),h("div",Sue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[6]||(R[6]=F=>c.value=F),onChange:w},null,544),[[xt,c.value]]),R[25]||(R[25]=Ne(" Add Watermark to Exported PDFs "))])]),h("div",Tue,[h("label",null,[R[26]||(R[26]=Ne(" Maximum Failed Login Attempts: ")),Ve(h("input",{type:"number","onUpdate:modelValue":R[7]||(R[7]=F=>u.value=F),min:"3",max:"10",onChange:S},null,544),[[At,u.value]])])])]),h("div",Aue,[R[28]||(R[28]=h("h3",null,"🌐 IP Access Control",-1)),h("div",wue,[h("div",Cue,[Ve(h("input",{type:"text","onUpdate:modelValue":R[8]||(R[8]=F=>f.value=F),placeholder:"Enter IP address or range"},null,512),[[At,f.value]]),h("button",{onClick:_,class:"btn btn-primary"}," Add IP ")]),d.value.length?(U(),j("div",Iue,[(U(!0),j(Fe,null,je(d.value,F=>(U(),j("div",{key:F,class:"ip-row"},[h("span",null,te(F),1),h("button",{onClick:N=>b(F),class:"btn btn-danger btn-sm"}," Remove ",8,kue)]))),128))])):(U(),j("div",Due," No IP restrictions configured "))])]),h("div",Pue,[R[33]||(R[33]=h("h3",null,"🚨 Security Alerts",-1)),h("div",Fue,[h("div",Rue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[9]||(R[9]=F=>p.value.failedLogins=F),onChange:T},null,544),[[xt,p.value.failedLogins]]),R[29]||(R[29]=Ne(" Alert on Multiple Failed Login Attempts "))])]),h("div",Oue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[10]||(R[10]=F=>p.value.unusualAccess=F),onChange:T},null,544),[[xt,p.value.unusualAccess]]),R[30]||(R[30]=Ne(" Alert on Unusual Access Patterns "))])]),h("div",Nue,[h("label",null,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":R[11]||(R[11]=F=>p.value.bulkExport=F),onChange:T},null,544),[[xt,p.value.bulkExport]]),R[31]||(R[31]=Ne(" Alert on Bulk Data Exports "))])]),h("div",Mue,[R[32]||(R[32]=h("h4",null,"Alert Recipients:",-1)),h("div",Lue,[Ve(h("input",{type:"email","onUpdate:modelValue":R[12]||(R[12]=F=>g.value=F),placeholder:"Enter email address"},null,512),[[At,g.value]]),h("button",{onClick:I,class:"btn btn-primary"}," Add ")]),m.value.length?(U(),j("div",Bue,[(U(!0),j(Fe,null,je(m.value,F=>(U(),j("div",{key:F,class:"email-row"},[h("span",null,te(F),1),h("button",{onClick:N=>D(F),class:"btn btn-danger btn-sm"}," Remove ",8,Uue)]))),128))])):Ae("",!0)])])])]))}},$ue=yt(Vue,[["__scopeId","data-v-de4ac33f"]]),jue={class:"card-header"},Hue={class:"component-info"},Gue={class:"component-name"},Wue={class:"component-description"},zue={class:"card-body"},Kue={class:"status-details"},que={class:"detail-row"},Xue={key:0,class:"detail-row"},Yue={key:1,class:"detail-row"},Que={class:"detail-value"},Jue={key:0,class:"errors-section"},Zue={class:"errors-list"},ede={class:"card-actions"},tde=["disabled"],rde={key:1,class:"details-section"},nde={class:"details-content"},sde={class:"detail-item"},ade={class:"detail-item"},ide={key:0,class:"detail-item"},ode={class:"detail-item"},lde={key:0,class:"loading-overlay"},cde={__name:"ComponentHealthCard",props:{component:{type:Object,required:!0}},emits:["test","toggle"],setup(t){const e=t,r=ue(!1),n=ue(!1);Ut(()=>e.component.status,(u,d)=>{d==="checking"&&u!=="checking"?n.value=!1:u==="checking"&&(n.value=!0)},{immediate:!0});const s=u=>{switch(u){case"operational":return"✅";case"degraded":return"⚠️";case"down":return"❌";case"disabled":return"⏸️";case"checking":return"🔄";default:return"❓"}},i=u=>{switch(u){case"operational":return"Healthy";case"degraded":return"Issues";case"down":return"Failed";case"disabled":return"Disabled";case"checking":return"Testing...";default:return"Unknown"}},a=u=>u<100?"latency-good":u<500?"latency-ok":"latency-poor",o=u=>u?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(u):"Never",l=u=>u?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(u):"Never",c=u=>u.toLowerCase().replace(/\s+/g,"-");return(u,d)=>(U(),j("div",{class:et(["health-card",[t.component.status,{disabled:!t.component.enabled}]])},[h("div",jue,[h("div",Hue,[h("h4",Gue,te(t.component.name),1),h("p",Wue,te(t.component.description),1)]),h("div",{class:et(["status-indicator",t.component.status])},te(s(t.component.status)),3)]),h("div",zue,[h("div",Kue,[h("div",que,[d[3]||(d[3]=h("span",{class:"detail-label"},"Status:",-1)),h("span",{class:et(["detail-value",t.component.status])},te(i(t.component.status)),3)]),t.component.latency!==null?(U(),j("div",Xue,[d[4]||(d[4]=h("span",{class:"detail-label"},"Latency:",-1)),h("span",{class:et(["detail-value",a(t.component.latency)])},te(t.component.latency)+"ms ",3)])):Ae("",!0),t.component.lastCheck?(U(),j("div",Yue,[d[5]||(d[5]=h("span",{class:"detail-label"},"Last Check:",-1)),h("span",Que,te(o(t.component.lastCheck)),1)])):Ae("",!0)]),t.component.errors&&t.component.errors.length?(U(),j("div",Jue,[d[6]||(d[6]=h("div",{class:"errors-header"},"⚠️ Issues:",-1)),h("ul",Zue,[(U(!0),j(Fe,null,je(t.component.errors,f=>(U(),j("li",{key:f,class:"error-item"},te(f),1))),128))])])):Ae("",!0),h("div",ede,[h("button",{onClick:d[0]||(d[0]=f=>u.$emit("test",t.component)),disabled:n.value,class:"btn btn-primary btn-sm"},te(n.value?"🔄":"🧪")+" Test ",9,tde),h("button",{onClick:d[1]||(d[1]=f=>u.$emit("toggle",t.component)),class:et(["btn btn-sm",t.component.enabled?"btn-warning":"btn-success"])},te(t.component.enabled?"⏸️ Disable":"▶️ Enable"),3),h("button",{onClick:d[2]||(d[2]=f=>r.value=!r.value),class:"btn btn-secondary btn-sm"},te(r.value?"👁️‍🗨️ Less":"👁️ More"),1)]),r.value?(U(),j("div",rde,[h("div",nde,[h("div",sde,[d[7]||(d[7]=h("strong",null,"Test Function:",-1)),Ne(" "+te(t.component.testFunction||"N/A"),1)]),h("div",ade,[d[8]||(d[8]=h("strong",null,"Enabled:",-1)),Ne(" "+te(t.component.enabled?"Yes":"No"),1)]),t.component.lastCheck?(U(),j("div",ide,[d[9]||(d[9]=h("strong",null,"Last Test:",-1)),Ne(" "+te(l(t.component.lastCheck)),1)])):Ae("",!0),h("div",ode,[d[10]||(d[10]=h("strong",null,"Component ID:",-1)),Ne(" "+te(c(t.component.name)),1)])])])):Ae("",!0)]),n.value?(U(),j("div",lde,d[11]||(d[11]=[h("div",{class:"loading-spinner"},"🔄",-1),h("div",{class:"loading-text"},"Testing component...",-1)]))):Ae("",!0)],2))}},oS=yt(cde,[["__scopeId","data-v-18cc0437"]]),ude={class:"health-dashboard"},dde={class:"dashboard-header"},fde={class:"header-controls"},hde=["disabled"],pde={key:0,class:"last-update"},mde={class:"status-overview"},gde={class:"status-icon"},vde={class:"status-info"},xde={class:"status-details"},yde={class:"component-categories"},Ede={class:"category-section"},_de={class:"components-grid"},bde={class:"category-section"},Sde={class:"components-grid"},Tde={class:"quick-actions"},Ade={class:"admin-action-btns"},wde=["disabled"],Cde={class:"logs-section"},Ide={class:"logs-container"},kde={class:"log-time"},Dde={class:"log-component"},Pde={class:"log-message"},Fde={key:0,class:"no-logs"},Rde={class:"modal-header"},Ode={class:"modal-content"},Nde={__name:"ComponentHealthDashboard",setup(t){const e=ue(!1),r=ue(null),n=ue(!1),s=ue({}),i=ue([]),a=ue(!1),o=ue([{name:"Firebase Auth",status:"operational",description:"User authentication service",lastCheck:new Date,enabled:!0,latency:150,errors:[]},{name:"Firestore Database",status:"operational",description:"Main database service",lastCheck:new Date,enabled:!0,latency:200,errors:[]},{name:"Firebase Storage",status:"operational",description:"File storage service",lastCheck:new Date,enabled:!0,latency:180,errors:[]},{name:"Cloud Functions",status:"operational",description:"Server-side functions",lastCheck:new Date,enabled:!0,latency:300,errors:[]}]),l=ue([{name:"Session Timeout",status:"operational",description:"Automatic user logout system",lastCheck:new Date,enabled:!0,latency:50,errors:[]},{name:"IEP Encryption",status:"operational",description:"Sensitive data encryption",lastCheck:new Date,enabled:!0,latency:80,errors:[]},{name:"Access Control",status:"operational",description:"Role-based permissions",lastCheck:new Date,enabled:!0,latency:120,errors:[]},{name:"Audit Logging",status:"operational",description:"Activity tracking system",lastCheck:new Date,enabled:!0,latency:90,errors:[]}]),c=be(()=>[...o.value,...l.value]),u=be(()=>c.value.length),d=be(()=>c.value.filter(S=>S.status==="operational").length),f=be(()=>{const S=c.value.map(_=>_.status);return S.every(_=>_==="operational"||_==="disabled")?"operational":S.some(_=>_==="down"||_==="error")?"down":"degraded"}),p=S=>{switch(S){case"operational":return"✅";case"degraded":return"⚠️";case"down":return"❌";case"disabled":return"⏸️";default:return"🔄"}},m=S=>{switch(S){case"operational":return"All systems operational";case"degraded":return"Some issues detected";case"down":return"Critical issues found";case"checking":return"Running diagnostics...";default:return"Unknown status"}},g=S=>S?new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(S):"",v=(S,_,b="info")=>{i.value.unshift({id:Date.now()+Math.random(),timestamp:new Date,component:S,message:_,type:b}),i.value.length>20&&(i.value=i.value.slice(0,20))},E=async S=>{v(S.name,"Starting component test...","info");try{const _=performance.now();await new Promise(I=>setTimeout(I,Math.random()*1e3+500));const b=Math.round(performance.now()-_),T=c.value.find(I=>I.name===S.name);T&&(T.status=Math.random()>.1?"operational":"degraded",T.latency=b,T.lastCheck=new Date,T.errors=T.status==="degraded"?["Minor performance issue detected"]:[]),v(S.name,`Test completed - ${T.status} (${b}ms)`,T.status==="operational"?"success":"warning"),s.value={component:S.name,data:{status:T.status,latency:`${b}ms`,timestamp:new Date().toISOString(),details:T.status==="operational"?"All checks passed successfully":"Minor performance issues detected"}},n.value=!0}catch(_){v(S.name,`Test failed: ${_.message}`,"error")}},x=S=>{const _=c.value.find(b=>b.name===S.name);_&&(_.enabled=!_.enabled,_.status=_.enabled?"operational":"disabled",v(S.name,`Component ${_.enabled?"enabled":"disabled"}`,"info"))},y=async()=>{if(!e.value){e.value=!0,r.value=new Date,v("System","Starting full system refresh...","info");try{const S=c.value.filter(_=>_.enabled).map(_=>E(_));await Promise.all(S),v("System","Full system refresh completed","success")}catch(S){v("System",`Refresh failed: ${S.message}`,"error")}finally{e.value=!1}}},C=async()=>{a.value=!0,v("System","Starting comprehensive system test...","info");try{await y(),v("System","Comprehensive system test completed","success")}catch(S){v("System",`System test failed: ${S.message}`,"error")}finally{a.value=!1}},P=()=>{const S={timestamp:new Date().toISOString(),overallStatus:f.value,components:c.value.map(I=>({name:I.name,status:I.status,enabled:I.enabled,latency:I.latency,lastCheck:I.lastCheck,errors:I.errors})),logs:i.value.slice(0,10)},_=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),b=URL.createObjectURL(_),T=document.createElement("a");T.href=b,T.download=`health-report-${Date.now()}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(b),v("System","Health report exported","info")},k=()=>{i.value=[]},w=()=>{n.value=!1,s.value={}};return jt(()=>{v("System","Component Health Dashboard initialized","success")}),(S,_)=>(U(),j("div",ude,[h("div",dde,[_[1]||(_[1]=h("h2",null,"🔧 Component Health Dashboard",-1)),h("div",fde,[h("button",{onClick:y,disabled:e.value,class:"btn btn-primary"},te(e.value?"🔄 Refreshing...":"🔄 Refresh All"),9,hde),r.value?(U(),j("span",pde," Last update: "+te(g(r.value)),1)):Ae("",!0)])]),h("div",mde,[h("div",{class:et(["status-card overall",f.value])},[h("div",gde,te(p(f.value)),1),h("div",vde,[_[2]||(_[2]=h("h3",null,"System Status",-1)),h("p",null,te(m(f.value)),1),h("div",xde,te(d.value)+"/"+te(u.value)+" components healthy ",1)])],2)]),h("div",yde,[h("div",Ede,[_[3]||(_[3]=h("h3",null,"🔧 Core Services",-1)),h("div",_de,[(U(!0),j(Fe,null,je(o.value,b=>(U(),Xr(oS,{key:b.name,component:b,onTest:E,onToggle:x},null,8,["component"]))),128))])]),h("div",bde,[_[4]||(_[4]=h("h3",null,"🔐 Authentication & Security",-1)),h("div",Sde,[(U(!0),j(Fe,null,je(l.value,b=>(U(),Xr(oS,{key:b.name,component:b,onTest:E,onToggle:x},null,8,["component"]))),128))])])]),h("div",Tde,[_[5]||(_[5]=h("h3",null,"⚡ Quick Tests",-1)),h("div",Ade,[h("button",{onClick:C,disabled:a.value,class:"admin-action-btn",style:{"min-width":"160px","max-width":"160px"}},te(a.value?"🧪 Testing...":"🧪 Full System Test"),9,wde),h("button",{onClick:P,class:"admin-action-btn",style:{"min-width":"140px","max-width":"140px"}}," 📋 Export Report ")])]),h("div",Cde,[h("div",{class:"logs-header"},[_[6]||(_[6]=h("h3",null,"📝 Component Activity Logs",-1)),h("div",{class:"log-controls"},[h("button",{onClick:k,class:"btn btn-sm btn-secondary"},"Clear")])]),h("div",Ide,[(U(!0),j(Fe,null,je(i.value,b=>(U(),j("div",{key:b.id,class:et(["log-entry",b.type])},[h("span",kde,te(g(b.timestamp)),1),h("span",Dde,te(b.component),1),h("span",Pde,te(b.message),1)],2))),128)),i.value.length===0?(U(),j("div",Fde,' No activity logs yet. Click "Refresh All" to start monitoring. ')):Ae("",!0)])]),n.value?(U(),j("div",{key:0,class:"test-modal-overlay",onClick:w},[h("div",{class:"test-modal",onClick:_[0]||(_[0]=fn(()=>{},["stop"]))},[h("div",Rde,[h("h3",null,te(s.value.component)+" Test Results",1),h("button",{onClick:w,class:"btn btn-sm btn-secondary"},"✕")]),h("div",Ode,[h("pre",null,te(JSON.stringify(s.value.data,null,2)),1)])])])):Ae("",!0)]))}},Mde=yt(Nde,[["__scopeId","data-v-106cd980"]]),Lde={class:"admin-permissions-matrix"},Bde={class:"matrix-container"},Ude={class:"permissions-table"},Vde={class:"page-info"},$de={class:"page-name"},jde={class:"page-category"},Hde={class:"page-description"},Gde={class:"permission-cell"},Wde={class:"permission-toggle"},zde=["onUpdate:modelValue","onChange"],Kde={class:"permission-cell"},qde={class:"permission-toggle"},Xde=["onUpdate:modelValue","onChange"],Yde={class:"permission-cell"},Qde={class:"permission-toggle"},Jde=["onUpdate:modelValue","onChange"],Zde={class:"matrix-actions"},efe={class:"bulk-actions"},tfe={class:"bulk-buttons"},rfe={key:0,class:"save-status"},nfe={__name:"AdminPermissionsMatrix",setup(t){const e=ue(null),r=ue([{key:"dashboard",label:"Dashboard",category:"Dashboard",description:"Main admin overview and statistics"},{key:"usersAdd",label:"Add Users",category:"User Management",description:"Create new user accounts"},{key:"usersEdit",label:"Manage Users",category:"User Management",description:"Edit existing user accounts"},{key:"students",label:"Students",category:"Student Management",description:"View and manage student records"},{key:"addStudents",label:"Add Students",category:"Student Management",description:"Bulk import student data"},{key:"aide-assignment",label:"Aide Assignment",category:"Aide Management",description:"Assign aides to students"},{key:"aide-schedule",label:"Aide Schedule",category:"Aide Management",description:"Manage aide schedules"},{key:"time-table",label:"Time Table",category:"Aide Management",description:"Configure school time periods"},{key:"seis",label:"SEIS Import",category:"Data Integration",description:"Import SEIS student data"},{key:"aeries",label:"Aeries API & Import",category:"Data Integration",description:"Connect to Aeries SIS"},{key:"testing-links",label:"Testing Links",category:"Data Integration",description:"Google Sheets integration for testing"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"Data Integration",description:"Manage teacher feedback system"},{key:"backup-restore",label:"Backup & Restore",category:"Data Integration",description:"Database backup and restore"},{key:"permissions",label:"Permissions",category:"System Config",description:"User role and permission management"},{key:"settings",label:"App Settings",category:"System Config",description:"Global application settings"},{key:"iep-security",label:"IEP Security",category:"System Config",description:"IEP data encryption and security"},{key:"security",label:"Security Controls",category:"System Config",description:"Security monitoring and controls"},{key:"component-health",label:"Component Debug",category:"System Monitoring",description:"Component health and debugging"}]),n=Cs({}),s={administrator:{dashboard:!0,usersAdd:!0,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!0,aeries:!0,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,permissions:!1,settings:!0,"iep-security":!1,security:!1,"component-health":!0},administrator_504_CM:{dashboard:!0,usersAdd:!1,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!1,"aide-schedule":!1,"time-table":!1,seis:!0,aeries:!0,"testing-links":!1,"teacher-feedback":!0,"backup-restore":!1,permissions:!1,settings:!1,"iep-security":!1,security:!1,"component-health":!1},sped_chair:{dashboard:!0,usersAdd:!1,usersEdit:!0,students:!0,addStudents:!0,"aide-assignment":!0,"aide-schedule":!0,"time-table":!0,seis:!0,aeries:!0,"testing-links":!0,"teacher-feedback":!0,"backup-restore":!0,permissions:!1,settings:!0,"iep-security":!0,security:!0,"component-health":!0}},i=()=>{r.value.forEach(p=>{n[p.key]={administrator:s.administrator[p.key]||!1,administrator_504_CM:s.administrator_504_CM[p.key]||!1,sped_chair:s.sped_chair[p.key]||!1}})},a=async()=>{try{const p=at(Ye,"app_settings","admin_panel_permissions"),m=await sr(p);if(m.exists()){const g=m.data();r.value.forEach(v=>{g[v.key]&&(n[v.key]={administrator:g[v.key].administrator??s.administrator[v.key],administrator_504_CM:g[v.key].administrator_504_CM??s.administrator_504_CM[v.key],sped_chair:g[v.key].sped_chair??s.sped_chair[v.key]})}),f("Permissions loaded successfully","success")}else i(),f("Using default permissions","info")}catch(p){console.error("Error loading permissions:",p),f("Error loading permissions","error"),i()}},o=async()=>{try{const p=at(Ye,"app_settings","admin_panel_permissions");await tr(p,n),f("Permissions saved successfully","success")}catch(p){console.error("Error saving permissions:",p),f("Error saving permissions","error")}},l=async(p,m,g)=>{n[p][m]=g,await o()},c=async p=>{r.value.forEach(m=>{n[m.key][p]=!0}),await o(),f(`All permissions granted to ${p}`,"success")},u=async()=>{r.value.forEach(p=>{n[p.key].administrator=!1,n[p.key].administrator_504_CM=!1,n[p.key].sped_chair=!1}),await o(),f("All permissions revoked","warning")},d=async()=>{i(),await o(),f("Permissions reset to defaults","info")},f=(p,m)=>{e.value={message:p,type:m},setTimeout(()=>{e.value=null},3e3)};return jt(()=>{i(),a()}),(p,m)=>(U(),j("div",Lde,[m[8]||(m[8]=h("div",{class:"matrix-header"},[h("h2",null,"🔐 Admin Panel Permissions Matrix"),h("p",{class:"matrix-description"}," Control which admin panel pages different admin roles can access. Changes are saved automatically. ")],-1)),h("div",Bde,[h("table",Ude,[m[6]||(m[6]=h("thead",null,[h("tr",null,[h("th",{class:"page-column"},"Admin Panel Page"),h("th",{class:"role-column"},"Administrator"),h("th",{class:"role-column"},"Administrator 504/CM"),h("th",{class:"role-column"},"SPED Chair")])],-1)),h("tbody",null,[(U(!0),j(Fe,null,je(r.value,g=>(U(),j("tr",{key:g.key,class:"permission-row"},[h("td",Vde,[h("div",$de,te(g.label),1),h("div",jde,te(g.category),1),h("div",Hde,te(g.description),1)]),h("td",Gde,[h("label",Wde,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].administrator=v,onChange:v=>l(g.key,"administrator",v.target.checked)},null,40,zde),[[xt,n[g.key].administrator]]),m[3]||(m[3]=h("span",{class:"toggle-slider"},null,-1))])]),h("td",Kde,[h("label",qde,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].administrator_504_CM=v,onChange:v=>l(g.key,"administrator_504_CM",v.target.checked)},null,40,Xde),[[xt,n[g.key].administrator_504_CM]]),m[4]||(m[4]=h("span",{class:"toggle-slider"},null,-1))])]),h("td",Yde,[h("label",Qde,[Ve(h("input",{type:"checkbox","onUpdate:modelValue":v=>n[g.key].sped_chair=v,onChange:v=>l(g.key,"sped_chair",v.target.checked)},null,40,Jde),[[xt,n[g.key].sped_chair]]),m[5]||(m[5]=h("span",{class:"toggle-slider"},null,-1))])])]))),128))])])]),h("div",Zde,[h("div",efe,[m[7]||(m[7]=h("h3",null,"Bulk Actions",-1)),h("div",tfe,[h("button",{onClick:m[0]||(m[0]=g=>c("administrator")),class:"btn btn-success"}," Grant All to Administrator "),h("button",{onClick:m[1]||(m[1]=g=>c("administrator_504_CM")),class:"btn btn-success"}," Grant All to Administrator 504/CM "),h("button",{onClick:m[2]||(m[2]=g=>c("sped_chair")),class:"btn btn-success"}," Grant All to SPED Chair "),h("button",{onClick:u,class:"btn btn-warning"}," Revoke All Permissions "),h("button",{onClick:d,class:"btn btn-secondary"}," Reset to Defaults ")])])]),e.value?(U(),j("div",rfe,[h("div",{class:et(["status-message",e.value.type])},te(e.value.message),3)])):Ae("",!0)]))}},sfe=yt(nfe,[["__scopeId","data-v-3c083134"]]),afe={name:"AdminView",components:{TabBar:kj,UserAddForm:Uj,UserTable:lH,PermissionsMatrix:yH,AdminStudents:UH,StudentBulkImporter:jG,AdminPermissions:EW,SeisImport:BW,AeriesImport:qW,AeriesAPIConnector:nK,AppSettings:QK,AdminAideAssignment:_I,AdminTimeTable:rk,AdminAideSchedule:pk,AdminBackupRestore:mk,AdminTeacherFeedback:zoe,TestingLinks:Kle,AdminDashboard:Dce,DebugEncryption:gk,SecurityControlCenter:$ue,ComponentHealthDashboard:Mde,AdminPermissionsMatrix:sfe},setup(){const t=vi(),e=_L(),r=ue("dashboard"),n=ue("dashboard"),{students:s,fetchStudents:i}=Oa(),{users:a,fetchUsers:o}=Na(),{currentUser:l}=hd();jt(async()=>{try{await Promise.all([i(),o()]);const C=e.query.category;C&&p(C)}catch(C){console.error("Error loading data:",C)}});const c=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management",status:"not-working"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration",status:"not-active"},{key:"aeries",label:"Aeries API & Import",category:"data-integration",status:"not-active"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"iep-security",label:"IEP Security",category:"system-config"},{key:"security",label:"Security Controls",category:"system-config"},{key:"component-health",label:"Component Debug",category:"monitoring"}],u=[{key:"admin-permissions",label:"Admin Panel Permissions",category:"system-config"}],d=be(()=>{var P;return((P=l.value)==null?void 0:P.role)==="admin"?[...c,...u]:c}),f=C=>d.value.filter(P=>P.category===C),p=C=>{n.value=C;const P=f(C);P.length>0&&(r.value=P[0].key)};return{activeTab:r,activeCategory:n,tabs:d,students:s,userMap:a,getTabsForCategory:f,setActiveCategory:p,handleTabChange:C=>{r.value=C},goToStudents:()=>{t.push("/students")},goToDashboard:()=>{t.push("/admin/dashboard")},handleGoToCategory:C=>{p(C)},handleBulkImporterClose:()=>{r.value="students"},handleStudentsImported:async C=>{console.log("Students imported:",C);try{await i()}catch(P){console.error("Failed to refresh students after import:",P)}}}}},ife={class:"admin-header"},ofe={class:"admin-nav"},lfe={class:"admin-actions"},cfe={key:0,class:"sub-tab-container"},ufe={class:"admin-section"},dfe={key:0,class:"admin-section"},ffe={key:1,class:"admin-section"},hfe={key:2,class:"admin-section"},pfe={key:3,class:"admin-section"},mfe={key:4,class:"admin-section"},gfe={key:5,class:"admin-section"},vfe={key:6,class:"admin-section"},xfe={key:7,class:"admin-section"},yfe={key:8,class:"admin-section"},Efe={key:9,class:"admin-section"},_fe={key:10,class:"admin-section"},bfe={key:11,class:"admin-section"},Sfe={key:12,class:"admin-section"},Tfe={key:13,class:"admin-section"},Afe={key:14,class:"admin-section"},wfe={key:15,class:"admin-section"},Cfe={key:16,class:"admin-section"},Ife={key:17,class:"admin-section"},kfe={key:18,class:"admin-section"};function Dfe(t,e,r,n,s,i){const a=Ir("TabBar"),o=Ir("AdminDashboard"),l=Ir("UserAddForm"),c=Ir("UserTable"),u=Ir("AdminStudents"),d=Ir("StudentBulkImporter"),f=Ir("AdminPermissions"),p=Ir("AdminAideAssignment"),m=Ir("AdminAideSchedule"),g=Ir("AdminTimeTable"),v=Ir("SeisImport"),E=Ir("AeriesAPIConnector"),x=Ir("AeriesImport"),y=Ir("AppSettings"),C=Ir("TestingLinks"),P=Ir("AdminTeacherFeedback"),k=Ir("AdminBackupRestore"),w=Ir("DebugEncryption"),S=Ir("SecurityControlCenter"),_=Ir("ComponentHealthDashboard"),b=Ir("AdminPermissionsMatrix");return U(),j("div",null,[h("div",ife,[e[8]||(e[8]=h("h1",null,"Admin Panel",-1)),h("div",ofe,[h("button",{onClick:e[0]||(e[0]=T=>n.setActiveCategory("dashboard")),class:et([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2),h("button",{onClick:e[1]||(e[1]=T=>n.setActiveCategory("users-students")),class:et([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student Management ",2),h("button",{onClick:e[2]||(e[2]=T=>n.setActiveCategory("aide-management")),class:et([{active:n.activeCategory==="aide-management"},"category-btn"])}," Aide Management ",2),h("button",{onClick:e[3]||(e[3]=T=>n.setActiveCategory("data-integration")),class:et([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2),h("button",{onClick:e[4]||(e[4]=T=>n.setActiveCategory("system-config")),class:et([{active:n.activeCategory==="system-config"},"category-btn"])}," System Configuration ",2),h("button",{onClick:e[5]||(e[5]=T=>n.setActiveCategory("monitoring")),class:et([{active:n.activeCategory==="monitoring"},"category-btn"])}," System Monitoring ",2)]),h("div",lfe,[h("button",{onClick:e[6]||(e[6]=(...T)=>n.goToStudents&&n.goToStudents(...T)),class:"return-btn"},e[7]||(e[7]=[h("span",null,"←",-1),Ne(" Return to Students ")]))])]),n.activeCategory?(U(),j("div",cfe,[st(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):Ae("",!0),h("div",ufe,[n.activeTab==="dashboard"?(U(),j("div",dfe,[st(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):Ae("",!0),n.activeTab==="usersAdd"?(U(),j("div",ffe,[st(l)])):Ae("",!0),n.activeTab==="usersEdit"?(U(),j("div",hfe,[st(c)])):Ae("",!0),n.activeTab==="students"?(U(),j("div",pfe,[st(u)])):Ae("",!0),n.activeTab==="addStudents"?(U(),j("div",mfe,[st(d,{onClose:n.handleBulkImporterClose,onImported:n.handleStudentsImported},null,8,["onClose","onImported"])])):Ae("",!0),n.activeTab==="permissions"?(U(),j("div",gfe,[st(f)])):Ae("",!0),n.activeTab==="aide-assignment"?(U(),j("div",vfe,[st(p)])):Ae("",!0),n.activeTab==="aide-schedule"?(U(),j("div",xfe,[st(m)])):Ae("",!0),n.activeTab==="time-table"?(U(),j("div",yfe,[st(g)])):Ae("",!0),n.activeTab==="seis"?(U(),j("div",Efe,[st(v)])):Ae("",!0),n.activeTab==="aeries"?(U(),j("div",_fe,[st(E),e[9]||(e[9]=h("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),st(x)])):Ae("",!0),n.activeTab==="settings"?(U(),j("div",bfe,[st(y)])):Ae("",!0),n.activeTab==="testing-links"?(U(),j("div",Sfe,[st(C,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):Ae("",!0),n.activeTab==="teacher-feedback"?(U(),j("div",Tfe,[st(P)])):Ae("",!0),n.activeTab==="backup-restore"?(U(),j("div",Afe,[st(k)])):Ae("",!0),n.activeTab==="iep-security"?(U(),j("div",wfe,[e[10]||(e[10]=h("h2",null,"IEP Data Security",-1)),st(w,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Ae("",!0),n.activeTab==="security"?(U(),j("div",Cfe,[st(S,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Ae("",!0),n.activeTab==="component-health"?(U(),j("div",Ife,[st(_)])):Ae("",!0),n.activeTab==="admin-permissions"?(U(),j("div",kfe,[st(b)])):Ae("",!0)])])}const Pfe=yt(afe,[["render",Dfe],["__scopeId","data-v-e7a25942"]]),Ffe={class:"aide-schedule-view"},Rfe={class:"header"},Ofe={class:"user-info"},Nfe={class:"content"},Mfe={key:0,class:"error-message"},Lfe={key:1,class:"error-message"},Bfe={key:2,class:"loading"},Ufe={key:3,class:"schedule-container"},Vfe={class:"schedule-display"},$fe={class:"schedule-timeline"},jfe={class:"time-info"},Hfe={class:"time"},Gfe={class:"type-badge"},Wfe={class:"assignment-info"},zfe={key:0},Kfe={key:1,class:"no-assignment"},qfe={class:"schedule-editor"},Xfe={class:"editor-content"},Yfe={class:"time-block-header"},Qfe={class:"time"},Jfe={class:"type-badge"},Zfe={class:"assignment-editor"},e0e=["onUpdate:modelValue"],t0e=["value"],r0e=["value"],n0e={class:"editor-actions"},s0e=["disabled"],a0e={key:0},i0e={key:1},o0e={__name:"AideScheduleView",setup(t){const e=vi(),r=fa(),{userList:n,fetchUsers:s}=Na(),{students:i,fetchStudents:a}=Oa(),{loadAppSettings:o,saveAppSettings:l}=ha(),c=ue(!0),u=ue(!1),d=ue({}),f=ue({}),p=be(()=>{var k;return((k=r.currentUser)==null?void 0:k.role)==="paraeducator"}),m=be(()=>{var k;return(k=r.currentUser)==null?void 0:k.uid}),g=be(()=>{var k;return((k=n.value)==null?void 0:k.filter(w=>w.role==="teacher"))||[]});async function v(){var k;try{const w=await sr(at(Ye,"app_settings","global"));if(w.exists()){const S=w.data();d.value=((k=S.timeTables)==null?void 0:k[0])||S.timeTable||{}}}catch(w){console.error("Error loading time table:",w)}}function E(){return d.value.schedule?d.value.schedule.map((k,w)=>({...k,id:k.id||`block-${w}`,assignments:f.value[k.id||`block-${w}`]||{}})):[]}function x(){return E().map(w=>{const S=w.assignments[m.value];let _="";if(S){if(S.startsWith("teacher:")){const b=S.replace("teacher:",""),T=g.value.find(I=>I.id===b);_=T?T.name||T.email:"Unknown Teacher"}else if(S.startsWith("student:")){const b=S.replace("student:",""),T=i.value.find(I=>I.id===b);_=T?`${ct(T,"firstName")} ${ct(T,"lastName")}`:"Unknown Student"}}return{...w,assignment:_}})}async function y(){try{u.value=!0;const k=await o(),w={...k.detailedAideSchedule};E().forEach(_=>{w[_.id]||(w[_.id]={}),w[_.id][m.value]=_.assignments[m.value]});const S={...k,detailedAideSchedule:w};await l(S),console.log("My schedule saved successfully")}catch(k){console.error("Error saving my schedule:",k)}finally{u.value=!1}}function C(){r.logout(),e.push("/login")}async function P(){try{c.value=!0,await Promise.all([s(),a(),o(),v()]);const k=await sr(at(Ye,"app_settings","global"));if(k.exists()){const w=k.data();f.value=w.detailedAideSchedule||{}}c.value=!1}catch(k){console.error("Error loading aide schedule data:",k),c.value=!1}}return jt(P),(k,w)=>{var S,_;return U(),j("div",Ffe,[h("div",Rfe,[w[2]||(w[2]=h("h1",null,"My Schedule",-1)),h("div",Ofe,[h("span",null,te(((S=oe(r).currentUser)==null?void 0:S.name)||((_=oe(r).currentUser)==null?void 0:_.email)),1),h("button",{onClick:C,class:"btn btn-secondary"}," Logout ")])]),h("div",Nfe,[oe(r).currentUser?p.value?c.value?(U(),j("div",Bfe," Loading your schedule... ")):(U(),j("div",Ufe,[h("div",Vfe,[w[7]||(w[7]=h("h2",null,"My Daily Schedule",-1)),h("div",$fe,[(U(!0),j(Fe,null,je(x(),b=>(U(),j("div",{key:b.id,class:et(["time-block",b.type])},[h("div",jfe,[h("span",Hfe,te(b.startTime)+" - "+te(b.endTime),1),h("span",Gfe,te(b.type),1)]),h("div",Wfe,[b.assignment?(U(),j("span",zfe,te(b.assignment),1)):(U(),j("span",Kfe,"No Assignment"))])],2))),128))])]),h("div",qfe,[w[9]||(w[9]=h("h2",null,"Edit My Schedule",-1)),h("div",Xfe,[(U(!0),j(Fe,null,je(E(),b=>(U(),j("div",{key:b.id,class:"time-block-editor"},[h("div",Yfe,[h("span",Qfe,te(b.startTime)+" - "+te(b.endTime),1),h("span",Jfe,te(b.type),1)]),h("div",Zfe,[Ve(h("select",{"onUpdate:modelValue":T=>b.assignments[m.value]=T,class:"assignment-select"},[w[8]||(w[8]=h("option",{value:""},"No Assignment",-1)),(U(!0),j(Fe,null,je(g.value,T=>(U(),j("option",{key:T.id,value:`teacher:${T.id}`},te(T.name||T.email),9,t0e))),128)),(U(!0),j(Fe,null,je(oe(i),T=>(U(),j("option",{key:T.id,value:`student:${T.id}`},te(oe(ct)(T,"firstName"))+" "+te(oe(ct)(T,"lastName")),9,r0e))),128))],8,e0e),[[vr,b.assignments[m.value]]])])]))),128))]),h("div",n0e,[h("button",{onClick:y,class:"btn btn-primary",disabled:u.value},[u.value?(U(),j("span",a0e,"💾")):(U(),j("span",i0e,"💾")),Ne(" "+te(u.value?"Saving...":"Save My Schedule"),1)],8,s0e)])])])):(U(),j("div",Lfe,[w[5]||(w[5]=h("h2",null,"Access Denied",-1)),w[6]||(w[6]=h("p",null,"This page is only available to paraeducators.",-1)),h("button",{onClick:w[1]||(w[1]=b=>oe(e).push("/")),class:"btn btn-primary"},"Go Home")])):(U(),j("div",Mfe,[w[3]||(w[3]=h("h2",null,"Authentication Required",-1)),w[4]||(w[4]=h("p",null,"Please log in to access this page.",-1)),h("button",{onClick:w[0]||(w[0]=b=>oe(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},l0e=yt(o0e,[["__scopeId","data-v-f2c7a0cd"]]);function c0e(t){const{waitForAuthInit:e}=hd();e.then(()=>{t.beforeEach((r,n,s)=>{const{currentUser:i}=hd(),a=r.meta.requiresAuth,o=r.meta.allowedRoles;a&&!i.value?s({name:"Login"}):a&&i.value&&!i.value.role?(console.log(`User ${i.value.uid} exists in Auth but has no role - redirecting to login for role assignment`),s({name:"Login"})):a&&o&&i.value&&!o.includes(i.value.role)?(console.warn(`User with role '${i.value.role}' tried to access restricted route: ${r.path}`),s({name:"Home"})):s()})})}const u0e=[{path:"/login",name:"Login",component:Tj},{path:"/",name:"Home",component:Gb,meta:{requiresAuth:!0,allowedRoles:eb}},{path:"/students",name:"Students",component:Gb,meta:{requiresAuth:!0,allowedRoles:eb}},{path:"/admin",name:"Admin",component:Pfe,meta:{requiresAuth:!0,allowedRoles:Yc}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:_I,meta:{requiresAuth:!0,allowedRoles:Yc}},{path:"/admin/time-table",name:"AdminTimeTable",component:rk,meta:{requiresAuth:!0,allowedRoles:Yc}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:pk,meta:{requiresAuth:!0,allowedRoles:Yc}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:mk,meta:{requiresAuth:!0,allowedRoles:Yc}},{path:"/aide-schedule",name:"AideSchedule",component:l0e,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}},{path:"/testing",name:"Testing",component:()=>Oo(()=>import("./TestingView-BIQXO9L1.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,allowedRoles:["admin","administrator","sped_chair","administrator_504_CM"]}}],vk=yL({history:qM("/"),routes:u0e});c0e(vk);const Yx=D0(tB),d0e=hR();Yx.use(vk);Yx.use(d0e);Yx.mount("#app");export{Qt as A,Q9 as B,Oo as C,zo as D,zd as E,up as F,ha as G,Fe as H,je as I,st as J,SW as K,TW as L,m0e as M,vI as S,yt as _,nr as a,j as b,be as c,U as d,h as e,Ae as f,oe as g,Ne as h,$C as i,Q0 as j,at as k,J9 as l,Ye as m,sr as n,jt as o,tr as p,sa as q,ue as r,Um as s,te as t,gI as u,At as v,Ve as w,Ft as x,lr as y,Qs as z};
