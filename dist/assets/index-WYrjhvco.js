const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestingView-D7Czvft-.js","assets/TestingView-C89Kk_vX.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lp(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Wt={},hc=[],Us=()=>{},$P=()=>!1,sf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),C1=t=>t.startsWith("onUpdate:"),hr=Object.assign,k1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},jP=Object.prototype.hasOwnProperty,rr=(t,e)=>jP.call(t,e),dt=Array.isArray,pc=t=>Yc(t)==="[object Map]",vl=t=>Yc(t)==="[object Set]",PE=t=>Yc(t)==="[object Date]",HP=t=>Yc(t)==="[object RegExp]",_t=t=>typeof t=="function",yr=t=>typeof t=="string",ua=t=>typeof t=="symbol",cr=t=>t!==null&&typeof t=="object",D1=t=>(cr(t)||_t(t))&&_t(t.then)&&_t(t.catch),BT=Object.prototype.toString,Yc=t=>BT.call(t),GP=t=>Yc(t).slice(8,-1),cp=t=>Yc(t)==="[object Object]",P1=t=>yr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mc=lp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),up=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},zP=/-(\w)/g,An=up(t=>t.replace(zP,(e,r)=>r?r.toUpperCase():"")),WP=/\B([A-Z])/g,gs=up(t=>t.replace(WP,"-$1").toLowerCase()),af=up(t=>t.charAt(0).toUpperCase()+t.slice(1)),Yu=up(t=>t?`on${af(t)}`:""),Jn=(t,e)=>!Object.is(t,e),gc=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},iv=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},ah=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ih=t=>{const e=yr(t)?Number(t):NaN;return isNaN(e)?t:e};let RE;const dp=()=>RE||(RE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),KP="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",qP=lp(KP);function bn(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=yr(n)?JP(n):bn(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(yr(t)||cr(t))return t}const XP=/;(?![^(]*\))/g,YP=/:([^]+)/,QP=/\/\*[^]*?\*\//g;function JP(t){const e={};return t.replace(QP,"").split(XP).forEach(r=>{if(r){const n=r.split(YP);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ut(t){let e="";if(yr(t))e=t;else if(dt(t))for(let r=0;r<t.length;r++){const n=ut(t[r]);n&&(e+=n+" ")}else if(cr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function ZP(t){if(!t)return null;let{class:e,style:r}=t;return e&&!yr(e)&&(t.class=ut(e)),r&&(t.style=bn(r)),t}const eR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tR=lp(eR);function LT(t){return!!t||t===""}function rR(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=lo(t[n],e[n]);return r}function lo(t,e){if(t===e)return!0;let r=PE(t),n=PE(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=ua(t),n=ua(e),r||n)return t===e;if(r=dt(t),n=dt(e),r||n)return r&&n?rR(t,e):!1;if(r=cr(t),n=cr(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!lo(t[a],e[a]))return!1}}return String(t)===String(e)}function fp(t,e){return t.findIndex(r=>lo(r,e))}const UT=t=>!!(t&&t.__v_isRef===!0),ce=t=>yr(t)?t:t==null?"":dt(t)||cr(t)&&(t.toString===BT||!_t(t.toString))?UT(t)?ce(t.value):JSON.stringify(t,VT,2):String(t),VT=(t,e)=>UT(e)?VT(t,e.value):pc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],i)=>(r[xm(n,i)+" =>"]=s,r),{})}:vl(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>xm(r))}:ua(e)?xm(e):cr(e)&&!dt(e)&&!cp(e)?String(e):e,xm=(t,e="")=>{var r;return ua(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let On;class R1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=On,!e&&On&&(this.index=(On.scopes||(On.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=On;try{return On=this,e()}finally{On=r}}}on(){++this._on===1&&(this.prevScope=On,On=this)}off(){this._on>0&&--this._on===0&&(On=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function F1(t){return new R1(t)}function O1(){return On}function $T(t,e=!1){On&&On.cleanups.push(t)}let mr;const ym=new WeakSet;class Id{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,On&&On.active&&On.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ym.has(this)&&(ym.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||HT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,FE(this),GT(this);const e=mr,r=ia;mr=this,ia=!0;try{return this.fn()}finally{zT(this),mr=e,ia=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)B1(e);this.deps=this.depsTail=void 0,FE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ym.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ov(this)&&this.run()}get dirty(){return ov(this)}}let jT=0,Qu,Ju;function HT(t,e=!1){if(t.flags|=8,e){t.next=Ju,Ju=t;return}t.next=Qu,Qu=t}function N1(){jT++}function M1(){if(--jT>0)return;if(Ju){let e=Ju;for(Ju=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Qu;){let e=Qu;for(Qu=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function GT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function zT(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),B1(n),nR(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function ov(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(WT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function WT(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Cd)||(t.globalVersion=Cd,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ov(t))))return;t.flags|=2;const e=t.dep,r=mr,n=ia;mr=t,ia=!0;try{GT(t);const s=t.fn(t._value);(e.version===0||Jn(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{mr=r,ia=n,zT(t),t.flags&=-3}}function B1(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)B1(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function nR(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}function sR(t,e){t.effect instanceof Id&&(t=t.effect.fn);const r=new Id(t);e&&hr(r,e);try{r.run()}catch(s){throw r.stop(),s}const n=r.run.bind(r);return n.effect=r,n}function aR(t){t.effect.stop()}let ia=!0;const KT=[];function oi(){KT.push(ia),ia=!1}function li(){const t=KT.pop();ia=t===void 0?!0:t}function FE(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=mr;mr=void 0;try{e()}finally{mr=r}}}let Cd=0;class iR{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!mr||!ia||mr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==mr)r=this.activeLink=new iR(mr,this),mr.deps?(r.prevDep=mr.depsTail,mr.depsTail.nextDep=r,mr.depsTail=r):mr.deps=mr.depsTail=r,qT(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=mr.depsTail,r.nextDep=void 0,mr.depsTail.nextDep=r,mr.depsTail=r,mr.deps===r&&(mr.deps=n)}return r}trigger(e){this.version++,Cd++,this.notify(e)}notify(e){N1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{M1()}}}function qT(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)qT(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const oh=new WeakMap,zo=Symbol(""),lv=Symbol(""),kd=Symbol("");function Mn(t,e,r){if(ia&&mr){let n=oh.get(t);n||oh.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new hp),s.map=n,s.key=r),s.track()}}function Xa(t,e,r,n,s,i){const a=oh.get(t);if(!a){Cd++;return}const o=l=>{l&&l.trigger()};if(N1(),e==="clear")a.forEach(o);else{const l=dt(t),c=l&&P1(r);if(l&&r==="length"){const u=Number(n);a.forEach((d,f)=>{(f==="length"||f===kd||!ua(f)&&f>=u)&&o(d)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(kd)),e){case"add":l?c&&o(a.get("length")):(o(a.get(zo)),pc(t)&&o(a.get(lv)));break;case"delete":l||(o(a.get(zo)),pc(t)&&o(a.get(lv)));break;case"set":pc(t)&&o(a.get(zo));break}}M1()}function oR(t,e){const r=oh.get(t);return r&&r.get(e)}function Vl(t){const e=zt(t);return e===t?e:(Mn(e,"iterate",kd),Cs(t)?e:e.map(Sn))}function pp(t){return Mn(t=zt(t),"iterate",kd),t}const lR={__proto__:null,[Symbol.iterator](){return Em(this,Symbol.iterator,Sn)},concat(...t){return Vl(this).concat(...t.map(e=>dt(e)?Vl(e):e))},entries(){return Em(this,"entries",t=>(t[1]=Sn(t[1]),t))},every(t,e){return Wa(this,"every",t,e,void 0,arguments)},filter(t,e){return Wa(this,"filter",t,e,r=>r.map(Sn),arguments)},find(t,e){return Wa(this,"find",t,e,Sn,arguments)},findIndex(t,e){return Wa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Wa(this,"findLast",t,e,Sn,arguments)},findLastIndex(t,e){return Wa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Wa(this,"forEach",t,e,void 0,arguments)},includes(...t){return _m(this,"includes",t)},indexOf(...t){return _m(this,"indexOf",t)},join(t){return Vl(this).join(t)},lastIndexOf(...t){return _m(this,"lastIndexOf",t)},map(t,e){return Wa(this,"map",t,e,void 0,arguments)},pop(){return gu(this,"pop")},push(...t){return gu(this,"push",t)},reduce(t,...e){return OE(this,"reduce",t,e)},reduceRight(t,...e){return OE(this,"reduceRight",t,e)},shift(){return gu(this,"shift")},some(t,e){return Wa(this,"some",t,e,void 0,arguments)},splice(...t){return gu(this,"splice",t)},toReversed(){return Vl(this).toReversed()},toSorted(t){return Vl(this).toSorted(t)},toSpliced(...t){return Vl(this).toSpliced(...t)},unshift(...t){return gu(this,"unshift",t)},values(){return Em(this,"values",Sn)}};function Em(t,e,r){const n=pp(t),s=n[e]();return n!==t&&!Cs(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}const cR=Array.prototype;function Wa(t,e,r,n,s,i){const a=pp(t),o=a!==t&&!Cs(t),l=a[e];if(l!==cR[e]){const d=l.apply(t,i);return o?Sn(d):d}let c=r;a!==t&&(o?c=function(d,f){return r.call(this,Sn(d),f,t)}:r.length>2&&(c=function(d,f){return r.call(this,d,f,t)}));const u=l.call(a,c,n);return o&&s?s(u):u}function OE(t,e,r,n){const s=pp(t);let i=r;return s!==t&&(Cs(t)?r.length>3&&(i=function(a,o,l){return r.call(this,a,o,l,t)}):i=function(a,o,l){return r.call(this,a,Sn(o),l,t)}),s[e](i,...n)}function _m(t,e,r){const n=zt(t);Mn(n,"iterate",kd);const s=n[e](...r);return(s===-1||s===!1)&&vp(r[0])?(r[0]=zt(r[0]),n[e](...r)):s}function gu(t,e,r=[]){oi(),N1();const n=zt(t)[e].apply(t,r);return M1(),li(),n}const uR=lp("__proto__,__v_isRef,__isVue"),XT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ua));function dR(t){ua(t)||(t=String(t));const e=zt(this);return Mn(e,"has",t),e.hasOwnProperty(t)}class YT{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(s?i?rA:tA:i?eA:ZT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=dt(e);if(!s){let l;if(a&&(l=lR[r]))return l;if(r==="hasOwnProperty")return dR}const o=Reflect.get(e,r,Rr(e)?e:n);return(ua(r)?XT.has(r):uR(r))||(s||Mn(e,"get",r),i)?o:Rr(o)?a&&P1(r)?o:o.value:cr(o)?s?U1(o):Ws(o):o}}class QT extends YT{constructor(e=!1){super(!1,e)}set(e,r,n,s){let i=e[r];if(!this._isShallow){const l=ci(i);if(!Cs(n)&&!ci(n)&&(i=zt(i),n=zt(n)),!dt(e)&&Rr(i)&&!Rr(n))return l?!1:(i.value=n,!0)}const a=dt(e)&&P1(r)?Number(r)<e.length:rr(e,r),o=Reflect.set(e,r,n,Rr(e)?e:s);return e===zt(s)&&(a?Jn(n,i)&&Xa(e,"set",r,n):Xa(e,"add",r,n)),o}deleteProperty(e,r){const n=rr(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&Xa(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!ua(r)||!XT.has(r))&&Mn(e,"has",r),n}ownKeys(e){return Mn(e,"iterate",dt(e)?"length":zo),Reflect.ownKeys(e)}}class JT extends YT{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const fR=new QT,hR=new JT,pR=new QT(!0),mR=new JT(!0),cv=t=>t,Qf=t=>Reflect.getPrototypeOf(t);function gR(t,e,r){return function(...n){const s=this.__v_raw,i=zt(s),a=pc(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=s[t](...n),u=r?cv:e?lh:Sn;return!e&&Mn(i,"iterate",l?lv:zo),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:o?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Jf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function vR(t,e){const r={get(s){const i=this.__v_raw,a=zt(i),o=zt(s);t||(Jn(s,o)&&Mn(a,"get",s),Mn(a,"get",o));const{has:l}=Qf(a),c=e?cv:t?lh:Sn;if(l.call(a,s))return c(i.get(s));if(l.call(a,o))return c(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Mn(zt(s),"iterate",zo),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=zt(i),o=zt(s);return t||(Jn(s,o)&&Mn(a,"has",s),Mn(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=zt(o),c=e?cv:t?lh:Sn;return!t&&Mn(l,"iterate",zo),o.forEach((u,d)=>s.call(i,c(u),c(d),a))}};return hr(r,t?{add:Jf("add"),set:Jf("set"),delete:Jf("delete"),clear:Jf("clear")}:{add(s){!e&&!Cs(s)&&!ci(s)&&(s=zt(s));const i=zt(this);return Qf(i).has.call(i,s)||(i.add(s),Xa(i,"add",s,s)),this},set(s,i){!e&&!Cs(i)&&!ci(i)&&(i=zt(i));const a=zt(this),{has:o,get:l}=Qf(a);let c=o.call(a,s);c||(s=zt(s),c=o.call(a,s));const u=l.call(a,s);return a.set(s,i),c?Jn(i,u)&&Xa(a,"set",s,i):Xa(a,"add",s,i),this},delete(s){const i=zt(this),{has:a,get:o}=Qf(i);let l=a.call(i,s);l||(s=zt(s),l=a.call(i,s)),o&&o.call(i,s);const c=i.delete(s);return l&&Xa(i,"delete",s,void 0),c},clear(){const s=zt(this),i=s.size!==0,a=s.clear();return i&&Xa(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=gR(s,t,e)}),r}function mp(t,e){const r=vR(t,e);return(n,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(rr(r,s)&&s in n?r:n,s,i)}const xR={get:mp(!1,!1)},yR={get:mp(!1,!0)},ER={get:mp(!0,!1)},_R={get:mp(!0,!0)},ZT=new WeakMap,eA=new WeakMap,tA=new WeakMap,rA=new WeakMap;function bR(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function SR(t){return t.__v_skip||!Object.isExtensible(t)?0:bR(GP(t))}function Ws(t){return ci(t)?t:gp(t,!1,fR,xR,ZT)}function L1(t){return gp(t,!1,pR,yR,eA)}function U1(t){return gp(t,!0,hR,ER,tA)}function TR(t){return gp(t,!0,mR,_R,rA)}function gp(t,e,r,n,s){if(!cr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=SR(t);if(i===0)return t;const a=s.get(t);if(a)return a;const o=new Proxy(t,i===2?n:r);return s.set(t,o),o}function ka(t){return ci(t)?ka(t.__v_raw):!!(t&&t.__v_isReactive)}function ci(t){return!!(t&&t.__v_isReadonly)}function Cs(t){return!!(t&&t.__v_isShallow)}function vp(t){return t?!!t.__v_raw:!1}function zt(t){const e=t&&t.__v_raw;return e?zt(e):t}function xp(t){return!rr(t,"__v_skip")&&Object.isExtensible(t)&&iv(t,"__v_skip",!0),t}const Sn=t=>cr(t)?Ws(t):t,lh=t=>cr(t)?U1(t):t;function Rr(t){return t?t.__v_isRef===!0:!1}function fe(t){return nA(t,!1)}function V1(t){return nA(t,!0)}function nA(t,e){return Rr(t)?t:new AR(t,e)}class AR{constructor(e,r){this.dep=new hp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:zt(e),this._value=r?e:Sn(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Cs(e)||ci(e);e=n?e:zt(e),Jn(e,r)&&(this._rawValue=e,this._value=n?e:Sn(e),this.dep.trigger())}}function wR(t){t.dep&&t.dep.trigger()}function me(t){return Rr(t)?t.value:t}function IR(t){return _t(t)?t():me(t)}const CR={get:(t,e,r)=>e==="__v_raw"?t:me(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Rr(s)&&!Rr(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function $1(t){return ka(t)?t:new Proxy(t,CR)}class kR{constructor(e){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new hp,{get:n,set:s}=e(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function sA(t){return new kR(t)}function aA(t){const e=dt(t)?new Array(t.length):{};for(const r in t)e[r]=iA(t,r);return e}class DR{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return oR(zt(this._object),this._key)}}class PR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function RR(t,e,r){return Rr(t)?t:_t(t)?new PR(t):cr(t)&&arguments.length>1?iA(t,e,r):fe(t)}function iA(t,e,r){const n=t[e];return Rr(n)?n:new DR(t,e,r)}class FR{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new hp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cd-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&mr!==this)return HT(this,!0),!0}get value(){const e=this.dep.track();return WT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function OR(t,e,r=!1){let n,s;return _t(t)?n=t:(n=t.get,s=t.set),new FR(n,s,r)}const NR={GET:"get",HAS:"has",ITERATE:"iterate"},MR={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Zf={},ch=new WeakMap;let Mi;function BR(){return Mi}function oA(t,e=!1,r=Mi){if(r){let n=ch.get(r);n||ch.set(r,n=[]),n.push(t)}}function LR(t,e,r=Wt){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=r,c=I=>s?I:Cs(I)||s===!1||s===0?Ya(I,1):Ya(I);let u,d,f,h,p=!1,v=!1;if(Rr(t)?(d=()=>t.value,p=Cs(t)):ka(t)?(d=()=>c(t),p=!0):dt(t)?(v=!0,p=t.some(I=>ka(I)||Cs(I)),d=()=>t.map(I=>{if(Rr(I))return I.value;if(ka(I))return c(I);if(_t(I))return l?l(I,2):I()})):_t(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){oi();try{f()}finally{li()}}const I=Mi;Mi=u;try{return l?l(t,3,[h]):t(h)}finally{Mi=I}}:d=Us,e&&s){const I=d,P=s===!0?1/0:s;d=()=>Ya(I(),P)}const g=O1(),x=()=>{u.stop(),g&&g.active&&k1(g.effects,u)};if(i&&e){const I=e;e=(...P)=>{I(...P),x()}}let y=v?new Array(t.length).fill(Zf):Zf;const E=I=>{if(!(!(u.flags&1)||!u.dirty&&!I))if(e){const P=u.run();if(s||p||(v?P.some((D,A)=>Jn(D,y[A])):Jn(P,y))){f&&f();const D=Mi;Mi=u;try{const A=[P,y===Zf?void 0:v&&y[0]===Zf?[]:y,h];y=P,l?l(e,3,A):e(...A)}finally{Mi=D}}}else u.run()};return o&&o(E),u=new Id(d),u.scheduler=a?()=>a(E,!1):E,h=I=>oA(I,!1,u),f=u.onStop=()=>{const I=ch.get(u);if(I){if(l)l(I,4);else for(const P of I)P();ch.delete(u)}},e?n?E(!0):y=u.run():a?a(E.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Ya(t,e=1/0,r){if(e<=0||!cr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Rr(t))Ya(t.value,e,r);else if(dt(t))for(let n=0;n<t.length;n++)Ya(t[n],e,r);else if(vl(t)||pc(t))t.forEach(n=>{Ya(n,e,r)});else if(cp(t)){for(const n in t)Ya(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ya(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const lA=[];function UR(t){lA.push(t)}function VR(){lA.pop()}function $R(t,e){}const jR={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},HR={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Qc(t,e,r,n){try{return n?t(...n):t()}catch(s){xl(s,e,r)}}function Hs(t,e,r,n){if(_t(t)){const s=Qc(t,e,r,n);return s&&D1(s)&&s.catch(i=>{xl(i,e,r)}),s}if(dt(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Hs(t[i],e,r,n));return s}}function xl(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Wt;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}o=o.parent}if(i){oi(),Qc(i,null,10,[t,l,c]),li();return}}GR(t,r,s,n,a)}function GR(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const Zn=[];let _a=-1;const vc=[];let Bi=null,Zl=0;const cA=Promise.resolve();let uh=null;function yl(t){const e=uh||cA;return t?e.then(this?t.bind(this):t):e}function zR(t){let e=_a+1,r=Zn.length;for(;e<r;){const n=e+r>>>1,s=Zn[n],i=Pd(s);i<t||i===t&&s.flags&2?e=n+1:r=n}return e}function j1(t){if(!(t.flags&1)){const e=Pd(t),r=Zn[Zn.length-1];!r||!(t.flags&2)&&e>=Pd(r)?Zn.push(t):Zn.splice(zR(e),0,t),t.flags|=1,uA()}}function uA(){uh||(uh=cA.then(dA))}function Dd(t){dt(t)?vc.push(...t):Bi&&t.id===-1?Bi.splice(Zl+1,0,t):t.flags&1||(vc.push(t),t.flags|=1),uA()}function NE(t,e,r=_a+1){for(;r<Zn.length;r++){const n=Zn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Zn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function dh(t){if(vc.length){const e=[...new Set(vc)].sort((r,n)=>Pd(r)-Pd(n));if(vc.length=0,Bi){Bi.push(...e);return}for(Bi=e,Zl=0;Zl<Bi.length;Zl++){const r=Bi[Zl];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Bi=null,Zl=0}}const Pd=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dA(t){try{for(_a=0;_a<Zn.length;_a++){const e=Zn[_a];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;_a<Zn.length;_a++){const e=Zn[_a];e&&(e.flags&=-2)}_a=-1,Zn.length=0,dh(),uh=null,(Zn.length||vc.length)&&dA()}}let ec,e0=[];function fA(t,e){var r,n;ec=t,ec?(ec.enabled=!0,e0.forEach(({event:s,args:i})=>ec.emit(s,...i)),e0=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{fA(i,e)}),setTimeout(()=>{ec||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,e0=[])},3e3)):e0=[]}let an=null,yp=null;function Rd(t){const e=an;return an=t,yp=t&&t.type.__scopeId||null,e}function WR(t){yp=t}function KR(){yp=null}const qR=t=>Ep;function Ep(t,e=an,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&vv(-1);const i=Rd(e);let a;try{a=t(...s)}finally{Rd(i),n._d&&vv(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function je(t,e){if(an===null)return t;const r=uf(an),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,o,l=Wt]=e[s];i&&(_t(i)&&(i={mounted:i,updated:i}),i.deep&&Ya(a),n.push({dir:i,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function ba(t,e,r,n){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(oi(),Hs(l,r,8,[t.el,o,t,e]),li())}}const hA=Symbol("_vte"),pA=t=>t.__isTeleport,Zu=t=>t&&(t.disabled||t.disabled===""),ME=t=>t&&(t.defer||t.defer===""),BE=t=>typeof SVGElement<"u"&&t instanceof SVGElement,LE=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,uv=(t,e)=>{const r=t&&t.to;return yr(r)?e?e(r):null:r},mA={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,i,a,o,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:v,createComment:g}}=c,x=Zu(e.props);let{shapeFlag:y,children:E,dynamicChildren:I}=e;if(t==null){const P=e.el=v(""),D=e.anchor=v("");h(P,r,n),h(D,r,n);const A=(b,w)=>{y&16&&(s&&s.isCE&&(s.ce._teleportTarget=b),u(E,b,w,s,i,a,o,l))},_=()=>{const b=e.target=uv(e.props,p),w=gA(b,e,v,h);b&&(a!=="svg"&&BE(b)?a="svg":a!=="mathml"&&LE(b)&&(a="mathml"),x||(A(b,w),N0(e,!1)))};x&&(A(r,D),N0(e,!0)),ME(e.props)?(e.el.__isMounted=!1,rn(()=>{_(),delete e.el.__isMounted},i)):_()}else{if(ME(e.props)&&t.el.__isMounted===!1){rn(()=>{mA.process(t,e,r,n,s,i,a,o,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const P=e.anchor=t.anchor,D=e.target=t.target,A=e.targetAnchor=t.targetAnchor,_=Zu(t.props),b=_?r:D,w=_?P:A;if(a==="svg"||BE(D)?a="svg":(a==="mathml"||LE(D))&&(a="mathml"),I?(f(t.dynamicChildren,I,b,s,i,a,o),Z1(t,e,!0)):l||d(t,e,b,w,s,i,a,o,!1),x)_?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):t0(e,r,P,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const C=e.target=uv(e.props,p);C&&t0(e,C,null,c,0)}else _&&t0(e,D,A,c,1);N0(e,x)}},remove(t,e,r,{um:n,o:{remove:s}},i){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),a&16){const h=i||!Zu(f);for(let p=0;p<o.length;p++){const v=o[p];n(v,e,r,h,!!v.dynamicChildren)}}},move:t0,hydrate:XR};function t0(t,e,r,{o:{insert:n},m:s},i=2){i===0&&n(t.targetAnchor,e,r);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&n(a,e,r),(!d||Zu(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,r,2);d&&n(o,e,r)}function XR(t,e,r,n,s,i,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const f=e.target=uv(e.props,l);if(f){const h=Zu(e.props),p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(a(t),e,o(t),r,n,s,i),e.targetStart=p,e.targetAnchor=p&&a(p);else{e.anchor=a(t);let v=p;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}}v=a(v)}e.targetAnchor||gA(f,e,u,c),d(p&&a(p),e,f,r,n,s,i)}N0(e,h)}return e.anchor&&a(e.anchor)}const YR=mA;function N0(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function gA(t,e,r,n){const s=e.targetStart=r(""),i=e.targetAnchor=r("");return s[hA]=i,t&&(n(s,t),n(i,t)),i}const Li=Symbol("_leaveCb"),r0=Symbol("_enterCb");function H1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return tr(()=>{t.isMounted=!0}),Tp(()=>{t.isUnmounting=!0}),t}const Fs=[Function,Array],G1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fs,onEnter:Fs,onAfterEnter:Fs,onEnterCancelled:Fs,onBeforeLeave:Fs,onLeave:Fs,onAfterLeave:Fs,onLeaveCancelled:Fs,onBeforeAppear:Fs,onAppear:Fs,onAfterAppear:Fs,onAppearCancelled:Fs},vA=t=>{const e=t.subTree;return e.component?vA(e.component):e},QR={name:"BaseTransition",props:G1,setup(t,{slots:e}){const r=Ks(),n=H1();return()=>{const s=e.default&&_p(e.default(),!0);if(!s||!s.length)return;const i=xA(s),a=zt(t),{mode:o}=a;if(n.isLeaving)return bm(i);const l=UE(i);if(!l)return bm(i);let c=Pc(l,a,n,r,d=>c=d);l.type!==Wr&&ui(l,c);let u=r.subTree&&UE(r.subTree);if(u&&u.type!==Wr&&!ra(l,u)&&vA(r).type!==Wr){let d=Pc(u,a,n,r);if(ui(u,d),o==="out-in"&&l.type!==Wr)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,u=void 0},bm(i);o==="in-out"&&l.type!==Wr?d.delayLeave=(f,h,p)=>{const v=EA(n,u);v[String(u.key)]=u,f[Li]=()=>{h(),f[Li]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function xA(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Wr){e=r;break}}return e}const yA=QR;function EA(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Pc(t,e,r,n,s){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:v,onBeforeAppear:g,onAppear:x,onAfterAppear:y,onAppearCancelled:E}=e,I=String(t.key),P=EA(r,t),D=(b,w)=>{b&&Hs(b,n,9,w)},A=(b,w)=>{const C=w[1];D(b,w),dt(b)?b.every(T=>T.length<=1)&&C():b.length<=1&&C()},_={mode:a,persisted:o,beforeEnter(b){let w=l;if(!r.isMounted)if(i)w=g||l;else return;b[Li]&&b[Li](!0);const C=P[I];C&&ra(t,C)&&C.el[Li]&&C.el[Li](),D(w,[b])},enter(b){let w=c,C=u,T=d;if(!r.isMounted)if(i)w=x||c,C=y||u,T=E||d;else return;let k=!1;const N=b[r0]=B=>{k||(k=!0,B?D(T,[b]):D(C,[b]),_.delayedLeave&&_.delayedLeave(),b[r0]=void 0)};w?A(w,[b,N]):N()},leave(b,w){const C=String(t.key);if(b[r0]&&b[r0](!0),r.isUnmounting)return w();D(f,[b]);let T=!1;const k=b[Li]=N=>{T||(T=!0,w(),N?D(v,[b]):D(p,[b]),b[Li]=void 0,P[C]===t&&delete P[C])};P[C]=t,h?A(h,[b,k]):k()},clone(b){const w=Pc(b,e,r,n,s);return s&&s(w),w}};return _}function bm(t){if(lf(t))return t=Fa(t),t.children=null,t}function UE(t){if(!lf(t))return pA(t.type)&&t.children?xA(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&_t(r.default))return r.default()}}function ui(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ui(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _p(t,e=!1,r){let n=[],s=0;for(let i=0;i<t.length;i++){let a=t[i];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:i);a.type===Ne?(a.patchFlag&128&&s++,n=n.concat(_p(a.children,e,o))):(e||a.type!==Wr)&&n.push(o!=null?Fa(a,{key:o}):a)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function of(t,e){return _t(t)?hr({name:t.name},e,{setup:t}):t}function JR(){const t=Ks();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function z1(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ZR(t){const e=Ks(),r=V1(null);if(e){const s=e.refs===Wt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function xc(t,e,r,n,s=!1){if(dt(t)){t.forEach((p,v)=>xc(p,e&&(dt(e)?e[v]:e),r,n,s));return}if(eo(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&xc(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?uf(n.component):n.el,a=s?null:i,{i:o,r:l}=t,c=e&&e.r,u=o.refs===Wt?o.refs={}:o.refs,d=o.setupState,f=zt(d),h=d===Wt?()=>!1:p=>rr(f,p);if(c!=null&&c!==l&&(yr(c)?(u[c]=null,h(c)&&(d[c]=null)):Rr(c)&&(c.value=null)),_t(l))Qc(l,o,12,[a,u]);else{const p=yr(l),v=Rr(l);if(p||v){const g=()=>{if(t.f){const x=p?h(l)?d[l]:u[l]:l.value;s?dt(x)&&k1(x,i):dt(x)?x.includes(i)||x.push(i):p?(u[l]=[i],h(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else p?(u[l]=a,h(l)&&(d[l]=a)):v&&(l.value=a,t.k&&(u[t.k]=a))};a?(g.id=-1,rn(g,r)):g()}}}let VE=!1;const $l=()=>{VE||(console.error("Hydration completed but contains mismatches."),VE=!0)},eF=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",tF=t=>t.namespaceURI.includes("MathML"),n0=t=>{if(t.nodeType===1){if(eF(t))return"svg";if(tF(t))return"mathml"}},cc=t=>t.nodeType===8;function rF(t){const{mt:e,p:r,o:{patchProp:n,createText:s,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=t,u=(E,I)=>{if(!I.hasChildNodes()){r(null,E,I),dh(),I._vnode=E;return}d(I.firstChild,E,null,null,null),dh(),I._vnode=E},d=(E,I,P,D,A,_=!1)=>{_=_||!!I.dynamicChildren;const b=cc(E)&&E.data==="[",w=()=>v(E,I,P,D,A,b),{type:C,ref:T,shapeFlag:k,patchFlag:N}=I;let B=E.nodeType;I.el=E,N===-2&&(_=!1,I.dynamicChildren=null);let R=null;switch(C){case to:B!==3?I.children===""?(l(I.el=s(""),a(E),E),R=E):R=w():(E.data!==I.children&&($l(),E.data=I.children),R=i(E));break;case Wr:y(E)?(R=i(E),x(I.el=E.content.firstChild,E,P)):B!==8||b?R=w():R=i(E);break;case Ko:if(b&&(E=i(E),B=E.nodeType),B===1||B===3){R=E;const O=!I.children.length;for(let U=0;U<I.staticCount;U++)O&&(I.children+=R.nodeType===1?R.outerHTML:R.data),U===I.staticCount-1&&(I.anchor=R),R=i(R);return b?i(R):R}else w();break;case Ne:b?R=p(E,I,P,D,A,_):R=w();break;default:if(k&1)(B!==1||I.type.toLowerCase()!==E.tagName.toLowerCase())&&!y(E)?R=w():R=f(E,I,P,D,A,_);else if(k&6){I.slotScopeIds=A;const O=a(E);if(b?R=g(E):cc(E)&&E.data==="teleport start"?R=g(E,E.data,"teleport end"):R=i(E),e(I,O,null,P,D,n0(O),_),eo(I)&&!I.type.__asyncResolved){let U;b?(U=at(Ne),U.anchor=R?R.previousSibling:O.lastChild):U=E.nodeType===3?Ve(""):at("div"),U.el=E,I.component.subTree=U}}else k&64?B!==8?R=w():R=I.type.hydrate(E,I,P,D,A,_,t,h):k&128&&(R=I.type.hydrate(E,I,P,D,n0(a(E)),A,_,t,d))}return T!=null&&xc(T,null,D,I),R},f=(E,I,P,D,A,_)=>{_=_||!!I.dynamicChildren;const{type:b,props:w,patchFlag:C,shapeFlag:T,dirs:k,transition:N}=I,B=b==="input"||b==="option";if(B||C!==-1){k&&ba(I,null,P,"created");let R=!1;if(y(E)){R=WA(null,N)&&P&&P.vnode.props&&P.vnode.props.appear;const U=E.content.firstChild;if(R){const M=U.getAttribute("class");M&&(U.$cls=M),N.beforeEnter(U)}x(U,E,P),I.el=E=U}if(T&16&&!(w&&(w.innerHTML||w.textContent))){let U=h(E.firstChild,I,E,P,D,A,_);for(;U;){s0(E,1)||$l();const M=U;U=U.nextSibling,o(M)}}else if(T&8){let U=I.children;U[0]===`
`&&(E.tagName==="PRE"||E.tagName==="TEXTAREA")&&(U=U.slice(1)),E.textContent!==U&&(s0(E,0)||$l(),E.textContent=I.children)}if(w){if(B||!_||C&48){const U=E.tagName.includes("-");for(const M in w)(B&&(M.endsWith("value")||M==="indeterminate")||sf(M)&&!mc(M)||M[0]==="."||U)&&n(E,M,null,w[M],void 0,P)}else if(w.onClick)n(E,"onClick",null,w.onClick,void 0,P);else if(C&4&&ka(w.style))for(const U in w.style)w.style[U]}let O;(O=w&&w.onVnodeBeforeMount)&&fs(O,P,I),k&&ba(I,null,P,"beforeMount"),((O=w&&w.onVnodeMounted)||k||R)&&tw(()=>{O&&fs(O,P,I),R&&N.enter(E),k&&ba(I,null,P,"mounted")},D)}return E.nextSibling},h=(E,I,P,D,A,_,b)=>{b=b||!!I.dynamicChildren;const w=I.children,C=w.length;for(let T=0;T<C;T++){const k=b?w[T]:w[T]=ms(w[T]),N=k.type===to;E?(N&&!b&&T+1<C&&ms(w[T+1]).type===to&&(l(s(E.data.slice(k.children.length)),P,i(E)),E.data=k.children),E=d(E,k,D,A,_,b)):N&&!k.children?l(k.el=s(""),P):(s0(P,1)||$l(),r(null,k,P,null,D,A,n0(P),_))}return E},p=(E,I,P,D,A,_)=>{const{slotScopeIds:b}=I;b&&(A=A?A.concat(b):b);const w=a(E),C=h(i(E),I,w,P,D,A,_);return C&&cc(C)&&C.data==="]"?i(I.anchor=C):($l(),l(I.anchor=c("]"),w,C),C)},v=(E,I,P,D,A,_)=>{if(s0(E.parentElement,1)||$l(),I.el=null,_){const C=g(E);for(;;){const T=i(E);if(T&&T!==C)o(T);else break}}const b=i(E),w=a(E);return o(E),r(null,I,w,b,P,D,n0(w),A),P&&(P.vnode.el=I.el,wp(P,I.el)),b},g=(E,I="[",P="]")=>{let D=0;for(;E;)if(E=i(E),E&&cc(E)&&(E.data===I&&D++,E.data===P)){if(D===0)return i(E);D--}return E},x=(E,I,P)=>{const D=I.parentNode;D&&D.replaceChild(E,I);let A=P;for(;A;)A.vnode.el===I&&(A.vnode.el=A.subTree.el=E),A=A.parent},y=E=>E.nodeType===1&&E.tagName==="TEMPLATE";return[u,d]}const $E="data-allow-mismatch",nF={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function s0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute($E);)t=t.parentElement;const r=t&&t.getAttribute($E);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return e===0&&n.includes("children")?!0:n.includes(nF[e])}}const sF=dp().requestIdleCallback||(t=>setTimeout(t,1)),aF=dp().cancelIdleCallback||(t=>clearTimeout(t)),iF=(t=1e4)=>e=>{const r=sF(e,{timeout:t});return()=>aF(r)};function oF(t){const{top:e,left:r,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:a}=window;return(e>0&&e<i||n>0&&n<i)&&(r>0&&r<a||s>0&&s<a)}const lF=t=>(e,r)=>{const n=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){n.disconnect(),e();break}},t);return r(s=>{if(s instanceof Element){if(oF(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},cF=t=>e=>{if(t){const r=matchMedia(t);if(r.matches)e();else return r.addEventListener("change",e,{once:!0}),()=>r.removeEventListener("change",e)}},uF=(t=[])=>(e,r)=>{yr(t)&&(t=[t]);let n=!1;const s=a=>{n||(n=!0,i(),e(),a.target.dispatchEvent(new a.constructor(a.type,a)))},i=()=>{r(a=>{for(const o of t)a.removeEventListener(o,s)})};return r(a=>{for(const o of t)a.addEventListener(o,s,{once:!0})}),i};function dF(t,e){if(cc(t)&&t.data==="["){let r=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(cc(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else e(t)}const eo=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function fF(t){_t(t)&&(t={loader:t});const{loader:e,loadingComponent:r,errorComponent:n,delay:s=200,hydrate:i,timeout:a,suspensible:o=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let p;return c||(p=c=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((g,x)=>{l(v,()=>g(f()),()=>x(v),d+1)});throw v}).then(v=>p!==c&&c?c:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return of({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(p,v,g){const x=i?()=>{const E=i(()=>{g()},I=>dF(p,I));E&&(v.bum||(v.bum=[])).push(E),(v.u||(v.u=[])).push(()=>!0)}:g;u?x():h().then(()=>!v.isUnmounted&&x())},get __asyncResolved(){return u},setup(){const p=sn;if(z1(p),u)return()=>Sm(u,p);const v=E=>{c=null,xl(E,p,13,!n)};if(o&&p.suspense||Rc)return h().then(E=>()=>Sm(E,p)).catch(E=>(v(E),()=>n?at(n,{error:E}):null));const g=fe(!1),x=fe(),y=fe(!!s);return s&&setTimeout(()=>{y.value=!1},s),a!=null&&setTimeout(()=>{if(!g.value&&!x.value){const E=new Error(`Async component timed out after ${a}ms.`);v(E),x.value=E}},a),h().then(()=>{g.value=!0,p.parent&&lf(p.parent.vnode)&&p.parent.update()}).catch(E=>{v(E),x.value=E}),()=>{if(g.value&&u)return Sm(u,p);if(x.value&&n)return at(n,{error:x.value});if(r&&!y.value)return at(r)}}})}function Sm(t,e){const{ref:r,props:n,children:s,ce:i}=e.vnode,a=at(t,n,s);return a.ref=r,a.ce=i,delete e.vnode.ce,a}const lf=t=>t.type.__isKeepAlive,hF={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const r=Ks(),n=r.ctx;if(!n.renderer)return()=>{const y=e.default&&e.default();return y&&y.length===1?y[0]:y};const s=new Map,i=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=n,f=d("div");n.activate=(y,E,I,P,D)=>{const A=y.component;c(y,E,I,0,o),l(A.vnode,y,E,I,A,o,P,y.slotScopeIds,D),rn(()=>{A.isDeactivated=!1,A.a&&gc(A.a);const _=y.props&&y.props.onVnodeMounted;_&&fs(_,A.parent,y)},o)},n.deactivate=y=>{const E=y.component;hh(E.m),hh(E.a),c(y,f,null,1,o),rn(()=>{E.da&&gc(E.da);const I=y.props&&y.props.onVnodeUnmounted;I&&fs(I,E.parent,y),E.isDeactivated=!0},o)};function h(y){Tm(y),u(y,r,o,!0)}function p(y){s.forEach((E,I)=>{const P=bv(E.type);P&&!y(P)&&v(I)})}function v(y){const E=s.get(y);E&&(!a||!ra(E,a))?h(E):a&&Tm(a),s.delete(y),i.delete(y)}Qt(()=>[t.include,t.exclude],([y,E])=>{y&&p(I=>Nu(y,I)),E&&p(I=>!Nu(E,I))},{flush:"post",deep:!0});let g=null;const x=()=>{g!=null&&(ph(r.subTree.type)?rn(()=>{s.set(g,a0(r.subTree))},r.subTree.suspense):s.set(g,a0(r.subTree)))};return tr(x),Sp(x),Tp(()=>{s.forEach(y=>{const{subTree:E,suspense:I}=r,P=a0(E);if(y.type===P.type&&y.key===P.key){Tm(P);const D=P.component.da;D&&rn(D,I);return}h(y)})}),()=>{if(g=null,!e.default)return a=null;const y=e.default(),E=y[0];if(y.length>1)return a=null,y;if(!di(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return a=null,E;let I=a0(E);if(I.type===Wr)return a=null,I;const P=I.type,D=bv(eo(I)?I.type.__asyncResolved||{}:P),{include:A,exclude:_,max:b}=t;if(A&&(!D||!Nu(A,D))||_&&D&&Nu(_,D))return I.shapeFlag&=-257,a=I,E;const w=I.key==null?P:I.key,C=s.get(w);return I.el&&(I=Fa(I),E.shapeFlag&128&&(E.ssContent=I)),g=w,C?(I.el=C.el,I.component=C.component,I.transition&&ui(I,I.transition),I.shapeFlag|=512,i.delete(w),i.add(w)):(i.add(w),b&&i.size>parseInt(b,10)&&v(i.values().next().value)),I.shapeFlag|=256,a=I,ph(E.type)?E:I}}},pF=hF;function Nu(t,e){return dt(t)?t.some(r=>Nu(r,e)):yr(t)?t.split(",").includes(e):HP(t)?(t.lastIndex=0,t.test(e)):!1}function _A(t,e){SA(t,"a",e)}function bA(t,e){SA(t,"da",e)}function SA(t,e,r=sn){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(bp(e,n,r),r){let s=r.parent;for(;s&&s.parent;)lf(s.parent.vnode)&&mF(n,e,r,s),s=s.parent}}function mF(t,e,r,n){const s=bp(e,t,n,!0);xi(()=>{k1(n[e],s)},r)}function Tm(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function a0(t){return t.shapeFlag&128?t.ssContent:t}function bp(t,e,r=sn,n=!1){if(r){const s=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...a)=>{oi();const o=tl(r),l=Hs(e,r,t,a);return o(),li(),l});return n?s.unshift(i):s.push(i),i}}const vi=t=>(e,r=sn)=>{(!Rc||t==="sp")&&bp(t,(...n)=>e(...n),r)},TA=vi("bm"),tr=vi("m"),W1=vi("bu"),Sp=vi("u"),Tp=vi("bum"),xi=vi("um"),AA=vi("sp"),wA=vi("rtg"),IA=vi("rtc");function CA(t,e=sn){bp("ec",t,e)}const K1="components",gF="directives";function Mr(t,e){return q1(K1,t,!0,e)||t}const kA=Symbol.for("v-ndc");function vF(t){return yr(t)?q1(K1,t,!1)||t:t||kA}function xF(t){return q1(gF,t)}function q1(t,e,r=!0,n=!1){const s=an||sn;if(s){const i=s.type;if(t===K1){const o=bv(i,!1);if(o&&(o===e||o===An(e)||o===af(An(e))))return i}const a=jE(s[t]||i[t],e)||jE(s.appContext[t],e);return!a&&n?i:a}}function jE(t,e){return t&&(t[e]||t[An(e)]||t[af(An(e))])}function He(t,e,r,n){let s;const i=r&&r[n],a=dt(t);if(a||yr(t)){const o=a&&ka(t);let l=!1,c=!1;o&&(l=!Cs(t),c=ci(t),t=pp(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?lh(Sn(t[u])):Sn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(cr(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return r&&(r[n]=s),s}function yF(t,e){for(let r=0;r<e.length;r++){const n=e[r];if(dt(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const i=n.fn(...s);return i&&(i.key=n.key),i}:n.fn)}return t}function DA(t,e,r={},n,s){if(an.ce||an.parent&&eo(an.parent)&&an.parent.ce)return e!=="default"&&(r.name=e),V(),Tn(Ne,null,[at("slot",r,n&&n())],64);let i=t[e];i&&i._c&&(i._d=!1),V();const a=i&&X1(i(r)),o=r.key||a&&a.key,l=Tn(Ne,{key:(o&&!ua(o)?o:`_${e}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function X1(t){return t.some(e=>di(e)?!(e.type===Wr||e.type===Ne&&!X1(e.children)):!0)?t:null}function EF(t,e){const r={};for(const n in t)r[e&&/[A-Z]/.test(n)?`on:${n}`:Yu(n)]=t[n];return r}const dv=t=>t?lw(t)?uf(t):dv(t.parent):null,ed=hr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>dv(t.parent),$root:t=>dv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Y1(t),$forceUpdate:t=>t.f||(t.f=()=>{j1(t.update)}),$nextTick:t=>t.n||(t.n=yl.bind(t.proxy)),$watch:t=>QF.bind(t)}),Am=(t,e)=>t!==Wt&&!t.__isScriptSetup&&rr(t,e),fv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return i[e]}else{if(Am(n,e))return a[e]=1,n[e];if(s!==Wt&&rr(s,e))return a[e]=2,s[e];if((c=t.propsOptions[0])&&rr(c,e))return a[e]=3,i[e];if(r!==Wt&&rr(r,e))return a[e]=4,r[e];hv&&(a[e]=0)}}const u=ed[e];let d,f;if(u)return e==="$attrs"&&Mn(t.attrs,"get",""),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==Wt&&rr(r,e))return a[e]=4,r[e];if(f=l.config.globalProperties,rr(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:i}=t;return Am(s,e)?(s[e]=r,!0):n!==Wt&&rr(n,e)?(n[e]=r,!0):rr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!r[a]||t!==Wt&&rr(t,a)||Am(e,a)||(o=i[0])&&rr(o,a)||rr(n,a)||rr(ed,a)||rr(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:rr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},_F=hr({},fv,{get(t,e){if(e!==Symbol.unscopables)return fv.get(t,e,t)},has(t,e){return e[0]!=="_"&&!qP(e)}});function bF(){return null}function SF(){return null}function TF(t){}function AF(t){}function wF(){return null}function IF(){}function CF(t,e){return null}function kF(){return PA().slots}function DF(){return PA().attrs}function PA(){const t=Ks();return t.setupContext||(t.setupContext=dw(t))}function Fd(t){return dt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}function PF(t,e){const r=Fd(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=r[n];s?dt(s)||_t(s)?s=r[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=r[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return r}function RF(t,e){return!t||!e?t||e:dt(t)&&dt(e)?t.concat(e):hr({},Fd(t),Fd(e))}function FF(t,e){const r={};for(const n in t)e.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>t[n]});return r}function OF(t){const e=Ks();let r=t();return yv(),D1(r)&&(r=r.catch(n=>{throw tl(e),n})),[r,()=>tl(e)]}let hv=!0;function NF(t){const e=Y1(t),r=t.proxy,n=t.ctx;hv=!1,e.beforeCreate&&HE(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:v,deactivated:g,beforeDestroy:x,beforeUnmount:y,destroyed:E,unmounted:I,render:P,renderTracked:D,renderTriggered:A,errorCaptured:_,serverPrefetch:b,expose:w,inheritAttrs:C,components:T,directives:k,filters:N}=e;if(c&&MF(c,n,null),a)for(const O in a){const U=a[O];_t(U)&&(n[O]=U.bind(r))}if(s){const O=s.call(r,r);cr(O)&&(t.data=Ws(O))}if(hv=!0,i)for(const O in i){const U=i[O],M=_t(U)?U.bind(r,r):_t(U.get)?U.get.bind(r,r):Us,q=!_t(U)&&_t(U.set)?U.set.bind(r):Us,H=be({get:M,set:q});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>H.value,set:L=>H.value=L})}if(o)for(const O in o)RA(o[O],n,r,O);if(l){const O=_t(l)?l.call(r):l;Reflect.ownKeys(O).forEach(U=>{td(U,O[U])})}u&&HE(u,t,"c");function R(O,U){dt(U)?U.forEach(M=>O(M.bind(r))):U&&O(U.bind(r))}if(R(TA,d),R(tr,f),R(W1,h),R(Sp,p),R(_A,v),R(bA,g),R(CA,_),R(IA,D),R(wA,A),R(Tp,y),R(xi,I),R(AA,b),dt(w))if(w.length){const O=t.exposed||(t.exposed={});w.forEach(U=>{Object.defineProperty(O,U,{get:()=>r[U],set:M=>r[U]=M})})}else t.exposed||(t.exposed={});P&&t.render===Us&&(t.render=P),C!=null&&(t.inheritAttrs=C),T&&(t.components=T),k&&(t.directives=k),b&&z1(t)}function MF(t,e,r=Us){dt(t)&&(t=pv(t));for(const n in t){const s=t[n];let i;cr(s)?"default"in s?i=ks(s.from||n,s.default,!0):i=ks(s.from||n):i=ks(s),Rr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function HE(t,e,r){Hs(dt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function RA(t,e,r,n){let s=n.includes(".")?QA(r,n):()=>r[n];if(yr(t)){const i=e[t];_t(i)&&Qt(s,i)}else if(_t(t))Qt(s,t.bind(r));else if(cr(t))if(dt(t))t.forEach(i=>RA(i,e,r,n));else{const i=_t(t.handler)?t.handler.bind(r):e[t.handler];_t(i)&&Qt(s,i,t)}}function Y1(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>fh(l,c,a,!0)),fh(l,e,a)),cr(e)&&i.set(e,l),l}function fh(t,e,r,n=!1){const{mixins:s,extends:i}=e;i&&fh(t,i,r,!0),s&&s.forEach(a=>fh(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const o=BF[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const BF={data:GE,props:zE,emits:zE,methods:Mu,computed:Mu,beforeCreate:Xn,created:Xn,beforeMount:Xn,mounted:Xn,beforeUpdate:Xn,updated:Xn,beforeDestroy:Xn,beforeUnmount:Xn,destroyed:Xn,unmounted:Xn,activated:Xn,deactivated:Xn,errorCaptured:Xn,serverPrefetch:Xn,components:Mu,directives:Mu,watch:UF,provide:GE,inject:LF};function GE(t,e){return e?t?function(){return hr(_t(t)?t.call(this,this):t,_t(e)?e.call(this,this):e)}:e:t}function LF(t,e){return Mu(pv(t),pv(e))}function pv(t){if(dt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Xn(t,e){return t?[...new Set([].concat(t,e))]:e}function Mu(t,e){return t?hr(Object.create(null),t,e):e}function zE(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:hr(Object.create(null),Fd(t),Fd(e??{})):e}function UF(t,e){if(!t)return e;if(!e)return t;const r=hr(Object.create(null),t);for(const n in e)r[n]=Xn(t[n],e[n]);return r}function FA(){return{app:null,config:{isNativeTag:$P,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VF=0;function $F(t,e){return function(n,s=null){_t(n)||(n=hr({},n)),s!=null&&!cr(s)&&(s=null);const i=FA(),a=new WeakSet,o=[];let l=!1;const c=i.app={_uid:VF++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:hw,get config(){return i.config},set config(u){},use(u,...d){return a.has(u)||(u&&_t(u.install)?(a.add(u),u.install(c,...d)):_t(u)&&(a.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||at(n,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(h,u):t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,uf(h.component)}},onUnmount(u){o.push(u)},unmount(){l&&(Hs(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Wo;Wo=c;try{return u()}finally{Wo=d}}};return c}}let Wo=null;function td(t,e){if(sn){let r=sn.provides;const n=sn.parent&&sn.parent.provides;n===r&&(r=sn.provides=Object.create(n)),r[t]=e}}function ks(t,e,r=!1){const n=sn||an;if(n||Wo){let s=Wo?Wo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&_t(e)?e.call(n&&n.proxy):e}}function OA(){return!!(sn||an||Wo)}const NA={},MA=()=>Object.create(NA),BA=t=>Object.getPrototypeOf(t)===NA;function jF(t,e,r,n=!1){const s={},i=MA();t.propsDefaults=Object.create(null),LA(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:L1(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function HF(t,e,r,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,o=zt(s),[l]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Ap(t.emitsOptions,f))continue;const h=e[f];if(l)if(rr(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const p=An(f);s[p]=mv(l,o,p,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{LA(t,e,s,i)&&(c=!0);let u;for(const d in o)(!e||!rr(e,d)&&((u=gs(d))===d||!rr(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(s[d]=mv(l,o,d,void 0,t,!0)):delete s[d]);if(i!==o)for(const d in i)(!e||!rr(e,d))&&(delete i[d],c=!0)}c&&Xa(t.attrs,"set","")}function LA(t,e,r,n){const[s,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(mc(l))continue;const c=e[l];let u;s&&rr(s,u=An(l))?!i||!i.includes(u)?r[u]=c:(o||(o={}))[u]=c:Ap(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=zt(r),c=o||Wt;for(let u=0;u<i.length;u++){const d=i[u];r[d]=mv(s,l,d,c[d],t,!rr(c,d))}}return a}function mv(t,e,r,n,s,i){const a=t[r];if(a!=null){const o=rr(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&_t(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=tl(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===gs(r))&&(n=!0))}return n}const GF=new WeakMap;function UA(t,e,r=!1){const n=r?GF:e.propsCache,s=n.get(t);if(s)return s;const i=t.props,a={},o=[];let l=!1;if(!_t(t)){const u=d=>{l=!0;const[f,h]=UA(d,e,!0);hr(a,f),h&&o.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return cr(t)&&n.set(t,hc),hc;if(dt(i))for(let u=0;u<i.length;u++){const d=An(i[u]);WE(d)&&(a[d]=Wt)}else if(i)for(const u in i){const d=An(u);if(WE(d)){const f=i[u],h=a[d]=dt(f)||_t(f)?{type:f}:hr({},f),p=h.type;let v=!1,g=!0;if(dt(p))for(let x=0;x<p.length;++x){const y=p[x],E=_t(y)&&y.name;if(E==="Boolean"){v=!0;break}else E==="String"&&(g=!1)}else v=_t(p)&&p.name==="Boolean";h[0]=v,h[1]=g,(v||rr(h,"default"))&&o.push(d)}}const c=[a,o];return cr(t)&&n.set(t,c),c}function WE(t){return t[0]!=="$"&&!mc(t)}const Q1=t=>t[0]==="_"||t==="$stable",J1=t=>dt(t)?t.map(ms):[ms(t)],zF=(t,e,r)=>{if(e._n)return e;const n=Ep((...s)=>J1(e(...s)),r);return n._c=!1,n},VA=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Q1(s))continue;const i=t[s];if(_t(i))e[s]=zF(s,i,n);else if(i!=null){const a=J1(i);e[s]=()=>a}}},$A=(t,e)=>{const r=J1(e);t.slots.default=()=>r},jA=(t,e,r)=>{for(const n in e)(r||!Q1(n))&&(t[n]=e[n])},WF=(t,e,r)=>{const n=t.slots=MA();if(t.vnode.shapeFlag&32){const s=e.__;s&&iv(n,"__",s,!0);const i=e._;i?(jA(n,e,r),r&&iv(n,"_",i,!0)):VA(e,n)}else e&&$A(t,e)},KF=(t,e,r)=>{const{vnode:n,slots:s}=t;let i=!0,a=Wt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?i=!1:jA(s,e,r):(i=!e.$stable,VA(e,s)),a=e}else e&&($A(t,e),a={default:1});if(i)for(const o in s)!Q1(o)&&a[o]==null&&delete s[o]},rn=tw;function HA(t){return zA(t)}function GA(t){return zA(t,rF)}function zA(t,e){const r=dp();r.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Us,insertStaticContent:p}=t,v=(W,Y,ee,ve=null,re=null,se=null,le=void 0,Te=null,we=!!Y.dynamicChildren)=>{if(W===Y)return;W&&!ra(W,Y)&&(ve=ie(W),L(W,re,se,!0),W=null),Y.patchFlag===-2&&(we=!1,Y.dynamicChildren=null);const{type:Se,ref:ze,shapeFlag:Ie}=Y;switch(Se){case to:g(W,Y,ee,ve);break;case Wr:x(W,Y,ee,ve);break;case Ko:W==null&&y(Y,ee,ve,le);break;case Ne:T(W,Y,ee,ve,re,se,le,Te,we);break;default:Ie&1?P(W,Y,ee,ve,re,se,le,Te,we):Ie&6?k(W,Y,ee,ve,re,se,le,Te,we):(Ie&64||Ie&128)&&Se.process(W,Y,ee,ve,re,se,le,Te,we,Q)}ze!=null&&re?xc(ze,W&&W.ref,se,Y||W,!Y):ze==null&&W&&W.ref!=null&&xc(W.ref,null,se,W,!0)},g=(W,Y,ee,ve)=>{if(W==null)n(Y.el=o(Y.children),ee,ve);else{const re=Y.el=W.el;Y.children!==W.children&&c(re,Y.children)}},x=(W,Y,ee,ve)=>{W==null?n(Y.el=l(Y.children||""),ee,ve):Y.el=W.el},y=(W,Y,ee,ve)=>{[W.el,W.anchor]=p(W.children,Y,ee,ve,W.el,W.anchor)},E=({el:W,anchor:Y},ee,ve)=>{let re;for(;W&&W!==Y;)re=f(W),n(W,ee,ve),W=re;n(Y,ee,ve)},I=({el:W,anchor:Y})=>{let ee;for(;W&&W!==Y;)ee=f(W),s(W),W=ee;s(Y)},P=(W,Y,ee,ve,re,se,le,Te,we)=>{Y.type==="svg"?le="svg":Y.type==="math"&&(le="mathml"),W==null?D(Y,ee,ve,re,se,le,Te,we):b(W,Y,re,se,le,Te,we)},D=(W,Y,ee,ve,re,se,le,Te)=>{let we,Se;const{props:ze,shapeFlag:Ie,transition:$e,dirs:Be}=W;if(we=W.el=a(W.type,se,ze&&ze.is,ze),Ie&8?u(we,W.children):Ie&16&&_(W.children,we,null,ve,re,wm(W,se),le,Te),Be&&ba(W,null,ve,"created"),A(we,W,W.scopeId,le,ve),ze){for(const Ke in ze)Ke!=="value"&&!mc(Ke)&&i(we,Ke,null,ze[Ke],se,ve);"value"in ze&&i(we,"value",null,ze.value,se),(Se=ze.onVnodeBeforeMount)&&fs(Se,ve,W)}Be&&ba(W,null,ve,"beforeMount");const We=WA(re,$e);We&&$e.beforeEnter(we),n(we,Y,ee),((Se=ze&&ze.onVnodeMounted)||We||Be)&&rn(()=>{Se&&fs(Se,ve,W),We&&$e.enter(we),Be&&ba(W,null,ve,"mounted")},re)},A=(W,Y,ee,ve,re)=>{if(ee&&h(W,ee),ve)for(let se=0;se<ve.length;se++)h(W,ve[se]);if(re){let se=re.subTree;if(Y===se||ph(se.type)&&(se.ssContent===Y||se.ssFallback===Y)){const le=re.vnode;A(W,le,le.scopeId,le.slotScopeIds,re.parent)}}},_=(W,Y,ee,ve,re,se,le,Te,we=0)=>{for(let Se=we;Se<W.length;Se++){const ze=W[Se]=Te?Ui(W[Se]):ms(W[Se]);v(null,ze,Y,ee,ve,re,se,le,Te)}},b=(W,Y,ee,ve,re,se,le)=>{const Te=Y.el=W.el;let{patchFlag:we,dynamicChildren:Se,dirs:ze}=Y;we|=W.patchFlag&16;const Ie=W.props||Wt,$e=Y.props||Wt;let Be;if(ee&&ko(ee,!1),(Be=$e.onVnodeBeforeUpdate)&&fs(Be,ee,Y,W),ze&&ba(Y,W,ee,"beforeUpdate"),ee&&ko(ee,!0),(Ie.innerHTML&&$e.innerHTML==null||Ie.textContent&&$e.textContent==null)&&u(Te,""),Se?w(W.dynamicChildren,Se,Te,ee,ve,wm(Y,re),se):le||U(W,Y,Te,null,ee,ve,wm(Y,re),se,!1),we>0){if(we&16)C(Te,Ie,$e,ee,re);else if(we&2&&Ie.class!==$e.class&&i(Te,"class",null,$e.class,re),we&4&&i(Te,"style",Ie.style,$e.style,re),we&8){const We=Y.dynamicProps;for(let Ke=0;Ke<We.length;Ke++){const Ee=We[Ke],ye=Ie[Ee],_e=$e[Ee];(_e!==ye||Ee==="value")&&i(Te,Ee,ye,_e,re,ee)}}we&1&&W.children!==Y.children&&u(Te,Y.children)}else!le&&Se==null&&C(Te,Ie,$e,ee,re);((Be=$e.onVnodeUpdated)||ze)&&rn(()=>{Be&&fs(Be,ee,Y,W),ze&&ba(Y,W,ee,"updated")},ve)},w=(W,Y,ee,ve,re,se,le)=>{for(let Te=0;Te<Y.length;Te++){const we=W[Te],Se=Y[Te],ze=we.el&&(we.type===Ne||!ra(we,Se)||we.shapeFlag&198)?d(we.el):ee;v(we,Se,ze,null,ve,re,se,le,!0)}},C=(W,Y,ee,ve,re)=>{if(Y!==ee){if(Y!==Wt)for(const se in Y)!mc(se)&&!(se in ee)&&i(W,se,Y[se],null,re,ve);for(const se in ee){if(mc(se))continue;const le=ee[se],Te=Y[se];le!==Te&&se!=="value"&&i(W,se,Te,le,re,ve)}"value"in ee&&i(W,"value",Y.value,ee.value,re)}},T=(W,Y,ee,ve,re,se,le,Te,we)=>{const Se=Y.el=W?W.el:o(""),ze=Y.anchor=W?W.anchor:o("");let{patchFlag:Ie,dynamicChildren:$e,slotScopeIds:Be}=Y;Be&&(Te=Te?Te.concat(Be):Be),W==null?(n(Se,ee,ve),n(ze,ee,ve),_(Y.children||[],ee,ze,re,se,le,Te,we)):Ie>0&&Ie&64&&$e&&W.dynamicChildren?(w(W.dynamicChildren,$e,ee,re,se,le,Te),(Y.key!=null||re&&Y===re.subTree)&&Z1(W,Y,!0)):U(W,Y,ee,ze,re,se,le,Te,we)},k=(W,Y,ee,ve,re,se,le,Te,we)=>{Y.slotScopeIds=Te,W==null?Y.shapeFlag&512?re.ctx.activate(Y,ee,ve,le,we):N(Y,ee,ve,re,se,le,we):B(W,Y,we)},N=(W,Y,ee,ve,re,se,le)=>{const Te=W.component=ow(W,ve,re);if(lf(W)&&(Te.ctx.renderer=Q),cw(Te,!1,le),Te.asyncDep){if(re&&re.registerDep(Te,R,le),!W.el){const we=Te.subTree=at(Wr);x(null,we,Y,ee)}}else R(Te,W,Y,ee,re,se,le)},B=(W,Y,ee)=>{const ve=Y.component=W.component;if(n3(W,Y,ee))if(ve.asyncDep&&!ve.asyncResolved){O(ve,Y,ee);return}else ve.next=Y,ve.update();else Y.el=W.el,ve.vnode=Y},R=(W,Y,ee,ve,re,se,le)=>{const Te=()=>{if(W.isMounted){let{next:Ie,bu:$e,u:Be,parent:We,vnode:Ke}=W;{const Ge=KA(W);if(Ge){Ie&&(Ie.el=Ke.el,O(W,Ie,le)),Ge.asyncDep.then(()=>{W.isUnmounted||Te()});return}}let Ee=Ie,ye;ko(W,!1),Ie?(Ie.el=Ke.el,O(W,Ie,le)):Ie=Ke,$e&&gc($e),(ye=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&fs(ye,We,Ie,Ke),ko(W,!0);const _e=M0(W),Re=W.subTree;W.subTree=_e,v(Re,_e,d(Re.el),ie(Re),W,re,se),Ie.el=_e.el,Ee===null&&wp(W,_e.el),Be&&rn(Be,re),(ye=Ie.props&&Ie.props.onVnodeUpdated)&&rn(()=>fs(ye,We,Ie,Ke),re)}else{let Ie;const{el:$e,props:Be}=Y,{bm:We,m:Ke,parent:Ee,root:ye,type:_e}=W,Re=eo(Y);if(ko(W,!1),We&&gc(We),!Re&&(Ie=Be&&Be.onVnodeBeforeMount)&&fs(Ie,Ee,Y),ko(W,!0),$e&&X){const Ge=()=>{W.subTree=M0(W),X($e,W.subTree,W,re,null)};Re&&_e.__asyncHydrate?_e.__asyncHydrate($e,W,Ge):Ge()}else{ye.ce&&ye.ce._def.shadowRoot!==!1&&ye.ce._injectChildStyle(_e);const Ge=W.subTree=M0(W);v(null,Ge,ee,ve,W,re,se),Y.el=Ge.el}if(Ke&&rn(Ke,re),!Re&&(Ie=Be&&Be.onVnodeMounted)){const Ge=Y;rn(()=>fs(Ie,Ee,Ge),re)}(Y.shapeFlag&256||Ee&&eo(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&W.a&&rn(W.a,re),W.isMounted=!0,Y=ee=ve=null}};W.scope.on();const we=W.effect=new Id(Te);W.scope.off();const Se=W.update=we.run.bind(we),ze=W.job=we.runIfDirty.bind(we);ze.i=W,ze.id=W.uid,we.scheduler=()=>j1(ze),ko(W,!0),Se()},O=(W,Y,ee)=>{Y.component=W;const ve=W.vnode.props;W.vnode=Y,W.next=null,HF(W,Y.props,ve,ee),KF(W,Y.children,ee),oi(),NE(W),li()},U=(W,Y,ee,ve,re,se,le,Te,we=!1)=>{const Se=W&&W.children,ze=W?W.shapeFlag:0,Ie=Y.children,{patchFlag:$e,shapeFlag:Be}=Y;if($e>0){if($e&128){q(Se,Ie,ee,ve,re,se,le,Te,we);return}else if($e&256){M(Se,Ie,ee,ve,re,se,le,Te,we);return}}Be&8?(ze&16&&ge(Se,re,se),Ie!==Se&&u(ee,Ie)):ze&16?Be&16?q(Se,Ie,ee,ve,re,se,le,Te,we):ge(Se,re,se,!0):(ze&8&&u(ee,""),Be&16&&_(Ie,ee,ve,re,se,le,Te,we))},M=(W,Y,ee,ve,re,se,le,Te,we)=>{W=W||hc,Y=Y||hc;const Se=W.length,ze=Y.length,Ie=Math.min(Se,ze);let $e;for($e=0;$e<Ie;$e++){const Be=Y[$e]=we?Ui(Y[$e]):ms(Y[$e]);v(W[$e],Be,ee,null,re,se,le,Te,we)}Se>ze?ge(W,re,se,!0,!1,Ie):_(Y,ee,ve,re,se,le,Te,we,Ie)},q=(W,Y,ee,ve,re,se,le,Te,we)=>{let Se=0;const ze=Y.length;let Ie=W.length-1,$e=ze-1;for(;Se<=Ie&&Se<=$e;){const Be=W[Se],We=Y[Se]=we?Ui(Y[Se]):ms(Y[Se]);if(ra(Be,We))v(Be,We,ee,null,re,se,le,Te,we);else break;Se++}for(;Se<=Ie&&Se<=$e;){const Be=W[Ie],We=Y[$e]=we?Ui(Y[$e]):ms(Y[$e]);if(ra(Be,We))v(Be,We,ee,null,re,se,le,Te,we);else break;Ie--,$e--}if(Se>Ie){if(Se<=$e){const Be=$e+1,We=Be<ze?Y[Be].el:ve;for(;Se<=$e;)v(null,Y[Se]=we?Ui(Y[Se]):ms(Y[Se]),ee,We,re,se,le,Te,we),Se++}}else if(Se>$e)for(;Se<=Ie;)L(W[Se],re,se,!0),Se++;else{const Be=Se,We=Se,Ke=new Map;for(Se=We;Se<=$e;Se++){const yt=Y[Se]=we?Ui(Y[Se]):ms(Y[Se]);yt.key!=null&&Ke.set(yt.key,Se)}let Ee,ye=0;const _e=$e-We+1;let Re=!1,Ge=0;const st=new Array(_e);for(Se=0;Se<_e;Se++)st[Se]=0;for(Se=Be;Se<=Ie;Se++){const yt=W[Se];if(ye>=_e){L(yt,re,se,!0);continue}let Ut;if(yt.key!=null)Ut=Ke.get(yt.key);else for(Ee=We;Ee<=$e;Ee++)if(st[Ee-We]===0&&ra(yt,Y[Ee])){Ut=Ee;break}Ut===void 0?L(yt,re,se,!0):(st[Ut-We]=Se+1,Ut>=Ge?Ge=Ut:Re=!0,v(yt,Y[Ut],ee,null,re,se,le,Te,we),ye++)}const gt=Re?qF(st):hc;for(Ee=gt.length-1,Se=_e-1;Se>=0;Se--){const yt=We+Se,Ut=Y[yt],pt=yt+1<ze?Y[yt+1].el:ve;st[Se]===0?v(null,Ut,ee,pt,re,se,le,Te,we):Re&&(Ee<0||Se!==gt[Ee]?H(Ut,ee,pt,2):Ee--)}}},H=(W,Y,ee,ve,re=null)=>{const{el:se,type:le,transition:Te,children:we,shapeFlag:Se}=W;if(Se&6){H(W.component.subTree,Y,ee,ve);return}if(Se&128){W.suspense.move(Y,ee,ve);return}if(Se&64){le.move(W,Y,ee,Q);return}if(le===Ne){n(se,Y,ee);for(let Ie=0;Ie<we.length;Ie++)H(we[Ie],Y,ee,ve);n(W.anchor,Y,ee);return}if(le===Ko){E(W,Y,ee);return}if(ve!==2&&Se&1&&Te)if(ve===0)Te.beforeEnter(se),n(se,Y,ee),rn(()=>Te.enter(se),re);else{const{leave:Ie,delayLeave:$e,afterLeave:Be}=Te,We=()=>{W.ctx.isUnmounted?s(se):n(se,Y,ee)},Ke=()=>{Ie(se,()=>{We(),Be&&Be()})};$e?$e(se,We,Ke):Ke()}else n(se,Y,ee)},L=(W,Y,ee,ve=!1,re=!1)=>{const{type:se,props:le,ref:Te,children:we,dynamicChildren:Se,shapeFlag:ze,patchFlag:Ie,dirs:$e,cacheIndex:Be}=W;if(Ie===-2&&(re=!1),Te!=null&&(oi(),xc(Te,null,ee,W,!0),li()),Be!=null&&(Y.renderCache[Be]=void 0),ze&256){Y.ctx.deactivate(W);return}const We=ze&1&&$e,Ke=!eo(W);let Ee;if(Ke&&(Ee=le&&le.onVnodeBeforeUnmount)&&fs(Ee,Y,W),ze&6)te(W.component,ee,ve);else{if(ze&128){W.suspense.unmount(ee,ve);return}We&&ba(W,null,Y,"beforeUnmount"),ze&64?W.type.remove(W,Y,ee,Q,ve):Se&&!Se.hasOnce&&(se!==Ne||Ie>0&&Ie&64)?ge(Se,Y,ee,!1,!0):(se===Ne&&Ie&384||!re&&ze&16)&&ge(we,Y,ee),ve&&z(W)}(Ke&&(Ee=le&&le.onVnodeUnmounted)||We)&&rn(()=>{Ee&&fs(Ee,Y,W),We&&ba(W,null,Y,"unmounted")},ee)},z=W=>{const{type:Y,el:ee,anchor:ve,transition:re}=W;if(Y===Ne){K(ee,ve);return}if(Y===Ko){I(W);return}const se=()=>{s(ee),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(W.shapeFlag&1&&re&&!re.persisted){const{leave:le,delayLeave:Te}=re,we=()=>le(ee,se);Te?Te(W.el,se,we):we()}else se()},K=(W,Y)=>{let ee;for(;W!==Y;)ee=f(W),s(W),W=ee;s(Y)},te=(W,Y,ee)=>{const{bum:ve,scope:re,job:se,subTree:le,um:Te,m:we,a:Se,parent:ze,slots:{__:Ie}}=W;hh(we),hh(Se),ve&&gc(ve),ze&&dt(Ie)&&Ie.forEach($e=>{ze.renderCache[$e]=void 0}),re.stop(),se&&(se.flags|=8,L(le,W,Y,ee)),Te&&rn(Te,Y),rn(()=>{W.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},ge=(W,Y,ee,ve=!1,re=!1,se=0)=>{for(let le=se;le<W.length;le++)L(W[le],Y,ee,ve,re)},ie=W=>{if(W.shapeFlag&6)return ie(W.component.subTree);if(W.shapeFlag&128)return W.suspense.next();const Y=f(W.anchor||W.el),ee=Y&&Y[hA];return ee?f(ee):Y};let he=!1;const Z=(W,Y,ee)=>{W==null?Y._vnode&&L(Y._vnode,null,null,!0):v(Y._vnode||null,W,Y,null,null,null,ee),Y._vnode=W,he||(he=!0,NE(),dh(),he=!1)},Q={p:v,um:L,m:H,r:z,mt:N,mc:_,pc:U,pbc:w,n:ie,o:t};let xe,X;return e&&([xe,X]=e(Q)),{render:Z,hydrate:xe,createApp:$F(Z,xe)}}function wm({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function ko({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function WA(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Z1(t,e,r=!1){const n=t.children,s=e.children;if(dt(n)&&dt(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=Ui(s[i]),o.el=a.el),!r&&o.patchFlag!==-2&&Z1(a,o)),o.type===to&&(o.el=a.el),o.type===Wr&&!o.el&&(o.el=a.el)}}function qF(t){const e=t.slice(),r=[0];let n,s,i,a,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(i=0,a=r.length-1;i<a;)o=i+a>>1,t[r[o]]<c?i=o+1:a=o;c<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=e[a];return r}function KA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:KA(e)}function hh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const qA=Symbol.for("v-scx"),XA=()=>ks(qA);function XF(t,e){return cf(t,null,e)}function YF(t,e){return cf(t,null,{flush:"post"})}function YA(t,e){return cf(t,null,{flush:"sync"})}function Qt(t,e,r){return cf(t,e,r)}function cf(t,e,r=Wt){const{immediate:n,deep:s,flush:i,once:a}=r,o=hr({},r),l=e&&n||!e&&i!=="post";let c;if(Rc){if(i==="sync"){const h=XA();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Us,h.resume=Us,h.pause=Us,h}}const u=sn;o.call=(h,p,v)=>Hs(h,u,p,v);let d=!1;i==="post"?o.scheduler=h=>{rn(h,u&&u.suspense)}:i!=="sync"&&(d=!0,o.scheduler=(h,p)=>{p?h():j1(h)}),o.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=LR(t,e,o);return Rc&&(c?c.push(f):l&&f()),f}function QF(t,e,r){const n=this.proxy,s=yr(t)?t.includes(".")?QA(n,t):()=>n[t]:t.bind(n,n);let i;_t(e)?i=e:(i=e.handler,r=e);const a=tl(this),o=cf(s,i.bind(n),r);return a(),o}function QA(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}function JF(t,e,r=Wt){const n=Ks(),s=An(e),i=gs(e),a=JA(t,s),o=sA((l,c)=>{let u,d=Wt,f;return YA(()=>{const h=t[s];Jn(u,h)&&(u=h,c())}),{get(){return l(),r.get?r.get(u):u},set(h){const p=r.set?r.set(h):h;if(!Jn(p,u)&&!(d!==Wt&&Jn(h,d)))return;const v=n.vnode.props;v&&(e in v||s in v||i in v)&&(`onUpdate:${e}`in v||`onUpdate:${s}`in v||`onUpdate:${i}`in v)||(u=h,c()),n.emit(`update:${e}`,p),Jn(h,p)&&Jn(h,d)&&!Jn(p,f)&&c(),d=h,f=p}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Wt:o,done:!1}:{done:!0}}}},o}const JA=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${An(e)}Modifiers`]||t[`${gs(e)}Modifiers`];function ZF(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Wt;let s=r;const i=e.startsWith("update:"),a=i&&JA(n,e.slice(7));a&&(a.trim&&(s=r.map(u=>yr(u)?u.trim():u)),a.number&&(s=r.map(ah)));let o,l=n[o=Yu(e)]||n[o=Yu(An(e))];!l&&i&&(l=n[o=Yu(gs(e))]),l&&Hs(l,t,6,s);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Hs(c,t,6,s)}}function ZA(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const i=t.emits;let a={},o=!1;if(!_t(t)){const l=c=>{const u=ZA(c,e,!0);u&&(o=!0,hr(a,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(cr(t)&&n.set(t,null),null):(dt(i)?i.forEach(l=>a[l]=null):hr(a,i),cr(t)&&n.set(t,a),a)}function Ap(t,e){return!t||!sf(e)?!1:(e=e.slice(2).replace(/Once$/,""),rr(t,e[0].toLowerCase()+e.slice(1))||rr(t,gs(e))||rr(t,e))}function M0(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:p,inheritAttrs:v}=t,g=Rd(t);let x,y;try{if(r.shapeFlag&4){const I=s||n,P=I;x=ms(c.call(P,I,u,d,h,f,p)),y=o}else{const I=e;x=ms(I.length>1?I(d,{attrs:o,slots:a,emit:l}):I(d,null)),y=e.props?o:t3(o)}}catch(I){rd.length=0,xl(I,t,1),x=at(Wr)}let E=x;if(y&&v!==!1){const I=Object.keys(y),{shapeFlag:P}=E;I.length&&P&7&&(i&&I.some(C1)&&(y=r3(y,i)),E=Fa(E,y,!1,!0))}return r.dirs&&(E=Fa(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(r.dirs):r.dirs),r.transition&&ui(E,r.transition),x=E,Rd(g),x}function e3(t,e=!0){let r;for(let n=0;n<t.length;n++){const s=t[n];if(di(s)){if(s.type!==Wr||s.children==="v-if"){if(r)return;r=s}}else return}return r}const t3=t=>{let e;for(const r in t)(r==="class"||r==="style"||sf(r))&&((e||(e={}))[r]=t[r]);return e},r3=(t,e)=>{const r={};for(const n in t)(!C1(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function n3(t,e,r){const{props:n,children:s,component:i}=t,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?KE(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==n[f]&&!Ap(c,f))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?KE(n,a,c):!0:!!a;return!1}function KE(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==t[i]&&!Ap(r,i))return!0}return!1}function wp({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const ph=t=>t.__isSuspense;let gv=0;const s3={name:"Suspense",__isSuspense:!0,process(t,e,r,n,s,i,a,o,l,c){if(t==null)i3(e,r,n,s,i,a,o,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}o3(t,e,r,n,s,a,o,l,c)}},hydrate:l3,normalize:c3},a3=s3;function Od(t,e){const r=t.props&&t.props[e];_t(r)&&r()}function i3(t,e,r,n,s,i,a,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=ew(t,s,n,e,d,r,i,a,o,l);c(null,f.pendingBranch=t.ssContent,d,null,n,f,i,a),f.deps>0?(Od(t,"onPending"),Od(t,"onFallback"),c(null,t.ssFallback,e,r,n,null,i,a),yc(f,t.ssFallback)):f.resolve(!1,!0)}function o3(t,e,r,n,s,i,a,o,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:p,pendingBranch:v,isInFallback:g,isHydrating:x}=d;if(v)d.pendingBranch=f,ra(f,v)?(l(v,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():g&&(x||(l(p,h,r,n,s,null,i,a,o),yc(d,h)))):(d.pendingId=gv++,x?(d.isHydrating=!1,d.activeBranch=v):c(v,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),g?(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0?d.resolve():(l(p,h,r,n,s,null,i,a,o),yc(d,h))):p&&ra(f,p)?(l(p,f,r,n,s,d,i,a,o),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0&&d.resolve()));else if(p&&ra(f,p))l(p,f,r,n,s,d,i,a,o),yc(d,f);else if(Od(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=gv++,l(null,f,d.hiddenContainer,null,s,d,i,a,o),d.deps<=0)d.resolve();else{const{timeout:y,pendingId:E}=d;y>0?setTimeout(()=>{d.pendingId===E&&d.fallback(h)},y):y===0&&d.fallback(h)}}function ew(t,e,r,n,s,i,a,o,l,c,u=!1){const{p:d,m:f,um:h,n:p,o:{parentNode:v,remove:g}}=c;let x;const y=u3(t);y&&e&&e.pendingBranch&&(x=e.pendingId,e.deps++);const E=t.props?ih(t.props.timeout):void 0,I=i,P={vnode:t,parent:e,parentComponent:r,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:gv++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(D=!1,A=!1){const{vnode:_,activeBranch:b,pendingBranch:w,pendingId:C,effects:T,parentComponent:k,container:N}=P;let B=!1;P.isHydrating?P.isHydrating=!1:D||(B=b&&w.transition&&w.transition.mode==="out-in",B&&(b.transition.afterLeave=()=>{C===P.pendingId&&(f(w,N,i===I?p(b):i,0),Dd(T))}),b&&(v(b.el)===N&&(i=p(b)),h(b,k,P,!0)),B||f(w,N,i,0)),yc(P,w),P.pendingBranch=null,P.isInFallback=!1;let R=P.parent,O=!1;for(;R;){if(R.pendingBranch){R.effects.push(...T),O=!0;break}R=R.parent}!O&&!B&&Dd(T),P.effects=[],y&&e&&e.pendingBranch&&x===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),Od(_,"onResolve")},fallback(D){if(!P.pendingBranch)return;const{vnode:A,activeBranch:_,parentComponent:b,container:w,namespace:C}=P;Od(A,"onFallback");const T=p(_),k=()=>{P.isInFallback&&(d(null,D,w,T,b,null,C,o,l),yc(P,D))},N=D.transition&&D.transition.mode==="out-in";N&&(_.transition.afterLeave=k),P.isInFallback=!0,h(_,b,null,!0),N||k()},move(D,A,_){P.activeBranch&&f(P.activeBranch,D,A,_),P.container=D},next(){return P.activeBranch&&p(P.activeBranch)},registerDep(D,A,_){const b=!!P.pendingBranch;b&&P.deps++;const w=D.vnode.el;D.asyncDep.catch(C=>{xl(C,D,0)}).then(C=>{if(D.isUnmounted||P.isUnmounted||P.pendingId!==D.suspenseId)return;D.asyncResolved=!0;const{vnode:T}=D;Ev(D,C,!1),w&&(T.el=w);const k=!w&&D.subTree.el;A(D,T,v(w||D.subTree.el),w?null:p(D.subTree),P,a,_),k&&g(k),wp(D,T.el),b&&--P.deps===0&&P.resolve()})},unmount(D,A){P.isUnmounted=!0,P.activeBranch&&h(P.activeBranch,r,D,A),P.pendingBranch&&h(P.pendingBranch,r,D,A)}};return P}function l3(t,e,r,n,s,i,a,o,l){const c=e.suspense=ew(e,n,r,t.parentNode,document.createElement("div"),null,s,i,a,o,!0),u=l(t,c.pendingBranch=e.ssContent,r,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function c3(t){const{shapeFlag:e,children:r}=t,n=e&32;t.ssContent=qE(n?r.default:r),t.ssFallback=n?qE(r.fallback):at(Wr)}function qE(t){let e;if(_t(t)){const r=el&&t._c;r&&(t._d=!1,V()),t=t(),r&&(t._d=!0,e=Vn,rw())}return dt(t)&&(t=e3(t)),t=ms(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(r=>r!==t)),t}function tw(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):Dd(t)}function yc(t,e){t.activeBranch=e;const{vnode:r,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;r.el=s,n&&n.subTree===r&&(n.vnode.el=s,wp(n,s))}function u3(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ne=Symbol.for("v-fgt"),to=Symbol.for("v-txt"),Wr=Symbol.for("v-cmt"),Ko=Symbol.for("v-stc"),rd=[];let Vn=null;function V(t=!1){rd.push(Vn=t?null:[])}function rw(){rd.pop(),Vn=rd[rd.length-1]||null}let el=1;function vv(t,e=!1){el+=t,t<0&&Vn&&e&&(Vn.hasOnce=!0)}function nw(t){return t.dynamicChildren=el>0?Vn||hc:null,rw(),el>0&&Vn&&Vn.push(t),t}function j(t,e,r,n,s,i){return nw(m(t,e,r,n,s,i,!0))}function Tn(t,e,r,n,s){return nw(at(t,e,r,n,s,!0))}function di(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}function d3(t){}const sw=({key:t})=>t??null,B0=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?yr(t)||Rr(t)||_t(t)?{i:an,r:t,k:e,f:!!r}:t:null);function m(t,e=null,r=null,n=0,s=null,i=t===Ne?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sw(e),ref:e&&B0(e),scopeId:yp,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:an};return o?(ex(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=yr(r)?8:16),el>0&&!a&&Vn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Vn.push(l),l}const at=f3;function f3(t,e=null,r=null,n=0,s=null,i=!1){if((!t||t===kA)&&(t=Wr),di(t)){const o=Fa(t,e,!0);return r&&ex(o,r),el>0&&!i&&Vn&&(o.shapeFlag&6?Vn[Vn.indexOf(t)]=o:Vn.push(o)),o.patchFlag=-2,o}if(y3(t)&&(t=t.__vccOpts),e){e=aw(e);let{class:o,style:l}=e;o&&!yr(o)&&(e.class=ut(o)),cr(l)&&(vp(l)&&!dt(l)&&(l=hr({},l)),e.style=bn(l))}const a=yr(t)?1:ph(t)?128:pA(t)?64:cr(t)?4:_t(t)?2:0;return m(t,e,r,n,s,a,i,!0)}function aw(t){return t?vp(t)||BA(t)?hr({},t):t:null}function Fa(t,e,r=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=t,c=e?iw(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&sw(c),ref:e&&e.ref?r&&i?dt(i)?i.concat(B0(e)):[i,B0(e)]:B0(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ne?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Fa(t.ssContent),ssFallback:t.ssFallback&&Fa(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&ui(u,l.clone(u)),u}function Ve(t=" ",e=0){return at(to,null,t,e)}function rs(t,e){const r=at(Ko,null,t);return r.staticCount=e,r}function Oe(t="",e=!1){return e?(V(),Tn(Wr,null,t)):at(Wr,null,t)}function ms(t){return t==null||typeof t=="boolean"?at(Wr):dt(t)?at(Ne,null,t.slice()):di(t)?Ui(t):at(to,null,String(t))}function Ui(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Fa(t)}function ex(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(dt(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),ex(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!BA(e)?e._ctx=an:s===3&&an&&(an.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _t(e)?(e={default:e,_ctx:an},r=32):(e=String(e),n&64?(r=16,e=[Ve(e)]):r=8);t.children=e,t.shapeFlag|=r}function iw(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=ut([e.class,n.class]));else if(s==="style")e.style=bn([e.style,n.style]);else if(sf(s)){const i=e[s],a=n[s];a&&i!==a&&!(dt(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=n[s])}return e}function fs(t,e,r,n=null){Hs(t,e,7,[r,n])}const h3=FA();let p3=0;function ow(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||h3,i={uid:p3++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new R1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:UA(n,s),emitsOptions:ZA(n,s),emit:null,emitted:null,propsDefaults:Wt,inheritAttrs:n.inheritAttrs,ctx:Wt,data:Wt,props:Wt,attrs:Wt,slots:Wt,refs:Wt,setupState:Wt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ZF.bind(null,i),t.ce&&t.ce(i),i}let sn=null;const Ks=()=>sn||an;let mh,xv;{const t=dp(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};mh=e("__VUE_INSTANCE_SETTERS__",r=>sn=r),xv=e("__VUE_SSR_SETTERS__",r=>Rc=r)}const tl=t=>{const e=sn;return mh(t),t.scope.on(),()=>{t.scope.off(),mh(e)}},yv=()=>{sn&&sn.scope.off(),mh(null)};function lw(t){return t.vnode.shapeFlag&4}let Rc=!1;function cw(t,e=!1,r=!1){e&&xv(e);const{props:n,children:s}=t.vnode,i=lw(t);jF(t,n,i,e),WF(t,s,r||e);const a=i?m3(t,e):void 0;return e&&xv(!1),a}function m3(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fv);const{setup:n}=r;if(n){oi();const s=t.setupContext=n.length>1?dw(t):null,i=tl(t),a=Qc(n,t,0,[t.props,s]),o=D1(a);if(li(),i(),(o||t.sp)&&!eo(t)&&z1(t),o){if(a.then(yv,yv),e)return a.then(l=>{Ev(t,l,e)}).catch(l=>{xl(l,t,0)});t.asyncDep=a}else Ev(t,a,e)}else uw(t,e)}function Ev(t,e,r){_t(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:cr(e)&&(t.setupState=$1(e)),uw(t,r)}let gh,_v;function g3(t){gh=t,_v=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,_F))}}const v3=()=>!gh;function uw(t,e,r){const n=t.type;if(!t.render){if(!e&&gh&&!n.render){const s=n.template||Y1(t).template;if(s){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=hr(hr({isCustomElement:i,delimiters:o},a),l);n.render=gh(s,c)}}t.render=n.render||Us,_v&&_v(t)}{const s=tl(t);oi();try{NF(t)}finally{li(),s()}}}const x3={get(t,e){return Mn(t,"get",""),t[e]}};function dw(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,x3),slots:t.slots,emit:t.emit,expose:e}}function uf(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($1(xp(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in ed)return ed[r](t)},has(e,r){return r in e||r in ed}})):t.proxy}function bv(t,e=!0){return _t(t)?t.displayName||t.name:t.name||e&&t.__name}function y3(t){return _t(t)&&"__vccOpts"in t}const be=(t,e)=>OR(t,e,Rc);function Ip(t,e,r){const n=arguments.length;return n===2?cr(e)&&!dt(e)?di(e)?at(t,null,[e]):at(t,e):at(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&di(r)&&(r=[r]),at(t,e,r))}function E3(){}function _3(t,e,r,n){const s=r[n];if(s&&fw(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=n,r[n]=i}function fw(t,e){const r=t.memo;if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(Jn(r[n],e[n]))return!1;return el>0&&Vn&&Vn.push(t),!0}const hw="3.5.17",b3=Us,S3=HR,T3=ec,A3=fA,w3={createComponentInstance:ow,setupComponent:cw,renderComponentRoot:M0,setCurrentRenderingInstance:Rd,isVNode:di,normalizeVNode:ms,getComponentPublicInstance:uf,ensureValidVNode:X1,pushWarningContext:UR,popWarningContext:VR},I3=w3,C3=null,k3=null,D3=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sv;const XE=typeof window<"u"&&window.trustedTypes;if(XE)try{Sv=XE.createPolicy("vue",{createHTML:t=>t})}catch{}const pw=Sv?t=>Sv.createHTML(t):t=>t,P3="http://www.w3.org/2000/svg",R3="http://www.w3.org/1998/Math/MathML",qa=typeof document<"u"?document:null,YE=qa&&qa.createElement("template"),F3={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?qa.createElementNS(P3,t):e==="mathml"?qa.createElementNS(R3,t):r?qa.createElement(t,{is:r}):qa.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>qa.createTextNode(t),createComment:t=>qa.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qa.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,i){const a=r?r.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===i||!(s=s.nextSibling)););else{YE.innerHTML=pw(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=YE.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ii="transition",vu="animation",Fc=Symbol("_vtc"),mw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gw=hr({},G1,mw),O3=t=>(t.displayName="Transition",t.props=gw,t),N3=O3((t,{slots:e})=>Ip(yA,vw(t),e)),Do=(t,e=[])=>{dt(t)?t.forEach(r=>r(...e)):t&&t(...e)},QE=t=>t?dt(t)?t.some(e=>e.length>1):t.length>1:!1;function vw(t){const e={};for(const T in t)T in mw||(e[T]=t[T]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:i=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=i,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:h=`${r}-leave-to`}=t,p=M3(s),v=p&&p[0],g=p&&p[1],{onBeforeEnter:x,onEnter:y,onEnterCancelled:E,onLeave:I,onLeaveCancelled:P,onBeforeAppear:D=x,onAppear:A=y,onAppearCancelled:_=E}=e,b=(T,k,N,B)=>{T._enterCancelled=B,Oi(T,k?u:o),Oi(T,k?c:a),N&&N()},w=(T,k)=>{T._isLeaving=!1,Oi(T,d),Oi(T,h),Oi(T,f),k&&k()},C=T=>(k,N)=>{const B=T?A:y,R=()=>b(k,T,N);Do(B,[k,R]),JE(()=>{Oi(k,T?l:i),ya(k,T?u:o),QE(B)||ZE(k,n,v,R)})};return hr(e,{onBeforeEnter(T){Do(x,[T]),ya(T,i),ya(T,a)},onBeforeAppear(T){Do(D,[T]),ya(T,l),ya(T,c)},onEnter:C(!1),onAppear:C(!0),onLeave(T,k){T._isLeaving=!0;const N=()=>w(T,k);ya(T,d),T._enterCancelled?(ya(T,f),Tv()):(Tv(),ya(T,f)),JE(()=>{T._isLeaving&&(Oi(T,d),ya(T,h),QE(I)||ZE(T,n,g,N))}),Do(I,[T,N])},onEnterCancelled(T){b(T,!1,void 0,!0),Do(E,[T])},onAppearCancelled(T){b(T,!0,void 0,!0),Do(_,[T])},onLeaveCancelled(T){w(T),Do(P,[T])}})}function M3(t){if(t==null)return null;if(cr(t))return[Im(t.enter),Im(t.leave)];{const e=Im(t);return[e,e]}}function Im(t){return ih(t)}function ya(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Fc]||(t[Fc]=new Set)).add(e)}function Oi(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Fc];r&&(r.delete(e),r.size||(t[Fc]=void 0))}function JE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let B3=0;function ZE(t,e,r,n){const s=t._endId=++B3,i=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:a,timeout:o,propCount:l}=xw(t,e);if(!a)return n();const c=a+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,f)}function xw(t,e){const r=window.getComputedStyle(t),n=p=>(r[p]||"").split(", "),s=n(`${Ii}Delay`),i=n(`${Ii}Duration`),a=e_(s,i),o=n(`${vu}Delay`),l=n(`${vu}Duration`),c=e_(o,l);let u=null,d=0,f=0;e===Ii?a>0&&(u=Ii,d=a,f=i.length):e===vu?c>0&&(u=vu,d=c,f=l.length):(d=Math.max(a,c),u=d>0?a>c?Ii:vu:null,f=u?u===Ii?i.length:l.length:0);const h=u===Ii&&/\b(transform|all)(,|$)/.test(n(`${Ii}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function e_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>t_(r)+t_(t[n])))}function t_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Tv(){return document.body.offsetHeight}function L3(t,e,r){const n=t[Fc];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const vh=Symbol("_vod"),yw=Symbol("_vsh"),Ew={beforeMount(t,{value:e},{transition:r}){t[vh]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):xu(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),xu(t,!0),n.enter(t)):n.leave(t,()=>{xu(t,!1)}):xu(t,e))},beforeUnmount(t,{value:e}){xu(t,e)}};function xu(t,e){t.style.display=e?t[vh]:"none",t[yw]=!e}function U3(){Ew.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const _w=Symbol("");function V3(t){const e=Ks();if(!e)return;const r=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>xh(i,s))},n=()=>{const s=t(e.proxy);e.ce?xh(e.ce,s):Av(e.subTree,s),r(s)};W1(()=>{Dd(n)}),tr(()=>{Qt(n,Us,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),xi(()=>s.disconnect())})}function Av(t,e){if(t.shapeFlag&128){const r=t.suspense;t=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{Av(r.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)xh(t.el,e);else if(t.type===Ne)t.children.forEach(r=>Av(r,e));else if(t.type===Ko){let{el:r,anchor:n}=t;for(;r&&(xh(r,e),r!==n);)r=r.nextSibling}}function xh(t,e){if(t.nodeType===1){const r=t.style;let n="";for(const s in e)r.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;r[_w]=n}}const $3=/(^|;)\s*display\s*:/;function j3(t,e,r){const n=t.style,s=yr(r);let i=!1;if(r&&!s){if(e)if(yr(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&L0(n,o,"")}else for(const a in e)r[a]==null&&L0(n,a,"");for(const a in r)a==="display"&&(i=!0),L0(n,a,r[a])}else if(s){if(e!==r){const a=n[_w];a&&(r+=";"+a),n.cssText=r,i=$3.test(r)}}else e&&t.removeAttribute("style");vh in t&&(t[vh]=i?n.display:"",t[yw]&&(n.display="none"))}const r_=/\s*!important$/;function L0(t,e,r){if(dt(r))r.forEach(n=>L0(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=H3(t,e);r_.test(r)?t.setProperty(gs(n),r.replace(r_,""),"important"):t[n]=r}}const n_=["Webkit","Moz","ms"],Cm={};function H3(t,e){const r=Cm[e];if(r)return r;let n=An(e);if(n!=="filter"&&n in t)return Cm[e]=n;n=af(n);for(let s=0;s<n_.length;s++){const i=n_[s]+n;if(i in t)return Cm[e]=i}return e}const s_="http://www.w3.org/1999/xlink";function a_(t,e,r,n,s,i=tR(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(s_,e.slice(6,e.length)):t.setAttributeNS(s_,e,r):r==null||i&&!LT(r)?t.removeAttribute(e):t.setAttribute(e,i?"":ua(r)?String(r):r)}function i_(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?pw(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=LT(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function Qa(t,e,r,n){t.addEventListener(e,r,n)}function G3(t,e,r,n){t.removeEventListener(e,r,n)}const o_=Symbol("_vei");function z3(t,e,r,n,s=null){const i=t[o_]||(t[o_]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=W3(e);if(n){const c=i[e]=X3(n,s);Qa(t,o,c,l)}else a&&(G3(t,o,a,l),i[e]=void 0)}}const l_=/(?:Once|Passive|Capture)$/;function W3(t){let e;if(l_.test(t)){e={};let n;for(;n=t.match(l_);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gs(t.slice(2)),e]}let km=0;const K3=Promise.resolve(),q3=()=>km||(K3.then(()=>km=0),km=Date.now());function X3(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Hs(Y3(n,r.value),e,5,[n])};return r.value=t,r.attached=q3(),r}function Y3(t,e){if(dt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const c_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Q3=(t,e,r,n,s,i)=>{const a=s==="svg";e==="class"?L3(t,n,a):e==="style"?j3(t,r,n):sf(e)?C1(e)||z3(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):J3(t,e,n,a))?(i_(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&a_(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!yr(n))?i_(t,An(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),a_(t,e,n,a))};function J3(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&c_(e)&&_t(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return c_(e)&&yr(r)?!1:e in t}const u_={};/*! #__NO_SIDE_EFFECTS__ */function bw(t,e,r){const n=of(t,e);cp(n)&&hr(n,e);class s extends Cp{constructor(a){super(n,a,r)}}return s.def=n,s}/*! #__NO_SIDE_EFFECTS__ */const Z3=(t,e)=>bw(t,e,Ow),e8=typeof HTMLElement<"u"?HTMLElement:class{};class Cp extends e8{constructor(e,r={},n=Eh){super(),this._def=e,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==Eh?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Cp){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,yl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:a}=n;let o;if(i&&!dt(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=ih(this._props[l])),(o||(o=Object.create(null)))[An(l)]=!0)}this._numberProps=o,this._resolveProps(n),this.shadowRoot&&this._applyStyles(a),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)rr(this,n)||Object.defineProperty(this,n,{get:()=>me(r[n])})}_resolveProps(e){const{props:r}=e,n=dt(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(An))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const r=this.hasAttribute(e);let n=r?this.getAttribute(e):u_;const s=An(e);r&&this._numberProps&&this._numberProps[s]&&(n=ih(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,r,n=!0,s=!1){if(r!==this._props[e]&&(r===u_?delete this._props[e]:(this._props[e]=r,e==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),n)){const i=this._ob;i&&i.disconnect(),r===!0?this.setAttribute(gs(e),""):typeof r=="string"||typeof r=="number"?this.setAttribute(gs(e),r+""):r||this.removeAttribute(gs(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),Fw(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const r=at(this._def,hr(e,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(i,a)=>{this.dispatchEvent(new CustomEvent(i,cp(a[0])?hr({detail:a},a[0]):{detail:a}))};n.emit=(i,...a)=>{s(i,a),gs(i)!==i&&s(gs(i),a)},this._setParent()}),r}_applyStyles(e,r){if(!e)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");n&&i.setAttribute("nonce",n),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],i=s.getAttribute("name")||"default",a=this._slots[i],o=s.parentNode;if(a)for(const l of a){if(r&&l.nodeType===1){const c=r+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}o.insertBefore(l,s)}else for(;s.firstChild;)o.insertBefore(s.firstChild,s);o.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function Sw(t){const e=Ks(),r=e&&e.ce;return r||null}function t8(){const t=Sw();return t&&t.shadowRoot}function r8(t="$style"){{const e=Ks();if(!e)return Wt;const r=e.type.__cssModules;if(!r)return Wt;const n=r[t];return n||Wt}}const Tw=new WeakMap,Aw=new WeakMap,yh=Symbol("_moveCb"),d_=Symbol("_enterCb"),n8=t=>(delete t.props.mode,t),s8=n8({name:"TransitionGroup",props:hr({},gw,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Ks(),n=H1();let s,i;return Sp(()=>{if(!s.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!c8(s[0].el,r.vnode.el,a)){s=[];return}s.forEach(i8),s.forEach(o8);const o=s.filter(l8);Tv(),o.forEach(l=>{const c=l.el,u=c.style;ya(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[yh]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[yh]=null,Oi(c,a))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const a=zt(t),o=vw(a);let l=a.tag||Ne;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),ui(u,Pc(u,o,n,r)),Tw.set(u,u.el.getBoundingClientRect()))}i=e.default?_p(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&ui(u,Pc(u,o,n,r))}return at(l,null,i)}}}),a8=s8;function i8(t){const e=t.el;e[yh]&&e[yh](),e[d_]&&e[d_]()}function o8(t){Aw.set(t,t.el.getBoundingClientRect())}function l8(t){const e=Tw.get(t),r=Aw.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",t}}function c8(t,e,r){const n=t.cloneNode(),s=t[Fc];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:a}=xw(n);return i.removeChild(n),a}const co=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dt(e)?r=>gc(e,r):e};function u8(t){t.target.composing=!0}function f_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vs=Symbol("_assign"),Ct={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Vs]=co(s);const i=n||s.props&&s.props.type==="number";Qa(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;r&&(o=o.trim()),i&&(o=ah(o)),t[Vs](o)}),r&&Qa(t,"change",()=>{t.value=t.value.trim()}),e||(Qa(t,"compositionstart",u8),Qa(t,"compositionend",f_),Qa(t,"change",f_))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:i}},a){if(t[Vs]=co(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?ah(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},St={deep:!0,created(t,e,r){t[Vs]=co(r),Qa(t,"change",()=>{const n=t._modelValue,s=Oc(t),i=t.checked,a=t[Vs];if(dt(n)){const o=fp(n,s),l=o!==-1;if(i&&!l)a(n.concat(s));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(vl(n)){const o=new Set(n);i?o.add(s):o.delete(s),a(o)}else a(ww(t,i))})},mounted:h_,beforeUpdate(t,e,r){t[Vs]=co(r),h_(t,e,r)}};function h_(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(dt(e))s=fp(e,n.props.value)>-1;else if(vl(e))s=e.has(n.props.value);else{if(e===r)return;s=lo(e,ww(t,!0))}t.checked!==s&&(t.checked=s)}const oa={created(t,{value:e},r){t.checked=lo(e,r.props.value),t[Vs]=co(r),Qa(t,"change",()=>{t[Vs](Oc(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Vs]=co(n),e!==r&&(t.checked=lo(e,n.props.value))}},vr={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=vl(e);Qa(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?ah(Oc(a)):Oc(a));t[Vs](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,yl(()=>{t._assigning=!1})}),t[Vs]=co(n)},mounted(t,{value:e}){p_(t,e)},beforeUpdate(t,e,r){t[Vs]=co(r)},updated(t,{value:e}){t._assigning||p_(t,e)}};function p_(t,e){const r=t.multiple,n=dt(e);if(!(r&&!n&&!vl(e))){for(let s=0,i=t.options.length;s<i;s++){const a=t.options[s],o=Oc(a);if(r)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(c=>String(c)===String(o)):a.selected=fp(e,o)>-1}else a.selected=e.has(o);else if(lo(Oc(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Oc(t){return"_value"in t?t._value:t.value}function ww(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const Iw={created(t,e,r){i0(t,e,r,null,"created")},mounted(t,e,r){i0(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){i0(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){i0(t,e,r,n,"updated")}};function Cw(t,e){switch(t){case"SELECT":return vr;case"TEXTAREA":return Ct;default:switch(e){case"checkbox":return St;case"radio":return oa;default:return Ct}}}function i0(t,e,r,n,s){const a=Cw(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}function d8(){Ct.getSSRProps=({value:t})=>({value:t}),oa.getSSRProps=({value:t},e)=>{if(e.props&&lo(e.props.value,t))return{checked:!0}},St.getSSRProps=({value:t},e)=>{if(dt(t)){if(e.props&&fp(t,e.props.value)>-1)return{checked:!0}}else if(vl(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Iw.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const r=Cw(e.type.toUpperCase(),e.props&&e.props.type);if(r.getSSRProps)return r.getSSRProps(t,e)}}const f8=["ctrl","shift","alt","meta"],h8={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>f8.some(r=>t[`${r}Key`]&&!e.includes(r))},Ds=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...i)=>{for(let a=0;a<e.length;a++){const o=h8[e[a]];if(o&&o(s,e))return}return t(s,...i)})},p8={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},kw=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const i=gs(s.key);if(e.some(a=>a===i||p8[a]===i))return t(s)})},Dw=hr({patchProp:Q3},F3);let nd,m_=!1;function Pw(){return nd||(nd=HA(Dw))}function Rw(){return nd=m_?nd:GA(Dw),m_=!0,nd}const Fw=(...t)=>{Pw().render(...t)},m8=(...t)=>{Rw().hydrate(...t)},Eh=(...t)=>{const e=Pw().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=Mw(n);if(!s)return;const i=e._component;!_t(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,Nw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},Ow=(...t)=>{const e=Rw().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=Mw(n);if(s)return r(s,!0,Nw(s))},e};function Nw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Mw(t){return yr(t)?document.querySelector(t):t}let g_=!1;const g8=()=>{g_||(g_=!0,d8(),U3())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const v8=()=>{},x8=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:yA,BaseTransitionPropsValidators:G1,Comment:Wr,DeprecationTypes:D3,EffectScope:R1,ErrorCodes:jR,ErrorTypeStrings:S3,Fragment:Ne,KeepAlive:pF,ReactiveEffect:Id,Static:Ko,Suspense:a3,Teleport:YR,Text:to,TrackOpTypes:NR,Transition:N3,TransitionGroup:a8,TriggerOpTypes:MR,VueElement:Cp,assertNumber:$R,callWithAsyncErrorHandling:Hs,callWithErrorHandling:Qc,camelize:An,capitalize:af,cloneVNode:Fa,compatUtils:k3,compile:v8,computed:be,createApp:Eh,createBlock:Tn,createCommentVNode:Oe,createElementBlock:j,createElementVNode:m,createHydrationRenderer:GA,createPropsRestProxy:FF,createRenderer:HA,createSSRApp:Ow,createSlots:yF,createStaticVNode:rs,createTextVNode:Ve,createVNode:at,customRef:sA,defineAsyncComponent:fF,defineComponent:of,defineCustomElement:bw,defineEmits:SF,defineExpose:TF,defineModel:IF,defineOptions:AF,defineProps:bF,defineSSRCustomElement:Z3,defineSlots:wF,devtools:T3,effect:sR,effectScope:F1,getCurrentInstance:Ks,getCurrentScope:O1,getCurrentWatcher:BR,getTransitionRawChildren:_p,guardReactiveProps:aw,h:Ip,handleError:xl,hasInjectionContext:OA,hydrate:m8,hydrateOnIdle:iF,hydrateOnInteraction:uF,hydrateOnMediaQuery:cF,hydrateOnVisible:lF,initCustomFormatter:E3,initDirectivesForSSR:g8,inject:ks,isMemoSame:fw,isProxy:vp,isReactive:ka,isReadonly:ci,isRef:Rr,isRuntimeOnly:v3,isShallow:Cs,isVNode:di,markRaw:xp,mergeDefaults:PF,mergeModels:RF,mergeProps:iw,nextTick:yl,normalizeClass:ut,normalizeProps:ZP,normalizeStyle:bn,onActivated:_A,onBeforeMount:TA,onBeforeUnmount:Tp,onBeforeUpdate:W1,onDeactivated:bA,onErrorCaptured:CA,onMounted:tr,onRenderTracked:IA,onRenderTriggered:wA,onScopeDispose:$T,onServerPrefetch:AA,onUnmounted:xi,onUpdated:Sp,onWatcherCleanup:oA,openBlock:V,popScopeId:KR,provide:td,proxyRefs:$1,pushScopeId:WR,queuePostFlushCb:Dd,reactive:Ws,readonly:U1,ref:fe,registerRuntimeCompiler:g3,render:Fw,renderList:He,renderSlot:DA,resolveComponent:Mr,resolveDirective:xF,resolveDynamicComponent:vF,resolveFilter:C3,resolveTransitionHooks:Pc,setBlockTracking:vv,setDevtoolsHook:A3,setTransitionHooks:ui,shallowReactive:L1,shallowReadonly:TR,shallowRef:V1,ssrContextKey:qA,ssrUtils:I3,stop:aR,toDisplayString:ce,toHandlerKey:Yu,toHandlers:EF,toRaw:zt,toRef:RR,toRefs:aA,toValue:IR,transformVNodeArgs:d3,triggerRef:wR,unref:me,useAttrs:DF,useCssModule:r8,useCssVars:V3,useHost:Sw,useId:JR,useModel:JF,useSSRContext:XA,useShadowRoot:t8,useSlots:kF,useTemplateRef:ZR,useTransitionState:H1,vModelCheckbox:St,vModelDynamic:Iw,vModelRadio:oa,vModelSelect:vr,vModelText:Ct,vShow:Ew,version:hw,warn:b3,watch:Qt,watchEffect:XF,watchPostEffect:YF,watchSyncEffect:YA,withAsyncContext:OF,withCtx:Ep,withDefaults:CF,withDirectives:je,withKeys:kw,withMemo:_3,withModifiers:Ds,withScopeId:qR},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Bw;const kp=t=>Bw=t,Lw=Symbol();function wv(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var sd;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(sd||(sd={}));function y8(){const t=F1(!0),e=t.run(()=>fe({}));let r=[],n=[];const s=xp({install(i){kp(s),s._a=i,i.provide(Lw,s),i.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const Uw=()=>{};function v_(t,e,r,n=Uw){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&O1()&&$T(s),s}function jl(t,...e){t.slice().forEach(r=>{r(...e)})}const E8=t=>t(),x_=Symbol(),Dm=Symbol();function Iv(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];wv(s)&&wv(n)&&t.hasOwnProperty(r)&&!Rr(n)&&!ka(n)?t[r]=Iv(s,n):t[r]=n}return t}const _8=Symbol();function b8(t){return!wv(t)||!t.hasOwnProperty(_8)}const{assign:Ni}=Object;function S8(t){return!!(Rr(t)&&t.effect)}function T8(t,e,r,n){const{state:s,actions:i,getters:a}=e,o=r.state.value[t];let l;function c(){o||(r.state.value[t]=s?s():{});const u=aA(r.state.value[t]);return Ni(u,i,Object.keys(a||{}).reduce((d,f)=>(d[f]=xp(be(()=>{kp(r);const h=r._s.get(t);return a[f].call(h,h)})),d),{}))}return l=Vw(t,c,e,r,n,!0),l}function Vw(t,e,r={},n,s,i){let a;const o=Ni({actions:{}},r),l={deep:!0};let c,u,d=[],f=[],h;const p=n.state.value[t];!i&&!p&&(n.state.value[t]={}),fe({});let v;function g(_){let b;c=u=!1,typeof _=="function"?(_(n.state.value[t]),b={type:sd.patchFunction,storeId:t,events:h}):(Iv(n.state.value[t],_),b={type:sd.patchObject,payload:_,storeId:t,events:h});const w=v=Symbol();yl().then(()=>{v===w&&(c=!0)}),u=!0,jl(d,b,n.state.value[t])}const x=i?function(){const{state:b}=r,w=b?b():{};this.$patch(C=>{Ni(C,w)})}:Uw;function y(){a.stop(),d=[],f=[],n._s.delete(t)}const E=(_,b="")=>{if(x_ in _)return _[Dm]=b,_;const w=function(){kp(n);const C=Array.from(arguments),T=[],k=[];function N(O){T.push(O)}function B(O){k.push(O)}jl(f,{args:C,name:w[Dm],store:P,after:N,onError:B});let R;try{R=_.apply(this&&this.$id===t?this:P,C)}catch(O){throw jl(k,O),O}return R instanceof Promise?R.then(O=>(jl(T,O),O)).catch(O=>(jl(k,O),Promise.reject(O))):(jl(T,R),R)};return w[x_]=!0,w[Dm]=b,w},I={_p:n,$id:t,$onAction:v_.bind(null,f),$patch:g,$reset:x,$subscribe(_,b={}){const w=v_(d,_,b.detached,()=>C()),C=a.run(()=>Qt(()=>n.state.value[t],T=>{(b.flush==="sync"?u:c)&&_({storeId:t,type:sd.direct,events:h},T)},Ni({},l,b)));return w},$dispose:y},P=Ws(I);n._s.set(t,P);const A=(n._a&&n._a.runWithContext||E8)(()=>n._e.run(()=>(a=F1()).run(()=>e({action:E}))));for(const _ in A){const b=A[_];if(Rr(b)&&!S8(b)||ka(b))i||(p&&b8(b)&&(Rr(b)?b.value=p[_]:Iv(b,p[_])),n.state.value[t][_]=b);else if(typeof b=="function"){const w=E(b,_);A[_]=w,o.actions[_]=b}}return Ni(P,A),Ni(zt(P),A),Object.defineProperty(P,"$state",{get:()=>n.state.value[t],set:_=>{g(b=>{Ni(b,_)})}}),n._p.forEach(_=>{Ni(P,a.run(()=>_({store:P,app:n._a,pinia:n,options:o})))}),p&&i&&r.hydrate&&r.hydrate(P.$state,p),c=!0,u=!0,P}/*! #__NO_SIDE_EFFECTS__ */function $w(t,e,r){let n,s;const i=typeof e=="function";typeof t=="string"?(n=t,s=i?r:e):(s=t,n=t.id);function a(o,l){const c=OA();return o=o||(c?ks(Lw,null):null),o&&kp(o),o=Bw,o._s.has(n)||(i?Vw(n,e,s,o):T8(n,s,o)),o._s.get(n)}return a.$id=n,a}var y_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},A8=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let f=(o&15)<<2|c>>6,h=c&63;l||(h=64,a||(f=64)),n.push(r[u],r[d],r[f],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):A8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const d=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new w8;const f=i<<2|o>>4;if(n.push(f),c!==64){const h=o<<4&240|c>>2;if(n.push(h),d!==64){const p=c<<6&192|d;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I8=function(t){const e=jw(t);return Hw.encodeByteArray(e,!0)},_h=function(t){return I8(t).replace(/\./g,"")},Gw=function(t){try{return Hw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=()=>C8().__FIREBASE_DEFAULTS__,D8=()=>{if(typeof process>"u"||typeof y_>"u")return;const t=y_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gw(t[1]);return e&&JSON.parse(e)},Dp=()=>{try{return k8()||D8()||P8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zw=t=>{var e,r;return(r=(e=Dp())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},tx=t=>{const e=zw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Ww=()=>{var t;return(t=Dp())===null||t===void 0?void 0:t.config},Kw=t=>{var e;return(e=Dp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_h(JSON.stringify(r)),_h(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function O8(){var t;const e=(t=Dp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function M8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function B8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L8(){const t=un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Xw(){return!O8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function U8(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="FirebaseError";class ha extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=V8,Object.setPrototypeOf(this,ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,df.prototype.create)}}class df{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?$8(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ha(s,o,n)}}function $8(t,e){return t.replace(j8,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const j8=/\{\$([^}]+)}/g;function H8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(E_(i)&&E_(a)){if(!bh(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function E_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function G8(t,e){const r=new z8(t,e);return r.subscribe.bind(r)}class z8{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");W8(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Pm),s.error===void 0&&(s.error=Pm),s.complete===void 0&&(s.complete=Pm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W8(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){return t&&t._delegate?t._delegate:t}class fi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new R8;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X8(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:q8(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q8(t){return t===Oo?void 0:t}function X8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new K8(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(jt||(jt={}));const Q8={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},J8=jt.INFO,Z8={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},eO=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Z8[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rx{constructor(e){this.name=e,this._logLevel=J8,this._logHandler=eO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...e),this._logHandler(this,jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...e),this._logHandler(this,jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jt.INFO,...e),this._logHandler(this,jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jt.WARN,...e),this._logHandler(this,jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...e),this._logHandler(this,jt.ERROR,...e)}}const tO=(t,e)=>e.some(r=>t instanceof r);let __,b_;function rO(){return __||(__=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nO(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qw=new WeakMap,Cv=new WeakMap,Jw=new WeakMap,Rm=new WeakMap,nx=new WeakMap;function sO(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(ro(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&Qw.set(r,t)}).catch(()=>{}),nx.set(e,t),e}function aO(t){if(Cv.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Cv.set(t,e)}let kv={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ro(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iO(t){kv=t(kv)}function oO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Fm(this),e,...r);return Jw.set(n,e.sort?e.sort():[e]),ro(n)}:nO().includes(t)?function(...e){return t.apply(Fm(this),e),ro(Qw.get(this))}:function(...e){return ro(t.apply(Fm(this),e))}}function lO(t){return typeof t=="function"?oO(t):(t instanceof IDBTransaction&&aO(t),tO(t,rO())?new Proxy(t,kv):t)}function ro(t){if(t instanceof IDBRequest)return sO(t);if(Rm.has(t))return Rm.get(t);const e=lO(t);return e!==t&&(Rm.set(t,e),nx.set(e,t)),e}const Fm=t=>nx.get(t);function cO(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ro(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ro(a.result),l.oldVersion,l.newVersion,ro(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const uO=["get","getKey","getAll","getAllKeys","count"],dO=["put","add","delete","clear"],Om=new Map;function S_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=dO.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||uO.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return Om.set(e,i),i}iO(t=>({...t,get:(e,r,n)=>S_(e,r)||t.get(e,r,n),has:(e,r)=>!!S_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(hO(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function hO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dv="@firebase/app",T_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new rx("@firebase/app"),pO="@firebase/app-compat",mO="@firebase/analytics-compat",gO="@firebase/analytics",vO="@firebase/app-check-compat",xO="@firebase/app-check",yO="@firebase/auth",EO="@firebase/auth-compat",_O="@firebase/database",bO="@firebase/data-connect",SO="@firebase/database-compat",TO="@firebase/functions",AO="@firebase/functions-compat",wO="@firebase/installations",IO="@firebase/installations-compat",CO="@firebase/messaging",kO="@firebase/messaging-compat",DO="@firebase/performance",PO="@firebase/performance-compat",RO="@firebase/remote-config",FO="@firebase/remote-config-compat",OO="@firebase/storage",NO="@firebase/storage-compat",MO="@firebase/firestore",BO="@firebase/vertexai-preview",LO="@firebase/firestore-compat",UO="firebase",VO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="[DEFAULT]",$O={[Dv]:"fire-core",[pO]:"fire-core-compat",[gO]:"fire-analytics",[mO]:"fire-analytics-compat",[xO]:"fire-app-check",[vO]:"fire-app-check-compat",[yO]:"fire-auth",[EO]:"fire-auth-compat",[_O]:"fire-rtdb",[bO]:"fire-data-connect",[SO]:"fire-rtdb-compat",[TO]:"fire-fn",[AO]:"fire-fn-compat",[wO]:"fire-iid",[IO]:"fire-iid-compat",[CO]:"fire-fcm",[kO]:"fire-fcm-compat",[DO]:"fire-perf",[PO]:"fire-perf-compat",[RO]:"fire-rc",[FO]:"fire-rc-compat",[OO]:"fire-gcs",[NO]:"fire-gcs-compat",[MO]:"fire-fst",[LO]:"fire-fst-compat",[BO]:"fire-vertex","fire-js":"fire-js",[UO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,jO=new Map,Rv=new Map;function A_(t,e){try{t.container.addComponent(e)}catch(r){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function uo(t){const e=t.name;if(Rv.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;Rv.set(e,t);for(const r of Sh.values())A_(r,t);for(const r of jO.values())A_(r,t);return!0}function hf(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Aa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new df("app","Firebase",HO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=VO;function Zw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Pv,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw no.create("bad-app-name",{appName:String(s)});if(r||(r=Ww()),!r)throw no.create("no-options");const i=Sh.get(s);if(i){if(bh(r,i.options)&&bh(n,i.config))return i;throw no.create("duplicate-app",{appName:s})}const a=new Y8(s);for(const l of Rv.values())a.addComponent(l);const o=new GO(r,n,a);return Sh.set(s,o),o}function pf(t=Pv){const e=Sh.get(t);if(!e&&t===Pv&&Ww())return Zw();if(!e)throw no.create("no-app",{appName:t});return e}function $s(t,e,r){var n;let s=(n=$O[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(o.join(" "));return}uo(new fi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="firebase-heartbeat-database",WO=1,Nd="firebase-heartbeat-store";let Nm=null;function eI(){return Nm||(Nm=cO(zO,WO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nd)}catch(r){console.warn(r)}}}}).catch(t=>{throw no.create("idb-open",{originalErrorMessage:t.message})})),Nm}async function KO(t){try{const r=(await eI()).transaction(Nd),n=await r.objectStore(Nd).get(tI(t));return await r.done,n}catch(e){if(e instanceof ha)hi.warn(e.message);else{const r=no.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(r.message)}}}async function w_(t,e){try{const n=(await eI()).transaction(Nd,"readwrite");await n.objectStore(Nd).put(e,tI(t)),await n.done}catch(r){if(r instanceof ha)hi.warn(r.message);else{const n=no.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});hi.warn(n.message)}}}function tI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=1024,XO=30*24*60*60*1e3;class YO{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new JO(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=I_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=XO}),this._storage.overwrite(this._heartbeatsCache))}catch(n){hi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=I_(),{heartbeatsToSend:n,unsentEntries:s}=QO(this._heartbeatsCache.heartbeats),i=_h(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return hi.warn(r),""}}}function I_(){return new Date().toISOString().substring(0,10)}function QO(t,e=qO){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),C_(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),C_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class JO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?U8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await KO(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return w_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return w_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function C_(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){uo(new fi("platform-logger",e=>new fO(e),"PRIVATE")),uo(new fi("heartbeat",e=>new YO(e),"PRIVATE")),$s(Dv,T_,t),$s(Dv,T_,"esm2017"),$s("fire-js","")}ZO("");function sx(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function rI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eN=rI,nI=new df("auth","Firebase",rI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new rx("@firebase/auth");function tN(t,...e){Th.logLevel<=jt.WARN&&Th.warn(`Auth (${El}): ${t}`,...e)}function U0(t,...e){Th.logLevel<=jt.ERROR&&Th.error(`Auth (${El}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,...e){throw ix(t,...e)}function la(t,...e){return ix(t,...e)}function ax(t,e,r){const n=Object.assign(Object.assign({},eN()),{[e]:r});return new df("auth","Firebase",n).create(e,{appName:t.name})}function so(t){return ax(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rN(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Oa(t,"argument-error"),ax(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ix(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return nI.create(t,...e)}function It(t,e,...r){if(!t)throw ix(e,...r)}function Za(t){const e="INTERNAL ASSERTION FAILED: "+t;throw U0(e),new Error(e)}function pi(t,e){t||Za(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nN(){return k_()==="http:"||k_()==="https:"}function k_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nN()||M8()||"connection"in navigator)?navigator.onLine:!0}function aN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,r){this.shortDelay=e,this.longDelay=r,pi(r>e,"Short delay should be less than long delay!"),this.isMobile=F8()||B8()}get(){return sN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e){pi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new mf(3e4,6e4);function Pp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Jc(t,e,r,n,s={}){return aI(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=ff(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return N8()||(c.referrerPolicy="no-referrer"),sI.fetch()(oI(t,t.config.apiHost,r,o),c)})}async function aI(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},iN),e);try{const s=new lN(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw o0(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw o0(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw o0(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw o0(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ax(t,u,c);Oa(t,u)}}catch(s){if(s instanceof ha)throw s;Oa(t,"network-request-failed",{message:String(s)})}}async function iI(t,e,r,n,s={}){const i=await Jc(t,e,r,n,s);return"mfaPendingCredential"in i&&Oa(t,"multi-factor-auth-required",{_serverResponse:i}),i}function oI(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?ox(t.config,s):`${t.config.apiScheme}://${s}`}class lN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(la(this.auth,"network-request-failed")),oN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function o0(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=la(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e){return Jc(t,"POST","/v1/accounts:delete",e)}async function lI(t,e){return Jc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uN(t,e=!1){const r=or(t),n=await r.getIdToken(e),s=lx(n);It(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:ad(Mm(s.auth_time)),issuedAtTime:ad(Mm(s.iat)),expirationTime:ad(Mm(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function lx(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return U0("JWT malformed, contained fewer than 3 sections"),null;try{const s=Gw(r);return s?JSON.parse(s):(U0("Failed to decode base64 JWT payload"),null)}catch(s){return U0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function D_(t){const e=lx(t);return It(e,"internal-error"),It(typeof e.exp<"u","internal-error"),It(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ha&&dN(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function dN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Md(t,lI(r,{idToken:n}));It(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?cI(i.providerUserInfo):[],o=pN(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ov(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function hN(t){const e=or(t);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pN(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function cI(t){return t.map(e=>{var{providerId:r}=e,n=sx(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e){const r=await aI(t,{},async()=>{const n=ff({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=oI(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",sI.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function gN(t,e){return Jc(t,"POST","/v2/accounts:revokeToken",Pp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){It(e.idToken,"internal-error"),It(typeof e.idToken<"u","internal-error"),It(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){It(e.length!==0,"internal-error");const r=D_(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await mN(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Ec;return n&&(It(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(It(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(It(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ec,this.toJSON())}_performRefresh(){return Za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,e){It(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ei{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=sx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ov(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Md(this,this.stsTokenManager.getToken(this.auth,e));return It(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return uN(this,e)}reload(){return hN(this)}_assign(e){this!==e&&(It(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Ah(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Aa(this.auth.app))return Promise.reject(so(this.auth));const e=await this.getIdToken();return await Md(this,cN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,h=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,p=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(o=r.tenantId)!==null&&o!==void 0?o:void 0,g=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,y=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:I,isAnonymous:P,providerData:D,stsTokenManager:A}=r;It(E&&A,e,"internal-error");const _=Ec.fromJSON(this.name,A);It(typeof E=="string",e,"internal-error"),Ci(d,e.name),Ci(f,e.name),It(typeof I=="boolean",e,"internal-error"),It(typeof P=="boolean",e,"internal-error"),Ci(h,e.name),Ci(p,e.name),Ci(v,e.name),Ci(g,e.name),Ci(x,e.name),Ci(y,e.name);const b=new ei({uid:E,auth:e,email:f,emailVerified:I,displayName:d,isAnonymous:P,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:_,createdAt:x,lastLoginAt:y});return D&&Array.isArray(D)&&(b.providerData=D.map(w=>Object.assign({},w))),g&&(b._redirectEventId=g),b}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ec;s.updateFromServerResponse(r);const i=new ei({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Ah(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];It(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?cI(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new Ec;o.updateFromIdToken(n);const l=new ei({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ov(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new Map;function ti(t){pi(t instanceof Function,"Expected a class definition");let e=P_.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,P_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}uI.type="NONE";const R_=uI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t,e,r){return`firebase:${t}:${e}:${r}`}class _c{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=V0(this.userKey,s.apiKey,i),this.fullPersistenceKey=V0("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ei._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new _c(ti(R_),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ti(R_);const a=V0(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const d=ei._fromJSON(e,u);c!==i&&(o=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new _c(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new _c(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gI(e))return"Blackberry";if(vI(e))return"Webos";if(fI(e))return"Safari";if((e.includes("chrome/")||hI(e))&&!e.includes("edge/"))return"Chrome";if(mI(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function dI(t=un()){return/firefox\//i.test(t)}function fI(t=un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hI(t=un()){return/crios\//i.test(t)}function pI(t=un()){return/iemobile/i.test(t)}function mI(t=un()){return/android/i.test(t)}function gI(t=un()){return/blackberry/i.test(t)}function vI(t=un()){return/webos/i.test(t)}function cx(t=un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vN(t=un()){var e;return cx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xN(){return L8()&&document.documentMode===10}function xI(t=un()){return cx(t)||mI(t)||vI(t)||gI(t)||/windows phone/i.test(t)||pI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e=[]){let r;switch(t){case"Browser":r=F_(un());break;case"Worker":r=`${F_(un())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${El}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e={}){return Jc(t,"GET","/v2/passwordPolicy",Pp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=6;class bN{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:_N,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O_(this),this.idTokenSubscription=new O_(this),this.beforeStateQueue=new yN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ti(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await _c.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await lI(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Aa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Aa(this.app))return Promise.reject(so(this));const r=e?or(e):null;return r&&It(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&It(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Aa(this.app)?Promise.reject(so(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Aa(this.app)?Promise.reject(so(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EN(this),r=new bN(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new df("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await gN(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ti(e)||this._popupRedirectResolver;It(r,this,"argument-error"),this.redirectPersistenceManager=await _c.create(this,[ti(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&tN(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function gf(t){return or(t)}class O_{constructor(e){this.auth=e,this.observer=null,this.addObserver=G8(r=>this.observer=r)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ux={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TN(t){ux=t}function AN(t){return ux.loadJS(t)}function wN(){return ux.gapiScript}function IN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){const r=hf(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(bh(i,e??{}))return s;Oa(s,"already-initialized")}return r.initialize({options:e})}function kN(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function DN(t,e,r){const n=gf(t);It(n._canInitEmulator,n,"emulator-config-failed"),It(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=EI(e),{host:a,port:o}=PN(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),RN()}function EI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PN(t){const e=EI(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:N_(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:N_(a)}}}function N_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RN(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Za("not implemented")}_getIdTokenResponse(e){return Za("not implemented")}_linkToIdToken(e,r){return Za("not implemented")}_getReauthenticationResolver(e){return Za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t,e){return iI(t,"POST","/v1/accounts:signInWithIdp",Pp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="http://localhost";class rl extends _I{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Oa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=sx(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new rl(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return bc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,bc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,bc(e,r)}buildRequest(){const e={requestUri:FN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ff(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends dx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends vf{constructor(){super("facebook.com")}static credential(e){return rl._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends vf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return rl._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Sa.credential(r,n)}catch{return null}}}Sa.GOOGLE_SIGN_IN_METHOD="google.com";Sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends vf{constructor(){super("github.com")}static credential(e){return rl._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends vf{constructor(){super("twitter.com")}static credential(e,r){return rl._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Gi.credential(r,n)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){return iI(t,"POST","/v1/accounts:signUp",Pp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await ei._fromIdTokenResponse(e,n,s),a=M_(n);return new fo({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=M_(n);return new fo({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function M_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t){var e;if(Aa(t.app))return Promise.reject(so(t));const r=gf(t);if(await r._initializationPromise,!((e=r.currentUser)===null||e===void 0)&&e.isAnonymous)return new fo({user:r.currentUser,providerId:null,operationType:"signIn"});const n=await ON(r,{returnSecureToken:!0}),s=await fo._fromIdTokenResponse(r,"signIn",n,!0);return await r._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends ha{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new wh(e,r,n,s)}}function bI(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(t,i,e,n):i})}async function MN(t,e,r=!1){const n=await Md(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return fo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e,r=!1){const{auth:n}=t;if(Aa(n.app))return Promise.reject(so(n));const s="reauthenticate";try{const i=await Md(t,bI(n,s,e,t),r);It(i.idToken,n,"internal-error");const a=lx(i.idToken);It(a,n,"internal-error");const{sub:o}=a;return It(t.uid===o,n,"user-mismatch"),fo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Oa(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LN(t,e,r=!1){if(Aa(t.app))return Promise.reject(so(t));const n="signIn",s=await bI(t,n,e),i=await fo._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function UN(t,e,r,n){return or(t).onIdTokenChanged(e,r,n)}function VN(t,e,r){return or(t).beforeAuthStateChanged(e,r)}function fx(t,e,r,n){return or(t).onAuthStateChanged(e,r,n)}function $N(t){return or(t).signOut()}const Ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Ih,"1"),this.storage.removeItem(Ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=1e3,HN=10;class TI extends SI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);xN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HN):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},jN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}TI.type="LOCAL";const GN=TI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends SI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}AI.type="SESSION";const wI=AI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Rp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await zN(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=hx("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return window}function KN(t){Da().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function qN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YN(){return II()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebaseLocalStorageDb",QN=1,Ch="firebaseLocalStorage",kI="fbase_key";class xf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Fp(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function JN(){const t=indexedDB.deleteDatabase(CI);return new xf(t).toPromise()}function Nv(){const t=indexedDB.open(CI,QN);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ch,{keyPath:kI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ch)?e(n):(n.close(),await JN(),e(await Nv()))})})}async function B_(t,e,r){const n=Fp(t,!0).put({[kI]:e,value:r});return new xf(n).toPromise()}async function ZN(t,e){const r=Fp(t,!1).get(e),n=await new xf(r).toPromise();return n===void 0?null:n.value}function L_(t,e){const r=Fp(t,!0).delete(e);return new xf(r).toPromise()}const e6=800,t6=3;class DI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>t6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return II()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rp._getInstance(YN()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await qN(),!this.activeServiceWorker)return;this.sender=new WN(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nv();return await B_(e,Ih,"1"),await L_(e,Ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>B_(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>ZN(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>L_(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fp(s,!1).getAll();return new xf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DI.type="LOCAL";const r6=DI;new mf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){return e?ti(e):(It(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends _I{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return bc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return bc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function n6(t){return LN(t.auth,new px(t),t.bypassAuthState)}function s6(t){const{auth:e,user:r}=t;return It(r,e,"internal-error"),BN(r,new px(t),t.bypassAuthState)}async function a6(t){const{auth:e,user:r}=t;return It(r,e,"internal-error"),MN(r,new px(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n6;case"linkViaPopup":case"linkViaRedirect":return a6;case"reauthViaPopup":case"reauthViaRedirect":return s6;default:Oa(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new mf(2e3,1e4);async function FI(t,e,r){if(Aa(t.app))return Promise.reject(la(t,"operation-not-supported-in-this-environment"));const n=gf(t);rN(t,e,dx);const s=PI(n,r);return new jo(n,"signInViaPopup",e,s).executeNotNull()}class jo extends RI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return It(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=hx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(la(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(la(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(la(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i6.get())};e()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="pendingRedirect",$0=new Map;class l6 extends RI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=$0.get(this.auth._key());if(!e){try{const n=await c6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}$0.set(this.auth._key(),e)}return this.bypassAuthState||$0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function c6(t,e){const r=f6(e),n=d6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function u6(t,e){$0.set(t._key(),e)}function d6(t){return ti(t._redirectPersistence)}function f6(t){return V0(o6,t.config.apiKey,t.name)}async function h6(t,e,r=!1){if(Aa(t.app))return Promise.reject(so(t));const n=gf(t),s=PI(n,e),a=await new l6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=10*60*1e3;class m6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!OI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(la(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p6&&this.cachedEventUids.clear(),this.cachedEventUids.has(U_(e))}saveEventToCache(e){this.cachedEventUids.add(U_(e)),this.lastProcessedEventTime=Date.now()}}function U_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function OI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function g6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e={}){return Jc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y6=/^https?/;async function E6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await v6(t);for(const r of e)try{if(_6(r))return}catch{}Oa(t,"unauthorized-domain")}function _6(t){const e=Fv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!y6.test(r))return!1;if(x6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new mf(3e4,6e4);function V_(){const t=Da().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function S6(t){return new Promise((e,r)=>{var n,s,i;function a(){V_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V_(),r(la(t,"network-request-failed"))},timeout:b6.get()})}if(!((s=(n=Da().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Da().gapi)===null||i===void 0)&&i.load)a();else{const o=IN("iframefcb");return Da()[o]=()=>{gapi.load?a():r(la(t,"network-request-failed"))},AN(`${wN()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw j0=null,e})}let j0=null;function T6(t){return j0=j0||S6(t),j0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new mf(5e3,15e3),w6="__/auth/iframe",I6="emulator/auth/iframe",C6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D6(t){const e=t.config;It(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?ox(e,I6):`https://${t.config.authDomain}/${w6}`,n={apiKey:e.apiKey,appName:t.name,v:El},s=k6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${ff(n).slice(1)}`}async function P6(t){const e=await T6(t),r=Da().gapi;return It(r,t,"internal-error"),e.open({where:document.body,url:D6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=la(t,"network-request-failed"),o=Da().setTimeout(()=>{i(a)},A6.get());function l(){Da().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F6=500,O6=600,N6="_blank",M6="http://localhost";class $_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B6(t,e,r,n=F6,s=O6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},R6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=un().toLowerCase();r&&(o=hI(c)?N6:r),dI(c)&&(e=e||M6,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(vN(c)&&o!=="_self")return L6(e||"",o),new $_(null);const d=window.open(e||"",o,u);It(d,t,"popup-blocked");try{d.focus()}catch{}return new $_(d)}function L6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6="__/auth/handler",V6="emulator/auth/handler",$6=encodeURIComponent("fac");async function j_(t,e,r,n,s,i){It(t.config.authDomain,t,"auth-domain-config-required"),It(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:El,eventId:s};if(e instanceof dx){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",H8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof vf){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${$6}=${encodeURIComponent(l)}`:"";return`${j6(t)}?${ff(o).slice(1)}${c}`}function j6({config:t}){return t.emulator?ox(t,V6):`https://${t.authDomain}/${U6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class H6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wI,this._completeRedirectFn=h6,this._overrideRedirectResult=u6}async _openPopup(e,r,n,s){var i;pi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await j_(e,r,n,Fv(),s);return B6(e,a,hx())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await j_(e,r,n,Fv(),s);return KN(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(pi(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await P6(e),n=new m6(e);return r.register("authEvent",s=>(It(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Bm,{type:Bm},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bm];a!==void 0&&r(!!a),Oa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=E6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return xI()||fI()||cx()}}const G6=H6;var H_="@firebase/auth",G_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K6(t){uo(new fi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;It(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yI(t)},c=new SN(n,s,i,l);return kN(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),uo(new fi("auth-internal",e=>{const r=gf(e.getProvider("auth").getImmediate());return(n=>new z6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(H_,G_,W6(t)),$s(H_,G_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=5*60,X6=Kw("authIdTokenMaxAge")||q6;let z_=null;const Y6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>X6)return;const s=r==null?void 0:r.token;z_!==s&&(z_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Bd(t=pf()){const e=hf(t,"auth");if(e.isInitialized())return e.getImmediate();const r=CN(t,{popupRedirectResolver:G6,persistence:[r6,GN,wI]}),n=Kw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Y6(i.toString());VN(r,a,()=>a(r.currentUser)),UN(r,o=>a(o))}}const s=zw("auth");return s&&DN(r,`http://${s}`),r}function Q6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TN({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=la("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",Q6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K6("Browser");var W_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qo,NI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,_){function b(){}b.prototype=_.prototype,A.D=_.prototype,A.prototype=new b,A.prototype.constructor=A,A.C=function(w,C,T){for(var k=Array(arguments.length-2),N=2;N<arguments.length;N++)k[N-2]=arguments[N];return _.prototype[C].apply(w,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,_,b){b||(b=0);var w=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)w[C]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(C=0;16>C;++C)w[C]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=A.g[0],b=A.g[1],C=A.g[2];var T=A.g[3],k=_+(T^b&(C^T))+w[0]+3614090360&4294967295;_=b+(k<<7&4294967295|k>>>25),k=T+(C^_&(b^C))+w[1]+3905402710&4294967295,T=_+(k<<12&4294967295|k>>>20),k=C+(b^T&(_^b))+w[2]+606105819&4294967295,C=T+(k<<17&4294967295|k>>>15),k=b+(_^C&(T^_))+w[3]+3250441966&4294967295,b=C+(k<<22&4294967295|k>>>10),k=_+(T^b&(C^T))+w[4]+4118548399&4294967295,_=b+(k<<7&4294967295|k>>>25),k=T+(C^_&(b^C))+w[5]+1200080426&4294967295,T=_+(k<<12&4294967295|k>>>20),k=C+(b^T&(_^b))+w[6]+2821735955&4294967295,C=T+(k<<17&4294967295|k>>>15),k=b+(_^C&(T^_))+w[7]+4249261313&4294967295,b=C+(k<<22&4294967295|k>>>10),k=_+(T^b&(C^T))+w[8]+1770035416&4294967295,_=b+(k<<7&4294967295|k>>>25),k=T+(C^_&(b^C))+w[9]+2336552879&4294967295,T=_+(k<<12&4294967295|k>>>20),k=C+(b^T&(_^b))+w[10]+4294925233&4294967295,C=T+(k<<17&4294967295|k>>>15),k=b+(_^C&(T^_))+w[11]+2304563134&4294967295,b=C+(k<<22&4294967295|k>>>10),k=_+(T^b&(C^T))+w[12]+1804603682&4294967295,_=b+(k<<7&4294967295|k>>>25),k=T+(C^_&(b^C))+w[13]+4254626195&4294967295,T=_+(k<<12&4294967295|k>>>20),k=C+(b^T&(_^b))+w[14]+2792965006&4294967295,C=T+(k<<17&4294967295|k>>>15),k=b+(_^C&(T^_))+w[15]+1236535329&4294967295,b=C+(k<<22&4294967295|k>>>10),k=_+(C^T&(b^C))+w[1]+4129170786&4294967295,_=b+(k<<5&4294967295|k>>>27),k=T+(b^C&(_^b))+w[6]+3225465664&4294967295,T=_+(k<<9&4294967295|k>>>23),k=C+(_^b&(T^_))+w[11]+643717713&4294967295,C=T+(k<<14&4294967295|k>>>18),k=b+(T^_&(C^T))+w[0]+3921069994&4294967295,b=C+(k<<20&4294967295|k>>>12),k=_+(C^T&(b^C))+w[5]+3593408605&4294967295,_=b+(k<<5&4294967295|k>>>27),k=T+(b^C&(_^b))+w[10]+38016083&4294967295,T=_+(k<<9&4294967295|k>>>23),k=C+(_^b&(T^_))+w[15]+3634488961&4294967295,C=T+(k<<14&4294967295|k>>>18),k=b+(T^_&(C^T))+w[4]+3889429448&4294967295,b=C+(k<<20&4294967295|k>>>12),k=_+(C^T&(b^C))+w[9]+568446438&4294967295,_=b+(k<<5&4294967295|k>>>27),k=T+(b^C&(_^b))+w[14]+3275163606&4294967295,T=_+(k<<9&4294967295|k>>>23),k=C+(_^b&(T^_))+w[3]+4107603335&4294967295,C=T+(k<<14&4294967295|k>>>18),k=b+(T^_&(C^T))+w[8]+1163531501&4294967295,b=C+(k<<20&4294967295|k>>>12),k=_+(C^T&(b^C))+w[13]+2850285829&4294967295,_=b+(k<<5&4294967295|k>>>27),k=T+(b^C&(_^b))+w[2]+4243563512&4294967295,T=_+(k<<9&4294967295|k>>>23),k=C+(_^b&(T^_))+w[7]+1735328473&4294967295,C=T+(k<<14&4294967295|k>>>18),k=b+(T^_&(C^T))+w[12]+2368359562&4294967295,b=C+(k<<20&4294967295|k>>>12),k=_+(b^C^T)+w[5]+4294588738&4294967295,_=b+(k<<4&4294967295|k>>>28),k=T+(_^b^C)+w[8]+2272392833&4294967295,T=_+(k<<11&4294967295|k>>>21),k=C+(T^_^b)+w[11]+1839030562&4294967295,C=T+(k<<16&4294967295|k>>>16),k=b+(C^T^_)+w[14]+4259657740&4294967295,b=C+(k<<23&4294967295|k>>>9),k=_+(b^C^T)+w[1]+2763975236&4294967295,_=b+(k<<4&4294967295|k>>>28),k=T+(_^b^C)+w[4]+1272893353&4294967295,T=_+(k<<11&4294967295|k>>>21),k=C+(T^_^b)+w[7]+4139469664&4294967295,C=T+(k<<16&4294967295|k>>>16),k=b+(C^T^_)+w[10]+3200236656&4294967295,b=C+(k<<23&4294967295|k>>>9),k=_+(b^C^T)+w[13]+681279174&4294967295,_=b+(k<<4&4294967295|k>>>28),k=T+(_^b^C)+w[0]+3936430074&4294967295,T=_+(k<<11&4294967295|k>>>21),k=C+(T^_^b)+w[3]+3572445317&4294967295,C=T+(k<<16&4294967295|k>>>16),k=b+(C^T^_)+w[6]+76029189&4294967295,b=C+(k<<23&4294967295|k>>>9),k=_+(b^C^T)+w[9]+3654602809&4294967295,_=b+(k<<4&4294967295|k>>>28),k=T+(_^b^C)+w[12]+3873151461&4294967295,T=_+(k<<11&4294967295|k>>>21),k=C+(T^_^b)+w[15]+530742520&4294967295,C=T+(k<<16&4294967295|k>>>16),k=b+(C^T^_)+w[2]+3299628645&4294967295,b=C+(k<<23&4294967295|k>>>9),k=_+(C^(b|~T))+w[0]+4096336452&4294967295,_=b+(k<<6&4294967295|k>>>26),k=T+(b^(_|~C))+w[7]+1126891415&4294967295,T=_+(k<<10&4294967295|k>>>22),k=C+(_^(T|~b))+w[14]+2878612391&4294967295,C=T+(k<<15&4294967295|k>>>17),k=b+(T^(C|~_))+w[5]+4237533241&4294967295,b=C+(k<<21&4294967295|k>>>11),k=_+(C^(b|~T))+w[12]+1700485571&4294967295,_=b+(k<<6&4294967295|k>>>26),k=T+(b^(_|~C))+w[3]+2399980690&4294967295,T=_+(k<<10&4294967295|k>>>22),k=C+(_^(T|~b))+w[10]+4293915773&4294967295,C=T+(k<<15&4294967295|k>>>17),k=b+(T^(C|~_))+w[1]+2240044497&4294967295,b=C+(k<<21&4294967295|k>>>11),k=_+(C^(b|~T))+w[8]+1873313359&4294967295,_=b+(k<<6&4294967295|k>>>26),k=T+(b^(_|~C))+w[15]+4264355552&4294967295,T=_+(k<<10&4294967295|k>>>22),k=C+(_^(T|~b))+w[6]+2734768916&4294967295,C=T+(k<<15&4294967295|k>>>17),k=b+(T^(C|~_))+w[13]+1309151649&4294967295,b=C+(k<<21&4294967295|k>>>11),k=_+(C^(b|~T))+w[4]+4149444226&4294967295,_=b+(k<<6&4294967295|k>>>26),k=T+(b^(_|~C))+w[11]+3174756917&4294967295,T=_+(k<<10&4294967295|k>>>22),k=C+(_^(T|~b))+w[2]+718787259&4294967295,C=T+(k<<15&4294967295|k>>>17),k=b+(T^(C|~_))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+C&4294967295,A.g[3]=A.g[3]+T&4294967295}n.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var b=_-this.blockSize,w=this.B,C=this.h,T=0;T<_;){if(C==0)for(;T<=b;)s(this,A,T),T+=this.blockSize;if(typeof A=="string"){for(;T<_;)if(w[C++]=A.charCodeAt(T++),C==this.blockSize){s(this,w),C=0;break}}else for(;T<_;)if(w[C++]=A[T++],C==this.blockSize){s(this,w),C=0;break}}this.h=C,this.o+=_},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var b=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=b&255,b/=256;for(this.u(A),A=Array(16),_=b=0;4>_;++_)for(var w=0;32>w;w+=8)A[b++]=this.g[_]>>>w&255;return A};function i(A,_){var b=o;return Object.prototype.hasOwnProperty.call(b,A)?b[A]:b[A]=_(A)}function a(A,_){this.h=_;for(var b=[],w=!0,C=A.length-1;0<=C;C--){var T=A[C]|0;w&&T==_||(b[C]=T,w=!1)}this.g=b}var o={};function l(A){return-128<=A&&128>A?i(A,function(_){return new a([_|0],0>_?-1:0)}):new a([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return g(c(-A));for(var _=[],b=1,w=0;A>=b;w++)_[w]=A/b|0,b*=4294967296;return new a(_,0)}function u(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return g(u(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(_,8)),w=d,C=0;C<A.length;C+=8){var T=Math.min(8,A.length-C),k=parseInt(A.substring(C,C+T),_);8>T?(T=c(Math.pow(_,T)),w=w.j(T).add(c(k))):(w=w.j(b),w=w.add(c(k)))}return w}var d=l(0),f=l(1),h=l(16777216);t=a.prototype,t.m=function(){if(v(this))return-g(this).m();for(var A=0,_=1,b=0;b<this.g.length;b++){var w=this.i(b);A+=(0<=w?w:4294967296+w)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(p(this))return"0";if(v(this))return"-"+g(this).toString(A);for(var _=c(Math.pow(A,6)),b=this,w="";;){var C=I(b,_).g;b=x(b,C.j(_));var T=((0<b.g.length?b.g[0]:b.h)>>>0).toString(A);if(b=C,p(b))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function p(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function v(A){return A.h==-1}t.l=function(A){return A=x(this,A),v(A)?-1:p(A)?0:1};function g(A){for(var _=A.g.length,b=[],w=0;w<_;w++)b[w]=~A.g[w];return new a(b,~A.h).add(f)}t.abs=function(){return v(this)?g(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),b=[],w=0,C=0;C<=_;C++){var T=w+(this.i(C)&65535)+(A.i(C)&65535),k=(T>>>16)+(this.i(C)>>>16)+(A.i(C)>>>16);w=k>>>16,T&=65535,k&=65535,b[C]=k<<16|T}return new a(b,b[b.length-1]&-2147483648?-1:0)};function x(A,_){return A.add(g(_))}t.j=function(A){if(p(this)||p(A))return d;if(v(this))return v(A)?g(this).j(g(A)):g(g(this).j(A));if(v(A))return g(this.j(g(A)));if(0>this.l(h)&&0>A.l(h))return c(this.m()*A.m());for(var _=this.g.length+A.g.length,b=[],w=0;w<2*_;w++)b[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<A.g.length;C++){var T=this.i(w)>>>16,k=this.i(w)&65535,N=A.i(C)>>>16,B=A.i(C)&65535;b[2*w+2*C]+=k*B,y(b,2*w+2*C),b[2*w+2*C+1]+=T*B,y(b,2*w+2*C+1),b[2*w+2*C+1]+=k*N,y(b,2*w+2*C+1),b[2*w+2*C+2]+=T*N,y(b,2*w+2*C+2)}for(w=0;w<_;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=_;w<2*_;w++)b[w]=0;return new a(b,0)};function y(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function E(A,_){this.g=A,this.h=_}function I(A,_){if(p(_))throw Error("division by zero");if(p(A))return new E(d,d);if(v(A))return _=I(g(A),_),new E(g(_.g),g(_.h));if(v(_))return _=I(A,g(_)),new E(g(_.g),_.h);if(30<A.g.length){if(v(A)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var b=f,w=_;0>=w.l(A);)b=P(b),w=P(w);var C=D(b,1),T=D(w,1);for(w=D(w,2),b=D(b,2);!p(w);){var k=T.add(w);0>=k.l(A)&&(C=C.add(b),T=k),w=D(w,1),b=D(b,1)}return _=x(A,C.j(_)),new E(C,_)}for(C=d;0<=A.l(_);){for(b=Math.max(1,Math.floor(A.m()/_.m())),w=Math.ceil(Math.log(b)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=c(b),k=T.j(_);v(k)||0<k.l(A);)b-=w,T=c(b),k=T.j(_);p(T)&&(T=f),C=C.add(T),A=x(A,k)}return new E(C,A)}t.A=function(A){return I(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)&A.i(w);return new a(b,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)|A.i(w);return new a(b,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)^A.i(w);return new a(b,this.h^A.h)};function P(A){for(var _=A.g.length+1,b=[],w=0;w<_;w++)b[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(b,A.h)}function D(A,_){var b=_>>5;_%=32;for(var w=A.g.length-b,C=[],T=0;T<w;T++)C[T]=0<_?A.i(T+b)>>>_|A.i(T+b+1)<<32-_:A.i(T+b);return new a(C,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,NI=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,qo=a}).apply(typeof W_<"u"?W_:typeof self<"u"?self:typeof window<"u"?window:{});var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MI,Bu,BI,H0,Mv,LI,UI,VI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,F,G){return S==Array.prototype||S==Object.prototype||(S[F]=G.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof l0=="object"&&l0];for(var F=0;F<S.length;++F){var G=S[F];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var n=r(this);function s(S,F){if(F)e:{var G=n;S=S.split(".");for(var ne=0;ne<S.length-1;ne++){var Ae=S[ne];if(!(Ae in G))break e;G=G[Ae]}S=S[S.length-1],ne=G[S],F=F(ne),F!=ne&&F!=null&&e(G,S,{configurable:!0,writable:!0,value:F})}}function i(S,F){S instanceof String&&(S+="");var G=0,ne=!1,Ae={next:function(){if(!ne&&G<S.length){var Me=G++;return{value:F(Me,S[Me]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Ae[Symbol.iterator]=function(){return Ae},Ae}s("Array.prototype.values",function(S){return S||function(){return i(this,function(F,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(S){var F=typeof S;return F=F!="object"?F:S?Array.isArray(S)?"array":F:"null",F=="array"||F=="object"&&typeof S.length=="number"}function c(S){var F=typeof S;return F=="object"&&S!=null||F=="function"}function u(S,F,G){return S.call.apply(S.bind,arguments)}function d(S,F,G){if(!S)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var Ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ae,ne),S.apply(F,Ae)}}return function(){return S.apply(F,arguments)}}function f(S,F,G){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(S,F){var G=Array.prototype.slice.call(arguments,1);return function(){var ne=G.slice();return ne.push.apply(ne,arguments),S.apply(this,ne)}}function p(S,F){function G(){}G.prototype=F.prototype,S.aa=F.prototype,S.prototype=new G,S.prototype.constructor=S,S.Qb=function(ne,Ae,Me){for(var Ze=Array(arguments.length-2),dr=2;dr<arguments.length;dr++)Ze[dr-2]=arguments[dr];return F.prototype[Ae].apply(ne,Ze)}}function v(S){const F=S.length;if(0<F){const G=Array(F);for(let ne=0;ne<F;ne++)G[ne]=S[ne];return G}return[]}function g(S,F){for(let G=1;G<arguments.length;G++){const ne=arguments[G];if(l(ne)){const Ae=S.length||0,Me=ne.length||0;S.length=Ae+Me;for(let Ze=0;Ze<Me;Ze++)S[Ae+Ze]=ne[Ze]}else S.push(ne)}}class x{constructor(F,G){this.i=F,this.j=G,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function y(S){return/^[\s\xa0]*$/.test(S)}function E(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function I(S){return I[" "](S),S}I[" "]=function(){};var P=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function D(S,F,G){for(const ne in S)F.call(G,S[ne],ne,S)}function A(S,F){for(const G in S)F.call(void 0,S[G],G,S)}function _(S){const F={};for(const G in S)F[G]=S[G];return F}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(S,F){let G,ne;for(let Ae=1;Ae<arguments.length;Ae++){ne=arguments[Ae];for(G in ne)S[G]=ne[G];for(let Me=0;Me<b.length;Me++)G=b[Me],Object.prototype.hasOwnProperty.call(ne,G)&&(S[G]=ne[G])}}function C(S){var F=1;S=S.split(":");const G=[];for(;0<F&&S.length;)G.push(S.shift()),F--;return S.length&&G.push(S.join(":")),G}function T(S){o.setTimeout(()=>{throw S},0)}function k(){var S=M;let F=null;return S.g&&(F=S.g,S.g=S.g.next,S.g||(S.h=null),F.next=null),F}class N{constructor(){this.h=this.g=null}add(F,G){const ne=B.get();ne.set(F,G),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var B=new x(()=>new R,S=>S.reset());class R{constructor(){this.next=this.g=this.h=null}set(F,G){this.h=F,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let O,U=!1,M=new N,q=()=>{const S=o.Promise.resolve(void 0);O=()=>{S.then(H)}};var H=()=>{for(var S;S=k();){try{S.h.call(S.g)}catch(G){T(G)}var F=B;F.j(S),100>F.h&&(F.h++,S.next=F.g,F.g=S)}U=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(S,F){this.type=S,this.g=this.target=F,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,F=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const G=()=>{};o.addEventListener("test",G,F),o.removeEventListener("test",G,F)}catch{}return S}();function te(S,F){if(z.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var G=this.type=S.type,ne=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=F,F=S.relatedTarget){if(P){e:{try{I(F.nodeName);var Ae=!0;break e}catch{}Ae=!1}Ae||(F=null)}}else G=="mouseover"?F=S.fromElement:G=="mouseout"&&(F=S.toElement);this.relatedTarget=F,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:ge[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&te.aa.h.call(this)}}p(te,z);var ge={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),he=0;function Z(S,F,G,ne,Ae){this.listener=S,this.proxy=null,this.src=F,this.type=G,this.capture=!!ne,this.ha=Ae,this.key=++he,this.da=this.fa=!1}function Q(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function xe(S){this.src=S,this.g={},this.h=0}xe.prototype.add=function(S,F,G,ne,Ae){var Me=S.toString();S=this.g[Me],S||(S=this.g[Me]=[],this.h++);var Ze=W(S,F,ne,Ae);return-1<Ze?(F=S[Ze],G||(F.fa=!1)):(F=new Z(F,this.src,Me,!!ne,Ae),F.fa=G,S.push(F)),F};function X(S,F){var G=F.type;if(G in S.g){var ne=S.g[G],Ae=Array.prototype.indexOf.call(ne,F,void 0),Me;(Me=0<=Ae)&&Array.prototype.splice.call(ne,Ae,1),Me&&(Q(F),S.g[G].length==0&&(delete S.g[G],S.h--))}}function W(S,F,G,ne){for(var Ae=0;Ae<S.length;++Ae){var Me=S[Ae];if(!Me.da&&Me.listener==F&&Me.capture==!!G&&Me.ha==ne)return Ae}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),ee={};function ve(S,F,G,ne,Ae){if(Array.isArray(F)){for(var Me=0;Me<F.length;Me++)ve(S,F[Me],G,ne,Ae);return null}return G=$e(G),S&&S[ie]?S.K(F,G,c(ne)?!!ne.capture:!1,Ae):re(S,F,G,!1,ne,Ae)}function re(S,F,G,ne,Ae,Me){if(!F)throw Error("Invalid event type");var Ze=c(Ae)?!!Ae.capture:!!Ae,dr=ze(S);if(dr||(S[Y]=dr=new xe(S)),G=dr.add(F,G,ne,Ze,Me),G.proxy)return G;if(ne=se(),G.proxy=ne,ne.src=S,ne.listener=G,S.addEventListener)K||(Ae=Ze),Ae===void 0&&(Ae=!1),S.addEventListener(F.toString(),ne,Ae);else if(S.attachEvent)S.attachEvent(we(F.toString()),ne);else if(S.addListener&&S.removeListener)S.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return G}function se(){function S(G){return F.call(S.src,S.listener,G)}const F=Se;return S}function le(S,F,G,ne,Ae){if(Array.isArray(F))for(var Me=0;Me<F.length;Me++)le(S,F[Me],G,ne,Ae);else ne=c(ne)?!!ne.capture:!!ne,G=$e(G),S&&S[ie]?(S=S.i,F=String(F).toString(),F in S.g&&(Me=S.g[F],G=W(Me,G,ne,Ae),-1<G&&(Q(Me[G]),Array.prototype.splice.call(Me,G,1),Me.length==0&&(delete S.g[F],S.h--)))):S&&(S=ze(S))&&(F=S.g[F.toString()],S=-1,F&&(S=W(F,G,ne,Ae)),(G=-1<S?F[S]:null)&&Te(G))}function Te(S){if(typeof S!="number"&&S&&!S.da){var F=S.src;if(F&&F[ie])X(F.i,S);else{var G=S.type,ne=S.proxy;F.removeEventListener?F.removeEventListener(G,ne,S.capture):F.detachEvent?F.detachEvent(we(G),ne):F.addListener&&F.removeListener&&F.removeListener(ne),(G=ze(F))?(X(G,S),G.h==0&&(G.src=null,F[Y]=null)):Q(S)}}}function we(S){return S in ee?ee[S]:ee[S]="on"+S}function Se(S,F){if(S.da)S=!0;else{F=new te(F,this);var G=S.listener,ne=S.ha||S.src;S.fa&&Te(S),S=G.call(ne,F)}return S}function ze(S){return S=S[Y],S instanceof xe?S:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(S){return typeof S=="function"?S:(S[Ie]||(S[Ie]=function(F){return S.handleEvent(F)}),S[Ie])}function Be(){L.call(this),this.i=new xe(this),this.M=this,this.F=null}p(Be,L),Be.prototype[ie]=!0,Be.prototype.removeEventListener=function(S,F,G,ne){le(this,S,F,G,ne)};function We(S,F){var G,ne=S.F;if(ne)for(G=[];ne;ne=ne.F)G.push(ne);if(S=S.M,ne=F.type||F,typeof F=="string")F=new z(F,S);else if(F instanceof z)F.target=F.target||S;else{var Ae=F;F=new z(ne,S),w(F,Ae)}if(Ae=!0,G)for(var Me=G.length-1;0<=Me;Me--){var Ze=F.g=G[Me];Ae=Ke(Ze,ne,!0,F)&&Ae}if(Ze=F.g=S,Ae=Ke(Ze,ne,!0,F)&&Ae,Ae=Ke(Ze,ne,!1,F)&&Ae,G)for(Me=0;Me<G.length;Me++)Ze=F.g=G[Me],Ae=Ke(Ze,ne,!1,F)&&Ae}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var S=this.i,F;for(F in S.g){for(var G=S.g[F],ne=0;ne<G.length;ne++)Q(G[ne]);delete S.g[F],S.h--}}this.F=null},Be.prototype.K=function(S,F,G,ne){return this.i.add(String(S),F,!1,G,ne)},Be.prototype.L=function(S,F,G,ne){return this.i.add(String(S),F,!0,G,ne)};function Ke(S,F,G,ne){if(F=S.i.g[String(F)],!F)return!0;F=F.concat();for(var Ae=!0,Me=0;Me<F.length;++Me){var Ze=F[Me];if(Ze&&!Ze.da&&Ze.capture==G){var dr=Ze.listener,vn=Ze.ha||Ze.src;Ze.fa&&X(S.i,Ze),Ae=dr.call(vn,ne)!==!1&&Ae}}return Ae&&!ne.defaultPrevented}function Ee(S,F,G){if(typeof S=="function")G&&(S=f(S,G));else if(S&&typeof S.handleEvent=="function")S=f(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:o.setTimeout(S,F||0)}function ye(S){S.g=Ee(()=>{S.g=null,S.i&&(S.i=!1,ye(S))},S.l);const F=S.h;S.h=null,S.m.apply(null,F)}class _e extends L{constructor(F,G){super(),this.m=F,this.l=G,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Re(S){L.call(this),this.h=S,this.g={}}p(Re,L);var Ge=[];function st(S){D(S.g,function(F,G){this.g.hasOwnProperty(G)&&Te(F)},S),S.g={}}Re.prototype.N=function(){Re.aa.N.call(this),st(this)},Re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=o.JSON.stringify,yt=o.JSON.parse,Ut=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function pt(){}pt.prototype.h=null;function lt(S){return S.h||(S.h=S.i())}function mt(){}var kt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){z.call(this,"d")}p(Ot,z);function Er(){z.call(this,"c")}p(Er,z);var Kn={},Si=null;function cs(){return Si=Si||new Be}Kn.La="serverreachability";function Ol(S){z.call(this,Kn.La,S)}p(Ol,z);function ja(S){const F=cs();We(F,new Ol(F))}Kn.STAT_EVENT="statevent";function To(S,F){z.call(this,Kn.STAT_EVENT,S),this.stat=F}p(To,z);function en(S){const F=cs();We(F,new To(F,S))}Kn.Ma="timingevent";function Ao(S,F){z.call(this,Kn.Ma,S),this.size=F}p(Ao,z);function kr(S,F){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},F)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function Nl(S,F,G,ne,Ae,Me){S.info(function(){if(S.g)if(Me)for(var Ze="",dr=Me.split("&"),vn=0;vn<dr.length;vn++){var er=dr[vn].split("=");if(1<er.length){var kn=er[0];er=er[1];var Dn=kn.split("_");Ze=2<=Dn.length&&Dn[1]=="type"?Ze+(kn+"="+er+"&"):Ze+(kn+"=redacted&")}}else Ze=null;else Ze=Me;return"XMLHTTP REQ ("+ne+") [attempt "+Ae+"]: "+F+`
`+G+`
`+Ze})}function lu(S,F,G,ne,Ae,Me,Ze){S.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+Ae+"]: "+F+`
`+G+`
`+Me+" "+Ze})}function J(S,F,G,ne){S.info(function(){return"XMLHTTP TEXT ("+F+"): "+ae(S,G)+(ne?" "+ne:"")})}function ue(S,F){S.info(function(){return"TIMEOUT: "+F})}Cn.prototype.info=function(){};function ae(S,F){if(!S.g)return F;if(!F)return null;try{var G=JSON.parse(F);if(G){for(S=0;S<G.length;S++)if(Array.isArray(G[S])){var ne=G[S];if(!(2>ne.length)){var Ae=ne[1];if(Array.isArray(Ae)&&!(1>Ae.length)){var Me=Ae[0];if(Me!="noop"&&Me!="stop"&&Me!="close")for(var Ze=1;Ze<Ae.length;Ze++)Ae[Ze]=""}}}}return gt(G)}catch{return F}}var oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},de={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pe;function ke(){}p(ke,pt),ke.prototype.g=function(){return new XMLHttpRequest},ke.prototype.i=function(){return{}},pe=new ke;function Le(S,F,G,ne){this.j=S,this.i=F,this.l=G,this.R=ne||1,this.U=new Re(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}var Pe={},Fe={};function qe(S,F,G){S.L=1,S.v=jf(Ga(F)),S.m=G,S.P=!0,Je(S,null)}function Je(S,F){S.F=Date.now(),tt(S),S.A=Ga(S.v);var G=S.A,ne=S.R;Array.isArray(ne)||(ne=[String(ne)]),cE(G.i,"t",ne),S.C=0,G=S.j.J,S.h=new De,S.g=IE(S.j,G?F:null,!S.m),0<S.O&&(S.M=new _e(f(S.Y,S,S.g),S.O)),F=S.U,G=S.g,ne=S.ca;var Ae="readystatechange";Array.isArray(Ae)||(Ae&&(Ge[0]=Ae.toString()),Ae=Ge);for(var Me=0;Me<Ae.length;Me++){var Ze=ve(G,Ae[Me],ne||F.handleEvent,!1,F.h||F);if(!Ze)break;F.g[Ze.key]=Ze}F=S.H?_(S.H):{},S.m?(S.u||(S.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,F)):(S.u="GET",S.g.ea(S.A,S.u,null,F)),ja(),Nl(S.i,S.u,S.A,S.l,S.R,S.m)}Le.prototype.ca=function(S){S=S.target;const F=this.M;F&&za(S)==3?F.j():this.Y(S)},Le.prototype.Y=function(S){try{if(S==this.g)e:{const Dn=za(this.g);var F=this.g.Ba();const Ul=this.g.Z();if(!(3>Dn)&&(Dn!=3||this.g&&(this.h.h||this.g.oa()||gE(this.g)))){this.J||Dn!=4||F==7||(F==8||0>=Ul?ja(3):ja(2)),ur(this);var G=this.g.Z();this.X=G;t:if(it(this)){var ne=gE(this.g);S="";var Ae=ne.length,Me=za(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),ar(this);var Ze="";break t}this.h.i=new o.TextDecoder}for(F=0;F<Ae;F++)this.h.h=!0,S+=this.h.i.decode(ne[F],{stream:!(Me&&F==Ae-1)});ne.length=0,this.h.g+=S,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=G==200,lu(this.i,this.u,this.A,this.l,this.R,Dn,G),this.o){if(this.T&&!this.K){t:{if(this.g){var dr,vn=this.g;if((dr=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(dr)){var er=dr;break t}}er=null}if(G=er)J(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,G);else{this.o=!1,this.s=3,en(12),Sr(this),ar(this);break e}}if(this.P){G=!0;let Xs;for(;!this.J&&this.C<Ze.length;)if(Xs=Ye(this,Ze),Xs==Fe){Dn==4&&(this.s=4,en(14),G=!1),J(this.i,this.l,null,"[Incomplete Response]");break}else if(Xs==Pe){this.s=4,en(15),J(this.i,this.l,Ze,"[Invalid Chunk]"),G=!1;break}else J(this.i,this.l,Xs,null),Ha(this,Xs);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dn!=4||Ze.length!=0||this.h.h||(this.s=1,en(16),G=!1),this.o=this.o&&G,!G)J(this.i,this.l,Ze,"[Invalid Chunked Response]"),Sr(this),ar(this);else if(0<Ze.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),gm(kn),kn.M=!0,en(11))}}else J(this.i,this.l,Ze,null),Ha(this,Ze);Dn==4&&Sr(this),this.o&&!this.J&&(Dn==4?SE(this.j,this):(this.o=!1,tt(this)))}else UP(this.g),G==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Sr(this),ar(this)}}}catch{}finally{}};function it(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Ye(S,F){var G=S.C,ne=F.indexOf(`
`,G);return ne==-1?Fe:(G=Number(F.substring(G,ne)),isNaN(G)?Pe:(ne+=1,ne+G>F.length?Fe:(F=F.slice(ne,ne+G),S.C=ne+G,F)))}Le.prototype.cancel=function(){this.J=!0,Sr(this)};function tt(S){S.S=Date.now()+S.I,wt(S,S.I)}function wt(S,F){if(S.B!=null)throw Error("WatchDog timer not null");S.B=kr(f(S.ba,S),F)}function ur(S){S.B&&(o.clearTimeout(S.B),S.B=null)}Le.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(ue(this.i,this.A),this.L!=2&&(ja(),en(17)),Sr(this),this.s=2,ar(this)):wt(this,this.S-S)};function ar(S){S.j.G==0||S.J||SE(S.j,S)}function Sr(S){ur(S);var F=S.M;F&&typeof F.ma=="function"&&F.ma(),S.M=null,st(S.U),S.g&&(F=S.g,S.g=null,F.abort(),F.ma())}function Ha(S,F){try{var G=S.j;if(G.G!=0&&(G.g==S||ys(G.h,S))){if(!S.K&&ys(G.h,S)&&G.G==3){try{var ne=G.Da.g.parse(F)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var Ae=ne;if(Ae[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<S.F)qf(G),Wf(G);else break e;mm(G),en(18)}}else G.za=Ae[1],0<G.za-G.T&&37500>Ae[2]&&G.F&&G.v==0&&!G.C&&(G.C=kr(f(G.Za,G),6e3));if(1>=Ml(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else Co(G,11)}else if((S.K||G.g==S)&&qf(G),!y(F))for(Ae=G.Da.g.parse(F),F=0;F<Ae.length;F++){let er=Ae[F];if(G.T=er[0],er=er[1],G.G==2)if(er[0]=="c"){G.K=er[1],G.ia=er[2];const kn=er[3];kn!=null&&(G.la=kn,G.j.info("VER="+G.la));const Dn=er[4];Dn!=null&&(G.Aa=Dn,G.j.info("SVER="+G.Aa));const Ul=er[5];Ul!=null&&typeof Ul=="number"&&0<Ul&&(ne=1.5*Ul,G.L=ne,G.j.info("backChannelRequestTimeoutMs_="+ne)),ne=G;const Xs=S.g;if(Xs){const Yf=Xs.g?Xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yf){var Me=ne.h;Me.g||Yf.indexOf("spdy")==-1&&Yf.indexOf("quic")==-1&&Yf.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(fm(Me,Me.h),Me.h=null))}if(ne.D){const vm=Xs.g?Xs.g.getResponseHeader("X-HTTP-Session-Id"):null;vm&&(ne.ya=vm,_r(ne.I,ne.D,vm))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-S.F,G.j.info("Handshake RTT: "+G.R+"ms")),ne=G;var Ze=S;if(ne.qa=wE(ne,ne.J?ne.ia:null,ne.W),Ze.K){tE(ne.h,Ze);var dr=Ze,vn=ne.L;vn&&(dr.I=vn),dr.B&&(ur(dr),tt(dr)),ne.g=Ze}else _E(ne);0<G.i.length&&Kf(G)}else er[0]!="stop"&&er[0]!="close"||Co(G,7);else G.G==3&&(er[0]=="stop"||er[0]=="close"?er[0]=="stop"?Co(G,7):pm(G):er[0]!="noop"&&G.l&&G.l.ta(er),G.v=0)}}ja(4)}catch{}}var wo=class{constructor(S,F){this.g=S,this.map=F}};function Ti(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ga(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Ml(S){return S.h?1:S.g?S.g.size:0}function ys(S,F){return S.h?S.h==F:S.g?S.g.has(F):!1}function fm(S,F){S.g?S.g.add(F):S.h=F}function tE(S,F){S.h&&S.h==F?S.h=null:S.g&&S.g.has(F)&&S.g.delete(F)}Ti.prototype.cancel=function(){if(this.i=rE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function rE(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let F=S.i;for(const G of S.g.values())F=F.concat(G.D);return F}return v(S.i)}function TP(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var F=[],G=S.length,ne=0;ne<G;ne++)F.push(S[ne]);return F}F=[],G=0;for(ne in S)F[G++]=S[ne];return F}function AP(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var F=[];S=S.length;for(var G=0;G<S;G++)F.push(G);return F}F=[],G=0;for(const ne in S)F[G++]=ne;return F}}}function nE(S,F){if(S.forEach&&typeof S.forEach=="function")S.forEach(F,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,F,void 0);else for(var G=AP(S),ne=TP(S),Ae=ne.length,Me=0;Me<Ae;Me++)F.call(void 0,ne[Me],G&&G[Me],S)}var sE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wP(S,F){if(S){S=S.split("&");for(var G=0;G<S.length;G++){var ne=S[G].indexOf("="),Ae=null;if(0<=ne){var Me=S[G].substring(0,ne);Ae=S[G].substring(ne+1)}else Me=S[G];F(Me,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function Io(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof Io){this.h=S.h,Vf(this,S.j),this.o=S.o,this.g=S.g,$f(this,S.s),this.l=S.l;var F=S.i,G=new du;G.i=F.i,F.g&&(G.g=new Map(F.g),G.h=F.h),aE(this,G),this.m=S.m}else S&&(F=String(S).match(sE))?(this.h=!1,Vf(this,F[1]||"",!0),this.o=cu(F[2]||""),this.g=cu(F[3]||"",!0),$f(this,F[4]),this.l=cu(F[5]||"",!0),aE(this,F[6]||"",!0),this.m=cu(F[7]||"")):(this.h=!1,this.i=new du(null,this.h))}Io.prototype.toString=function(){var S=[],F=this.j;F&&S.push(uu(F,iE,!0),":");var G=this.g;return(G||F=="file")&&(S.push("//"),(F=this.o)&&S.push(uu(F,iE,!0),"@"),S.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&S.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&S.push("/"),S.push(uu(G,G.charAt(0)=="/"?kP:CP,!0))),(G=this.i.toString())&&S.push("?",G),(G=this.m)&&S.push("#",uu(G,PP)),S.join("")};function Ga(S){return new Io(S)}function Vf(S,F,G){S.j=G?cu(F,!0):F,S.j&&(S.j=S.j.replace(/:$/,""))}function $f(S,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);S.s=F}else S.s=null}function aE(S,F,G){F instanceof du?(S.i=F,RP(S.i,S.h)):(G||(F=uu(F,DP)),S.i=new du(F,S.h))}function _r(S,F,G){S.i.set(F,G)}function jf(S){return _r(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function cu(S,F){return S?F?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function uu(S,F,G){return typeof S=="string"?(S=encodeURI(S).replace(F,IP),G&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function IP(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var iE=/[#\/\?@]/g,CP=/[#\?:]/g,kP=/[#\?]/g,DP=/[#\?@]/g,PP=/#/g;function du(S,F){this.h=this.g=null,this.i=S||null,this.j=!!F}function Ai(S){S.g||(S.g=new Map,S.h=0,S.i&&wP(S.i,function(F,G){S.add(decodeURIComponent(F.replace(/\+/g," ")),G)}))}t=du.prototype,t.add=function(S,F){Ai(this),this.i=null,S=Bl(this,S);var G=this.g.get(S);return G||this.g.set(S,G=[]),G.push(F),this.h+=1,this};function oE(S,F){Ai(S),F=Bl(S,F),S.g.has(F)&&(S.i=null,S.h-=S.g.get(F).length,S.g.delete(F))}function lE(S,F){return Ai(S),F=Bl(S,F),S.g.has(F)}t.forEach=function(S,F){Ai(this),this.g.forEach(function(G,ne){G.forEach(function(Ae){S.call(F,Ae,ne,this)},this)},this)},t.na=function(){Ai(this);const S=Array.from(this.g.values()),F=Array.from(this.g.keys()),G=[];for(let ne=0;ne<F.length;ne++){const Ae=S[ne];for(let Me=0;Me<Ae.length;Me++)G.push(F[ne])}return G},t.V=function(S){Ai(this);let F=[];if(typeof S=="string")lE(this,S)&&(F=F.concat(this.g.get(Bl(this,S))));else{S=Array.from(this.g.values());for(let G=0;G<S.length;G++)F=F.concat(S[G])}return F},t.set=function(S,F){return Ai(this),this.i=null,S=Bl(this,S),lE(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[F]),this.h+=1,this},t.get=function(S,F){return S?(S=this.V(S),0<S.length?String(S[0]):F):F};function cE(S,F,G){oE(S,F),0<G.length&&(S.i=null,S.g.set(Bl(S,F),v(G)),S.h+=G.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],F=Array.from(this.g.keys());for(var G=0;G<F.length;G++){var ne=F[G];const Me=encodeURIComponent(String(ne)),Ze=this.V(ne);for(ne=0;ne<Ze.length;ne++){var Ae=Me;Ze[ne]!==""&&(Ae+="="+encodeURIComponent(String(Ze[ne]))),S.push(Ae)}}return this.i=S.join("&")};function Bl(S,F){return F=String(F),S.j&&(F=F.toLowerCase()),F}function RP(S,F){F&&!S.j&&(Ai(S),S.i=null,S.g.forEach(function(G,ne){var Ae=ne.toLowerCase();ne!=Ae&&(oE(this,ne),cE(this,Ae,G))},S)),S.j=F}function FP(S,F){const G=new Cn;if(o.Image){const ne=new Image;ne.onload=h(wi,G,"TestLoadImage: loaded",!0,F,ne),ne.onerror=h(wi,G,"TestLoadImage: error",!1,F,ne),ne.onabort=h(wi,G,"TestLoadImage: abort",!1,F,ne),ne.ontimeout=h(wi,G,"TestLoadImage: timeout",!1,F,ne),o.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=S}else F(!1)}function OP(S,F){const G=new Cn,ne=new AbortController,Ae=setTimeout(()=>{ne.abort(),wi(G,"TestPingServer: timeout",!1,F)},1e4);fetch(S,{signal:ne.signal}).then(Me=>{clearTimeout(Ae),Me.ok?wi(G,"TestPingServer: ok",!0,F):wi(G,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Ae),wi(G,"TestPingServer: error",!1,F)})}function wi(S,F,G,ne,Ae){try{Ae&&(Ae.onload=null,Ae.onerror=null,Ae.onabort=null,Ae.ontimeout=null),ne(G)}catch{}}function NP(){this.g=new Ut}function MP(S,F,G){const ne=G||"";try{nE(S,function(Ae,Me){let Ze=Ae;c(Ae)&&(Ze=gt(Ae)),F.push(ne+Me+"="+encodeURIComponent(Ze))})}catch(Ae){throw F.push(ne+"type="+encodeURIComponent("_badmap")),Ae}}function Hf(S){this.l=S.Ub||null,this.j=S.eb||!1}p(Hf,pt),Hf.prototype.g=function(){return new Gf(this.l,this.j)},Hf.prototype.i=function(S){return function(){return S}}({});function Gf(S,F){Be.call(this),this.D=S,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Gf,Be),t=Gf.prototype,t.open=function(S,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=F,this.readyState=1,hu(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(F.body=S),(this.D||o).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fu(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,hu(this)),this.g&&(this.readyState=3,hu(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uE(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function uE(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var F=S.value?S.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!S.done}))&&(this.response=this.responseText+=F)}S.done?fu(this):hu(this),this.readyState==3&&uE(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,fu(this))},t.Qa=function(S){this.g&&(this.response=S,fu(this))},t.ga=function(){this.g&&fu(this)};function fu(S){S.readyState=4,S.l=null,S.j=null,S.v=null,hu(S)}t.setRequestHeader=function(S,F){this.u.append(S,F)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],F=this.h.entries();for(var G=F.next();!G.done;)G=G.value,S.push(G[0]+": "+G[1]),G=F.next();return S.join(`\r
`)};function hu(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Gf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function dE(S){let F="";return D(S,function(G,ne){F+=ne,F+=":",F+=G,F+=`\r
`}),F}function hm(S,F,G){e:{for(ne in G){var ne=!1;break e}ne=!0}ne||(G=dE(G),typeof S=="string"?G!=null&&encodeURIComponent(String(G)):_r(S,F,G))}function Or(S){Be.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Or,Be);var BP=/^https?$/i,LP=["POST","PUT"];t=Or.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,F,G,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);F=F?F.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pe.g(),this.v=this.o?lt(this.o):lt(pe),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(F,String(S),!0),this.B=!1}catch(Me){fE(this,Me);return}if(S=G||"",G=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var Ae in ne)G.set(Ae,ne[Ae]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const Me of ne.keys())G.set(Me,ne.get(Me));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(G.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ae=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(LP,F,void 0))||ne||Ae||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,Ze]of G)this.g.setRequestHeader(Me,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mE(this),this.u=!0,this.g.send(S),this.u=!1}catch(Me){fE(this,Me)}};function fE(S,F){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=F,S.m=5,hE(S),zf(S)}function hE(S){S.A||(S.A=!0,We(S,"complete"),We(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,We(this,"complete"),We(this,"abort"),zf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zf(this,!0)),Or.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pE(this):this.bb())},t.bb=function(){pE(this)};function pE(S){if(S.h&&typeof a<"u"&&(!S.v[1]||za(S)!=4||S.Z()!=2)){if(S.u&&za(S)==4)Ee(S.Ea,0,S);else if(We(S,"readystatechange"),za(S)==4){S.h=!1;try{const Ze=S.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var G;if(!(G=F)){var ne;if(ne=Ze===0){var Ae=String(S.D).match(sE)[1]||null;!Ae&&o.self&&o.self.location&&(Ae=o.self.location.protocol.slice(0,-1)),ne=!BP.test(Ae?Ae.toLowerCase():"")}G=ne}if(G)We(S,"complete"),We(S,"success");else{S.m=6;try{var Me=2<za(S)?S.g.statusText:""}catch{Me=""}S.l=Me+" ["+S.Z()+"]",hE(S)}}finally{zf(S)}}}}function zf(S,F){if(S.g){mE(S);const G=S.g,ne=S.v[0]?()=>{}:null;S.g=null,S.v=null,F||We(S,"ready");try{G.onreadystatechange=ne}catch{}}}function mE(S){S.I&&(o.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function za(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<za(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var F=this.g.responseText;return S&&F.indexOf(S)==0&&(F=F.substring(S.length)),yt(F)}};function gE(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function UP(S){const F={};S=(S.g&&2<=za(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<S.length;ne++){if(y(S[ne]))continue;var G=C(S[ne]);const Ae=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Me=F[Ae]||[];F[Ae]=Me,Me.push(G)}A(F,function(ne){return ne.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pu(S,F,G){return G&&G.internalChannelParams&&G.internalChannelParams[S]||F}function vE(S){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pu("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pu("baseRetryDelayMs",5e3,S),this.cb=pu("retryDelaySeedMs",1e4,S),this.Wa=pu("forwardChannelMaxRetries",2,S),this.wa=pu("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(S&&S.concurrentRequestLimit),this.Da=new NP,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vE.prototype,t.la=8,t.G=1,t.connect=function(S,F,G,ne){en(0),this.W=S,this.H=F||{},G&&ne!==void 0&&(this.H.OSID=G,this.H.OAID=ne),this.F=this.X,this.I=wE(this,null,this.W),Kf(this)};function pm(S){if(xE(S),S.G==3){var F=S.U++,G=Ga(S.I);if(_r(G,"SID",S.K),_r(G,"RID",F),_r(G,"TYPE","terminate"),mu(S,G),F=new Le(S,S.j,F),F.L=2,F.v=jf(Ga(G)),G=!1,o.navigator&&o.navigator.sendBeacon)try{G=o.navigator.sendBeacon(F.v.toString(),"")}catch{}!G&&o.Image&&(new Image().src=F.v,G=!0),G||(F.g=IE(F.j,null),F.g.ea(F.v)),F.F=Date.now(),tt(F)}AE(S)}function Wf(S){S.g&&(gm(S),S.g.cancel(),S.g=null)}function xE(S){Wf(S),S.u&&(o.clearTimeout(S.u),S.u=null),qf(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function Kf(S){if(!ga(S.h)&&!S.s){S.s=!0;var F=S.Ga;O||q(),U||(O(),U=!0),M.add(F,S),S.B=0}}function VP(S,F){return Ml(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=F.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=kr(f(S.Ga,S,F),TE(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Ae=new Le(this,this.j,S);let Me=this.o;if(this.S&&(Me?(Me=_(Me),w(Me,this.S)):Me=this.S),this.m!==null||this.O||(Ae.H=Me,Me=null),this.P)e:{for(var F=0,G=0;G<this.i.length;G++){t:{var ne=this.i[G];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(F+=ne,4096<F){F=G;break e}if(F===4096||G===this.i.length-1){F=G+1;break e}}F=1e3}else F=1e3;F=EE(this,Ae,F),G=Ga(this.I),_r(G,"RID",S),_r(G,"CVER",22),this.D&&_r(G,"X-HTTP-Session-Id",this.D),mu(this,G),Me&&(this.O?F="headers="+encodeURIComponent(String(dE(Me)))+"&"+F:this.m&&hm(G,this.m,Me)),fm(this.h,Ae),this.Ua&&_r(G,"TYPE","init"),this.P?(_r(G,"$req",F),_r(G,"SID","null"),Ae.T=!0,qe(Ae,G,null)):qe(Ae,G,F),this.G=2}}else this.G==3&&(S?yE(this,S):this.i.length==0||ga(this.h)||yE(this))};function yE(S,F){var G;F?G=F.l:G=S.U++;const ne=Ga(S.I);_r(ne,"SID",S.K),_r(ne,"RID",G),_r(ne,"AID",S.T),mu(S,ne),S.m&&S.o&&hm(ne,S.m,S.o),G=new Le(S,S.j,G,S.B+1),S.m===null&&(G.H=S.o),F&&(S.i=F.D.concat(S.i)),F=EE(S,G,1e3),G.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),fm(S.h,G),qe(G,ne,F)}function mu(S,F){S.H&&D(S.H,function(G,ne){_r(F,ne,G)}),S.l&&nE({},function(G,ne){_r(F,ne,G)})}function EE(S,F,G){G=Math.min(S.i.length,G);var ne=S.l?f(S.l.Na,S.l,S):null;e:{var Ae=S.i;let Me=-1;for(;;){const Ze=["count="+G];Me==-1?0<G?(Me=Ae[0].g,Ze.push("ofs="+Me)):Me=0:Ze.push("ofs="+Me);let dr=!0;for(let vn=0;vn<G;vn++){let er=Ae[vn].g;const kn=Ae[vn].map;if(er-=Me,0>er)Me=Math.max(0,Ae[vn].g-100),dr=!1;else try{MP(kn,Ze,"req"+er+"_")}catch{ne&&ne(kn)}}if(dr){ne=Ze.join("&");break e}}}return S=S.i.splice(0,G),F.D=S,ne}function _E(S){if(!S.g&&!S.u){S.Y=1;var F=S.Fa;O||q(),U||(O(),U=!0),M.add(F,S),S.v=0}}function mm(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=kr(f(S.Fa,S),TE(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,bE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=kr(f(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),Wf(this),bE(this))};function gm(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function bE(S){S.g=new Le(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var F=Ga(S.qa);_r(F,"RID","rpc"),_r(F,"SID",S.K),_r(F,"AID",S.T),_r(F,"CI",S.F?"0":"1"),!S.F&&S.ja&&_r(F,"TO",S.ja),_r(F,"TYPE","xmlhttp"),mu(S,F),S.m&&S.o&&hm(F,S.m,S.o),S.L&&(S.g.I=S.L);var G=S.g;S=S.ia,G.L=1,G.v=jf(Ga(F)),G.m=null,G.P=!0,Je(G,S)}t.Za=function(){this.C!=null&&(this.C=null,Wf(this),mm(this),en(19))};function qf(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function SE(S,F){var G=null;if(S.g==F){qf(S),gm(S),S.g=null;var ne=2}else if(ys(S.h,F))G=F.D,tE(S.h,F),ne=1;else return;if(S.G!=0){if(F.o)if(ne==1){G=F.m?F.m.length:0,F=Date.now()-F.F;var Ae=S.B;ne=cs(),We(ne,new Ao(ne,G)),Kf(S)}else _E(S);else if(Ae=F.s,Ae==3||Ae==0&&0<F.X||!(ne==1&&VP(S,F)||ne==2&&mm(S)))switch(G&&0<G.length&&(F=S.h,F.i=F.i.concat(G)),Ae){case 1:Co(S,5);break;case 4:Co(S,10);break;case 3:Co(S,6);break;default:Co(S,2)}}}function TE(S,F){let G=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(G*=2),G*F}function Co(S,F){if(S.j.info("Error code "+F),F==2){var G=f(S.fb,S),ne=S.Xa;const Ae=!ne;ne=new Io(ne||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vf(ne,"https"),jf(ne),Ae?FP(ne.toString(),G):OP(ne.toString(),G)}else en(2);S.G=0,S.l&&S.l.sa(F),AE(S),xE(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function AE(S){if(S.G=0,S.ka=[],S.l){const F=rE(S.h);(F.length!=0||S.i.length!=0)&&(g(S.ka,F),g(S.ka,S.i),S.h.i.length=0,v(S.i),S.i.length=0),S.l.ra()}}function wE(S,F,G){var ne=G instanceof Io?Ga(G):new Io(G);if(ne.g!="")F&&(ne.g=F+"."+ne.g),$f(ne,ne.s);else{var Ae=o.location;ne=Ae.protocol,F=F?F+"."+Ae.hostname:Ae.hostname,Ae=+Ae.port;var Me=new Io(null);ne&&Vf(Me,ne),F&&(Me.g=F),Ae&&$f(Me,Ae),G&&(Me.l=G),ne=Me}return G=S.D,F=S.ya,G&&F&&_r(ne,G,F),_r(ne,"VER",S.la),mu(S,ne),ne}function IE(S,F,G){if(F&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=S.Ca&&!S.pa?new Or(new Hf({eb:G})):new Or(S.pa),F.Ha(S.J),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function CE(){}t=CE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xf(){}Xf.prototype.g=function(S,F){return new Es(S,F)};function Es(S,F){Be.call(this),this.g=new vE(F),this.l=S,this.h=F&&F.messageUrlParams||null,S=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(S?S["X-WebChannel-Content-Type"]=F.messageContentType:S={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(S?S["X-WebChannel-Client-Profile"]=F.va:S={"X-WebChannel-Client-Profile":F.va}),this.g.S=S,(S=F&&F.Sb)&&!y(S)&&(this.g.m=S),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!y(F)&&(this.g.D=F,S=this.h,S!==null&&F in S&&(S=this.h,F in S&&delete S[F])),this.j=new Ll(this)}p(Es,Be),Es.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Es.prototype.close=function(){pm(this.g)},Es.prototype.o=function(S){var F=this.g;if(typeof S=="string"){var G={};G.__data__=S,S=G}else this.u&&(G={},G.__data__=gt(S),S=G);F.i.push(new wo(F.Ya++,S)),F.G==3&&Kf(F)},Es.prototype.N=function(){this.g.l=null,delete this.j,pm(this.g),delete this.g,Es.aa.N.call(this)};function kE(S){Ot.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var F=S.__sm__;if(F){e:{for(const G in F){S=G;break e}S=void 0}(this.i=S)&&(S=this.i,F=F!==null&&S in F?F[S]:void 0),this.data=F}else this.data=S}p(kE,Ot);function DE(){Er.call(this),this.status=1}p(DE,Er);function Ll(S){this.g=S}p(Ll,CE),Ll.prototype.ua=function(){We(this.g,"a")},Ll.prototype.ta=function(S){We(this.g,new kE(S))},Ll.prototype.sa=function(S){We(this.g,new DE)},Ll.prototype.ra=function(){We(this.g,"b")},Xf.prototype.createWebChannel=Xf.prototype.g,Es.prototype.send=Es.prototype.o,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,VI=function(){return new Xf},UI=function(){return cs()},LI=Kn,Mv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,H0=oe,de.COMPLETE="complete",BI=de,mt.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Bu=mt,Or.prototype.listenOnce=Or.prototype.L,Or.prototype.getLastError=Or.prototype.Ka,Or.prototype.getLastErrorCode=Or.prototype.Ba,Or.prototype.getStatus=Or.prototype.Z,Or.prototype.getResponseJson=Or.prototype.Oa,Or.prototype.getResponseText=Or.prototype.oa,Or.prototype.send=Or.prototype.ea,Or.prototype.setWithCredentials=Or.prototype.Ha,MI=Or}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});const K_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new rx("@firebase/firestore");function tc(){return nl.logLevel}function Xe(t,...e){if(nl.logLevel<=jt.DEBUG){const r=e.map(mx);nl.debug(`Firestore (${Zc}): ${t}`,...r)}}function ns(t,...e){if(nl.logLevel<=jt.ERROR){const r=e.map(mx);nl.error(`Firestore (${Zc}): ${t}`,...r)}}function sl(t,...e){if(nl.logLevel<=jt.WARN){const r=e.map(mx);nl.warn(`Firestore (${Zc}): ${t}`,...r)}}function mx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t="Unexpected state"){const e=`FIRESTORE (${Zc}) INTERNAL ASSERTION FAILED: `+t;throw ns(e),new Error(e)}function vt(t,e){t||ht()}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends ha{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(yn.UNAUTHENTICATED))}shutdown(){}}class Z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class e5{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){vt(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new Pa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pa,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pa)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(vt(typeof n.accessToken=="string"),new $I(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string"),new yn(e)}}class t5{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class r5{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new t5(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){vt(this.o===void 0);const n=i=>{i.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(vt(typeof r.token=="string"),this.R=r.token,new n5(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=a5(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Ft(t,e){return t<e?-1:t>e?1:0}function Nc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function HI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Qe(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Qe(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Qe(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fr.fromMillis(Date.now())}static fromDate(e){return Fr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Fr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Fr(0,0))}static max(){return new Et(new Fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,r,n){r===void 0?r=0:r>e.length&&ht(),n===void 0?n=e.length-r:n>e.length-r&&ht(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ld.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ld?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class nr extends Ld{construct(e,r,n){return new nr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Qe(Ue.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new nr(r)}static emptyPath(){return new nr([])}}const i5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends Ld{construct(e,r,n){return new Pr(e,r,n)}static isValidIdentifier(e){return i5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Qe(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Qe(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Qe(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new Qe(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(r)}static emptyPath(){return new Pr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(nr.fromString(e))}static fromName(e){return new nt(nr.fromString(e).popFirst(5))}static empty(){return new nt(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return nr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new nr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function Bv(t){return t.fields.find(e=>e.kind===2)}function No(t){return t.fields.filter(e=>e.kind!==2)}kh.UNKNOWN_ID=-1;class G0{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ud{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ud(0,Ps.min())}}function o5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Et.fromTimestamp(n===1e9?new Fr(r+1,0):new Fr(r,n));return new Ps(s,nt.empty(),e)}function GI(t){return new Ps(t.readTime,t.key,-1)}class Ps{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ps(Et.min(),nt.empty(),-1)}static max(){return new Ps(Et.max(),nt.empty(),-1)}}function gx(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=nt.comparator(t.documentKey,e.documentKey),r!==0?r:Ft(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t){if(t.code!==Ue.FAILED_PRECONDITION||t.message!==zI)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ce((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ce?r:Ce.resolve(r)}catch(r){return Ce.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ce.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ce.reject(r)}static resolve(e){return new Ce((r,n)=>{r(e)})}static reject(e){return new Ce((r,n)=>{n(e)})}static waitFor(e){return new Ce((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Ce.resolve(!1);for(const n of e)r=r.next(s=>s?Ce.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ce((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Ce((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Pa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new id(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=vx(n.target.error);this.V.reject(new id(e,s))}}static open(e,r,n,s){try{return new Op(r,e.transaction(s,n))}catch(i){throw new id(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new c5(r)}}class ao{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ao.S(un())===12.2&&ns("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),Bo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yw())return!1;if(ao.v())return!0;const e=un(),r=ao.S(e),n=0<r&&r<10,s=KI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Xe("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new id(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new Qe(Ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Qe(Ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new id(e,a))},s.onupgradeneeded=i=>{Xe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{Xe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Op.open(this.db,e,i?"readonly":"readwrite",n),l=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Ce.reject(c))).toPromise();return l.catch(()=>{}),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(Xe("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function KI(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class l5{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bo(this.B.delete())}}class id extends Qe{constructor(e,r){super(Ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function yo(t){return t.name==="IndexedDbTransactionError"}class c5{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Xe("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bo(n)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),Bo(this.store.add(e))}get(e){return Bo(this.store.get(e)).next(r=>(r===void 0&&(r=null),Xe("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),Bo(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),Bo(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Ce((a,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{a(l.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,l)=>{a.push(l)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ce((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){Xe("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Ce((n,s)=>{r.onerror=i=>{const a=vx(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Ce((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const l=new l5(o),c=r(o.primaryKey,o.value,l);if(c instanceof Ce){const u=c.catch(d=>(l.done(),Ce.reject(d)));n.push(u)}l.isDone?s():l.K===null?o.continue():o.continue(l.K)}}).next(()=>Ce.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Bo(t){return new Ce((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=vx(n.target.error);r(s)}})}let q_=!1;function vx(t){const e=ao.S(un());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return q_||(q_=!0,setTimeout(()=>{throw n},0)),n}}return t}class u5{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Xe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Xe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){yo(r)?Xe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await _l(r)}await this.X(6e4)})}}class d5{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Ce.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Xe("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(Xe("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=GI(i);gx(a,n)>0&&(n=a)}),new Ps(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ls.oe=-1;function Np(t){return t==null}function Vd(t){return t===0&&1/t==-1/0}function f5(t){return typeof t=="number"&&Number.isInteger(t)&&!Vd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=X_(e)),e=h5(t.get(r),e);return X_(e)}function h5(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function X_(t){return t+""}function wa(t){const e=t.length;if(vt(e>=2),e===2)return vt(t.charAt(0)===""&&t.charAt(1)===""),nr.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&ht(),t.charAt(a+1)){case"":const o=t.substring(i,a);let l;s.length===0?l=o:(s+=o,l=s,s=""),n.push(l);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:ht()}i=a+2}return new nr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t,e){return[t,as(e)]}function qI(t,e,r){return[t,as(e),r]}const p5={},m5=["prefixPath","collectionGroup","readTime","documentId"],g5=["prefixPath","collectionGroup","documentId"],v5=["collectionGroup","readTime","prefixPath","documentId"],x5=["canonicalId","targetId"],y5=["targetId","path"],E5=["path","targetId"],_5=["collectionId","parent"],b5=["indexId","uid"],S5=["uid","sequenceNumber"],T5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A5=["indexId","uid","orderedDocumentKey"],w5=["userId","collectionPath","documentId"],I5=["userId","collectionPath","largestBatchId"],C5=["userId","collectionGroup","largestBatchId"],XI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],k5=[...XI,"documentOverlays"],YI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QI=YI,xx=[...QI,"indexConfiguration","indexState","indexEntries"],D5=xx,P5=[...xx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends WI{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function dn(t,e){const r=Dt(t);return ao.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function bl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function JI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,r){this.comparator=e,this.root=r||En.EMPTY}insert(e,r){return new Cr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new c0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new c0(this.root,e,this.comparator,!1)}getReverseIterator(){return new c0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new c0(this.root,e,this.comparator,!0)}}class c0{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??En.RED,this.left=s??En.EMPTY,this.right=i??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new En(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return En.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(e,r,n,s,i){return this}insert(e,r,n){return new En(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(e){return new J_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof lr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new lr(this.comparator);return r.data=e,r}}class J_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.fields=e,e.sort(Pr.comparator)}static empty(){return new vs([])}unionWith(e){let r=new lr(Pr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new vs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Nc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ZI("Invalid base64 string: "+i):i}}(e);return new Zr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Zr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const R5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(t){if(vt(!!t),typeof t=="string"){let e=0;const r=R5.exec(t);if(vt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ar(t.seconds),nanos:Ar(t.nanos)}}function Ar(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ho(t){return typeof t=="string"?Zr.fromBase64String(t):Zr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function yx(t){const e=t.mapValue.fields.__previous_value__;return Mp(e)?yx(e):e}function $d(t){const e=mi(t.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class al{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},W0={nullValue:"NULL_VALUE"};function il(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mp(t)?4:eC(t)?9007199254740991:Bp(t)?10:11:ht()}function Na(t,e){if(t===e)return!0;const r=il(t);if(r!==il(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $d(t).isEqual($d(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=mi(s.timestampValue),o=mi(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ho(s.bytesValue).isEqual(ho(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ar(s.geoPointValue.latitude)===Ar(i.geoPointValue.latitude)&&Ar(s.geoPointValue.longitude)===Ar(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ar(s.integerValue)===Ar(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ar(s.doubleValue),o=Ar(i.doubleValue);return a===o?Vd(a)===Vd(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Nc(t.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(Q_(a)!==Q_(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Na(a[l],o[l])))return!1;return!0}(t,e);default:return ht()}}function jd(t,e){return(t.values||[]).find(r=>Na(r,e))!==void 0}function po(t,e){if(t===e)return 0;const r=il(t),n=il(e);if(r!==n)return Ft(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ft(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Ar(i.integerValue||i.doubleValue),l=Ar(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Z_(t.timestampValue,e.timestampValue);case 4:return Z_($d(t),$d(e));case 5:return Ft(t.stringValue,e.stringValue);case 6:return function(i,a){const o=ho(i),l=ho(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=Ft(o[c],l[c]);if(u!==0)return u}return Ft(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Ft(Ar(i.latitude),Ar(a.latitude));return o!==0?o:Ft(Ar(i.longitude),Ar(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eb(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const d=i.fields||{},f=a.fields||{},h=(o=d.value)===null||o===void 0?void 0:o.arrayValue,p=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Ft(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:eb(h,p)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Yi.mapValue&&a===Yi.mapValue)return 0;if(i===Yi.mapValue)return 1;if(a===Yi.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=Ft(l[d],u[d]);if(f!==0)return f;const h=po(o[l[d]],c[u[d]]);if(h!==0)return h}return Ft(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ht()}}function Z_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ft(t,e);const r=mi(t),n=mi(e),s=Ft(r.seconds,n.seconds);return s!==0?s:Ft(r.nanos,n.nanos)}function eb(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=po(r[s],n[s]);if(i)return i}return Ft(r.length,n.length)}function Mc(t){return Uv(t)}function Uv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=mi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ho(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return nt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Uv(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${Uv(r.fields[a])}`;return s+"}"}(t.mapValue):ht()}function ol(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vv(t){return!!t&&"integerValue"in t}function Hd(t){return!!t&&"arrayValue"in t}function tb(t){return!!t&&"nullValue"in t}function rb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function K0(t){return!!t&&"mapValue"in t}function Bp(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function od(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=od(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=od(t.arrayValue.values[r]);return e}return Object.assign({},t)}function eC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const tC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function O5(t){return"nullValue"in t?W0:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ol(al.empty(),nt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Bp(t)?tC:{mapValue:{}}:ht()}function N5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ol(al.empty(),nt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?tC:"mapValue"in t?Bp(t)?{mapValue:{}}:Yi:ht()}function nb(t,e){const r=po(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function sb(t,e){const r=po(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!K0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=od(r)}setAll(e){let r=Pr.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=od(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());K0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];K0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){bl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Bn(od(this.value))}}function rC(t){const e=[];return bl(t.fields,(r,n)=>{const s=new Pr([r]);if(K0(n)){const i=rC(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Vr(e,0,Et.min(),Et.min(),Et.min(),Bn.empty(),0)}static newFoundDocument(e,r,n,s){return new Vr(e,1,r,Et.min(),n,s,0)}static newNoDocument(e,r){return new Vr(e,2,r,Et.min(),Et.min(),Bn.empty(),0)}static newUnknownDocument(e,r){return new Vr(e,3,r,Et.min(),Et.min(),Bn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,r){this.position=e,this.inclusive=r}}function ab(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=nt.comparator(nt.fromName(a.referenceValue),r.key):n=po(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function ib(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Na(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,r="asc"){this.field=e,this.dir=r}}function M5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{}class Gt extends nC{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new B5(e,r,n):r==="array-contains"?new V5(e,n):r==="in"?new cC(e,n):r==="not-in"?new $5(e,n):r==="array-contains-any"?new j5(e,n):new Gt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new L5(e,n):new U5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(po(r,this.value)):r!==null&&il(this.value)===il(r)&&this.matchesComparison(po(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends nC{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ir(e,r)}matches(e){return Bc(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bc(t){return t.op==="and"}function $v(t){return t.op==="or"}function Ex(t){return sC(t)&&Bc(t)}function sC(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function jv(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+Mc(t.value);if(Ex(t))return t.filters.map(e=>jv(e)).join(",");{const e=t.filters.map(r=>jv(r)).join(",");return`${t.op}(${e})`}}function aC(t,e){return t instanceof Gt?function(n,s){return s instanceof Gt&&n.op===s.op&&n.field.isEqual(s.field)&&Na(n.value,s.value)}(t,e):t instanceof ir?function(n,s){return s instanceof ir&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&aC(a,s.filters[o]),!0):!1}(t,e):void ht()}function iC(t,e){const r=t.filters.concat(e);return ir.create(r,t.op)}function oC(t){return t instanceof Gt?function(r){return`${r.field.canonicalString()} ${r.op} ${Mc(r.value)}`}(t):t instanceof ir?function(r){return r.op.toString()+" {"+r.getFilters().map(oC).join(" ,")+"}"}(t):"Filter"}class B5 extends Gt{constructor(e,r,n){super(e,r,n),this.key=nt.fromName(n.referenceValue)}matches(e){const r=nt.comparator(e.key,this.key);return this.matchesComparison(r)}}class L5 extends Gt{constructor(e,r){super(e,"in",r),this.keys=lC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class U5 extends Gt{constructor(e,r){super(e,"not-in",r),this.keys=lC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function lC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>nt.fromName(n.referenceValue))}class V5 extends Gt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Hd(r)&&jd(r.arrayValue,this.value)}}class cC extends Gt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&jd(this.value.arrayValue,r)}}class $5 extends Gt{constructor(e,r){super(e,"not-in",r)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!jd(this.value.arrayValue,r)}}class j5 extends Gt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Hd(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>jd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function Hv(t,e=null,r=[],n=[],s=null,i=null,a=null){return new H5(t,e,r,n,s,i,a)}function ll(t){const e=Dt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>jv(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Np(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Mc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Mc(n)).join(",")),e.ue=r}return e.ue}function yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!M5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!aC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ib(t.startAt,e.startAt)&&ib(t.endAt,e.endAt)}function Dh(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ph(t,e){return t.filters.filter(r=>r instanceof Gt&&r.field.isEqual(e))}function ob(t,e,r){let n=W0,s=!0;for(const i of Ph(t,e)){let a=W0,o=!0;switch(i.op){case"<":case"<=":a=O5(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=W0}nb({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];nb({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function lb(t,e,r){let n=Yi,s=!0;for(const i of Ph(t,e)){let a=Yi,o=!0;switch(i.op){case">=":case">":a=N5(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Yi}sb({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];sb({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function G5(t,e,r,n,s,i,a,o){return new Sl(t,e,r,n,s,i,a,o)}function Ef(t){return new Sl(t)}function cb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _x(t){return t.collectionGroup!==null}function Sc(t){const e=Dt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new lr(Pr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Gd(i,n))}),r.has(Pr.keyField().canonicalString())||e.ce.push(new Gd(Pr.keyField(),n))}return e.ce}function js(t){const e=Dt(t);return e.le||(e.le=z5(e,Sc(t))),e.le}function z5(t,e){if(t.limitType==="F")return Hv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Gd(s.field,i)});const r=t.endAt?new mo(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new mo(t.startAt.position,t.startAt.inclusive):null;return Hv(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Gv(t,e){const r=t.filters.concat([e]);return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Rh(t,e,r){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Lp(t,e){return yf(js(t),js(e))&&t.limitType===e.limitType}function uC(t){return`${ll(js(t))}|lt:${t.limitType}`}function rc(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>oC(s)).join(", ")}]`),Np(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Mc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Mc(s)).join(",")),`Target(${n})`}(js(t))}; limitType=${t.limitType})`}function _f(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):nt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Sc(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=ab(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,Sc(n),s)||n.endAt&&!function(a,o,l){const c=ab(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,Sc(n),s))}(t,e)}function W5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dC(t){return(e,r)=>{let n=!1;for(const s of Sc(t)){const i=K5(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function K5(t,e,r){const n=t.field.isKeyField()?nt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?po(l,c):ht()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ht()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Cr(nt.comparator);function As(){return q5}const fC=new Cr(nt.comparator);function Lu(...t){let e=fC;for(const r of t)e=e.insert(r.key,r);return e}function hC(t){let e=fC;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ia(){return ld()}function pC(){return ld()}function ld(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const X5=new Cr(nt.comparator),Y5=new lr(nt.comparator);function Lt(...t){let e=Y5;for(const r of t)e=e.add(r);return e}const Q5=new lr(Ft);function J5(){return Q5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function mC(t){return{integerValue:""+t}}function Z5(t,e){return f5(e)?mC(e):bx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this._=void 0}}function eM(t,e,r){return t instanceof Lc?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mp(i)&&(i=yx(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Uc?vC(t,e):t instanceof Vc?xC(t,e):function(s,i){const a=gC(s,i),o=ub(a)+ub(s.Pe);return Vv(a)&&Vv(s.Pe)?mC(o):bx(s.serializer,o)}(t,e)}function tM(t,e,r){return t instanceof Uc?vC(t,e):t instanceof Vc?xC(t,e):r}function gC(t,e){return t instanceof zd?function(n){return Vv(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Lc extends Up{}class Uc extends Up{constructor(e){super(),this.elements=e}}function vC(t,e){const r=yC(e);for(const n of t.elements)r.some(s=>Na(s,n))||r.push(n);return{arrayValue:{values:r}}}class Vc extends Up{constructor(e){super(),this.elements=e}}function xC(t,e){let r=yC(e);for(const n of t.elements)r=r.filter(s=>!Na(s,n));return{arrayValue:{values:r}}}class zd extends Up{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function ub(t){return Ar(t.integerValue||t.doubleValue)}function yC(t){return Hd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,r){this.field=e,this.transform=r}}function rM(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Uc&&s instanceof Uc||n instanceof Vc&&s instanceof Vc?Nc(n.elements,s.elements,Na):n instanceof zd&&s instanceof zd?Na(n.Pe,s.Pe):n instanceof Lc&&s instanceof Lc}(t.transform,e.transform)}class nM{constructor(e,r){this.version=e,this.transformResults=r}}class on{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function q0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vp{}function _C(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bf(t.key,on.none()):new eu(t.key,t.data,on.none());{const r=t.data,n=Bn.empty();let s=new lr(Pr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new yi(t.key,n,new vs(s.toArray()),on.none())}}function sM(t,e,r){t instanceof eu?function(s,i,a){const o=s.value.clone(),l=fb(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof yi?function(s,i,a){if(!q0(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=fb(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(bC(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function cd(t,e,r,n){return t instanceof eu?function(i,a,o,l){if(!q0(i.precondition,a))return o;const c=i.value.clone(),u=hb(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof yi?function(i,a,o,l){if(!q0(i.precondition,a))return o;const c=hb(i.fieldTransforms,l,a),u=a.data;return u.setAll(bC(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(i,a,o){return q0(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function aM(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=gC(n.transform,s||null);i!=null&&(r===null&&(r=Bn.empty()),r.set(n.field,i))}return r||null}function db(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Nc(n,s,(i,a)=>rM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eu extends Vp{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yi extends Vp{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function fb(t,e,r){const n=new Map;vt(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,tM(a,o,r[s]))}return n}function hb(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,eM(i,a,e))}return n}class bf extends Vp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SC extends Vp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sM(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=cd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=cd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=pC();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=_C(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Et.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Lt())}isEqual(e){return this.batchId===e.batchId&&Nc(this.mutations,e.mutations,(r,n)=>db(r,n))&&Nc(this.baseMutations,e.baseMutations,(r,n)=>db(r,n))}}class Tx{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){vt(e.mutations.length===n.length);let s=function(){return X5}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Tx(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qr,Xt;function oM(t){switch(t){default:return ht();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function TC(t){if(t===void 0)return ns("GRPC error has no .code"),Ue.UNKNOWN;switch(t){case qr.OK:return Ue.OK;case qr.CANCELLED:return Ue.CANCELLED;case qr.UNKNOWN:return Ue.UNKNOWN;case qr.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case qr.INTERNAL:return Ue.INTERNAL;case qr.UNAVAILABLE:return Ue.UNAVAILABLE;case qr.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case qr.NOT_FOUND:return Ue.NOT_FOUND;case qr.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case qr.ABORTED:return Ue.ABORTED;case qr.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case qr.DATA_LOSS:return Ue.DATA_LOSS;default:return ht()}}(Xt=qr||(qr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new qo([4294967295,4294967295],0);function pb(t){const e=lM().encode(t),r=new NI;return r.update(e),new Uint8Array(r.digest())}function mb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qo([r,n],0),new qo([s,i],0)]}class wx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Uu(`Invalid padding: ${r}`);if(n<0)throw new Uu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=qo.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(qo.fromNumber(n)));return s.compare(cM)===1&&(s=new qo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=pb(e),[n,s]=mb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new wx(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=pb(e),[n,s]=mb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new $p(Et.min(),s,new Cr(Ft),As(),Lt())}}class Sf{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Sf(n,r,Lt(),Lt(),Lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class AC{constructor(e,r){this.targetId=e,this.me=r}}class wC{constructor(e,r,n=Zr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class gb{constructor(){this.fe=0,this.ge=xb(),this.pe=Zr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Lt(),r=Lt(),n=Lt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ht()}}),new Sf(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=xb()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,vt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uM{constructor(e){this.Le=e,this.Be=new Map,this.ke=As(),this.qe=vb(),this.Qe=new Cr(Ft)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:ht()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Dh(i))if(n===0){const a=new nt(i.path);this.Ue(r,a,Vr.newNoDocument(a,Et.min()))}else vt(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=ho(n).toUint8Array()}catch(l){if(l instanceof ZI)return sl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new wx(a,s,i)}catch(l){return sl(l instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Dh(o.target)){const l=new nt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Vr.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Lt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new $p(e,r,this.Qe,this.ke,n);return this.ke=As(),this.qe=vb(),this.Qe=new Cr(Ft),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new gb,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new lr(Ft),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gb),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function vb(){return new Cr(nt.comparator)}function xb(){return new Cr(nt.comparator)}const dM={asc:"ASCENDING",desc:"DESCENDING"},fM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hM={and:"AND",or:"OR"};class pM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function zv(t,e){return t.useProto3Json||Np(e)?e:{value:e}}function $c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mM(t,e){return $c(t,e.toTimestamp())}function is(t){return vt(!!t),Et.fromTimestamp(function(r){const n=mi(r);return new Fr(n.seconds,n.nanos)}(t))}function Ix(t,e){return Wv(t,e).canonicalString()}function Wv(t,e){const r=function(s){return new nr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function CC(t){const e=nr.fromString(t);return vt(BC(e)),e}function Fh(t,e){return Ix(t.databaseId,e.path)}function Xo(t,e){const r=CC(e);if(r.get(1)!==t.databaseId.projectId)throw new Qe(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Qe(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new nt(PC(r))}function kC(t,e){return Ix(t.databaseId,e)}function DC(t){const e=CC(t);return e.length===4?nr.emptyPath():PC(e)}function Kv(t){return new nr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PC(t){return vt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yb(t,e,r){return{name:Fh(t,e),fields:r.value.mapValue.fields}}function gM(t,e,r){const n=Xo(t,e.name),s=is(e.updateTime),i=e.createTime?is(e.createTime):Et.min(),a=new Bn({mapValue:{fields:e.fields}}),o=Vr.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function vM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ht()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(vt(u===void 0||typeof u=="string"),Zr.fromBase64String(u||"")):(vt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Zr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Ue.UNKNOWN:TC(c.code);return new Qe(u,c.message||"")}(a);r=new wC(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Xo(t,n.document.name),i=is(n.document.updateTime),a=n.document.createTime?is(n.document.createTime):Et.min(),o=new Bn({mapValue:{fields:n.document.fields}}),l=Vr.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new X0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Xo(t,n.document),i=n.readTime?is(n.readTime):Et.min(),a=Vr.newNoDocument(s,i),o=n.removedTargetIds||[];r=new X0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Xo(t,n.document),i=n.removedTargetIds||[];r=new X0([],i,s,null)}else{if(!("filter"in e))return ht();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new iM(s,i),o=n.targetId;r=new AC(o,a)}}return r}function Oh(t,e){let r;if(e instanceof eu)r={update:yb(t,e.key,e.value)};else if(e instanceof bf)r={delete:Fh(t,e.key)};else if(e instanceof yi)r={update:yb(t,e.key,e.data),updateMask:SM(e.fieldMask)};else{if(!(e instanceof SC))return ht();r={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Lc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Uc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Vc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zd)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw ht()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:mM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ht()}(t,e.precondition)),r}function qv(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?on.updateTime(is(i.updateTime)):i.exists!==void 0?on.exists(i.exists):on.none()}(e.currentDocument):on.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let l=null;if("setToServerValue"in o)vt(o.setToServerValue==="REQUEST_TIME"),l=new Lc;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];l=new Uc(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];l=new Vc(u)}else"increment"in o?l=new zd(a,o.increment):ht();const c=Pr.fromServerFormat(o.fieldPath);return new EC(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Xo(t,e.update.name),i=new Bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new vs(c.map(u=>Pr.fromServerFormat(u)))}(e.updateMask);return new yi(s,i,a,r,n)}return new eu(s,i,r,n)}if(e.delete){const s=Xo(t,e.delete);return new bf(s,r)}if(e.verify){const s=Xo(t,e.verify);return new SC(s,r)}return ht()}function xM(t,e){return t&&t.length>0?(vt(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?is(s.updateTime):is(i);return a.isEqual(Et.min())&&(a=is(i)),new nM(a,s.transformResults||[])}(r,e))):[]}function RC(t,e){return{documents:[kC(t,e.path)]}}function FC(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=kC(t,s);const i=function(c){if(c.length!==0)return MC(ir.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:nc(f.field),direction:EM(f.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=zv(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function OC(t){let e=DC(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){vt(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(d){const f=NC(d);return f instanceof ir&&Ex(f)?f.getFilters():[f]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(f=>function(p){return new Gd(sc(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(r.orderBy));let o=null;r.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Np(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new mo(h,f)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new mo(h,f)}(r.endAt)),G5(e,s,a,i,o,"F",l,c)}function yM(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function NC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=sc(r.unaryFilter.field);return Gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=sc(r.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=sc(r.unaryFilter.field);return Gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=sc(r.unaryFilter.field);return Gt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(t):t.fieldFilter!==void 0?function(r){return Gt.create(sc(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ir.create(r.compositeFilter.filters.map(n=>NC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ht()}}(r.compositeFilter.op))}(t):ht()}function EM(t){return dM[t]}function _M(t){return fM[t]}function bM(t){return hM[t]}function nc(t){return{fieldPath:t.canonicalString()}}function sc(t){return Pr.fromServerFormat(t.fieldPath)}function MC(t){return t instanceof Gt?function(r){if(r.op==="=="){if(rb(r.value))return{unaryFilter:{field:nc(r.field),op:"IS_NAN"}};if(tb(r.value))return{unaryFilter:{field:nc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(rb(r.value))return{unaryFilter:{field:nc(r.field),op:"IS_NOT_NAN"}};if(tb(r.value))return{unaryFilter:{field:nc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nc(r.field),op:_M(r.op),value:r.value}}}(t):t instanceof ir?function(r){const n=r.getFilters().map(s=>MC(s));return n.length===1?n[0]:{compositeFilter:{op:bM(r.op),filters:n}}}(t):ht()}function SM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function BC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,r,n,s,i=Et.min(),a=Et.min(),o=Zr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.ct=e}}function TM(t,e){let r;if(e.document)r=gM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=nt.fromSegments(e.noDocument.path),s=ul(e.noDocument.readTime);r=Vr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const n=nt.fromSegments(e.unknownDocument.path),s=ul(e.unknownDocument.version);r=Vr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new Fr(s[0],s[1]);return Et.fromTimestamp(i)}(e.readTime)),r}function Eb(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:Fh(i,a.key),fields:a.data.value.mapValue.fields,updateTime:$c(i,a.version.toTimestamp()),createTime:$c(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:cl(e.version)};else{if(!e.isUnknownDocument())return ht();n.unknownDocument={path:r.path.toArray(),version:cl(e.version)}}return n}function Nh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function cl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ul(t){const e=new Fr(t.seconds,t.nanoseconds);return Et.fromTimestamp(e)}function Lo(t,e){const r=(e.baseMutations||[]).map(i=>qv(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>qv(t.ct,i)),s=Fr.fromMillis(e.localWriteTimeMs);return new Sx(e.batchId,s,r,n)}function Vu(t){const e=ul(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?ul(t.lastLimboFreeSnapshotVersion):Et.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return vt(i.documents.length===1),js(Ef(DC(i.documents[0])))}(t.query):function(i){return js(OC(i))}(t.query),new ri(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Zr.fromBase64String(t.resumeToken))}function UC(t,e){const r=cl(e.snapshotVersion),n=cl(e.lastLimboFreeSnapshotVersion);let s;s=Dh(e.target)?RC(t.ct,e.target):FC(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ll(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function VC(t){const e=OC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rh(e,e.limit,"L"):e}function Lm(t,e){return new Ax(e.largestBatchId,qv(t.ct,e.overlayMutation))}function _b(t,e){const r=e.path.lastSegment();return[t,as(e.path.popLast()),r]}function bb(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:cl(n.readTime),documentKey:as(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{getBundleMetadata(e,r){return Sb(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:ul(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return Sb(e).put(function(s){return{bundleId:s.id,createTime:cl(is(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return Tb(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:VC(i.bundledQuery),readTime:ul(i.readTime)}}(n)})}saveNamedQuery(e,r){return Tb(e).put(function(s){return{name:s.name,readTime:cl(is(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function Sb(t){return dn(t,"bundles")}function Tb(t){return dn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new jp(e,n)}getOverlay(e,r){return yu(e).get(_b(this.userId,r)).next(n=>n?Lm(this.serializer,n):null)}getOverlays(e,r){const n=Ia();return Ce.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Ax(r,a);s.push(this.ht(e,o))}),Ce.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(as(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(yu(e).j("collectionPathOverlayIndex",o))}),Ce.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Ia(),i=as(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return yu(e).U("collectionPathOverlayIndex",a).next(o=>{for(const l of o){const c=Lm(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=Ia();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return yu(e).J({index:"collectionGroupOverlayIndex",range:o},(l,c,u)=>{const d=Lm(this.serializer,c);i.size()<s||d.largestBatchId===a?(i.set(d.getKey(),d),a=d.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return yu(e).put(function(s,i,a){const[o,l,c]=_b(i,a.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Oh(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function yu(t){return dn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{Pt(e){return dn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Zr.fromUint8Array(n):Zr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Ar(e.integerValue));else if("doubleValue"in e){const n=Ar(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Vd(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=mi(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(ho(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?eC(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Bp(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):ht()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Ar(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),nt.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Uo.vt=new Uo;function IM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Ab(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=IM(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class CM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=Ab(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=Ab(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class kM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class DM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Eu{constructor(){this.jt=new CM,this.Ht=new kM(this.jt),this.Jt=new DM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Vo(this.indexId,this.documentKey,this.arrayValue,n)}}function ki(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=wb(t.arrayValue,e.arrayValue),r!==0?r:(r=wb(t.directionalValue,e.directionalValue),r!==0?r:nt.comparator(t.documentKey,e.documentKey)))}function wb(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.Xt=new lr((r,n)=>Pr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(vt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Bv(e);if(r!==void 0&&!this.sn(r))return!1;const n=No(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=n[i];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new lr(Pr.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new G0(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new G0(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new G0(n.field,n.dir==="asc"?0:1)));return new kh(kh.UNKNOWN_ID,this.collectionId,r,Ud.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){var e,r;if(vt(t instanceof Gt||t instanceof ir),t instanceof Gt){if(t instanceof cC){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>Gt.create(t.field,"==",i)))||[];return ir.create(s,"or")}return t}const n=t.filters.map(s=>$C(s));return ir.create(n,t.op)}function PM(t){if(t.getFilters().length===0)return[];const e=Qv($C(t));return vt(jC(e)),Xv(e)||Yv(e)?[e]:e.getFilters()}function Xv(t){return t instanceof Gt}function Yv(t){return t instanceof ir&&Ex(t)}function jC(t){return Xv(t)||Yv(t)||function(r){if(r instanceof ir&&$v(r)){for(const n of r.getFilters())if(!Xv(n)&&!Yv(n))return!1;return!0}return!1}(t)}function Qv(t){if(vt(t instanceof Gt||t instanceof ir),t instanceof Gt)return t;if(t.filters.length===1)return Qv(t.filters[0]);const e=t.filters.map(n=>Qv(n));let r=ir.create(e,t.op);return r=Mh(r),jC(r)?r:(vt(r instanceof ir),vt(Bc(r)),vt(r.filters.length>1),r.filters.reduce((n,s)=>Cx(n,s)))}function Cx(t,e){let r;return vt(t instanceof Gt||t instanceof ir),vt(e instanceof Gt||e instanceof ir),r=t instanceof Gt?e instanceof Gt?function(s,i){return ir.create([s,i],"and")}(t,e):Cb(t,e):e instanceof Gt?Cb(e,t):function(s,i){if(vt(s.filters.length>0&&i.filters.length>0),Bc(s)&&Bc(i))return iC(s,i.getFilters());const a=$v(s)?s:i,o=$v(s)?i:s,l=a.filters.map(c=>Cx(c,o));return ir.create(l,"or")}(t,e),Mh(r)}function Cb(t,e){if(Bc(e))return iC(e,t.getFilters());{const r=e.filters.map(n=>Cx(t,n));return ir.create(r,"or")}}function Mh(t){if(vt(t instanceof Gt||t instanceof ir),t instanceof Gt)return t;const e=t.getFilters();if(e.length===1)return Mh(e[0]);if(sC(t))return t;const r=e.map(s=>Mh(s)),n=[];return r.forEach(s=>{s instanceof Gt?n.push(s):s instanceof ir&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:ir.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.un=new kx}addToCollectionParentIndex(e,r){return this.un.add(r),Ce.resolve()}getCollectionParents(e,r){return Ce.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ce.resolve()}deleteFieldIndex(e,r){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,r){return Ce.resolve()}getDocumentsMatchingTarget(e,r){return Ce.resolve(null)}getIndexType(e,r){return Ce.resolve(0)}getFieldIndexes(e,r){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,r){return Ce.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,r){return Ce.resolve(Ps.min())}updateCollectionGroup(e,r,n){return Ce.resolve()}updateIndexEntries(e,r){return Ce.resolve()}}class kx{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new lr(nr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new lr(nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Uint8Array(0);class FM{constructor(e,r){this.databaseId=r,this.cn=new kx,this.ln=new Eo(n=>ll(n),(n,s)=>yf(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:as(s)};return kb(e).put(i)}return Ce.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[HI(r),""],!1,!0);return kb(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(wa(a.parent))}return n})}addFieldIndex(e,r){const n=_u(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=zl(e);return i.next(o=>{a.put(bb(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=_u(e),s=zl(e),i=Gl(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=_u(e),n=Gl(e),s=zl(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Ce.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new Ib(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Gl(e);let s=!0;const i=new Map;return Ce.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=Lt();const o=[];return Ce.forEach(i,(l,c)=>{Xe("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(l)} to execute ${ll(r)}`);const u=function(E,I){const P=Bv(I);if(P===void 0)return null;for(const D of Ph(E,P.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(c,l),d=function(E,I){const P=new Map;for(const D of No(I))for(const A of Ph(E,D.fieldPath))switch(A.op){case"==":case"in":P.set(D.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return P.set(D.fieldPath.canonicalString(),A.value),Array.from(P.values())}return null}(c,l),f=function(E,I){const P=[];let D=!0;for(const A of No(I)){const _=A.kind===0?ob(E,A.fieldPath,E.startAt):lb(E,A.fieldPath,E.startAt);P.push(_.value),D&&(D=_.inclusive)}return new mo(P,D)}(c,l),h=function(E,I){const P=[];let D=!0;for(const A of No(I)){const _=A.kind===0?lb(E,A.fieldPath,E.endAt):ob(E,A.fieldPath,E.endAt);P.push(_.value),D&&(D=_.inclusive)}return new mo(P,D)}(c,l),p=this.In(l,c,f),v=this.In(l,c,h),g=this.Tn(l,c,d),x=this.En(l.indexId,u,p,f.inclusive,v,h.inclusive,g);return Ce.forEach(x,y=>n.G(y,r.limit).next(E=>{E.forEach(I=>{const P=nt.fromSegments(I.documentKey);a.has(P)||(a=a.add(P),o.push(P))})}))}).next(()=>o)}return Ce.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=PM(ir.create(e.filters,"and")).map(n=>Hv(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,i.length),c=l/(r!=null?r.length:1),u=[];for(let d=0;d<l;++d){const f=r?this.dn(r[d/c]):u0,h=this.An(e,f,n[d%c],s),p=this.Rn(e,f,i[d%c],a),v=o.map(g=>this.An(e,f,g,!0));u.push(...this.createRange(h,p,v))}return u}An(e,r,n,s){const i=new Vo(e,nt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new Vo(e,nt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new Ib(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Ce.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(l){let c=new lr(Pr.comparator),u=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Eu;for(const s of No(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);Uo.vt.It(i,a)}return n.zt()}dn(e){const r=new Eu;return Uo.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Eu;return Uo.vt.It(ol(this.databaseId,r),n.Yt(function(i){const a=No(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Eu);let i=0;for(const a of No(e)){const o=n[i++];for(const l of s)if(this.fn(r,a.fieldPath)&&Hd(o))s=this.gn(s,a,o);else{const c=l.Yt(a.kind);Uo.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const l=new Eu;l.seed(o.zt()),Uo.vt.It(a,l.Yt(r.kind)),i.push(l)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof Gt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=_u(e),s=zl(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Ce.forEach(i,o=>s.get([o.indexId,this.uid]).next(l=>{a.push(function(u,d){const f=d?new Ud(d.sequenceNumber,new Ps(ul(d.readTime),new nt(wa(d.documentKey)),d.largestBatchId)):Ud.empty(),h=u.fields.map(([p,v])=>new G0(Pr.fromServerFormat(p),v));return new kh(u.indexId,u.collectionGroup,h,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ft(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=_u(e),i=zl(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Ce.forEach(o,l=>i.put(bb(l.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Ce.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Ce.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Ce.forEach(o,l=>this.wn(e,s,l).next(c=>{const u=this.Sn(i,l);return c.isEqual(u)?Ce.resolve():this.bn(e,i,l,c,u)}))))})}Dn(e,r,n,s){return Gl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Gl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Gl(e);let i=new lr(ki);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new Vo(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new lr(ki);const s=this.Vn(r,e);if(s==null)return n;const i=Bv(r);if(i!=null){const a=e.data.field(i.fieldPath);if(Hd(a))for(const o of a.arrayValue.values||[])n=n.add(new Vo(r.indexId,e.key,this.dn(o),s))}else n=n.add(new Vo(r.indexId,e.key,u0,s));return n}bn(e,r,n,s,i){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(l,c,u,d,f){const h=l.getIterator(),p=c.getIterator();let v=Hl(h),g=Hl(p);for(;v||g;){let x=!1,y=!1;if(v&&g){const E=u(v,g);E<0?y=!0:E>0&&(x=!0)}else v!=null?y=!0:x=!0;x?(d(g),g=Hl(p)):y?(f(v),v=Hl(h)):(v=Hl(h),g=Hl(p))}}(s,i,ki,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Ce.waitFor(a)}yn(e){let r=1;return zl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>ki(a,o)).filter((a,o,l)=>!o||ki(a,l[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=ki(a,e),l=ki(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&l<0)s.push(a),s.push(a.Zt());else if(l>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,u0,[]],l=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,u0,[]];i.push(IDBKeyRange.bound(o,l))}return i}Cn(e,r){return ki(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Db)}getMinOffset(e,r){return Ce.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||ht())).next(Db)}}function kb(t){return dn(t,"collectionParents")}function Gl(t){return dn(t,"indexEntries")}function _u(t){return dn(t,"indexConfiguration")}function zl(t){return dn(t,"indexState")}function Db(t){vt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;gx(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new Ps(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},(u,d,f)=>(o++,f.delete()));i.push(l.next(()=>{vt(o===1)}));const c=[];for(const u of r.mutations){const d=qI(e,u.key.path,r.batchId);i.push(s.delete(d)),c.push(u.key)}return Ce.waitFor(i).next(()=>c)}function Bh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ht();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class Hp{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){vt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Hp(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Di(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=ac(e),a=Di(e);return a.add({}).next(o=>{vt(typeof o=="number");const l=new Sx(o,r,n,s),c=function(h,p,v){const g=v.baseMutations.map(y=>Oh(h.ct,y)),x=v.mutations.map(y=>Oh(h.ct,y));return{userId:p,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,l),u=[];let d=new lr((f,h)=>Ft(f.canonicalString(),h.canonicalString()));for(const f of s){const h=qI(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),u.push(a.put(c)),u.push(i.put(h,p5))}return d.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=l.keys()}),Ce.waitFor(u).next(()=>l)})}lookupMutationBatch(e,r){return Di(e).get(r).next(n=>n?(vt(n.userId===this.userId),Lo(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ce.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Di(e).J({index:"userMutationsIndex",range:s},(a,o,l)=>{o.userId===this.userId&&(vt(o.batchId>=n),i=Lo(this.serializer,o)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Di(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Di(e).U("userMutationsIndex",r).next(n=>n.map(s=>Lo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=z0(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return ac(e).J({range:s},(a,o,l)=>{const[c,u,d]=a,f=wa(u);if(c===this.userId&&r.path.isEqual(f))return Di(e).get(d).next(h=>{if(!h)throw ht();vt(h.userId===this.userId),i.push(Lo(this.serializer,h))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new lr(Ft);const s=[];return r.forEach(i=>{const a=z0(this.userId,i.path),o=IDBKeyRange.lowerBound(a),l=ac(e).J({range:o},(c,u,d)=>{const[f,h,p]=c,v=wa(h);f===this.userId&&i.path.isEqual(v)?n=n.add(p):d.done()});s.push(l)}),Ce.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=z0(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new lr(Ft);return ac(e).J({range:a},(l,c,u)=>{const[d,f,h]=l,p=wa(f);d===this.userId&&n.isPrefixOf(p)?p.length===s&&(o=o.add(h)):u.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(Di(e).get(i).next(a=>{if(a===null)throw ht();vt(a.userId===this.userId),n.push(Lo(this.serializer,a))}))}),Ce.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return HC(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ce.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ce.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return ac(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const l=wa(i[1]);s.push(l)}else o.done()}).next(()=>{vt(s.length===0)})})}containsKey(e,r){return GC(e,this.userId,r)}Nn(e){return zC(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GC(t,e,r){const n=z0(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return ac(t).J({range:i,H:!0},(o,l,c)=>{const[u,d,f]=o;u===e&&d===s&&(a=!0),c.done()}).next(()=>a)}function Di(t){return dn(t,"mutations")}function ac(t){return dn(t,"documentMutations")}function zC(t){return dn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new dl(0)}static kn(){return new dl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new dl(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Et.fromTimestamp(new Fr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Wl(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(vt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Wl(e).J((a,o)=>{const l=Vu(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>Ce.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Wl(e).J((n,s)=>{const i=Vu(s);r(i)})}qn(e){return Rb(e).get("targetGlobalKey").next(r=>(vt(r!==null),r))}Qn(e,r){return Rb(e).put("targetGlobalKey",r)}Kn(e,r){return Wl(e).put(UC(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=ll(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Wl(e).J({range:s,index:"queryTargetsIndex"},(a,o,l)=>{const c=Vu(o);yf(r,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=zi(e);return r.forEach(a=>{const o=as(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Ce.waitFor(s)}removeMatchingKeys(e,r,n){const s=zi(e);return Ce.forEach(r,i=>{const a=as(i.path);return Ce.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=zi(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=zi(e);let i=Lt();return s.J({range:n,H:!0},(a,o,l)=>{const c=wa(a[1]),u=new nt(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=as(r.path),s=IDBKeyRange.bound([n],[HI(n)],!1,!0);let i=0;return zi(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],l,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Wl(e).get(r).next(n=>n?Vu(n):null)}}function Wl(t){return dn(t,"targets")}function Rb(t){return dn(t,"targetGlobal")}function zi(t){return dn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb([t,e],[r,n]){const s=Ft(t,r);return s===0?Ft(e,n):s}class NM{constructor(e){this.Un=e,this.buffer=new lr(Fb),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Fb(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class MM{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){yo(r)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await _l(r)}await this.Hn(3e5)})}}class BM{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ce.resolve(Ls.oe);const n=new NM(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(Pb)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pb):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,r))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(c=Date.now(),tc()<=jt.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function LM(t,e){return new BM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,r){this.db=e,this.garbageCollector=LM(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return d0(e,n)}removeReference(e,r,n){return d0(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return d0(e,r)}nr(e,r){return function(s,i){let a=!1;return zC(s).Y(o=>GC(s,o,i).next(l=>(l&&(a=!0),Ce.resolve(!l)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const l=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Et.min()),zi(e).delete(function(d){return[0,as(d.path)]}(a))))});s.push(l)}}).next(()=>Ce.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return d0(e,r)}tr(e,r){const n=zi(e);let s,i=Ls.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:l,sequenceNumber:c})=>{a===0?(i!==Ls.oe&&r(new nt(wa(s)),i),i=c,s=l):i=Ls.oe}).next(()=>{i!==Ls.oe&&r(new nt(wa(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function d0(t,e){return zi(t).put(function(n,s){return{targetId:0,path:as(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.changes=new Eo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ce.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Po(e).put(n)}removeEntry(e,r,n){return Po(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Nh(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Vr.newInvalidDocument(r);return Po(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bu(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:Vr.newInvalidDocument(r)};return Po(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bu(r))},(s,i)=>{n={document:this.ir(r,i),size:Bh(i)}}).next(()=>n)}getEntries(e,r){let n=As();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=As(),s=new Cr(nt.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,Bh(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Ce.resolve();let s=new lr(Mb);r.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(bu(s.first()),bu(s.last())),a=s.getIterator();let o=a.getNext();return Po(e).J({index:"documentKeyIndex",range:i},(l,c,u)=>{const d=nt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Mb(o,d)<0;)n(o,null),o=a.getNext();o&&o.isEqual(d)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?u.$(bu(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),Nh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Po(e).U(IDBKeyRange.bound(o,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=As();for(const d of c){const f=this.ir(nt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(_f(r,f)||s.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=As();const a=Nb(r,n),o=Nb(r,Ps.max());return Po(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(l,c,u)=>{const d=this.ir(nt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(d.key,d),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new $M(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Ob(e).get("remoteDocumentGlobalKey").next(r=>(vt(!!r),r))}rr(e,r){return Ob(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=TM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Et.min())))return n}return Vr.newInvalidDocument(e)}}function KC(t){return new VM(t)}class $M extends WC{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Eo(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new lr((i,a)=>Ft(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const l=Eb(this.cr.serializer,a);s=s.add(i.path.popLast());const c=Bh(l);n+=c-o.size,r.push(this.cr.addEntry(e,i,l))}else if(n-=o.size,this.trackRemovals){const l=Eb(this.cr.serializer,a.convertToNoDocument(Et.min()));r.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Ce.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function Ob(t){return dn(t,"remoteDocumentGlobal")}function Po(t){return dn(t,"remoteDocumentsV14")}function bu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nb(t,e){const r=e.documentKey.path.toArray();return[t,Nh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Mb(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=Ft(r[i],n[i]),s)return s;return s=Ft(r.length,n.length),s||(s=Ft(r[r.length-2],n[n.length-2]),s||Ft(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&cd(n.mutation,s,vs.empty(),Fr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Lt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Lt()){const s=Ia();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Lu();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Ia();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Lt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=As();const a=ld(),o=function(){return ld()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof yi)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),cd(u.mutation,c,u.mutation.getFieldMask(),Fr.now())):a.set(c.key,vs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new jM(u,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=ld();let s=new Cr((a,o)=>a-o),i=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||vs.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(s.get(o.batchId)||Lt()).add(l);s=s.insert(o.batchId,d)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=pC();u.forEach(f=>{if(!i.has(f)){const h=_C(r.get(f),n.get(f));h!==null&&d.set(f,h),i=i.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ce.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):_x(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ce.resolve(Ia());let o=-1,l=i;return a.next(c=>Ce.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?Ce.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Lt())).next(u=>({batchId:o,changes:hC(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new nt(r)).next(n=>{let s=Lu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Lu();return this.indexManager.getCollectionParents(e,i).next(o=>Ce.forEach(o,l=>{const c=function(d,f){return new Sl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Vr.newInvalidDocument(u)))});let o=Lu();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&cd(u.mutation,c,vs.empty(),Fr.now()),_f(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ce.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:is(s.createTime)}}(r)),Ce.resolve()}getNamedQuery(e,r){return Ce.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:VC(s.bundledQuery),readTime:is(s.readTime)}}(r)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.overlays=new Cr(nt.comparator),this.Ir=new Map}getOverlay(e,r){return Ce.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ia();return Ce.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ce.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ce.resolve()}getOverlaysForCollection(e,r,n){const s=Ia(),i=r.length+1,a=new nt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ce.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Cr((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=Ia(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Ia(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Ce.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Ax(r,n));let i=this.Ir.get(r);i===void 0&&(i=Lt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.sessionToken=Zr.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.Tr=new lr(fn.Er),this.dr=new lr(fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new fn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new fn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new nt(new nr([])),n=new fn(r,e),s=new fn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new nt(new nr([])),n=new fn(r,e),s=new fn(r,e+1);let i=Lt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new fn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class fn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return nt.comparator(e.key,r.key)||Ft(e.wr,r.wr)}static Ar(e,r){return Ft(e.wr,r.wr)||nt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new lr(fn.Er)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Sx(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new fn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ce.resolve(a)}lookupMutationBatch(e,r){return Ce.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new fn(r,0),s=new fn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new lr(Ft);return r.forEach(s=>{const i=new fn(s,0),a=new fn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;nt.isDocumentKey(i)||(i=i.child(""));const a=new fn(new nt(i),0);let o=new lr(Ft);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Ce.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){vt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ce.forEach(r.mutations,s=>{const i=new fn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new fn(r,0),s=this.br.firstAfterOrEqual(n);return Ce.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.Mr=e,this.docs=function(){return new Cr(nt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ce.resolve(n?n.document.mutableCopy():Vr.newInvalidDocument(r))}getEntries(e,r){let n=As();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Vr.newInvalidDocument(s))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=As();const a=r.path,o=new nt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||gx(GI(u),n)<=0||(s.has(u.key)||_f(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Ce.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ht()}Or(e,r){return Ce.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new qM(this)}getSize(e){return Ce.resolve(this.size)}}class qM extends WC{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ce.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.persistence=e,this.Nr=new Eo(r=>ll(r),yf),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dx,this.targetCount=0,this.kr=dl.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ce.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new dl(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ce.resolve()}updateTargetData(e,r){return this.Kn(r),Ce.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ce.waitFor(i).next(()=>s)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ce.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ce.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ce.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ce.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ce.resolve(n)}containsKey(e,r){return Ce.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ls(0),this.Kr=!1,this.Kr=!0,this.$r=new zM,this.referenceDelegate=e(this),this.Ur=new XM(this),this.indexManager=new RM,this.remoteDocumentCache=function(s){return new KM(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new LC(r),this.Gr=new HM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new GM,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new WM(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("MemoryPersistence","Starting transaction:",e);const s=new YM(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ce.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class YM extends WI{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Jr=new Dx,this.Yr=null}static Zr(e){return new Gp(e)}get Xr(){if(this.Yr)return this.Yr;throw ht()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ce.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ce.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.Xr,n=>{const s=nt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Et.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ce.or([()=>Ce.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Op("createOrUpgrade",r);n<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Y_,{unique:!0}),l.createObjectStore("documentMutations")}(e),Bb(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=Ce.resolve();return n<3&&s>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Bb(e)),a=a.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Y_,{unique:!0});const d=c.store("mutations"),f=u.map(h=>d.put(h));return Ce.waitFor(f)})}(e,i))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:w5});c.createIndex("collectionPathOverlayIndex",I5,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",C5,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:m5});c.createIndex("documentKeyIndex",g5),c.createIndex("collectionGroupIndex",v5)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:b5}).createIndex("sequenceNumberIndex",S5,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:T5}).createIndex("documentKeyIndex",A5,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Bh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Ce.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Ce.forEach(o,l=>{vt(l.userId===i.userId);const c=Lo(this.serializer,l);return HC(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const l=new nr(a),c=function(d){return[0,as(d)]}(l);i.push(r.get(c).next(u=>u?Ce.resolve():(d=>r.put({targetId:0,path:as(d),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>Ce.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:_5});const n=r.store("collectionParents"),s=new kx,i=a=>{if(s.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:as(l)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const l=new nr(a);return i(l.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,l],c)=>{const u=wa(o);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=Vu(s),a=UC(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),l=function(d){return d.document?new nt(nr.fromString(d.document.name).popFirst(5)):d.noDocument?nt.fromSegments(d.noDocument.path):d.unknownDocument?nt.fromSegments(d.unknownDocument.path):ht()}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Ce.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=KC(this.serializer),i=new XC(Gp.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(l=>{var c;let u=(c=o.get(l.userId))!==null&&c!==void 0?c:Lt();Lo(this.serializer,l).keys().forEach(d=>u=u.add(d)),o.set(l.userId,u)}),Ce.forEach(o,(l,c)=>{const u=new yn(c),d=jp.lt(this.serializer,u),f=i.getIndexManager(u),h=Hp.lt(u,this.serializer,f,i.referenceDelegate);return new qC(s,h,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Lv(r,Ls.oe),l).next()})})}}function Bb(t){t.createObjectStore("targetDocuments",{keyPath:y5}).createIndex("documentTargetsIndex",E5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",x5,{unique:!0}),t.createObjectStore("targetGlobal")}const Um="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Px{constructor(e,r,n,s,i,a,o,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Px.D())throw new Qe(Ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UM(this,s),this.Ai=r+"main",this.serializer=new LC(l),this.Ri=new ao(this.Ai,this.hi,new QM(this.serializer)),this.$r=new wM,this.Ur=new OM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KC(this.serializer),this.Gr=new AM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&ns("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qe(Ue.FAILED_PRECONDITION,Um);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ls(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>f0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(yo(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Su(e).get("owner").next(r=>Ce.resolve(this.vi(r)))}Ci(e){return f0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=dn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Ce.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ce.resolve(!0):Su(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Qe(Ue.FAILED_PRECONDITION,Um);return!1}}return!(!this.networkEnabled||!this.inForeground)||f0(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Xe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Lv(e,Ls.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>f0(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Hp.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(l){return l===17?P5:l===16?D5:l===15?xx:l===14?QI:l===13?YI:l===12?k5:l===11?XI:void ht()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new Lv(o,this.Qr?this.Qr.next():Ls.oe),r==="readwrite-primary"?this.wi(a).next(l=>!!l||this.Si(a)).next(l=>{if(!l)throw ns(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Qe(Ue.FAILED_PRECONDITION,zI);return n(a)}).next(l=>this.Di(a).next(()=>l)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Su(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Qe(Ue.FAILED_PRECONDITION,Um)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Su(e).put("owner",r)}static D(){return ao.D()}bi(e){const r=Su(e);return r.get("owner").next(n=>this.vi(n)?(Xe("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ce.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ns(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;Xw()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Xe("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ns("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ns("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Su(t){return dn(t,"owner")}function f0(t){return dn(t,"clientMetadata")}function JM(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Lt(),s=Lt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Xw()?8:KI(un())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new ZM;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(tc()<=jt.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",rc(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ce.resolve()):(tc()<=jt.DEBUG&&Xe("QueryEngine","Query:",rc(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(tc()<=jt.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",rc(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(r))):Ce.resolve())}Yi(e,r){if(cb(r))return Ce.resolve(null);let n=js(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Rh(r,null,"F"),n=js(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Lt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,Rh(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return cb(r)||s.isEqual(Et.min())?Ce.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ce.resolve(null):(tc()<=jt.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rc(r)),this.rs(e,a,r,o5(s,-1)).next(o=>o))})}ts(e,r){let n=new lr(dC(e));return r.forEach((s,i)=>{_f(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return tc()<=jt.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",rc(r)),this.Ji.getDocumentsMatchingQuery(e,r,Ps.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Cr(Ft),this._s=new Eo(i=>ll(i),yf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function QC(t,e,r,n){return new eB(t,e,r,n)}async function JC(t,e){const r=Dt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=Lt();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function tB(t,e){const r=Dt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,f=d.keys();let h=Ce.resolve();return f.forEach(p=>{h=h.next(()=>u.getEntry(l,p)).next(v=>{const g=c.docVersions.get(p);vt(g!==null),v.version.compareTo(g)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Lt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function ZC(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function rB(t,e){const r=Dt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,d).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,d)));let h=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(Zr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,n)),s=s.insert(d,h),function(v,g,x){return v.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,h,u)&&o.push(r.Ur.updateTargetData(i,h))});let l=As(),c=Lt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(nB(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Et.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(d=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Ce.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function nB(t,e,r){let n=Lt(),s=Lt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=As();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Xe("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function sB(t,e){const r=Dt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function aB(t,e){const r=Dt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ce.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new ri(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Jv(t,e,r){const n=Dt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!yo(a))throw a;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Lb(t,e,r){const n=Dt(t);let s=Et.min(),i=Lt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=Dt(l),f=d._s.get(u);return f!==void 0?Ce.resolve(d.os.get(f)):d.Ur.getTargetData(c,u)}(n,a,js(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Et.min(),r?i:Lt())).next(o=>(iB(n,W5(e),o),{documents:o,Ts:i})))}function iB(t,e,r){let n=t.us.get(e)||Et.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class Ub{constructor(){this.activeTargetIds=J5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e4{constructor(){this.so=new Ub,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ub,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0=null;function Vm(){return h0===null?h0=function(){return 268435456+Math.round(2147483648*Math.random())}():h0++,"0x"+h0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class uB extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Vm(),l=this.xo(r,n.toUriEncodedString());Xe("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(Xe("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw sl("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zc}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=lB[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Vm();return new Promise((a,o)=>{const l=new MI;l.setWithCredentials(!0),l.listenOnce(BI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case H0.NO_ERROR:const u=l.getResponseJson();Xe(Pn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case H0.TIMEOUT:Xe(Pn,`RPC '${e}' ${i} timed out`),o(new Qe(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case H0.HTTP_ERROR:const d=l.getStatus();if(Xe(Pn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(x)>=0?x:Ue.UNKNOWN}(h.status);o(new Qe(p,h.message))}else o(new Qe(Ue.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Qe(Ue.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Xe(Pn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Xe(Pn,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Vm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=VI(),o=UI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");Xe(Pn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=a.createWebChannel(u,l);let f=!1,h=!1;const p=new cB({Io:g=>{h?Xe(Pn,`Not sending because RPC '${e}' stream ${s} is closed:`,g):(f||(Xe(Pn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),Xe(Pn,`RPC '${e}' stream ${s} sending:`,g),d.send(g))},To:()=>d.close()}),v=(g,x,y)=>{g.listen(x,E=>{try{y(E)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,Bu.EventType.OPEN,()=>{h||(Xe(Pn,`RPC '${e}' stream ${s} transport opened.`),p.yo())}),v(d,Bu.EventType.CLOSE,()=>{h||(h=!0,Xe(Pn,`RPC '${e}' stream ${s} transport closed`),p.So())}),v(d,Bu.EventType.ERROR,g=>{h||(h=!0,sl(Pn,`RPC '${e}' stream ${s} transport errored:`,g),p.So(new Qe(Ue.UNAVAILABLE,"The operation could not be completed")))}),v(d,Bu.EventType.MESSAGE,g=>{var x;if(!h){const y=g.data[0];vt(!!y);const E=y,I=E.error||((x=E[0])===null||x===void 0?void 0:x.error);if(I){Xe(Pn,`RPC '${e}' stream ${s} received error:`,I);const P=I.status;let D=function(b){const w=qr[b];if(w!==void 0)return TC(w)}(P),A=I.message;D===void 0&&(D=Ue.INTERNAL,A="Unknown error status: "+P+" with message "+I.message),h=!0,p.So(new Qe(D,A)),d.close()}else Xe(Pn,`RPC '${e}' stream ${s} received:`,y),p.bo(y)}}),v(o,LI.STAT_EVENT,g=>{g.stat===Mv.PROXY?Xe(Pn,`RPC '${e}' stream ${s} detected buffering proxy`):g.stat===Mv.NOPROXY&&Xe(Pn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(){return typeof window<"u"?window:null}function Y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t){return new pM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new t4(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ue.RESOURCE_EXHAUSTED?(ns(r.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Qe(Ue.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fB extends r4{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=vM(this.serializer,e),n=function(i){if(!("targetChange"in i))return Et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?is(a.readTime):Et.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Kv(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=Dh(l)?{documents:RC(i,l)}:{query:FC(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=IC(i,a.resumeToken);const c=zv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Et.min())>0){o.readTime=$c(i,a.snapshotVersion.toTimestamp());const c=zv(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=yM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Kv(this.serializer),r.removeTarget=e,this.a_(r)}}class hB extends r4{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return vt(!!e.streamToken),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=xM(e.writeResults,e.commitTime),n=is(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Kv(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Oh(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Qe(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Wv(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Qe(Ue.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Wv(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Qe(Ue.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mB{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ns(r),this.D_=!1):Xe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Tl(this)&&(Xe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Dt(l);c.L_.add(4),await Tf(c),c.q_.set("Unknown"),c.L_.delete(4),await Wp(c)}(this))})}),this.q_=new mB(n,s)}}async function Wp(t){if(Tl(t))for(const e of t.B_)await e(!0)}async function Tf(t){for(const e of t.B_)await e(!1)}function n4(t,e){const r=Dt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Mx(r)?Nx(r):tu(r).r_()&&Ox(r,e))}function Fx(t,e){const r=Dt(t),n=tu(r);r.N_.delete(e),n.r_()&&s4(r,e),r.N_.size===0&&(n.r_()?n.o_():Tl(r)&&r.q_.set("Unknown"))}function Ox(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}tu(t).A_(e)}function s4(t,e){t.Q_.xe(e),tu(t).R_(e)}function Nx(t){t.Q_=new uM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),tu(t).start(),t.q_.v_()}function Mx(t){return Tl(t)&&!tu(t).n_()&&t.N_.size>0}function Tl(t){return Dt(t).L_.size===0}function a4(t){t.Q_=void 0}async function vB(t){t.q_.set("Online")}async function xB(t){t.N_.forEach((e,r)=>{Ox(t,e)})}async function yB(t,e){a4(t),Mx(t)?(t.q_.M_(e),Nx(t)):t.q_.set("Unknown")}async function EB(t,e,r){if(t.q_.set("Online"),e instanceof wC&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Lh(t,n)}else if(e instanceof X0?t.Q_.Ke(e):e instanceof AC?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Et.min()))try{const n=await ZC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Zr.EMPTY_BYTE_STRING,u.snapshotVersion)),s4(i,l);const d=new ri(u.target,l,c,u.sequenceNumber);Ox(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Xe("RemoteStore","Failed to raise snapshot:",n),await Lh(t,n)}}async function Lh(t,e,r){if(!yo(e))throw e;t.L_.add(1),await Tf(t),t.q_.set("Offline"),r||(r=()=>ZC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Xe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Wp(t)})}function i4(t,e){return e().catch(r=>Lh(t,r,e))}async function Af(t){const e=Dt(t),r=go(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_B(e);)try{const s=await sB(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,bB(e,s)}catch(s){await Lh(e,s)}o4(e)&&l4(e)}function _B(t){return Tl(t)&&t.O_.length<10}function bB(t,e){t.O_.push(e);const r=go(t);r.r_()&&r.V_&&r.m_(e.mutations)}function o4(t){return Tl(t)&&!go(t).n_()&&t.O_.length>0}function l4(t){go(t).start()}async function SB(t){go(t).p_()}async function TB(t){const e=go(t);for(const r of t.O_)e.m_(r.mutations)}async function AB(t,e,r){const n=t.O_.shift(),s=Tx.from(n,e,r);await i4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Af(t)}async function wB(t,e){e&&go(t).V_&&await async function(n,s){if(function(a){return oM(a)&&a!==Ue.ABORTED}(s.code)){const i=n.O_.shift();go(n).s_(),await i4(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Af(n)}}(t,e),o4(t)&&l4(t)}async function $b(t,e){const r=Dt(t);r.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const n=Tl(r);r.L_.add(3),await Tf(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Wp(r)}async function IB(t,e){const r=Dt(t);e?(r.L_.delete(2),await Wp(r)):e||(r.L_.add(2),await Tf(r),r.q_.set("Unknown"))}function tu(t){return t.K_||(t.K_=function(r,n,s){const i=Dt(r);return i.w_(),new fB(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:vB.bind(null,t),Ro:xB.bind(null,t),mo:yB.bind(null,t),d_:EB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Mx(t)?Nx(t):t.q_.set("Unknown")):(await t.K_.stop(),a4(t))})),t.K_}function go(t){return t.U_||(t.U_=function(r,n,s){const i=Dt(r);return i.w_(),new hB(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SB.bind(null,t),mo:wB.bind(null,t),f_:TB.bind(null,t),g_:AB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Af(t)):(await t.U_.stop(),t.O_.length>0&&(Xe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Bx(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lx(t,e){if(ns("AsyncQueue",`${e}: ${t}`),yo(t))return new Qe(Ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.comparator=e?(r,n)=>e(r,n)||nt.comparator(r.key,n.key):(r,n)=>nt.comparator(r.key,n.key),this.keyedMap=Lu(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new Tc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Tc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Tc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.W_=new Cr(nt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ht():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class jc{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new jc(e,r,Tc.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kB{constructor(){this.queries=Hb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Dt(r),i=s.queries;s.queries=Hb(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new Qe(Ue.ABORTED,"Firestore shutting down"))}}function Hb(){return new Eo(t=>uC(t),Lp)}async function Ux(t,e){const r=Dt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new CB,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=Lx(a,`Initialization of query '${rc(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&$x(r)}async function Vx(t,e){const r=Dt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function DB(t,e){const r=Dt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&$x(r)}function PB(t,e,r){const n=Dt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function $x(t){t.Y_.forEach(e=>{e.next()})}var Zv,Gb;(Gb=Zv||(Zv={})).ea="default",Gb.Cache="cache";class jx{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new jc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.key=e}}class u4{constructor(e){this.key=e}}class RB{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Lt(),this.mutatedKeys=Lt(),this.Aa=dC(e),this.Ra=new Tc(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new jb,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const f=s.get(u),h=_f(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),v=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?p!==v&&(n.track({type:3,doc:h}),g=!0):this.ga(f,h)||(n.track({type:2,doc:h}),g=!0,(l&&this.Aa(h,l)>0||c&&this.Aa(h,c)<0)&&(o=!0)):!f&&h?(n.track({type:0,doc:h}),g=!0):f&&!h&&(n.track({type:1,doc:f}),g=!0,(l||c)&&(o=!0)),g&&(h?(a=a.add(h),i=v?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,d)=>function(h,p){const v=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return v(h)-v(p)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new jc(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Lt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new u4(n))}),this.da.forEach(n=>{e.has(n)||r.push(new c4(n))}),r}ba(e){this.Ta=e.Ts,this.da=Lt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return jc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FB{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class OB{constructor(e){this.key=e,this.va=!1}}class NB{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Eo(o=>uC(o),Lp),this.Ma=new Map,this.xa=new Set,this.Oa=new Cr(nt.comparator),this.Na=new Map,this.La=new Dx,this.Ba={},this.ka=new Map,this.qa=dl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MB(t,e,r=!0){const n=g4(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await d4(n,e,r,!0),s}async function BB(t,e){const r=g4(t);await d4(r,e,!0,!1)}async function d4(t,e,r,n){const s=await aB(t.localStore,js(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await LB(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&n4(t.remoteStore,s),o}async function LB(t,e,r,n,s){t.Ka=(d,f,h)=>async function(v,g,x,y){let E=g.view.ma(x);E.ns&&(E=await Lb(v.localStore,g.query,!1).then(({documents:A})=>g.view.ma(A,E)));const I=y&&y.targetChanges.get(g.targetId),P=y&&y.targetMismatches.get(g.targetId)!=null,D=g.view.applyChanges(E,v.isPrimaryClient,I,P);return Wb(v,g.targetId,D.wa),D.snapshot}(t,d,f,h);const i=await Lb(t.localStore,e,!0),a=new RB(e,i.Ts),o=a.ma(i.documents),l=Sf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);Wb(t,r,c.wa);const u=new FB(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function UB(t,e,r){const n=Dt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Lp(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Jv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Fx(n.remoteStore,s.targetId),e1(n,s.targetId)}).catch(_l)):(e1(n,s.targetId),await Jv(n.localStore,s.targetId,!0))}async function VB(t,e){const r=Dt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Fx(r.remoteStore,n.targetId))}async function $B(t,e,r){const n=v4(t);try{const s=await function(a,o){const l=Dt(a),c=Fr.now(),u=o.reduce((h,p)=>h.add(p.key),Lt());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=As(),v=Lt();return l.cs.getEntries(h,u).next(g=>{p=g,p.forEach((x,y)=>{y.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(g=>{d=g;const x=[];for(const y of o){const E=aM(y,d.get(y.key).overlayedDocument);E!=null&&x.push(new yi(y.key,E,rC(E.value.mapValue),on.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,x,o)}).next(g=>{f=g;const x=g.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(h,g.batchId,x)})}).then(()=>({batchId:f.batchId,changes:hC(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new Cr(Ft)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await wf(n,s.changes),await Af(n.remoteStore)}catch(s){const i=Lx(s,"Failed to persist write");r.reject(i)}}async function f4(t,e){const r=Dt(t);try{const n=await rB(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?vt(a.va):s.removedDocuments.size>0&&(vt(a.va),a.va=!1))}),await wf(r,n,e)}catch(n){await _l(n)}}function zb(t,e,r){const n=Dt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Dt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.j_)f.Z_(o)&&(c=!0)}),c&&$x(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function jB(t,e,r){const n=Dt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Cr(nt.comparator);a=a.insert(i,Vr.newNoDocument(i,Et.min()));const o=Lt().add(i),l=new $p(Et.min(),new Map,new Cr(Ft),a,o);await f4(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),Hx(n)}else await Jv(n.localStore,e,!1).then(()=>e1(n,e,r)).catch(_l)}async function HB(t,e){const r=Dt(t),n=e.batch.batchId;try{const s=await tB(r.localStore,e);p4(r,n,null),h4(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await wf(r,s)}catch(s){await _l(s)}}async function GB(t,e,r){const n=Dt(t);try{const s=await function(a,o){const l=Dt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(vt(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);p4(n,e,r),h4(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await wf(n,s)}catch(s){await _l(s)}}function h4(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function p4(t,e,r){const n=Dt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function e1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||m4(t,n)})}function m4(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Fx(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Hx(t))}function Wb(t,e,r){for(const n of r)n instanceof c4?(t.La.addReference(n.key,e),zB(t,n)):n instanceof u4?(Xe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||m4(t,n.key)):ht()}function zB(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Xe("SyncEngine","New document in limbo: "+r),t.xa.add(n),Hx(t))}function Hx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new nt(nr.fromString(e)),n=t.qa.next();t.Na.set(n,new OB(r)),t.Oa=t.Oa.insert(r,n),n4(t.remoteStore,new ri(js(Ef(r.path)),n,"TargetPurposeLimboResolution",Ls.oe))}}async function wf(t,e,r){const n=Dt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Rx.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Dt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ce.forEach(c,f=>Ce.forEach(f.$i,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>Ce.forEach(f.Ui,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!yo(d))throw d;Xe("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.os.get(f),p=h.snapshotVersion,v=h.withLastLimboFreeSnapshotVersion(p);u.os=u.os.insert(f,v)}}}(n.localStore,i))}async function WB(t,e){const r=Dt(t);if(!r.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const n=await JC(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new Qe(Ue.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await wf(r,n.hs)}}function KB(t,e){const r=Dt(t),n=r.Na.get(e);if(n&&n.va)return Lt().add(n.key);{let s=Lt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function g4(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jB.bind(null,e),e.Ca.d_=DB.bind(null,e.eventManager),e.Ca.$a=PB.bind(null,e.eventManager),e}function v4(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GB.bind(null,e),e}class Wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return QC(this.persistence,new YC,e.initialUser,this.serializer)}Ga(e){return new XC(Gp.Zr,this.serializer)}Wa(e){return new e4}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wd.provider={build:()=>new Wd};class qB extends Wd{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await v4(this.Ja.syncEngine),await Af(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return QC(this.persistence,new YC,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new MM(n,e.asyncQueue,r)}Ha(e,r){const n=new d5(r,this.persistence);return new u5(e.asyncQueue,n)}Ga(e){const r=JM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new Px(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,dB(),Y0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new e4}}class Uh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>zb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=WB.bind(null,this.syncEngine),await IB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kB}()}createDatastore(e){const r=zp(e.databaseInfo.databaseId),n=function(i){return new uB(i)}(e.databaseInfo);return function(i,a,o,l){return new pB(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new gB(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>zb(this.syncEngine,r,0),function(){return Vb.D()?new Vb:new oB}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const d=new NB(s,i,a,o,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Dt(s);Xe("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Tf(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Uh.provider={build:()=>new Uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=jI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Xe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Xe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Lx(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function $m(t,e){t.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await JC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await YB(t);Xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>$b(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>$b(e.remoteStore,s)),t._onlineComponents=e}async function YB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await $m(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ue.FAILED_PRECONDITION||s.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;sl("Error using user provided cache. Falling back to memory cache: "+r),await $m(t,new Wd)}}else Xe("FirestoreClient","Using default OfflineComponentProvider"),await $m(t,new Wd);return t._offlineComponents}async function x4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe("FirestoreClient","Using user provided OnlineComponentProvider"),await Kb(t,t._uninitializedComponentsProvider._online)):(Xe("FirestoreClient","Using default OnlineComponentProvider"),await Kb(t,new Uh))),t._onlineComponents}function QB(t){return x4(t).then(e=>e.syncEngine)}async function Vh(t){const e=await x4(t),r=e.eventManager;return r.onListen=MB.bind(null,e.syncEngine),r.onUnlisten=UB.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=BB.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=VB.bind(null,e.syncEngine),r}function JB(t,e,r={}){const n=new Pa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Gx({next:f=>{u.Za(),a.enqueueAndForget(()=>Vx(i,d));const h=f.docs.has(o);!h&&f.fromCache?c.reject(new Qe(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Qe(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new jx(Ef(o.path),u,{includeMetadataChanges:!0,_a:!0});return Ux(i,d)}(await Vh(t),t.asyncQueue,e,r,n)),n.promise}function ZB(t,e,r={}){const n=new Pa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new Gx({next:f=>{u.Za(),a.enqueueAndForget(()=>Vx(i,d)),f.fromCache&&l.source==="server"?c.reject(new Qe(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new jx(o,u,{includeMetadataChanges:!0,_a:!0});return Ux(i,d)}(await Vh(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t,e,r){if(!r)throw new Qe(Ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eL(t,e,r,n){if(e===!0&&n===!0)throw new Qe(Ue.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Xb(t){if(!nt.isDocumentKey(t))throw new Qe(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yb(t){if(nt.isDocumentKey(t))throw new Qe(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ht()}function jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qe(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Kp(t);throw new Qe(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function tL(t,e){if(e<=0)throw new Qe(Ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qe(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y4((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Qe(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Qe(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Qe(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qp{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new J6;switch(n.type){case"firstParty":return new r5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Qe(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=qb.get(r);n&&(Xe("ComponentProvider","Removing Datastore"),qb.delete(r),n.terminate())}(this),Promise.resolve()}}function rL(t,e,r,n={}){var s;const i=(t=jn(t,qp))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=yn.MOCK_USER;else{o=qw(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Qe(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yn(c)}t._authCredentials=new Z6(new $I(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class Hn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class io extends La{constructor(e,r,n){super(e,r,Ef(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new nt(e))}withConverter(e){return new io(this.firestore,e,this._path)}}function Ht(t,e,...r){if(t=or(t),E4("collection","path",e),t instanceof qp){const n=nr.fromString(e,...r);return Yb(n),new io(t,null,n)}{if(!(t instanceof Hn||t instanceof io))throw new Qe(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(nr.fromString(e,...r));return Yb(n),new io(t.firestore,null,n)}}function xt(t,e,...r){if(t=or(t),arguments.length===1&&(e=jI.newId()),E4("doc","path",e),t instanceof qp){const n=nr.fromString(e,...r);return Xb(n),new Hn(t,null,new nt(n))}{if(!(t instanceof Hn||t instanceof io))throw new Qe(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(nr.fromString(e,...r));return Xb(n),new Hn(t.firestore,t instanceof io?t.converter:null,new nt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new t4(this,"async_queue_retry"),this.Vu=()=>{const n=Y0();n&&Xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Y0();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Y0();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Pa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yo(e))throw e;Xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw ns("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Bx.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ht()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function Zb(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=-1;class da extends qp{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Jb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jb(e),this._firestoreClient=void 0,await e}}}function _o(t,e){const r=typeof t=="object"?t:pf(),n=typeof t=="string"?t:"(default)",s=hf(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=tx("firestore");i&&rL(s,...i)}return s}function If(t){if(t._terminated)throw new Qe(Ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_4(t),t._firestoreClient}function _4(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new F5(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,y4(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XB(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function nL(t,e){sl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return sL(t,Uh.provider,{build:n=>new qB(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function sL(t,e,r){if((t=jn(t,da))._firestoreClient||t._terminated)throw new Qe(Ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Qe(Ue.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},_4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hc(Zr.fromBase64String(e))}catch(r){throw new Qe(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Hc(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Qe(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function aL(){return new ru("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Qe(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Qe(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=/^__.*__$/;class oL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new yi(e,this.data,this.fieldMask,r,this.fieldTransforms):new eu(e,this.data,r,this.fieldTransforms)}}class b4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new yi(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function S4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class Kx{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Kx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $h(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(S4(this.Cu)&&iL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||zp(e)}Qu(e,r,n,s=!1){return new Kx({Cu:e,methodName:r,qu:n,path:Pr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nu(t){const e=t._freezeSettings(),r=zp(t._databaseId);return new lL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function qx(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);Yx("Data must be an object, but it was:",a,n);const o=I4(n,a);let l,c;if(i.merge)l=new vs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const f=t1(e,d,r);if(!a.contains(f))throw new Qe(Ue.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);k4(u,f)||u.push(f)}l=new vs(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new oL(new Bn(o),l,c)}class Yp extends Xp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yp}}class Xx extends Xp{_toFieldTransform(e){return new EC(e.path,new Lc)}isEqual(e){return e instanceof Xx}}function T4(t,e,r,n){const s=t.Qu(1,e,r);Yx("Data must be an object, but it was:",s,n);const i=[],a=Bn.empty();bl(n,(l,c)=>{const u=Qx(e,l,r);c=or(c);const d=s.Nu(u);if(c instanceof Yp)i.push(u);else{const f=Cf(c,d);f!=null&&(i.push(u),a.set(u,f))}});const o=new vs(i);return new b4(a,o,s.fieldTransforms)}function A4(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[t1(e,n,r)],l=[s];if(i.length%2!=0)throw new Qe(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)o.push(t1(e,i[f])),l.push(i[f+1]);const c=[],u=Bn.empty();for(let f=o.length-1;f>=0;--f)if(!k4(c,o[f])){const h=o[f];let p=l[f];p=or(p);const v=a.Nu(h);if(p instanceof Yp)c.push(h);else{const g=Cf(p,v);g!=null&&(c.push(h),u.set(h,g))}}const d=new vs(c);return new b4(u,d,a.fieldTransforms)}function w4(t,e,r,n=!1){return Cf(r,t.Qu(n?4:3,e))}function Cf(t,e){if(C4(t=or(t)))return Yx("Unsupported field value:",e,t),I4(t,e);if(t instanceof Xp)return function(n,s){if(!S4(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Cf(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=or(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Z5(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Fr.fromDate(n);return{timestampValue:$c(s.serializer,i)}}if(n instanceof Fr){const i=new Fr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$c(s.serializer,i)}}if(n instanceof zx)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hc)return{bytesValue:IC(s.serializer,n._byteString)};if(n instanceof Hn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ix(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Wx)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return bx(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Kp(n)}`)}(t,e)}function I4(t,e){const r={};return JI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bl(t,(n,s)=>{const i=Cf(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function C4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fr||t instanceof zx||t instanceof Hc||t instanceof Hn||t instanceof Xp||t instanceof Wx)}function Yx(t,e,r){if(!C4(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Kp(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function t1(t,e,r){if((e=or(e))instanceof ru)return e._internalPath;if(typeof e=="string")return Qx(t,e);throw $h("Field path arguments must be of type string or ",t,!1,void 0,r)}const cL=new RegExp("[~\\*/\\[\\]]");function Qx(t,e,r){if(e.search(cL)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ru(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function $h(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new Qe(Ue.INVALID_ARGUMENT,o+t+l)}function k4(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Qp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class uL extends Jx{data(){return super.data()}}function Qp(t,e){return typeof e=="string"?Qx(t,e):e instanceof ru?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Qe(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zx{}class Jp extends Zx{}function Jr(t,e,...r){let n=[];e instanceof Zx&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof ey).length,o=i.filter(l=>l instanceof Zp).length;if(a>1||a>0&&o>0)throw new Qe(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Zp extends Jp{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Zp(e,r,n)}_apply(e){const r=this._parse(e);return P4(e._query,r),new La(e.firestore,e.converter,Gv(e._query,r))}_parse(e){const r=nu(e.firestore);return function(i,a,o,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Qe(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){r2(d,u);const h=[];for(const p of d)h.push(t2(l,i,p));f={arrayValue:{values:h}}}else f=t2(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||r2(d,u),f=w4(o,a,d,u==="in"||u==="not-in");return Gt.create(c,u,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function xs(t,e,r){const n=e,s=Qp("where",t);return Zp._create(s,n,r)}class ey extends Zx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ey(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ir.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)P4(a,l),a=Gv(a,l)}(e._query,r),new La(e.firestore,e.converter,Gv(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends Jp{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ty(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new Qe(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Qe(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gd(i,a)}(e._query,this._field,this._direction);return new La(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Sl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Ja(t,e="asc"){const r=e,n=Qp("orderBy",t);return ty._create(n,r)}class ry extends Jp{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new ry(e,r,n)}_apply(e){return new La(e.firestore,e.converter,Rh(e._query,this._limit,this._limitType))}}function Wi(t){return tL("limit",t),ry._create("limit",t,"F")}class ny extends Jp{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new ny(e,r,n)}_apply(e){const r=fL(e,this.type,this._docOrFields,this._inclusive);return new La(e.firestore,e.converter,function(s,i){return new Sl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function dL(...t){return ny._create("startAfter",t,!1)}function fL(t,e,r,n){if(r[0]=or(r[0]),r[0]instanceof Jx)return function(i,a,o,l,c){if(!l)throw new Qe(Ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Sc(i))if(d.field.isKeyField())u.push(ol(a,l.key));else{const f=l.data.field(d.field);if(Mp(f))throw new Qe(Ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const h=d.field.canonicalString();throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(f)}return new mo(u,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=nu(t.firestore);return function(a,o,l,c,u,d){const f=a.explicitOrderBy;if(u.length>f.length)throw new Qe(Ue.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let p=0;p<u.length;p++){const v=u[p];if(f[p].field.isKeyField()){if(typeof v!="string")throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!_x(a)&&v.indexOf("/")!==-1)throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const g=a.path.child(nr.fromString(v));if(!nt.isDocumentKey(g))throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const x=new nt(g);h.push(ol(o,x))}else{const g=w4(l,c,v);h.push(g)}}return new mo(h,d)}(t._query,t.firestore._databaseId,s,e,r,n)}}function t2(t,e,r){if(typeof(r=or(r))=="string"){if(r==="")throw new Qe(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_x(e)&&r.indexOf("/")!==-1)throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(nr.fromString(r));if(!nt.isDocumentKey(n))throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ol(t,new nt(n))}if(r instanceof Hn)return ol(t,r._key);throw new Qe(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kp(r)}.`)}function r2(t,e){if(!Array.isArray(t)||t.length===0)throw new Qe(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function P4(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Qe(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class hL{convertValue(e,r="none"){switch(il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ht()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return bl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Ar(a.doubleValue));return new Wx(i)}convertGeoPoint(e){return new zx(Ar(e.latitude),Ar(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=yx(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){const r=mi(e);return new Fr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=nr.fromString(e);vt(BC(n));const s=new al(n.get(1),n.get(3)),i=new nt(n.popFirst(5));return s.isEqual(r)||ns(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class R4 extends Jx{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Q0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Qp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Q0 extends R4{data(e={}){return super.data(e)}}class F4{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new $u(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Q0(this._firestore,this._userDataWriter,n.key,n,new $u(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Qe(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Q0(s._firestore,s._userDataWriter,o.doc.key,o.doc,new $u(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Q0(s._firestore,s._userDataWriter,o.doc.key,o.doc,new $u(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:pL(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function pL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){t=jn(t,Hn);const e=jn(t.firestore,da);return JB(If(e),t._key).then(r=>O4(e,t,r))}class ay extends hL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,r)}}function fr(t){t=jn(t,La);const e=jn(t.firestore,da),r=If(e),n=new ay(e);return D4(t._query),ZB(r,t._query).then(s=>new F4(e,n,t,s))}function br(t,e,r){t=jn(t,Hn);const n=jn(t.firestore,da),s=sy(t.converter,e,r);return kf(n,[qx(nu(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,on.none())])}function iy(t,e,r,...n){t=jn(t,Hn);const s=jn(t.firestore,da),i=nu(s);let a;return a=typeof(e=or(e))=="string"||e instanceof ru?A4(i,"updateDoc",t._key,e,r,n):T4(i,"updateDoc",t._key,e),kf(s,[a.toMutation(t._key,on.exists(!0))])}function Gc(t){return kf(jn(t.firestore,da),[new bf(t._key,on.none())])}function mL(t,e){const r=jn(t.firestore,da),n=xt(t),s=sy(t.converter,e);return kf(r,[qx(nu(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,on.exists(!1))]).then(()=>n)}function Ac(t,...e){var r,n,s;t=or(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Zb(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Zb(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(t instanceof Hn)c=jn(t.firestore,da),u=Ef(t._key.path),l={next:d=>{e[a]&&e[a](O4(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=jn(t,La);c=jn(d.firestore,da),u=d._query;const f=new ay(c);l={next:h=>{e[a]&&e[a](new F4(c,f,d,h))},error:e[a+1],complete:e[a+2]},D4(t._query)}return function(f,h,p,v){const g=new Gx(v),x=new jx(h,g,p);return f.asyncQueue.enqueueAndForget(async()=>Ux(await Vh(f),x)),()=>{g.Za(),f.asyncQueue.enqueueAndForget(async()=>Vx(await Vh(f),x))}}(If(c),u,o,l)}function kf(t,e){return function(n,s){const i=new Pa;return n.asyncQueue.enqueueAndForget(async()=>$B(await QB(n),s,i)),i.promise}(If(t),e)}function O4(t,e,r){const n=r.docs.get(e._key),s=new ay(t);return new R4(t,s,e._key,n,new $u(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=nu(e)}set(e,r,n){this._verifyNotCommitted();const s=jm(e,this._firestore),i=sy(s.converter,r,n),a=qx(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,on.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=jm(e,this._firestore);let a;return a=typeof(r=or(r))=="string"||r instanceof ru?A4(this._dataReader,"WriteBatch.update",i._key,r,n,s):T4(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=jm(e,this._firestore);return this._mutations=this._mutations.concat(new bf(r._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jm(t,e){if((t=or(t)).firestore!==e)throw new Qe(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function fl(){return new Xx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t){return If(t=jn(t,da)),new gL(t,e=>kf(t,e))}(function(e,r=!0){(function(s){Zc=s})(El),uo(new fi("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new da(new e5(n.getProvider("auth-internal")),new s5(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Qe(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),$s(K_,"4.7.3",e),$s(K_,"4.7.3","esm2017")})();var vL="firebase",xL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s(vL,xL,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="firebasestorage.googleapis.com",B4="storageBucket",yL=2*60*1e3,EL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends ha{constructor(e,r,n=0){super(Hm(e),`Firebase Storage: ${r} (${Hm(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jr||(jr={}));function Hm(t){return"storage/"+t}function oy(){const t="An unknown error occurred, please check the error payload for server response.";return new Gr(jr.UNKNOWN,t)}function _L(t){return new Gr(jr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function bL(t){return new Gr(jr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gr(jr.UNAUTHENTICATED,t)}function TL(){return new Gr(jr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AL(t){return new Gr(jr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wL(){return new Gr(jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IL(){return new Gr(jr.CANCELED,"User canceled the upload/download.")}function CL(t){return new Gr(jr.INVALID_URL,"Invalid URL '"+t+"'.")}function kL(t){return new Gr(jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function DL(){return new Gr(jr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+B4+"' property when initializing the app?")}function PL(){return new Gr(jr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RL(){return new Gr(jr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function FL(t){return new Gr(jr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function r1(t){return new Gr(jr.INVALID_ARGUMENT,t)}function L4(){return new Gr(jr.APP_DELETED,"The Firebase app was deleted.")}function OL(t){return new Gr(jr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ud(t,e){return new Gr(jr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Tu(t){throw new Gr(jr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ws.makeFromUrl(e,r)}catch{return new ws(e,"")}if(n.path==="")return n;throw kL(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),p={bucket:1,path:3},v=r===M4?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${g}`,"i"),E=[{regex:o,indices:l,postModify:i},{regex:h,indices:p,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<E.length;I++){const P=E[I],D=P.regex.exec(e);if(D){const A=D[P.indices.bucket];let _=D[P.indices.path];_||(_=""),n=new ws(A,_),P.postModify(n);break}}if(n==null)throw CL(e);return n}}class NL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t,e,r){let n=1,s=null,i=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){s=setTimeout(()=>{s=null,t(h,l())},g)}function f(){i&&clearTimeout(i)}function h(g,...x){if(c){f();return}if(g){f(),u.call(null,g,...x);return}if(l()||a){f(),u.call(null,g,...x);return}n<64&&(n*=2);let E;o===1?(o=2,E=0):E=(n+Math.random())*1e3,d(E)}let p=!1;function v(g){p||(p=!0,f(),!c&&(s!==null?(g||(o=2),clearTimeout(s),d(0)):g||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,v(!0)},r),v}function BL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){return t!==void 0}function UL(t){return typeof t=="object"&&!Array.isArray(t)}function ly(t){return typeof t=="string"||t instanceof String}function n2(t){return cy()&&t instanceof Blob}function cy(){return typeof Blob<"u"}function s2(t,e,r,n){if(n<e)throw r1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw r1(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function U4(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Yo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yo||(Yo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,r,n,s,i,a,o,l,c,u,d,f=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new p0(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===Yo.NO_ERROR,l=i.getStatus();if(!o||VL(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Yo.ABORT;n(!1,new p0(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new p0(c,i))})},r=(n,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());LL(l)?i(l):i()}catch(l){a(l)}else if(o!==null){const l=oy();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(s.canceled){const l=this.appDelete_?L4():IL();a(l)}else{const l=wL();a(l)}};this.canceled_?r(!1,new p0(!1,null,!0)):this.backoffId_=ML(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class p0{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function jL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WL(t,e,r,n,s,i,a=!0){const o=U4(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return GL(c,e),jL(c,r),HL(c,i),zL(c,n),new $L(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qL(...t){const e=KL();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(cy())return new Blob(t);throw new Gr(jr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function XL(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){if(typeof atob>"u")throw FL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gm{constructor(e,r){this.data=e,this.contentType=r||null}}function QL(t,e){switch(t){case Ca.RAW:return new Gm(V4(e));case Ca.BASE64:case Ca.BASE64URL:return new Gm($4(t,e));case Ca.DATA_URL:return new Gm(ZL(e),e9(e))}throw oy()}function V4(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=t.charCodeAt(++r);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function JL(t){let e;try{e=decodeURIComponent(t)}catch{throw ud(Ca.DATA_URL,"Malformed data URL.")}return V4(e)}function $4(t,e){switch(t){case Ca.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ud(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ca.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ud(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=YL(e)}catch(s){throw s.message.includes("polyfill")?s:ud(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class j4{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw ud(Ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=t9(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function ZL(t){const e=new j4(t);return e.base64?$4(Ca.BASE64,e.rest):JL(e.rest)}function e9(t){return new j4(t).contentType}function t9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,r){let n=0,s="";n2(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(n2(this.data_)){const n=this.data_,s=XL(n,e,r);return s===null?null:new Ki(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Ki(n,!0)}}static getBlob(...e){if(cy()){const r=e.map(n=>n instanceof Ki?n.data_:n);return new Ki(qL.apply(null,r))}else{const r=e.map(a=>ly(a)?QL(Ca.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new Ki(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){let e;try{e=JSON.parse(t)}catch{return null}return UL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function n9(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function G4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t,e){return e}class qn{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||s9}}let m0=null;function a9(t){return!ly(t)||t.length<2?t:G4(t)}function z4(){if(m0)return m0;const t=[];t.push(new qn("bucket")),t.push(new qn("generation")),t.push(new qn("metageneration")),t.push(new qn("name","fullPath",!0));function e(i,a){return a9(a)}const r=new qn("name");r.xform=e,t.push(r);function n(i,a){return a!==void 0?Number(a):a}const s=new qn("size");return s.xform=n,t.push(s),t.push(new qn("timeCreated")),t.push(new qn("updated")),t.push(new qn("md5Hash",null,!0)),t.push(new qn("cacheControl",null,!0)),t.push(new qn("contentDisposition",null,!0)),t.push(new qn("contentEncoding",null,!0)),t.push(new qn("contentLanguage",null,!0)),t.push(new qn("contentType",null,!0)),t.push(new qn("metadata","customMetadata",!0)),m0=t,m0}function i9(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new ws(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function o9(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const a=r[i];n[a.local]=a.xform(n,e[a.server])}return i9(n,t),n}function W4(t,e,r){const n=H4(e);return n===null?null:o9(t,n,r)}function l9(t,e,r,n){const s=H4(e);if(s===null||!ly(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+a(u)+"/o/"+a(d),h=em(f,r,n),p=U4({alt:"media",token:c});return h+p})[0]}function c9(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class uy{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t){if(!t)throw oy()}function u9(t,e){function r(n,s){const i=W4(t,s,e);return K4(i!==null),i}return r}function d9(t,e){function r(n,s){const i=W4(t,s,e);return K4(i!==null),l9(i,s,t.host,t._protocol)}return r}function q4(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=TL():s=SL():r.getStatus()===402?s=bL(t.bucket):r.getStatus()===403?s=AL(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function X4(t){const e=q4(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=_L(t.path)),i.serverResponse=s.serverResponse,i}return r}function f9(t,e,r){const n=e.fullServerUrl(),s=em(n,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new uy(s,i,d9(t,r),a);return o.errorHandler=X4(e),o}function h9(t,e){const r=e.fullServerUrl(),n=em(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(l,c){}const o=new uy(n,s,a,i);return o.successCodes=[200,204],o.errorHandler=X4(e),o}function p9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function m9(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=p9(null,e)),n}function g9(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=m9(e,n,s),u=c9(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Ki.getBlob(d,n,f);if(h===null)throw PL();const p={name:c.fullPath},v=em(i,t.host,t._protocol),g="POST",x=t.maxUploadRetryTime,y=new uy(v,g,u9(t,r),x);return y.urlParams=p,y.headers=a,y.body=h.uploadData(),y.errorHandler=q4(e),y}class v9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s){if(this.sent_)throw Tu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class x9 extends v9{initXhr(){this.xhr_.responseType="text"}}function dy(){return new x9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,r){this._service=e,r instanceof ws?this._location=r:this._location=ws.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new hl(e,r)}get root(){const e=new ws(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G4(this._location.path)}get storage(){return this._service}get parent(){const e=r9(this._location.path);if(e===null)return null;const r=new ws(this._location.bucket,e);return new hl(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw OL(e)}}function y9(t,e,r){t._throwIfRoot("uploadBytes");const n=g9(t.storage,t._location,z4(),new Ki(e,!0),r);return t.storage.makeRequestWithTokens(n,dy).then(s=>({metadata:s,ref:t}))}function E9(t){t._throwIfRoot("getDownloadURL");const e=f9(t.storage,t._location,z4());return t.storage.makeRequestWithTokens(e,dy).then(r=>{if(r===null)throw RL();return r})}function _9(t){t._throwIfRoot("deleteObject");const e=h9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,dy)}function b9(t,e){const r=n9(t._location.path,e),n=new ws(t._location.bucket,r);return new hl(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(t){return/^[A-Za-z]+:\/\//.test(t)}function T9(t,e){return new hl(t,e)}function Y4(t,e){if(t instanceof fy){const r=t;if(r._bucket==null)throw DL();const n=new hl(r,r._bucket);return e!=null?Y4(n,e):n}else return e!==void 0?b9(t,e):t}function A9(t,e){if(e&&S9(e)){if(t instanceof fy)return T9(t,e);throw r1("To use ref(service, url), the first argument must be a Storage instance.")}else return Y4(t,e)}function a2(t,e){const r=e==null?void 0:e[B4];return r==null?null:ws.makeFromBucketSpec(r,t)}function w9(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:qw(s,t.app.options.projectId))}class fy{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=M4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yL,this._maxUploadRetryTime=EL,this._requests=new Set,s!=null?this._bucket=ws.makeFromBucketSpec(s,this._host):this._bucket=a2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ws.makeFromBucketSpec(this._url,e):this._bucket=a2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){s2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){s2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hl(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new NL(L4());{const a=WL(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const i2="@firebase/storage",o2="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="storage";function I9(t,e,r){return t=or(t),y9(t,e,r)}function C9(t){return t=or(t),E9(t)}function k9(t){return t=or(t),_9(t)}function n1(t,e){return t=or(t),A9(t,e)}function J4(t=pf(),e){t=or(t);const n=hf(t,Q4).getImmediate({identifier:e}),s=tx("storage");return s&&D9(n,...s),n}function D9(t,e,r,n={}){w9(t,e,r,n)}function P9(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new fy(r,n,s,e,El)}function R9(){uo(new fi(Q4,P9,"PUBLIC").setMultipleInstances(!0)),$s(i2,o2,""),$s(i2,o2,"esm2017")}R9();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9="type.googleapis.com/google.protobuf.Int64Value",O9="type.googleapis.com/google.protobuf.UInt64Value";function Z4(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function s1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>s1(e));if(typeof t=="function"||typeof t=="object")return Z4(t,e=>s1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function jh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case F9:case O9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>jh(e)):typeof t=="function"||typeof t=="object"?Z4(t,e=>jh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wc extends ha{constructor(e,r,n){super(`${hy}/${e}`,r||""),this.details=n}}function N9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function M9(t,e){let r=N9(t),n=r,s;try{const i=e&&e.error;if(i){const a=i.status;if(typeof a=="string"){if(!l2[a])return new wc("internal","internal");r=l2[a],n=a}const o=i.message;typeof o=="string"&&(n=o),s=i.details,s!==void 0&&(s=jh(s))}}catch{}return r==="ok"?null:new wc(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="us-central1";function L9(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new wc("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class U9{constructor(e,r,n,s,i=a1,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new B9(r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=a1}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function V9(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function $9(t,e,r){return n=>H9(t,e,n,{})}async function j9(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function H9(t,e,r,n){const s=t._url(e);return G9(t,s,r,n)}async function G9(t,e,r,n){r=s1(r);const s={data:r},i={},a=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,l=L9(o),c=await Promise.race([j9(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new wc("cancelled","Firebase Functions instance was deleted.");const u=M9(c.status,c.json);if(u)throw u;if(!c.json)throw new wc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new wc("internal","Response is missing data field.");return{data:jh(d)}}const c2="@firebase/functions",u2="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9="auth-internal",W9="app-check-internal",K9="messaging-internal";function q9(t,e){const r=(n,{instanceIdentifier:s})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(z9),o=n.getProvider(K9),l=n.getProvider(W9);return new U9(i,a,o,l,s,t)};uo(new fi(hy,r,"PUBLIC").setMultipleInstances(!0)),$s(c2,u2,e),$s(c2,u2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t=pf(),e=a1){const n=hf(or(t),hy).getImmediate({identifier:e}),s=tx("functions");return s&&X9(n,...s),n}function X9(t,e,r){V9(or(t),e,r)}function Ta(t,e,r){return $9(or(t),e)}q9(fetch.bind(self));let zm=!1;async function Y9(t){if(console.error("Firebase error:",t),!zm){zm=!0;try{const e=es.currentUser;e?(await e.getIdToken(!0),console.log(" Firebase token refreshed successfully")):(console.log(" No user signed in, redirecting to login..."),window.location.href="/login")}catch(e){console.error("Failed to refresh token:",e),window.location.href="/login"}finally{zm=!1}}}fx(es,t=>{t&&setInterval(async()=>{try{await t.getIdToken(!0),console.log(" Token refreshed automatically")}catch(e){console.error("Failed to refresh token:",e)}},30*60*1e3)});const ek={apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",authDomain:"casemangervue.firebaseapp.com",projectId:"casemangervue",storageBucket:"casemangervue.firebasestorage.app",messagingSenderId:"756483333257",appId:"1:756483333257:web:694e2ad2415b7886563a58",measurementId:"G-YBRDQX9NFR"};let Kl,es,ot,Hh,i1,o1;const tk=async()=>{try{if(Kl||(Kl=Zw(ek),console.log(" Firebase app initialized")),es||(es=Bd(Kl),console.log(" Firebase Auth initialized")),!ot){ot=_o(Kl),ot.settings({cacheSizeBytes:e2,ignoreUndefinedProperties:!0,experimentalForceLongPolling:!0,experimentalAutoDetectLongPolling:!0});try{await nL(ot,{cacheSizeBytes:e2,synchronizeTabs:!0}),console.log(" Firestore offline persistence enabled")}catch(t){t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence enabled in another tab"):t.code==="unimplemented"?console.warn("Browser doesn't support persistence"):console.error("Error enabling persistence:",t)}console.log(" Firestore initialized")}return Hh||(Hh=J4(Kl),console.log(" Firebase Storage initialized")),i1||(i1=Ic(Kl),console.log(" Firebase Functions initialized")),o1||(o1=new Sa,console.log(" Google Auth Provider initialized")),console.log(" All Firebase services initialized successfully"),!0}catch(t){throw console.error(" Error initializing Firebase:",t),t}};tk().catch(console.error);ot.onError=t=>{console.error("Firestore error:",t),Y9(t)};console.log(" Connected to Firebase project:",ek.projectId);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ic=typeof document<"u";function rk(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Q9(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&rk(t.default)}const sr=Object.assign;function Wm(t,e){const r={};for(const n in e){const s=e[n];r[n]=fa(s)?s.map(t):t(s)}return r}const dd=()=>{},fa=Array.isArray,nk=/#/g,J9=/&/g,Z9=/\//g,e7=/=/g,t7=/\?/g,sk=/\+/g,r7=/%5B/g,n7=/%5D/g,ak=/%5E/g,s7=/%60/g,ik=/%7B/g,a7=/%7C/g,ok=/%7D/g,i7=/%20/g;function py(t){return encodeURI(""+t).replace(a7,"|").replace(r7,"[").replace(n7,"]")}function o7(t){return py(t).replace(ik,"{").replace(ok,"}").replace(ak,"^")}function l1(t){return py(t).replace(sk,"%2B").replace(i7,"+").replace(nk,"%23").replace(J9,"%26").replace(s7,"`").replace(ik,"{").replace(ok,"}").replace(ak,"^")}function l7(t){return l1(t).replace(e7,"%3D")}function c7(t){return py(t).replace(nk,"%23").replace(t7,"%3F")}function u7(t){return t==null?"":c7(t).replace(Z9,"%2F")}function Kd(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const d7=/\/$/,f7=t=>t.replace(d7,"");function Km(t,e,r="/"){let n,s={},i="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,o>-1?o:e.length),s=t(i)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=g7(n??e,r),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:Kd(a)}}function h7(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function d2(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function p7(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&zc(e.matched[n],r.matched[s])&&lk(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function zc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function lk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!m7(t[r],e[r]))return!1;return!0}function m7(t,e){return fa(t)?f2(t,e):fa(e)?f2(e,t):t===e}function f2(t,e){return fa(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function g7(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=r.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Pi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var qd;(function(t){t.pop="pop",t.push="push"})(qd||(qd={}));var fd;(function(t){t.back="back",t.forward="forward",t.unknown=""})(fd||(fd={}));function v7(t){if(!t)if(ic){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),f7(t)}const x7=/^[^#]+#/;function y7(t,e){return t.replace(x7,"#")+e}function E7(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const tm=()=>({left:window.scrollX,top:window.scrollY});function _7(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=E7(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function h2(t,e){return(history.state?history.state.position-e:-1)+t}const c1=new Map;function b7(t,e){c1.set(t,e)}function S7(t){const e=c1.get(t);return c1.delete(t),e}let T7=()=>location.protocol+"//"+location.host;function ck(t,e){const{pathname:r,search:n,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),d2(l,"")}return d2(r,t)+n+s}function A7(t,e,r,n){let s=[],i=[],a=null;const o=({state:f})=>{const h=ck(t,location),p=r.value,v=e.value;let g=0;if(f){if(r.value=h,e.value=f,a&&a===p){a=null;return}g=v?f.position-v.position:0}else n(h);s.forEach(x=>{x(r.value,p,{delta:g,type:qd.pop,direction:g?g>0?fd.forward:fd.back:fd.unknown})})};function l(){a=r.value}function c(f){s.push(f);const h=()=>{const p=s.indexOf(f);p>-1&&s.splice(p,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(sr({},f.state,{scroll:tm()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function p2(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?tm():null}}function w7(t){const{history:e,location:r}=window,n={value:ck(t,r)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:T7()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),r[u?"replace":"assign"](f)}}function a(l,c){const u=sr({},e.state,p2(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function o(l,c){const u=sr({},s.value,e.state,{forward:l,scroll:tm()});i(u.current,u,!0);const d=sr({},p2(n.value,l,null),{position:u.position+1},c);i(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function I7(t){t=v7(t);const e=w7(t),r=A7(t,e.state,e.location,e.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const s=sr({location:"",base:t,go:n,createHref:y7.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function C7(t){return typeof t=="string"||t&&typeof t=="object"}function uk(t){return typeof t=="string"||typeof t=="symbol"}const dk=Symbol("");var m2;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(m2||(m2={}));function Wc(t,e){return sr(new Error,{type:t,[dk]:!0},e)}function Ka(t,e){return t instanceof Error&&dk in t&&(e==null||!!(t.type&e))}const g2="[^/]+?",k7={sensitive:!1,strict:!1,start:!0,end:!0},D7=/[.+*?^${}()[\]/\\]/g;function P7(t,e){const r=sr({},k7,e),n=[];let s=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(r.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(D7,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:v,optional:g,regexp:x}=f;i.push({name:p,repeatable:v,optional:g});const y=x||g2;if(y!==g2){h+=10;try{new RegExp(`(${y})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+I.message)}}let E=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;d||(E=g&&c.length<2?`(?:/${E})`:"/"+E),g&&(E+="?"),s+=E,h+=20,g&&(h+=-8),v&&(h+=-20),y===".*"&&(h+=-50)}u.push(h)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",p=i[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:v,optional:g}=h,x=p in c?c[p]:"";if(fa(x)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=fa(x)?x.join("/"):x;if(!y)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=y}}return u||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function R7(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function fk(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const i=R7(n[r],s[r]);if(i)return i;r++}if(Math.abs(s.length-n.length)===1){if(v2(n))return 1;if(v2(s))return-1}return s.length-n.length}function v2(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const F7={type:0,value:""},O7=/[a-zA-Z0-9_]/;function N7(t){if(!t)return[[]];if(t==="/")return[[F7]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${r})/"${c}": ${h}`)}let r=0,n=r;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,c="",u="";function d(){c&&(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:O7.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),s}function M7(t,e,r){const n=P7(N7(t.path),r),s=sr(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function B7(t,e){const r=[],n=new Map;e=_2({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function i(d,f,h){const p=!h,v=y2(d);v.aliasOf=h&&h.record;const g=_2(e,d),x=[v];if("alias"in d){const I=typeof d.alias=="string"?[d.alias]:d.alias;for(const P of I)x.push(y2(sr({},v,{components:h?h.record.components:v.components,path:P,aliasOf:h?h.record:v})))}let y,E;for(const I of x){const{path:P}=I;if(f&&P[0]!=="/"){const D=f.record.path,A=D[D.length-1]==="/"?"":"/";I.path=f.record.path+(P&&A+P)}if(y=M7(I,f,g),h?h.alias.push(y):(E=E||y,E!==y&&E.alias.push(y),p&&d.name&&!E2(y)&&a(d.name)),hk(y)&&l(y),v.children){const D=v.children;for(let A=0;A<D.length;A++)i(D[A],y,h&&h.children[A])}h=h||y}return E?()=>{a(E)}:dd}function a(d){if(uk(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return r}function l(d){const f=V7(d,r);r.splice(f,0,d),d.record.name&&!E2(d)&&n.set(d.record.name,d)}function c(d,f){let h,p={},v,g;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw Wc(1,{location:d});g=h.record.name,p=sr(x2(f.params,h.keys.filter(E=>!E.optional).concat(h.parent?h.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),d.params&&x2(d.params,h.keys.map(E=>E.name))),v=h.stringify(p)}else if(d.path!=null)v=d.path,h=r.find(E=>E.re.test(v)),h&&(p=h.parse(v),g=h.record.name);else{if(h=f.name?n.get(f.name):r.find(E=>E.re.test(f.path)),!h)throw Wc(1,{location:d,currentLocation:f});g=h.record.name,p=sr({},f.params,d.params),v=h.stringify(p)}const x=[];let y=h;for(;y;)x.unshift(y.record),y=y.parent;return{name:g,path:v,params:p,matched:x,meta:U7(x)}}t.forEach(d=>i(d));function u(){r.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:o,getRecordMatcher:s}}function x2(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function y2(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:L7(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function L7(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function E2(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function U7(t){return t.reduce((e,r)=>sr(e,r.meta),{})}function _2(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function V7(t,e){let r=0,n=e.length;for(;r!==n;){const i=r+n>>1;fk(t,e[i])<0?n=i:r=i+1}const s=$7(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function $7(t){let e=t;for(;e=e.parent;)if(hk(e)&&fk(t,e)===0)return e}function hk({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function j7(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(sk," "),a=i.indexOf("="),o=Kd(a<0?i:i.slice(0,a)),l=a<0?null:Kd(i.slice(a+1));if(o in e){let c=e[o];fa(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function b2(t){let e="";for(let r in t){const n=t[r];if(r=l7(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(fa(n)?n.map(i=>i&&l1(i)):[n&&l1(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function H7(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=fa(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const G7=Symbol(""),S2=Symbol(""),rm=Symbol(""),my=Symbol(""),u1=Symbol("");function Au(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Vi(t,e,r,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const c=f=>{f===!1?l(Wc(4,{from:r,to:e})):f instanceof Error?l(f):C7(f)?l(Wc(2,{from:e,to:f})):(a&&n.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),o())},u=i(()=>t.call(n&&n.instances[s],e,r,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function qm(t,e,r,n,s=i=>i()){const i=[];for(const a of t)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(rk(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Vi(u,r,n,a,o,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=Q9(u)?u.default:u;a.mods[o]=u,a.components[o]=d;const h=(d.__vccOpts||d)[e];return h&&Vi(h,r,n,a,o,s)()}))}}return i}function T2(t){const e=ks(rm),r=ks(my),n=be(()=>{const l=me(t.to);return e.resolve(l)}),s=be(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const f=d.findIndex(zc.bind(null,u));if(f>-1)return f;const h=A2(l[c-2]);return c>1&&A2(u)===h&&d[d.length-1].path!==h?d.findIndex(zc.bind(null,l[c-2])):f}),i=be(()=>s.value>-1&&X7(r.params,n.value.params)),a=be(()=>s.value>-1&&s.value===r.matched.length-1&&lk(r.params,n.value.params));function o(l={}){if(q7(l)){const c=e[me(t.replace)?"replace":"push"](me(t.to)).catch(dd);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:be(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function z7(t){return t.length===1?t[0]:t}const W7=of({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:T2,setup(t,{slots:e}){const r=Ws(T2(t)),{options:n}=ks(rm),s=be(()=>({[w2(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[w2(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&z7(e.default(r));return t.custom?i:Ip("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},i)}}}),K7=W7;function q7(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function X7(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!fa(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function A2(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const w2=(t,e,r)=>t??e??r,Y7=of({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=ks(u1),s=be(()=>t.route||n.value),i=ks(S2,0),a=be(()=>{let c=me(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=be(()=>s.value.matched[a.value]);td(S2,be(()=>a.value+1)),td(G7,o),td(u1,s);const l=fe();return Qt(()=>[l.value,o.value,t.name],([c,u,d],[f,h,p])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!zc(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=o.value,f=d&&d.components[u];if(!f)return I2(r.default,{Component:f,route:c});const h=d.props[u],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,g=Ip(f,sr({},p,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return I2(r.default,{Component:g,route:c})||g}}});function I2(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const Q7=Y7;function J7(t){const e=B7(t.routes,t),r=t.parseQuery||j7,n=t.stringifyQuery||b2,s=t.history,i=Au(),a=Au(),o=Au(),l=V1(Pi);let c=Pi;ic&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Wm.bind(null,ie=>""+ie),d=Wm.bind(null,u7),f=Wm.bind(null,Kd);function h(ie,he){let Z,Q;return uk(ie)?(Z=e.getRecordMatcher(ie),Q=he):Q=ie,e.addRoute(Q,Z)}function p(ie){const he=e.getRecordMatcher(ie);he&&e.removeRoute(he)}function v(){return e.getRoutes().map(ie=>ie.record)}function g(ie){return!!e.getRecordMatcher(ie)}function x(ie,he){if(he=sr({},he||l.value),typeof ie=="string"){const Y=Km(r,ie,he.path),ee=e.resolve({path:Y.path},he),ve=s.createHref(Y.fullPath);return sr(Y,ee,{params:f(ee.params),hash:Kd(Y.hash),redirectedFrom:void 0,href:ve})}let Z;if(ie.path!=null)Z=sr({},ie,{path:Km(r,ie.path,he.path).path});else{const Y=sr({},ie.params);for(const ee in Y)Y[ee]==null&&delete Y[ee];Z=sr({},ie,{params:d(Y)}),he.params=d(he.params)}const Q=e.resolve(Z,he),xe=ie.hash||"";Q.params=u(f(Q.params));const X=h7(n,sr({},ie,{hash:o7(xe),path:Q.path})),W=s.createHref(X);return sr({fullPath:X,hash:xe,query:n===b2?H7(ie.query):ie.query||{}},Q,{redirectedFrom:void 0,href:W})}function y(ie){return typeof ie=="string"?Km(r,ie,l.value.path):sr({},ie)}function E(ie,he){if(c!==ie)return Wc(8,{from:he,to:ie})}function I(ie){return A(ie)}function P(ie){return I(sr(y(ie),{replace:!0}))}function D(ie){const he=ie.matched[ie.matched.length-1];if(he&&he.redirect){const{redirect:Z}=he;let Q=typeof Z=="function"?Z(ie):Z;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=y(Q):{path:Q},Q.params={}),sr({query:ie.query,hash:ie.hash,params:Q.path!=null?{}:ie.params},Q)}}function A(ie,he){const Z=c=x(ie),Q=l.value,xe=ie.state,X=ie.force,W=ie.replace===!0,Y=D(Z);if(Y)return A(sr(y(Y),{state:typeof Y=="object"?sr({},xe,Y.state):xe,force:X,replace:W}),he||Z);const ee=Z;ee.redirectedFrom=he;let ve;return!X&&p7(n,Q,Z)&&(ve=Wc(16,{to:ee,from:Q}),H(Q,Q,!0,!1)),(ve?Promise.resolve(ve):w(ee,Q)).catch(re=>Ka(re)?Ka(re,2)?re:q(re):U(re,ee,Q)).then(re=>{if(re){if(Ka(re,2))return A(sr({replace:W},y(re.to),{state:typeof re.to=="object"?sr({},xe,re.to.state):xe,force:X}),he||ee)}else re=T(ee,Q,!0,W,xe);return C(ee,Q,re),re})}function _(ie,he){const Z=E(ie,he);return Z?Promise.reject(Z):Promise.resolve()}function b(ie){const he=K.values().next().value;return he&&typeof he.runWithContext=="function"?he.runWithContext(ie):ie()}function w(ie,he){let Z;const[Q,xe,X]=Z7(ie,he);Z=qm(Q.reverse(),"beforeRouteLeave",ie,he);for(const Y of Q)Y.leaveGuards.forEach(ee=>{Z.push(Vi(ee,ie,he))});const W=_.bind(null,ie,he);return Z.push(W),ge(Z).then(()=>{Z=[];for(const Y of i.list())Z.push(Vi(Y,ie,he));return Z.push(W),ge(Z)}).then(()=>{Z=qm(xe,"beforeRouteUpdate",ie,he);for(const Y of xe)Y.updateGuards.forEach(ee=>{Z.push(Vi(ee,ie,he))});return Z.push(W),ge(Z)}).then(()=>{Z=[];for(const Y of X)if(Y.beforeEnter)if(fa(Y.beforeEnter))for(const ee of Y.beforeEnter)Z.push(Vi(ee,ie,he));else Z.push(Vi(Y.beforeEnter,ie,he));return Z.push(W),ge(Z)}).then(()=>(ie.matched.forEach(Y=>Y.enterCallbacks={}),Z=qm(X,"beforeRouteEnter",ie,he,b),Z.push(W),ge(Z))).then(()=>{Z=[];for(const Y of a.list())Z.push(Vi(Y,ie,he));return Z.push(W),ge(Z)}).catch(Y=>Ka(Y,8)?Y:Promise.reject(Y))}function C(ie,he,Z){o.list().forEach(Q=>b(()=>Q(ie,he,Z)))}function T(ie,he,Z,Q,xe){const X=E(ie,he);if(X)return X;const W=he===Pi,Y=ic?history.state:{};Z&&(Q||W?s.replace(ie.fullPath,sr({scroll:W&&Y&&Y.scroll},xe)):s.push(ie.fullPath,xe)),l.value=ie,H(ie,he,Z,W),q()}let k;function N(){k||(k=s.listen((ie,he,Z)=>{if(!te.listening)return;const Q=x(ie),xe=D(Q);if(xe){A(sr(xe,{replace:!0,force:!0}),Q).catch(dd);return}c=Q;const X=l.value;ic&&b7(h2(X.fullPath,Z.delta),tm()),w(Q,X).catch(W=>Ka(W,12)?W:Ka(W,2)?(A(sr(y(W.to),{force:!0}),Q).then(Y=>{Ka(Y,20)&&!Z.delta&&Z.type===qd.pop&&s.go(-1,!1)}).catch(dd),Promise.reject()):(Z.delta&&s.go(-Z.delta,!1),U(W,Q,X))).then(W=>{W=W||T(Q,X,!1),W&&(Z.delta&&!Ka(W,8)?s.go(-Z.delta,!1):Z.type===qd.pop&&Ka(W,20)&&s.go(-1,!1)),C(Q,X,W)}).catch(dd)}))}let B=Au(),R=Au(),O;function U(ie,he,Z){q(ie);const Q=R.list();return Q.length?Q.forEach(xe=>xe(ie,he,Z)):console.error(ie),Promise.reject(ie)}function M(){return O&&l.value!==Pi?Promise.resolve():new Promise((ie,he)=>{B.add([ie,he])})}function q(ie){return O||(O=!ie,N(),B.list().forEach(([he,Z])=>ie?Z(ie):he()),B.reset()),ie}function H(ie,he,Z,Q){const{scrollBehavior:xe}=t;if(!ic||!xe)return Promise.resolve();const X=!Z&&S7(h2(ie.fullPath,0))||(Q||!Z)&&history.state&&history.state.scroll||null;return yl().then(()=>xe(ie,he,X)).then(W=>W&&_7(W)).catch(W=>U(W,ie,he))}const L=ie=>s.go(ie);let z;const K=new Set,te={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:g,getRoutes:v,resolve:x,options:t,push:I,replace:P,go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:R.add,isReady:M,install(ie){const he=this;ie.component("RouterLink",K7),ie.component("RouterView",Q7),ie.config.globalProperties.$router=he,Object.defineProperty(ie.config.globalProperties,"$route",{enumerable:!0,get:()=>me(l)}),ic&&!z&&l.value===Pi&&(z=!0,I(s.location).catch(xe=>{}));const Z={};for(const xe in Pi)Object.defineProperty(Z,xe,{get:()=>l.value[xe],enumerable:!0});ie.provide(rm,he),ie.provide(my,L1(Z)),ie.provide(u1,l);const Q=ie.unmount;K.add(ie),ie.unmount=function(){K.delete(ie),K.size<1&&(c=Pi,k&&k(),k=null,l.value=Pi,z=!1,O=!1),Q()}}};function ge(ie){return ie.reduce((he,Z)=>he.then(()=>b(Z)),Promise.resolve())}return te}function Z7(t,e){const r=[],n=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const o=e.matched[a];o&&(t.matched.find(c=>zc(c,o))?n.push(o):r.push(o));const l=t.matched[a];l&&(e.matched.find(c=>zc(c,l))||s.push(l))}return[r,n,s]}function Al(){return ks(rm)}function eU(t){return ks(my)}const Ei=$w("auth",()=>{const t=fe(null),e=fe(""),r=fe(!0),n=Al(),s=()=>{fx(es,async c=>{if(r.value=!0,c)try{const u=await $r(xt(ot,"users",c.uid));u.exists()?(t.value={uid:c.uid,email:c.email,name:c.displayName,...u.data()},console.log(" User authenticated:",t.value)):(console.log(" User not found in Firestore"),t.value=null)}catch(u){console.error(" Error fetching user data:",u),t.value=null}else t.value=null,console.log(" No user authenticated");r.value=!1})},i=async()=>{e.value="";try{const c=new Sa,d=(await FI(es,c)).user,f=await $r(xt(ot,"users",d.uid));if(!f.exists()){e.value=" User not found in system.";return}t.value={uid:d.uid,email:d.email,name:d.displayName,...f.data()},n.push("/")}catch(c){console.error(" Login error:",c),e.value=c.message||"Authentication failed."}},a=async()=>{try{await $N(es),t.value=null,n.push("/login")}catch(c){console.error(" Logout error:",c)}},o=c=>{t.value=c},l=be(()=>t.value);return s(),{currentUser:t,user:l,errorMsg:e,isLoading:r,loginWithGoogle:i,logout:a,setUser:o}}),nm=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],C2=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],wu=["admin","administrator","administrator_504_CM","sped_chair"],rt={VIEW_USERS:"view_users",EDIT_USER:"edit_user",DELETE_USER:"delete_user",MANAGE_SUBJECTS:"manage_subjects",MANAGE_ROLES:"manage_roles",VIEW_STUDENTS:"view_students",EDIT_STUDENT_CM:"edit_student_CM",EDIT_STUDENT_ALL:"edit_student_All"},uc={admin:[rt.VIEW_USERS,rt.EDIT_USER,rt.DELETE_USER,rt.MANAGE_SUBJECTS,rt.MANAGE_ROLES,rt.VIEW_STUDENTS,rt.EDIT_STUDENT_ALL,rt.TESTING_ALL],administrator:[rt.VIEW_USERS,rt.EDIT_USER,rt.DELETE_USER,rt.MANAGE_SUBJECTS,rt.MANAGE_ROLES,rt.VIEW_STUDENTS,rt.EDIT_STUDENT_ALL,rt.TESTING_ALL],administrator_504_CM:[rt.VIEW_USERS,rt.EDIT_USER,rt.DELETE_USER,rt.MANAGE_SUBJECTS,rt.MANAGE_ROLES,rt.VIEW_STUDENTS,rt.EDIT_STUDENT_ALL],sped_chair:[rt.VIEW_USERS,rt.VIEW_STUDENTS,rt.EDIT_STUDENT_ALL],case_manager:[rt.VIEW_USERS,rt.VIEW_STUDENTS,rt.EDIT_STUDENT_CM,rt.TESTING_PARTIAL],teacher:[rt.VIEW_USERS,rt.VIEW_STUDENTS,rt.TESTING_PARTIAL],service_provider:[rt.VIEW_USERS,rt.VIEW_STUDENTS,rt.TESTING_PARTIAL],paraeducator:[rt.VIEW_USERS,rt.VIEW_STUDENTS]};function k2(t){return nm.includes(t)}const gy=$w("permission",()=>{const t=Ei(),e=fe([]),r=fe({}),n=fe({}),s=fe(!1),i=async()=>{try{const d=xt(ot,"config/permissions_matrix"),f=await $r(d);f.exists()?(n.value=f.data(),console.log("Loaded permissions matrix from database:",n.value)):(n.value=uc,console.log("Using default permissions matrix:",n.value)),s.value=!0,e.value.length>0&&(r.value=l(e.value))}catch(d){console.error("Error loading permissions matrix:",d),n.value=uc,s.value=!0}};let a=null;const o=()=>{a&&a();const d=xt(ot,"config/permissions_matrix");a=Ac(d,f=>{console.log("Permissions matrix updated:",f.exists(),f.data()),f.exists()?n.value=f.data():n.value=uc,s.value=!0,e.value.length>0&&(r.value=l(e.value),console.log("User permissions recalculated:",r.value))},f=>{console.error("Error watching permissions matrix:",f),n.value=uc,s.value=!0})};function l(d){const f={};return console.log("Deriving permissions for roles:",d),console.log("Current permissions matrix:",n.value),console.log("Matrix loaded:",s.value),d.forEach(h=>{const p=n.value[h]||[];console.log(`Role ${h} has permissions:`,p),p.forEach(v=>f[v]=!0)}),console.log("Final derived permissions:",f),f}let c=null;return Qt(()=>{var d;return(d=t.currentUser)==null?void 0:d.uid},()=>{var d;if(c&&c(),(d=t.currentUser)!=null&&d.uid){const f=xt(ot,"users",t.currentUser.uid);c=Ac(f,h=>{const p=h.data()||{};e.value=p.role?[p.role]:[],console.log("User roles updated:",e.value),t.currentUser&&(t.currentUser.value={...t.currentUser.value,...p},console.log(" Updated auth store user data:",t.currentUser.value)),s.value&&(r.value=l(e.value))})}else e.value=[],r.value={}},{immediate:!0}),o(),i(),{userRoles:e,userPermissions:r,permissionsMatrix:n,matrixLoaded:s,hasRole:d=>e.value.includes(d),can:d=>r.value[d]===!0,loadPermissionsMatrix:i}});function tU(){const t=gy(),e=be(()=>t.hasRole("admin")),r=be(()=>t.can("manage_users")),n=s=>t.can(s);return{isAdmin:e,canManageUsers:r,hasRole:t.hasRole,can:t.can,hasPermission:n}}const rU=()=>!1,nU=()=>!0,Iu=fe(!1);function vy(){const t=be(()=>rU()),e=be(()=>nU());return{isDebugMenuVisible:Iu,isDevelopment:t,canShowDebugMenu:e,toggleDebugMenu:()=>{e.value&&(Iu.value=!Iu.value)},showDebugMenu:()=>{e.value&&(Iu.value=!0)},hideDebugMenu:()=>{Iu.value=!1}}}function pa(){const t=fe({}),e=fe([]);async function r(){const a=await fr(Ht(ot,"users")),o={},l=[];a.forEach(c=>{const u=c.data();o[c.id]={id:c.id,...u},l.push({id:c.id,...u}),u.aeriesId&&console.log(" Loaded user with Aeries ID:",{name:u.name,email:u.email,aeriesId:u.aeriesId,id:c.id})}),t.value=o,e.value=l,console.log(" Total users loaded:",l.length),console.log(" Users with Aeries IDs:",l.filter(c=>c.aeriesId).length)}const n=be(()=>({teachers:e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)),caseManagers:e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role)),speech:e.value.filter(a=>a.provider==="SLP"),ot:e.value.filter(a=>a.provider==="OT"),mh:e.value.filter(a=>a.provider==="MH"),pt:e.value.filter(a=>a.provider==="PT"),sc:e.value.filter(a=>a.provider==="SC"),tr:e.value.filter(a=>a.provider==="TR"),aud:e.value.filter(a=>a.provider==="AUD"),vi:e.value.filter(a=>a.provider==="VI"),at:e.value.filter(a=>a.provider==="AT"),dhh:e.value.filter(a=>a.provider==="DHH"),om:e.value.filter(a=>a.provider==="O&M"),bis:e.value.filter(a=>a.provider==="BIS"),hn:e.value.filter(a=>a.provider==="HN"),sw:e.value.filter(a=>a.provider==="SW")})),s=be(()=>e.value.filter(a=>["case_manager","sped_chair","administrator_504_CM"].includes(a.role))),i=be(()=>e.value.filter(a=>["teacher","case_manager","sped_chair"].includes(a.role)));return{users:t,userList:e,fetchUsers:r,caseManagers:s,teacherList:i,userRoles:n}}const At=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},sU={name:"UserRoleSwitcher",setup(){const t=Ei();tU();const{isDebugMenuVisible:e,canShowDebugMenu:r,hideDebugMenu:n}=vy(),s=fe(!1),i=fe(""),a=fe({}),o=fe(!1),l=be(()=>t.user),c=[{value:"admin",label:"Admin"},{value:"administrator",label:"Administrator"},{value:"administrator_504_CM",label:"Administrator 504/CM"},{value:"sped_chair",label:"SPED Chair"},{value:"case_manager",label:"Case Manager"},{value:"paraeducator",label:"Paraeducator"},{value:"teacher",label:"Teacher"},{value:"service_provider",label:"Service Provider"}],{userList:u,fetchUsers:d}=pa(),f=fe(""),h=be(()=>{const A={};return c.forEach(_=>{A[_.value]=u.value.filter(b=>b.role===_.value)}),A}),p=[{uid:"test-admin",name:"Test Admin",email:"admin@test.com",role:"admin"},{uid:"test-administrator",name:"Test Administrator",email:"administrator@test.com",role:"administrator"},{uid:"test-administrator-504-cm",name:"Test Admin 504/CM",email:"admin504@test.com",role:"administrator_504_CM"},{uid:"test-sped-chair",name:"Test SPED Chair",email:"spedchair@test.com",role:"sped_chair"},{uid:"test-case-manager",name:"Test Case Manager",email:"cm@test.com",role:"case_manager"},{uid:"test-paraeducator",name:"Test Paraeducator",email:"para@test.com",role:"paraeducator"},{uid:"test-teacher",name:"Test Teacher",email:"teacher@test.com",role:"teacher"},{uid:"test-service-provider",name:"Test Service Provider",email:"service@test.com",role:"service_provider"}],v=()=>{if(!f.value)return;const A=u.value.find(_=>_.id===f.value);if(A){const _={uid:A.id,name:A.name,email:A.email,role:A.role,lastSyncTrigger:new Date().toISOString()};t.setUser(_),localStorage.setItem("debug-user",JSON.stringify(_))}f.value=""},g=async()=>{o.value=!0;try{const A=xt(ot,"config","permissions_matrix"),_=await $r(A);_.exists()?a.value=_.data():(console.warn("Permissions matrix not found in database"),a.value={})}catch(A){console.error("Error loading permissions matrix:",A),a.value={}}finally{o.value=!1}},x=be(()=>{var w;const A=[{action:rt.VIEW_USERS,label:"View Users"},{action:rt.EDIT_USER,label:"Edit User"},{action:rt.DELETE_USER,label:"Delete User"},{action:rt.MANAGE_SUBJECTS,label:"Manage Subjects"},{action:rt.MANAGE_ROLES,label:"Manage Roles"},{action:rt.VIEW_STUDENTS,label:"View Students"},{action:rt.EDIT_STUDENT_CM,label:"Edit Students (Own Caseload)"},{action:rt.EDIT_STUDENT_ALL,label:"Edit All Students"},{action:rt.TESTING,label:"Testing"}],_=(w=l.value)==null?void 0:w.role,b=a.value[_]||[];return A.map(C=>({...C,granted:b.includes(C.action)}))}),y=()=>{s.value=!s.value},E=()=>{if(!i.value)return;const A={uid:`test-${i.value}-${Date.now()}`,email:`${i.value}@test.com`,name:`Test ${i.value.charAt(0).toUpperCase()+i.value.slice(1)}`,role:i.value,lastSyncTrigger:new Date().toISOString()};t.setUser(A),localStorage.setItem("debug-user",JSON.stringify(A)),i.value=""},I=A=>{t.setUser(A),localStorage.setItem("debug-user",JSON.stringify(A))},P=()=>{localStorage.removeItem("debug-user"),window.location.reload()},D=()=>{window.location.reload()};return tr(async()=>{await d(),await g();const A=localStorage.getItem("debug-user");if(A)try{const b=JSON.parse(A);t.setUser(b)}catch(b){console.error("Error parsing debug user:",b),localStorage.removeItem("debug-user")}const _=b=>{b.ctrlKey&&b.shiftKey&&b.key==="D"&&(b.preventDefault(),r.value&&(e.value?y():(e.value=!0,s.value=!0)))};return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}}),{isDebugMenuVisible:e,canShowDebugMenu:r,hideDebugMenu:n,isExpanded:s,selectedRole:i,currentUser:l,availableRoles:c,testUsers:p,currentPermissions:x,loadingPermissions:o,toggleExpanded:y,switchRole:E,switchToUser:I,resetToRealUser:P,refreshPage:D,userList:u,selectedRealUserId:f,usersByRole:h,switchToRealUser:v}}},aU=["title"],iU={key:0,class:"debug-label"},oU={key:0,class:"switcher-content"},lU={class:"current-user-info"},cU={class:"role-selector"},uU=["value"],dU={class:"real-user-selector"},fU=["label"],hU=["value"],pU={class:"test-users"},mU={class:"test-user-buttons"},gU=["onClick"],vU={class:"permission-info"},xU={key:0,class:"loading-permissions"},yU={key:1,class:"permission-list"},EU={class:"permission-icon"},_U={class:"actions"};function bU(t,e,r,n,s,i){var a,o,l,c,u;return n.canShowDebugMenu&&n.isDebugMenuVisible?(V(),j("div",{key:0,class:ut(["user-role-switcher",{collapsed:!n.isExpanded}])},[m("div",{class:"switcher-header",onClick:e[1]||(e[1]=(...d)=>n.toggleExpanded&&n.toggleExpanded(...d)),title:n.isExpanded?"Collapse Debug Panel":"Expand Debug Panel"},[e[8]||(e[8]=m("span",{class:"debug-icon"},"",-1)),n.isExpanded?(V(),j("span",iU,"Debug")):Oe("",!0),m("button",{onClick:e[0]||(e[0]=Ds((...d)=>n.hideDebugMenu&&n.hideDebugMenu(...d),["stop"])),class:"close-debug-btn",title:"Close Debug Menu"},"")],8,aU),n.isExpanded?(V(),j("div",oU,[m("div",lU,[e[9]||(e[9]=m("strong",null,"Current User:",-1)),Ve(" "+ce(((a=n.currentUser)==null?void 0:a.name)||((o=n.currentUser)==null?void 0:o.email)||"Unknown")+" ",1),e[10]||(e[10]=m("br",null,null,-1)),e[11]||(e[11]=m("strong",null,"Role:",-1)),e[12]||(e[12]=Ve()),m("span",{class:ut("role-"+((l=n.currentUser)==null?void 0:l.role))},ce(((c=n.currentUser)==null?void 0:c.role)||"None"),3),e[13]||(e[13]=m("br",null,null,-1)),e[14]||(e[14]=m("strong",null,"UID:",-1)),Ve(" "+ce(((u=n.currentUser)==null?void 0:u.uid)||"None"),1)]),m("div",cU,[e[16]||(e[16]=m("label",{for:"role-select"},"Switch to Role:",-1)),je(m("select",{id:"role-select","onUpdate:modelValue":e[2]||(e[2]=d=>n.selectedRole=d),onChange:e[3]||(e[3]=(...d)=>n.switchRole&&n.switchRole(...d))},[e[15]||(e[15]=m("option",{value:""},"-- Select Role --",-1)),(V(!0),j(Ne,null,He(n.availableRoles,d=>(V(),j("option",{key:d.value,value:d.value},ce(d.label),9,uU))),128))],544),[[vr,n.selectedRole]])]),m("div",dU,[e[18]||(e[18]=m("label",{for:"real-user-select"},"Switch to User:",-1)),je(m("select",{id:"real-user-select","onUpdate:modelValue":e[4]||(e[4]=d=>n.selectedRealUserId=d),onChange:e[5]||(e[5]=(...d)=>n.switchToRealUser&&n.switchToRealUser(...d))},[e[17]||(e[17]=m("option",{value:""},"-- Select User --",-1)),(V(!0),j(Ne,null,He(n.availableRoles,d=>(V(),j("optgroup",{label:d.label,key:d.value},[(V(!0),j(Ne,null,He(n.usersByRole[d.value],f=>(V(),j("option",{key:f.id,value:f.id},ce(f.name||f.email),9,hU))),128))],8,fU))),128))],544),[[vr,n.selectedRealUserId]])]),m("div",pU,[e[19]||(e[19]=m("h5",null,"Quick Test Users:",-1)),m("div",mU,[(V(!0),j(Ne,null,He(n.testUsers,d=>{var f;return V(),j("button",{key:d.uid,onClick:h=>n.switchToUser(d),class:ut(["test-user-btn",{active:((f=n.currentUser)==null?void 0:f.uid)===d.uid}])},[Ve(ce(d.name)+" ",1),m("small",null,"("+ce(d.role)+")",1)],10,gU)}),128))])]),m("div",vU,[e[20]||(e[20]=m("h5",null,"Current Permissions:",-1)),n.loadingPermissions?(V(),j("div",xU," Loading permissions... ")):(V(),j("div",yU,[(V(!0),j(Ne,null,He(n.currentPermissions,d=>(V(),j("div",{key:d.action,class:ut(["permission-item",{granted:d.granted}])},[m("span",EU,ce(d.granted?"":""),1),Ve(" "+ce(d.label),1)],2))),128))]))]),e[21]||(e[21]=rs('<div class="testing-scenarios" data-v-a5dc8e20><h5 data-v-a5dc8e20> Testing Scenarios:</h5><div class="scenario-list" data-v-a5dc8e20><div class="scenario-item" data-v-a5dc8e20><strong data-v-a5dc8e20>Students Page:</strong><ul data-v-a5dc8e20><li data-v-a5dc8e20> Can view students</li><li data-v-a5dc8e20> Can edit own caseload (CM)</li><li data-v-a5dc8e20> Can edit all students (Admin)</li><li data-v-a5dc8e20> Paraeducator filter works</li></ul></div><div class="scenario-item" data-v-a5dc8e20><strong data-v-a5dc8e20>Admin Panel:</strong><ul data-v-a5dc8e20><li data-v-a5dc8e20> Users management</li><li data-v-a5dc8e20> Permissions matrix</li><li data-v-a5dc8e20> Aide assignments</li><li data-v-a5dc8e20> App settings</li></ul></div><div class="scenario-item" data-v-a5dc8e20><strong data-v-a5dc8e20>Navigation:</strong><ul data-v-a5dc8e20><li data-v-a5dc8e20> Admin button visibility</li><li data-v-a5dc8e20> My Schedule button (Para)</li><li data-v-a5dc8e20> Role-based menu items</li></ul></div></div></div>',1)),m("div",_U,[m("button",{onClick:e[6]||(e[6]=(...d)=>n.resetToRealUser&&n.resetToRealUser(...d)),class:"reset-btn"},"  Reset to Real User "),m("button",{onClick:e[7]||(e[7]=(...d)=>n.refreshPage&&n.refreshPage(...d)),class:"refresh-btn"},"  Refresh Page ")])])):Oe("",!0)],2)):Oe("",!0)}const SU=At(sU,[["render",bU],["__scopeId","data-v-a5dc8e20"]]),TU={id:"app"},AU={id:"main-content"},wU={__name:"App",setup(t){return(e,r)=>{const n=Mr("router-view");return V(),j("div",TU,[m("div",AU,[at(n)]),at(SU)])}}},IU="modulepreload",CU=function(t){return"/"+t},D2={},kU=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=CU(l),l in D2)return;D2[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":IU,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},P2=["admin","administrator","administrator_504_CM","sped_chair","case_manager","teacher","service_provider","paraeducator"],R2=["K","1","2","3","4","5","6","7","8","9","10","11","12","TK","Pre-K","Ungraded"],F2=["IEP","504"],O2=["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],DU={pdf:["application/pdf"],csv:["text/csv","application/csv"],excel:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]};function gr(t,e={}){if(typeof t!="string")return"";let r=t;return r=r.replace(/\0/g,""),e.trim!==!1&&(r=r.trim()),e.stripHtml&&(r=r.replace(/<[^>]*>/g,"")),e.escapeHtml&&(r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")),e.removeDangerous&&(r=r.replace(/[<>'"&]/g,"")),e.maxLength&&r.length>e.maxLength&&(r=r.substring(0,e.maxLength)),r}function PU(t){return typeof t!="string"?"":t.toLowerCase().trim()}function N2(t,e={}){const r=parseFloat(t);return isNaN(r)?null:e.min!==void 0&&r<e.min?e.min:e.max!==void 0&&r>e.max?e.max:e.decimals!==void 0?Math.round(r*Math.pow(10,e.decimals))/Math.pow(10,e.decimals):r}function J0(t){if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e.toISOString().split("T")[0]}function d1(t,e){const r=t==null||typeof t=="string"&&t.trim()===""||Array.isArray(t)&&t.length===0;return{isValid:!r,error:r?`${e} is required`:null}}function RU(t){if(!t)return{isValid:!1,error:"Email is required"};const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);return{isValid:r,error:r?null:"Invalid email format"}}function sm(t,e={}){if(typeof t!="string")return{isValid:!1,error:"Value must be a string"};const{min:r=0,max:n=1/0,fieldName:s="Field"}=e,i=t.length;return i<r?{isValid:!1,error:`${s} must be at least ${r} characters`}:i>n?{isValid:!1,error:`${s} must be no more than ${n} characters`}:{isValid:!0,error:null}}function FU(t){const e=P2.includes(t);return{isValid:e,error:e?null:`Invalid role. Valid roles: ${P2.join(", ")}`}}function OU(t){const e=R2.includes(t);return{isValid:e,error:e?null:`Invalid grade. Valid grades: ${R2.join(", ")}`}}function NU(t){const e=F2.includes(t);return{isValid:e,error:e?null:`Invalid plan type. Valid types: ${F2.join(", ")}`}}function MU(t){if(!t)return{isValid:!0,error:null};const e=O2.includes(t);return{isValid:e,error:e?null:`Invalid provider type. Valid types: ${O2.join(", ")}`}}function BU(t){if(!t)return{isValid:!1,error:"SSID is required"};const r=/^\d{10}$/.test(t);return{isValid:r,error:r?null:"SSID must be exactly 10 digits"}}function Df(t,e={}){if(!t)return{isValid:!0,error:null};const{allowedTypes:r=["pdf"],maxSize:n=10*1024*1024,fieldName:s="File"}=e;if(!r.flatMap(a=>DU[a]||[]).includes(t.type))return{isValid:!1,error:`${s} must be of type: ${r.join(", ")}`};if(t.size>n){const a=Math.round(n/1048576);return{isValid:!1,error:`${s} must be smaller than ${a}MB`}}return{isValid:!0,error:null}}function pk(t,e={}){const r=[],{isNew:n=!1}=e;if(n){const l=BU(t.ssid);l.isValid||r.push(l.error)}const s=d1(t.firstName,"First Name");s.isValid||r.push(s.error);const i=d1(t.lastName,"Last Name");i.isValid||r.push(i.error);const a=OU(t.grade);if(a.isValid||r.push(a.error),t.plan){const l=NU(t.plan);l.isValid||r.push(l.error)}return t.reviewDate&&(J0(t.reviewDate)||r.push("Invalid review date format")),t.reevalDate&&(J0(t.reevalDate)||r.push("Invalid reevaluation date format")),t.meetingDate&&(J0(t.meetingDate)||r.push("Invalid meeting date format")),[{field:"firstName",max:50},{field:"lastName",max:50},{field:"instruction",max:2e3},{field:"assessment",max:2e3}].forEach(({field:l,max:c})=>{if(t[l]){const u=sm(t[l],{max:c,fieldName:l});u.isValid||r.push(u.error)}}),{isValid:r.length===0,errors:r}}function LU(t){const e=[],r=d1(t.name,"Name");r.isValid||e.push(r.error);const n=RU(t.email);n.isValid||e.push(n.error);const s=FU(t.role);if(s.isValid||e.push(s.error),t.provider){const a=MU(t.provider);a.isValid||e.push(a.error)}const i=sm(t.name,{min:2,max:100,fieldName:"Name"});return i.isValid||e.push(i.error),{isValid:e.length===0,errors:e}}function mk(t){const e={};return["firstName","lastName","grade","plan","instruction","assessment"].forEach(i=>{t[i]&&(e[i]=gr(t[i],{trim:!0,maxLength:i.includes("instruction")||i.includes("assessment")?2e3:100,removeDangerous:!0}))}),t.ssid&&(e.ssid=gr(t.ssid,{trim:!0,maxLength:10})),["reviewDate","reevalDate","meetingDate"].forEach(i=>{t[i]&&(e[i]=J0(t[i]))}),["flag1","flag2"].forEach(i=>{t[i]!==void 0&&(e[i]=!!t[i])}),Array.isArray(t.services)&&(e.services=t.services.filter(i=>typeof i=="string").map(i=>gr(i,{trim:!0,maxLength:200})).filter(i=>i.length>0)),t.schedule&&typeof t.schedule=="object"&&(e.schedule={},Object.entries(t.schedule).forEach(([i,a])=>{var o,l;a&&(typeof a=="string"?e.schedule[i]=gr(a,{trim:!0,maxLength:50}):typeof a=="object"&&a.teacherId&&(e.schedule[i]={teacherId:gr(a.teacherId,{trim:!0,maxLength:50}),coTeaching:{caseManagerId:(o=a.coTeaching)!=null&&o.caseManagerId?gr(a.coTeaching.caseManagerId,{trim:!0,maxLength:50}):"",subject:(l=a.coTeaching)!=null&&l.subject?gr(a.coTeaching.subject,{trim:!0,maxLength:100}):""}}))})),e}function UU(t){const e={};return t.name&&(e.name=gr(t.name,{trim:!0,maxLength:100,removeDangerous:!0})),t.email&&(e.email=PU(t.email)),t.role&&(e.role=gr(t.role,{trim:!0,maxLength:50})),t.provider&&(e.provider=gr(t.provider,{trim:!0,maxLength:10})),t.aeriesId&&(e.aeriesId=gr(t.aeriesId,{trim:!0,maxLength:20})),e}function pn(t){if(typeof t!="string")return{isSafe:!0,threats:[]};const e=[];return/<script|javascript:|vbscript:|onload=|onerror=/i.test(t)&&e.push("Script injection attempt detected"),/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b).*(\bfrom\b|\binto\b|\bwhere\b)/i.test(t)&&e.push("SQL injection pattern detected"),/\.\.\/|\.\.\\|%2e%2e%2f|%2e%2e%5c/i.test(t)&&e.push("Path traversal attempt detected"),t.includes("\0")&&e.push("Null byte injection detected"),{isSafe:e.length===0,threats:e}}function Is(t,e=10,r=6e4){if(typeof window>"u")return{allowed:!0,remaining:e};const n=Date.now(),s=`rateLimit_${t}`;let i=JSON.parse(localStorage.getItem(s)||"[]");return i=i.filter(a=>n-a<r),i.length>=e?{allowed:!1,remaining:0}:(i.push(n),localStorage.setItem(s,JSON.stringify(i)),{allowed:!0,remaining:e-i.length})}const VU=async(t,e,r=100,n=1e3)=>{const s=[];for(let a=0;a<t.length;a+=r)s.push(t.slice(a,a+r));const i=[];for(let a=0;a<s.length;a++)try{const o=await e(s[a]);i.push(o),a<s.length-1&&await new Promise(l=>setTimeout(l,n))}catch(o){throw console.error(`Error in batch ${a+1}:`,o),o}return i},Xm="casemanage_linked_sheet_id",g0="Student Data";function xy(){const t=fe(!1),e=fe(localStorage.getItem(Xm)||""),r=fe(""),n=fe(null),s=fe("idle"),i=fe(""),a=fe(null),o=fe("");let l=null;const c=()=>new Promise((A,_)=>{var w,C,T;if((C=(w=window.google)==null?void 0:w.accounts)!=null&&C.oauth2&&((T=window.gapi)!=null&&T.client)){A();return}const b=document.createElement("script");b.src="https://accounts.google.com/gsi/client",b.onload=()=>{a.value=window.google.accounts.oauth2.initTokenClient({client_id:"756483333257-kh1cv865e0buv0cv9g0v1h7ghq7s0e70.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/spreadsheets",callback:N=>{N.access_token?(o.value=N.access_token,t.value=!0,window.gapi.client.setToken({access_token:N.access_token}),l&&(l(N),l=null)):(console.error("Failed to get access token"),l&&(l(null),l=null))}});const k=document.createElement("script");k.src="https://apis.google.com/js/api.js",k.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:"AIzaSyDx1jbQT-FzgzjASFqVA2kbAHWJ_TeUzdY",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]}),A()})},document.head.appendChild(k)},b.onerror=()=>_(new Error("Failed to load Google Identity Services")),document.head.appendChild(b)}),u=async()=>{if(!a.value)throw new Error("Google auth not initialized");if(o.value)try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:"1BxiMVs0XRA5nFMRigcZ_6g3D6P6dNTMhvBSm1x7kFNg"}),{access_token:o.value}}catch{console.log("Token expired, requesting new one"),o.value=""}return new Promise((A,_)=>{l=A;const b=setTimeout(()=>{l=null,_(new Error("Token request timed out"))},3e4),w=a.value.callback;a.value.callback=C=>{clearTimeout(b),a.value.callback=w,C.access_token?(o.value=C.access_token,t.value=!0,window.gapi.client.setToken({access_token:C.access_token}),l&&(l(C),l=null)):(console.error("Failed to get access token:",C),l&&(l(null),l=null))};try{a.value.requestAccessToken()}catch(C){clearTimeout(b),a.value.callback=w,_(C)}})},d=async(A,_=[])=>{var b;try{s.value="syncing",i.value="Creating new Google Sheet...",o.value||await u();const C=((b=Bd().currentUser)==null?void 0:b.email)||"",T=await window.gapi.client.sheets.spreadsheets.create({properties:{title:`CaseManage Student Data - ${new Date().toLocaleDateString()}`,locale:"en_US",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},sheets:[{properties:{title:g0,gridProperties:{rowCount:1e3,columnCount:9,frozenRowCount:1}}}]}),k=T.result.spreadsheetId;e.value=k,r.value=`https://docs.google.com/spreadsheets/d/${k}`,localStorage.setItem(Xm,k),await f(A,_);const N=T.result.sheets[0].properties.sheetId;return await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:k,resource:{requests:[{repeatCell:{range:{sheetId:N,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:N,dimension:"COLUMNS",startIndex:0,endIndex:9}}},{addProtectedRange:{protectedRange:{range:{sheetId:N},description:`Read-only protection for ${g0}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),s.value="success",i.value="Sheet created and linked successfully!",n.value=new Date,window.open(r.value,"_blank"),{spreadsheetId:k,url:r.value}}catch(w){throw console.error("Error creating sheet:",w),s.value="error",i.value=`Failed to create sheet: ${w.message}`,w}},f=async(A,_=[])=>{if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{s.value="syncing",i.value="Updating Google Sheet...",o.value||await u();const b=A.filter(N=>{var R,O;return((O=(R=N.app)==null?void 0:R.flags)==null?void 0:O.flag1)||N.flag1||!1});console.log(" Google Sheets - Original students:",A.length),console.log(" Google Sheets - Filtered students (separate setting only):",b.length),console.log(" Google Sheets - Students data:",b),b&&b.length>0&&console.log(" Google Sheets - First student:",b[0]);const w=["Student ID","First Name","Last Name","Grade","Case Manager","Separate Setting","Assessment Accommodations","Services","Last Updated"],C=b.map(N=>{var B,R,O,U,M,q,H,L,z,K,te,ge;return console.log(" Processing student:",N.id,{firstName:N.firstName||((R=(B=N.app)==null?void 0:B.studentData)==null?void 0:R.firstName),lastName:N.lastName||((U=(O=N.app)==null?void 0:O.studentData)==null?void 0:U.lastName),grade:N.grade||((q=(M=N.app)==null?void 0:M.studentData)==null?void 0:q.grade)}),[N.id||"",N.firstName||((L=(H=N.app)==null?void 0:H.studentData)==null?void 0:L.firstName)||"",N.lastName||((K=(z=N.app)==null?void 0:z.studentData)==null?void 0:K.lastName)||"",N.grade||((ge=(te=N.app)==null?void 0:te.studentData)==null?void 0:ge.grade)||"",p(N,_)||"",x(N)||"",v(N,"assessment")||"",g(N)||"",new Date().toLocaleString()]}),T=[w,...C];console.log(" Google Sheets - Data to write:",T),await window.gapi.client.sheets.spreadsheets.values.clear({spreadsheetId:e.value,range:`${g0}!A:Z`});const k=await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${g0}!A1`,valueInputOption:"RAW",resource:{values:T}});console.log(" Google Sheets - Update response:",k),s.value="success",i.value=`Updated ${C.length} students (separate setting only)`,n.value=new Date}catch(b){throw console.error("Error updating sheet:",b),s.value="error",i.value=`Failed to update: ${b.message}`,b.status===401&&(o.value="",await u()),b}},h=()=>{e.value="",r.value="",localStorage.removeItem(Xm),s.value="idle",i.value="",n.value=null},p=(A,_=[])=>{var C,T;const b=A.caseManagerId||((T=(C=A.app)==null?void 0:C.studentData)==null?void 0:T.caseManagerId)||A.casemanager_id;if(!b)return"Not Assigned";const w=_.find(k=>k.id===b);return w&&(w.name||`${w.firstName} ${w.lastName}`||w.email)||b},v=(A,_)=>{var w,C,T;const b=((C=(w=A.app)==null?void 0:w.accommodations)==null?void 0:C[_])||((T=A.accommodations)==null?void 0:T[_])||[];return Array.isArray(b)?b.join(", "):b},g=A=>{var b;const _=((b=A.app)==null?void 0:b.classServices)||A.classServices||[];return Array.isArray(_)?_.map(w=>w.name||w).join(", "):_},x=A=>{var b,w;return((w=(b=A.app)==null?void 0:b.flags)==null?void 0:w.flag1)||A.flag1||!1?"True":"False"},y=async()=>{if(!e.value)return!1;try{return await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:e.value}),!0}catch(A){return A.status===404&&h(),!1}},E=async(A,_,b,w=[],C=[])=>{var T;if(!e.value)throw new Error("No linked sheet. Create a sheet first.");try{o.value||await u();const N=((T=Bd().currentUser)==null?void 0:T.email)||"";console.log(" Creating custom tab:",A,"for teachers:",b,"excluding periods:",C);const R=(await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{addSheet:{properties:{title:A,gridProperties:{rowCount:1e3,columnCount:12,frozenRowCount:1}}}}]}})).result.replies[0].addSheet.properties.sheetId;console.log(" Created sheet with ID:",R);const O=_.filter(H=>{var z,K;return((K=(z=H.app)==null?void 0:z.flags)==null?void 0:K.flag1)||H.flag1||!1});console.log(" Custom tab - Original students:",_.length),console.log(" Custom tab - Filtered students (separate setting only):",O.length);const U=["Student ID","First Name","Last Name","Grade","Case Manager","Period","Teacher","Subject","Separate Setting","Assessment Accommodations","Services","Last Updated"],M=[];O.forEach(H=>{const L=I(H,b,w,C);console.log(" Student:",H.id,"Periods found:",L.length,"Excluded periods:",C),L.forEach(z=>{console.log(" Adding row for period:",z.period,"teacher:",z.teacherName,"source:",z.source||"unknown")}),L.forEach(z=>{var K,te,ge,ie,he,Z;M.push([H.id||"",H.firstName||((te=(K=H.app)==null?void 0:K.studentData)==null?void 0:te.firstName)||"",H.lastName||((ie=(ge=H.app)==null?void 0:ge.studentData)==null?void 0:ie.lastName)||"",H.grade||((Z=(he=H.app)==null?void 0:he.studentData)==null?void 0:Z.grade)||"",p(H,w)||"",z.period||"",z.teacherName||"",z.subject||"",x(H)||"",v(H,"assessment")||"",g(H)||"",new Date().toLocaleString()])})});const q=[U,...M];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:e.value,range:`${A}!A1`,valueInputOption:"RAW",resource:{values:q}}),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{repeatCell:{range:{sheetId:R,startRowIndex:0,endRowIndex:1},cell:{userEnteredFormat:{backgroundColor:{red:.2,green:.6,blue:.9},textFormat:{bold:!0,foregroundColor:{red:1,green:1,blue:1}}}},fields:"userEnteredFormat(backgroundColor,textFormat)"}},{autoResizeDimensions:{dimensions:{sheetId:R,dimension:"COLUMNS",startIndex:0,endIndex:12}}},{addProtectedRange:{protectedRange:{range:{sheetId:R},description:`Read-only protection for ${A}`,warningOnly:!1,editors:{users:[],domainUsersCanEdit:!1}}}}]}}),console.log(" Custom tab created successfully with",M.length,"rows and read-only protection"),{sheetId:R,rowCount:M.length}}catch(k){throw console.error("Error creating custom tab:",k),k}},I=(A,_,b=[],w=[])=>{var k,N,B,R,O;const C=[];console.log(" getStudentPeriodsForTeachers for student:",A.id,"teacherIds:",_,"excludedPeriods:",w,"excludedPeriods array:",JSON.stringify(w));const T=U=>{let M=-1;if(/^\d+$/.test(U))M=parseInt(U)-1;else if(U==="SH")M=6;else if(U.startsWith("Per")){const q=U.replace("Per","");/^\d+$/.test(q)&&(M=parseInt(q)-1)}return console.log(" Period",U,"maps to index",M,"excluded?",w.includes(M.toString())),w.includes(M.toString())};if((k=A.aeries)!=null&&k.schedule){const U=Object.entries(A.aeries.schedule);console.log(" Aeries schedule entries:",U.length);for(let M=0;M<U.length;M++){const[q,H]=U[M],L=T(q);console.log(" Checking aeries period key:",q,"teacherId:",H==null?void 0:H.teacherId,"excluded?",L),H&&H.teacherId&&_.includes(String(H.teacherId))&&(L?console.log(" Excluding aeries period",q):(console.log(" Including aeries period",q),C.push({period:q.replace("period",""),teacherId:H.teacherId,teacherName:P(H.teacherId,b),subject:H.subject||"",source:"aeries"})))}}if((B=(N=A.app)==null?void 0:N.schedule)!=null&&B.periods){const U=Object.entries(A.app.schedule.periods);console.log(" App schedule entries:",U.length);for(let M=0;M<U.length;M++){const[q,H]=U[M],L=T(q);console.log(" Checking app period key:",q,"teacherId:",H,"excluded?",L),H&&_.includes(String(H))&&(L?console.log(" Excluding app period",q):(console.log(" Including app period",q),C.push({period:q,teacherId:H,teacherName:P(H,b),subject:"",source:"app"})))}}for(let U=0;U<7;U++){const M=`period${U+1}TeacherId`,q=A[M]||((R=A.aeries)==null?void 0:R[M])||((O=A.app)==null?void 0:O[M]);if(q&&_.includes(String(q))){const H=w.includes(U.toString());console.log(" Checking CSV period index",U,"field:",M,"teacherId:",q,"excluded?",H),H?console.log(" Excluding CSV period",U):(console.log(" Including CSV period",U),C.push({period:(U+1).toString(),teacherId:q,teacherName:P(q,b),subject:"",source:"csv"}))}}return console.log(" Final periods for student",A.id,":",C.length,C),C},P=(A,_=[])=>{let b=_.find(w=>w.id===A);return!b&&/^\d+$/.test(A)&&(b=_.find(w=>w.aeriesId===A)),b?b.name||`${b.firstName} ${b.lastName}`||`Teacher ${A}`:`Teacher ${A}`};return{isInitialized:t,linkedSheetId:e,linkedSheetUrl:r,lastSyncTime:n,syncStatus:s,syncMessage:i,initializeGoogleAuth:c,requestAccessToken:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:E,deleteCustomTab:async A=>{if(!e.value)throw new Error("No linked sheet.");try{o.value||await u(),await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.value,resource:{requests:[{deleteSheet:{sheetId:A}}]}}),console.log(" Deleted custom tab with sheet ID:",A)}catch(_){throw console.error("Error deleting custom tab:",_),_}},unlinkSheet:h,checkSheetConnection:y}}function Gh(t){if(!t||typeof t!="object")return t;if(t.toJSON&&typeof t.toJSON=="function")return t.toJSON();if(Array.isArray(t))return t.map(Gh);const e={};for(const[r,n]of Object.entries(t)){if(r.toLowerCase().includes("schedule")&&typeof n=="object"&&n!==null)for(const[s,i]of Object.entries(n))i&&typeof i=="object"&&i.teacherId!==void 0&&(n[s].teacherId=String(i.teacherId));e[r]=Gh(n)}return e}function Ua(){const t=fe([]),e=xy();async function r(){return e}async function n(){var d,f,h;const c=await fr(Ht(ot,"students"));t.value=c.docs.map(p=>{const v=p.data(),g=Gh(v);return{id:p.id,...g}});const u=t.value.find(p=>p.aeries);u&&(console.log(" useStudents DEBUG - Student with aeries:",u),console.log(" useStudents DEBUG - aeries.schedule:",(d=u.aeries)==null?void 0:d.schedule),console.log(" useStudents DEBUG - aeries.schedule type:",typeof((f=u.aeries)==null?void 0:f.schedule)),(h=u.aeries)!=null&&h.schedule&&console.log(" useStudents DEBUG - schedule keys:",Object.keys(u.aeries.schedule)))}function s(c){t.value=c.map(u=>{const d=Gh(u);return{id:u.id,...d}})}async function i(){return(await fr(Ht(ot,"students"))).docs.map(u=>({id:u.id,...u.data()}))}async function a(c,u){await iy(xt(ot,"students",c),u);try{const d=await r();if(d&&d.linkedSheetId.value){const f=t.value.findIndex(h=>h.id===c);f!==-1&&(t.value[f]={...t.value[f],...u}),console.log("Syncing student update to Google Sheets..."),await d.updateSheetData(t.value)}}catch(d){console.error("Failed to sync to Google Sheets:",d)}}async function o(c){await Gc(xt(ot,"students",c));try{const u=await r();u&&u.linkedSheetId.value&&(t.value=t.value.filter(d=>d.id!==c),console.log("Syncing student deletion to Google Sheets..."),await u.updateSheetData(t.value))}catch(u){console.error("Failed to sync to Google Sheets:",u)}}return{students:t,fetchStudents:n,setStudents:s,fetchAllStudents:i,updateStudent:a,deleteStudent:o,deleteAllStudents:async()=>{try{const u=(await fr(Ht(ot,"students"))).docs;return await VU(u,async d=>{const f=N4(ot);d.forEach(h=>{f.delete(h.ref)}),await f.commit()},50,2e3),{success:!0}}catch(c){throw console.error("Error deleting all students:",c),c}}}}function yy(){const t=fe({}),e=fe(!1);async function r(){e.value=!0;try{const d=await fr(Ht(ot,"aideSchedules")),f={};d.forEach(h=>{f[h.id]=h.data()}),t.value=f}catch(d){console.error("Error loading aide assignments:",d),t.value={}}finally{e.value=!1}}async function n(d){if(!d){console.warn("loadAideAssignment called without aideId");return}e.value=!0;try{const f=await $r(xt(ot,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={classAssignment:{},directAssignment:[]}}catch(f){console.error("Error loading aide assignment:",f),t.value[d]={classAssignment:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f){try{const h=JSON.parse(JSON.stringify(f));await br(xt(ot,"aideSchedules",d),h,{merge:!0}),t.value[d]=h}catch(h){throw console.error("Error saving aide assignment:",h),h}}async function i(){try{const d=Object.entries(t.value);for(const[f,h]of d){const p=JSON.parse(JSON.stringify(h));await br(xt(ot,"aideSchedules",f),p,{merge:!0})}}catch(d){throw console.error("Error saving all aide assignments:",d),d}}function a(d,f){const h=[];return Object.entries(t.value).forEach(([p,v])=>{v.classAssignment&&v.classAssignment[f]&&(Array.isArray(v.classAssignment[f])?v.classAssignment[f]:[v.classAssignment[f]]).includes(d)&&h.push(p)}),h}function o(d){var h;const f=(h=t.value[d])==null?void 0:h.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(h=>{var v;const p=(v=t.value[h])==null?void 0:v.directAssignment;return Array.isArray(p)?p.includes(d):p===d})||null}function c(d,f,h){const p=[],v=t.value[d];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(x=>{if(x){const y=f.find(E=>E.id===x);y&&p.push({...y,assignmentType:"direct"})}}),Object.entries(v.classAssignment||{}).forEach(([x,y])=>{y&&(Array.isArray(y)?y:[y]).forEach(I=>{I&&f.forEach(P=>{if(P.schedule&&P.schedule[x]===I){const D=p.findIndex(A=>A.id===P.id);D===-1?p.push({...P,assignmentType:"class",period:x,teacherId:I}):(p[D].assignmentType="both",p[D].period=x,p[D].teacherId=I)}})})})),p}function u(d,f,h,p){if(!d||!f||!h||!p)return!1;const v=h.find(I=>I.id===f);if(!v)return!1;const g=t.value[d];if(!g)return!1;if((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).includes(f))return!0;if(!v.schedule)return!1;const y=g.classAssignment||{};return Object.entries(v.schedule).some(([I,P])=>{const D=y[I];return D?(Array.isArray(D)?D:[D]).includes(P):!1})}return{aideAssignment:be(()=>t.value),loading:be(()=>e.value),loadAideAssignments:r,loadAideAssignment:n,saveAideAssignment:s,saveAllAideAssignments:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}function Ey(){const t=fe(!1),e=fe(""),r=fe("");let n,s,i,a;try{n=Ic(),s=Ta(n,"sendTeacherFeedbackForm"),i=Ta(n,"syncFormResponses"),a=Ta(n,"getStudentFeedback")}catch(q){console.warn("Firebase Functions not available:",q),s=()=>Promise.reject(new Error("Functions not available")),i=()=>Promise.reject(new Error("Functions not available")),a=()=>Promise.reject(new Error("Functions not available"))}const o=Ht(ot,"feedbackForms"),l=Ht(ot,"feedbackResponses"),c=Ht(ot,"feedbackSendLog"),u=fe([]),d=fe(!0),f=fe([]),h=fe(!0),p=fe([]),v=fe(!0);let g,x,y;const E=be(()=>{var H;return(((H=u.value)==null?void 0:H.filter(L=>L.active!==!1))||[]).sort((L,z)=>{var ge,ie;const K=(ge=L.createdAt)!=null&&ge.seconds?new Date(L.createdAt.seconds*1e3):new Date(L.createdAt);return((ie=z.createdAt)!=null&&ie.seconds?new Date(z.createdAt.seconds*1e3):new Date(z.createdAt))-K})}),I=be(()=>{var q;return((q=f.value)==null?void 0:q.length)||0}),P=async q=>{try{t.value=!0,e.value="";const H={title:q.title,description:q.description,formUrl:q.formUrl,responseSpreadsheetId:q.responseSpreadsheetId,active:!0,createdAt:new Date,createdBy:q.createdBy},L=xt(o);return await br(L,H),r.value="Feedback form created successfully!",{id:L.id,...H}}catch(H){throw console.error("Error creating feedback form:",H),e.value=H.message,H}finally{t.value=!1}},D=async(q,H)=>{try{t.value=!0,e.value="";const L=xt(o,q);await br(L,{...H,updatedAt:new Date},{merge:!0}),r.value="Feedback form updated successfully!"}catch(L){throw console.error("Error updating feedback form:",L),e.value=L.message,L}finally{t.value=!1}},A=async q=>{try{t.value=!0,e.value="";const H=xt(o,q);await Gc(H),r.value="Feedback form deleted successfully!"}catch(H){throw console.error("Error deleting feedback form:",H),e.value=H.message,H}finally{t.value=!1}},_=async q=>{try{t.value=!0,e.value="";const H=await s(q);if(H.data.success)return r.value=H.data.message,H.data;throw new Error(H.data.message||"Failed to send feedback form")}catch(H){throw console.error("Error sending feedback form:",H),e.value=H.message,H}finally{t.value=!1}},b=async(q,H="Form Responses 1")=>{try{t.value=!0,e.value="";const L=await i({spreadsheetId:q,sheetName:H});if(L.data.success)return r.value=L.data.message,L.data;throw new Error(L.data.message||"Failed to sync responses")}catch(L){throw console.error("Error syncing responses:",L),e.value=L.message,L}finally{t.value=!1}},w=async q=>{try{t.value=!0,e.value="";const H=await a({studentId:q});if(H.data.success)return H.data.responses;throw new Error(H.data.message||"Failed to get student feedback")}catch(H){throw console.error("Error getting student feedback:",H),e.value=H.message,H}finally{t.value=!1}},C=q=>be(()=>{var H;return((H=f.value)==null?void 0:H.filter(L=>L.formId===q))||[]}),T=q=>be(()=>{var H;return((H=f.value)==null?void 0:H.filter(L=>L.spreadsheetId===q))||[]}),k=q=>be(()=>{var H;return((H=p.value)==null?void 0:H.filter(L=>L.studentId===q))||[]}),N=()=>{e.value="",r.value=""},B=q=>{const H=q.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return H?H[1]:null},R=q=>{const H=q.match(/\/forms\/d\/([a-zA-Z0-9-_]+)/);return H?H[1]:null},O=()=>{try{g=Ac(o,q=>{u.value=q.docs.map(H=>({id:H.id,...H.data()})),d.value=!1},q=>{console.warn("Error listening to feedback forms:",q),d.value=!1}),x=Ac(l,q=>{f.value=q.docs.map(H=>({id:H.id,...H.data()})),h.value=!1},q=>{console.warn("Error listening to feedback responses:",q),h.value=!1}),y=Ac(c,q=>{p.value=q.docs.map(H=>({id:H.id,...H.data()})),v.value=!1},q=>{console.warn("Error listening to send log:",q),v.value=!1})}catch(q){console.warn("Error initializing Firestore listeners:",q),d.value=!1,h.value=!1,v.value=!1}},U=()=>{g&&g(),x&&x(),y&&y()};return tr(()=>{O()}),xi(()=>{U()}),{isLoading:t,error:e,successMessage:r,formsLoading:d,responsesLoading:h,sendLogLoading:v,feedbackForms:u,feedbackResponses:f,sendLog:p,activeForms:E,totalResponses:I,createFeedbackForm:P,updateFeedbackForm:D,deleteFeedbackForm:A,sendFeedbackForm:_,syncResponses:b,getResponsesForStudent:w,getResponsesForForm:C,getResponsesForSpreadsheet:T,getSendLogForStudent:k,getTeacherEmails:async()=>{try{const q=Ht(ot,"users"),H=Jr(q,xs("role","==","teacher"));return(await fr(H)).docs.map(z=>{const K=z.data();return{id:z.id,name:K.name,email:K.email}})}catch(q){throw console.error("Error getting teacher emails:",q),q}},clearMessages:N,extractSpreadsheetId:B,extractFormId:R}}let tn={};function $U(t,e){tn={userId:t,userRole:e,databaseStudents:0,accessibleStudents:0,providerView:"",providerViewStudents:0,classViewPeriods:{},timestamp:new Date().toISOString()}}function jU(t,e={}){tn.databaseStudents=t,tn.databaseDetails=e}function HU(t,e,r=[]){tn.providerView=t,tn.providerViewStudents=e,tn.providerViewNames=r.slice(0,5)}function GU(t){tn.classViewPeriods=Object.entries(t).reduce((e,[r,n])=>(e[r]=n.length,e),{})}function zU(){console.log(" === DEBUG SUMMARY ==="),console.log(`User: ${tn.userId} (${tn.userRole})`),console.log(`Database returned: ${tn.databaseStudents} students`),tn.databaseDetails&&(console.log(`  - Case managing: ${tn.databaseDetails.caseManaging||0}`),console.log(`  - Teaching: ${tn.databaseDetails.teaching||0}`)),console.log(`Accessible after role filter: ${tn.accessibleStudents} students`),console.log(`Provider view "${tn.providerView}": ${tn.providerViewStudents} students`),tn.classViewPeriods&&Object.keys(tn.classViewPeriods).length>0&&console.log("Class view periods:",tn.classViewPeriods),console.log(" === END SUMMARY ===")}function WU(){const t=async()=>{console.log(" Security: Loading ALL students for admin user");const o=Jr(Ht(ot,"students"),Ja("app.studentData.lastName","asc"));return(await fr(o)).docs.map(c=>({id:c.id,...c.data()}))},e=async o=>{console.log(" Security: Loading students for case manager:",o);try{const l=Jr(Ht(ot,"students"),xs("app.studentData.caseManagerId","==",o),Ja("app.studentData.lastName","asc")),u=(await fr(l)).docs.map(v=>({id:v.id,...v.data()}));console.log(" Security: Case manager manages",u.length,"students"),console.log(" Security: CM student names:",u.map(v=>{var g,x,y,E;return`${(x=(g=v.app)==null?void 0:g.studentData)==null?void 0:x.firstName} ${(E=(y=v.app)==null?void 0:y.studentData)==null?void 0:E.lastName}`}).slice(0,5));const d=Jr(Ht(ot,"students")),f=await fr(d),h=[];f.docs.forEach(v=>{var E,I,P,D,A;const g={id:v.id,...v.data()},x=g.schedule||((I=(E=g.app)==null?void 0:E.schedule)==null?void 0:I.periods)||((D=(P=g.aeries)==null?void 0:P.schedule)==null?void 0:D.periods)||((A=g.aeries)==null?void 0:A.schedule)||{};let y=!1;Object.entries(x).forEach(([_,b])=>{var w;typeof b=="string"&&b===o?y=!0:typeof b=="object"&&(b.teacherId===o&&(y=!0),((w=b.coTeaching)==null?void 0:w.caseManagerId)===o&&(y=!0))}),y&&!u.find(_=>_.id===g.id)&&h.push(g)}),console.log(" Security: Case manager teaches",h.length,"additional students"),console.log(" Security: Teaching student names:",h.map(v=>{var g,x,y,E;return`${(x=(g=v.app)==null?void 0:g.studentData)==null?void 0:x.firstName} ${(E=(y=v.app)==null?void 0:y.studentData)==null?void 0:E.lastName}`}).slice(0,5));const p=[...u,...h];return console.log(" Security: Total students for case manager:",p.length),jU(p.length,{caseManaging:u.length,teaching:h.length}),p.sort((v,g)=>{var E,I,P,D,A,_,b,w;const x=`${((I=(E=v.app)==null?void 0:E.studentData)==null?void 0:I.lastName)||""}, ${((D=(P=v.app)==null?void 0:P.studentData)==null?void 0:D.firstName)||""}`,y=`${((_=(A=g.app)==null?void 0:A.studentData)==null?void 0:_.lastName)||""}, ${((w=(b=g.app)==null?void 0:b.studentData)==null?void 0:w.firstName)||""}`;return x.localeCompare(y)})}catch(l){throw console.error(" Security: Query failed:",l),l}},r=async o=>{console.log(" Security: Loading students for teacher:",o);try{const l=Jr(Ht(ot,"students")),c=await fr(l),u=[];return c.docs.forEach(d=>{var v,g,x,y,E;const f={id:d.id,...d.data()},h=f.schedule||((g=(v=f.app)==null?void 0:v.schedule)==null?void 0:g.periods)||((y=(x=f.aeries)==null?void 0:x.schedule)==null?void 0:y.periods)||((E=f.aeries)==null?void 0:E.schedule)||{};let p=!1;Object.entries(h).forEach(([I,P])=>{var D;typeof P=="string"&&P===o?p=!0:typeof P=="object"&&(P.teacherId===o&&(p=!0),((D=P.coTeaching)==null?void 0:D.caseManagerId)===o&&(p=!0))}),p&&u.push(f)}),console.log(" Security: Teacher has access to",u.length,"students"),u.sort((d,f)=>{var v,g,x,y,E,I,P,D;const h=`${((g=(v=d.app)==null?void 0:v.studentData)==null?void 0:g.lastName)||""}, ${((y=(x=d.app)==null?void 0:x.studentData)==null?void 0:y.firstName)||""}`,p=`${((I=(E=f.app)==null?void 0:E.studentData)==null?void 0:I.lastName)||""}, ${((D=(P=f.app)==null?void 0:P.studentData)==null?void 0:D.firstName)||""}`;return h.localeCompare(p)})}catch(l){return console.error(" Security: Error loading teacher students:",l),[]}},n=async o=>{console.log(" Security: Loading students for service provider:",o);try{const l=Jr(Ht(ot,"students"),xs("app.providers","array-contains",o)),u=(await fr(l)).docs.map(f=>({id:f.id,...f.data()}));return(await r(o)).forEach(f=>{u.find(h=>h.id===f.id)||u.push(f)}),console.log(" Security: Service provider has access to",u.length,"students"),u.sort((f,h)=>{var g,x,y,E,I,P,D,A;const p=`${((x=(g=f.app)==null?void 0:g.studentData)==null?void 0:x.lastName)||""}, ${((E=(y=f.app)==null?void 0:y.studentData)==null?void 0:E.firstName)||""}`,v=`${((P=(I=h.app)==null?void 0:I.studentData)==null?void 0:P.lastName)||""}, ${((A=(D=h.app)==null?void 0:D.studentData)==null?void 0:A.firstName)||""}`;return p.localeCompare(v)})}catch(l){return console.error(" Security: Error loading service provider students:",l),[]}},s=async o=>{console.log(" Security: Loading students for paraeducator:",o);try{const l=await $r(xt(ot,"aideSchedules",o));if(!l.exists())return console.log(" Security: No aide schedule found for:",o),[];const c=l.data(),u=new Set;if(c.directAssignment&&(Array.isArray(c.directAssignment)?c.directAssignment:[c.directAssignment]).forEach(v=>u.add(v)),c.classAssignment){const p=Jr(Ht(ot,"students"));(await fr(p)).docs.forEach(g=>{var I,P,D,A;const x={id:g.id,...g.data()},y=((P=(I=x.app)==null?void 0:I.studentData)==null?void 0:P.plan)||x.plan;if(y!=="IEP"&&y!=="504")return;const E=((A=(D=x.app)==null?void 0:D.schedule)==null?void 0:A.periods)||x.schedule||{};Object.entries(E).forEach(([_,b])=>{let w;if(typeof b=="string")w=b;else if(b&&typeof b=="object")w=b.teacherId;else return;const C=c.classAssignment[_];C&&(Array.isArray(C)?C:[C]).includes(w)&&u.add(x.id)})})}const d=Array.from(u);if(d.length===0)return console.log(" Security: No students found for paraeducator:",o),[];const f=[],h=10;for(let p=0;p<d.length;p+=h){const v=d.slice(p,p+h),g=Jr(Ht(ot,"students"),xs(aL(),"in",v));(await fr(g)).docs.forEach(y=>{f.push({id:y.id,...y.data()})})}return console.log(" Security: Paraeducator has access to",f.length,"students"),f}catch(l){return console.error(" Security: Error loading paraeducator students:",l),[]}},i=async o=>{if(!o||!o.role)return console.log(" Security: No user or role provided - returning empty array"),[];const{role:l,uid:c}=o;try{switch(l){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return await t();case"case_manager":return await e(c);case"teacher":return await r(c);case"service_provider":return await n(c);case"paraeducator":return await s(c);default:return console.log(" Security: Unknown role:",l,"- returning empty array"),[]}}catch(u){return console.error(" Security: Error loading students for role:",l,u),[]}};return{getStudentsByRole:i,getTestingStudents:async o=>{console.log(" Security: Loading testing students for user:",o.uid,"role:",o.role);try{const u=(await i(o)).filter(d=>{var f,h;return((h=(f=d.app)==null?void 0:f.flags)==null?void 0:h.flag2)||d.flag2||!1}).map(d=>{var f,h,p,v,g,x,y,E,I,P,D,A,_,b,w,C,T;return{id:d.id,app:{studentData:{firstName:((h=(f=d.app)==null?void 0:f.studentData)==null?void 0:h.firstName)||"",lastName:((v=(p=d.app)==null?void 0:p.studentData)==null?void 0:v.lastName)||"",grade:((x=(g=d.app)==null?void 0:g.studentData)==null?void 0:x.grade)||"",studentId:((E=(y=d.app)==null?void 0:y.studentData)==null?void 0:E.studentId)||"",plan:((P=(I=d.app)==null?void 0:I.studentData)==null?void 0:P.plan)||""},flags:{flag2:((A=(D=d.app)==null?void 0:D.flags)==null?void 0:A.flag2)||d.flag2||!1,separateSetting:((b=(_=d.app)==null?void 0:_.flags)==null?void 0:b.flag2)||d.flag2||!1},accommodations:((w=d.app)==null?void 0:w.accommodations)||{},schedule:((C=d.app)==null?void 0:C.schedule)||{},providers:((T=d.app)==null?void 0:T.providers)||{}}}});return console.log(" Security: User has access to",u.length,"testing students"),u}catch(l){return console.error(" Security: Error loading testing students:",l),[]}}}}function KU(t,e){const r={isSecure:!0,violations:[],summary:"",studentCount:t.length,authorizedCount:0,unauthorizedCount:0};return!e||!e.role?(r.isSecure=!1,r.violations.push("No user or role provided"),r):(t.forEach((n,s)=>{var a,o,l,c;qU(n,e)?r.authorizedCount++:(r.unauthorizedCount++,r.isSecure=!1,r.violations.push({studentIndex:s,studentName:`${(o=(a=n.app)==null?void 0:a.studentData)==null?void 0:o.firstName} ${(c=(l=n.app)==null?void 0:l.studentData)==null?void 0:c.lastName}`,studentId:n.id,reason:XU(n,e)}))}),r.summary=`User ${e.role} (${e.uid}) has access to ${r.authorizedCount}/${r.studentCount} students`,r.isSecure||(r.summary+=`. SECURITY VIOLATION: ${r.unauthorizedCount} unauthorized students accessible!`),r)}function qU(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"admin":case"administrator":case"administrator_504_CM":case"sped_chair":return!0;case"case_manager":return((i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===n;case"teacher":const d=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{};return Object.values(d).includes(n);case"service_provider":const f=((l=t.app)==null?void 0:l.providers)||{},h=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},p=Object.values(f).includes(n),v=Object.values(h).includes(n);return p||v;case"paraeducator":return!0;default:return!1}}function XU(t,e){var s,i,a,o,l,c,u;const{role:r,uid:n}=e;switch(r){case"case_manager":const d=(i=(s=t.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId;return`Case manager ${n} is not assigned to student (assigned to: ${d})`;case"teacher":const f=((o=(a=t.app)==null?void 0:a.schedule)==null?void 0:o.periods)||{},h=Object.values(f);return`Teacher ${n} does not teach this student (teachers: ${h.join(", ")})`;case"service_provider":const p=((l=t.app)==null?void 0:l.providers)||{},v=((u=(c=t.app)==null?void 0:c.schedule)==null?void 0:u.periods)||{},g=Object.values(p).filter(y=>y),x=Object.values(v);return`Service provider ${n} is not assigned to student (providers: ${g.join(", ")}, teachers: ${x.join(", ")})`;case"paraeducator":return null;default:return`Unknown role: ${r}`}}function YU(t){t.isSecure?console.log(" SECURITY TEST PASSED:",t.summary):(console.error(" SECURITY TEST FAILED:",t.summary),console.error("Violations:",t.violations))}function M2(t,e){const r=KU(t,e);return YU(r),r}const gk=(t,e)=>{console.log(` DEBUG: Schedule Operation - ${t}:`,e)};function vk(t){return gk("getTeacherIdFromPeriod",{periodData:t,type:typeof t}),t?typeof t=="string"?t:t.teacherId||null:null}function am(t){var e;return gk("getCoTeachingCaseManagerFromPeriod",{periodData:t}),!t||typeof t!="object"?null:((e=t.coTeaching)==null?void 0:e.caseManagerId)||null}function QU(t,e={}){if(!t||!t.periods)return[];const r=new Set;return Object.values(t.periods).forEach(n=>{const s=vk(n);s&&r.add(s);const i=am(n);if(i){const a=e[i];a&&(a.role==="teacher"||a.roles&&a.roles.includes("teacher"))&&r.add(i)}}),Array.from(r)}function JU(t){if(!t||!t.periods)return[];const e=new Set;return Object.values(t.periods).forEach(r=>{const n=am(r);n&&e.add(n)}),Array.from(e)}function ZU(t,e){var r,n;return!((n=(r=t.app)==null?void 0:r.schedule)!=null&&n.periods)||!e?!1:Object.values(t.app.schedule.periods).some(s=>am(s)===e)}function eV(){const t=Al(),e=Ei(),{students:r,setStudents:n}=Ua(),{users:s,userList:i,fetchUsers:a,caseManagers:o,teacherList:l,userRoles:c}=pa(),{loadAideAssignments:u,shouldAideSeeStudent:d,aideAssignment:f}=yy(),{feedbackForms:h,formsLoading:p}=Ey(),{getStudentsByRole:v}=WU(),g=fe(!1),x=fe(null),y=e.user,E=be(()=>{var N;const k=(N=y.value)==null?void 0:N.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(k)}),I=be(()=>{var k;return["case_manager","administrator_504_CM","sped_chair"].includes((k=y.value)==null?void 0:k.role)}),P=be(()=>s.value||{}),D=be(()=>{var k;return((k=i.value)==null?void 0:k.filter(N=>N.role==="paraeducator"))||[]}),A=async()=>{var k,N;g.value=!0,x.value=null;try{await a();const B=y.value;if(B){console.log(" Security: Fetching students for user role:",B.role);const O=await v(B);n(O);const U=M2(O,B);U.isSecure||console.error(" SECURITY VIOLATION DETECTED:",U.violations)}else console.log(" Security: No user found - setting empty student array"),n([]);const R=(k=y.value)==null?void 0:k.role;if(["admin","administrator","administrator_504_CM","sped_chair"].includes(R)&&await u(),R==="paraeducator"&&y.value.uid){await u();const O=xt(ot,"aideSchedules",y.value.uid),U=Ac(O,async M=>{if(M.exists()){const q=await v(y.value);n(q)}});xi(()=>U())}console.log(" Security: Loaded",r.value.length,"students for",(N=y.value)==null?void 0:N.role),console.log("StudentsView - loaded users:",Object.keys(s.value||{}).length,"users")}catch(B){console.error("Error fetching data:",B),x.value=B.message||"Failed to load data"}finally{g.value=!1}},_=k=>r.value.find(N=>N.id===k)||{},b=k=>{const N=s.value[k];return N&&(N.name||N.email)||k},w=k=>{if(!k)return"N/A";const N=s.value[k];return N&&(N.name||N.email)||k},C=k=>{var N,B;return((B=(N=k.app)==null?void 0:N.studentData)==null?void 0:B.caseManagerId)||k.caseManagerId||k.casemanager_id},T=k=>{var N,B,R,O,U;return k.schedule?k.schedule:(B=(N=k.app)==null?void 0:N.schedule)!=null&&B.periods?k.app.schedule.periods:(O=(R=k.aeries)==null?void 0:R.schedule)!=null&&O.periods?k.aeries.schedule.periods:(U=k.aeries)!=null&&U.schedule?k.aeries.schedule:null};return tr(A),Qt(()=>{var k;return(k=y.value)==null?void 0:k.role},async(k,N)=>{if(k&&k!==N){console.log(" Security: User role changed from",N,"to",k,"- reloading students");const B=y.value;if(B){const R=await v(B);n(R);const O=M2(R,B);O.isSecure||console.error(" SECURITY VIOLATION DETECTED:",O.violations),console.log(" Security: Reloaded",R.length,"students for role",k)}}},{immediate:!1}),{isLoading:g,error:x,students:r,userMap:s,userList:i,userMapObj:P,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:f,feedbackForms:h,formsLoading:p,paraeducators:D,currentUser:y,isAdmin:E,showProviderView:I,fetchData:A,getStudentById:_,getUserName:b,getCaseManagerName:w,getCaseManagerId:C,getSchedule:T,shouldAideSeeStudent:d,getTeacherIdFromPeriod:vk,getCoTeachingCaseManagerFromPeriod:am,getAllTeacherIdsFromSchedule:QU,getCoTeachingCaseManagersFromSchedule:JU,isCoTeachingCaseManager:ZU,router:t}}function ct(t,e,r=""){const n=(l,c)=>c.split(".").reduce((u,d)=>u&&u[d]!==void 0?u[d]:null,l),s=n(t.overrides,e);if(t.overrides&&s!=null&&s!=="")return s;if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const c=n(t.app,`studentData.${e}`);if(c!=null&&c!=="")return c}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const c=n(t.app,`dates.${e}`);if(c!=null&&c!=="")return c}if(["instruction","assessment"].includes(e)){const c=n(t.app,`accommodations.${e}`);if(c!=null&&c!=="")return c}const l=n(t.app,e);if(l!=null&&l!=="")return l}const i=n(t.aeries,e);if(t.aeries&&i!=null&&i!=="")return i;const a=n(t.seis,e);if(t.seis&&a!=null&&a!=="")return a;const o=n(t,e);return o!=null&&o!==""?o:r}function Cu(t,e){const r=(o,l)=>l.split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:null,o),n=r(t.overrides,e);if(t.overrides&&n!=null&&n!=="")return"Override";if(t.app){if(["firstName","lastName","grade","plan"].includes(e)){const l=r(t.app,`studentData.${e}`);if(l!=null&&l!=="")return"App"}if(["reviewDate","reevalDate","meetingDate"].includes(e)){const l=r(t.app,`dates.${e}`);if(l!=null&&l!=="")return"App"}if(["instruction","assessment"].includes(e)){const l=r(t.app,`accommodations.${e}`);if(l!=null&&l!=="")return"App"}const o=r(t.app,e);if(o!=null&&o!=="")return"App"}const s=r(t.aeries,e);if(t.aeries&&s!=null&&s!=="")return"Aeries";const i=r(t.seis,e);if(t.seis&&i!=null&&i!=="")return"SEIS";const a=r(t,e);return a!=null&&a!==""?"Top-level":""}function Ym(t){return t?`<ul class="bullet-list">${t.split(/\n|\r|\d+\.\s+|\-\s+/).map(r=>r.trim()).filter(Boolean).map(r=>`<li>${r}</li>`).join("")}</ul>`:"<div></div>"}function tV(t){const{students:e,currentUser:r,shouldAideSeeStudent:n,userMap:s,getCaseManagerId:i,getSchedule:a}=t,o=fe(!1),l=fe([]),c=Ws({sortBy:"firstName",cm:"all",teacher:"all",paraeducator:"all",plan:"all",search:"",providerView:"all",viewMode:"list"});let u=null;const d=()=>{u&&clearTimeout(u),u=setTimeout(()=>{v()},300)},f=()=>{o.value=!o.value},h=()=>{c.sortBy="firstName",c.cm="all",c.teacher="all",c.paraeducator="all",c.plan="all",c.search="",c.providerView="all",c.viewMode="list",v()},p=()=>({paraeducator:c.paraeducator,teacher:c.teacher}),v=(g=c)=>{var y;let x=e.value;if(g.providerView==="case_manager"?x=x.filter(E=>{var I;return i(E)===((I=r.value)==null?void 0:I.uid)}):g.providerView==="service_provider"&&(x=x.filter(E=>{var _;const I=a(E),P=I?Object.entries(I).some(([b,w])=>{var C,T;return typeof w=="string"?w===((C=r.value)==null?void 0:C.uid):w&&typeof w=="object"?w.teacherId===((T=r.value)==null?void 0:T.uid):!1}):!1,D=(E.services||[]).some(b=>{var w;return b.includes((w=r.value)==null?void 0:w.uid)}),A=i(E)!==((_=r.value)==null?void 0:_.uid);return(P||D)&&A})),((y=r.value)==null?void 0:y.role)==="paraeducator"&&(x=x.filter(E=>{try{return n(r.value.uid,E.id,e.value,s.value)}catch(I){return console.error("Error filtering student for aide:",I),!1}})),g.search){const E=g.search.toLowerCase();x=x.filter(I=>{const P=ct(I,"firstName")||"",D=ct(I,"lastName")||"";return`${P} ${D}`.toLowerCase().includes(E)})}g.cm&&g.cm!=="all"&&(x=x.filter(E=>i(E)===g.cm)),g.teacher&&g.teacher!=="all"&&(x=x.filter(E=>{const I=a(E);return I?Object.entries(I).some(([P,D])=>typeof D=="string"?D===g.teacher:D&&typeof D=="object"?D.teacherId===g.teacher:!1):!1})),g.paraeducator&&g.paraeducator!=="all"&&(x=x.filter(E=>{try{return n(g.paraeducator,E.id,e.value,s.value)}catch(I){return console.error("Error filtering student for paraeducator:",I),!1}})),g.plan&&g.plan!=="all"&&(x=x.filter(E=>ct(E,"plan")===g.plan)),g.sortBy&&x.sort((E,I)=>{const P=ct(E,g.sortBy)||"",D=ct(I,g.sortBy)||"";if(["reviewDate","reevalDate","meetingDate"].includes(g.sortBy)){const A=P?new Date(P).getTime():0,_=D?new Date(D).getTime():0;return A-_}return P.toString().toLowerCase().localeCompare(D.toString().toLowerCase())}),l.value=x};return Qt(()=>[e.value,r.value],()=>{e.value.length>0&&v()},{deep:!0}),{showFilters:o,filteredStudents:l,currentFilters:c,toggleFilters:f,clearFilters:h,applyFilters:v,debouncedApplyFilters:d,getCurrentFilters:p}}const Z0={grades:[],classServices:[{name:"SDC",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Co-teach",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"RSP",subcategories:["English","Math","History","Science"],enabledSubcategories:["English","Math","History","Science"]},{name:"Directed Studies",subcategories:["Directed Studies"],enabledSubcategories:["Directed Studies"]},{name:"FA",subcategories:["FA"],enabledSubcategories:["FA"]}],sdcSubcategories:[],customClassServices:[],serviceProviders:["SLP","OT","PT","SC","MH","TR","AUD","VI","AT","DHH","O&M","BIS","HN","SW"],customServiceProviders:[],numPeriods:7,periodLabels:["1","2","3","4","5","6","sh"]},Ys=fe({...Z0}),va=fe(!1),Ri=fe(null);let ku=!1;function ma(){const t=xt(ot,"app_settings","global"),e=async()=>{if(va.value)return new Promise(s=>{const i=Qt(va,a=>{a||(i(),s(Ys.value))})});if(ku&&!Ri.value)return Ys.value;va.value=!0,Ri.value=null;try{const s=await $r(t);return s.exists()?(Ys.value=s.data(),console.log("useAppSettings: Loaded existing settings:",Ys.value)):(Ys.value={...Z0},console.log("useAppSettings: No existing settings, using defaults:",Ys.value)),ku=!0,Ys.value}catch(s){throw Ri.value=s.message,console.error("useAppSettings: Error loading settings:",s),s}finally{va.value=!1}},r=async s=>{va.value=!0,Ri.value=null;try{console.log("useAppSettings: Saving settings:",s),await br(t,s),console.log("useAppSettings: Settings saved successfully"),Ys.value={...s},ku=!0}catch(i){throw Ri.value=i.message,console.error("useAppSettings: Error saving settings:",i),i}finally{va.value=!1}},n=async()=>{va.value=!0,Ri.value=null;try{await br(t,{...Z0}),Ys.value={...Z0},ku=!0}catch(s){throw Ri.value=s.message,s}finally{va.value=!1}};return!ku&&!va.value&&e(),Qt(Ys,s=>{console.log("appSettings changed:",s)},{deep:!0}),{appSettings:Ys,loadAppSettings:e,saveAppSettings:r,resetAppSettings:n,loading:va,error:Ri}}function Pf(){const{appSettings:t}=ma(),e=be(()=>{var l,c,u,d;if(console.log(" usePeriodLabels: appSettings.value:",t.value),console.log(" usePeriodLabels: periodLabels:",(l=t.value)==null?void 0:l.periodLabels),console.log(" usePeriodLabels: numPeriods:",(c=t.value)==null?void 0:c.numPeriods),(u=t.value)!=null&&u.periodLabels&&((d=t.value)!=null&&d.numPeriods)){const f=t.value.periodLabels.slice(0,t.value.numPeriods);return console.log(" usePeriodLabels: returning labels:",f),f}const o=["1","2","3","4","5","6","7"];return console.log(" usePeriodLabels: returning fallback labels:",o),o}),r=o=>{const l=parseInt(o);if(!l||l<1)return`Period ${o}`;const c=l-1,u=e.value[c]||`Period ${l}`;return console.log(` getLabel(${o}) -> "${u}" (index: ${c}, labels:`,e.value,")"),u},n=o=>{const l=e.value.findIndex(c=>c===o);return l!==-1?l+1:null},s=be(()=>{var l;const o=((l=t.value)==null?void 0:l.numPeriods)||7;return Array.from({length:o},(c,u)=>u+1)}),i=be(()=>{const o={};return e.value.forEach((l,c)=>{o[l]=c+1}),o}),a=be(()=>{const o={};return e.value.forEach((l,c)=>{o[c+1]=l}),o});return{labels:e,getLabel:r,getNumber:n,numericPeriods:s,labelToNumberMap:i,numberToLabelMap:a}}function su(t,e){const{students:r,userMapObj:n,currentUser:s,getCaseManagerId:i,getSchedule:a,getUserName:o,formatDate:l}=t,{getLabel:c}=Pf(),{filteredStudents:u,currentFilters:d,applyFilters:f}=e,h=(B,R)=>{if(!B)return{periods:{},isTeacher:!1,isCoTeacher:!1};let O=!1,U=!1;const M={};return Object.entries(B).forEach(([q,H])=>{const L=typeof H=="string"?H:H==null?void 0:H.teacherId,z=typeof H=="object"?H==null?void 0:H.coTeaching:null,K=z==null?void 0:z.caseManagerId;M[q]={teacherId:L,coTeaching:z,coTeachingCM:K,teacherName:o(L),coTeacherName:K?o(K):null,label:c(q)},L===R&&(O=!0),K===R&&(U=!0)}),{periods:M,isTeacher:O,isCoTeacher:U}},p=(B,R,O)=>{if(!B||!R)return[];switch(O){case"case_manager":return B.filter(U=>i(U)===R);case"service_provider":return B.filter(U=>{const M=a(U);return M?Object.values(M).some(H=>{var L;return typeof H=="string"?H===R:H&&typeof H=="object"?H.teacherId===R||((L=H.coTeaching)==null?void 0:L.caseManagerId)===R:!1}):!1});case"all":return B;default:return console.warn(`Unknown provider view: ${O}`),[]}},v=(B,R)=>!B||!R?[]:B.filter(O=>{const{isTeacher:U,isCoTeacher:M}=h(a(O),R);return U||M}),g=(B,R)=>{const O={};return B.forEach(U=>{const M=a(U);if(!M)return;const{periods:q}=h(M,R);Object.entries(q).forEach(([H,L])=>{(L.teacherId===R||L.coTeachingCM===R)&&(O[H]||(O[H]=[]),O[H].push(U))})}),O},x=be(()=>{var O;const B=(O=s.value)==null?void 0:O.uid,R=u.value;return d.providerView,!B||!R?[]:R}),y=B=>{const R=ct(B,"firstName"),O=ct(B,"lastName");return`${R} ${O}`},E=B=>({name:y(B),grade:ct(B,"grade"),plan:ct(B,"plan"),caseManager:o(i(B))}),I=B=>({reviewDate:l(ct(B,"reviewDate")),reevalDate:l(ct(B,"reevalDate")),meetingDate:l(ct(B,"meetingDate"))}),P=B=>{const R=a(B);return R?Object.entries(R).reduce((O,[U,M])=>(O[U]={teacherId:M,teacherName:o(M)},O),{}):{}},D=B=>{d.search=B,f()},A=B=>{d.cm=B,f()},_=B=>{d.teacher=B,f()},b=B=>{d.viewMode=B,f()},w=be(()=>{const B={};return x.value.forEach(R=>{const O=ct(R,"grade");B[O]||(B[O]=[]),B[O].push(R)}),B}),C=be(()=>{const B={};return x.value.forEach(R=>{const O=ct(R,"plan");B[O]||(B[O]=[]),B[O].push(R)}),B}),T=be(()=>{var O;const B=(O=s.value)==null?void 0:O.role,R=d;return["teacher","paraeducator"].includes(B)?!1:B==="case_manager"||["sped_chair","administrator_504_CM"].includes(B)?R.providerView!=="service_provider"&&R.teacher==="all":["admin","administrator"].includes(B)?R.teacher==="all"&&R.paraeducator==="all":B==="service_provider"?R.providerView!=="service_provider":!0}),k=be(()=>{var R;const B=(R=s.value)==null?void 0:R.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(B)}),N=be(()=>{var R;return((R=s.value)==null?void 0:R.role)!=="paraeducator"});return Qt(()=>T.value,B=>{B&&d.viewMode==="class"&&(console.log(" Auto-switching from class view to list view because class view is now disabled"),d.viewMode="list",f())},{immediate:!1}),{visibleStudents:x,currentUser:s,userMapObj:n,standardizeScheduleAccess:h,getProviderViewStudents:p,getClassViewStudents:v,groupStudentsByPeriod:g,groupStudentsByGrade:w,groupStudentsByPlan:C,canAccessFilters:N,isClassViewDisabled:T,isAdminRole:k,formatStudentName:y,formatStudentInfo:E,formatDates:I,getStudentSchedule:P,filterByName:D,filterByCaseManager:A,filterByTeacher:_,setViewMode:b,currentFilters:d,showProviderView:!1,providerViewOptions:be(()=>[])}}function Qm(t,e){const r=su(t,e),n=be(()=>r.visibleStudents.value||[]);return be(()=>{const s={};return n.value.forEach(i=>{const a=t.getCaseManagerId(i);s[a]||(s[a]={caseManager:t.getUserName(a),students:[]}),s[a].students.push(i)}),s}),be(()=>{const s={};return n.value.forEach(i=>{var o;const a=((o=i.app)==null?void 0:o.providers)||{};Object.entries(a).forEach(([l,c])=>{c&&(s[c]||(s[c]={provider:t.getUserName(c),providerType:l,students:[]}),s[c].students.push(i))})}),s}),be(()=>{const s={instruction:[],assessment:[]};return n.value.forEach(i=>{var a,o,l,c;(o=(a=i.app)==null?void 0:a.accommodations)!=null&&o.instruction&&s.instruction.push(i),(c=(l=i.app)==null?void 0:l.accommodations)!=null&&c.assessment&&s.assessment.push(i)}),s}),{...r,visibleStudents:n,showProviderView:!1,providerViewOptions:be(()=>[])}}function rV(t,e){const r=su(t,e),n=be(()=>{var d;return(d=r.currentUser.value)==null?void 0:d.uid});n.value&&$U(n.value,"case_manager");const s=be(()=>{if(!n.value)return[];const d=e.filteredStudents.value||[];console.log(" CM visibleStudents: Starting with",d.length,"base students");const f=e.currentFilters.providerView;console.log(" CM visibleStudents: Provider view:",f);let h;return f==="service_provider"?h=d.filter(p=>{var E,I;const v=t.getSchedule(p),{isTeacher:g,isCoTeacher:x}=r.standardizeScheduleAccess(v,n.value),y=g||x;return y&&console.log(` SP mode: User teaches ${(I=(E=p.app)==null?void 0:E.studentData)==null?void 0:I.firstName} (teacher=${g}, coTeacher=${x})`),y}):f==="case_manager"?h=d.filter(p=>t.getCaseManagerId(p)===n.value):h=d.filter(p=>{var I,P;const v=t.getCaseManagerId(p)===n.value,g=t.getSchedule(p),{isTeacher:x,isCoTeacher:y}=r.standardizeScheduleAccess(g,n.value),E=x||y;return(E||v)&&console.log(` All mode: User has access to ${(P=(I=p.app)==null?void 0:I.studentData)==null?void 0:P.firstName}: CM=${v}, Teacher=${x}, CoTeacher=${y}`),v||E}),console.log(" CM visibleStudents: Final count:",h.length),console.log(" CM visibleStudents: Student names:",h.map(p=>{var v,g,x,y;return`${(g=(v=p.app)==null?void 0:v.studentData)==null?void 0:g.firstName} ${(y=(x=p.app)==null?void 0:x.studentData)==null?void 0:y.lastName}`}).slice(0,5),"..."),HU(f,h.length,h.map(p=>{var v,g,x,y;return`${(g=(v=p.app)==null?void 0:v.studentData)==null?void 0:g.firstName} ${(y=(x=p.app)==null?void 0:x.studentData)==null?void 0:y.lastName}`})),zU(),h}),i=be(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{}),a=be(()=>n.value?r.getProviderViewStudents(s.value,n.value,"case_manager"):[]),o=be(()=>n.value?r.getProviderViewStudents(s.value,n.value,"service_provider").filter(d=>t.getCaseManagerId(d)!==n.value):[]),l=be(()=>{const d={instruction:[],assessment:[],speech:[],ot:[],mh:[]};return s.value.forEach(f=>{var p,v,g,x,y;(v=(p=f.app)==null?void 0:p.accommodations)!=null&&v.instruction&&d.instruction.push(f),(x=(g=f.app)==null?void 0:g.accommodations)!=null&&x.assessment&&d.assessment.push(f);const h=((y=f.app)==null?void 0:y.providers)||{};h.speechId&&d.speech.push(f),h.otId&&d.ot.push(f),h.mhId&&d.mh.push(f)}),d}),c=be(()=>{const d=new Date,f=30*24*60*60*1e3,h={reviewDue:[],reevalDue:[],meetingScheduled:[]};return s.value.forEach(p=>{var y,E,I,P,D,A;const v=new Date((E=(y=p.app)==null?void 0:y.dates)==null?void 0:E.reviewDate),g=new Date((P=(I=p.app)==null?void 0:I.dates)==null?void 0:P.reevalDate),x=new Date((A=(D=p.app)==null?void 0:D.dates)==null?void 0:A.meetingDate);v&&v-d<f&&h.reviewDue.push(p),g&&g-d<f&&h.reevalDue.push(p),x&&x-d<f&&h.meetingScheduled.push(p)}),h});return{...r,visibleStudents:s,studentsByPeriod:i,managedStudents:a,serviceStudents:o,groupStudentsByService:l,groupStudentsByUpcomingDates:c,setViewMode:d=>{d==="class"&&(e.currentFilters.providerView="service_provider"),e.currentFilters.viewMode=d,e.applyFilters()},showProviderView:!0,providerViewOptions:be(()=>[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}])}}function nV(t,e){const r=su(t,e),n=be(()=>{var l;return(l=r.currentUser.value)==null?void 0:l.uid}),s=be(()=>{var l;return(l=r.currentUser.value)==null?void 0:l.role}),i=be(()=>{const l=s.value;return l==="sped_chair"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_all",label:"*"}]:l==="administrator_504_CM"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"},{value:"iep_504_all",label:"*"}]:[]}),a=be(()=>{if(!n.value)return[];const l=r.visibleStudents.value,c=e.currentFilters.providerView,u=s.value;switch(c){case"case_manager":return r.getProviderViewStudents(l,n.value,"case_manager");case"service_provider":return r.getProviderViewStudents(l,n.value,"service_provider");case"all":return l.filter(d=>{const f=t.getCaseManagerId(d)===n.value,h=t.getSchedule(d),p=h?Object.values(h).some(v=>{var g;return typeof v=="string"?v===n.value:v&&typeof v=="object"?v.teacherId===n.value||((g=v.coTeaching)==null?void 0:g.caseManagerId)===n.value:!1}):!1;return f||p});case"iep_all":return u==="sped_chair"?l.filter(d=>ct(d,"plan")==="IEP"):[];case"iep_504_all":return u==="administrator_504_CM"?l.filter(d=>{const f=ct(d,"plan");return f==="IEP"||f==="504"}):[];default:return console.warn(`Unknown provider view: ${c}`),[]}}),o=be(()=>n.value?r.groupStudentsByPeriod(a.value,n.value):{});return{...r,visibleStudents:a,studentsByPeriod:o,providerViewOptions:i,showProviderView:!0}}function sV(t,e){const r=su(t,e),n=be(()=>{var h;return(h=r.currentUser.value)==null?void 0:h.uid}),s=be(()=>n.value?e.filteredStudents.value.filter(v=>{const g=t.getSchedule(v);return g?Object.values(g).some(y=>{var E;return typeof y=="string"?y===n.value:y&&typeof y=="object"?y.teacherId===n.value||((E=y.coTeaching)==null?void 0:E.caseManagerId)===n.value:!1}):!1}):[]),i=be(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{}),a=be(()=>{const h={instruction:[],assessment:[]};return s.value.forEach(p=>{var v,g,x,y;(g=(v=p.app)==null?void 0:v.accommodations)!=null&&g.instruction&&h.instruction.push(p),(y=(x=p.app)==null?void 0:x.accommodations)!=null&&y.assessment&&h.assessment.push(p)}),h}),o=be(()=>{const h={};return s.value.forEach(p=>{var g;const v=((g=p.app)==null?void 0:g.providers)||{};Object.entries(v).forEach(([x,y])=>{y&&(h[y]||(h[y]={provider:t.getUserName(y),providerType:x,students:[]}),h[y].students.push(p))})}),h});return{...r,visibleStudents:s,studentsByPeriod:i,studentsByAccommodation:a,studentsByServiceProvider:o,canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!0,canViewDates:!1,canEditStudents:!1,showProviderView:!1,providerViewOptions:be(()=>[])}}function aV(t,e){const r=su(t,e),n=be(()=>{var a;return(a=r.currentUser.value)==null?void 0:a.uid}),s=be(()=>n.value?r.getProviderViewStudents(r.visibleStudents.value,n.value,"service_provider"):[]),i=be(()=>n.value?r.groupStudentsByPeriod(s.value,n.value):{});return{...r,visibleStudents:s,studentsByPeriod:i,showProviderView:!1,providerViewOptions:be(()=>[])}}function iV(t,e){const r=su(t,e),n=be(()=>{var h;return(h=r.currentUser.value)==null?void 0:h.uid}),s=be(()=>n.value?r.visibleStudents.value||[]:[]),i=be(()=>{if(!n.value)return[];const h=t.aideAssignment.value[n.value];if(!(h!=null&&h.directAssignment))return[];const p=Array.isArray(h.directAssignment)?h.directAssignment:[h.directAssignment];return s.value.filter(v=>p.includes(v.id))}),a=be(()=>{if(!n.value)return{};const h=t.aideAssignment.value[n.value];if(!(h!=null&&h.classAssignment))return{};const p={};return s.value.forEach(v=>{const{periods:g}=r.standardizeScheduleAccess(t.getSchedule(v),n.value);Object.entries(g).forEach(([x,y])=>{const E=h.classAssignment[x];if(!E)return;(Array.isArray(E)?E:[E]).includes(y.teacherId)&&(p[x]||(p[x]={teacher:y.teacherName,students:[]}),p[x].students.push(v))})}),p}),o=be(()=>{const h={instruction:[],assessment:[]};return s.value.forEach(p=>{var v,g,x,y;(g=(v=p.app)==null?void 0:v.accommodations)!=null&&g.instruction&&h.instruction.push(p),(y=(x=p.app)==null?void 0:x.accommodations)!=null&&y.assessment&&h.assessment.push(p)}),h});return{...r,visibleStudents:s,directAssignments:i,classAssignments:a,studentsByAccommodation:o,canViewAccommodations:!0,canViewBasicInfo:!0,canViewServiceProviders:!1,canViewDates:!1,canEditStudents:!1,showProviderView:!1,providerViewOptions:be(()=>[])}}function oV(t,e){const{currentUser:r}=t;gy();const n=be(()=>{var h;return((h=r.value)==null?void 0:h.role)||"guest"}),s=be(()=>{switch(n.value){case"admin":return Qm(t,e);case"case_manager":return rV(t,e);case"sped_chair":case"administrator_504_CM":return nV(t,e);case"teacher":return sV(t,e);case"service_provider":return aV(t,e);case"paraeducator":return iV(t,e);case"administrator":return Qm(t,e);default:return Qm(t,e)}}),i=be(()=>{var p;const h=(p=r.value)==null?void 0:p.role;return["admin","sped_chair"].includes(h)}),a=be(()=>{var p;const h=(p=r.value)==null?void 0:p.role;return["case_manager","administrator_504_CM"].includes(h)}),o=be(()=>{var p;const h=(p=r.value)==null?void 0:p.role;return["admin","administrator","administrator_504_CM","sped_chair"].includes(h)}),l=be(()=>{var p;const h=(p=r.value)==null?void 0:p.role;return["admin","administrator","administrator_504_CM"].includes(h)}),c=be(()=>{var p;const h=(p=r.value)==null?void 0:p.role;return["admin","administrator","sped_chair"].includes(h)}),u=be(()=>!0),d=be(()=>!0),f=be(()=>!0);return{...s.value,currentRole:n,canEditAllStudents:i,canEditOwnStudents:a,canViewAllStudents:o,canManageUsers:l,canManageAides:c,canAccessTesting:u,canAccessTestingPartial:d,hasAnyTestingAccess:f}}function lV(t,e,r=null){const{aideAssignment:n,getCaseManagerId:s,getSchedule:i,standardizeScheduleAccess:a,currentUser:o}=t,{filteredStudents:l,currentFilters:c,getCurrentFilters:u}=e,d=r||l,f=fe("list");Qt(()=>c.viewMode,y=>{f.value=y||"list"});const h=be(()=>d.value.filter(y=>{var E,I,P,D;return((I=(E=y.app)==null?void 0:E.flags)==null?void 0:I.flag2)||((D=(P=y.app)==null?void 0:P.flags)==null?void 0:D.separateSetting)||y.separateSetting||y.flag2||!1})),p=be(()=>{var D;const y={};if(f.value!=="class")return y;const E=(D=o.value)==null?void 0:D.uid;if(!E)return console.log(" studentsByClass: No current user ID"),y;console.log(" studentsByClass: Current user ID:",E),console.log(" studentsByClass: Processing",d.value.length,"students");const I=u(),P=I.paraeducator&&I.paraeducator!=="all";return d.value.forEach(A=>{var b,w;const _=i(A)||{};console.log(` studentsByClass full schedule for ${(w=(b=A.app)==null?void 0:b.studentData)==null?void 0:w.firstName}:`,_),Object.entries(_).forEach(([C,T])=>{var R,O,U;let k,N;if(typeof T=="string")k=T;else if(T&&typeof T=="object")k=T.teacherId,N=(R=T.coTeaching)==null?void 0:R.caseManagerId,T.coTeaching&&console.log(` studentsByClass coTeaching data for ${(U=(O=A.app)==null?void 0:O.studentData)==null?void 0:U.firstName} in period ${C}:`,T.coTeaching);else return;if(k===E||N===E)if(y[C]||(y[C]=[]),P){const M=n.value[I.paraeducator];M&&M.classAssignment&&M.classAssignment[C]&&(Array.isArray(M.classAssignment[C])?M.classAssignment[C]:[M.classAssignment[C]]).includes(k)&&y[C].push(A)}else y[C].push(A)})}),console.log(" studentsByClass: Final groups:",Object.keys(y).map(A=>`Period ${A}: ${y[A].length} students`)),GU(y),Object.keys(y).forEach(A=>{y[A].length===0&&delete y[A]}),Object.keys(y).sort((A,_)=>{const b=parseInt(A.replace(/\D/g,"")),w=parseInt(_.replace(/\D/g,""));return b-w}).reduce((A,_)=>(A[_]=y[_],A),{})}),v=be(()=>{const y=u();if(!(y.paraeducator&&y.paraeducator!=="all"))return[];const I=n.value[y.paraeducator];if(!I||!I.directAssignment)return[];const P=Array.isArray(I.directAssignment)?I.directAssignment:[I.directAssignment];return d.value.filter(D=>P.includes(D.id))}),g=be(()=>{const y={};return d.value.forEach(E=>{const I=s(E);I&&(y[I]||(y[I]=[]),y[I].push(E))}),y});return{currentViewMode:f,studentsByClass:p,directAssignmentStudents:v,studentsByCaseManager:g,testingViewStudents:h,setViewMode:y=>{f.value=y,c.viewMode=y}}}function cV(t){const{router:e,fetchData:r}=t,n=fe(null),s=fe(null),i=fe(!1),a=fe(!1),o=fe(!1),l=fe(null),c=I=>{n.value=I},u=I=>{s.value=I},d=I=>{l.value=I,o.value=!0},f=()=>{console.log("Teacher feedback form sent successfully")},h=()=>{a.value=!1,r()},p=()=>{console.log("Student saved"),r()},v=()=>{e.push("/admin")},g=()=>{e.push("/testing")},x=()=>{e.push("/aide-schedule")},y=async I=>{switch(I){case"add-student":a.value=!0;break;case"export":i.value=!0;break;case"print":window.print();break;case"admin":v();break;case"testing":g();break;case"aide-schedule":x();break;case"logout":await E();break}},E=async()=>{try{await Ei().logout(),e.push("/login")}catch(I){console.error("Logout failed:",I)}};return{editingStudentId:n,emailingStudentId:s,showExport:i,showAddStudent:a,showFeedbackDialog:o,feedbackStudentId:l,editStudent:c,emailStudent:u,handleTeacherFeedback:d,handleFormSent:f,handleStudentAdded:h,handleStudentSaved:p,navigateToAdmin:v,navigateToTesting:g,navigateToAideSchedule:x,handleNavAction:y,handleLogout:E}}const uV={class:"student-nav-menu"},dV=["title"],fV={class:"nav-content"},hV={class:"nav-section"},pV={class:"nav-buttons"},mV={key:0,class:"nav-section"},gV={class:"nav-buttons"},vV={key:1,class:"nav-section"},xV={class:"nav-buttons"},yV={key:2,class:"nav-section"},EV={class:"nav-buttons"},_V={class:"nav-section"},bV={class:"user-info"},SV={class:"user-details"},TV={key:0,class:"user-role"},AV={__name:"StudentNavMenu",props:{currentUser:{type:Object,default:null},isAdmin:{type:Boolean,default:!1}},emits:["action"],setup(t,{emit:e}){const r=e,{isDebugMenuVisible:n,canShowDebugMenu:s,toggleDebugMenu:i}=vy(),a=fe(!1);function o(){a.value=!a.value}function l(){a.value=!1}function c(u){r("action",u),l()}return(u,d)=>{var f,h,p,v;return V(),j("div",uV,[m("button",{onClick:o,class:ut(["hamburger-btn",{active:a.value}]),title:a.value?"Close Menu":"Open Menu"},d[8]||(d[8]=[m("span",{class:"hamburger-line"},null,-1),m("span",{class:"hamburger-line"},null,-1),m("span",{class:"hamburger-line"},null,-1)]),10,dV),a.value?(V(),j("div",{key:0,class:"nav-overlay",onClick:l})):Oe("",!0),m("div",{class:ut(["nav-panel",{open:a.value}])},[m("div",{class:"nav-header"},[d[9]||(d[9]=m("h3",null,"Student Management",-1)),m("button",{onClick:l,class:"close-btn"},"")]),m("div",fV,[m("div",hV,[d[13]||(d[13]=m("h4",null,"Actions",-1)),m("div",pV,[m("button",{onClick:d[0]||(d[0]=g=>c("add-student")),class:"nav-btn primary"},d[10]||(d[10]=[m("span",null,"",-1),Ve(" Add Student ")])),m("button",{onClick:d[1]||(d[1]=g=>c("export")),class:"nav-btn"},d[11]||(d[11]=[m("span",null,"",-1),Ve(" Export ")])),m("button",{onClick:d[2]||(d[2]=g=>c("print")),class:"nav-btn print-btn"},d[12]||(d[12]=[m("span",null,"",-1),Ve(" Print ")]))])]),t.isAdmin?(V(),j("div",mV,[d[16]||(d[16]=m("h4",null,"Admin",-1)),m("div",gV,[m("button",{onClick:d[3]||(d[3]=g=>c("admin")),class:"nav-btn"},d[14]||(d[14]=[m("span",null,"",-1),Ve(" Admin Panel ")])),m("button",{onClick:d[4]||(d[4]=g=>c("testing")),class:"nav-btn"},d[15]||(d[15]=[m("span",null,"",-1),Ve(" Testing ")]))])])):Oe("",!0),me(s)?(V(),j("div",vV,[d[18]||(d[18]=m("h4",null,"Debug",-1)),m("div",xV,[m("button",{onClick:d[5]||(d[5]=(...g)=>me(i)&&me(i)(...g)),class:"nav-btn secondary"},[d[17]||(d[17]=m("span",null,"",-1)),Ve(" "+ce(me(n)?"Hide":"Show")+" Debug Menu ",1)])])])):Oe("",!0),((f=t.currentUser)==null?void 0:f.role)==="paraeducator"?(V(),j("div",yV,[d[20]||(d[20]=m("h4",null,"Schedule",-1)),m("div",EV,[m("button",{onClick:d[6]||(d[6]=g=>c("aide-schedule")),class:"nav-btn"},d[19]||(d[19]=[m("span",null,"",-1),Ve(" My Schedule ")]))])])):Oe("",!0),m("div",_V,[d[22]||(d[22]=m("h4",null,"User",-1)),m("div",bV,[m("div",SV,[m("strong",null,ce(((h=t.currentUser)==null?void 0:h.name)||((p=t.currentUser)==null?void 0:p.email)||"User"),1),(v=t.currentUser)!=null&&v.role?(V(),j("span",TV,"("+ce(t.currentUser.role)+")",1)):Oe("",!0)]),m("button",{onClick:d[7]||(d[7]=g=>c("logout")),class:"nav-btn danger"},d[21]||(d[21]=[m("span",null,"",-1),Ve(" Logout ")]))])])])],2)])}}},wV=At(AV,[["__scopeId","data-v-53a7f24c"]]),IV={class:"docs-item"},CV=["href"],kV=["href"],DV={__name:"StudentDocsCell",props:{student:{type:Object,required:!0},getDocumentUrl:{type:Function,required:!0}},setup(t){return(e,r)=>(V(),j("td",null,[m("div",IV,[t.getDocumentUrl(t.student,"ataglancePdfUrl")?(V(),j("a",{key:0,href:t.getDocumentUrl(t.student,"ataglancePdfUrl"),target:"_blank"},"At-A-Glance",8,CV)):Oe("",!0),t.getDocumentUrl(t.student,"bipPdfUrl")?(V(),j("a",{key:1,href:t.getDocumentUrl(t.student,"bipPdfUrl"),target:"_blank"},"BIP",8,kV)):Oe("",!0),!t.getDocumentUrl(t.student,"ataglancePdfUrl")&&!t.getDocumentUrl(t.student,"bipPdfUrl")?(V(),j(Ne,{key:2},[Ve("")],64)):Oe("",!0)])]))}},PV={class:"action-buttons"},RV=["title"],FV={__name:"StudentActionsCell",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!1}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){function r(n,s=!1){if(!(n!=null&&n.seconds))return"";const i=new Date(n.seconds*1e3);return s?i.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}):i.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})+" at "+i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}return(n,s)=>{var i,a,o,l,c,u;return V(),j("td",null,[m("div",PV,[((i=t.currentUser)==null?void 0:i.role)!=="case_manager"||((o=(a=t.student.app)==null?void 0:a.studentData)==null?void 0:o.caseManagerId)===t.currentUser.uid?(V(),j("button",{key:0,class:"edit-btn",onClick:s[0]||(s[0]=d=>n.$emit("edit",t.student.id)),title:"Edit Student"},"")):Oe("",!0),m("button",{class:"email-btn",onClick:s[1]||(s[1]=d=>n.$emit("email",t.student.id)),title:"Email Student"},""),((l=t.currentUser)==null?void 0:l.role)==="case_manager"?(V(),j("button",{key:1,class:"teacher-feedback-btn",onClick:s[2]||(s[2]=d=>n.$emit("teacher-feedback",t.student.id)),title:"Send Teacher Feedback Form"},"")):Oe("",!0)]),(u=(c=t.student)==null?void 0:c.updatedAt)!=null&&u.seconds?(V(),j("div",{key:0,class:"updated-date",title:"Last Updated: "+r(t.student.updatedAt)},ce(r(t.student.updatedAt,!0)),9,RV)):Oe("",!0)])}}},OV=At(FV,[["__scopeId","data-v-a70028ac"]]),NV={key:0,class:"schedule-list"},MV={class:"period-assignment"},BV={class:"primary-line"},LV={class:"period-label"},UV={class:"primary-teacher"},VV={key:0,class:"coteaching-info"},$V=["title"],jV={key:1,class:"no-schedule"},HV={__name:"StudentScheduleCell",props:{student:{type:Object,required:!0},getSchedule:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){const e=r=>r&&typeof r=="object"&&r.coTeaching&&r.teacherId;return(r,n)=>(V(),j("td",null,[t.getSchedule(t.student)?(V(),j("div",NV,[m("ul",null,[(V(!0),j(Ne,null,He(t.getSchedule(t.student),(s,i)=>(V(),j("li",{key:i,class:"schedule-period"},[m("div",MV,[m("div",BV,[m("span",LV,ce(i)+":",1),m("span",UV,ce(t.getUserInitialLastName(s.teacherId||s)),1)]),e(s)?(V(),j("div",VV,[m("span",{class:"coteaching-indicator",title:`Co-teach ${s.coTeaching.subject}`},ce(t.getUserInitialLastName(s.coTeaching.caseManagerId))+" (C"+ce(s.coTeaching.subject.charAt(0))+") ",9,$V)])):Oe("",!0)])]))),128))])])):(V(),j("div",jV,""))]))}},GV={class:"services-cell"},zV={key:0,class:"service-section"},WV={class:"service-list"},KV={key:1,class:"services-section"},qV={class:"service-list"},XV={class:"service-abbr"},YV={class:"service-provider"},QV={key:2,class:"empty-services"},JV={__name:"StudentServicesCell",props:{student:{type:Object,required:!0},appSettings:{type:Object,required:!1},getClassServices:{type:Function,required:!0},getOtherServices:{type:Function,required:!0},hasServiceProviders:{type:Function,required:!0},getServiceProviderId:{type:Function,required:!0},getProviderFieldName:{type:Function,required:!0},getUserInitialLastName:{type:Function,required:!0}},setup(t){const e=t,r=["SP","MH","OT","PT","SC","TR"],n={SP:"speechId",MH:"mhId",OT:"otId",PT:"ptId",SC:"scId",TR:"trId"},s=be(()=>{var f,h;const d=((h=(f=e.appSettings)==null?void 0:f.value)==null?void 0:h.serviceProviders)||[];return d.length>0?d:r});function i(d){var f,h,p;return(p=(h=(f=e.appSettings)==null?void 0:f.value)==null?void 0:h.serviceProviders)!=null&&p.length?e.getProviderFieldName(d):n[d]||null}function a(d){const f=i(d);return f&&e.getServiceProviderId(e.student,f)}function o(d){const f=i(d);return f?e.getUserInitialLastName(e.getServiceProviderId(e.student,f)):d}const l=be(()=>{const d=e.getClassServices(e.student);return Array.isArray(d)&&d.length>0}),c=be(()=>{const d=e.getOtherServices(e.student),f=Array.isArray(d)&&d.length>0,h=s.value.some(p=>a(p));return f||h}),u=be(()=>l.value||c.value);return(d,f)=>(V(),j("td",GV,[l.value?(V(),j("div",zV,[f[0]||(f[0]=m("div",{class:"section-header"},"Class Services",-1)),m("div",WV,[(V(!0),j(Ne,null,He(t.getClassServices(t.student),h=>(V(),j("div",{key:h,class:"service-item"},ce(h),1))),128))])])):Oe("",!0),c.value?(V(),j("div",KV,[f[1]||(f[1]=m("div",{class:"section-title"},"RELATED SERVICES",-1)),m("div",qV,[(V(!0),j(Ne,null,He(s.value.filter(h=>a(h)),h=>(V(),j("div",{key:h,class:"service-item"},[m("span",XV,ce(h)+":",1),m("span",YV,ce(o(h)),1)]))),128))])])):Oe("",!0),u.value?Oe("",!0):(V(),j("div",QV,""))]))}},ZV=At(JV,[["__scopeId","data-v-4bb96061"]]),e$={key:0,class:"flag-overlay flag-preferential-seating"},t$={key:1,class:"bullet-list"},r$=["innerHTML"],n$={key:2},s$={__name:"StudentInstructionAccomCell",props:{student:{type:Object,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(V(),j("td",{class:ut(["instruction-cell",{"with-flag":t.getFlagValue(t.student,"flag1")}])},[t.getFlagValue(t.student,"flag1")?(V(),j("div",e$,"Preferential Seating")):Oe("",!0),t.student&&t.formatListFromText(me(ct)(t.student,"instruction"))!=="<div></div>"?(V(),j("div",t$,[m("div",{innerHTML:t.formatListFromText(me(ct)(t.student,"instruction"))},null,8,r$)])):(V(),j("div",n$,""))],2))}},a$={key:0,class:"flag-overlay flag-separate-setting"},i$={key:1,class:"bullet-list"},o$=["innerHTML"],l$={key:2},c$={__name:"StudentAssessmentAccomCell",props:{student:{type:Object,required:!0},getFlagValue:{type:Function,required:!0},formatListFromText:{type:Function,required:!0}},setup(t){return(e,r)=>(V(),j("td",{class:ut(["instruction-cell",{"with-flag":t.getFlagValue(t.student,"flag2")}])},[t.getFlagValue(t.student,"flag2")?(V(),j("div",a$,"Separate setting")):Oe("",!0),t.student&&t.formatListFromText(me(ct)(t.student,"assessment"))!=="<div></div>"?(V(),j("div",i$,[m("div",{innerHTML:t.formatListFromText(me(ct)(t.student,"assessment"))},null,8,o$)])):(V(),j("div",l$,""))],2))}},u$={class:"student-name"},d$={class:"std-info-subheading"},f$={key:0,class:"schedule-list"},h$={class:"service-pill"},p$={key:1},m$={key:0,class:"flag-overlay flag-separate-setting"},g$={key:1,class:"bullet-list"},v$=["innerHTML"],x$={key:2},y$={class:"student-name"},E$=["title"],_$={class:"std-info-subheading"},b$={class:"student-dates print"},S$={key:0,class:"direct-assignment-badge"},T$={__name:"StudentTable",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})},currentUser:{type:Object,default:null},testingView:{type:Boolean,default:!1},aideSchedule:{type:Object,default:()=>({})}},emits:["edit","email","teacher-feedback"],setup(t,{emit:e}){const r=t,{appSettings:n,loadAppSettings:s,loading:i,error:a}=ma();tr(async()=>{try{console.log("StudentTable: Loading app settings..."),await s(),console.log("StudentTable: App settings loaded successfully")}catch(_){console.error("StudentTable: Error loading app settings:",_)}});function o(_){const b=r.userMap[_];return b&&(b.name||b.email)||_}function l(_){return _?new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function c(_){if(!_)return"";const b=new Date,w=new Date(_),C=Math.ceil((w-b)/(1e3*60*60*24));return C<=0?"flag-critical":C<=7?"flag-high":C<=14?"flag-medium":C<=21?"flag-mid":C<=28?"flag-low":C<=35?"flag-prep":C<=60?"flag-prep-reeval":""}function u(_){return c(ct(_,"meetingDate"))}function d(_){return c(ct(_,"reviewDate"))}function f(_){return c(ct(_,"reevalDate"))}function h(_){const b=r.userMap[_];if(!b)return _;if(b.name){const w=b.name.trim().split(" ");return w.length===1?w[0]:`${w[0][0]}. ${w.slice(1).join(" ")}`}return b.email?b.email[0].toUpperCase():_}function p(_){var b,w;return((w=(b=_.app)==null?void 0:b.studentData)==null?void 0:w.caseManagerId)||_.caseManagerId||_.casemanager_id}function v(_,b){var w,C;return((C=(w=_.app)==null?void 0:w.flags)==null?void 0:C[b])||_[b]||!1}function g(_,b){var w,C;return((C=(w=_.app)==null?void 0:w.documents)==null?void 0:C[b])||_[`${b}Url`]||_[`${b}_url`]||null}function x(_){var b,w,C,T,k;if(_.schedule)return _.schedule;if((w=(b=_.app)==null?void 0:b.schedule)!=null&&w.periods)return _.app.schedule.periods;if((T=(C=_.aeries)==null?void 0:C.schedule)!=null&&T.periods)return _.aeries.schedule.periods;if((k=_.aeries)!=null&&k.schedule){const N={};return Object.entries(_.aeries.schedule).forEach(([B,R])=>{if(R&&R.teacherId){let O=B;if(n.value&&n.value.periodLabels){const M=parseInt(B.replace("period",""))-1;M>=0&&M<n.value.periodLabels.length&&(O=n.value.periodLabels[M])}let U=R.teacherId;if(r.userMap){let M=Object.values(r.userMap).find(q=>q.aeriesId===R.teacherId||q.aeriesId===parseInt(R.teacherId)||q.id===R.teacherId);if(M||(M=Object.values(r.userMap).find(q=>{var H,L,z,K;return((H=q.aeriesId)==null?void 0:H.toString())===((L=R.teacherId)==null?void 0:L.toString())||((z=q.id)==null?void 0:z.toString())===((K=R.teacherId)==null?void 0:K.toString())})),M&&M.name){const q=M.name.split(" ");if(q.length>=2){const H=q[0],L=q[q.length-1];U=`${H.charAt(0)}. ${L}`}else U=M.name}else console.warn(`Teacher not found for ID: ${R.teacherId}`)}N[O]=U}}),Object.keys(N).length>0?N:null}return null}function y(_){var w,C;const b=((C=(w=_.app)==null?void 0:w.schedule)==null?void 0:C.classServices)||_.services||[];if(i.value)return Array.isArray(b)?b.filter(T=>typeof T=="string"&&T.includes(":")):[];if(a.value)return Array.isArray(b)?b.filter(T=>typeof T=="string"&&T.includes(":")):[];if(n.value&&n.value.classServices){const T=n.value.classServices.filter(k=>k.enabledSubcategories&&k.enabledSubcategories.length>0).map(k=>k.name);return Array.isArray(b)?b.filter(k=>{if(typeof k!="string"||!k.includes(":"))return!1;const N=k.split(":")[0];return T.includes(N)}):[]}return Array.isArray(b)?b.filter(T=>typeof T=="string"&&T.includes(":")):[]}function E(_){var w,C;const b=((C=(w=_.app)==null?void 0:w.schedule)==null?void 0:C.otherServices)||_.other_services||[];return Array.isArray(b)?b.filter(T=>!!T):[]}function I(_){var T;const b=((T=_.app)==null?void 0:T.providers)||{},w=Object.values(b).some(Boolean);if(i.value||a.value){const k=_.speechId||_.speech_id||_.mhId||_.mh_id||_.otId||_.ot_id||_.ptId||_.pt_id||_.scId||_.sc_id||_.trId||_.tr_id||_.audId||_.aud_id||_.viId||_.vi_id||_.atId||_.at_id||_.dhhId||_.dhh_id||_.omId||_.om_id||_.bisId||_.bis_id||_.hnId||_.hn_id||_.swId||_.sw_id;return w||k}let C=!1;if(n.value&&n.value.serviceProviders){const k=n.value.serviceProviders,N={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"};C=k.some(B=>{const R=N[B];return _[R]||_[R.replace("Id","_id")]})}else C=_.speechId||_.speech_id||_.mhId||_.mh_id||_.otId||_.ot_id||_.ptId||_.pt_id||_.scId||_.sc_id||_.trId||_.tr_id||_.audId||_.aud_id||_.viId||_.vi_id||_.atId||_.at_id||_.dhhId||_.dhh_id||_.omId||_.om_id||_.bisId||_.bis_id||_.hnId||_.hn_id||_.swId||_.sw_id;return w||C}function P(_,b){var C,T;return((T=(C=_.app)==null?void 0:C.providers)==null?void 0:T[b])||_[b]||_[b.replace("Id","_id")]||null}function D(_){return{SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"}[_]||`${_.toLowerCase()}Id`}function A(_){if(!r.currentUser||r.currentUser.role!=="paraeducator")return!1;const b=r.currentUser.uid;let w=r.aideSchedule[b];if(!w){const C=Object.entries(r.userMap).find(([T,k])=>k.uid===b||k.email===r.currentUser.email);if(C){const[T]=C;w=r.aideSchedule[T]}}return(w==null?void 0:w.directAssignment)===_}return Qt(()=>r.student,_=>{var b,w,C,T,k,N,B;_&&Object.keys(_).length>0&&(form.schedule=((w=(b=_.app)==null?void 0:b.schedule)==null?void 0:w.periods)||_.schedule||((T=(C=_.aeries)==null?void 0:C.schedule)==null?void 0:T.periods)||{},console.log("StudentForm DEBUG - form.schedule:",form.schedule),console.log("StudentForm DEBUG - aeries.schedule:",(k=r.student.aeries)==null?void 0:k.schedule),console.log("StudentForm DEBUG - app.schedule.periods:",(B=(N=r.student.app)==null?void 0:N.schedule)==null?void 0:B.periods))},{immediate:!0,deep:!0}),(_,b)=>(V(),j("table",{class:ut(["students-table",{"testing-view":t.testingView}])},[m("thead",null,[m("tr",null,[t.testingView?(V(),j(Ne,{key:0},[b[0]||(b[0]=m("th",{class:"print"},"Student Info",-1)),b[1]||(b[1]=m("th",{class:"print"},"Schedule",-1)),b[2]||(b[2]=m("th",{class:"print"},"Assessment Accom.",-1))],64)):(V(),j(Ne,{key:1},[b[3]||(b[3]=m("th",{class:"print"},"Student Info",-1)),b[4]||(b[4]=m("th",{class:"print"},"Services",-1)),b[5]||(b[5]=m("th",{class:"print"},"Schedule",-1)),b[6]||(b[6]=m("th",{class:"print"},"Instruction Accom.",-1)),b[7]||(b[7]=m("th",{class:"print"},"Assessment Accom.",-1)),b[8]||(b[8]=m("th",{class:"print"},"Docs",-1)),b[9]||(b[9]=m("th",{class:"print"},"Actions",-1))],64))])]),m("tbody",null,[(V(!0),j(Ne,null,He(t.students,w=>{var C;return V(),j("tr",{key:w.id},[t.testingView?(V(),j(Ne,{key:0},[m("td",null,[m("div",u$,[m("strong",null,ce(me(ct)(w,"firstName"))+" "+ce(me(ct)(w,"lastName")),1)]),m("div",d$,[m("div",null,"Grd: "+ce(me(ct)(w,"grade"))+" | Prg: "+ce(me(ct)(w,"plan")),1),m("div",null,"CM: "+ce(o(p(w))),1)])]),m("td",null,[x(w)?(V(),j("div",f$,[m("ul",null,[(V(!0),j(Ne,null,He(x(w),(T,k)=>(V(),j("li",{key:k},[m("span",h$,ce(k)+":",1),Ve(" "+ce(h(T)),1)]))),128))])])):x(w)?Oe("",!0):(V(),j("div",p$,""))]),m("td",{class:ut(["instruction-cell",{"with-flag":v(w,"flag2")}])},[v(w,"flag2")?(V(),j("div",m$,"Separate setting")):Oe("",!0),me(ct)(w,"assessment")?(V(),j("div",g$,[m("div",{innerHTML:me(Ym)(me(ct)(w,"assessment"))},null,8,v$)])):(V(),j("div",x$,""))],2)],64)):(V(),j(Ne,{key:1},[m("td",null,[m("div",y$,[m("strong",null,ce(me(ct)(w,"firstName"))+" "+ce(me(ct)(w,"lastName")),1),m("span",{class:"data-source",title:`Data source: ${me(Cu)(w,"firstName")}`},ce(me(Cu)(w,"firstName")==="Override"?"":me(Cu)(w,"firstName")==="App"?"":me(Cu)(w,"firstName")==="Aeries"?"":me(Cu)(w,"firstName")==="SEIS"?"":""),9,E$)]),m("div",_$,[m("div",null,"Grd: "+ce(me(ct)(w,"grade"))+" | Prg: "+ce(me(ct)(w,"plan")),1),m("div",null,"CM: "+ce(o(p(w))),1)]),m("div",b$,[m("span",{class:ut(["badge badge-review plan-review",d(w)])},"PR: "+ce(l(me(ct)(w,"reviewDate"))),3),m("span",{class:ut(["badge badge-reeval reeval-due",f(w)])},"RE: "+ce(l(me(ct)(w,"reevalDate"))),3),m("span",{class:ut(["badge badge-meeting meeting-date",[u(w),me(ct)(w,"meetingDate")?"date-set":""]])},"  "+ce(l(me(ct)(w,"meetingDate"))||"Not set"),3)]),((C=t.currentUser)==null?void 0:C.role)==="paraeducator"&&A(w.id)?(V(),j("div",S$,b[10]||(b[10]=[m("span",{class:"badge badge-direct"},"Direct Assignment",-1)]))):Oe("",!0)]),at(ZV,{student:w,"app-settings":me(n),"get-class-services":y,"get-other-services":E,"has-service-providers":I,"get-service-provider-id":P,"get-provider-field-name":D,"get-user-initial-last-name":h},null,8,["student","app-settings"]),at(HV,{student:w,"get-schedule":x,"get-user-initial-last-name":h},null,8,["student"]),at(s$,{student:w,"get-flag-value":v,"format-list-from-text":me(Ym)},null,8,["student","format-list-from-text"]),at(c$,{student:w,"get-flag-value":v,"format-list-from-text":me(Ym)},null,8,["student","format-list-from-text"]),at(DV,{student:w,"get-document-url":g},null,8,["student"]),at(OV,{student:w,"current-user":t.currentUser,onEdit:T=>_.$emit("edit",w.id),onEmail:T=>_.$emit("email",w.id),onTeacherFeedback:T=>_.$emit("teacher-feedback",w.id)},null,8,["student","current-user","onEdit","onEmail","onTeacherFeedback"])],64))])}),128))])],2))}},v0=At(T$,[["__scopeId","data-v-64790f63"]]);function A$(t,e){const{appSettings:r,loadAppSettings:n,loading:s,error:i}=ma(),a=fe(!1);tr(async()=>{try{console.log("useStudentForm: Starting to load app settings..."),await n(),console.log("useStudentForm: App settings loaded successfully:",r.value)}catch(T){console.error("useStudentForm: Error loading app settings:",T)}});const o=be(()=>{var k;const T=((k=r.value)==null?void 0:k.numPeriods)||7;return Array.from({length:T},(N,B)=>B+1)}),l=be(()=>{var T;return(T=r.value)!=null&&T.grades&&r.value.grades.length>0?(console.log("useStudentForm: Using app settings grades:",r.value.grades),r.value.grades):(console.log("useStudentForm: Using fallback grades: [7, 8]"),["7","8"])}),c=be(()=>{var T;if((T=r.value)!=null&&T.classServices&&r.value.classServices.length>0){const k=r.value.classServices.filter(N=>N.enabledSubcategories&&N.enabledSubcategories.length>0);return console.log("useStudentForm: Available class services:",k.length,"services"),k}return console.log("useStudentForm: No class services available"),[]}),u=be(()=>{var T;return(T=r.value)!=null&&T.serviceProviders&&r.value.serviceProviders.length>0?(console.log("useStudentForm: Using app settings service providers:",r.value.serviceProviders.length,"providers"),r.value.serviceProviders):(console.log("useStudentForm: No service providers configured in app settings"),[])}),d=be(()=>{var T;return(T=r.value)!=null&&T.customServiceProviders?r.value.customServiceProviders:[]}),f=be(()=>{let T=t.users.userRoles?t.users.userRoles:{teachers:t.users.teachers||[],caseManagers:t.users.caseManagers||[],speech:t.users.speech||[],ot:t.users.ot||[],mh:t.users.mh||[]};return T.teachers&&(T={...T,teachers:T.teachers.map(k=>({...k,id:String(k.id)}))}),T}),h=T=>{var k,N,B,R,O,U,M,q,H,L,z,K,te,ge,ie,he,Z,Q,xe,X,W,Y,ee,ve,re,se,le,Te,we,Se,ze,Ie,$e,Be,We,Ke,Ee,ye,_e,Re,Ge,st,gt,yt;return{ssid:T.id||"",firstName:ct(T,"firstName")||"",lastName:ct(T,"lastName")||"",grade:ct(T,"grade")||"7",plan:ct(T,"plan")||"IEP",reviewDate:ct(T,"reviewDate")||"",reevalDate:ct(T,"reevalDate")||"",meetingDate:ct(T,"meetingDate")||"",caseManagerId:((N=(k=T.app)==null?void 0:k.studentData)==null?void 0:N.caseManagerId)||T.caseManagerId||T.casemanager_id||"",schedule:((R=(B=T.app)==null?void 0:B.schedule)==null?void 0:R.periods)||((U=(O=T.aeries)==null?void 0:O.schedule)==null?void 0:U.periods)||T.schedule||{},services:((q=(M=T.app)==null?void 0:M.schedule)==null?void 0:q.classServices)||T.services||[],speechId:((L=(H=T.app)==null?void 0:H.providers)==null?void 0:L.speechId)||T.speechId||T.speech_id||"",otId:((K=(z=T.app)==null?void 0:z.providers)==null?void 0:K.otId)||T.otId||T.ot_id||"",mhId:((ge=(te=T.app)==null?void 0:te.providers)==null?void 0:ge.mhId)||T.mhId||T.mh_id||"",ptId:((he=(ie=T.app)==null?void 0:ie.providers)==null?void 0:he.ptId)||T.ptId||T.pt_id||"",scId:((Q=(Z=T.app)==null?void 0:Z.providers)==null?void 0:Q.scId)||T.scId||T.sc_id||"",trId:((X=(xe=T.app)==null?void 0:xe.providers)==null?void 0:X.trId)||T.trId||T.tr_id||"",audId:((Y=(W=T.app)==null?void 0:W.providers)==null?void 0:Y.audId)||T.audId||T.aud_id||"",viId:((ve=(ee=T.app)==null?void 0:ee.providers)==null?void 0:ve.viId)||T.viId||T.vi_id||"",atId:((se=(re=T.app)==null?void 0:re.providers)==null?void 0:se.atId)||T.atId||T.at_id||"",dhhId:((Te=(le=T.app)==null?void 0:le.providers)==null?void 0:Te.dhhId)||T.dhhId||T.dhh_id||"",omId:((Se=(we=T.app)==null?void 0:we.providers)==null?void 0:Se.omId)||T.omId||T.om_id||"",bisId:((Ie=(ze=T.app)==null?void 0:ze.providers)==null?void 0:Ie.bisId)||T.bisId||T.bis_id||"",hnId:((Be=($e=T.app)==null?void 0:$e.providers)==null?void 0:Be.hnId)||T.hnId||T.hn_id||"",swId:((Ke=(We=T.app)==null?void 0:We.providers)==null?void 0:Ke.swId)||T.swId||T.sw_id||"",instruction:ct(T,"instruction")||"",assessment:ct(T,"assessment")||"",flag1:((ye=(Ee=T.app)==null?void 0:Ee.flags)==null?void 0:ye.flag1)||T.flag1||!1,flag2:((Re=(_e=T.app)==null?void 0:_e.flags)==null?void 0:Re.flag2)||T.flag2||!1,ataglancePdfUrl:((st=(Ge=T.app)==null?void 0:Ge.documents)==null?void 0:st.ataglancePdfUrl)||T.ataglancePdfUrl||T.ataglance_pdf_url||"",bipPdfUrl:((yt=(gt=T.app)==null?void 0:gt.documents)==null?void 0:yt.bipPdfUrl)||T.bipPdfUrl||T.bip_pdf_url||"",bipFile:null,ataglanceFile:null,removeBipFile:!1,removeAtaglanceFile:!1}},p=Ws(h(t.student||{})),v=T=>{const k=[];return T&&typeof T=="object"&&Object.entries(T).forEach(([N,B])=>{if(B&&typeof B=="object"&&B.coTeaching){const R=B.coTeaching.subject;R&&k.push(`Co-teach: ${R}`)}}),k},g=()=>{const T=v(p.schedule),k=p.services.filter(N=>!N.startsWith("Co-teach:"));p.services=[...k,...T]};Qt(()=>p.schedule,()=>{g()},{deep:!0}),Qt(()=>{var T;return(T=t.student)==null?void 0:T.id},(T,k)=>{var N,B,R,O,U,M,q;if(T&&T!==k){console.log(" useStudentForm DEBUG - Student ID changed, updating form:",T),console.log(" useStudentForm DEBUG - newStudent.app?.schedule?.periods:",JSON.stringify((R=(B=(N=t.student)==null?void 0:N.app)==null?void 0:B.schedule)==null?void 0:R.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.aeries?.schedule?.periods:",JSON.stringify((M=(U=(O=t.student)==null?void 0:O.aeries)==null?void 0:U.schedule)==null?void 0:M.periods,null,2)),console.log(" useStudentForm DEBUG - newStudent.schedule:",JSON.stringify((q=t.student)==null?void 0:q.schedule,null,2));const H=h(t.student);Object.assign(p,H),g(),console.log(" useStudentForm DEBUG - Processed form.schedule:",p.schedule)}},{immediate:!0}),Qt(()=>r.value,T=>{console.log("useStudentForm: App settings watcher triggered:",T),T!=null&&T.grades&&T.grades.length>0&&(T.grades.includes(p.grade)||(p.grade=T.grades[0]||"7"))},{immediate:!0,deep:!0});const x=(T,k)=>{const N=T.target.files[0]||null;if(N){const B=Df(N,{allowedTypes:["pdf"],maxSize:10485760,fieldName:k==="bipFile"?"BIP Document":"At-A-Glance Document"});if(!B.isValid){alert(B.error),T.target.value="";return}const R=pn(N.name);if(!R.isSafe){alert(`File name contains potentially dangerous content: ${R.threats.join(", ")}`),T.target.value="";return}}p[k]=N},y=T=>{T.preventDefault(),T.stopPropagation(),p.removeBipFile=!0,p.bipFile=null},E=T=>{T.preventDefault(),T.stopPropagation(),p.removeAtaglanceFile=!0,p.ataglanceFile=null},I=async(T,k)=>{if(!T)return null;const N=n1(Hh,k),B=await I9(N,T);return await C9(B.ref)},P=async T=>{if(T)try{const N=new URL(T).pathname.split("/"),B=N.slice(N.indexOf("o")+1).join("/"),R=decodeURIComponent(B),O=n1(Hh,R);await k9(O),console.log("File deleted successfully:",R)}catch(k){throw console.error("Error deleting file:",k),k}},D={SLP:"speechId",OT:"otId",MH:"mhId",PT:"ptId",SC:"scId",TR:"trId",AUD:"audId",VI:"viId",AT:"atId",DHH:"dhhId","O&M":"omId",BIS:"bisId",HN:"hnId",SW:"swId"},A=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],_=T=>{var N;if((N=r.value)!=null&&N.serviceProviders&&Array.isArray(r.value.serviceProviders)){const B=(r.value.serviceProvidersDetails||A).find(R=>R.abbreviation===T);if(B)return B.name+" ("+T+")"}const k=A.find(B=>B.abbreviation===T);return k?k.name+" ("+T+")":T},b=T=>{const N={SLP:"speech",OT:"ot",MH:"mh",PT:"pt",SC:"sc",TR:"tr",AUD:"aud",VI:"vi",AT:"at",DHH:"dhh","O&M":"om",BIS:"bis",HN:"hn",SW:"sw"}[T]||T.toLowerCase();return f.value[N]||[]},w=()=>{const T=mk(p),k=pk(T,{isNew:t.mode==="new"});if(!k.isValid)return alert(`Please fix the following errors:

${k.errors.join(`
`)}`),!1;const N=["firstName","lastName","instruction","assessment"];for(const B of N)if(p[B]){const R=pn(p[B]);if(!R.isSafe)return alert(`Security threat detected in ${B}: ${R.threats.join(", ")}`),!1}return Object.assign(p,T),!0};return{form:p,isSaving:a,appSettings:r,appSettingsLoading:s,appSettingsError:i,periods:o,gradeOptions:l,availableClassServices:c,serviceProviders:u,customServiceProviders:d,userRoles:f,onFileChange:x,removeBipFile:y,removeAtaglanceFile:E,providerFieldMap:D,getProviderLabel:_,getProviderUsers:b,handleSubmit:async()=>{try{if(console.log("Form submitted:",p),a.value=!0,!w()){a.value=!1;return}const T=p.services.filter(U=>U&&U.includes(":")),k={};console.log(" FORM SCHEDULE DEBUG - Complete form.schedule:",JSON.stringify(p.schedule,null,2)),console.log(" FORM SCHEDULE DEBUG - periods.value:",o.value),o.value.forEach(U=>{if(console.log(` FORM SCHEDULE DEBUG - Period ${U} exists:`,!!p.schedule[U],"Value:",p.schedule[U]),p.schedule[U]){const M=p.schedule[U];console.log(` SCHEDULE DEBUG - Period ${U}:`,{type:typeof M,data:M,hasCoTeaching:!!(M&&M.coTeaching),hasCaseManagerId:!!(M&&M.coTeaching&&M.coTeaching.caseManagerId)}),typeof M=="string"?k[U]=M:typeof M=="object"&&M!==null&&(M.coTeaching&&M.coTeaching.caseManagerId?(console.log(` SCHEDULE DEBUG - Period ${U} has co-teaching, preserving structure`),k[U]={teacherId:M.teacherId,coTeaching:{caseManagerId:M.coTeaching.caseManagerId,subject:M.coTeaching.subject||""}}):(console.log(` SCHEDULE DEBUG - Period ${U} converting to simple format`),k[U]=M.teacherId||String(M)||M))}}),console.log(" Schedule Composition Debug:"),console.log("Form schedule before:",JSON.stringify(p.schedule,null,2)),console.log("Composed schedule after:",JSON.stringify(k,null,2)),console.log("Composed data:",{classServices:T,schedule:k});let N=p.bipPdfUrl||null,B=p.ataglancePdfUrl||null;if(p.removeBipFile)console.log("Removing BIP file..."),N&&(await P(N),N=null);else if(p.bipFile){console.log("Uploading BIP file...");const U=t.mode==="edit"&&t.student.id?t.student.id:"temp";N=await I(p.bipFile,`students/${U}/bip.pdf`),console.log("BIP uploaded:",N)}if(p.removeAtaglanceFile)console.log("Removing At-A-Glance file..."),B&&(await P(B),B=null);else if(p.ataglanceFile){console.log("Uploading At-A-Glance file...");const U=t.mode==="edit"&&t.student.id?t.student.id:"temp";B=await I(p.ataglanceFile,`students/${U}/ataglance.pdf`),console.log("At-A-Glance uploaded:",B)}const R={studentData:{firstName:p.firstName,lastName:p.lastName,grade:p.grade,plan:p.plan,caseManagerId:p.caseManagerId},dates:{reviewDate:p.reviewDate,reevalDate:p.reevalDate,meetingDate:p.meetingDate},schedule:{periods:k,classServices:T},providers:{speechId:p.speechId,otId:p.otId,mhId:p.mhId,ptId:p.ptId,scId:p.scId,trId:p.trId,audId:p.audId,viId:p.viId,atId:p.atId,dhhId:p.dhhId,omId:p.omId,bisId:p.bisId,hnId:p.hnId,swId:p.swId},accommodations:{instruction:p.instruction,assessment:p.assessment},flags:{flag1:p.flag1,flag2:p.flag2},documents:{ataglancePdfUrl:B,bipPdfUrl:N}};console.log("Saving payload:",R);const O={app:R,updatedAt:fl()};if(console.log("Saving payload:",O),t.mode==="edit"&&t.student.id)console.log("Updating existing student:",t.student.id),await br(xt(ot,"students",t.student.id),O,{merge:!0}),console.log("Student updated successfully");else{if(console.log("Adding new student"),!p.ssid||p.ssid.trim()===""){alert("SSID is required for new students");return}const U=p.ssid.trim();O.app.studentData.ssid=U;const M=xt(Ht(ot,"students"));O.createdAt=fl(),await br(M,O),O.id=M.id,console.log("Student added successfully with ID:",M.id,"SSID:",U)}e("saved",O),e("close")}catch(T){console.error("Error saving student:",T),alert("Error saving student. Please try again.")}finally{a.value=!1}},validateForm:w}}const w$={class:"form-col"},I$={class:"inner-grid-3"},C$={key:0,class:"ssid-field"},k$=["value"],D$=["value"],P$={__name:"StudentBasicInfo",props:{form:{type:Object,required:!0},mode:{type:String,default:"new"},gradeOptions:{type:Array,required:!0},userRoles:{type:Object,required:!0}},setup(t){return(e,r)=>(V(),j("fieldset",w$,[r[21]||(r[21]=m("legend",null,"Student Info",-1)),m("div",I$,[t.mode==="new"?(V(),j("label",C$,[r[9]||(r[9]=m("span",{class:"field-label"},"SSID (State Student ID) *",-1)),je(m("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.ssid=n),type:"text",required:"",placeholder:"Enter student SSID",class:"ssid-input"},null,512),[[Ct,t.form.ssid]]),r[10]||(r[10]=m("div",{class:"field-help"},[m("strong",null,"Required:"),Ve(" This can be found in your Student Information System (SIS) such as Aeries, or in SEIS. The SSID is used to link student data across different systems. ")],-1))])):Oe("",!0),m("label",null,[r[11]||(r[11]=Ve(" First Name: ")),je(m("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.firstName=n),type:"text",required:""},null,512),[[Ct,t.form.firstName]])]),m("label",null,[r[12]||(r[12]=Ve(" Last Name: ")),je(m("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.form.lastName=n),type:"text",required:""},null,512),[[Ct,t.form.lastName]])]),m("label",null,[r[13]||(r[13]=Ve(" Grade: ")),je(m("select",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.form.grade=n)},[(V(!0),j(Ne,null,He(t.gradeOptions,n=>(V(),j("option",{key:n,value:n},ce(n),9,k$))),128))],512),[[vr,t.form.grade]])]),m("label",null,[r[15]||(r[15]=Ve(" Plan Type: ")),je(m("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.form.plan=n)},r[14]||(r[14]=[m("option",{value:"IEP"},"IEP",-1),m("option",{value:"504"},"504",-1)]),512),[[vr,t.form.plan]])]),m("label",null,[r[16]||(r[16]=Ve(" Review Date: ")),je(m("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.form.reviewDate=n),type:"date"},null,512),[[Ct,t.form.reviewDate]])]),m("label",null,[r[17]||(r[17]=Ve(" Reevaluation Date: ")),je(m("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.form.reevalDate=n),type:"date"},null,512),[[Ct,t.form.reevalDate]])]),m("label",null,[r[18]||(r[18]=Ve(" Meeting Date: ")),je(m("input",{"onUpdate:modelValue":r[7]||(r[7]=n=>t.form.meetingDate=n),type:"date"},null,512),[[Ct,t.form.meetingDate]])]),m("label",null,[r[20]||(r[20]=Ve(" Case Manager: ")),je(m("select",{"onUpdate:modelValue":r[8]||(r[8]=n=>t.form.caseManagerId=n)},[r[19]||(r[19]=m("option",{value:""},"-- Select Case Manager --",-1)),(V(!0),j(Ne,null,He(t.userRoles.caseManagers,n=>(V(),j("option",{key:n.id,value:n.id},ce(n.name||n.email||n.id),9,D$))),128))],512),[[vr,t.form.caseManagerId]])])])]))}},R$=At(P$,[["__scopeId","data-v-5eadce29"]]),F$={class:"form-col"},O$={class:"periods-container"},N$={class:"period-main"},M$={class:"period-label"},B$=["value","onChange"],L$=["value"],U$=["disabled","onClick"],V$={key:0,class:"coteaching-config"},$$={class:"coteaching-info"},j$={class:"classroom-teacher"},H$={class:"case-manager-name"},G$={class:"config-row"},z$=["value","onChange"],W$=["value"],K$={class:"config-row"},q$=["value","onChange"],X$=["value"],Y$={__name:"StudentSchedule",props:{form:{type:Object,required:!0},periods:{type:Array,required:!0},userRoles:{type:Object,required:!0},appSettings:{type:Object,default:()=>({})}},setup(t){const e=t,{getLabel:r}=Pf(),n=be(()=>(e.userRoles.caseManagers||[]).filter(x=>x.id&&(x.role==="case_manager"||x.role==="administrator_504_CM"||x.role==="sped_chair"||x.roles&&x.roles.includes("case_manager")))),s=be(()=>{var g;if((g=e.appSettings)!=null&&g.classServices){const x=e.appSettings.classServices.find(y=>y.name==="Co-teach"&&y.enabledSubcategories);if(x)return x.enabledSubcategories.sort()}return["English","Math","History","Science"]}),i=g=>{const x=e.form.schedule[g];return typeof x=="string"?x:typeof x=="object"&&x!==null&&x.teacherId||""},a=(g,x)=>{if(f("SET_TEACHER_START",{period:g,teacherId:x,isCoTeachingActive:c(g),currentValue:e.form.schedule[g]}),c(g)){const y=u(g),E=d(g);e.form.schedule[g]={teacherId:x,coTeaching:{caseManagerId:y,subject:E}},f("SET_TEACHER_COTEACHING",{period:g,newValue:e.form.schedule[g]})}else e.form.schedule[g]=x,f("SET_TEACHER_SIMPLE",{period:g,newValue:e.form.schedule[g]})},o=g=>{if(!g)return"Unknown";const x=(e.userRoles.teachers||[]).find(y=>y.id===g);return x&&(x.name||x.email)||g},l=g=>{if(!g)return"Select Case Manager";const x=n.value.find(y=>y.id===g);return x&&(x.name||x.email)||g},c=g=>{var y;const x=e.form.schedule[g];return typeof x=="object"&&x!==null?!!((y=x.coTeaching)!=null&&y.caseManagerId):!1},u=g=>{var y;const x=e.form.schedule[g];return typeof x=="object"&&x!==null&&((y=x.coTeaching)==null?void 0:y.caseManagerId)||""},d=g=>{var y;const x=e.form.schedule[g];return typeof x=="object"&&x!==null&&((y=x.coTeaching)==null?void 0:y.subject)||""},f=(g,x)=>{const y=new Date().toISOString();console.log(` [${y}] Schedule Process: ${g}`,x)},h=(g,x)=>{f("UPDATE_CM_START",{period:g,caseManagerId:x,currentValue:e.form.schedule[g]});const y=i(g),E=d(g);y?(e.form.schedule[g]={teacherId:y,coTeaching:{caseManagerId:x,subject:E}},f("UPDATE_CM_COMPLETE",{period:g,newValue:e.form.schedule[g]}),console.log(" CO-TEACHING DEBUG - Case Manager Updated:",{period:g,periodType:typeof g,caseManagerId:x,teacherId:y,subject:E,finalValue:e.form.schedule[g],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):f("UPDATE_CM_BLOCKED",{reason:"No teacher ID",period:g})},p=(g,x)=>{f("UPDATE_SUBJECT_START",{period:g,subject:x,currentValue:e.form.schedule[g]});const y=i(g),E=u(g);y?(e.form.schedule[g]={teacherId:y,coTeaching:{caseManagerId:E,subject:x}},f("UPDATE_SUBJECT_COMPLETE",{period:g,newValue:e.form.schedule[g]}),console.log(" CO-TEACHING DEBUG - Subject Updated:",{period:g,periodType:typeof g,subject:x,teacherId:y,caseManagerId:E,finalValue:e.form.schedule[g],entireSchedule:JSON.stringify(e.form.schedule,null,2)})):f("UPDATE_SUBJECT_BLOCKED",{reason:"No teacher ID",period:g})},v=g=>{var E;f("TOGGLE_START",{period:g,currentValue:e.form.schedule[g],formVersion:e.formVersion});const x=i(g);if(!x){f("TOGGLE_BLOCKED",{reason:"No teacher selected",period:g});return}const y=c(g);if(f("TOGGLE_STATE",{period:g,isActive:y,teacherId:x,beforeValue:e.form.schedule[g]}),y)e.form.schedule[g]=x;else{const I={teacherId:x,coTeaching:{caseManagerId:((E=n.value[0])==null?void 0:E.id)||"",subject:s.value[0]||""}};e.form.schedule[g]=I,setTimeout(()=>{var P;console.log(" CO-TEACHING PERSISTENCE CHECK - 100ms later:",{period:g,stillExists:!!e.form.schedule[g],currentValue:e.form.schedule[g],isObject:typeof e.form.schedule[g]=="object",hasCoTeaching:!!((P=e.form.schedule[g])!=null&&P.coTeaching)})},100),setTimeout(()=>{var P;console.log(" CO-TEACHING PERSISTENCE CHECK - 1000ms later:",{period:g,stillExists:!!e.form.schedule[g],currentValue:e.form.schedule[g],isObject:typeof e.form.schedule[g]=="object",hasCoTeaching:!!((P=e.form.schedule[g])!=null&&P.coTeaching)})},1e3)}f("TOGGLE_COMPLETE",{period:g,afterValue:e.form.schedule[g],formVersion:e.formVersion}),console.log(" CO-TEACHING DEBUG - Toggle Complete:",{period:g,periodType:typeof g,isActive:!y,finalValue:e.form.schedule[g],entireSchedule:JSON.stringify(e.form.schedule,null,2),availableCaseManagers:n.value.length,availableSubjects:s.value.length})};return Qt(()=>e.form.schedule,(g,x)=>{console.log(" SCHEDULE WATCHER - Schedule changed:",{timestamp:new Date().toISOString(),newSchedule:JSON.stringify(g,null,2),oldSchedule:JSON.stringify(x,null,2),periodsWithObjects:Object.keys(g).filter(y=>typeof g[y]=="object"),periodsWithCoTeaching:Object.keys(g).filter(y=>{var E;return(E=g[y])==null?void 0:E.coTeaching})})},{deep:!0}),(g,x)=>(V(),j("fieldset",F$,[x[7]||(x[7]=m("legend",null,"Schedule",-1)),m("div",O$,[(V(!0),j(Ne,null,He(t.periods,y=>(V(),j("div",{key:y,class:"period-row"},[m("div",N$,[m("label",M$,ce(me(r)(y))+":",1),m("select",{value:i(y),onChange:E=>a(y,E.target.value),class:"teacher-select"},[x[0]||(x[0]=m("option",{value:""},"--",-1)),(V(!0),j(Ne,null,He(t.userRoles.teachers,E=>(V(),j("option",{key:E.id,value:E.id},ce(E.name||E.email||E.id),9,L$))),128))],40,B$),m("button",{type:"button",class:ut(["coteaching-toggle",{active:c(y)}]),disabled:!i(y),onClick:E=>v(y),title:"Co-Teaching"}," C ",10,U$)]),c(y)?(V(),j("div",V$,[m("div",$$,[x[1]||(x[1]=m("span",{class:"coteaching-label"},"Co-Teaching:",-1)),m("span",j$,ce(o(i(y))),1),x[2]||(x[2]=m("span",{class:"plus-sign"},"+",-1)),m("span",H$,ce(l(u(y))),1)]),m("div",G$,[x[4]||(x[4]=m("label",{class:"config-label"},"Subject:",-1)),m("select",{value:d(y),onChange:E=>p(y,E.target.value),class:"subject-select",required:""},[x[3]||(x[3]=m("option",{value:""},"-- Select Subject --",-1)),(V(!0),j(Ne,null,He(s.value,E=>(V(),j("option",{key:E,value:E},ce(E),9,W$))),128))],40,z$)]),m("div",K$,[x[6]||(x[6]=m("label",{class:"config-label"},"Case Manager:",-1)),m("select",{value:u(y),onChange:E=>h(y,E.target.value),class:"cm-select",required:""},[x[5]||(x[5]=m("option",{value:""},"-- Select Case Manager --",-1)),(V(!0),j(Ne,null,He(n.value,E=>(V(),j("option",{key:E.id,value:E.id},ce(E.name||E.email||E.id),9,X$))),128))],40,q$)])])):Oe("",!0)]))),128))])]))}},Q$=At(Y$,[["__scopeId","data-v-eee60512"]]),J$={class:"checkbox-inline-group"},Z$=["value","checked","onChange"],B2={__name:"ServiceCheckboxGroup",props:["label","items","modelValue"],emits:["update:modelValue"],setup(t,{emit:e}){const r=t,n=e;function s(i){const a=r.label+": "+i,o=r.modelValue?[...r.modelValue]:[],l=o.indexOf(a);l===-1?o.push(a):o.splice(l,1),n("update:modelValue",o)}return(i,a)=>(V(),j("fieldset",null,[m("legend",null,ce(t.label),1),m("div",J$,[(V(!0),j(Ne,null,He(t.items,o=>(V(),j("label",{key:o},[m("input",{type:"checkbox",value:t.label+": "+o,checked:t.modelValue&&t.modelValue.includes(t.label+": "+o),onChange:l=>s(o)},null,40,Z$),Ve(" "+ce(o),1)]))),128))])]))}},ej={class:"form-col"},tj={class:"inner-grid-3"},rj={key:0,class:"loading-message"},nj={key:1,class:"error-message"},sj={style:{display:"none"}},aj={key:3,class:"no-services-message"},ij={__name:"StudentClassServices",props:{form:{type:Object,required:!0},availableClassServices:{type:Array,required:!0},appSettingsLoading:{type:Boolean,default:!1},appSettingsError:{type:String,default:null}},setup(t){const e=t,r=be(()=>e.availableClassServices.filter(s=>s.name!=="Co-teach")),n=be(()=>e.availableClassServices.filter(s=>s.name==="Co-teach"));return(s,i)=>(V(),j("fieldset",ej,[i[5]||(i[5]=m("legend",null,"Services: classes",-1)),m("div",tj,[t.appSettingsLoading?(V(),j("div",rj,i[2]||(i[2]=[m("span",{class:"loading-spinner"},"",-1),Ve(" Loading app settings... ")]))):t.appSettingsError?(V(),j("div",nj,[i[3]||(i[3]=m("span",{class:"error-icon"},"",-1)),Ve(" Error loading app settings: "+ce(t.appSettingsError),1)])):t.availableClassServices.length>0?(V(),j(Ne,{key:2},[(V(!0),j(Ne,null,He(r.value,a=>(V(),Tn(B2,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[0]||(i[0]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128)),m("div",sj,[(V(!0),j(Ne,null,He(n.value,a=>(V(),Tn(B2,{key:a.name,label:a.name,items:a.enabledSubcategories,modelValue:t.form.services,"onUpdate:modelValue":i[1]||(i[1]=o=>t.form.services=o)},null,8,["label","items","modelValue"]))),128))])],64)):(V(),j("div",aj,i[4]||(i[4]=[m("span",{class:"info-icon"},"",-1),Ve(" No class services configured. "),m("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},oj=At(ij,[["__scopeId","data-v-d750acb2"]]),lj=["id","value"],cj=["value"],L2={__name:"ServiceSelect",props:["id","label","list","modelValue"],emits:["update:modelValue"],setup(t){return(e,r)=>(V(),j("label",null,[Ve(ce(t.label)+": ",1),m("select",{id:t.id,value:t.modelValue,onChange:r[0]||(r[0]=n=>e.$emit("update:modelValue",n.target.value))},[r[1]||(r[1]=m("option",{value:""},"--",-1)),(V(!0),j(Ne,null,He(t.list,n=>(V(),j("option",{key:n.id,value:n.id},ce(n.name),9,cj))),128))],40,lj)]))}},uj={class:"inner-grid-3"},dj={key:1,class:"no-services-message"},fj={__name:"StudentProviders",props:{form:{type:Object,required:!0},serviceProviders:{type:Array,required:!0},customServiceProviders:{type:Array,required:!0},providerFieldMap:{type:Object,required:!0},getProviderLabel:{type:Function,required:!0},getProviderUsers:{type:Function,required:!0}},setup(t){return(e,r)=>(V(),j("fieldset",null,[r[1]||(r[1]=m("legend",null,"Services: providers",-1)),m("div",uj,[t.serviceProviders.length>0?(V(),j(Ne,{key:0},[(V(!0),j(Ne,null,He(t.serviceProviders,n=>(V(),Tn(L2,{key:n,id:n,label:t.getProviderLabel(n),list:t.getProviderUsers(n),modelValue:t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[t.providerFieldMap[n]||`${n.toLowerCase()}Id`]=s},null,8,["id","label","list","modelValue","onUpdate:modelValue"]))),128)),(V(!0),j(Ne,null,He(t.customServiceProviders,n=>(V(),Tn(L2,{key:n,id:n,label:n,list:[],modelValue:t.form[`${n.toLowerCase()}Id`],"onUpdate:modelValue":s=>t.form[`${n.toLowerCase()}Id`]=s},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))],64)):(V(),j("div",dj,r[0]||(r[0]=[m("span",{class:"info-icon"},"",-1),Ve(" No service providers configured. "),m("a",{href:"/admin",class:"settings-link"},"Configure in App Settings",-1)])))])]))}},hj=At(fj,[["__scopeId","data-v-faa02238"]]),pj={class:"form-col"},mj={class:"document-section"},gj={key:0,class:"current-file"},vj=["href"],xj={key:1,class:"removed-file"},yj={class:"document-section"},Ej={key:0,class:"current-file"},_j=["href"],bj={key:1,class:"removed-file"},Sj={__name:"StudentDocuments",props:{form:{type:Object,required:!0},student:{type:Object,default:()=>({})},mode:{type:String,default:"new"},onFileChange:{type:Function,required:!0},removeBipFile:{type:Function,required:!0},removeAtaglanceFile:{type:Function,required:!0}},setup(t){return(e,r)=>(V(),j("fieldset",pj,[r[12]||(r[12]=m("legend",null,"Documents",-1)),m("div",mj,[m("label",null,[r[8]||(r[8]=Ve(" BIP: ")),m("input",{type:"file",accept:"application/pdf",onChange:r[0]||(r[0]=n=>t.onFileChange(n,"bipFile"))},null,32),t.form.bipPdfUrl&&!t.form.removeBipFile?(V(),j("span",gj,[r[6]||(r[6]=Ve(" Current: ")),m("a",{href:t.form.bipPdfUrl,target:"_blank"},"View BIP",8,vj),m("button",{type:"button",onClick:r[1]||(r[1]=(...n)=>t.removeBipFile&&t.removeBipFile(...n)),class:"btn-remove"},"  Remove ")])):Oe("",!0),t.form.removeBipFile?(V(),j("span",xj,[r[7]||(r[7]=Ve(" BIP file will be removed ")),m("button",{type:"button",onClick:r[2]||(r[2]=n=>t.form.removeBipFile=!1),class:"btn-undo"},"  Undo ")])):Oe("",!0)])]),m("div",yj,[m("label",null,[r[11]||(r[11]=Ve(" At-A-Glance PDF: ")),m("input",{type:"file",accept:"application/pdf",onChange:r[3]||(r[3]=n=>t.onFileChange(n,"ataglanceFile"))},null,32),t.form.ataglancePdfUrl&&!t.form.removeAtaglanceFile?(V(),j("span",Ej,[r[9]||(r[9]=Ve(" Current: ")),m("a",{href:t.form.ataglancePdfUrl,target:"_blank"},"View At-A-Glance",8,_j),m("button",{type:"button",onClick:r[4]||(r[4]=(...n)=>t.removeAtaglanceFile&&t.removeAtaglanceFile(...n)),class:"btn-remove"},"  Remove ")])):Oe("",!0),t.form.removeAtaglanceFile?(V(),j("span",bj,[r[10]||(r[10]=Ve(" At-A-Glance file will be removed ")),m("button",{type:"button",onClick:r[5]||(r[5]=n=>t.form.removeAtaglanceFile=!1),class:"btn-undo"},"  Undo ")])):Oe("",!0)])])]))}},Tj=At(Sj,[["__scopeId","data-v-908ab954"]]),Aj={class:"form-col"},wj={class:"inner-grid-2"},Ij={__name:"StudentAccommodations",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(V(),j("fieldset",Aj,[r[4]||(r[4]=m("legend",null,"Accommodations",-1)),m("div",wj,[m("label",null,[r[2]||(r[2]=Ve(" Instruction: ")),je(m("textarea",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.form.instruction=n),placeholder:"Enter instructional accommodations..."},null,512),[[Ct,t.form.instruction]])]),m("label",null,[r[3]||(r[3]=Ve(" Assessment: ")),je(m("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.form.assessment=n),placeholder:"Enter assessment accommodations..."},null,512),[[Ct,t.form.assessment]])])])]))}},Cj=At(Ij,[["__scopeId","data-v-4ce4f379"]]),kj={class:"flags-container"},Dj={class:"checkbox-label"},Pj={class:"checkbox-label"},Rj={__name:"StudentFlags",props:{form:{type:Object,required:!0}},setup(t){return(e,r)=>(V(),j("fieldset",null,[r[4]||(r[4]=m("legend",null,"Flags",-1)),m("div",kj,[m("label",Dj,[je(m("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=n=>t.form.flag1=n)},null,512),[[St,t.form.flag1]]),r[2]||(r[2]=Ve(" Preferential seating "))]),m("label",Pj,[je(m("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=n=>t.form.flag2=n)},null,512),[[St,t.form.flag2]]),r[3]||(r[3]=Ve(" Separate setting "))])])]))}},Fj=At(Rj,[["__scopeId","data-v-e7295a7a"]]),Oj={class:"dialog-backdrop"},Nj={class:"dialog"},Mj=["disabled"],Bj={__name:"StudentForm",props:{student:{type:Object,default:()=>({})},users:{type:Object,required:!0},mode:{type:String,default:"new"}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{form:s,isSaving:i,appSettings:a,appSettingsLoading:o,appSettingsError:l,periods:c,gradeOptions:u,availableClassServices:d,serviceProviders:f,customServiceProviders:h,userRoles:p,onFileChange:v,removeBipFile:g,removeAtaglanceFile:x,providerFieldMap:y,getProviderLabel:E,getProviderUsers:I,handleSubmit:P}=A$(r,n);return(D,A)=>(V(),j("div",Oj,[m("div",Nj,[m("header",null,[m("h2",null,ce(t.mode==="edit"?"Edit Student":"Add Student"),1),m("button",{onClick:A[0]||(A[0]=_=>D.$emit("close")),class:"close-btn"},"")]),m("form",{onSubmit:A[2]||(A[2]=Ds((..._)=>me(P)&&me(P)(..._),["prevent"])),id:"student-form"},[at(R$,{form:me(s),mode:t.mode,"grade-options":me(u),"user-roles":me(p)},null,8,["form","mode","grade-options","user-roles"]),at(Q$,{form:me(s),periods:me(c),"user-roles":me(p),"app-settings":me(a)},null,8,["form","periods","user-roles","app-settings"]),at(oj,{form:me(s),"available-class-services":me(d),"app-settings-loading":me(o),"app-settings-error":me(l)},null,8,["form","available-class-services","app-settings-loading","app-settings-error"]),at(hj,{form:me(s),"service-providers":me(f),"custom-service-providers":me(h),"provider-field-map":me(y),"get-provider-label":me(E),"get-provider-users":me(I)},null,8,["form","service-providers","custom-service-providers","provider-field-map","get-provider-label","get-provider-users"]),at(Tj,{form:me(s),student:t.student,mode:t.mode,"on-file-change":me(v),"remove-bip-file":me(g),"remove-ataglance-file":me(x)},null,8,["form","student","mode","on-file-change","remove-bip-file","remove-ataglance-file"]),at(Cj,{form:me(s)},null,8,["form"]),at(Fj,{form:me(s)},null,8,["form"]),m("footer",null,[m("button",{type:"button",onClick:A[1]||(A[1]=_=>D.$emit("close")),class:"btn btn-secondary"}," Cancel "),m("button",{type:"submit",class:"btn btn-primary",disabled:me(i)},ce(me(i)?"Saving...":t.mode==="edit"?"Save":"Add Student"),9,Mj)])],32)])]))}},xk=At(Bj,[["__scopeId","data-v-201e1a33"]]),Lj={key:0},Uj={key:1,class:"loading-dialog"},Vj={__name:"StudentEditDialog",props:{studentId:{type:String,required:!0},users:{type:Object,required:!0}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,{students:s,fetchStudents:i}=Ua(),a=be(()=>{const l=s.value.find(c=>c.id===r.studentId);return console.log("StudentEditDialog - studentId:",r.studentId),console.log("StudentEditDialog - all students:",s.value),console.log("StudentEditDialog - found student:",l),l||{}});tr(async()=>{s.value.length===0&&(console.log("StudentEditDialog - fetching students..."),await i())});function o(l){console.log("StudentEditDialog - student saved:",l),n("saved",l)}return(l,c)=>a.value&&Object.keys(a.value).length>0?(V(),j("div",Lj,[at(xk,{student:a.value,users:t.users,mode:"edit",onClose:c[0]||(c[0]=u=>l.$emit("close")),onSaved:o},null,8,["student","users"])])):(V(),j("div",Uj,c[1]||(c[1]=[m("div",{class:"dialog"},[m("header",null,[m("h2",null,"Loading Student Data...")]),m("div",{class:"content"},[m("p",null,"Please wait while we load the student information.")])],-1)])))}},$j=At(Vj,[["__scopeId","data-v-0410ea60"]]),jj={class:"dialog-backdrop"},Hj={class:"dialog"},Gj={class:"button-group"},zj={key:0,class:"members-list"},Wj={key:0,class:"email"},Kj=["value"],qj={class:"docs-option"},Xj={key:0,class:"no-docs"},Yj=["disabled"],Qj=["disabled"],Jj={__name:"StudentsEmailDialog",props:{student:{type:Object,required:!0},userMap:{type:Object,required:!0}},emits:["close"],setup(t){const e=t,{student:r,userMap:n}=e,s=fe(""),i=fe([]),a=fe(!1),o=be(()=>{var x,y;if((y=(x=r.app)==null?void 0:x.schedule)!=null&&y.periods){const E=[];return Object.values(r.app.schedule.periods).forEach(I=>{var D;const P=typeof I=="string"?I:I==null?void 0:I.teacherId;P&&E.push(P),(D=I==null?void 0:I.coTeaching)!=null&&D.caseManagerId&&E.push(I.coTeaching.caseManagerId)}),E}const g=r.schedule||{};return Object.values(g).filter(Boolean)}),l=be(()=>[...new Set(o.value)]),c=be(()=>{var x;const g=[];(x=r.app)!=null&&x.providers&&Object.entries(r.app.providers).forEach(([y,E])=>{E&&!["caseManagerId"].includes(y)&&g.push(E)});for(const y in r)y.endsWith("_id")&&!["casemanager_id","caseManagerId"].includes(y)&&r[y]&&g.push(r[y]);return[...new Set(g)].filter(y=>!l.value.includes(y))}),u=be(()=>l.value.map(g=>({id:g,...n[g]||{}})).filter(g=>g&&g.email)),d=be(()=>c.value.map(g=>({id:g,...n[g]||{}})).filter(g=>g&&g.email)),f=be(()=>[...u.value,...d.value]),h=be(()=>{var g,x,y,E;return!!((x=(g=r.app)==null?void 0:g.documents)!=null&&x.ataglancePdfUrl||(E=(y=r.app)==null?void 0:y.documents)!=null&&E.bipPdfUrl||r.ataglancePdfUrl||r.ataglance_pdf_url||r.bipPdfUrl||r.bip_pdf_url)}),p=be(()=>s.value?s.value==="Individual"?i.value.length>0:!0:!1);function v(){var D,A,_,b,w,C,T,k;let g=[];s.value==="Teachers"?g=u.value:s.value==="TeachersAndService"?g=[...u.value,...d.value]:s.value==="Individual"&&(g=f.value.filter(N=>i.value.includes(N.id)));const x=g.map(N=>N.email).filter(Boolean).join(",");if(!x){alert("No email addresses found for the selected recipients.");return}const E=`${((((D=r.firstName)==null?void 0:D[0])||((A=r.first_name)==null?void 0:A[0])||"")+(((_=r.lastName)==null?void 0:_[0])||((b=r.last_name)==null?void 0:b[0])||"")).toUpperCase()} - Student Update`;let I="";if(a.value){I+=`Hi team!

Below are links to ${r.firstName||r.first_name||""} ${r.lastName||r.last_name||""}'s updated documents:

`;const N=((C=(w=r.app)==null?void 0:w.documents)==null?void 0:C.ataglancePdfUrl)||r.ataglancePdfUrl||r.ataglance_pdf_url,B=((k=(T=r.app)==null?void 0:T.documents)==null?void 0:k.bipPdfUrl)||r.bipPdfUrl||r.bip_pdf_url;N&&(I+=`At-A-Glance: ${N}
`),B&&(I+=`BIP:         ${B}
`)}else I="See attached.";const P=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(x)}&su=${encodeURIComponent(E)}&body=${encodeURIComponent(I)}`;window.open(P,"_blank","noopener")}return(g,x)=>(V(),j("div",jj,[m("div",Hj,[m("header",null,[m("h2",null,"Email about "+ce(me(r).firstName||me(r).first_name)+" "+ce(me(r).lastName||me(r).last_name),1),m("button",{onClick:x[0]||(x[0]=y=>g.$emit("close")),title:"Close"},"")]),m("main",null,[m("form",{onSubmit:x[6]||(x[6]=Ds(()=>{},["prevent"]))},[m("div",Gj,[m("button",{type:"button",class:ut(["option-button",{active:s.value==="Teachers"}]),onClick:x[1]||(x[1]=y=>s.value="Teachers")}," Teachers ",2),m("button",{type:"button",class:ut(["option-button",{active:s.value==="TeachersAndService"}]),onClick:x[2]||(x[2]=y=>s.value="TeachersAndService")}," Teachers and service providers ",2),m("button",{type:"button",class:ut(["option-button",{active:s.value==="Individual"}]),onClick:x[3]||(x[3]=y=>s.value="Individual")}," Individual member of the IEP team ",2)]),s.value==="Individual"?(V(),j("div",zj,[x[8]||(x[8]=m("div",null,"Select members:",-1)),(V(!0),j(Ne,null,He(f.value,y=>(V(),j("div",{key:y.id},[m("label",null,[m("span",null,[Ve(ce(y.name||y.displayName||y.email||y.id)+" ",1),y.email?(V(),j("span",Wj,"("+ce(y.email)+")",1)):Oe("",!0)]),je(m("input",{type:"checkbox",value:y.id,"onUpdate:modelValue":x[4]||(x[4]=E=>i.value=E)},null,8,Kj),[[St,i.value]])])]))),128))])):Oe("",!0),m("div",qj,[m("label",null,[m("span",null,[x[9]||(x[9]=Ve(" Include documents ")),h.value?Oe("",!0):(V(),j("span",Xj,"(No docs available)"))]),je(m("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=y=>a.value=y),disabled:!h.value},null,8,Yj),[[St,a.value]])])])],32)]),m("footer",null,[m("button",{onClick:x[7]||(x[7]=y=>g.$emit("close"))},"Cancel"),m("button",{disabled:!p.value,onClick:v},"Send",8,Qj)])])]))}},Zj=At(Jj,[["__scopeId","data-v-0ea92b37"]]),eH={class:"dialog-backdrop"},tH={class:"dialog"},rH={class:"field-groups"},nH={class:"field-group"},sH={class:"field-group"},aH={class:"field-group"},iH={class:"field-group"},oH={class:"field-group"},lH={class:"field-group"},cH=["disabled"],uH={__name:"ExportDialog",props:{students:{type:Array,default:()=>[]},userMap:{type:Object,default:()=>({})}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=Ei(),i=gy(),a=fe({studentData:{firstName:!0,lastName:!0,grade:!0,plan:!0,caseManagerId:!0},dates:{reviewDate:!0,reevalDate:!0,meetingDate:!0},providers:{all:!0},accommodations:{instruction:!0,assessment:!0},schedule:{periods:!0,classServices:!0},documents:{ataglancePdfUrl:!0,bipPdfUrl:!0}}),o=["speechId","otId","mhId","ptId","scId","trId","audId","viId","atId","dhhId","omId","bisId","hnId","swId"],l=be(()=>Object.values(a.value).some(g=>Object.values(g).some(x=>x)));function c(g){if(!g||!r.userMap[g])return"";const x=r.userMap[g];return x.name||x.email||""}function u(g){const x=i.userPermissions||[];return Array.isArray(x)&&x.includes(g)}function d(){Object.keys(a.value).forEach(g=>{Object.keys(a.value[g]).forEach(x=>{a.value[g][x]=!0})})}function f(){Object.keys(a.value).forEach(g=>{Object.keys(a.value[g]).forEach(x=>{a.value[g][x]=!1})})}function h(g){var I,P,D,A,_,b,w,C,T,k,N,B,R,O,U,M,q,H,L,z,K,te,ge,ie,he,Z,Q,xe,X,W,Y,ee;const x=s.currentUser;if((x==null?void 0:x.role)==="admin"||(x==null?void 0:x.role)==="administrator"||(x==null?void 0:x.role)==="sped_chair"||(x==null?void 0:x.role)==="administrator_504_CM")return p(g);const E={};return a.value.studentData.firstName&&(E.firstName=(P=(I=g.app)==null?void 0:I.studentData)==null?void 0:P.firstName),a.value.studentData.lastName&&(E.lastName=(A=(D=g.app)==null?void 0:D.studentData)==null?void 0:A.lastName),a.value.studentData.grade&&(E.grade=(b=(_=g.app)==null?void 0:_.studentData)==null?void 0:b.grade),a.value.studentData.plan&&(E.plan=(C=(w=g.app)==null?void 0:w.studentData)==null?void 0:C.plan),a.value.studentData.caseManagerId&&(E.caseManagerId=(k=(T=g.app)==null?void 0:T.studentData)==null?void 0:k.caseManagerId),u("view_student_dates")&&(a.value.dates.reviewDate&&(E.reviewDate=(B=(N=g.app)==null?void 0:N.dates)==null?void 0:B.reviewDate),a.value.dates.reevalDate&&(E.reevalDate=(O=(R=g.app)==null?void 0:R.dates)==null?void 0:O.reevalDate),a.value.dates.meetingDate&&(E.meetingDate=(M=(U=g.app)==null?void 0:U.dates)==null?void 0:M.meetingDate)),(u("view_service_providers")||((H=(q=g.app)==null?void 0:q.studentData)==null?void 0:H.caseManagerId)===(x==null?void 0:x.uid)||o.some(ve=>{var re,se;return((se=(re=g.app)==null?void 0:re.providers)==null?void 0:se[ve])===(x==null?void 0:x.uid)}))&&a.value.providers.all&&o.forEach(ve=>{var re,se;E[ve]=(se=(re=g.app)==null?void 0:re.providers)==null?void 0:se[ve]}),u("view_accommodations")&&(a.value.accommodations.instruction&&(E.instruction=(z=(L=g.app)==null?void 0:L.accommodations)==null?void 0:z.instruction),a.value.accommodations.assessment&&(E.assessment=(te=(K=g.app)==null?void 0:K.accommodations)==null?void 0:te.assessment)),(u("view_schedule")||Object.values(((ie=(ge=g.app)==null?void 0:ge.schedule)==null?void 0:ie.periods)||{}).includes(x==null?void 0:x.uid))&&(a.value.schedule.periods&&(E.schedule=(Z=(he=g.app)==null?void 0:he.schedule)==null?void 0:Z.periods),a.value.schedule.classServices&&(E.classServices=(xe=(Q=g.app)==null?void 0:Q.schedule)==null?void 0:xe.classServices)),u("view_documents")&&(a.value.documents.ataglancePdfUrl&&(E.ataglancePdfUrl=(W=(X=g.app)==null?void 0:X.documents)==null?void 0:W.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(E.bipPdfUrl=(ee=(Y=g.app)==null?void 0:Y.documents)==null?void 0:ee.bipPdfUrl)),E}function p(g){var y,E,I,P,D,A,_,b,w,C,T,k,N,B,R,O,U,M,q,H,L,z,K,te,ge,ie,he,Z;const x={};return a.value.studentData.firstName&&(x.firstName=(E=(y=g.app)==null?void 0:y.studentData)==null?void 0:E.firstName),a.value.studentData.lastName&&(x.lastName=(P=(I=g.app)==null?void 0:I.studentData)==null?void 0:P.lastName),a.value.studentData.grade&&(x.grade=(A=(D=g.app)==null?void 0:D.studentData)==null?void 0:A.grade),a.value.studentData.plan&&(x.plan=(b=(_=g.app)==null?void 0:_.studentData)==null?void 0:b.plan),a.value.studentData.caseManagerId&&(x.caseManagerId=(C=(w=g.app)==null?void 0:w.studentData)==null?void 0:C.caseManagerId),a.value.dates.reviewDate&&(x.reviewDate=(k=(T=g.app)==null?void 0:T.dates)==null?void 0:k.reviewDate),a.value.dates.reevalDate&&(x.reevalDate=(B=(N=g.app)==null?void 0:N.dates)==null?void 0:B.reevalDate),a.value.dates.meetingDate&&(x.meetingDate=(O=(R=g.app)==null?void 0:R.dates)==null?void 0:O.meetingDate),a.value.providers.all&&o.forEach(Q=>{var xe,X;x[Q]=(X=(xe=g.app)==null?void 0:xe.providers)==null?void 0:X[Q]}),a.value.accommodations.instruction&&(x.instruction=(M=(U=g.app)==null?void 0:U.accommodations)==null?void 0:M.instruction),a.value.accommodations.assessment&&(x.assessment=(H=(q=g.app)==null?void 0:q.accommodations)==null?void 0:H.assessment),a.value.schedule.periods&&(x.schedule=(z=(L=g.app)==null?void 0:L.schedule)==null?void 0:z.periods),a.value.schedule.classServices&&(x.classServices=(te=(K=g.app)==null?void 0:K.schedule)==null?void 0:te.classServices),a.value.documents.ataglancePdfUrl&&(x.ataglancePdfUrl=(ie=(ge=g.app)==null?void 0:ge.documents)==null?void 0:ie.ataglancePdfUrl),a.value.documents.bipPdfUrl&&(x.bipPdfUrl=(Z=(he=g.app)==null?void 0:he.documents)==null?void 0:Z.bipPdfUrl),x}function v(){const g=r.students.map(_=>h(_)),x=[],y=[],E={firstName:"First Name",lastName:"Last Name",grade:"Grade",plan:"Plan Type",caseManagerId:"Case Manager",reviewDate:"Plan Review",reevalDate:"Reevaluation",meetingDate:"Meeting Date",speechId:"Speech",otId:"OT",mhId:"Mental Health",ptId:"PT",scId:"SC",trId:"TR",audId:"Audiology",viId:"Vision",atId:"AT",dhhId:"DHH",omId:"O&M",bisId:"BIS",hnId:"HN",swId:"SW",instruction:"Instructional Accommodation",assessment:"Assessment Accommodations",schedule:"Schedule",classServices:"Class Services",ataglancePdfUrl:"At-A-Glance",bipPdfUrl:"BIP"};Object.entries(a.value).forEach(([_,b])=>{Object.entries(b).forEach(([w,C])=>{C&&(w==="all"?o.forEach(T=>{x.push(E[T])}):x.push(E[w]))})}),g.forEach(_=>{const b=[];Object.entries(a.value).forEach(([w,C])=>{Object.entries(C).forEach(([T,k])=>{if(k)if(T==="all")o.forEach(N=>{const B=_[N]||"";b.push(B?c(B):"")});else{let N=_[T]||"";T.endsWith("Id")?N=N?c(N):"":T==="classServices"?N=Array.isArray(_.classServices)?_.classServices.join(", "):"":T==="schedule"&&(N=_.schedule?Object.entries(_.schedule).map(([B,R])=>`${B}: ${c(R)}`).join("; "):""),b.push(N)}})}),y.push(b)});const I=[x.join(","),...y.map(_=>_.map(b=>`"${String(b).replace(/"/g,'""')}"`).join(","))].join(`
`),P=new Blob([I],{type:"text/csv"}),D=window.URL.createObjectURL(P),A=document.createElement("a");A.href=D,A.download="students-export.csv",A.click(),window.URL.revokeObjectURL(D),n("close")}return(g,x)=>(V(),j("div",eH,[m("div",tH,[m("header",null,[x[17]||(x[17]=m("h2",null,"Export Students",-1)),m("button",{onClick:x[0]||(x[0]=y=>g.$emit("close")),class:"close-btn"},"")]),m("main",null,[m("p",null,"Export "+ce(t.students.length)+" students",1),m("div",rH,[m("div",nH,[x[23]||(x[23]=m("h4",null,"Student Info",-1)),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[1]||(x[1]=y=>a.value.studentData.firstName=y)},null,512),[[St,a.value.studentData.firstName]]),x[18]||(x[18]=Ve(" First Name "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[2]||(x[2]=y=>a.value.studentData.lastName=y)},null,512),[[St,a.value.studentData.lastName]]),x[19]||(x[19]=Ve(" Last Name "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=y=>a.value.studentData.grade=y)},null,512),[[St,a.value.studentData.grade]]),x[20]||(x[20]=Ve(" Grade "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[4]||(x[4]=y=>a.value.studentData.plan=y)},null,512),[[St,a.value.studentData.plan]]),x[21]||(x[21]=Ve(" Plan Type "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[5]||(x[5]=y=>a.value.studentData.caseManagerId=y)},null,512),[[St,a.value.studentData.caseManagerId]]),x[22]||(x[22]=Ve(" Case Manager "))])]),m("div",sH,[x[27]||(x[27]=m("h4",null,"Important Dates",-1)),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[6]||(x[6]=y=>a.value.dates.reviewDate=y)},null,512),[[St,a.value.dates.reviewDate]]),x[24]||(x[24]=Ve(" Plan Review "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[7]||(x[7]=y=>a.value.dates.reevalDate=y)},null,512),[[St,a.value.dates.reevalDate]]),x[25]||(x[25]=Ve(" Reevaluation "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[8]||(x[8]=y=>a.value.dates.meetingDate=y)},null,512),[[St,a.value.dates.meetingDate]]),x[26]||(x[26]=Ve(" Meeting Date "))])]),m("div",aH,[x[29]||(x[29]=m("h4",null,"Related Services",-1)),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[9]||(x[9]=y=>a.value.providers.all=y)},null,512),[[St,a.value.providers.all]]),x[28]||(x[28]=Ve(" All Service Providers "))])]),m("div",iH,[x[32]||(x[32]=m("h4",null,"Accommodations",-1)),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[10]||(x[10]=y=>a.value.accommodations.instruction=y)},null,512),[[St,a.value.accommodations.instruction]]),x[30]||(x[30]=Ve(" Instructional "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[11]||(x[11]=y=>a.value.accommodations.assessment=y)},null,512),[[St,a.value.accommodations.assessment]]),x[31]||(x[31]=Ve(" Assessment "))])]),m("div",oH,[x[35]||(x[35]=m("h4",null,"Schedule & Services",-1)),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[12]||(x[12]=y=>a.value.schedule.periods=y)},null,512),[[St,a.value.schedule.periods]]),x[33]||(x[33]=Ve(" Class Schedule "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[13]||(x[13]=y=>a.value.schedule.classServices=y)},null,512),[[St,a.value.schedule.classServices]]),x[34]||(x[34]=Ve(" Class Services "))])]),m("div",lH,[x[38]||(x[38]=m("h4",null,"Documents",-1)),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[14]||(x[14]=y=>a.value.documents.ataglancePdfUrl=y)},null,512),[[St,a.value.documents.ataglancePdfUrl]]),x[36]||(x[36]=Ve(" At-A-Glance "))]),m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":x[15]||(x[15]=y=>a.value.documents.bipPdfUrl=y)},null,512),[[St,a.value.documents.bipPdfUrl]]),x[37]||(x[37]=Ve(" BIP "))])])]),m("div",{class:"quick-select"},[m("button",{onClick:d},"Select All"),m("button",{onClick:f},"Deselect All")])]),m("footer",null,[m("button",{onClick:x[16]||(x[16]=y=>g.$emit("close")),class:"btn-secondary"},"Cancel"),m("button",{onClick:v,class:"btn-primary",disabled:!l.value},"Export",8,cH)])])]))}},dH=At(uH,[["__scopeId","data-v-9cb02217"]]),fH={class:"modal-body"},hH={class:"student-info"},pH={class:"case-manager-info"},mH={class:"form-group"},gH={key:0,class:"no-forms-message"},vH={key:1,class:"form-selection"},xH=["id","value"],yH=["for"],EH={class:"form-title"},_H={class:"form-details"},bH={key:0,class:"form-description"},SH={class:"form-date"},TH={key:0,class:"form-group"},AH={class:"teacher-selection"},wH={key:0,class:"no-teachers-message"},IH={key:1,class:"teacher-checkboxes"},CH=["id","value"],kH=["for"],DH={class:"teacher-email"},PH={key:1,class:"form-group"},RH={class:"send-options"},FH={class:"option-item"},OH={class:"option-item"},NH={class:"modal-footer"},MH=["disabled"],BH={key:0},LH={key:1},UH={__name:"TeacherFeedbackDialog",props:{student:{type:Object,required:!0},currentUser:{type:Object,required:!0}},emits:["close","form-sent"],setup(t,{emit:e}){const r=t,n=e,{activeForms:s,sendFeedbackForm:i}=Ey(),{users:a}=pa(),o=fe(""),l=fe([]),c=fe("copy"),u=fe(""),d=fe("success"),f=fe(!1),h=be(()=>s.value||[]),p=be(()=>{var D,A,_;if(!r.student||!a.value)return[];const P=new Set;return(A=(D=r.student.app)==null?void 0:D.schedule)!=null&&A.periods&&Object.values(r.student.app.schedule.periods).forEach(b=>{b&&P.add(b)}),(_=r.student.aeries)!=null&&_.schedule&&Object.values(r.student.aeries.schedule).forEach(b=>{b!=null&&b.teacherId&&P.add(b.teacherId)}),Array.from(P).map(b=>a.value.find(w=>w.id===b)).filter(Boolean).filter(b=>b.role==="teacher")}),v=be(()=>h.value.find(P=>P.id===o.value)),g=be(()=>o.value&&l.value.length>0&&c.value),x=P=>P?(P.seconds?new Date(P.seconds*1e3):new Date(P)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",y=async()=>{if(g.value)try{f.value=!0,u.value="";const P=v.value,D=l.value.map(_=>_.email),A=l.value.map(_=>_.name||_.email).join(", ");if(c.value==="copy")await navigator.clipboard.writeText(P.formUrl),u.value=`Form link copied to clipboard! Send to: ${A}`,d.value="success",E(P,l.value);else if(c.value==="email"){try{const _=await i({formUrl:P.formUrl,studentId:r.student.id,teacherEmails:D,formTitle:P.title,customMessage:null});if(_.success)u.value=`Successfully sent to ${_.sent} teachers`,_.failed>0&&(u.value+=` (${_.failed} failed)`),d.value="success";else throw new Error("Failed to send emails")}catch(_){console.error("Email sending failed:",_),u.value="Failed to send emails. Generating mailto link instead.",d.value="error";const b=`Teacher Feedback Request - ${r.student.firstName} ${r.student.lastName}`,w=`Dear Teachers,

I am requesting your feedback for ${r.student.firstName} ${r.student.lastName} (Grade ${r.student.grade}).

Please complete the following feedback form:
${P.formUrl}

Form: ${P.title}

Thank you for your time and feedback.

Best regards,
${r.currentUser.name||r.currentUser.email}
Case Manager`,C=`mailto:${D.join(",")}?subject=${encodeURIComponent(b)}&body=${encodeURIComponent(w)}`;window.open(C,"_blank"),u.value=`Email client opened for: ${A}`,d.value="success"}E(P,l.value)}n("form-sent",{form:P,student:r.student,teachers:l.value,method:c.value})}catch(P){console.error("Error sending form:",P),u.value="Failed to send form. Please try again.",d.value="error"}finally{f.value=!1}},E=(P,D)=>{const A=JSON.parse(localStorage.getItem("casemanage_sent_forms")||"[]"),_={id:`${P.id}_${r.student.id}_${Date.now()}`,formId:P.id,formTitle:P.title,formUrl:P.formUrl,studentId:r.student.id,studentName:`${r.student.firstName} ${r.student.lastName}`,caseManagerId:r.currentUser.uid,caseManagerName:r.currentUser.name||r.currentUser.email,teachers:D.map(b=>({id:b.id,name:b.name,email:b.email})),sentAt:new Date().toISOString(),method:c.value};A.push(_),localStorage.setItem("casemanage_sent_forms",JSON.stringify(A))},I=()=>{n("close")};return tr(()=>{o.value="",l.value=[],c.value="copy",u.value=""}),(P,D)=>{var A,_;return V(),j("div",{class:"modal-overlay",onClick:I},[m("div",{class:"modal-content",onClick:D[4]||(D[4]=Ds(()=>{},["stop"]))},[m("div",{class:"modal-header"},[D[5]||(D[5]=m("h3",null,"Send Teacher Feedback Form",-1)),m("button",{onClick:I,class:"close-btn"},"")]),m("div",fH,[m("div",hH,[m("h4",null,ce(t.student.firstName)+" "+ce(t.student.lastName)+" (Grade "+ce(t.student.grade)+")",1),m("p",pH,"Case Manager: "+ce(((A=t.currentUser)==null?void 0:A.name)||((_=t.currentUser)==null?void 0:_.email)),1)]),m("div",mH,[D[7]||(D[7]=m("label",null,"Select Feedback Form to Send:",-1)),h.value.length===0?(V(),j("div",gH,D[6]||(D[6]=[m("p",null,"No feedback forms available. Forms must be created in the Admin Panel first.",-1),m("p",null,[m("em",null,"Contact your administrator to create feedback forms.")],-1)]))):(V(),j("div",vH,[(V(!0),j(Ne,null,He(h.value,b=>(V(),j("div",{key:b.id,class:"form-option"},[je(m("input",{type:"radio",id:b.id,value:b.id,"onUpdate:modelValue":D[0]||(D[0]=w=>o.value=w)},null,8,xH),[[oa,o.value]]),m("label",{for:b.id,class:"form-option-label"},[m("div",EH,ce(b.title),1),m("div",_H,[b.description?(V(),j("span",bH,ce(b.description),1)):Oe("",!0),m("span",SH,"Created: "+ce(x(b.createdAt)),1)])],8,yH)]))),128))]))]),o.value?(V(),j("div",TH,[D[9]||(D[9]=m("label",null,"Select Teachers to Send Form To:",-1)),m("div",AH,[p.value.length===0?(V(),j("div",wH,D[8]||(D[8]=[m("p",null,"No teachers found for this student's schedule.",-1)]))):(V(),j("div",IH,[(V(!0),j(Ne,null,He(p.value,b=>(V(),j("div",{key:b.id,class:"checkbox-item"},[je(m("input",{type:"checkbox",id:`teacher-${b.id}`,value:b,"onUpdate:modelValue":D[1]||(D[1]=w=>l.value=w)},null,8,CH),[[St,l.value]]),m("label",{for:`teacher-${b.id}`},[Ve(ce(b.name||b.email)+" ",1),m("span",DH,"("+ce(b.email)+")",1)],8,kH)]))),128))]))])])):Oe("",!0),o.value&&l.value.length>0?(V(),j("div",PH,[D[12]||(D[12]=m("label",null,"Send Method:",-1)),m("div",RH,[m("div",FH,[je(m("input",{type:"radio",id:"copy-link",value:"copy","onUpdate:modelValue":D[2]||(D[2]=b=>c.value=b)},null,512),[[oa,c.value]]),D[10]||(D[10]=m("label",{for:"copy-link"},"Copy form link to clipboard",-1))]),m("div",OH,[je(m("input",{type:"radio",id:"email-link",value:"email","onUpdate:modelValue":D[3]||(D[3]=b=>c.value=b)},null,512),[[oa,c.value]]),D[11]||(D[11]=m("label",{for:"email-link"},"Generate email with form link",-1))])])])):Oe("",!0),u.value?(V(),j("div",{key:2,class:ut(["status-message",d.value])},ce(u.value),3)):Oe("",!0)]),m("div",NH,[m("button",{onClick:I,class:"secondary-btn"},"Cancel"),m("button",{onClick:y,class:"primary-btn",disabled:!g.value||f.value},[f.value?(V(),j("span",BH,"Sending...")):(V(),j("span",LH,ce(c.value==="copy"?"Copy Link":"Generate Email"),1))],8,MH)])])])}}},VH=At(UH,[["__scopeId","data-v-bf0569a5"]]),$H={class:"students-view"},jH={class:"page-header"},HH={class:"header-left"},GH={class:"search-container"},zH={class:"header-controls"},WH={class:"filter-group"},KH={key:1,class:"filter-group"},qH={class:"radio-group"},XH=["value"],YH={class:"filter-group"},QH={class:"radio-group"},JH=["checked"],ZH=["checked","disabled"],eG=["checked"],tG={key:0,class:"filters-panel"},rG={class:"filters-content"},nG={class:"filter-group"},sG=["value"],aG={class:"filter-group"},iG=["value"],oG={class:"filter-group"},lG=["value"],cG={class:"filter-group"},uG={class:"content"},dG={key:0},fG={key:1,class:"view-container"},hG={key:0,class:"group-section"},pG={class:"group-header"},mG={key:2,class:"view-section"},gG={__name:"StudentsView",setup(t){const e=eV(),r=tV(e),n=oV(e,r),s=cV(e),{students:i,userMapObj:a,caseManagers:o,teacherList:l,userRoles:c,aideAssignment:u,paraeducators:d,currentUser:f,isAdmin:h,showProviderView:p,getStudentById:v}=e,{showFilters:g,currentFilters:x,toggleFilters:y,clearFilters:E,applyFilters:I,debouncedApplyFilters:P}=r,{visibleStudents:D,canEditAllStudents:A,canEditOwnStudents:_,canViewAllStudents:b,canAccessTesting:w,canAccessTestingPartial:C,canAccessFilters:T,isClassViewDisabled:k,setViewMode:N,providerViewOptions:B}=n,R=lV(e,r,be(()=>n.visibleStudents.value)),{currentViewMode:O,studentsByClass:U,directAssignmentStudents:M,testingViewStudents:q}=R,{editingStudentId:H,emailingStudentId:L,showExport:z,showAddStudent:K,showFeedbackDialog:te,feedbackStudentId:ge,editStudent:ie,emailStudent:he,handleTeacherFeedback:Z,handleFormSent:Q,handleStudentAdded:xe,handleStudentSaved:X,handleNavAction:W}=s;return be(()=>{var ee;return B!=null&&B.value?B.value:((ee=f.value)==null?void 0:ee.role)==="case_manager"?[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]:[{value:"all",label:"All"},{value:"case_manager",label:"CM"},{value:"service_provider",label:"SP"}]}),(Y,ee)=>{var ve,re,se;return V(),j("div",$H,[at(wV,{"current-user":me(f),"is-admin":me(h),onAction:me(W)},null,8,["current-user","is-admin","onAction"]),m("div",jH,[m("div",HH,[ee[24]||(ee[24]=m("h1",null,"Student Management",-1)),m("div",GH,[je(m("input",{type:"text","onUpdate:modelValue":ee[0]||(ee[0]=le=>me(x).search=le),onInput:ee[1]||(ee[1]=(...le)=>me(P)&&me(P)(...le)),placeholder:"Search students...",class:"search-input"},null,544),[[Ct,me(x).search]])])]),m("div",zH,[me(T)?(V(),j("button",{key:0,onClick:ee[2]||(ee[2]=(...le)=>me(y)&&me(y)(...le)),class:ut(["filter-toggle-btn",{active:me(g)}])},ee[25]||(ee[25]=[m("span",null,"",-1),Ve(" Filters ")]),2)):Oe("",!0),m("div",WH,[je(m("select",{"onUpdate:modelValue":ee[3]||(ee[3]=le=>me(x).sortBy=le),onChange:ee[4]||(ee[4]=le=>me(I)()),class:"sort-select"},ee[26]||(ee[26]=[rs('<option value="firstName" data-v-91952bff>First Name</option><option value="lastName" data-v-91952bff>Last Name</option><option value="grade" data-v-91952bff>Grade</option><option value="reviewDate" data-v-91952bff>Review Date</option><option value="reevalDate" data-v-91952bff>Re-evaluation Date</option><option value="meetingDate" data-v-91952bff>Meeting Date</option>',6)]),544),[[vr,me(x).sortBy]])]),me(B)&&me(B).length?(V(),j("div",KH,[m("div",qH,[(V(!0),j(Ne,null,He(me(B),le=>(V(),j("label",{key:le.value,class:ut(["radio-btn",{active:me(x).providerView===le.value}])},[je(m("input",{type:"radio","onUpdate:modelValue":ee[5]||(ee[5]=Te=>me(x).providerView=Te),value:le.value,onChange:ee[6]||(ee[6]=(...Te)=>me(I)&&me(I)(...Te))},null,40,XH),[[oa,me(x).providerView]]),Ve(" "+ce(le.label),1)],2))),128))])])):Oe("",!0),m("div",YH,[m("div",QH,[m("label",{class:ut(["radio-btn",{active:me(x).viewMode==="list"}])},[m("input",{type:"radio",value:"list",checked:me(x).viewMode==="list",onChange:ee[7]||(ee[7]=le=>me(N)("list"))},null,40,JH),ee[27]||(ee[27]=Ve(" List "))],2),m("label",{class:ut(["radio-btn",{active:me(x).viewMode==="class",disabled:me(k)}])},[m("input",{type:"radio",value:"class",checked:me(x).viewMode==="class",onChange:ee[8]||(ee[8]=le=>me(N)("class")),disabled:me(k)},null,40,ZH),m("span",{class:ut({strikethrough:me(k)})},"Class",2)],2),me(w)?(V(),j("label",{key:0,class:ut(["radio-btn",{active:me(x).viewMode==="testing"}])},[m("input",{type:"radio",value:"testing",checked:me(x).viewMode==="testing",onChange:ee[9]||(ee[9]=le=>me(N)("testing"))},null,40,eG),ee[28]||(ee[28]=Ve(" SS-Testing "))],2)):Oe("",!0)])]),m("button",{onClick:ee[10]||(ee[10]=(...le)=>me(E)&&me(E)(...le)),class:"reset-btn",title:"Reset all filters"},"  ")])]),me(g)?(V(),j("div",tG,[m("div",rG,[m("div",nG,[ee[30]||(ee[30]=m("label",null,"Case Manager",-1)),je(m("select",{"onUpdate:modelValue":ee[11]||(ee[11]=le=>me(x).cm=le),onChange:ee[12]||(ee[12]=le=>me(I)()),class:"filter-select"},[ee[29]||(ee[29]=m("option",{value:"all"},"All Case Managers",-1)),(V(!0),j(Ne,null,He(me(o),le=>(V(),j("option",{key:le.id,value:le.id},ce(le.name||le.email||le.id),9,sG))),128))],544),[[vr,me(x).cm]])]),m("div",aG,[ee[32]||(ee[32]=m("label",null,"Teacher",-1)),je(m("select",{"onUpdate:modelValue":ee[13]||(ee[13]=le=>me(x).teacher=le),onChange:ee[14]||(ee[14]=le=>me(I)()),class:"filter-select"},[ee[31]||(ee[31]=m("option",{value:"all"},"All Teachers",-1)),(V(!0),j(Ne,null,He(me(l),le=>(V(),j("option",{key:le.id,value:le.id},ce(le.name||le.email||le.id),9,iG))),128))],544),[[vr,me(x).teacher]])]),m("div",oG,[ee[34]||(ee[34]=m("label",null,"Paraeducator",-1)),je(m("select",{"onUpdate:modelValue":ee[15]||(ee[15]=le=>me(x).paraeducator=le),onChange:ee[16]||(ee[16]=le=>me(I)()),class:"filter-select"},[ee[33]||(ee[33]=m("option",{value:"all"},"All Paraeducators",-1)),(V(!0),j(Ne,null,He(me(d),le=>(V(),j("option",{key:le.id,value:le.id},ce(le.name||le.email||le.id),9,lG))),128))],544),[[vr,me(x).paraeducator]])]),m("div",cG,[ee[36]||(ee[36]=m("label",null,"Plan Type",-1)),je(m("select",{"onUpdate:modelValue":ee[17]||(ee[17]=le=>me(x).plan=le),onChange:ee[18]||(ee[18]=le=>me(I)()),class:"filter-select"},ee[35]||(ee[35]=[m("option",{value:"all"},"All Plans",-1),m("option",{value:"IEP"},"IEP",-1),m("option",{value:"504"},"504",-1)]),544),[[vr,me(x).plan]])])])])):Oe("",!0),m("div",uG,[me(O)==="list"?(V(),j("div",dG,[at(v0,{students:me(D),"user-map":me(a),"current-user":me(f),"can-edit-all":me(A),"can-edit-own":me(_),"can-view-all":me(b),"can-access-testing":me(w),"can-access-testing-partial":me(C),"aide-schedule":((ve=me(f))==null?void 0:ve.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(he),onTeacherFeedback:me(Z)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):me(O)==="class"?(V(),j("div",fG,[me(M).length>0?(V(),j("div",hG,[ee[37]||(ee[37]=m("h3",{class:"group-header direct-assignment-header"},"Direct Assignment",-1)),at(v0,{students:me(M),"user-map":me(a),"current-user":me(f),"can-edit-all":me(A),"can-edit-own":me(_),"can-view-all":me(b),"can-access-testing":me(w),"can-access-testing-partial":me(C),"aide-schedule":((re=me(f))==null?void 0:re.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(he),onTeacherFeedback:me(Z)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Oe("",!0),(V(!0),j(Ne,null,He(me(U),(le,Te)=>{var we;return V(),j("div",{key:Te,class:"group-section"},[m("h3",pG,"Period "+ce(Te),1),at(v0,{students:le,"user-map":me(a),"current-user":me(f),"can-edit-all":me(A),"can-edit-own":me(_),"can-view-all":me(b),"can-access-testing":me(w),"can-access-testing-partial":me(C),"aide-schedule":((we=me(f))==null?void 0:we.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(he),onTeacherFeedback:me(Z)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])}),128))])):me(O)==="testing"?(V(),j("div",mG,[at(v0,{students:me(q),"user-map":me(a),"current-user":me(f),"can-edit-all":me(A),"can-edit-own":me(_),"can-view-all":me(b),"can-access-testing":me(w),"can-access-testing-partial":me(C),"testing-view":!0,"aide-schedule":((se=me(f))==null?void 0:se.role)==="paraeducator"?me(u):{},onEdit:me(ie),onEmail:me(he),onTeacherFeedback:me(Z)},null,8,["students","user-map","current-user","can-edit-all","can-edit-own","can-view-all","can-access-testing","can-access-testing-partial","aide-schedule","onEdit","onEmail","onTeacherFeedback"])])):Oe("",!0)]),me(H)?(V(),Tn($j,{key:1,"student-id":me(H),users:{userRoles:me(c)},onClose:ee[19]||(ee[19]=le=>H.value=null),onSaved:me(X)},null,8,["student-id","users","onSaved"])):Oe("",!0),me(L)?(V(),Tn(Zj,{key:2,student:me(v)(me(L)),"user-map":me(a),onClose:ee[20]||(ee[20]=le=>L.value=null)},null,8,["student","user-map"])):Oe("",!0),me(z)?(V(),Tn(dH,{key:3,students:me(i),"user-map":me(a),onClose:ee[21]||(ee[21]=le=>z.value=!1)},null,8,["students","user-map"])):Oe("",!0),me(K)?(V(),Tn(xk,{key:4,users:{userRoles:me(c)},onClose:ee[22]||(ee[22]=le=>K.value=!1),onSaved:me(xe)},null,8,["users","onSaved"])):Oe("",!0),me(te)?(V(),Tn(VH,{key:5,student:me(v)(me(ge)),"current-user":me(f),onClose:ee[23]||(ee[23]=le=>te.value=!1),onFormSent:me(Q)},null,8,["student","current-user","onFormSent"])):Oe("",!0)])}}},U2=At(gG,[["__scopeId","data-v-91952bff"]]),vG={class:"login-container"},xG={__name:"LoginView",setup(t){const e=Al(),r=async()=>{try{const{user:n}=await FI(es,o1),s=xt(ot,"users",n.uid);(await $r(s)).exists()||await br(s,{name:n.displayName||"",email:n.email,role:"admin"}),e.push({name:"Home"})}catch(n){console.error("Login failed:",n),alert("Login failed: "+n.message)}};return(n,s)=>(V(),j("div",vG,[s[0]||(s[0]=m("h1",null,"Case Manager Portal",-1)),s[1]||(s[1]=m("p",null,"Please sign in with your Google account:",-1)),m("button",{onClick:r,class:"primary-btn"}," Sign in with Google ")]))}},yG=At(xG,[["__scopeId","data-v-d9b5a53b"]]),EG={name:"TabBar",props:{tabs:{type:Array,required:!0,default:()=>[]},activeTab:{type:String,required:!0}},emits:["tab-change"]},_G={class:"admin-tab-bar"},bG=["onClick"];function SG(t,e,r,n,s,i){return V(),j("div",_G,[(V(!0),j(Ne,null,He(r.tabs,a=>(V(),j("button",{key:a.key,class:ut({active:r.activeTab===a.key}),onClick:o=>t.$emit("tab-change",a.key)},ce(a.label),11,bG))),128))])}const TG=At(EG,[["render",SG],["__scopeId","data-v-78ba99cd"]]),AG={name:"UserAddForm",setup(){const t=Ta(i1,"addUserWithRole"),e=_o(),r=Ws({name:"",email:"",role:"",provider:"",aeriesId:""}),n=fe(null),s=fe(""),i=fe(!1),a=fe(null),o=nm,{appSettings:l,loadAppSettings:c}=ma(),u=be(()=>{if(l&&l.value&&l.value.serviceProviders){const E=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}];return l.value.serviceProviders.map(I=>E.find(P=>P.abbreviation===I)||{name:I,abbreviation:I})}return[]}),d=(E,I=!1)=>{s.value=E,i.value=I,setTimeout(()=>{s.value="",i.value=!1},5e3)},f=async(E,I,P,D,A)=>{try{const _={name:E,email:I,role:P,provider:D,aeriesId:A,createdAt:new Date,status:"active"};return{success:!0,userId:(await mL(Ht(e,"users"),_)).id}}catch(_){throw _}},h=async(E,I,P,D,A)=>{var _,b;try{try{return await t({name:E,email:I,role:P,provider:D,aeriesId:A}),{success:!0,method:"cloud-function"}}catch(w){return w.code==="functions/already-exists"||(_=w.message)!=null&&_.includes("409")||(b=w.message)!=null&&b.includes("already exists")?(console.log(`User ${I} already exists in Firebase Auth, skipping...`),{success:!0,method:"already-exists",message:"User already exists"}):(await f(E,I,P,D,A),{success:!0,method:"firestore"})}}catch(w){return{success:!1,error:w.message}}},p=async()=>{if(!Is("addUser",5,6e4).allowed){d("Too many requests. Please wait before adding another user.",!0);return}const I=UU(r),P=LU(I);if(!P.isValid){d(`Please fix the following errors:
${P.errors.join(`
`)}`,!0);return}const D=["name","email","aeriesId"];for(const _ of D)if(I[_]){const b=pn(I[_]);if(!b.isSafe){d(`Security threat detected in ${_}: ${b.threats.join(", ")}`,!0);return}}Object.assign(r,I);const A=await h(r.name,r.email,r.role,r.provider,r.aeriesId);A.success?(d(`User ${r.name} added successfully!`),r.name="",r.email="",r.role="",r.provider="",r.aeriesId=""):d(`Error adding user: ${A.error}`,!0)},v=E=>{const I=E.target.files[0];if(I){const P=Df(I,{allowedTypes:["csv","excel"],maxSize:5242880,fieldName:"User Import File"});if(!P.isValid){d(P.error,!0),E.target.value="";return}const D=pn(I.name);if(!D.isSafe){d(`File name contains potentially dangerous content: ${D.threats.join(", ")}`,!0),E.target.value="";return}n.value=I}},g=async()=>{if(!n.value){d("Please select a file first",!0);return}const E=n.value.name.toLowerCase();if(!(E.endsWith(".csv")||E.endsWith(".xls")||E.endsWith(".xlsx"))){d("Unsupported file type. Please upload a .csv, .xls, or .xlsx file.",!0);return}d("Processing file...");try{E.endsWith(".csv")?await x(n.value):await y(n.value)}catch(I){d(`Error processing file: ${I.message}`,!0),console.error("Bulk upload error:",I)}},x=async E=>new Promise((I,P)=>{const D=new FileReader;D.onload=async A=>{try{const b=A.target.result.trim().split(/\r?\n/);if(b.length===0){P(new Error("The CSV file is empty."));return}const w=U=>{const M=[];let q="",H=!1;for(let L=0;L<U.length;L++){const z=U[L];z==='"'?H=!H:z===","&&!H?(M.push(q.trim()),q=""):q+=z}return M.push(q.trim()),M};let C=0;const T={name:0,email:1,role:2,provider:3,aeriesId:4},k=w(b[0]);k.map(U=>U.toLowerCase()).some(U=>U.includes("name")||U.includes("email")||U.includes("role"))&&(k.forEach((U,M)=>{const q=U.trim().toLowerCase();(q==="name"||q==="displayname")&&(T.name=M),q==="email"&&(T.email=M),q==="role"&&(T.role=M),(q==="provider"||q==="providertype")&&(T.provider=M),(q==="aeriesid"||q==="aeries_id"||q==="teacherid")&&(T.aeriesId=M)}),C=1);let B=0;const R=[];for(let U=C;U<b.length;U++){const M=b[U].trim();if(!M)continue;const q=w(M),H=(q[T.name]||"").trim(),L=(q[T.email]||"").trim(),z=(q[T.role]||"").trim(),K=(q[T.provider]||"").trim(),te=(q[T.aeriesId]||"").trim(),ge=H.replace(/^"|"$/g,""),ie=L.replace(/^"|"$/g,""),he=z.replace(/^"|"$/g,""),Z=K.replace(/^"|"$/g,""),Q=te.replace(/^"|"$/g,"");if(!ge||!ie||!he){R.push(`Line ${U+1}: Missing name, email, or role.`);continue}if(!k2(he)){R.push(`Line ${U+1}: Invalid role "${he}".`);continue}const xe=await h(ge,ie,he,Z,Q);xe.success?(B++,xe.method==="already-exists"&&console.log(`Line ${U+1}: User ${ie} already exists, skipped`)):R.push(`Line ${U+1}: ${xe.error}`)}let O=`${B} users added successfully.`;R.length>0&&(O+=`
${R.length} errors:
`+R.join(`
`)),d(O,R.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(_){P(new Error(`Error processing CSV file: ${_.message}`))}},D.onerror=()=>P(new Error("Failed to read the CSV file.")),D.readAsText(E)}),y=async E=>new Promise((I,P)=>{const D=new FileReader;D.onload=async A=>{try{if(typeof XLSX>"u"){P(new Error("Excel upload requires SheetJS (XLSX) library. Please include it in your page."));return}const _=new Uint8Array(A.target.result),b=XLSX.read(_,{type:"array"}),w=b.SheetNames[0],C=b.Sheets[w],T=XLSX.utils.sheet_to_json(C,{defval:""});if(T.length===0){P(new Error("The Excel file is empty or unrecognized."));return}let k=0;const N=[];for(let R=0;R<T.length;R++){const O=T[R];let U="",M="",q="",H="",L="";for(const te in O){const ge=te.toLowerCase(),ie=(""+O[te]).trim();(ge==="name"||ge==="displayname")&&!U?U=ie:ge==="email"&&!M?M=ie:ge==="role"&&!q?q=ie:(ge==="provider"||ge==="providertype")&&!H?H=ie:(ge==="aeriesid"||ge==="aeries_id"||ge==="teacherid")&&!L&&(L=ie)}const z=Object.values(O).map(te=>(""+te).trim());if(!U&&z[0]&&(U=z[0]),!M&&z[1]&&(M=z[1]),!q&&z[2]&&(q=z[2]),!H&&z[3]&&(H=z[3]),!L&&z[4]&&(L=z[4]),!U||!M||!q){N.push(`Row ${R+1}: Missing name, email, or role.`);continue}if(!k2(q)){N.push(`Row ${R+1}: Invalid role "${q}".`);continue}const K=await h(U,M,q,H,L);K.success?(k++,K.method==="already-exists"&&console.log(`Row ${R+1}: User ${M} already exists, skipped`)):N.push(`Row ${R+1}: ${K.error}`)}let B=`${k} users added successfully.`;N.length>0&&(B+=`
${N.length} errors:
`+N.join(`
`)),d(B,N.length>0),n.value=null,a.value&&(a.value.value=""),I()}catch(_){P(new Error(`Error processing Excel file: ${_.message}`))}},D.onerror=()=>P(new Error("Failed to read the Excel file.")),D.readAsArrayBuffer(E)});return tr(async()=>{await c()}),{singleUser:r,validRoles:o,providerOptions:u,addSingleUser:p,selectedFile:n,statusMessage:s,isError:i,bulkFileInput:a,handleFileSelect:v,uploadBulkUsers:g,appSettings:l}}},wG={class:"add-user-wrapper"},IG={class:"add-single"},CG=["value"],kG={key:0},DG=["value"],PG={class:"add-bulk"},RG=["disabled"];function FG(t,e,r,n,s,i){return V(),j("div",wG,[m("div",IG,[e[16]||(e[16]=m("h3",null,"Add Single User",-1)),m("form",{onSubmit:e[5]||(e[5]=Ds((...a)=>n.addSingleUser&&n.addSingleUser(...a),["prevent"])),class:"form-grid"},[m("div",null,[m("label",null,[e[8]||(e[8]=Ve(" Name: ")),je(m("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.singleUser.name=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[Ct,n.singleUser.name]])])]),m("div",null,[m("label",null,[e[9]||(e[9]=Ve(" Email: ")),je(m("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>n.singleUser.email=a),required:"",autocomplete:"off","data-lpignore":"true"},null,512),[[Ct,n.singleUser.email]])])]),m("div",null,[m("label",null,[e[11]||(e[11]=Ve(" Role: ")),je(m("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.singleUser.role=a),required:""},[e[10]||(e[10]=m("option",{value:"",disabled:""},"Select role...",-1)),(V(!0),j(Ne,null,He(n.validRoles,a=>(V(),j("option",{key:a,value:a},ce(a),9,CG))),128))],512),[[vr,n.singleUser.role]])])]),n.providerOptions.length>0?(V(),j("div",kG,[m("label",null,[e[13]||(e[13]=Ve(" Provider Type: ")),je(m("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.singleUser.provider=a)},[e[12]||(e[12]=m("option",{value:""},"None",-1)),(V(!0),j(Ne,null,He(n.providerOptions,a=>(V(),j("option",{key:a.abbreviation,value:a.abbreviation},ce(a.name)+" ("+ce(a.abbreviation)+") ",9,DG))),128))],512),[[vr,n.singleUser.provider]])])])):Oe("",!0),m("div",null,[m("label",null,[e[14]||(e[14]=Ve(" Aeries ID: ")),je(m("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.singleUser.aeriesId=a),placeholder:"Optional Aeries Teacher ID"},null,512),[[Ct,n.singleUser.aeriesId]])])]),e[15]||(e[15]=m("button",{type:"submit"},"Add User",-1))],32)]),m("div",PG,[e[17]||(e[17]=m("h3",null,"Bulk Upload Users",-1)),m("div",null,[m("input",{type:"file",ref:"bulkFileInput",accept:".csv, .xls, .xlsx",onChange:e[6]||(e[6]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),m("button",{onClick:e[7]||(e[7]=(...a)=>n.uploadBulkUsers&&n.uploadBulkUsers(...a)),disabled:!n.selectedFile}," Upload Users ",8,RG)]),e[18]||(e[18]=rs(`<h4 data-v-4932f701>Example Formatting</h4><div data-v-4932f701>File needs to be in .csv, .xls, .xlsx format, like an Excel spreadsheet.</div><div class="example-format" data-v-4932f701><p data-v-4932f701><strong data-v-4932f701>CSV Format:</strong></p><pre data-v-4932f701>Name,Email,Role,Provider,AeriesID
&quot;John Smith&quot;,&quot;john.smith@school.org&quot;,&quot;teacher&quot;,&quot;&quot;,&quot;123456&quot;
&quot;Jane Doe&quot;,&quot;jane.doe@school.org&quot;,&quot;service_provider&quot;,&quot;SLP&quot;,&quot;789012&quot;
&quot;Bob Johnson&quot;,&quot;bob.johnson@school.org&quot;,&quot;case_manager&quot;,&quot;&quot;,&quot;&quot;</pre><p data-v-4932f701><strong data-v-4932f701>Supported Roles:</strong> admin, teacher, case_manager, sped_chair, service_provider</p><p data-v-4932f701><strong data-v-4932f701>Provider Types:</strong> SLP, OT, PT, SC, MH, TR, AUD, VI, AT, DHH, O&amp;M, BIS, HN, SW</p><p data-v-4932f701><strong data-v-4932f701>Aeries ID:</strong> Optional 6-digit teacher ID from Aeries system</p></div>`,3))]),n.statusMessage?(V(),j("div",{key:0,class:ut(["status-msg",{error:n.isError}])},ce(n.statusMessage),3)):Oe("",!0)])}const OG=At(AG,[["render",FG],["__scopeId","data-v-4932f701"]]),Du=20,NG={name:"UserTable",setup(){const t=_o(),e=fe([]),r=fe(1),n=fe("name"),s=fe(""),i=fe(null),a=fe(""),o=fe(!1),l=fe(!1),c=fe([]),u=fe(null),d=nm,f=ma(),h=f.appSettings,p=f.loadAppSettings;let v=null;const g=()=>{v&&clearTimeout(v),v=setTimeout(()=>{I()},300)},x=be(()=>{var B;return Array.isArray((B=h.value)==null?void 0:B.serviceProviders)&&h.value.serviceProviders.length>0}),y=be(()=>{var B;return((B=h.value)==null?void 0:B.serviceProviders)||[]}),E=(B,R=!1)=>{a.value=B,o.value=R,setTimeout(()=>{a.value="",o.value=!1},3e3)},I=()=>{r.value=1,P()},P=async(B="first")=>{E("");const R=Ht(t,"users");let O;if(s.value&&n.value==="name"){const q=(await fr(Jr(R,Ja("name"),Wi(1e3)))).docs.map(H=>({id:H.id,...H.data()})).filter(H=>(H.name||"").toLowerCase().includes(s.value.toLowerCase()));i.value=null,e.value=q,l.value=!1;return}s.value&&n.value==="email"?O=Jr(R,Ja("email"),xs("email",">=",s.value),xs("email","<=",s.value+""),Wi(Du)):s.value?O=Jr(R,Ja("name"),xs("name",">=",s.value),xs("name","<=",s.value+""),Wi(Du)):O=Jr(R,Ja("name"),Wi(Du)),B==="next"&&c.value.length&&(O=Jr(R,Ja(n.value),dL(c.value[c.value.length-1]),Wi(Du)));const U=await fr(O);c.value=U.docs,i.value=null,e.value=c.value.map(M=>({id:M.id,...M.data()})),l.value=U.size===Du},D=B=>{i.value||(i.value=B,u.value={...e.value.find(R=>R.id===B)})},A=()=>{i.value=null,u.value=null,P()},_=(B,R,O)=>{u.value&&u.value.id===B&&(u.value[R]=O)},b=async B=>{var R,O;if(!(!u.value||u.value.id!==B))try{const U={};u.value.name!==void 0&&(U.name=((R=u.value.name)==null?void 0:R.trim())||null),u.value.title!==void 0&&(U.title=((O=u.value.title)==null?void 0:O.trim())||null),u.value.role!==void 0&&(U.role=u.value.role),u.value.provider!==void 0&&(U.provider=u.value.provider||null),await iy(xt(t,"users",B),U),E(" User updated."),i.value=null,u.value=null,P()}catch(U){console.error("Error updating user:",U),E(` Error updating user: ${U.message}`,!0)}},w=async B=>{if(confirm("Are you sure you want to delete this user?"))try{await Gc(xt(t,"users",B)),E(" User deleted."),i.value=null,u.value=null,P()}catch(R){console.error("Error deleting user:",R),E(` Error deleting user: ${R.message}`,!0)}},C=async()=>{if(prompt("Type DELETE ALL USERS to confirm:")==="DELETE ALL USERS")try{const R=await fr(Ht(t,"users"));await Promise.all(R.docs.map(O=>Gc(xt(t,"users",O.id)))),E(" All users deleted."),r.value=1,P()}catch(R){console.error("Error deleting all users:",R),E(` Error deleting all users: ${R.message}`,!0)}},T=()=>{r.value++,P("next")},k=()=>{r.value>1&&(r.value--,P())},N=B=>{var q,H;if(!B)return"";const R=((q=h.value)==null?void 0:q.serviceProviders)||[],O=((H=h.value)==null?void 0:H.customServiceProviders)||[];[...R,...O];const M=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Adapted PE",abbreviation:"APE"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf/Hard of Hearing",abbreviation:"DHH"},{name:"Vision Services",abbreviation:"VI"},{name:"Orientation & Mobility",abbreviation:"OM"},{name:"Other",abbreviation:"OTHER"}].find(L=>L.abbreviation===B);return M?`${M.name} (${M.abbreviation})`:B};return tr(async()=>{await p(),P()}),xi(()=>{v&&clearTimeout(v)}),{users:e,currentPage:r,searchType:n,searchTerm:s,activeRowId:i,statusMessage:a,isError:o,hasNextPage:l,validRoles:d,handleSearch:I,debouncedHandleSearch:g,startEdit:D,cancelEdit:A,updateUserField:_,saveUser:b,deleteUser:w,deleteAllUsers:C,loadNextPage:T,loadPreviousPage:k,getProviderLabel:N,appSettings:h,editingUser:u,providersLoaded:x,serviceProviders:y}}},MG={class:"admin-form-row"},BG={class:"user-admin-table users-table striped"},LG={key:0},UG=["data-userid"],VG=["value","disabled","onInput"],$G=["value","disabled","onInput"],jG=["disabled","value","onChange"],HG=["value"],GG={key:0},zG={key:0},WG={key:1},KG=["value"],qG={key:1},XG={class:"action-btns"},YG=["onClick"],QG=["onClick"],JG=["onClick"],ZG={class:"admin-pagination"},ez=["disabled"],tz=["disabled"];function rz(t,e,r,n,s,i){return V(),j("div",null,[e[14]||(e[14]=m("h2",null,"Edit Users",-1)),m("div",MG,[je(m("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchTerm=a),placeholder:"Search by name or email",onInput:e[1]||(e[1]=(...a)=>n.debouncedHandleSearch&&n.debouncedHandleSearch(...a))},null,544),[[Ct,n.searchTerm]]),je(m("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchType=a),onChange:e[3]||(e[3]=(...a)=>n.handleSearch&&n.handleSearch(...a))},e[9]||(e[9]=[m("option",{value:"name"},"Name",-1),m("option",{value:"email"},"Email",-1)]),544),[[vr,n.searchType]]),m("button",{onClick:e[4]||(e[4]=(...a)=>n.deleteAllUsers&&n.deleteAllUsers(...a)),style:{"margin-left":"auto",background:"#f44336",color:"#fff",padding:"0.3rem 0.8rem",border:"none","border-radius":"4px",cursor:"pointer"}}," Delete All Users ")]),m("div",{class:ut(["admin-status-msg",{error:n.isError}])},ce(n.statusMessage),3),m("div",null,[m("table",BG,[e[13]||(e[13]=m("thead",null,[m("tr",null,[m("th",null,"Name"),m("th",null,"Title"),m("th",null,"Email"),m("th",null,"Role"),m("th",null,"Provider Type"),m("th",{style:{"text-align":"center"}},"Actions")])],-1)),m("tbody",null,[n.users.length===0?(V(),j("tr",LG,e[10]||(e[10]=[m("td",{colspan:"5"},"No users found.",-1)]))):Oe("",!0),(V(!0),j(Ne,null,He(n.users,a=>(V(),j("tr",{key:a.id,class:ut({"active-row":n.activeRowId===a.id}),"data-userid":a.id},[m("td",null,[m("input",{type:"text",value:a.name||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"name",o.target.value)},null,40,VG)]),m("td",null,[m("input",{type:"text",value:a.title||"",class:"editable-input",disabled:n.activeRowId!==a.id,onInput:o=>n.updateUserField(a.id,"title",o.target.value)},null,40,$G)]),m("td",null,ce(a.email),1),m("td",null,[m("select",{class:"editable-select",disabled:n.activeRowId!==a.id,value:a.role,onChange:o=>n.updateUserField(a.id,"role",o.target.value)},[(V(!0),j(Ne,null,He(n.validRoles,o=>(V(),j("option",{key:o,value:o},ce(o.replace(/_/g," ")),9,HG))),128))],40,jG)]),n.providersLoaded?(V(),j("td",GG,[n.activeRowId!==a.id?(V(),j("span",zG,ce(a.provider||""),1)):(V(),j("span",WG,[je(m("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>n.editingUser.provider=o)},[e[11]||(e[11]=m("option",{value:""},"None",-1)),(V(!0),j(Ne,null,He(n.serviceProviders,o=>(V(),j("option",{key:o,value:o},ce(o),9,KG))),128))],512),[[vr,n.editingUser.provider]])]))])):(V(),j("td",qG,e[12]||(e[12]=[m("span",null,"Loading...",-1)]))),m("td",XG,[n.activeRowId!==a.id?(V(),j("button",{key:0,class:"edit-btn",onClick:o=>n.startEdit(a.id)},"  ",8,YG)):(V(),j(Ne,{key:1},[m("button",{class:"save-btn",onClick:o=>n.saveUser(a.id)},"",8,QG),m("button",{class:"cancel-btn",onClick:e[6]||(e[6]=(...o)=>n.cancelEdit&&n.cancelEdit(...o))},""),m("button",{class:"delete-btn",onClick:o=>n.deleteUser(a.id)},"",8,JG)],64))])],10,UG))),128))])])]),m("div",ZG,[m("button",{onClick:e[7]||(e[7]=(...a)=>n.loadPreviousPage&&n.loadPreviousPage(...a)),disabled:n.currentPage===1}," Previous ",8,ez),m("span",null,"Page "+ce(n.currentPage),1),m("button",{onClick:e[8]||(e[8]=(...a)=>n.loadNextPage&&n.loadNextPage(...a)),disabled:!n.hasNextPage}," Next ",8,tz)])])}const nz=At(NG,[["render",rz],["__scopeId","data-v-496615f3"]]),sz=[rt.VIEW_USERS,rt.EDIT_USER,rt.DELETE_USER,rt.MANAGE_SUBJECTS,rt.MANAGE_ROLES,rt.VIEW_STUDENTS,rt.EDIT_STUDENT_CM,rt.EDIT_STUDENT_ALL],V2=[rt.EDIT_USER,rt.DELETE_USER,rt.MANAGE_SUBJECTS,rt.MANAGE_ROLES,rt.EDIT_STUDENT_CM,rt.EDIT_STUDENT_ALL],az={[rt.VIEW_USERS]:"View Users",[rt.EDIT_USER]:"Edit User",[rt.DELETE_USER]:"Delete User",[rt.MANAGE_SUBJECTS]:"Manage Subjects",[rt.MANAGE_ROLES]:"Manage Roles",[rt.VIEW_STUDENTS]:"View Students",[rt.EDIT_STUDENT_CM]:"Edit Students (Own Caseload)",[rt.EDIT_STUDENT_ALL]:"Edit All Students"},iz={name:"PermissionsMatrix",setup(){const t=_o(),e="config/permissions_matrix",r=Ws({}),n=fe(""),s=fe(!1),i=nm,a=sz,o=az,l=(v,g=!1)=>{n.value=v,s.value=g,setTimeout(()=>{n.value="",s.value=!1},3e3)},c=async()=>{try{const v=xt(t,e),g=await $r(v);if(g.exists()){const x=g.data();Object.assign(r,x)}else Object.assign(r,uc)}catch(v){console.error("Error loading permissions matrix:",v),Object.assign(r,uc)}},u=(v,g,x)=>{if(V2.includes(g)){console.log(`Permission ${g} is read-only and cannot be changed`);return}if(r[v]||(r[v]=[]),x)r[v].includes(g)||r[v].push(g);else{const y=r[v].indexOf(g);y>-1&&r[v].splice(y,1)}},d=v=>V2.includes(v),f=v=>r[v]?r[v].includes(rt.TESTING_ALL)?"all":r[v].includes(rt.TESTING_PARTIAL)?"partial":"none":"none",h=(v,g)=>{r[v]||(r[v]=[]),[rt.TESTING,rt.TESTING_ALL,rt.TESTING_PARTIAL].forEach(y=>{const E=r[v].indexOf(y);E>-1&&r[v].splice(E,1)}),g==="all"?r[v].push(rt.TESTING_ALL):g==="partial"&&r[v].push(rt.TESTING_PARTIAL)},p=async()=>{try{await br(xt(t,e),r),l(" Permissions updated.",!1)}catch(v){console.error("Error saving permissions:",v),l(` Error saving: ${v.message}`,!0)}};return tr(()=>{c()}),{matrix:r,statusMessage:n,isError:s,validRoles:i,actionList:a,actionLabels:o,updatePermission:u,isReadOnlyPermission:d,getTestingLevel:f,updateTestingPermission:h,savePermissions:p}}},oz={class:"permissions-table-admin"},lz={style:{"font-weight":"bold"}},cz=["data-role","data-action","checked","disabled","onChange"],uz={key:0,class:"read-only-indicator",title:"This permission matches Firebase security rules and cannot be changed"},dz={style:{"text-align":"center"}},fz=["value","onChange"];function hz(t,e,r,n,s,i){return V(),j("div",null,[e[4]||(e[4]=m("h3",null,"Role Permissions Matrix",-1)),e[5]||(e[5]=m("div",{class:"permissions-note"},[m("p",null,[m("strong",null,"Note:"),Ve(" Permissions marked with  are read-only and match Firebase security rules. These cannot be changed to ensure database security consistency. Only view permissions and testing access can be modified.")])],-1)),m("table",oz,[m("thead",null,[m("tr",null,[e[1]||(e[1]=m("th",{style:{"min-width":"120px"}},"Role",-1)),(V(!0),j(Ne,null,He(n.actionList,a=>(V(),j("th",{key:a,style:{"min-width":"110px"}},ce(n.actionLabels[a]),1))),128)),e[2]||(e[2]=m("th",{style:{"min-width":"120px"}},"Testing Access",-1))])]),m("tbody",null,[(V(!0),j(Ne,null,He(n.validRoles,a=>(V(),j("tr",{key:a},[m("td",lz,ce(a),1),(V(!0),j(Ne,null,He(n.actionList,o=>{var l;return V(),j("td",{key:o,style:{"text-align":"center"}},[m("input",{type:"checkbox","data-role":a,"data-action":o,checked:(l=n.matrix[a])==null?void 0:l.includes(o),disabled:n.isReadOnlyPermission(o),class:ut({"read-only":n.isReadOnlyPermission(o)}),onChange:c=>n.updatePermission(a,o,c.target.checked)},null,42,cz),n.isReadOnlyPermission(o)?(V(),j("span",uz,"")):Oe("",!0)])}),128)),m("td",dz,[m("select",{value:n.getTestingLevel(a),onChange:o=>n.updateTestingPermission(a,o.target.value),style:{width:"100px",padding:"2px"}},e[3]||(e[3]=[m("option",{value:"none"},"None",-1),m("option",{value:"partial"},"Partial",-1),m("option",{value:"all"},"All",-1)]),40,fz)])]))),128))])]),m("button",{onClick:e[0]||(e[0]=(...a)=>n.savePermissions&&n.savePermissions(...a)),style:{padding:"0.5em 1.4em","font-size":"1.08em"}}," Save "),m("span",{style:bn({marginLeft:"1em",fontSize:"1em",color:n.isError?"#b42c2c":"#267838"})},ce(n.statusMessage),5)])}const yk=At(iz,[["render",hz],["__scopeId","data-v-0d793d95"]]),pz={class:"admin-students"},mz={class:"admin-form-row"},gz={class:"search-container"},vz={class:"user-admin-table students-table striped"},xz={key:0},yz=["data-id"],Ez=["value","disabled","onInput"],_z=["value","disabled","onInput"],bz=["value","disabled","onInput"],Sz=["value","disabled","onInput"],Tz={class:"action-btns"},Az=["onClick"],wz=["onClick"],Iz=["onClick"],Cz={class:"admin-pagination"},kz=["disabled"],Dz=["disabled"],Jm=50,Pz={__name:"AdminStudents",setup(t){const e=_o(),{students:r,fetchStudents:n,updateStudent:s,deleteStudent:i}=Ua(),a=fe(""),o=fe([]),l=fe(1),c=fe(null),u=fe({}),d=fe(""),f=fe(!1);let h=null;const p=()=>{h&&clearTimeout(h),h=setTimeout(()=>{y()},300)},v=be(()=>{const T=(l.value-1)*Jm,k=T+Jm;return o.value.slice(T,k)}),g=be(()=>Math.ceil(o.value.length/Jm)),x=(T,k=!1)=>{d.value=T,f.value=k,setTimeout(()=>{d.value="",f.value=!1},5e3)},y=()=>{if(!Is("studentSearch",20,6e4).allowed){x("Too many search requests. Please wait before searching again.",!0);return}const k=gr(a.value,{trim:!0,maxLength:100,removeDangerous:!0}),N=pn(k);if(!N.isSafe){x(`Security threat detected in search: ${N.threats.join(", ")}`,!0),a.value=k;return}k!==a.value&&(a.value=k);const B=k.toLowerCase();B?o.value=r.value.filter(R=>{const O=ct(R,"firstName")||"",U=ct(R,"lastName")||"";return`${O} ${U}`.toLowerCase().includes(B)}):o.value=r.value,l.value=1},E=T=>{if(c.value)return;const k=r.value.find(N=>N.id===T);k&&(c.value=T,u.value={...k})},I=()=>{c.value=null,u.value={}},P=(T,k,N)=>{if(u.value.id===T){let B=N;if(typeof N=="string"){B=gr(N,{trim:!0,maxLength:k==="caseManagerId"?50:100,removeDangerous:!0});const R=pn(B);if(!R.isSafe){x(`Security threat detected in ${k}: ${R.threats.join(", ")}`,!0);return}const O=sm(B,{max:k==="caseManagerId"?50:100,fieldName:k});if(!O.isValid){x(O.error,!0);return}}u.value[k]=B}},D=async T=>{try{if(!Is("saveStudent",10,6e4).allowed){x("Too many save requests. Please wait before saving again.",!0);return}const N={};if(Object.keys(u.value).forEach(U=>{U!=="id"&&u.value[U]!==r.value.find(M=>M.id===T)[U]&&(N[U]=u.value[U])}),Object.keys(N).length===0){I();return}const B=mk(N),R=pk(B,{isNew:!1});if(!R.isValid){x(`Validation failed: ${R.errors.join(", ")}`,!0);return}Object.assign(u.value,B),await s(T,B);const O=r.value.findIndex(U=>U.id===T);O!==-1&&(r.value[O]={...r.value[O],...B}),x(" Student updated.")}catch(k){x(" Update failed.",!0),console.error("Update error:",k)}finally{I()}},A=async T=>{if(!Is("deleteStudent",5,3e5).allowed){x("Too many delete requests. Please wait before deleting again.",!0);return}if(confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await i(T),x(" Student deleted.");const N=r.value.findIndex(B=>B.id===T);N!==-1&&r.value.splice(N,1),y()}catch(N){x(" Delete failed.",!0),console.error("Delete error:",N)}},_=async()=>{if(!Is("deleteAllStudents",1,36e5).allowed){x("Delete all operation rate limited. Please wait before trying again.",!0);return}const k=`Are you sure you want to delete ALL ${r.value.length} students? 

This action cannot be undone and will permanently remove all student data.

Type "DELETE ALL STUDENTS" to confirm:`;if(prompt(k)!=="DELETE ALL STUDENTS"){x("Delete all operation cancelled.",!1);return}try{x("Deleting all students...");const B=N4(e);let R=0;for(const O of r.value)B.delete(xt(e,"students",O.id)),R++,R>=500&&(await B.commit(),R=0);R>0&&await B.commit(),r.value=[],o.value=[],x(" All students deleted.")}catch(B){x(" Failed to delete all students.",!0),console.error("Delete all error:",B)}},b=T=>{if(!T)return"N/A";try{if(T&&typeof T.toDate=="function")return T.toDate().toLocaleDateString();const k=new Date(T);return isNaN(k.getTime())?"Invalid Date":k.toLocaleDateString()}catch{return"Invalid Date"}},w=()=>{l.value<g.value&&l.value++},C=()=>{l.value>1&&l.value--};return tr(async()=>{try{await n(),o.value=r.value}catch(T){x("Failed to load students.",!0),console.error("Load students error:",T)}}),xi(()=>{h&&clearTimeout(h)}),(T,k)=>(V(),j("div",pz,[k[3]||(k[3]=m("h2",null,"Edit Students",-1)),m("div",mz,[m("div",gz,[je(m("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=N=>a.value=N),onInput:p,placeholder:"Search by name",class:"search-input"},null,544),[[Ct,a.value]]),m("button",{onClick:_,class:"delete-all-btn"},"Delete All Students")])]),d.value?(V(),j("div",{key:0,class:ut(["admin-status-msg",{error:f.value}])},ce(d.value),3)):Oe("",!0),m("table",vz,[k[2]||(k[2]=m("thead",null,[m("tr",null,[m("th",null,"ID"),m("th",null,"First Name"),m("th",null,"Last Name"),m("th",null,"Grade"),m("th",null,"Case Manager"),m("th",null,"Date Added"),m("th",null,"Actions")])],-1)),m("tbody",null,[v.value.length?Oe("",!0):(V(),j("tr",xz,k[1]||(k[1]=[m("td",{colspan:"7"},"No students found.",-1)]))),(V(!0),j(Ne,null,He(v.value,N=>(V(),j("tr",{key:N.id,class:ut({"active-row":c.value===N.id}),"data-id":N.id},[m("td",null,ce(N.id),1),m("td",null,[m("input",{class:"editable-input","data-field":"first_name",value:me(ct)(N,"firstName")||"",disabled:c.value!==N.id,onInput:B=>P(N.id,"first_name",B.target.value)},null,40,Ez)]),m("td",null,[m("input",{class:"editable-input","data-field":"last_name",value:me(ct)(N,"lastName")||"",disabled:c.value!==N.id,onInput:B=>P(N.id,"last_name",B.target.value)},null,40,_z)]),m("td",null,[m("input",{class:"editable-input","data-field":"grade",value:me(ct)(N,"grade")||"",disabled:c.value!==N.id,onInput:B=>P(N.id,"grade",B.target.value)},null,40,bz)]),m("td",null,[m("input",{class:"editable-input","data-field":"caseManagerId",value:N.caseManagerId||"",disabled:c.value!==N.id,onInput:B=>P(N.id,"caseManagerId",B.target.value)},null,40,Sz)]),m("td",null,ce(b(N.created_at)),1),m("td",Tz,[c.value===N.id?(V(),j(Ne,{key:0},[m("button",{onClick:B=>D(N.id),class:"btn-save",title:"Save"},"",8,Az),m("button",{onClick:I,class:"btn-cancel",title:"Cancel"},""),m("button",{onClick:B=>A(N.id),class:"btn-delete",title:"Delete"},"",8,wz)],64)):(V(),j("button",{key:1,onClick:B=>E(N.id),class:"btn-edit",title:"Edit"},"",8,Iz))])],10,yz))),128))])]),m("div",Cz,[m("button",{onClick:C,disabled:l.value===1,class:"admin-btn"}," Prev ",8,kz),m("span",null,"Page "+ce(l.value)+" of "+ce(g.value),1),m("button",{onClick:w,disabled:l.value===g.value,class:"admin-btn"}," Next ",8,Dz)])]))}},Rz=At(Pz,[["__scopeId","data-v-d19751dc"]]),Fz={class:"bulk-importer"},Oz={key:0,class:"step-container"},Nz={class:"file-upload-section"},Mz={class:"file-input-wrapper"},Bz={for:"csv-file",class:"file-label"},Lz={class:"file-text"},Uz={key:0,class:"error-message"},Vz={key:1,class:"file-info"},$z={key:0},jz={class:"step-actions"},Hz=["disabled"],Gz={key:1,class:"step-container"},zz={class:"field-mapping-section"},Wz={class:"mapping-grid"},Kz={class:"csv-column"},qz={class:"app-field"},Xz=["onUpdate:modelValue"],Yz={class:"sample-data"},Qz={key:0,class:"validation-errors"},Jz={class:"step-actions"},Zz=["disabled"],eW={key:2,class:"step-container"},tW={class:"preview-section"},rW={class:"preview-stats"},nW={class:"stat-item"},sW={class:"stat-value"},aW={class:"stat-item"},iW={class:"stat-value valid"},oW={class:"stat-item"},lW={class:"stat-value invalid"},cW={class:"preview-table-container"},uW={class:"preview-table"},dW={key:0,class:"error-list"},fW={key:1,class:"no-errors"},hW={class:"import-options"},pW={class:"options-grid"},mW={class:"option-item"},gW={class:"option-item"},vW={class:"option-item"},xW={class:"step-actions"},yW=["disabled"],EW={key:3,class:"step-container"},_W={class:"results-section"},bW={class:"results-stats"},SW={class:"stat-item success"},TW={class:"stat-value"},AW={class:"stat-item error"},wW={class:"stat-value"},IW={class:"stat-item"},CW={class:"stat-value"},kW={key:0,class:"import-errors"},DW={class:"results-actions"},PW={key:4,class:"loading-overlay"},RW={class:"loading-content"},FW={class:"progress-bar"},OW={__name:"StudentBulkImporter",emits:["close","imported"],setup(t,{emit:e}){const r=e,{users:n,fetchUsers:s}=pa(),i=fe(1),a=fe(""),o=fe(""),l=fe([]),c=fe([]),u=fe({}),d=fe(""),f=fe([]),h=fe([]),p=fe("valid-only"),v=fe(!1),g=fe(!1),x=fe(0),y=fe({successful:0,failed:0,errors:[],processingTime:0}),E=fe(null),I=be(()=>{const Z=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Q=Object.values(u.value).filter(X=>X),xe=Q.includes("app.studentData.ssid");return Z.every(X=>Q.includes(X))&&xe}),P=be(()=>h.value.filter(Z=>Z.errors.length===0)),D=be(()=>h.value.filter(Z=>Z.errors.length>0));tr(async()=>{console.log(" StudentBulkImporter component mounted!");try{await s(),console.log(" Users loaded successfully:",Object.keys(n.value).length,"users"),console.log("First few users:",Object.values(n.value).slice(0,3).map(Z=>({id:Z.id,name:Z.name,role:Z.role})))}catch(Z){console.error(" Failed to load users:",Z)}});const A=async Z=>{const Q=Z.target.files[0];if(Q){if(!Q.name.toLowerCase().endsWith(".csv")&&Q.type!=="text/csv"){d.value="File must be a CSV file (.csv extension)";return}if(Q.size>10*1024*1024){d.value="File must be smaller than 10MB";return}d.value="",a.value=Q.name,o.value=q(Q.size);try{const xe=await Q.text();_(xe)}catch(xe){d.value="Failed to read CSV file: "+xe.message}}},_=Z=>{try{const Q=Z.trim().split(`
`);if(Q.length<2)throw new Error("CSV must have at least a header row and one data row");const xe=Q[0].split(",").map(W=>W.trim().replace(/"/g,""));c.value=xe;const X=[];for(let W=1;W<Q.length;W++){const Y={};let ee="",ve=!1,re=0;for(let se=0;se<Q[W].length;se++){const le=Q[W][se];le==='"'?ve=!ve:le===","&&!ve?(Y[xe[re]]=ee.trim().replace(/^"|"$/g,""),ee="",re++):ee+=le}re<xe.length&&(Y[xe[re]]=ee.trim().replace(/^"|"$/g,"")),X.push(Y)}l.value=X,console.log("Parsed CSV data:",X.length,"records")}catch(Q){d.value="Failed to parse CSV: "+Q.message}},b=()=>{const Z={SSID:"app.studentData.ssid",FirstName:"app.studentData.firstName",LastName:"app.studentData.lastName",Grade:"app.studentData.grade",Plan:"app.studentData.plan",CaseManagerId:"app.studentData.caseManagerId",ReviewDate:"app.dates.reviewDate",ReevalDate:"app.dates.reevalDate",MeetingDate:"app.dates.meetingDate",Period1Teacher:"app.schedule.periods.1",Period2Teacher:"app.schedule.periods.2",Period3Teacher:"app.schedule.periods.3",Period4Teacher:"app.schedule.periods.4",Period5Teacher:"app.schedule.periods.5",Period6Teacher:"app.schedule.periods.6",PeriodSHTeacher:"app.schedule.periods.SH",ClassServices:"app.schedule.classServices",SpeechProvider:"app.providers.speechId",OTProvider:"app.providers.otId",PTProvider:"app.providers.ptId",ATProvider:"app.providers.atId",Audiologist:"app.providers.audId",BISProvider:"app.providers.bisId",DHHProvider:"app.providers.dhhId",HNProvider:"app.providers.hnId",MHProvider:"app.providers.mhId",OMProvider:"app.providers.omId",SCProvider:"app.providers.scId",SWProvider:"app.providers.swId",TRProvider:"app.providers.trId",VIProvider:"app.providers.viId",Flag1:"app.flags.flag1",Flag2:"app.flags.flag2",BIPPdfUrl:"app.documents.bipPdfUrl",AtAGlancePdfUrl:"app.documents.ataglancePdfUrl",Assessment:"app.accommodations.assessment",Instruction:"app.accommodations.instruction"};c.value.forEach(Q=>{Z[Q]&&(u.value[Q]=Z[Q])})},w=()=>{u.value={}},C=Z=>{const Q=l.value[0];if(!Q)return"";const xe=Q[Z];return xe?Z==="ClassServices"&&xe.includes(",")?`"${xe}"`:xe:""},T=()=>{f.value=[];const Z=["app.studentData.firstName","app.studentData.lastName","app.studentData.grade"],Q=Object.values(u.value).filter(W=>W),xe=Q.includes("app.studentData.ssid");Z.forEach(W=>{if(!Q.includes(W)){const Y=W.split(".").pop();f.value.push(`Required field "${Y}" is not mapped`)}}),xe||f.value.push("SSID (State Student ID) must be mapped to app.studentData.ssid");const X=Q.filter((W,Y)=>Q.indexOf(W)!==Y);X.length>0&&f.value.push(`Duplicate field mappings: ${X.join(", ")}`)},k=()=>{h.value=l.value.map(Z=>{const Q=N(Z),xe=R(Q);return console.log("Row mapping:",{original:Z,mapped:Q,errors:xe}),{data:Q,errors:xe}})},N=Z=>{const Q={app:{studentData:{},dates:{},providers:{},accommodations:{},flags:{},schedule:{periods:{},classServices:[]},documents:{}}};return Object.entries(u.value).forEach(([xe,X])=>{if(!X||!Z[xe])return;let W=Z[xe].trim();if(!W)return;if(X==="app.schedule.classServices"){W.startsWith('"')&&W.endsWith('"')&&(W=W.slice(1,-1)),Q.app.schedule.classServices=W.split(",").map(ve=>ve.trim()).filter(Boolean);return}if(X.startsWith("app.schedule.periods.")){const ve=X.split(".").pop(),re=W.trim();if(re){const se=K(re);console.log(`Mapping Period ${ve} teacher:`,re,"",se),Q.app.schedule.periods[ve]=se}return}if(X.startsWith("app.providers.")){const ve=X.split(".").pop(),re=W.trim();if(re){const se=te(re);console.log(`Mapping ${ve} provider:`,re,"",se),Q.app.providers[ve]=se}return}if(X==="app.accommodations.assessment"||X==="app.accommodations.instruction"){const ve=X.split(".").pop();Q.app.accommodations[ve]=W;return}if(X.startsWith("app.flags.")){const ve=X.split(".").pop();Q.app.flags[ve]=["true","1","yes","y"].includes(W.toLowerCase());return}if(X.includes("Date")){const[ve,re,se]=X.split(".");Q[ve][re]||(Q[ve][re]={}),Q[ve][re][se]=U(W);return}const Y=X.split(".");let ee=Q;for(let ve=0;ve<Y.length-1;ve++){const re=Y[ve];ee[re]||(ee[re]={}),ee=ee[re]}ee[Y[Y.length-1]]=W}),Q},B=Z=>{const Q=Object.values(n.value).find(xe=>xe.id===Z||xe.name===Z||xe.email===Z||xe.aeriesId===Z);return console.log("Mapping case manager:",Z,"to Firebase ID:",Q==null?void 0:Q.id),Q?Q.id:Z},R=Z=>{var X,W,Y,ee,ve,re,se,le,Te,we,Se,ze,Ie,$e,Be,We,Ke,Ee;const Q=[],xe=Z.ssid||((W=(X=Z.app)==null?void 0:X.studentData)==null?void 0:W.ssid);return xe||Q.push("SSID is required (either top-level or in app.studentData)"),(ee=(Y=Z.app)==null?void 0:Y.studentData)!=null&&ee.firstName||Q.push("First name is required"),(re=(ve=Z.app)==null?void 0:ve.studentData)!=null&&re.lastName||Q.push("Last name is required"),(le=(se=Z.app)==null?void 0:se.studentData)!=null&&le.grade||Q.push("Grade is required"),xe&&!/^\d{9,10}$/.test(xe)&&Q.push("SSID must be 9-10 digits"),(we=(Te=Z.app)==null?void 0:Te.studentData)!=null&&we.grade&&!["K","1","2","3","4","5","6","7","8","9","10","11","12"].includes(Z.app.studentData.grade)&&Q.push("Grade must be K-12"),(ze=(Se=Z.app)==null?void 0:Se.studentData)!=null&&ze.plan&&!["IEP","504"].includes(Z.app.studentData.plan)&&Q.push("Plan must be IEP or 504"),($e=(Ie=Z.app)==null?void 0:Ie.dates)!=null&&$e.reviewDate&&!O(Z.app.dates.reviewDate)&&Q.push("Invalid review date format (use YYYY-MM-DD)"),(We=(Be=Z.app)==null?void 0:Be.dates)!=null&&We.reevalDate&&!O(Z.app.dates.reevalDate)&&Q.push("Invalid reevaluation date format (use YYYY-MM-DD)"),(Ee=(Ke=Z.app)==null?void 0:Ke.dates)!=null&&Ee.meetingDate&&!O(Z.app.dates.meetingDate)&&Q.push("Invalid meeting date format (use YYYY-MM-DD)"),Q},O=Z=>{if(!Z)return!0;const Q=new Date(Z);return!isNaN(Q.getTime())&&Z.match(/^\d{4}-\d{2}-\d{2}$/)},U=Z=>{if(!Z)return"";try{const Q=new Date(Z);return isNaN(Q.getTime())?"":Q.toISOString().split("T")[0]}catch{return""}},M=Z=>{var X,W,Y,ee;const Q=((W=(X=Z.app)==null?void 0:X.studentData)==null?void 0:W.firstName)||"",xe=((ee=(Y=Z.app)==null?void 0:Y.studentData)==null?void 0:ee.lastName)||"";return`${Q} ${xe}`.trim()||"Missing Name"},q=Z=>{if(Z===0)return"0 Bytes";const Q=1024,xe=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(Z)/Math.log(Q));return parseFloat((Z/Math.pow(Q,X)).toFixed(2))+" "+xe[X]},H=()=>{if(i.value===2){if(T(),f.value.length>0)return;k()}i.value++},L=()=>{i.value--},z=async()=>{g.value=!0,x.value=0;const Z=Date.now(),Q=p.value==="valid-only"?P.value:h.value;let xe=0,X=0;const W=[];try{for(let Y=0;Y<Q.length;Y++){const ee=Q[Y];try{await ie(ee.data),xe++}catch(ve){X++,W.push(`Row ${Y+1}: ${ve.message}`)}x.value=Math.round((Y+1)/Q.length*100)}y.value={successful:xe,failed:X,errors:W,processingTime:Date.now()-Z},i.value=4,r("imported",{successful:xe,failed:X})}catch(Y){console.error("Import failed:",Y),W.push("Import process failed: "+Y.message),y.value={successful:xe,failed:X,errors:W,processingTime:Date.now()-Z},i.value=4}finally{g.value=!1}},K=Z=>{if(!Z)return"";console.log(" Mapping teacher ID:",Z),console.log(" Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Q=Object.values(n.value).find(X=>{const W=String(X.aeriesId)===String(Z);return W&&console.log(" Found exact Aeries ID match:",{teacherId:Z,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),W});if(Q)return console.log(" Using Aeries ID match:",Z,"",Q.id,"(",Q.name,")"),Q.id;const xe=Object.values(n.value).find(X=>X.id===Z);return xe?(console.log(" Using Firebase ID match:",Z,"",xe.id,"(",xe.name,")"),xe.id):(console.warn(" No user found for teacher ID:",Z),Z)},te=Z=>{if(!Z)return"";console.log(" Mapping provider ID:",Z),console.log(" Available users:",Object.values(n.value).map(X=>({name:X.name,aeriesId:X.aeriesId,id:X.id})));const Q=Object.values(n.value).find(X=>{const W=String(X.aeriesId)===String(Z);return W&&console.log(" Found exact Aeries ID match:",{providerId:Z,user:{name:X.name,aeriesId:X.aeriesId,id:X.id}}),W});if(Q)return console.log(" Using Aeries ID match:",Z,"",Q.id,"(",Q.name,")"),Q.id;const xe=Object.values(n.value).find(X=>X.id===Z);return xe?(console.log(" Using Firebase ID match:",Z,"",xe.id,"(",xe.name,")"),xe.id):(console.warn(" No user found for provider ID:",Z),Z)},ge=Z=>{try{return Z.app&&Z.app.studentData&&Z.app.studentData.ssid&&Z.app.studentData.firstName&&Z.app.studentData.lastName&&Z.app.studentData.grade&&Z.app.schedule&&Array.isArray(Z.app.schedule.classServices)}catch{return!1}},ie=async Z=>{try{const Q=Z.app.studentData.ssid,xe=Ht(ot,"students"),X=Jr(xe,xs("app.studentData.ssid","==",Q)),W=await fr(X);if(!W.empty&&!v.value)throw new Error(`Student with SSID ${Q} already exists`);const Y={createdAt:fl(),updatedAt:fl(),app:{studentData:{firstName:Z.app.studentData.firstName||"",lastName:Z.app.studentData.lastName||"",grade:Z.app.studentData.grade||"",plan:Z.app.studentData.plan||"",caseManagerId:B(Z.app.studentData.caseManagerId)||"",ssid:Q},dates:{reviewDate:Z.app.dates.reviewDate||"",reevalDate:Z.app.dates.reevalDate||"",meetingDate:Z.app.dates.meetingDate||""},schedule:{periods:Z.app.schedule.periods||{1:"",2:"",3:"",4:"",5:"",6:"",SH:""},classServices:Array.isArray(Z.app.schedule.classServices)?Z.app.schedule.classServices:[]},providers:Z.app.providers||{speechId:"",otId:"",ptId:"",atId:"",audId:"",bisId:"",dhhId:"",hnId:"",mhId:"",omId:"",scId:"",swId:"",trId:"",viId:""},accommodations:{assessment:Z.app.accommodations.assessment||"",instruction:Z.app.accommodations.instruction||""},flags:{flag1:!!Z.app.flags.flag1,flag2:!!Z.app.flags.flag2},documents:{bipPdfUrl:Z.app.documents.bipPdfUrl||null,ataglancePdfUrl:Z.app.documents.ataglancePdfUrl||null}}};if(console.log("Saving student data:",{ssid:Y.app.studentData.ssid,schedule:Y.app.schedule.periods,providers:Y.app.providers}),!ge(Y))throw new Error("Invalid student data structure");if(!W.empty&&v.value){const ee=W.docs[0];await br(xt(ot,"students",ee.id),Y,{merge:!0})}else{const ee=xt(Ht(ot,"students"));await br(ee,Y)}}catch(Q){throw console.error("Error importing student:",Q),Q}},he=()=>{i.value=1,a.value="",o.value="",l.value=[],c.value=[],u.value={},d.value="",f.value=[],h.value=[],y.value={successful:0,failed:0,errors:[],processingTime:0},E.value&&(E.value.value="")};return(Z,Q)=>(V(),j("div",Fz,[Q[30]||(Q[30]=m("div",{style:{background:"#e8f5e8",border:"2px solid #4caf50",padding:"10px","margin-bottom":"20px","border-radius":"4px","text-align":"center"}},[m("strong",null," StudentBulkImporter Component Loaded Successfully")],-1)),Q[31]||(Q[31]=m("div",{class:"importer-header"},[m("h2",null,"Add Students - Bulk Import"),m("p",{class:"description"}," Import multiple students from a CSV file. The system will map CSV fields to the app's database structure and allow you to preview and validate the data before importing. ")],-1)),i.value===1?(V(),j("div",Oz,[Q[8]||(Q[8]=m("div",{class:"step-header"},[m("h3",null,"Step 1: Upload CSV File"),m("p",null,"Select a CSV file containing student data. The first row should contain column headers.")],-1)),m("div",Nz,[m("div",Mz,[m("input",{type:"file",ref_key:"fileInput",ref:E,onChange:A,accept:".csv",class:"file-input",id:"csv-file"},null,544),m("label",Bz,[Q[4]||(Q[4]=m("span",{class:"file-icon"},"",-1)),m("span",Lz,ce(a.value||"Choose CSV File"),1)])]),d.value?(V(),j("div",Uz,ce(d.value),1)):Oe("",!0),a.value?(V(),j("div",Vz,[m("p",null,[Q[5]||(Q[5]=m("strong",null,"File:",-1)),Ve(" "+ce(a.value),1)]),m("p",null,[Q[6]||(Q[6]=m("strong",null,"Size:",-1)),Ve(" "+ce(o.value),1)]),l.value.length>0?(V(),j("p",$z,[Q[7]||(Q[7]=m("strong",null,"Records:",-1)),Ve(" "+ce(l.value.length),1)])):Oe("",!0)])):Oe("",!0)]),Q[9]||(Q[9]=rs('<div class="sample-format" data-v-494a4282><h4 data-v-494a4282>Expected CSV Format:</h4><div class="format-example" data-v-494a4282><code data-v-494a4282> SSID,FirstName,LastName,Grade,Plan,CaseManagerId,ReviewDate,ReevalDate,MeetingDate,Period1Teacher,Period2Teacher,Period3Teacher,Period4Teacher,Period5Teacher,Period6Teacher,SHTeacher,ClassServices,SpeechProvider,OTProvider,PTProvider,ATProvider,Audiologist,BISProvider,DHHProvider,HNProvider,MHProvider,OMProvider,SCProvider,SWProvider,TRProvider,VIProvider,Flag1,Flag2,BIPPdfUrl,AtAGlancePdfUrl,Assessment,Instruction<br data-v-494a4282> 123456789,John,Doe,9,IEP,user003,2025-07-15,2025-12-15,2025-07-10,user007,user008,user009,user010,user011,user012,user013,&quot;SDC: English,RSP: Math&quot;,user020,user021,user022,user023,user024,user025,user026,user027,user028,user029,user030,user031,user032,user033,true,false,https://example.com/bip.pdf,https://example.com/ataglance.pdf,&quot;Allow for test re-takes if the score is below average...&quot;,Divide larger projects or assignments into manageable parts... </code></div><p class="format-note" data-v-494a4282><strong data-v-494a4282>Required fields:</strong> SSID, FirstName, LastName, Grade<br data-v-494a4282><strong data-v-494a4282>App Structure:</strong> All fields map to the app data structure in your database<br data-v-494a4282><strong data-v-494a4282>Schedule fields:</strong> Period1Teacher through Period6Teacher and SHTeacher (Firebase user IDs like user001, user002, etc.)<br data-v-494a4282><strong data-v-494a4282>Provider fields:</strong> All service provider fields (Firebase user IDs like user020, user021, etc.)<br data-v-494a4282><strong data-v-494a4282>Class Services:</strong> Comma-separated list (e.g., &quot;SDC: English,RSP: Math,Co-teach: Science&quot;)<br data-v-494a4282><strong data-v-494a4282>Dates:</strong> Use YYYY-MM-DD format (e.g., 2025-07-15)<br data-v-494a4282><strong data-v-494a4282>Flags:</strong> Use true/false or 1/0<br data-v-494a4282><strong data-v-494a4282>Accommodations:</strong> Text fields for assessment and instruction<br data-v-494a4282><strong data-v-494a4282>Note:</strong> Teacher and provider IDs will be automatically mapped from names, emails, or Aeries IDs if user lookup is available </p></div>',1)),m("div",jz,[m("button",{onClick:H,disabled:!l.value.length,class:"btn btn-primary"}," Next: Map Fields ",8,Hz)])])):Oe("",!0),i.value===2?(V(),j("div",Gz,[Q[15]||(Q[15]=m("div",{class:"step-header"},[m("h3",null,"Step 2: Map CSV Fields"),m("p",null,"Map your CSV columns to the app's database fields. Required fields are marked with *")],-1)),m("div",zz,[m("div",Wz,[Q[12]||(Q[12]=rs('<div class="mapping-header" data-v-494a4282><div class="csv-column" data-v-494a4282>CSV Column</div><div class="arrow" data-v-494a4282></div><div class="app-field" data-v-494a4282>App Database Field</div><div class="sample-data" data-v-494a4282>Sample Data</div></div>',1)),(V(!0),j(Ne,null,He(c.value,(xe,X)=>(V(),j("div",{key:X,class:"mapping-row"},[m("div",Kz,[m("strong",null,ce(xe),1)]),Q[11]||(Q[11]=m("div",{class:"arrow"},"",-1)),m("div",qz,[je(m("select",{"onUpdate:modelValue":W=>u.value[xe]=W,class:"field-select"},Q[10]||(Q[10]=[rs('<option value="" data-v-494a4282>-- Skip this field --</option><optgroup label="Required Fields" data-v-494a4282><option value="app.studentData.ssid" data-v-494a4282>SSID (State Student ID) *</option><option value="app.studentData.firstName" data-v-494a4282>First Name *</option><option value="app.studentData.lastName" data-v-494a4282>Last Name *</option><option value="app.studentData.grade" data-v-494a4282>Grade *</option></optgroup><optgroup label="Student Information" data-v-494a4282><option value="app.studentData.plan" data-v-494a4282>Plan Type (IEP/504/RTI/None)</option><option value="app.studentData.caseManagerId" data-v-494a4282>Case Manager ID</option></optgroup><optgroup label="Important Dates" data-v-494a4282><option value="app.dates.reviewDate" data-v-494a4282>Review Date</option><option value="app.dates.reevalDate" data-v-494a4282>Reevaluation Date</option><option value="app.dates.meetingDate" data-v-494a4282>Meeting Date</option></optgroup><optgroup label="Class Schedule" data-v-494a4282><option value="app.schedule.periods.1" data-v-494a4282>Period 1 Teacher ID</option><option value="app.schedule.periods.2" data-v-494a4282>Period 2 Teacher ID</option><option value="app.schedule.periods.3" data-v-494a4282>Period 3 Teacher ID</option><option value="app.schedule.periods.4" data-v-494a4282>Period 4 Teacher ID</option><option value="app.schedule.periods.5" data-v-494a4282>Period 5 Teacher ID</option><option value="app.schedule.periods.6" data-v-494a4282>Period 6 Teacher ID</option><option value="app.schedule.periods.SH" data-v-494a4282>Study Hall Teacher ID</option><option value="app.schedule.classServices" data-v-494a4282>Class Services (Comma-separated)</option></optgroup><optgroup label="Service Providers" data-v-494a4282><option value="app.providers.speechId" data-v-494a4282>Speech Provider ID</option><option value="app.providers.otId" data-v-494a4282>OT Provider ID</option><option value="app.providers.ptId" data-v-494a4282>PT Provider ID</option><option value="app.providers.atId" data-v-494a4282>AT Provider ID</option><option value="app.providers.audId" data-v-494a4282>Audiologist ID</option><option value="app.providers.bisId" data-v-494a4282>BIS Provider ID</option><option value="app.providers.dhhId" data-v-494a4282>DHH Provider ID</option><option value="app.providers.hnId" data-v-494a4282>HN Provider ID</option><option value="app.providers.mhId" data-v-494a4282>MH Provider ID</option><option value="app.providers.omId" data-v-494a4282>OM Provider ID</option><option value="app.providers.scId" data-v-494a4282>SC Provider ID</option><option value="app.providers.swId" data-v-494a4282>SW Provider ID</option><option value="app.providers.trId" data-v-494a4282>TR Provider ID</option><option value="app.providers.viId" data-v-494a4282>VI Provider ID</option></optgroup><optgroup label="Flags" data-v-494a4282><option value="app.flags.flag1" data-v-494a4282>Flag 1 (Boolean)</option><option value="app.flags.flag2" data-v-494a4282>Flag 2 (Boolean)</option></optgroup><optgroup label="Documents" data-v-494a4282><option value="app.documents.bipPdfUrl" data-v-494a4282>BIP PDF URL</option><option value="app.documents.ataglancePdfUrl" data-v-494a4282>At-A-Glance PDF URL</option></optgroup><optgroup label="Accommodations" data-v-494a4282><option value="app.accommodations.assessment" data-v-494a4282>Assessment Accommodations</option><option value="app.accommodations.instruction" data-v-494a4282>Instructional Accommodations</option></optgroup>',9)]),8,Xz),[[vr,u.value[xe]]])]),m("div",Yz,[m("code",null,ce(C(xe)),1)])]))),128))]),m("div",{class:"auto-mapping-section"},[Q[13]||(Q[13]=m("h4",null,"Quick Mapping Options:",-1)),m("div",{class:"quick-actions"},[m("button",{onClick:b,class:"btn btn-secondary"}," Auto-map Common Fields "),m("button",{onClick:w,class:"btn btn-secondary"}," Clear All Mappings ")])]),f.value.length>0?(V(),j("div",Qz,[Q[14]||(Q[14]=m("h4",null,"Mapping Issues:",-1)),m("ul",null,[(V(!0),j(Ne,null,He(f.value,xe=>(V(),j("li",{key:xe,class:"error-item"},ce(xe),1))),128))])])):Oe("",!0)]),m("div",Jz,[m("button",{onClick:L,class:"btn btn-secondary"}," Back "),m("button",{onClick:H,disabled:!I.value,class:"btn btn-primary"}," Next: Preview Data ",8,Zz)])])):Oe("",!0),i.value===3?(V(),j("div",eW,[Q[23]||(Q[23]=m("div",{class:"step-header"},[m("h3",null,"Step 3: Preview and Validate"),m("p",null,"Review the mapped data before importing. Check for any validation errors.")],-1)),m("div",tW,[m("div",rW,[m("div",nW,[Q[16]||(Q[16]=m("span",{class:"stat-label"},"Total Records:",-1)),m("span",sW,ce(l.value.length),1)]),m("div",aW,[Q[17]||(Q[17]=m("span",{class:"stat-label"},"Valid Records:",-1)),m("span",iW,ce(P.value.length),1)]),m("div",oW,[Q[18]||(Q[18]=m("span",{class:"stat-label"},"Invalid Records:",-1)),m("span",lW,ce(D.value.length),1)])]),m("div",cW,[m("table",uW,[Q[19]||(Q[19]=m("thead",null,[m("tr",null,[m("th",null,"Status"),m("th",null,"SSID"),m("th",null,"Name"),m("th",null,"Grade"),m("th",null,"Plan"),m("th",null,"Case Manager"),m("th",null,"Issues")])],-1)),m("tbody",null,[(V(!0),j(Ne,null,He(h.value,(xe,X)=>{var W,Y,ee,ve,re,se,le,Te;return V(),j("tr",{key:X,class:ut({"invalid-row":xe.errors.length>0})},[m("td",null,[m("span",{class:ut(["status-badge",xe.errors.length>0?"error":"valid"])},ce(xe.errors.length>0?"Error":"Valid"),3)]),m("td",null,ce(xe.data.ssid||((Y=(W=xe.data.app)==null?void 0:W.studentData)==null?void 0:Y.ssid)||"Missing"),1),m("td",null,ce(M(xe.data)),1),m("td",null,ce(((ve=(ee=xe.data.app)==null?void 0:ee.studentData)==null?void 0:ve.grade)||"Missing"),1),m("td",null,ce(((se=(re=xe.data.app)==null?void 0:re.studentData)==null?void 0:se.plan)||"Not set"),1),m("td",null,ce(((Te=(le=xe.data.app)==null?void 0:le.studentData)==null?void 0:Te.caseManagerId)||"Not set"),1),m("td",null,[xe.errors.length>0?(V(),j("ul",dW,[(V(!0),j(Ne,null,He(xe.errors,we=>(V(),j("li",{key:we,class:"error-item"},ce(we),1))),128))])):(V(),j("span",fW,"No issues"))])],2)}),128))])])]),m("div",hW,[Q[22]||(Q[22]=m("h4",null,"Import Options:",-1)),m("div",pW,[m("label",mW,[je(m("input",{type:"radio","onUpdate:modelValue":Q[0]||(Q[0]=xe=>p.value=xe),value:"valid-only"},null,512),[[oa,p.value]]),m("span",null,"Import only valid records ("+ce(P.value.length)+" records)",1)]),m("label",gW,[je(m("input",{type:"radio","onUpdate:modelValue":Q[1]||(Q[1]=xe=>p.value=xe),value:"all"},null,512),[[oa,p.value]]),Q[20]||(Q[20]=m("span",null,"Import all records (may cause errors for invalid data)",-1))]),m("label",vW,[je(m("input",{type:"checkbox","onUpdate:modelValue":Q[2]||(Q[2]=xe=>v.value=xe)},null,512),[[St,v.value]]),Q[21]||(Q[21]=m("span",null,"Update existing students if SSID already exists",-1))])])])]),m("div",xW,[m("button",{onClick:L,class:"btn btn-secondary"}," Back "),m("button",{onClick:z,disabled:g.value||p.value==="valid-only"&&P.value.length===0,class:"btn btn-primary"},ce(g.value?"Importing...":`Import ${p.value==="valid-only"?P.value.length:l.value.length} Students`),9,yW)])])):Oe("",!0),i.value===4?(V(),j("div",EW,[Q[28]||(Q[28]=m("div",{class:"step-header"},[m("h3",null,"Step 4: Import Complete"),m("p",null,"Your bulk import has been completed. Review the results below.")],-1)),m("div",_W,[m("div",bW,[m("div",SW,[Q[24]||(Q[24]=m("span",{class:"stat-label"},"Successfully Imported:",-1)),m("span",TW,ce(y.value.successful),1)]),m("div",AW,[Q[25]||(Q[25]=m("span",{class:"stat-label"},"Failed to Import:",-1)),m("span",wW,ce(y.value.failed),1)]),m("div",IW,[Q[26]||(Q[26]=m("span",{class:"stat-label"},"Total Processing Time:",-1)),m("span",CW,ce(y.value.processingTime)+"ms",1)])]),y.value.errors.length>0?(V(),j("div",kW,[Q[27]||(Q[27]=m("h4",null,"Import Errors:",-1)),m("ul",null,[(V(!0),j(Ne,null,He(y.value.errors,xe=>(V(),j("li",{key:xe,class:"error-item"},ce(xe),1))),128))])])):Oe("",!0),m("div",DW,[m("button",{onClick:he,class:"btn btn-secondary"}," Import More Students "),m("button",{onClick:Q[3]||(Q[3]=xe=>Z.$emit("close")),class:"btn btn-primary"}," Close ")])])])):Oe("",!0),g.value?(V(),j("div",PW,[m("div",RW,[Q[29]||(Q[29]=m("div",{class:"loading-spinner"},null,-1)),m("p",null,"Importing students... "+ce(x.value)+"%",1),m("div",FW,[m("div",{class:"progress-fill",style:bn({width:x.value+"%"})},null,4)])])])):Oe("",!0)]))}},NW=At(OW,[["__scopeId","data-v-494a4282"]]),MW={class:"admin-permissions"},BW={__name:"AdminPermissions",setup(t){return(e,r)=>(V(),j("div",MW,[r[0]||(r[0]=m("h2",null,"Role Permissions Matrix",-1)),at(yk)]))}},LW=At(BW,[["__scopeId","data-v-3b26c12f"]]);var Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ek(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _y(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var _k={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Bt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var w=P(b);w.chunkSize=parseInt(w.chunkSize),b.step||b.chunk||(w.chunkSize=null),this._handle=new v(w),(this._handle.streamer=this)._config=w}).call(this,_),this.parseChunk=function(b,w){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let k=this._config.newline;k||(T=this._config.quoteChar||'"',k=this._handle.guessLineEndings(b,T)),b=[...b.split(k).slice(C)].join(k)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(b))!==void 0&&(b=T),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+b,T=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=T.meta.cursor,C=(this._finished||(this._partialLine=C.substring(b-this._baseIndex),this._baseIndex=b),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:T,workerId:c.WORKER_ID,finished:C});else if(A(this._config.chunk)&&!w){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!C||!A(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(b){A(this._config.error)?this._config.error(b):a&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:b,finished:!1})}}function d(_){var b;(_=_||{}).chunkSize||(_.chunkSize=c.RemoteChunkSize),u.call(this,_),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),i||(b.onload=D(this._chunkLoaded,this),b.onerror=D(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var w,C=this._config.downloadRequestHeaders;for(w in C)b.setRequestHeader(w,C[w])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+T));try{b.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}i&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(w){w=b.statusText||w,this._sendError(new Error(w))}}function f(_){(_=_||{}).chunkSize||(_.chunkSize=c.LocalChunkSize),u.call(this,_);var b,w,C=typeof FileReader<"u";this.stream=function(T){this._input=T,w=T.slice||T.webkitSlice||T.mozSlice,C?((b=new FileReader).onload=D(this._chunkLoaded,this),b.onerror=D(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,k=(this._config.chunkSize&&(k=Math.min(this._start+this._config.chunkSize,this._input.size),T=w.call(T,this._start,k)),b.readAsText(T,this._config.encoding));C||this._chunkLoaded({target:{result:k}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(b.error)}}function h(_){var b;u.call(this,_=_||{}),this.stream=function(w){return b=w,this._nextChunk()},this._nextChunk=function(){var w,C;if(!this._finished)return w=this._config.chunkSize,b=w?(C=b.substring(0,w),b.substring(w)):(C=b,""),this._finished=!b,this.parseChunk(C)}}function p(_){u.call(this,_=_||{});var b=[],w=!0,C=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):w=!0},this._streamData=D(function(T){try{b.push(typeof T=="string"?T:T.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(k){this._streamError(k)}},this),this._streamError=D(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=D(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(_){var b,w,C,T,k=Math.pow(2,53),N=-k,B=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,U=0,M=0,q=!1,H=!1,L=[],z={data:[],errors:[],meta:{}};function K(he){return _.skipEmptyLines==="greedy"?he.join("").trim()==="":he.length===1&&he[0].length===0}function te(){if(z&&C&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),C=!1),_.skipEmptyLines&&(z.data=z.data.filter(function(xe){return!K(xe)})),ge()){let xe=function(X,W){A(_.transformHeader)&&(X=_.transformHeader(X,W)),L.push(X)};if(z)if(Array.isArray(z.data[0])){for(var he=0;ge()&&he<z.data.length;he++)z.data[he].forEach(xe);z.data.splice(0,1)}else z.data.forEach(xe)}function Z(xe,X){for(var W=_.header?{}:[],Y=0;Y<xe.length;Y++){var ee=Y,ve=xe[Y],ve=((re,se)=>(le=>(_.dynamicTypingFunction&&_.dynamicTyping[le]===void 0&&(_.dynamicTyping[le]=_.dynamicTypingFunction(le)),(_.dynamicTyping[le]||_.dynamicTyping)===!0))(re)?se==="true"||se==="TRUE"||se!=="false"&&se!=="FALSE"&&((le=>{if(B.test(le)&&(le=parseFloat(le),N<le&&le<k))return 1})(se)?parseFloat(se):R.test(se)?new Date(se):se===""?null:se):se)(ee=_.header?Y>=L.length?"__parsed_extra":L[Y]:ee,ve=_.transform?_.transform(ve,ee):ve);ee==="__parsed_extra"?(W[ee]=W[ee]||[],W[ee].push(ve)):W[ee]=ve}return _.header&&(Y>L.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+Y,M+X):Y<L.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+Y,M+X)),W}var Q;z&&(_.header||_.dynamicTyping||_.transform)&&(Q=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(Z),Q=z.data.length):z.data=Z(z.data,0),_.header&&z.meta&&(z.meta.fields=L),M+=Q)}function ge(){return _.header&&L.length===0}function ie(he,Z,Q,xe){he={type:he,code:Z,message:Q},xe!==void 0&&(he.row=xe),z.errors.push(he)}A(_.step)&&(T=_.step,_.step=function(he){z=he,ge()?te():(te(),z.data.length!==0&&(U+=he.data.length,_.preview&&U>_.preview?w.abort():(z.data=z.data[0],T(z,O))))}),this.parse=function(he,Z,Q){var xe=_.quoteChar||'"',xe=(_.newline||(_.newline=this.guessLineEndings(he,xe)),C=!1,_.delimiter?A(_.delimiter)&&(_.delimiter=_.delimiter(he),z.meta.delimiter=_.delimiter):((xe=((X,W,Y,ee,ve)=>{var re,se,le,Te;ve=ve||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var we=0;we<ve.length;we++){for(var Se,ze=ve[we],Ie=0,$e=0,Be=0,We=(le=void 0,new x({comments:ee,delimiter:ze,newline:W,preview:10}).parse(X)),Ke=0;Ke<We.data.length;Ke++)Y&&K(We.data[Ke])?Be++:(Se=We.data[Ke].length,$e+=Se,le===void 0?le=Se:0<Se&&(Ie+=Math.abs(Se-le),le=Se));0<We.data.length&&($e/=We.data.length-Be),(se===void 0||Ie<=se)&&(Te===void 0||Te<$e)&&1.99<$e&&(se=Ie,re=ze,Te=$e)}return{successful:!!(_.delimiter=re),bestDelimiter:re}})(he,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=xe.bestDelimiter:(C=!0,_.delimiter=c.DefaultDelimiter),z.meta.delimiter=_.delimiter),P(_));return _.preview&&_.header&&xe.preview++,b=he,w=new x(xe),z=w.parse(b,Z,Q),te(),q?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,w.abort(),b=A(_.chunk)?"":b.substring(w.getCharIndex())},this.resume=function(){O.streamer._halted?(q=!1,O.streamer.parseChunk(b,!0)):setTimeout(O.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,w.abort(),z.meta.aborted=!0,A(_.complete)&&_.complete(z),b=""},this.guessLineEndings=function(X,xe){X=X.substring(0,1048576);var xe=new RegExp(g(xe)+"([^]*?)"+g(xe),"gm"),Q=(X=X.replace(xe,"")).split("\r"),xe=X.split(`
`),X=1<xe.length&&xe[0].length<Q[0].length;if(Q.length===1||X)return`
`;for(var W=0,Y=0;Y<Q.length;Y++)Q[Y][0]===`
`&&W++;return W>=Q.length/2?`\r
`:"\r"}}function g(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(_){var b=(_=_||{}).delimiter,w=_.newline,C=_.comments,T=_.step,k=_.preview,N=_.fastMode,B=null,R=!1,O=_.quoteChar==null?'"':_.quoteChar,U=O;if(_.escapeChar!==void 0&&(U=_.escapeChar),(typeof b!="string"||-1<c.BAD_DELIMITERS.indexOf(b))&&(b=","),C===b)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<c.BAD_DELIMITERS.indexOf(C))&&(C=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var M=0,q=!1;this.parse=function(H,L,z){if(typeof H!="string")throw new Error("Input must be a string");var K=H.length,te=b.length,ge=w.length,ie=C.length,he=A(T),Z=[],Q=[],xe=[],X=M=0;if(!H)return Ie();if(N||N!==!1&&H.indexOf(O)===-1){for(var W=H.split(w),Y=0;Y<W.length;Y++){if(xe=W[Y],M+=xe.length,Y!==W.length-1)M+=w.length;else if(z)return Ie();if(!C||xe.substring(0,ie)!==C){if(he){if(Z=[],Te(xe.split(b)),$e(),q)return Ie()}else Te(xe.split(b));if(k&&k<=Y)return Z=Z.slice(0,k),Ie(!0)}}return Ie()}for(var ee=H.indexOf(b,M),ve=H.indexOf(w,M),re=new RegExp(g(U)+g(O),"g"),se=H.indexOf(O,M);;)if(H[M]===O)for(se=M,M++;;){if((se=H.indexOf(O,se+1))===-1)return z||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:M}),Se();if(se===K-1)return Se(H.substring(M,se).replace(re,O));if(O===U&&H[se+1]===U)se++;else if(O===U||se===0||H[se-1]!==U){ee!==-1&&ee<se+1&&(ee=H.indexOf(b,se+1));var le=we((ve=ve!==-1&&ve<se+1?H.indexOf(w,se+1):ve)===-1?ee:Math.min(ee,ve));if(H.substr(se+1+le,te)===b){xe.push(H.substring(M,se).replace(re,O)),H[M=se+1+le+te]!==O&&(se=H.indexOf(O,M)),ee=H.indexOf(b,M),ve=H.indexOf(w,M);break}if(le=we(ve),H.substring(se+1+le,se+1+le+ge)===w){if(xe.push(H.substring(M,se).replace(re,O)),ze(se+1+le+ge),ee=H.indexOf(b,M),se=H.indexOf(O,M),he&&($e(),q))return Ie();if(k&&Z.length>=k)return Ie(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:M}),se++}}else if(C&&xe.length===0&&H.substring(M,M+ie)===C){if(ve===-1)return Ie();M=ve+ge,ve=H.indexOf(w,M),ee=H.indexOf(b,M)}else if(ee!==-1&&(ee<ve||ve===-1))xe.push(H.substring(M,ee)),M=ee+te,ee=H.indexOf(b,M);else{if(ve===-1)break;if(xe.push(H.substring(M,ve)),ze(ve+ge),he&&($e(),q))return Ie();if(k&&Z.length>=k)return Ie(!0)}return Se();function Te(Be){Z.push(Be),X=M}function we(Be){var We=0;return We=Be!==-1&&(Be=H.substring(se+1,Be))&&Be.trim()===""?Be.length:We}function Se(Be){return z||(Be===void 0&&(Be=H.substring(M)),xe.push(Be),M=K,Te(xe),he&&$e()),Ie()}function ze(Be){M=Be,Te(xe),xe=[],ve=H.indexOf(w,M)}function Ie(Be){if(_.header&&!L&&Z.length&&!R){var We=Z[0],Ke=Object.create(null),Ee=new Set(We);let ye=!1;for(let _e=0;_e<We.length;_e++){let Re=We[_e];if(Ke[Re=A(_.transformHeader)?_.transformHeader(Re,_e):Re]){let Ge,st=Ke[Re];for(;Ge=Re+"_"+st,st++,Ee.has(Ge););Ee.add(Ge),We[_e]=Ge,Ke[Re]++,ye=!0,(B=B===null?{}:B)[Ge]=Re}else Ke[Re]=1,We[_e]=Re;Ee.add(Re)}ye&&console.warn("Duplicate headers found and renamed."),R=!0}return{data:Z,errors:Q,meta:{delimiter:b,linebreak:w,aborted:q,truncated:!!Be,cursor:X+(L||0),renamedHeaders:B}}}function $e(){T(Ie()),Z=[],Q=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return M}}function y(_){var b=_.data,w=o[b.workerId],C=!1;if(b.error)w.userError(b.error,b.file);else if(b.results&&b.results.data){var T={abort:function(){C=!0,E(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(A(w.userStep)){for(var k=0;k<b.results.data.length&&(w.userStep({data:b.results.data[k],errors:b.results.errors,meta:b.results.meta},T),!C);k++);delete b.results}else A(w.userChunk)&&(w.userChunk(b.results,T,b.file),delete b.results)}b.finished&&!C&&E(b.workerId,b.results)}function E(_,b){var w=o[_];A(w.userComplete)&&w.userComplete(b),w.terminate(),delete o[_]}function I(){throw new Error("Not implemented.")}function P(_){if(typeof _!="object"||_===null)return _;var b,w=Array.isArray(_)?[]:{};for(b in _)w[b]=P(_[b]);return w}function D(_,b){return function(){_.apply(b,arguments)}}function A(_){return typeof _=="function"}return c.parse=function(_,b){var w=(b=b||{}).dynamicTyping||!1;if(A(w)&&(b.dynamicTypingFunction=w,w={}),b.dynamicTyping=w,b.transform=!!A(b.transform)&&b.transform,!b.worker||!c.WORKERS_SUPPORTED)return w=null,c.NODE_STREAM_INPUT,typeof _=="string"?(_=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(_),w=new(b.download?d:h)(b)):_.readable===!0&&A(_.read)&&A(_.on)?w=new p(b):(n.File&&_ instanceof File||_ instanceof Object)&&(w=new f(b)),w.stream(_);(w=(()=>{var C;return!!c.WORKERS_SUPPORTED&&(C=(()=>{var T=n.URL||n.webkitURL||null,k=r.toString();return c.BLOB_URL||(c.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))})(),(C=new n.Worker(C)).onmessage=y,C.id=l++,o[C.id]=C)})()).userStep=b.step,w.userChunk=b.chunk,w.userComplete=b.complete,w.userError=b.error,b.step=A(b.step),b.chunk=A(b.chunk),b.complete=A(b.complete),b.error=A(b.error),delete b.worker,w.postMessage({input:_,config:b,workerId:w.id})},c.unparse=function(_,b){var w=!1,C=!0,T=",",k=`\r
`,N='"',B=N+N,R=!1,O=null,U=!1,M=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||c.BAD_DELIMITERS.filter(function(L){return b.delimiter.indexOf(L)!==-1}).length||(T=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(w=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(R=b.skipEmptyLines),typeof b.newline=="string"&&(k=b.newline),typeof b.quoteChar=="string"&&(N=b.quoteChar),typeof b.header=="boolean"&&(C=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");O=b.columns}b.escapeChar!==void 0&&(B=b.escapeChar+N),b.escapeFormulae instanceof RegExp?U=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(N),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return q(null,_,R);if(typeof _[0]=="object")return q(O||Object.keys(_[0]),_,R)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||O),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),q(_.fields||[],_.data||[],R);throw new Error("Unable to serialize unrecognized input");function q(L,z,K){var te="",ge=(typeof L=="string"&&(L=JSON.parse(L)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(L)&&0<L.length),ie=!Array.isArray(z[0]);if(ge&&C){for(var he=0;he<L.length;he++)0<he&&(te+=T),te+=H(L[he],he);0<z.length&&(te+=k)}for(var Z=0;Z<z.length;Z++){var Q=(ge?L:z[Z]).length,xe=!1,X=ge?Object.keys(z[Z]).length===0:z[Z].length===0;if(K&&!ge&&(xe=K==="greedy"?z[Z].join("").trim()==="":z[Z].length===1&&z[Z][0].length===0),K==="greedy"&&ge){for(var W=[],Y=0;Y<Q;Y++){var ee=ie?L[Y]:Y;W.push(z[Z][ee])}xe=W.join("").trim()===""}if(!xe){for(var ve=0;ve<Q;ve++){0<ve&&!X&&(te+=T);var re=ge&&ie?L[ve]:ve;te+=H(z[Z][re],ve)}Z<z.length-1&&(!K||0<Q&&!X)&&(te+=k)}}return te}function H(L,z){var K,te;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(te=!1,U&&typeof L=="string"&&U.test(L)&&(L="'"+L,te=!0),K=L.toString().replace(M,B),(te=te||w===!0||typeof w=="function"&&w(L,z)||Array.isArray(w)&&w[z]||((ge,ie)=>{for(var he=0;he<ie.length;he++)if(-1<ge.indexOf(ie[he]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(T)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?N+K+N:K)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=x,c.ParserHandle=v,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=h,c.ReadableStreamStreamer=p,n.jQuery&&((s=n.jQuery).fn.parse=function(_){var b=_.config||{},w=[];return this.each(function(k){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)w.push({file:this.files[N],inputElem:this,instanceConfig:s.extend({},b)})}),C(),this;function C(){if(w.length===0)A(_.complete)&&_.complete();else{var k,N,B,R,O=w[0];if(A(_.before)){var U=_.before(O.file,O.inputElem);if(typeof U=="object"){if(U.action==="abort")return k="AbortError",N=O.file,B=O.inputElem,R=U.reason,void(A(_.error)&&_.error({name:k},N,B,R));if(U.action==="skip")return void T();typeof U.config=="object"&&(O.instanceConfig=s.extend(O.instanceConfig,U.config))}else if(U==="skip")return void T()}var M=O.instanceConfig.complete;O.instanceConfig.complete=function(q){A(M)&&M(q,O.file,O.inputElem),T()},c.parse(O.file,O.instanceConfig)}}function T(){w.splice(0,1),C()}}),a&&(n.onmessage=function(_){_=_.data,c.WORKER_ID===void 0&&_&&(c.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=c.parse(_.input,_.config))&&n.postMessage({workerId:c.WORKER_ID,results:_,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(p.prototype=Object.create(u.prototype)).constructor=p,c})})(_k);var UW=_k.exports;const bk=Ek(UW),Ho=_o();function Sk(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,r)=>r.toUpperCase()).replace(/^[A-Z]/,e=>e.toLowerCase())}async function VW(t,e){if(!t)return null;const r=Object.values(e).find(n=>{var s;return n.aeriesId===t||n.aeriesId===parseInt(t)||((s=n.aeriesId)==null?void 0:s.toString())===(t==null?void 0:t.toString())});return r?r.id:(console.warn(`No Firebase user found for Aeries teacher ID: ${t}`),null)}function $W(t){return{sourcedId:"stateId",SSID:"stateId",StateStudentID:"stateId",StudentNumber:"localId",givenName:"firstName",FirstName:"firstName",familyName:"lastName",LastName:"lastName",middleName:"middleName",MiddleName:"middleName",email:"email",Email:"email",phone:"phone",Phone:"phone",dateOfBirth:"birthDate",DOB:"birthDate",sex:"gender",Gender:"gender",grade:"grade",Grade:"grade",Address:"address",City:"city",State:"state",ZipCode:"zipCode",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",AttendanceRate:"attendanceRate",attendanceRate:"attendanceRate",Period1TeacherId:"schedule.periods.1",period1TeacherId:"schedule.periods.1",Period2TeacherId:"schedule.periods.2",period2TeacherId:"schedule.periods.2",Period3TeacherId:"schedule.periods.3",period3TeacherId:"schedule.periods.3",Period4TeacherId:"schedule.periods.4",period4TeacherId:"schedule.periods.4",Period5TeacherId:"schedule.periods.5",period5TeacherId:"schedule.periods.5",Period6TeacherId:"schedule.periods.6",period6TeacherId:"schedule.periods.6",Period7TeacherId:"schedule.periods.7",period7TeacherId:"schedule.periods.7",SHTeacherId:"schedule.periods.SH",shTeacherId:"schedule.periods.SH"}[t]||Sk(t)}function jW(t){return{SSID:"ssid",FirstName:"firstName",LastName:"lastName",MiddleName:"middleName",Grade:"grade",DOB:"dob",Gender:"gender",Ethnicity:"ethnicity",School:"school",Address:"address",City:"city",State:"state",ZipCode:"zipCode",Phone:"phone",ParentName:"parentName",ParentPhone:"parentPhone",ParentEmail:"parentEmail",ELL:"ell",504:"504",IEP:"iep",CaseManager:"caseManager",Disability:"disability",ServiceMinutes:"serviceMinutes",Goals:"goals",Notes:"notes",Plan:"plan",ReviewDate:"reviewDate",ReevalDate:"reevalDate",MeetingDate:"meetingDate",SpeechProvider:"speechProvider",MHProvider:"mhProvider",OTProvider:"otProvider",ProgramAccommodations:"programAccommodations",Accommodations:"programAccommodations",IEP_Services:"iepServices"}[t]||Sk(t)}async function HW(t){return new Promise((e,r)=>{bk.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));const i=Object.keys(s[0]).map(o=>o.trim().toLowerCase());if(!(i.includes("sourcedid")||i.includes("ssid")||i.includes("statestudentid")))return r(new Error("Missing required 'sourcedId' or 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function GW(t,e){var a;let r=0;const n=Ht(Ho,"users"),s=await fr(n),i={};s.forEach(o=>{i[o.id]={id:o.id,...o.data()}}),console.log(`Loaded ${Object.keys(i).length} users for teacher ID mapping`);for(const o of t){const l=(a=o.sourcedId||o.SSID||o.ssid||o.StateStudentID||o.stateStudentId)==null?void 0:a.trim();if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={firstName:"",lastName:"",grade:"",birthDate:"",gender:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",parentName:"",parentPhone:"",parentEmail:"",attendanceRate:"",schedule:{periods:{}}};for(const u of e){const d=$W(u),f=o[u],h=f!=null&&typeof f=="string"?f.trim():f!=null?String(f):null;if(d.startsWith("schedule.periods.")){const p=d.split(".")[2];if(h){const v=await VW(h,i);v?(c.schedule.periods[p]=v,console.log(`Mapped Aeries teacher ID ${h} to Firebase user ID ${v} for period ${p}`)):console.warn(`Could not map Aeries teacher ID ${h} for period ${p}`)}}else c[d]=h}c.lastAeriesImport=new Date().toISOString(),console.log("Final aeriesData.schedule structure:",JSON.stringify(c.schedule,null,2));try{const u=Ht(Ho,"students"),d=Jr(u,xs("app.studentData.ssid","==",l)),f=await fr(d);if(f.empty){const h=xt(Ht(Ho,"students")),p={app:{studentData:{ssid:l}},aeries:c,createdAt:fl()};await br(h,p),console.log(`Created new student ${h.id} with Aeries data for SSID ${l}`)}else{const h=f.docs[0];await br(xt(Ho,"students",h.id),{aeries:c},{merge:!0}),console.log(`Updated existing student ${h.id} with Aeries data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import Aeries data for SSID ${l}:`,u)}}return r}async function zW(t){return new Promise((e,r)=>{bk.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{const s=n.data;if(!s||!s.length)return r(new Error("No data rows found in the CSV."));if(!Object.keys(s[0]).some(a=>a.trim().toLowerCase()==="ssid"))return r(new Error("Missing required 'SSID' column."));e(s)},error:n=>r(new Error("Failed to parse CSV: "+n.message))})})}async function WW(t,e){var n,s,i,a;let r=0;for(const o of t){const l=((n=o.SSID)==null?void 0:n.trim())||((s=o.ssid)==null?void 0:s.trim());if(!l){console.warn("Skipping row with missing SSID:",o);continue}const c={};for(const u of e){const d=jW(u);u==="IEP_Services"||u==="iep_services"?c[d]=((i=o[u])==null?void 0:i.split(";").map(f=>f.trim()))||[]:u==="ProgramAccommodations"||u==="Accommodations"?c[d]=((a=o[u])==null?void 0:a.split(";").map(f=>f.trim()))||[]:c[d]=o[u]}c.lastSeisImport=new Date().toISOString();try{const u=Ht(Ho,"students"),d=Jr(u,xs("app.studentData.ssid","==",l)),f=await fr(d);if(f.empty){const h=xt(Ht(Ho,"students")),p={app:{studentData:{ssid:l}},seis:c,createdAt:fl()};await br(h,p),console.log(`Created new student ${h.id} with SEIS data for SSID ${l}`)}else{const h=f.docs[0];await br(xt(Ho,"students",h.id),{seis:c},{merge:!0}),console.log(`Updated existing student ${h.id} with SEIS data for SSID ${l}`)}r++}catch(u){console.error(`Failed to import SEIS data for SSID ${l}:`,u)}}return r}const KW={name:"SeisImport",setup(){const t=fe(null),e=fe(null),r=fe([]),n=fe([]),s=fe([]),i=fe([]),a=fe(""),o=fe(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(h,p=!1)=>{a.value=h,o.value=p,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:h=>{const p=h.target.files[0];if(p){const v=Df(p,{allowedTypes:["csv"],maxSize:10485760,fieldName:"SEIS Import File"});if(!v.isValid){c(v.error,!0),h.target.value="";return}const g=pn(p.name);if(!g.isSafe){c(`File name contains potentially dangerous content: ${g.threats.join(", ")}`,!0),h.target.value="";return}e.value=p}},previewFile:async()=>{const h=e.value;if(!h){c(" Please select a CSV file.",!0);return}if(!Is("seisPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const g=(await zW(h)).map(y=>{const E={};return Object.entries(y).forEach(([I,P])=>{const D=gr(I,{trim:!0,maxLength:100,removeDangerous:!0});let A=P;if(typeof P=="string"){A=gr(P,{trim:!0,maxLength:500,removeDangerous:!0});const _=pn(A);_.isSafe||(console.warn(`Security threat detected in SEIS data: ${_.threats.join(", ")}`),A="")}E[D]=A}),E});r.value=g,c(` Loaded ${r.value.length} rows.`);const x=Object.keys(r.value[0]||{}).filter(y=>y.length>0);n.value=x,s.value=[...x],i.value=r.value.slice(0,5)}catch(v){c(` Error: ${v.message}`,!0),console.error("SEIS Parse Error:",v)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!Is("seisImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} SEIS records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const p=r.value.map(g=>{const x={};return s.value.forEach(y=>{g[y]!==void 0&&(x[y]=g[y])}),x}),v=p.filter(g=>Object.values(g).some(y=>y&&typeof y=="string"&&y.trim().length>0));if(v.length===0){c(" No valid records found to import.",!0);return}if(v.length!==p.length){const g=p.length-v.length;c(` Skipping ${g} invalid records. Importing ${v.length} valid records.`)}await WW(v,s.value),c(` Successfully imported ${v.length} SEIS records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(p){c(` Import failed: ${p.message}`,!0),console.error("SEIS Import Error:",p)}}}}}},qW={class:"seis-import"},XW=["disabled"],YW={key:0,id:"seis-field-options"},QW=["value"],JW={key:1,id:"seis-preview-container",style:{"margin-top":"1rem"}},ZW={border:"1",cellpadding:"4"},eK=["disabled"];function tK(t,e,r,n,s,i){return V(),j("div",qW,[e[5]||(e[5]=m("h3",null,"Upload SEIS CSV",-1)),m("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),m("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,XW),n.fieldOptions.length>0?(V(),j("div",YW,[e[4]||(e[4]=m("h4",null,"Select fields to import:",-1)),(V(!0),j(Ne,null,He(n.fieldOptions,a=>(V(),j("label",{key:a},[je(m("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,QW),[[St,n.selectedFields]]),Ve(" "+ce(a),1)]))),128))])):Oe("",!0),n.previewData.length>0?(V(),j("div",JW,[m("table",ZW,[m("thead",null,[m("tr",null,[(V(!0),j(Ne,null,He(n.fieldOptions,a=>(V(),j("th",{key:a},ce(a),1))),128))])]),m("tbody",null,[(V(!0),j(Ne,null,He(n.previewData,(a,o)=>(V(),j("tr",{key:o},[(V(!0),j(Ne,null,He(n.fieldOptions,l=>(V(),j("td",{key:l},ce(a[l]||""),1))),128))]))),128))])]),m("p",null,"Showing first "+ce(n.previewData.length)+" of "+ce(n.parsedData.length)+" rows.",1)])):Oe("",!0),m("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,eK),m("p",{class:ut(["status-msg",{error:n.isError}])},ce(n.statusMessage),3)])}const rK=At(KW,[["render",tK],["__scopeId","data-v-b942d3b4"]]),nK={name:"AeriesImport",setup(){const t=fe(null),e=fe(null),r=fe([]),n=fe([]),s=fe([]),i=fe([]),a=fe(""),o=fe(!1),l=be(()=>r.value.length>0&&s.value.length>0),c=(h,p=!1)=>{a.value=h,o.value=p,setTimeout(()=>{a.value="",o.value=!1},5e3)};return{fileInput:t,selectedFile:e,parsedData:r,fieldOptions:n,selectedFields:s,previewData:i,statusMessage:a,isError:o,canImport:l,handleFileSelect:h=>{const p=h.target.files[0];if(p){const v=Df(p,{allowedTypes:["csv"],maxSize:10485760,fieldName:"Aeries Import File"});if(!v.isValid){c(v.error,!0),h.target.value="";return}const g=pn(p.name);if(!g.isSafe){c(`File name contains potentially dangerous content: ${g.threats.join(", ")}`,!0),h.target.value="";return}e.value=p}},previewFile:async()=>{const h=e.value;if(!h){c(" Please select a CSV file.",!0);return}if(!Is("aeriesPreview",5,3e5).allowed){c("Too many preview requests. Please wait before previewing again.",!0);return}c("Parsing file..."),i.value=[],n.value=[],s.value=[];try{const g=(await HW(h)).map(y=>{const E={};return Object.entries(y).forEach(([I,P])=>{const D=gr(I,{trim:!0,maxLength:100,removeDangerous:!0});let A=P;if(typeof P=="string"){A=gr(P,{trim:!0,maxLength:500,removeDangerous:!0});const _=pn(A);_.isSafe||(console.warn(`Security threat detected in Aeries data: ${_.threats.join(", ")}`),A="")}E[D]=A}),E});r.value=g,c(` Loaded ${r.value.length} rows.`);const x=Object.keys(r.value[0]||{}).filter(y=>y.length>0);n.value=x,s.value=[...x],i.value=r.value.slice(0,5)}catch(v){c(` Error: ${v.message}`,!0),console.error("Aeries Parse Error:",v)}},importData:async()=>{if(!l.value){c(" Cannot import: No data or fields selected.",!0);return}if(!Is("aeriesImport",2,6e5).allowed){c("Too many import requests. Please wait before importing again.",!0);return}if(confirm(`Import ${r.value.length} Aeries records? This will update existing students with matching SSIDs.`)){c("Importing data...");try{const p=r.value.map(g=>{const x={};return s.value.forEach(y=>{g[y]!==void 0&&(x[y]=g[y])}),x}),v=p.filter(g=>Object.values(g).some(y=>y&&typeof y=="string"&&y.trim().length>0));if(v.length===0){c(" No valid records found to import.",!0);return}if(v.length!==p.length){const g=p.length-v.length;c(` Skipping ${g} invalid records. Importing ${v.length} valid records.`)}await GW(v,s.value),c(` Successfully imported ${v.length} Aeries records.`),e.value=null,r.value=[],n.value=[],s.value=[],i.value=[],t.value&&(t.value.value="")}catch(p){c(` Import failed: ${p.message}`,!0),console.error("Aeries Import Error:",p)}}}}}},sK={class:"aeries-import"},aK=["disabled"],iK={key:0,id:"aeries-field-options"},oK=["value"],lK={key:1,id:"aeries-preview-container",style:{"margin-top":"1rem"}},cK={border:"1",cellpadding:"4"},uK=["disabled"];function dK(t,e,r,n,s,i){return V(),j("div",sK,[e[5]||(e[5]=m("h3",null,"Upload Aeries CSV",-1)),m("input",{type:"file",ref:"fileInput",accept:".csv",onChange:e[0]||(e[0]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},null,544),m("button",{onClick:e[1]||(e[1]=(...a)=>n.previewFile&&n.previewFile(...a)),disabled:!n.selectedFile},"Preview",8,aK),n.fieldOptions.length>0?(V(),j("div",iK,[e[4]||(e[4]=m("h4",null,"Select fields to import:",-1)),(V(!0),j(Ne,null,He(n.fieldOptions,a=>(V(),j("label",{key:a},[je(m("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedFields=o),checked:""},null,8,oK),[[St,n.selectedFields]]),Ve(" "+ce(a),1)]))),128))])):Oe("",!0),n.previewData.length>0?(V(),j("div",lK,[m("table",cK,[m("thead",null,[m("tr",null,[(V(!0),j(Ne,null,He(n.fieldOptions,a=>(V(),j("th",{key:a},ce(a),1))),128))])]),m("tbody",null,[(V(!0),j(Ne,null,He(n.previewData,(a,o)=>(V(),j("tr",{key:o},[(V(!0),j(Ne,null,He(n.fieldOptions,l=>(V(),j("td",{key:l},ce(a[l]||""),1))),128))]))),128))])]),m("p",null,"Showing first "+ce(n.previewData.length)+" of "+ce(n.parsedData.length)+" rows.",1)])):Oe("",!0),m("button",{onClick:e[3]||(e[3]=(...a)=>n.importData&&n.importData(...a)),disabled:!n.canImport},"Import to Firestore",8,uK),m("p",{class:ut(["status-msg",{error:n.isError}])},ce(n.statusMessage),3)])}const fK=At(nK,[["render",dK],["__scopeId","data-v-b40a9547"]]);function hK(){const t=Ic(pf()),e=fe(!1),r=fe(!1),n=fe(""),s=fe(""),i=fe(!1),a=Ws({baseUrl:"encrypted",clientId:"encrypted",clientSecret:"encrypted",selectedSchoolId:"school123",selectedClassIds:["class1","class2"],selectedApiTypes:{oneroster:!0,nativeAeries:!0},selectedEndpoints:["/schools","/students","/api/special-education/students"]}),o=fe([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"},{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),l=(C,T=!1)=>{s.value=C,i.value=T,setTimeout(()=>{s.value="",i.value=!1},5e3)},c=()=>{a.baseUrl="https://demo.aeries.net/aeries",a.clientId="1279e5c6b747b6d62b7c76db3a205d40eb7458e678a90493d537d5af6b953550",a.clientSecret="68019dbf8d8ba82980dd148eecc3977ac0d7f1f040d444225874c88eb80b9c1a",l("Demo credentials loaded. Click Connect to test.")},u=async()=>{if(!a.baseUrl||!a.clientId||!a.clientSecret)return l("Please fill in all connection fields.",!0),!1;r.value=!0,l("Connecting to Aeries API...");try{const k=(await Ta(t,"getAeriesToken")({baseUrl:a.baseUrl,clientId:a.clientId,clientSecret:a.clientSecret})).data;if(k.success&&k.access_token)return n.value=k.access_token,e.value=!0,l(" Successfully connected to Aeries API!"),!0;throw new Error("No access token received")}catch(C){const T=C.message||"Connection failed";return l(` Connection failed: ${T}`,!0),console.error("Aeries API Connection Error:",C),!1}finally{r.value=!1}},d=()=>{e.value=!1,n.value="",l("Disconnected from Aeries API.")},f=async C=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const N=(await Ta(t,"testAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:C,accessToken:n.value})).data;if(N.success)return l(` Successfully fetched data from ${C}`),{data:N.data,responseTime:N.responseTime};throw new Error(N.error||"API call failed")}catch(T){const k=T.message||"API call failed";return l(` API call failed: ${k}`,!0),console.error("Aeries API Test Error:",T),{error:k}}},h=async C=>{if(!e.value||!n.value)return l("Not connected to Aeries API.",!0),null;try{const N=(await Ta(t,"testCustomAeriesEndpoint")({baseUrl:a.baseUrl,endpoint:C,accessToken:n.value})).data;return N.success?(l(` Successfully fetched data from ${C}`),{data:N.data,responseTime:N.responseTime}):{error:N.error||"API call failed"}}catch(T){const k=T.message||"API call failed";return l(` API call failed: ${k}`,!0),console.error("Custom Aeries API Test Error:",T),{error:k}}},p=async()=>await f("/students"),v=async()=>await f("/teachers"),g=async()=>{const C=["/api/special-education/students","/api/students/special-education","/api/iep/students","/api/504/students"];for(const T of C){const k=await h(T);if(k&&!k.error)return k}return{error:"No special education endpoints found"}},x=async()=>await h("/api/special-education/ieps"),y=async()=>await h("/api/special-education/504-plans"),E=async()=>await h("/api/special-education/accommodations"),I=async()=>await h("/api/special-education/services"),P=async()=>await h("/api/special-education/case-managers"),D=async()=>{const C={},T=o.value.filter(k=>k.path.includes("special-education")||k.path.includes("iep")||k.path.includes("504"));for(const k of T)C[k.path]=await h(k.path);return C},A=async()=>{var T;const C=await f("/students");if(C&&!C.error&&C.data){const k=((T=C.data.students)==null?void 0:T[0])||C.data[0],N=k&&(k.specialEducation||k.iep||k.plan504||k.disabilities||k.accommodations);return{success:!0,hasSpecialEdFields:N,sampleStudent:k,message:N?"OneRoster includes special education data!":"OneRoster does not include special education data"}}return C},_=async()=>{const C=["?filter=specialEducation=true","?filter=iep=true","?filter=plan504=true","?filter=disabilities=*","?filter=accommodations=*"],T={};for(const k of C)T[k]=await f(`/students${k}`);return T};async function b({baseUrl:C,accessToken:T}){const k=Ic(),R=await Ta(k,"testAeriesEndpoint")({baseUrl:C,endpoint:"/schools",accessToken:T});return R.data.data.orgs||R.data.data.schools||R.data.data||[]}async function w({baseUrl:C,accessToken:T,schoolId:k}){const N=Ic(),B=Ta(N,"testAeriesEndpoint"),R=`/classes?filter=school.sourcedId='${k}'`,O=await B({baseUrl:C,endpoint:R,accessToken:T});return O.data.data.classes||O.data.data||[]}return{isConnected:e,isConnecting:r,accessToken:n,connectionStatus:s,isError:i,connectionConfig:a,availableEndpoints:o,showStatus:l,loadDemoCredentials:c,connect:u,disconnect:d,testEndpoint:f,testCustomEndpoint:h,fetchStudents:p,fetchTeachers:v,fetchSpecialEducationStudents:g,fetchIEPRecords:x,fetch504Plans:y,fetchAccommodations:E,fetchServices:I,fetchCaseManagers:P,testAllSpecialEducationEndpoints:D,testOneRosterForSpecialEd:A,testStudentsWithSpecialEd:_,fetchSchools:b,fetchClasses:w}}const Zm=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return btoa(r)},eg=(t,e)=>{const r=atob(t);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r.charCodeAt(s)^e.charCodeAt(s%e.length));return n};function pK(){const t=_o(),e=Bd(),r=fe(!1),n=fe(null),s=()=>{const c=e.currentUser;if(!c)throw new Error("User not authenticated");return c.uid+"_aeries_config_key"};return{isLoading:r,error:n,saveAeriesConfig:async c=>{if(!e.currentUser)throw new Error("User must be authenticated to save configuration");r.value=!0,n.value=null;try{const u=e.currentUser,d=s(),f={baseUrl:Zm(c.baseUrl,d),clientId:Zm(c.clientId,d),clientSecret:Zm(c.clientSecret,d),selectedSchoolId:c.selectedSchoolId||"",selectedClassIds:c.selectedClassIds||[],manualClassInput:c.manualClassInput||"",savedAt:new Date().toISOString(),userId:u.uid},h=xt(t,"users",u.uid,"aeries_config","current");return await br(h,f),{success:!0,message:"Configuration saved securely"}}catch(u){throw n.value=u.message,console.error("Failed to save Aeries configuration:",u),u}finally{r.value=!1}},loadAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to load configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=s(),d=xt(t,"users",c.uid,"aeries_config","current"),f=await $r(d);if(!f.exists())return null;const h=f.data();if(h.userId!==c.uid)throw new Error("Configuration security check failed");return{baseUrl:eg(h.baseUrl,u),clientId:eg(h.clientId,u),clientSecret:eg(h.clientSecret,u),selectedSchoolId:h.selectedSchoolId||"",selectedClassIds:h.selectedClassIds||[],manualClassInput:h.manualClassInput||"",savedAt:h.savedAt}}catch(c){throw n.value=c.message,console.error("Failed to load Aeries configuration:",c),c}finally{r.value=!1}},deleteAeriesConfig:async()=>{if(!e.currentUser)throw new Error("User must be authenticated to delete configuration");r.value=!0,n.value=null;try{const c=e.currentUser,u=xt(t,"users",c.uid,"aeries_config","current");return await Gc(u),{success:!0,message:"Configuration deleted securely"}}catch(c){throw n.value=c.message,console.error("Failed to delete Aeries configuration:",c),c}finally{r.value=!1}},hasSavedConfig:async()=>{if(!e.currentUser)return!1;try{const c=e.currentUser,u=xt(t,"users",c.uid,"aeries_config","current");return(await $r(u)).exists()}catch(c){return console.error("Failed to check for saved configuration:",c),!1}}}}const mK={name:"AeriesAPIConnector",setup(){const{isConnected:t,isConnecting:e,accessToken:r,connectionStatus:n,isError:s,connectionConfig:i,availableEndpoints:a,showStatus:o,loadDemoCredentials:l,connect:c,disconnect:u,testEndpoint:d,testAllSpecialEducationEndpoints:f,testOneRosterForSpecialEd:h,testStudentsWithSpecialEd:p,fetchSchools:v,fetchClasses:g}=hK(),{isLoading:x,error:y,saveAeriesConfig:E,loadAeriesConfig:I,deleteAeriesConfig:P,hasSavedConfig:D}=pK(),A=fe(!1),_=fe(null),b=fe(""),w=fe(null),C=fe([]),T=fe(""),k=fe([]),N=fe([]),B=fe(!1),R=fe(""),O=fe(""),U=fe(!1),M=fe({oneroster:!1,nativeAeries:!1}),q=fe([]),H=fe([{path:"/orgs",name:"Organizations",description:"District information"},{path:"/schools",name:"Schools",description:"School sites"},{path:"/academicSessions",name:"Academic Sessions",description:"Terms/semesters"},{path:"/grades",name:"Grades",description:"Grade levels"},{path:"/courses",name:"Courses",description:"Course catalog"},{path:"/classes",name:"Classes",description:"Sections (MST table)"},{path:"/teachers",name:"Teachers",description:"Teacher roster"},{path:"/students",name:"Students",description:"Student roster"},{path:"/enrollments",name:"Enrollments",description:"Student-to-class links"}]),L=fe([{path:"/api/special-education/students",name:"SPED Students",description:"Students with IEP/504 plans"},{path:"/api/special-education/ieps",name:"IEP Records",description:"IEP documents and data"},{path:"/api/special-education/504-plans",name:"504 Plans",description:"504 plan records"},{path:"/api/special-education/accommodations",name:"Accommodations",description:"Student accommodations"},{path:"/api/special-education/services",name:"Services",description:"Related services"},{path:"/api/special-education/case-managers",name:"Case Managers",description:"Case manager assignments"},{path:"/api/students/special-education",name:"SPED Students Alt",description:"Alternative SPED endpoint"},{path:"/api/iep/students",name:"IEP Students",description:"IEP student data"},{path:"/api/504/students",name:"504 Students",description:"504 student data"}]),z=be(()=>i.baseUrl&&i.clientId&&i.clientSecret),K=async()=>{if(await c())try{A.value=!0;const se=await v({baseUrl:i.baseUrl,accessToken:r.value});C.value=se||[],T.value=""}catch(se){console.error("Failed to fetch schools:",se),o("Failed to fetch schools",!0),C.value=[]}finally{A.value=!1}},te=async re=>{A.value=!0,b.value=re,_.value=null,w.value=null;const se=await d(re);se&&!se.error?(_.value=se.data,w.value=se.responseTime):se&&se.error&&(_.value={error:se.error}),A.value=!1},ge=async()=>{A.value=!0,await f(),A.value=!1},ie=async()=>{A.value=!0,b.value="/students (SPED check)",_.value=null,w.value=null;const re=await h();re&&!re.error?(_.value=re,o(re.message)):re&&re.error&&(_.value={error:re.error},o(` OneRoster test failed: ${re.error}`,!0)),A.value=!1},he=async()=>{A.value=!0,b.value="/students (SPED filters)",_.value=null,w.value=null;const re=await p();re&&(_.value=re,o("OneRoster SPED filter tests completed")),A.value=!1};Qt(T,async re=>{if(!re){k.value=[],N.value=[];return}B.value=!1,R.value="",A.value=!0;try{k.value=await g({baseUrl:i.baseUrl,accessToken:r.value,schoolId:re}),N.value=[]}catch{B.value=!0,k.value=[],N.value=[]}finally{A.value=!1}});const Z=be(()=>t.value&&C.value.length>0),Q=be(()=>Z.value&&T.value),xe=be(()=>M.value.oneroster||M.value.nativeAeries),X=()=>{const re=[];M.value.oneroster&&re.push(...H.value),M.value.nativeAeries&&re.push(...L.value),a.value=re},W=(re,se=!1)=>{O.value=re,U.value=se,setTimeout(()=>{O.value="",U.value=!1},5e3)},Y=async()=>{try{const re={baseUrl:i.baseUrl,clientId:i.clientId,clientSecret:i.clientSecret,selectedSchoolId:T.value,selectedClassIds:N.value,manualClassInput:R.value,selectedApiTypes:M.value,selectedEndpoints:q.value};await E(re),W(" Configuration saved securely to Firebase!")}catch(re){console.error("Failed to save configuration:",re),W(` Failed to save configuration: ${re.message}`,!0)}},ee=async()=>{try{const re=await I();if(!re){W(" No saved configuration found",!0);return}i.baseUrl=re.baseUrl||"",i.clientId=re.clientId||"",i.clientSecret=re.clientSecret||"",T.value=re.selectedSchoolId||"",N.value=re.selectedClassIds||[],R.value=re.manualClassInput||"",re.selectedApiTypes&&(M.value=re.selectedApiTypes),re.selectedEndpoints&&(q.value=re.selectedEndpoints),X();const se=re.savedAt?new Date(re.savedAt).toLocaleString():"Unknown";W(` Configuration loaded securely (saved: ${se})`)}catch(re){console.error("Failed to load configuration:",re),W(` Failed to load configuration: ${re.message}`,!0)}},ve=async()=>{if(confirm("Are you sure you want to permanently delete the saved configuration? This action cannot be undone."))try{await P(),W(" Configuration permanently deleted from Firebase!")}catch(re){console.error("Failed to clear configuration:",re),W(` Failed to clear configuration: ${re.message}`,!0)}};return tr(async()=>{try{if(await D()){const se=await I();se&&(i.baseUrl=se.baseUrl||"",i.clientId=se.clientId||"",i.clientSecret=se.clientSecret||"",se.selectedApiTypes&&(M.value=se.selectedApiTypes),se.selectedEndpoints&&(q.value=se.selectedEndpoints),X(),W(" Configuration auto-loaded securely from Firebase"))}}catch(re){console.error("Failed to auto-load configuration:",re)}}),{connectionConfig:i,isConnected:t,isConnecting:e,isLoading:A,connectionStatus:n,isError:s,apiResults:_,currentEndpoint:b,responseTime:w,availableEndpoints:a,canConnect:z,loadDemoCredentials:l,connect:K,disconnect:u,testEndpoint:te,handleTestSpecialEd:ge,handleTestOneRosterSpecialEd:ie,handleTestStudentsWithSpecialEd:he,schools:C,selectedSchoolId:T,classes:k,selectedClassIds:N,classesFetchError:B,manualClassInput:R,canShowSchoolDropdown:Z,canShowClasses:Q,configStatus:O,configError:U,storageLoading:x,storageError:y,saveConfiguration:Y,loadConfiguration:ee,clearConfiguration:ve,selectedApiTypes:M,selectedEndpoints:q,onerosterEndpoints:H,nativeAeriesEndpoints:L,hasSelectedApiTypes:xe,updateAvailableEndpoints:X}}},gK={class:"aeries-api-connector"},vK={class:"connection-form"},xK={class:"form-group"},yK=["disabled"],EK={class:"form-group"},_K=["disabled"],bK={class:"form-group"},SK=["disabled"],TK={class:"button-group"},AK=["disabled"],wK=["disabled"],IK={class:"api-type-selection"},CK={class:"api-type-options"},kK={class:"api-type-option"},DK={class:"checkbox-label"},PK={class:"api-type-option"},RK={class:"checkbox-label"},FK={key:0,class:"endpoint-selection"},OK={class:"endpoint-categories"},NK={key:0,class:"endpoint-category"},MK={class:"endpoint-checkboxes"},BK=["value"],LK={class:"endpoint-name"},UK={class:"endpoint-path-small"},VK={key:1,class:"endpoint-category"},$K={class:"endpoint-checkboxes"},jK=["value"],HK={class:"endpoint-name"},GK={class:"endpoint-path-small"},zK={class:"config-management"},WK={class:"config-buttons"},KK=["disabled"],qK=["disabled"],XK=["disabled"],YK={key:1,class:"api-testing"},QK={class:"special-ed-section"},JK={class:"quick-test-buttons"},ZK=["disabled"],eq=["disabled"],tq=["disabled"],rq=["disabled"],nq=["disabled"],sq=["disabled"],aq={class:"endpoint-grid"},iq={class:"endpoint-path"},oq={class:"endpoint-description"},lq=["onClick","disabled"],cq={key:0,class:"api-results"},uq={class:"results-header"},dq={class:"endpoint-tested"},fq={key:0,class:"response-time"},hq={class:"results-content"},pq={key:2,class:"form-group"},mq=["value"],gq={key:3,class:"form-group"},vq={key:0},xq=["value"],yq={key:1};function Eq(t,e,r,n,s,i){return V(),j("div",gK,[e[48]||(e[48]=rs('<h3 data-v-0f37c4fc>Aeries API Connection</h3><div class="api-info-section" data-v-0f37c4fc><h4 data-v-0f37c4fc>Getting Students with IEP/504 Plans</h4><div class="info-grid" data-v-0f37c4fc><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> OneRoster API (Limited)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> All students, basic info</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Cannot filter:</strong> Students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> You&#39;d get ALL students, not just SPED</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> Custom Aeries API (Recommended)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Only students with IEP/504 plans</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Includes:</strong> Accommodations, services, case managers</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Perfect for your use case</p></div><div class="info-card" data-v-0f37c4fc><h5 data-v-0f37c4fc> CSV Import (Fallback)</h5><p data-v-0f37c4fc><strong data-v-0f37c4fc>Can get:</strong> Filtered data from Aeries export</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Process:</strong> Export SPED students  Import CSV</p><p data-v-0f37c4fc><strong data-v-0f37c4fc>Result:</strong> Works but requires manual steps</p></div></div><div class="testing-note" data-v-0f37c4fc><p data-v-0f37c4fc><strong data-v-0f37c4fc>Test the buttons below to see what your Aeries instance supports!</strong></p></div></div>',2)),m("div",vK,[m("div",xK,[e[24]||(e[24]=m("label",{for:"baseUrl"},"Base URL:",-1)),je(m("input",{id:"baseUrl","onUpdate:modelValue":e[0]||(e[0]=a=>n.connectionConfig.baseUrl=a),type:"url",placeholder:"https://demo.aeries.net/aeries",disabled:n.isConnected},null,8,yK),[[Ct,n.connectionConfig.baseUrl]])]),m("div",EK,[e[25]||(e[25]=m("label",{for:"clientId"},"Client ID:",-1)),je(m("input",{id:"clientId","onUpdate:modelValue":e[1]||(e[1]=a=>n.connectionConfig.clientId=a),type:"text",placeholder:"Enter your Client ID",disabled:n.isConnected},null,8,_K),[[Ct,n.connectionConfig.clientId]])]),m("div",bK,[e[26]||(e[26]=m("label",{for:"clientSecret"},"Client Secret:",-1)),je(m("input",{id:"clientSecret","onUpdate:modelValue":e[2]||(e[2]=a=>n.connectionConfig.clientSecret=a),type:"password",placeholder:"Enter your Client Secret",disabled:n.isConnected},null,8,SK),[[Ct,n.connectionConfig.clientSecret]])]),m("div",TK,[m("button",{onClick:e[3]||(e[3]=(...a)=>n.connect&&n.connect(...a)),disabled:!n.canConnect||n.isConnecting,class:"btn-primary"},ce(n.isConnecting?"Connecting...":"Connect"),9,AK),n.isConnected?(V(),j("button",{key:0,onClick:e[4]||(e[4]=(...a)=>n.disconnect&&n.disconnect(...a)),class:"btn-secondary"}," Disconnect ")):Oe("",!0),m("button",{onClick:e[5]||(e[5]=(...a)=>n.loadDemoCredentials&&n.loadDemoCredentials(...a)),disabled:n.isConnected,class:"btn-demo"}," Load Demo Credentials ",8,wK)]),m("div",IK,[e[37]||(e[37]=m("h4",null,"Select API Types",-1)),e[38]||(e[38]=m("p",{class:"api-type-description"},"Choose which Aeries API types you want to use. This determines which endpoints will be available for testing and data import.",-1)),m("div",CK,[m("div",kK,[m("label",DK,[je(m("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>n.selectedApiTypes.oneroster=a),onChange:e[7]||(e[7]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[St,n.selectedApiTypes.oneroster]]),e[27]||(e[27]=m("span",{class:"checkmark"},null,-1)),e[28]||(e[28]=m("strong",null,"OneRoster API",-1))]),e[29]||(e[29]=m("p",{class:"api-type-desc"},"Standard OneRoster endpoints for basic student, teacher, and class data",-1))]),m("div",PK,[m("label",RK,[je(m("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>n.selectedApiTypes.nativeAeries=a),onChange:e[9]||(e[9]=(...a)=>n.updateAvailableEndpoints&&n.updateAvailableEndpoints(...a))},null,544),[[St,n.selectedApiTypes.nativeAeries]]),e[30]||(e[30]=m("span",{class:"checkmark"},null,-1)),e[31]||(e[31]=m("strong",null,"Native Aeries v5 API",-1))]),e[32]||(e[32]=m("p",{class:"api-type-desc"},"Aeries-specific endpoints for special education, IEP, and 504 plan data",-1))])]),n.hasSelectedApiTypes?(V(),j("div",FK,[e[35]||(e[35]=m("h5",null,"Select Endpoints to Use",-1)),e[36]||(e[36]=m("p",{class:"endpoint-description"},"Check the endpoints you want to enable for data import and testing.",-1)),m("div",OK,[n.selectedApiTypes.oneroster?(V(),j("div",NK,[e[33]||(e[33]=m("h6",null,"OneRoster Endpoints",-1)),m("div",MK,[(V(!0),j(Ne,null,He(n.onerosterEndpoints,a=>(V(),j("label",{key:a.path,class:"endpoint-checkbox"},[je(m("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>n.selectedEndpoints=o),value:a.path},null,8,BK),[[St,n.selectedEndpoints]]),m("span",LK,ce(a.name),1),m("span",UK,ce(a.path),1)]))),128))])])):Oe("",!0),n.selectedApiTypes.nativeAeries?(V(),j("div",VK,[e[34]||(e[34]=m("h6",null,"Native Aeries v5 Endpoints",-1)),m("div",$K,[(V(!0),j(Ne,null,He(n.nativeAeriesEndpoints,a=>(V(),j("label",{key:a.path,class:"endpoint-checkbox"},[je(m("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedEndpoints=o),value:a.path},null,8,jK),[[St,n.selectedEndpoints]]),m("span",HK,ce(a.name),1),m("span",GK,ce(a.path),1)]))),128))])])):Oe("",!0)])])):Oe("",!0)]),m("div",zK,[e[39]||(e[39]=m("h4",null,"Save/Load Configuration",-1)),e[40]||(e[40]=m("div",{class:"security-note"},[m("p",null,[m("strong",null," Security:"),Ve(" Your API credentials are encrypted and stored securely in Firebase. Only you can access your saved configuration.")])],-1)),m("div",WK,[m("button",{onClick:e[12]||(e[12]=(...a)=>n.saveConfiguration&&n.saveConfiguration(...a)),disabled:!n.canConnect||n.storageLoading,class:"btn-save"},ce(n.storageLoading?" Saving...":" Save Configuration"),9,KK),m("button",{onClick:e[13]||(e[13]=(...a)=>n.loadConfiguration&&n.loadConfiguration(...a)),disabled:n.storageLoading,class:"btn-load"},ce(n.storageLoading?" Loading...":" Load Saved Configuration"),9,qK),m("button",{onClick:e[14]||(e[14]=(...a)=>n.clearConfiguration&&n.clearConfiguration(...a)),disabled:n.storageLoading,class:"btn-clear"},ce(n.storageLoading?" Deleting...":" Clear Saved Configuration"),9,XK)]),n.configStatus?(V(),j("div",{key:0,class:ut(["config-status",{error:n.configError}])},ce(n.configStatus),3)):Oe("",!0)])]),n.connectionStatus?(V(),j("div",{key:0,class:ut(["status-message",{error:n.isError}])},ce(n.connectionStatus),3)):Oe("",!0),n.isConnected?(V(),j("div",YK,[e[43]||(e[43]=m("h4",null,"Test API Endpoints",-1)),m("div",QK,[e[41]||(e[41]=m("h5",null,"Special Education Data (IEP/504)",-1)),m("div",JK,[m("button",{onClick:e[15]||(e[15]=(...a)=>n.handleTestSpecialEd&&n.handleTestSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-special"},ce(n.isLoading?"Testing...":"Test All SPED Endpoints"),9,ZK),m("button",{onClick:e[16]||(e[16]=(...a)=>n.handleTestOneRosterSpecialEd&&n.handleTestOneRosterSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster for SPED Data ",8,eq),m("button",{onClick:e[17]||(e[17]=(...a)=>n.handleTestStudentsWithSpecialEd&&n.handleTestStudentsWithSpecialEd(...a)),disabled:n.isLoading,class:"btn-test-oneroster"}," Test OneRoster SPED Filters ",8,tq),m("button",{onClick:e[18]||(e[18]=a=>t.handleTestEndpoint("/api/special-education/students")),disabled:n.isLoading,class:"btn-test-special"}," SPED Students ",8,rq),m("button",{onClick:e[19]||(e[19]=a=>t.handleTestEndpoint("/api/special-education/ieps")),disabled:n.isLoading,class:"btn-test-special"}," IEP Records ",8,nq),m("button",{onClick:e[20]||(e[20]=a=>t.handleTestEndpoint("/api/special-education/504-plans")),disabled:n.isLoading,class:"btn-test-special"}," 504 Plans ",8,sq)])]),m("div",aq,[(V(!0),j(Ne,null,He(n.availableEndpoints,a=>(V(),j("div",{key:a.path,class:"endpoint-card"},[m("h5",null,ce(a.name),1),m("p",iq,ce(a.path),1),m("p",oq,ce(a.description),1),m("button",{onClick:o=>n.testEndpoint(a.path),disabled:n.isLoading,class:"btn-test"},ce(n.isLoading&&n.currentEndpoint===a.path?"Testing...":"Test"),9,lq)]))),128))]),n.apiResults?(V(),j("div",cq,[e[42]||(e[42]=m("h4",null,"API Response",-1)),m("div",uq,[m("span",dq,"Endpoint: "+ce(n.currentEndpoint),1),n.responseTime?(V(),j("span",fq,"Response time: "+ce(n.responseTime)+"ms",1)):Oe("",!0)]),m("div",hq,[m("pre",null,ce(JSON.stringify(n.apiResults,null,2)),1)])])):Oe("",!0)])):Oe("",!0),n.canShowSchoolDropdown?(V(),j("div",pq,[e[45]||(e[45]=m("label",null,"School",-1)),je(m("select",{"onUpdate:modelValue":e[21]||(e[21]=a=>n.selectedSchoolId=a)},[e[44]||(e[44]=m("option",{value:"",disabled:""},"Select a school",-1)),(V(!0),j(Ne,null,He(n.schools,a=>(V(),j("option",{key:a.sourcedId||a.id||a.schoolId,value:a.sourcedId||a.id||a.schoolId},ce(a.name||a.title||a.schoolName),9,mq))),128))],512),[[vr,n.selectedSchoolId]])])):Oe("",!0),n.canShowClasses?(V(),j("div",gq,[e[47]||(e[47]=m("label",null,"Case Manager Classes",-1)),n.classesFetchError?(V(),j("div",yq,[e[46]||(e[46]=m("p",{class:"error"},"Could not fetch classes. Enter class names manually (comma separated):",-1)),je(m("input",{"onUpdate:modelValue":e[23]||(e[23]=a=>n.manualClassInput=a),type:"text",placeholder:"Class1, Class2, ..."},null,512),[[Ct,n.manualClassInput]])])):(V(),j("div",vq,[je(m("select",{"onUpdate:modelValue":e[22]||(e[22]=a=>n.selectedClassIds=a),multiple:""},[(V(!0),j(Ne,null,He(n.classes,a=>(V(),j("option",{key:a.sourcedId||a.id||a.classId,value:a.sourcedId||a.id||a.classId},ce(a.title||a.name||a.className),9,xq))),128))],512),[[vr,n.selectedClassIds]])]))])):Oe("",!0)])}const _q=At(mK,[["render",Eq],["__scopeId","data-v-0f37c4fc"]]),ql=fe(null);function f1(){const t=new Promise(e=>{const r=fx(es,async n=>{if(n)try{const s=xt(ot,"users",n.uid),i=await $r(s);i.exists()?ql.value={uid:n.uid,email:n.email,displayName:n.displayName,...i.data()}:(console.warn(`User ${n.uid} exists in Auth but not in users collection`),ql.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null})}catch(s){console.error("Error fetching user document:",s),ql.value={uid:n.uid,email:n.email,displayName:n.displayName,role:null}}else ql.value=null;e(ql.value),r()})});return{currentUser:ql,waitForAuthInit:t}}const bq={key:0,class:"app-settings-panel"},Sq={class:"settings-section"},Tq={class:"grades-checkboxes"},Aq=["checked"],wq=["value"],Iq={class:"settings-section"},Cq={key:0,class:"class-service-fieldset"},kq={class:"checkbox-inline-group"},Dq=["value"],Pq={key:1,class:"class-service-fieldset"},Rq={class:"checkbox-inline-group"},Fq=["value"],Oq={key:2,class:"class-service-fieldset"},Nq={class:"checkbox-inline-group"},Mq=["value"],Bq={key:3,class:"class-service-fieldset"},Lq={class:"checkbox-inline-group"},Uq={key:4,class:"class-service-fieldset"},Vq={class:"checkbox-inline-group"},$q=["onClick"],jq={class:"checkbox-inline-group"},Hq=["onClick"],Gq=["onClick"],zq={class:"add-class-service"},Wq={class:"custom-chips"},Kq=["onClick"],qq={class:"settings-section"},Xq={class:"service-providers-defaults"},Yq=["value"],Qq={class:"service-providers-custom"},Jq={class:"custom-provider-inputs"},Zq={class:"custom-chips"},eX=["onClick"],tX={class:"settings-section"},rX={class:"periods-controls"},nX={class:"period-number-control"},sX={key:0,class:"period-labels"},aX={class:"period-labels-grid"},iX=["onUpdate:modelValue","placeholder"],oX={key:1,class:"period-preview"},lX={class:"settings-section"},cX={class:"action-buttons"},uX=["disabled"],dX=["disabled"],fX=["disabled"],hX={key:1,class:"not-admin"},pX={__name:"AppSettings",setup(t){const{currentUser:e}=f1(),r=be(()=>{var w;return((w=e.value)==null?void 0:w.role)||null}),n=be(()=>["admin","administrator","administrator_504_CM","sped_chair"].includes(r.value)),s=[{value:"K",label:"K"},...Array.from({length:12},(w,C)=>({value:(C+1).toString(),label:(C+1).toString()}))],i=["English","Math","History","Science"],a=[{name:"Speech-Language Therapy",abbreviation:"SLP"},{name:"Occupational Therapy",abbreviation:"OT"},{name:"Physical Therapy",abbreviation:"PT"},{name:"School Counseling",abbreviation:"SC"},{name:"School-Based Mental Health Services",abbreviation:"MH"},{name:"Transportation",abbreviation:"TR"},{name:"Audiology Services",abbreviation:"AUD"},{name:"Vision Services",abbreviation:"VI"},{name:"Assistive Technology",abbreviation:"AT"},{name:"Deaf and Hard of Hearing Services",abbreviation:"DHH"},{name:"Orientation and Mobility",abbreviation:"O&M"},{name:"Behavioral Intervention Services",abbreviation:"BIS"},{name:"Health/Nursing Services",abbreviation:"HN"},{name:"Social Work Services",abbreviation:"SW"}],{loadAppSettings:o,saveAppSettings:l}=ma(),c=fe(!1),u=fe(!1),d=fe(""),f=fe(!1),h=fe(""),p=fe(""),v=fe({grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]}),g=()=>{const w=N2(v.value.numPeriods,{min:1,max:15,decimals:0});if(w===null)return D("Invalid number of periods. Must be between 1 and 15.",!0),!1;v.value.numPeriods=w;for(let C=0;C<v.value.numPeriods;C++){v.value.periodLabels[C]||(v.value.periodLabels[C]=`Per${C+1}`);const T=gr(v.value.periodLabels[C],{trim:!0,maxLength:3,removeDangerous:!0}),k=pn(T);if(!k.isSafe)return D(`Security threat detected in period ${C+1} label: ${k.threats.join(", ")}`,!0),!1;const N=sm(T,{max:3,fieldName:`Period ${C+1} label`});if(!N.isValid)return D(N.error,!0),!1;v.value.periodLabels[C]=T}if(v.value.customServiceProviders)for(let C=0;C<v.value.customServiceProviders.length;C++){const T=v.value.customServiceProviders[C];if(T.name){const k=gr(T.name,{trim:!0,maxLength:100,removeDangerous:!0}),N=pn(k);if(!N.isSafe)return D(`Security threat detected in custom provider ${C+1}: ${N.threats.join(", ")}`,!0),!1;T.name=k}if(T.abbreviation){const k=gr(T.abbreviation,{trim:!0,maxLength:10,removeDangerous:!0}),N=pn(k);if(!N.isSafe)return D(`Security threat detected in custom provider abbreviation ${C+1}: ${N.threats.join(", ")}`,!0),!1;T.abbreviation=k}}return!0},x=be(()=>a),y=be(()=>s.every(w=>v.value.grades.includes(w.value))),E=w=>{w.target.checked?v.value.grades=s.map(C=>C.value):v.value.grades=[]},I=()=>{if(!h.value.trim()||!p.value.trim()){D("Both name and abbreviation are required for custom service providers",!0);return}if(v.value.customServiceProviders.some(C=>C.abbreviation.toLowerCase()===p.value.toLowerCase())){D("A service provider with this abbreviation already exists",!0);return}v.value.customServiceProviders.push({name:h.value.trim(),abbreviation:p.value.trim()}),h.value="",p.value="",D("Custom service provider added successfully")},P=w=>{v.value.customServiceProviders.splice(w,1)};Qt(()=>v.value.numPeriods,w=>{const C=N2(w,{min:1,max:15,decimals:0});if(C!==null&&C!==w&&(v.value.numPeriods=C),v.value.periodLabels.length<v.value.numPeriods)for(let T=v.value.periodLabels.length;T<v.value.numPeriods;T++)v.value.periodLabels.push(`Per${T+1}`)}),Qt(()=>v.value.periodLabels,w=>{w.forEach((C,T)=>{C&&C.length>3&&(v.value.periodLabels[T]=C.substring(0,3))})},{deep:!0});const D=(w,C=!1)=>{d.value=w,f.value=C,setTimeout(()=>{d.value="",f.value=!1},5e3)},A=async(w=!1)=>{c.value=!0;try{const C=await o();if(C){if(v.value={...v.value,...C},!v.value.periodLabels||v.value.periodLabels.length<v.value.numPeriods){v.value.periodLabels=[];for(let T=0;T<v.value.numPeriods;T++)v.value.periodLabels[T]=v.value.periodLabels[T]||`Per${T+1}`}w&&D("Settings loaded successfully")}}catch(C){D("Error loading settings",!0),console.error("Load settings error:",C)}finally{c.value=!1}},_=async()=>{if(!Is("saveAppSettings",10,6e4).allowed){D("Too many save requests. Please wait before saving again.",!0);return}if(g()){u.value=!0;try{await l(v.value),D("Settings saved successfully")}catch(C){D("Error saving settings",!0),console.error("Save settings error:",C)}finally{u.value=!1}}},b=()=>{confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(v.value={grades:["7","8"],classServices:[{name:"SDC",enabledSubcategories:[...i]},{name:"Co-teach",enabledSubcategories:[...i]}],serviceProviders:["SLP","OT","MH"],serviceProvidersDetails:a,customServiceProviders:[],numPeriods:7,periodLabels:["Per1","Per2","Per3","Per4","Per5","Per6","Per7"]},D("Settings reset to defaults"))};return tr(()=>{A()}),(w,C)=>n.value?(V(),j("div",bq,[C[33]||(C[33]=m("h2",null,"App Settings",-1)),m("form",{onSubmit:Ds(_,["prevent"])},[m("section",Sq,[m("fieldset",null,[C[17]||(C[17]=m("legend",null,"Grades",-1)),m("div",Tq,[m("label",null,[m("input",{type:"checkbox",checked:y.value,onChange:E},null,40,Aq),C[16]||(C[16]=m("span",null,"Select All",-1))]),(V(),j(Ne,null,He(s,T=>m("label",{key:T.value},[je(m("input",{type:"checkbox","onUpdate:modelValue":C[0]||(C[0]=k=>v.value.grades=k),value:T.value},null,8,wq),[[St,v.value.grades]]),m("span",null,ce(T.label),1)])),64))])])]),m("section",Iq,[C[26]||(C[26]=m("h3",null,"Class Services",-1)),v.value.classServices[0]&&v.value.classServices[0].enabledSubcategories?(V(),j("div",Cq,[m("fieldset",null,[C[18]||(C[18]=m("legend",null,"SDC",-1)),m("div",kq,[(V(),j(Ne,null,He(i,T=>m("label",{key:T},[je(m("input",{type:"checkbox","onUpdate:modelValue":C[1]||(C[1]=k=>v.value.classServices[0].enabledSubcategories=k),value:T},null,8,Dq),[[St,v.value.classServices[0].enabledSubcategories]]),Ve(" "+ce(T),1)])),64))])])])):Oe("",!0),v.value.classServices[1]&&v.value.classServices[1].enabledSubcategories?(V(),j("div",Pq,[m("fieldset",null,[C[19]||(C[19]=m("legend",null,"Co-teach",-1)),m("div",Rq,[(V(),j(Ne,null,He(i,T=>m("label",{key:T},[je(m("input",{type:"checkbox","onUpdate:modelValue":C[2]||(C[2]=k=>v.value.classServices[1].enabledSubcategories=k),value:T},null,8,Fq),[[St,v.value.classServices[1].enabledSubcategories]]),Ve(" "+ce(T),1)])),64))])])])):Oe("",!0),v.value.classServices[2]&&v.value.classServices[2].enabledSubcategories?(V(),j("div",Oq,[m("fieldset",null,[C[20]||(C[20]=m("legend",null,"RSP",-1)),m("div",Nq,[(V(),j(Ne,null,He(i,T=>m("label",{key:T},[je(m("input",{type:"checkbox","onUpdate:modelValue":C[3]||(C[3]=k=>v.value.classServices[2].enabledSubcategories=k),value:T},null,8,Mq),[[St,v.value.classServices[2].enabledSubcategories]]),Ve(" "+ce(T),1)])),64))])])])):Oe("",!0),v.value.classServices[3]&&v.value.classServices[3].enabledSubcategories?(V(),j("div",Bq,[m("fieldset",null,[C[22]||(C[22]=m("legend",null,"Directed Studies",-1)),m("div",Lq,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":C[4]||(C[4]=T=>v.value.classServices[3].enabledSubcategories=T),value:"Directed Studies"},null,512),[[St,v.value.classServices[3].enabledSubcategories]]),C[21]||(C[21]=Ve(" Directed Studies "))])])])])):Oe("",!0),v.value.classServices[4]&&v.value.classServices[4].enabledSubcategories?(V(),j("div",Uq,[m("fieldset",null,[C[24]||(C[24]=m("legend",null,"FA",-1)),m("div",Vq,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":C[5]||(C[5]=T=>v.value.classServices[4].enabledSubcategories=T),value:"FA"},null,512),[[St,v.value.classServices[4].enabledSubcategories]]),C[23]||(C[23]=Ve(" FA "))])])])])):Oe("",!0),(V(!0),j(Ne,null,He(v.value.classServices.slice(5),(T,k)=>(V(),j("div",{key:T.name,class:"class-service-fieldset"},[m("fieldset",null,[m("legend",null,[Ve(ce(T.name)+" ",1),m("button",{type:"button",onClick:N=>w.removeClassService(k+5),title:"Remove Service"},"",8,$q)]),m("div",jq,[(V(!0),j(Ne,null,He(T.subcategories,(N,B)=>(V(),j("label",{key:N},[C[25]||(C[25]=m("input",{type:"checkbox",checked:!0,disabled:""},null,-1)),Ve(" "+ce(N)+" ",1),m("button",{type:"button",onClick:R=>w.removeSubcategory(k+5,B),title:"Remove Subcategory"},"",8,Hq)]))),128)),m("button",{type:"button",onClick:N=>w.addSubcategory(k+5)},"+ Add Subcategory",8,Gq)])])]))),128)),m("div",zq,[je(m("input",{type:"text","onUpdate:modelValue":C[6]||(C[6]=T=>w.newServiceName=T),placeholder:"New Service Name",maxlength:"18"},null,512),[[Ct,w.newServiceName]]),je(m("input",{type:"text","onUpdate:modelValue":C[7]||(C[7]=T=>w.newServiceSubcat=T),placeholder:"Add Subcategory",maxlength:"18",onKeyup:C[8]||(C[8]=kw((...T)=>w.addNewServiceSubcat&&w.addNewServiceSubcat(...T),["enter"]))},null,544),[[Ct,w.newServiceSubcat]]),m("button",{type:"button",onClick:C[9]||(C[9]=(...T)=>w.addNewServiceSubcat&&w.addNewServiceSubcat(...T))},"+ Add Subcategory"),m("div",Wq,[(V(!0),j(Ne,null,He(w.newServiceSubcats,(T,k)=>(V(),j("span",{key:T,class:"chip"},[Ve(ce(T)+" ",1),m("button",{type:"button",onClick:N=>w.removeNewServiceSubcat(k)},"",8,Kq)]))),128))]),m("button",{type:"button",onClick:C[10]||(C[10]=(...T)=>w.addClassService&&w.addClassService(...T))},"+ Add Class Service")])]),m("section",qq,[m("fieldset",null,[C[28]||(C[28]=m("legend",null,"Service Providers",-1)),m("div",Xq,[(V(!0),j(Ne,null,He(x.value,T=>(V(),j("label",{key:T.abbreviation},[je(m("input",{type:"checkbox","onUpdate:modelValue":C[11]||(C[11]=k=>v.value.serviceProviders=k),value:T.abbreviation},null,8,Yq),[[St,v.value.serviceProviders]]),m("span",null,ce(T.name)+" ("+ce(T.abbreviation)+")",1)]))),128))]),m("div",Qq,[C[27]||(C[27]=m("label",null,"Add Custom Service Provider:",-1)),m("div",Jq,[je(m("input",{type:"text","onUpdate:modelValue":C[12]||(C[12]=T=>h.value=T),placeholder:"Full Name",maxlength:"100"},null,512),[[Ct,h.value]]),je(m("input",{type:"text","onUpdate:modelValue":C[13]||(C[13]=T=>p.value=T),placeholder:"Abbreviation",maxlength:"10"},null,512),[[Ct,p.value]]),m("button",{type:"button",onClick:I},"Add")]),m("div",Zq,[(V(!0),j(Ne,null,He(v.value.customServiceProviders,(T,k)=>(V(),j("span",{key:k,class:"chip"},[Ve(ce(T.name)+" ("+ce(T.abbreviation)+") ",1),m("button",{type:"button",onClick:N=>P(k)},"",8,eX)]))),128))])])])]),m("section",tX,[m("fieldset",null,[C[32]||(C[32]=m("legend",null,"Periods",-1)),m("div",rX,[m("div",nX,[m("label",null,[C[29]||(C[29]=Ve(" Number of Periods (max 15): ")),je(m("input",{type:"number","onUpdate:modelValue":C[14]||(C[14]=T=>v.value.numPeriods=T),min:"1",max:"15",class:"period-number-input"},null,512),[[Ct,v.value.numPeriods]])])]),v.value.numPeriods>0?(V(),j("div",sX,[C[30]||(C[30]=m("h4",null,"Period Labels (3 chars max each):",-1)),m("div",aX,[(V(!0),j(Ne,null,He(v.value.numPeriods,T=>(V(),j("div",{key:T,class:"period-label-item"},[m("label",null,[Ve(" Period "+ce(T)+": ",1),je(m("input",{type:"text","onUpdate:modelValue":k=>v.value.periodLabels[T-1]=k,maxlength:"3",placeholder:`Per${T}`,class:"period-label-input"},null,8,iX),[[Ct,v.value.periodLabels[T-1]]])])]))),128))])])):Oe("",!0),v.value.numPeriods>0?(V(),j("div",oX,[C[31]||(C[31]=m("strong",null,"Preview:",-1)),(V(!0),j(Ne,null,He(v.value.numPeriods,T=>(V(),j("span",{key:T,class:"period-preview-item"},ce(v.value.periodLabels[T-1]||`Per${T}`),1))),128))])):Oe("",!0)])])]),m("section",lX,[m("div",cX,[m("button",{type:"submit",disabled:u.value||c.value}," Save Settings",8,uX),m("button",{type:"button",onClick:C[15]||(C[15]=()=>A(!0)),disabled:c.value}," Load",8,dX),m("button",{type:"button",onClick:b,disabled:c.value}," Reset",8,fX)]),d.value?(V(),j("div",{key:0,class:ut(["status-message",{error:f.value,success:!f.value}])},ce(d.value),3)):Oe("",!0)])],32)])):(V(),j("div",hX,C[34]||(C[34]=[m("h2",null,"App Settings",-1),m("p",null,"Access denied. You must be an admin to view this page.",-1)])))}},mX=At(pX,[["__scopeId","data-v-f311a398"]]),gX={class:"admin-aide-assignment"},vX={class:"header"},xX={class:"header-actions"},yX=["disabled"],EX={key:0},_X={key:1},bX={class:"content"},SX={key:0,class:"error-message"},TX={key:1,class:"error-message"},AX={key:2,class:"loading"},wX={key:3,class:"schedule-container"},IX={class:"aide-schedule-table"},CX={class:"aide-name"},kX=["value","onChange"],DX=["value"],PX={class:"assignment-buttons"},RX=["onClick"],FX=["onClick"],OX={class:"direct-assignment-cell"},NX=["value","onChange"],MX=["value"],BX={class:"assignment-buttons"},LX=["onClick"],UX=["onClick"],VX={__name:"AdminAideAssignment",setup(t){const e=Al(),{userList:r,fetchUsers:n}=pa(),{students:s,fetchStudents:i}=Ua(),a=Ei(),{aideAssignment:o,loadAideAssignments:l,saveAllAideAssignments:c}=yy(),{loadAppSettings:u}=ma(),{labels:d}=Pf(),f=fe(!0),h=fe(!1),p=be(()=>{var R;const B=(R=a.currentUser)==null?void 0:R.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(B)}),v=be(()=>{var B;return((B=r.value)==null?void 0:B.filter(R=>R.role==="paraeducator"))||[]}),g=be(()=>{var B;return((B=r.value)==null?void 0:B.filter(R=>R.role==="teacher"))||[]}),x=be(()=>d.value);function y(B){return B.id}function E(B){return B.id}function I(B,R){if(!o.value[B])return[""];o.value[B].classAssignment||(o.value[B].classAssignment={});let O=o.value[B].classAssignment[R];return Array.isArray(O)?O.length?O:[""]:typeof O=="string"&&O!==""?[O]:[""]}function P(B){if(!o.value[B])return[""];let R=o.value[B].directAssignment;return Array.isArray(R)?R.length?R:[""]:typeof R=="string"&&R!==""?[R]:[""]}function D(B,R,O,U){o.value[B]||(o.value[B]={classAssignment:{},directAssignment:[]}),o.value[B].classAssignment||(o.value[B].classAssignment={});let M=I(B,R);for(M[O]=U;M.length>1&&M[M.length-1]==="";)M.pop();o.value[B].classAssignment[R]=[...M]}function A(B,R,O){o.value[B]||(o.value[B]={classAssignment:{},directAssignment:[]});let U=P(B);for(U[R]=O;U.length>1&&U[U.length-1]==="";)U.pop();o.value[B].directAssignment=[...U]}function _(B,R){o.value[B]||(o.value[B]={classAssignment:{},directAssignment:[]}),o.value[B].classAssignment||(o.value[B].classAssignment={});let O=I(B,R);O.push(""),o.value[B].classAssignment[R]=[...O]}function b(B,R,O){if(!o.value[B]||!o.value[B].classAssignment)return;let U=I(B,R);U.length<=1||(U.splice(O,1),o.value[B].classAssignment[R]=[...U])}function w(B){o.value[B]||(o.value[B]={classAssignment:{},directAssignment:[]});let R=P(B);R.push(""),o.value[B].directAssignment=[...R]}function C(B,R){if(!o.value[B])return;let O=P(B);O.length<=1||(O.splice(R,1),o.value[B].directAssignment=[...O])}async function T(){try{f.value=!0,await Promise.all([n(),i(),l(),u()]),f.value=!1}catch(B){console.error("Error loading data:",B),f.value=!1}}async function k(){try{h.value=!0,await c(),h.value=!1}catch(B){console.error("Error saving aide assignments:",B),h.value=!1}}function N(){e.push("/admin")}return tr(T),(B,R)=>(V(),j("div",gX,[m("div",vX,[R[3]||(R[3]=m("h1",null,"Aide Assignment Management",-1)),m("div",xX,[m("button",{onClick:k,class:"btn btn-primary",disabled:h.value},[h.value?(V(),j("span",EX,"")):(V(),j("span",_X,"")),Ve(" "+ce(h.value?"Saving...":"Save Assignments"),1)],8,yX),m("button",{onClick:N,class:"btn btn-secondary"},R[2]||(R[2]=[m("span",null,"",-1),Ve(" Back ")]))])]),m("div",bX,[me(a).currentUser?p.value?f.value?(V(),j("div",AX," Loading aide assignments... ")):(V(),j("div",wX,[m("table",IX,[m("thead",null,[m("tr",null,[R[8]||(R[8]=m("th",null,"Aide Name",-1)),(V(!0),j(Ne,null,He(x.value,O=>(V(),j("th",{key:O,class:"period-header"}," Period "+ce(O),1))),128)),R[9]||(R[9]=m("th",null,"Direct Assignment",-1))])]),m("tbody",null,[(V(!0),j(Ne,null,He(v.value,O=>(V(),j("tr",{key:O.id,class:"aide-row"},[m("td",CX,ce(O.name||O.email),1),(V(!0),j(Ne,null,He(x.value,U=>(V(),j("td",{key:U,class:"period-cell"},[(V(!0),j(Ne,null,He(I(y(O),U),(M,q)=>(V(),j("div",{key:"t-"+q,class:"assignment-row"},[m("select",{value:M,onChange:H=>D(y(O),U,q,H.target.value),class:"teacher-select"},[R[10]||(R[10]=m("option",{value:""},"No Assignment",-1)),(V(!0),j(Ne,null,He(g.value,H=>(V(),j("option",{key:E(H),value:E(H)},ce(H.name||H.email),9,DX))),128))],40,kX),m("div",PX,[I(y(O),U).length>1?(V(),j("button",{key:0,onClick:H=>b(y(O),U,q),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,RX)):Oe("",!0),q===I(y(O),U).length-1?(V(),j("button",{key:1,onClick:H=>_(y(O),U),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,FX)):Oe("",!0)])]))),128))]))),128)),m("td",OX,[(V(!0),j(Ne,null,He(P(y(O)),(U,M)=>(V(),j("div",{key:"d-"+M,class:"assignment-row"},[m("select",{value:U,onChange:q=>A(y(O),M,q.target.value),class:"student-select"},[R[11]||(R[11]=m("option",{value:""},"No Assignment",-1)),(V(!0),j(Ne,null,He(me(s),q=>(V(),j("option",{key:q.id,value:q.id},ce(me(ct)(q,"firstName"))+" "+ce(me(ct)(q,"lastName")),9,MX))),128))],40,NX),m("div",BX,[P(y(O)).length>1?(V(),j("button",{key:0,onClick:q=>C(y(O),M),class:"btn btn-small btn-danger assignment-remove",title:"Remove assignment",type:"button"},"",8,LX)):Oe("",!0),M===P(y(O)).length-1?(V(),j("button",{key:1,onClick:q=>w(y(O)),class:"btn btn-small btn-secondary assignment-add",title:"Add assignment",type:"button"},"+",8,UX)):Oe("",!0)])]))),128))])]))),128))])])])):(V(),j("div",TX,[R[6]||(R[6]=m("h2",null,"Access Denied",-1)),R[7]||(R[7]=m("p",null,"You do not have permission to access this page.",-1)),m("button",{onClick:R[1]||(R[1]=O=>me(e).push("/")),class:"btn btn-primary"},"Go Home")])):(V(),j("div",SX,[R[4]||(R[4]=m("h2",null,"Authentication Required",-1)),R[5]||(R[5]=m("p",null,"Please log in to access this page.",-1)),m("button",{onClick:R[0]||(R[0]=O=>me(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},Tk=At(VX,[["__scopeId","data-v-c98b9c17"]]);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Ak=1252,$X=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],by={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Sy=function(t){$X.indexOf(t)!=-1&&(Ak=by[0]=t)};function jX(){Sy(1252)}var sa=function(t){Sy(t)};function wk(){sa(1200),jX()}function $2(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function HX(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function Ik(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var ju=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?HX(t.slice(2)):e==254&&r==255?Ik(t.slice(2)):e==65279?t.slice(1):t},x0=function(e){return String.fromCharCode(e)},j2=function(e){return String.fromCharCode(e)},Xd,Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function H2(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Qi.charAt(i)+Qi.charAt(a)+Qi.charAt(o)+Qi.charAt(l);return e}function Rs(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Qi.indexOf(t.charAt(c++)),a=Qi.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Qi.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Qi.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Kt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),wl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function vo(t){return Kt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function G2(t){return Kt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var na=function(e){return Kt?wl(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Il(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Ty(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Ty(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var qi=Kt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:wl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function GX(t){for(var e=[],r=0,n=t.length+250,s=vo(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=vo(65535),n=65530)}return e.push(s.slice(0,r)),qi(e)}var os=/\u0000/g,Hu=/[\u0001-\u0006]/g;function Cc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function aa(t,e){var r=""+t;return r.length>=e?r:Ur("0",e-r.length)+r}function Ay(t,e){var r=""+t;return r.length>=e?r:Ur(" ",e-r.length)+r}function zh(t,e){var r=""+t;return r.length>=e?r:r+Ur(" ",e-r.length)}function zX(t,e){var r=""+Math.round(t);return r.length>=e?r:Ur("0",e-r.length)+r}function WX(t,e){var r=""+t;return r.length>=e?r:Ur("0",e-r.length)+r}var z2=Math.pow(2,32);function Xl(t,e){if(t>z2||t<-z2)return zX(t,e);var r=Math.round(t);return WX(r,e)}function Wh(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var W2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],tg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function KX(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Mt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},K2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},qX={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Kh(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,u=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,u=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=u;if(u>e&&(c>e?(u=l,o=i):(u=c,o=a)),!r)return[0,n*o,u];var f=Math.floor(n*o/u);return[f,n*o-f*u,u]}function Go(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=eY(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var Ck=new Date(1899,11,31,0,0,0),XX=Ck.getTime(),YX=new Date(1900,2,1,0,0,0);function kk(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=YX&&(r+=24*60*60*1e3),(r-(XX+(t.getTimezoneOffset()-Ck.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function wy(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function QX(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function JX(t){var e=t<0?12:11,r=wy(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function ZX(t){var e=wy(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Yd(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=JX(t):e===10?r=t.toFixed(10).substr(0,12):r=ZX(t),wy(QX(r.toUpperCase()))}function pl(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Yd(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Gs(14,kk(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function eY(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function tY(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return tg[r.m-1][1];case 5:return tg[r.m-1][0];default:return tg[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return W2[r.q][0];default:return W2[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?aa(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=aa(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?aa(l,c):"";return u}function Ji(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var Dk=/%/g;function rY(t,e,r){var n=e.replace(Dk,""),s=e.length-n.length;return si(t,n,r*Math.pow(10,2*s))+Ur("%",s)}function nY(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return si(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Pk(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Pk(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Rk=/# (\?+)( ?)\/( ?)(\d+)/;function sY(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?Ur(" ",t[1].length+1+t[4].length):Ay(a,t[1].length)+t[2]+"/"+t[3]+aa(o,t[4].length))}function aY(t,e,r){return r+(e===0?"":""+e)+Ur(" ",t[1].length+2+t[4].length)}var Fk=/^#*0*\.([0#]+)/,Ok=/\).*[0#]/,Nk=/\(###\) ###\\?-####/;function Qn(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function q2(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function X2(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function iY(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function oY(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Ms(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Ok)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ms("n",n,r):"("+Ms("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return nY(t,e,r);if(e.indexOf("%")!==-1)return rY(t,e,r);if(e.indexOf("E")!==-1)return Pk(e,r);if(e.charCodeAt(0)===36)return"$"+Ms(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Xl(l,e.length);if(e.match(/^[#?]+$/))return s=Xl(r,0),s==="0"&&(s=""),s.length>e.length?s:Qn(e.substr(0,e.length-s.length))+s;if(i=e.match(Rk))return sY(i,l,c);if(e.match(/^#+0+$/))return c+Xl(l,e.length-e.indexOf("0"));if(i=e.match(Fk))return s=q2(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Qn(i[1])).replace(/\.$/,"."+Qn(i[1])).replace(/\.(\d*)$/,function(p,v){return"."+v+Ur("0",Qn(i[1]).length-v.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+q2(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Ji(Xl(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ms(t,e,-r):Ji(""+(Math.floor(r)+iY(r,i[1].length)))+"."+aa(X2(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Ms(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Cc(Ms(t,e.replace(/[\\-]/g,""),r)),a=0,Cc(Cc(e.replace(/\\/g,"")).replace(/[0#]/g,function(p){return a<s.length?s.charAt(a++):p==="0"?"0":""}));if(e.match(Nk))return s=Ms(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=Kh(l,Math.pow(10,a)-1,!1),s=""+c,u=si("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=zh(o[2],a),u.length<i[4].length&&(u=Qn(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=Kh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Ay(o[1],a)+i[2]+"/"+i[3]+zh(o[2],a):Ur(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Xl(r,0),e.length<=s.length?s:Qn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Qn(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=X2(r,i[1].length),r<0?"-"+Ms(t,e,-r):Ji(oY(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?aa(0,3-p.length):"")+p})+"."+aa(a,i[1].length);switch(e){case"###,##0.00":return Ms(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Ji(Xl(l,0));return h!=="0"?c+h:"";case"###,###.00":return Ms(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ms(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function lY(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return si(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function cY(t,e,r){var n=e.replace(Dk,""),s=e.length-n.length;return si(t,n,r*Math.pow(10,2*s))+Ur("%",s)}function Mk(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Mk(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ea(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Ok)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ea("n",n,r):"("+Ea("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return lY(t,e,r);if(e.indexOf("%")!==-1)return cY(t,e,r);if(e.indexOf("E")!==-1)return Mk(e,r);if(e.charCodeAt(0)===36)return"$"+Ea(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+aa(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:Qn(e.substr(0,e.length-s.length))+s;if(i=e.match(Rk))return aY(i,l,c);if(e.match(/^#+0+$/))return c+aa(l,e.length-e.indexOf("0"));if(i=e.match(Fk))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Qn(i[1])).replace(/\.$/,"."+Qn(i[1])),s=s.replace(/\.(\d*)$/,function(p,v){return"."+v+Ur("0",Qn(i[1]).length-v.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Ji(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ea(t,e,-r):Ji(""+r)+"."+Ur("0",i[1].length);if(i=e.match(/^#,#*,#0/))return Ea(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Cc(Ea(t,e.replace(/[\\-]/g,""),r)),a=0,Cc(Cc(e.replace(/\\/g,"")).replace(/[0#]/g,function(p){return a<s.length?s.charAt(a++):p==="0"?"0":""}));if(e.match(Nk))return s=Ea(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=Kh(l,Math.pow(10,a)-1,!1),s=""+c,u=si("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=zh(o[2],a),u.length<i[4].length&&(u=Qn(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=Kh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Ay(o[1],a)+i[2]+"/"+i[3]+zh(o[2],a):Ur(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:Qn(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Qn(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ea(t,e,-r):Ji(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?aa(0,3-p.length):"")+p})+"."+aa(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=Ji(""+l);return h!=="0"?c+h:"";default:if(e.match(/\.[0#?]*$/))return Ea(t,e.slice(0,e.lastIndexOf(".")),r)+Qn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function si(t,e,r){return(r|0)===r?Ea(t,e,r):Ms(t,e,r)}function uY(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Bk=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function au(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Wh(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Bk))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function dY(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,u,d,f="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!Wh(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var h=t.charAt(++a),p=h==="("||h===")"?h:"t";s[s.length]={t:p,v:h},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Go(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Go(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(c==null&&(c=Go(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(v.v=c.H>=12?"P":"A"),v.t="T",f="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(v.v=c.H>=12?"PM":"AM"),v.t="T",a+=5,f="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(v.v=c.H>=12?"":""),v.t="T",a+=5,f="h"):(v.t="t",++a),c==null&&v.t==="T")return"";s[s.length]=v,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Bk)){if(c==null&&(c=Go(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",au(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var g=0,x=0,y;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=f,l="h",g<1&&(g=1);break;case"s":(y=s[a].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[a].v.match(/[Hh]/)&&(g=1),g<2&&s[a].v.match(/[Mm]/)&&(g=2),g<3&&s[a].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var E="",I;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=tY(s[a].t.charCodeAt(0),s[a].v,c,x),s[a].t="t";break;case"n":case"?":for(I=a+1;s[I]!=null&&((o=s[I].t)==="?"||o==="D"||(o===" "||o==="t")&&s[I+1]!=null&&(s[I+1].t==="?"||s[I+1].t==="t"&&s[I+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[I].v==="/"||s[I].v===" "&&s[I+1]!=null&&s[I+1].t=="?"));)s[a].v+=s[I].v,s[I]={v:"",t:";"},++I;E+=s[a].v,a=I-1;break;case"G":s[a].t="t",s[a].v=pl(e,r);break}var P="",D,A;if(E.length>0){E.charCodeAt(0)==40?(D=e<0&&E.charCodeAt(0)===45?-e:e,A=si("n",E,D)):(D=e<0&&n>1?-e:e,A=si("n",E,D),D<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),I=A.length-1;var _=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){_=a;break}var b=s.length;if(_===s.length&&A.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(I>=s[a].v.length-1?(I-=s[a].v.length,s[a].v=A.substr(I+1,s[a].v.length)):I<0?s[a].v="":(s[a].v=A.substr(0,I+1),I=-1),s[a].t="t",b=a);I>=0&&b<s.length&&(s[b].v=A.substr(0,I+1)+s[b].v)}else if(_!==s.length&&A.indexOf("E")===-1){for(I=A.indexOf(".")-1,a=_;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")-1:s[a].v.length-1,P=s[a].v.substr(u+1);u>=0;--u)I>=0&&(s[a].v.charAt(u)==="0"||s[a].v.charAt(u)==="#")&&(P=A.charAt(I--)+P);s[a].v=P,s[a].t="t",b=a}for(I>=0&&b<s.length&&(s[b].v=A.substr(0,I+1)+s[b].v),I=A.indexOf(".")+1,a=_;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==_)){for(u=s[a].v.indexOf(".")>-1&&a===_?s[a].v.indexOf(".")+1:0,P=s[a].v.substr(0,u);u<s[a].v.length;++u)I<A.length&&(P+=A.charAt(I++));s[a].v=P,s[a].t="t",b=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(D=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=si(s[a].t,s[a].v,D),s[a].t="t");var w="";for(a=0;a!==s.length;++a)s[a]!=null&&(w+=s[a].v);return w}var Y2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Q2(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function fY(t,e){var r=uY(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(Y2),o=r[1].match(Y2);return Q2(e,a)?[n,r[0]]:Q2(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function Gs(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mt)[t],n==null&&(n=r.table&&r.table[K2[t]]||Mt[K2[t]]),n==null&&(n=qX[t]||"General");break}if(Wh(n,0))return pl(e,r);e instanceof Date&&(e=kk(e,r.date1904));var s=fY(n,e);if(Wh(s[1]))return pl(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return dY(s[1],e,r,s[0])}function Qo(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Mt[r]==null){e<0&&(e=r);continue}if(Mt[r]==t){e=r;break}}e<0&&(e=391)}return Mt[e]=t,e}function Lk(){Mt=KX()}var hY={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Uk=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function pY(t){var e=typeof t=="number"?Mt[t]:t;return e=e.replace(Uk,"(\\d+)"),new RegExp("^"+e+"$")}function mY(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(Uk)||[]).forEach(function(d,f){var h=parseInt(r[f+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":a=h;break;case"s":l=h;break;case"m":a>=0?o=h:s=h;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?u:c+"T"+u}var gY=function(){var t={};t.version="1.2.0";function e(){for(var A=0,_=new Array(256),b=0;b!=256;++b)A=b,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,_[b]=A;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function n(A){var _=0,b=0,w=0,C=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(w=0;w!=256;++w)C[w]=A[w];for(w=0;w!=256;++w)for(b=A[w],_=256+w;_<4096;_+=256)b=C[_]=b>>>8^A[b&255];var T=[];for(w=1;w!=16;++w)T[w-1]=typeof Int32Array<"u"?C.subarray(w*256,w*256+256):C.slice(w*256,w*256+256);return T}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],f=s[7],h=s[8],p=s[9],v=s[10],g=s[11],x=s[12],y=s[13],E=s[14];function I(A,_){for(var b=_^-1,w=0,C=A.length;w<C;)b=b>>>8^r[(b^A.charCodeAt(w++))&255];return~b}function P(A,_){for(var b=_^-1,w=A.length-15,C=0;C<w;)b=E[A[C++]^b&255]^y[A[C++]^b>>8&255]^x[A[C++]^b>>16&255]^g[A[C++]^b>>>24]^v[A[C++]]^p[A[C++]]^h[A[C++]]^f[A[C++]]^d[A[C++]]^u[A[C++]]^c[A[C++]]^l[A[C++]]^o[A[C++]]^a[A[C++]]^i[A[C++]]^r[A[C++]];for(w+=15;C<w;)b=b>>>8^r[(b^A[C++])&255];return~b}function D(A,_){for(var b=_^-1,w=0,C=A.length,T=0,k=0;w<C;)T=A.charCodeAt(w++),T<128?b=b>>>8^r[(b^T)&255]:T<2048?(b=b>>>8^r[(b^(192|T>>6&31))&255],b=b>>>8^r[(b^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,k=A.charCodeAt(w++)&1023,b=b>>>8^r[(b^(240|T>>8&7))&255],b=b>>>8^r[(b^(128|T>>2&63))&255],b=b>>>8^r[(b^(128|k>>6&15|(T&3)<<4))&255],b=b>>>8^r[(b^(128|k&63))&255]):(b=b>>>8^r[(b^(224|T>>12&15))&255],b=b>>>8^r[(b^(128|T>>6&63))&255],b=b>>>8^r[(b^(128|T&63))&255]);return~b}return t.table=r,t.bstr=I,t.buf=P,t.str=D,t}(),Yt=function(){var e={};e.version="1.2.1";function r(J,ue){for(var ae=J.split("/"),oe=ue.split("/"),de=0,pe=0,ke=Math.min(ae.length,oe.length);de<ke;++de){if(pe=ae[de].length-oe[de].length)return pe;if(ae[de]!=oe[de])return ae[de]<oe[de]?-1:1}return ae.length-oe.length}function n(J){if(J.charAt(J.length-1)=="/")return J.slice(0,-1).indexOf("/")===-1?J:n(J.slice(0,-1));var ue=J.lastIndexOf("/");return ue===-1?J:J.slice(0,ue+1)}function s(J){if(J.charAt(J.length-1)=="/")return s(J.slice(0,-1));var ue=J.lastIndexOf("/");return ue===-1?J:J.slice(ue+1)}function i(J,ue){typeof ue=="string"&&(ue=new Date(ue));var ae=ue.getHours();ae=ae<<6|ue.getMinutes(),ae=ae<<5|ue.getSeconds()>>>1,J.write_shift(2,ae);var oe=ue.getFullYear()-1980;oe=oe<<4|ue.getMonth()+1,oe=oe<<5|ue.getDate(),J.write_shift(2,oe)}function a(J){var ue=J.read_shift(2)&65535,ae=J.read_shift(2)&65535,oe=new Date,de=ae&31;ae>>>=5;var pe=ae&15;ae>>>=4,oe.setMilliseconds(0),oe.setFullYear(ae+1980),oe.setMonth(pe-1),oe.setDate(de);var ke=ue&31;ue>>>=5;var Le=ue&63;return ue>>>=6,oe.setHours(ue),oe.setMinutes(Le),oe.setSeconds(ke<<1),oe}function o(J){_n(J,0);for(var ue={},ae=0;J.l<=J.length-4;){var oe=J.read_shift(2),de=J.read_shift(2),pe=J.l+de,ke={};switch(oe){case 21589:ae=J.read_shift(1),ae&1&&(ke.mtime=J.read_shift(4)),de>5&&(ae&2&&(ke.atime=J.read_shift(4)),ae&4&&(ke.ctime=J.read_shift(4))),ke.mtime&&(ke.mt=new Date(ke.mtime*1e3));break}J.l=pe,ue[oe]=ke}return ue}var l;function c(){return l||(l={})}function u(J,ue){if(J[0]==80&&J[1]==75)return mt(J,ue);if((J[0]|32)==109&&(J[1]|32)==105)return To(J,ue);if(J.length<512)throw new Error("CFB file size "+J.length+" < 512");var ae=3,oe=512,de=0,pe=0,ke=0,Le=0,De=0,Pe=[],Fe=J.slice(0,512);_n(Fe,0);var qe=d(Fe);switch(ae=qe[0],ae){case 3:oe=512;break;case 4:oe=4096;break;case 0:if(qe[1]==0)return mt(J,ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+ae)}oe!==512&&(Fe=J.slice(0,oe),_n(Fe,28));var Je=J.slice(0,oe);f(Fe,ae);var it=Fe.read_shift(4,"i");if(ae===3&&it!==0)throw new Error("# Directory Sectors: Expected 0 saw "+it);Fe.l+=4,ke=Fe.read_shift(4,"i"),Fe.l+=4,Fe.chk("00100000","Mini Stream Cutoff Size: "),Le=Fe.read_shift(4,"i"),de=Fe.read_shift(4,"i"),De=Fe.read_shift(4,"i"),pe=Fe.read_shift(4,"i");for(var Ye=-1,tt=0;tt<109&&(Ye=Fe.read_shift(4,"i"),!(Ye<0));++tt)Pe[tt]=Ye;var wt=h(J,oe);g(De,pe,wt,oe,Pe);var ur=y(wt,ke,Pe,oe);ur[ke].name="!Directory",de>0&&Le!==k&&(ur[Le].name="!MiniFAT"),ur[Pe[0]].name="!FAT",ur.fat_addrs=Pe,ur.ssz=oe;var ar={},Sr=[],Ha=[],wo=[];E(ke,ur,wt,Sr,de,ar,Ha,Le),p(Ha,wo,Sr),Sr.shift();var Ti={FileIndex:Ha,FullPaths:wo};return ue&&ue.raw&&(Ti.raw={header:Je,sectors:wt}),Ti}function d(J){if(J[J.l]==80&&J[J.l+1]==75)return[0,0];J.chk(N,"Header Signature: "),J.l+=16;var ue=J.read_shift(2,"u");return[J.read_shift(2,"u"),ue]}function f(J,ue){var ae=9;switch(J.l+=2,ae=J.read_shift(2)){case 9:if(ue!=3)throw new Error("Sector Shift: Expected 9 saw "+ae);break;case 12:if(ue!=4)throw new Error("Sector Shift: Expected 12 saw "+ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ae)}J.chk("0600","Mini Sector Shift: "),J.chk("000000000000","Reserved: ")}function h(J,ue){for(var ae=Math.ceil(J.length/ue)-1,oe=[],de=1;de<ae;++de)oe[de-1]=J.slice(de*ue,(de+1)*ue);return oe[ae-1]=J.slice(ae*ue),oe}function p(J,ue,ae){for(var oe=0,de=0,pe=0,ke=0,Le=0,De=ae.length,Pe=[],Fe=[];oe<De;++oe)Pe[oe]=Fe[oe]=oe,ue[oe]=ae[oe];for(;Le<Fe.length;++Le)oe=Fe[Le],de=J[oe].L,pe=J[oe].R,ke=J[oe].C,Pe[oe]===oe&&(de!==-1&&Pe[de]!==de&&(Pe[oe]=Pe[de]),pe!==-1&&Pe[pe]!==pe&&(Pe[oe]=Pe[pe])),ke!==-1&&(Pe[ke]=oe),de!==-1&&oe!=Pe[oe]&&(Pe[de]=Pe[oe],Fe.lastIndexOf(de)<Le&&Fe.push(de)),pe!==-1&&oe!=Pe[oe]&&(Pe[pe]=Pe[oe],Fe.lastIndexOf(pe)<Le&&Fe.push(pe));for(oe=1;oe<De;++oe)Pe[oe]===oe&&(pe!==-1&&Pe[pe]!==pe?Pe[oe]=Pe[pe]:de!==-1&&Pe[de]!==de&&(Pe[oe]=Pe[de]));for(oe=1;oe<De;++oe)if(J[oe].type!==0){if(Le=oe,Le!=Pe[Le])do Le=Pe[Le],ue[oe]=ue[Le]+"/"+ue[oe];while(Le!==0&&Pe[Le]!==-1&&Le!=Pe[Le]);Pe[oe]=-1}for(ue[0]+="/",oe=1;oe<De;++oe)J[oe].type!==2&&(ue[oe]+="/")}function v(J,ue,ae){for(var oe=J.start,de=J.size,pe=[],ke=oe;ae&&de>0&&ke>=0;)pe.push(ue.slice(ke*T,ke*T+T)),de-=T,ke=$o(ae,ke*4);return pe.length===0?nn(0):qi(pe).slice(0,J.size)}function g(J,ue,ae,oe,de){var pe=k;if(J===k){if(ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(J!==-1){var ke=ae[J],Le=(oe>>>2)-1;if(!ke)return;for(var De=0;De<Le&&(pe=$o(ke,De*4))!==k;++De)de.push(pe);g($o(ke,oe-4),ue-1,ae,oe,de)}}function x(J,ue,ae,oe,de){var pe=[],ke=[];de||(de=[]);var Le=oe-1,De=0,Pe=0;for(De=ue;De>=0;){de[De]=!0,pe[pe.length]=De,ke.push(J[De]);var Fe=ae[Math.floor(De*4/oe)];if(Pe=De*4&Le,oe<4+Pe)throw new Error("FAT boundary crossed: "+De+" 4 "+oe);if(!J[Fe])break;De=$o(J[Fe],Pe)}return{nodes:pe,data:oS([ke])}}function y(J,ue,ae,oe){var de=J.length,pe=[],ke=[],Le=[],De=[],Pe=oe-1,Fe=0,qe=0,Je=0,it=0;for(Fe=0;Fe<de;++Fe)if(Le=[],Je=Fe+ue,Je>=de&&(Je-=de),!ke[Je]){De=[];var Ye=[];for(qe=Je;qe>=0;){Ye[qe]=!0,ke[qe]=!0,Le[Le.length]=qe,De.push(J[qe]);var tt=ae[Math.floor(qe*4/oe)];if(it=qe*4&Pe,oe<4+it)throw new Error("FAT boundary crossed: "+qe+" 4 "+oe);if(!J[tt]||(qe=$o(J[tt],it),Ye[qe]))break}pe[Je]={nodes:Le,data:oS([De])}}return pe}function E(J,ue,ae,oe,de,pe,ke,Le){for(var De=0,Pe=oe.length?2:0,Fe=ue[J].data,qe=0,Je=0,it;qe<Fe.length;qe+=128){var Ye=Fe.slice(qe,qe+128);_n(Ye,64),Je=Ye.read_shift(2),it=Py(Ye,0,Je-Pe),oe.push(it);var tt={name:it,type:Ye.read_shift(1),color:Ye.read_shift(1),L:Ye.read_shift(4,"i"),R:Ye.read_shift(4,"i"),C:Ye.read_shift(4,"i"),clsid:Ye.read_shift(16),state:Ye.read_shift(4,"i"),start:0,size:0},wt=Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2);wt!==0&&(tt.ct=I(Ye,Ye.l-8));var ur=Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2)+Ye.read_shift(2);ur!==0&&(tt.mt=I(Ye,Ye.l-8)),tt.start=Ye.read_shift(4,"i"),tt.size=Ye.read_shift(4,"i"),tt.size<0&&tt.start<0&&(tt.size=tt.type=0,tt.start=k,tt.name=""),tt.type===5?(De=tt.start,de>0&&De!==k&&(ue[De].name="!StreamData")):tt.size>=4096?(tt.storage="fat",ue[tt.start]===void 0&&(ue[tt.start]=x(ae,tt.start,ue.fat_addrs,ue.ssz)),ue[tt.start].name=tt.name,tt.content=ue[tt.start].data.slice(0,tt.size)):(tt.storage="minifat",tt.size<0?tt.size=0:De!==k&&tt.start!==k&&ue[De]&&(tt.content=v(tt,ue[De].data,(ue[Le]||{}).data))),tt.content&&_n(tt.content,0),pe[it]=tt,ke.push(tt)}}function I(J,ue){return new Date((Ss(J,ue+4)/1e7*Math.pow(2,32)+Ss(J,ue)/1e7-11644473600)*1e3)}function P(J,ue){return c(),u(l.readFileSync(J),ue)}function D(J,ue){var ae=ue&&ue.type;switch(ae||Kt&&Buffer.isBuffer(J)&&(ae="buffer"),ae||"base64"){case"file":return P(J,ue);case"base64":return u(na(Rs(J)),ue);case"binary":return u(na(J),ue)}return u(J,ue)}function A(J,ue){var ae=ue||{},oe=ae.root||"Root Entry";if(J.FullPaths||(J.FullPaths=[]),J.FileIndex||(J.FileIndex=[]),J.FullPaths.length!==J.FileIndex.length)throw new Error("inconsistent CFB structure");J.FullPaths.length===0&&(J.FullPaths[0]=oe+"/",J.FileIndex[0]={name:oe,type:5}),ae.CLSID&&(J.FileIndex[0].clsid=ae.CLSID),_(J)}function _(J){var ue="Sh33tJ5";if(!Yt.find(J,"/"+ue)){var ae=nn(4);ae[0]=55,ae[1]=ae[3]=50,ae[2]=54,J.FileIndex.push({name:ue,type:2,content:ae,size:4,L:69,R:69,C:69}),J.FullPaths.push(J.FullPaths[0]+ue),b(J)}}function b(J,ue){A(J);for(var ae=!1,oe=!1,de=J.FullPaths.length-1;de>=0;--de){var pe=J.FileIndex[de];switch(pe.type){case 0:oe?ae=!0:(J.FileIndex.pop(),J.FullPaths.pop());break;case 1:case 2:case 5:oe=!0,isNaN(pe.R*pe.L*pe.C)&&(ae=!0),pe.R>-1&&pe.L>-1&&pe.R==pe.L&&(ae=!0);break;default:ae=!0;break}}if(!(!ae&&!ue)){var ke=new Date(1987,1,19),Le=0,De=Object.create?Object.create(null):{},Pe=[];for(de=0;de<J.FullPaths.length;++de)De[J.FullPaths[de]]=!0,J.FileIndex[de].type!==0&&Pe.push([J.FullPaths[de],J.FileIndex[de]]);for(de=0;de<Pe.length;++de){var Fe=n(Pe[de][0]);oe=De[Fe],oe||(Pe.push([Fe,{name:s(Fe).replace("/",""),type:1,clsid:R,ct:ke,mt:ke,content:null}]),De[Fe]=!0)}for(Pe.sort(function(it,Ye){return r(it[0],Ye[0])}),J.FullPaths=[],J.FileIndex=[],de=0;de<Pe.length;++de)J.FullPaths[de]=Pe[de][0],J.FileIndex[de]=Pe[de][1];for(de=0;de<Pe.length;++de){var qe=J.FileIndex[de],Je=J.FullPaths[de];if(qe.name=s(Je).replace("/",""),qe.L=qe.R=qe.C=-(qe.color=1),qe.size=qe.content?qe.content.length:0,qe.start=0,qe.clsid=qe.clsid||R,de===0)qe.C=Pe.length>1?1:-1,qe.size=0,qe.type=5;else if(Je.slice(-1)=="/"){for(Le=de+1;Le<Pe.length&&n(J.FullPaths[Le])!=Je;++Le);for(qe.C=Le>=Pe.length?-1:Le,Le=de+1;Le<Pe.length&&n(J.FullPaths[Le])!=n(Je);++Le);qe.R=Le>=Pe.length?-1:Le,qe.type=1}else n(J.FullPaths[de+1]||"")==n(Je)&&(qe.R=de+1),qe.type=2}}}function w(J,ue){var ae=ue||{};if(ae.fileType=="mad")return en(J,ae);switch(b(J),ae.fileType){case"zip":return Ot(J,ae)}var oe=function(it){for(var Ye=0,tt=0,wt=0;wt<it.FileIndex.length;++wt){var ur=it.FileIndex[wt];if(ur.content){var ar=ur.content.length;ar>0&&(ar<4096?Ye+=ar+63>>6:tt+=ar+511>>9)}}for(var Sr=it.FullPaths.length+3>>2,Ha=Ye+7>>3,wo=Ye+127>>7,Ti=Ha+tt+Sr+wo,ga=Ti+127>>7,Ml=ga<=109?0:Math.ceil((ga-109)/127);Ti+ga+Ml+127>>7>ga;)Ml=++ga<=109?0:Math.ceil((ga-109)/127);var ys=[1,Ml,ga,wo,Sr,tt,Ye,0];return it.FileIndex[0].size=Ye<<6,ys[7]=(it.FileIndex[0].start=ys[0]+ys[1]+ys[2]+ys[3]+ys[4]+ys[5])+(ys[6]+7>>3),ys}(J),de=nn(oe[7]<<9),pe=0,ke=0;{for(pe=0;pe<8;++pe)de.write_shift(1,B[pe]);for(pe=0;pe<8;++pe)de.write_shift(2,0);for(de.write_shift(2,62),de.write_shift(2,3),de.write_shift(2,65534),de.write_shift(2,9),de.write_shift(2,6),pe=0;pe<3;++pe)de.write_shift(2,0);for(de.write_shift(4,0),de.write_shift(4,oe[2]),de.write_shift(4,oe[0]+oe[1]+oe[2]+oe[3]-1),de.write_shift(4,0),de.write_shift(4,4096),de.write_shift(4,oe[3]?oe[0]+oe[1]+oe[2]-1:k),de.write_shift(4,oe[3]),de.write_shift(-4,oe[1]?oe[0]-1:k),de.write_shift(4,oe[1]),pe=0;pe<109;++pe)de.write_shift(-4,pe<oe[2]?oe[1]+pe:-1)}if(oe[1])for(ke=0;ke<oe[1];++ke){for(;pe<236+ke*127;++pe)de.write_shift(-4,pe<oe[2]?oe[1]+pe:-1);de.write_shift(-4,ke===oe[1]-1?k:ke+1)}var Le=function(it){for(ke+=it;pe<ke-1;++pe)de.write_shift(-4,pe+1);it&&(++pe,de.write_shift(-4,k))};for(ke=pe=0,ke+=oe[1];pe<ke;++pe)de.write_shift(-4,O.DIFSECT);for(ke+=oe[2];pe<ke;++pe)de.write_shift(-4,O.FATSECT);Le(oe[3]),Le(oe[4]);for(var De=0,Pe=0,Fe=J.FileIndex[0];De<J.FileIndex.length;++De)Fe=J.FileIndex[De],Fe.content&&(Pe=Fe.content.length,!(Pe<4096)&&(Fe.start=ke,Le(Pe+511>>9)));for(Le(oe[6]+7>>3);de.l&511;)de.write_shift(-4,O.ENDOFCHAIN);for(ke=pe=0,De=0;De<J.FileIndex.length;++De)Fe=J.FileIndex[De],Fe.content&&(Pe=Fe.content.length,!(!Pe||Pe>=4096)&&(Fe.start=ke,Le(Pe+63>>6)));for(;de.l&511;)de.write_shift(-4,O.ENDOFCHAIN);for(pe=0;pe<oe[4]<<2;++pe){var qe=J.FullPaths[pe];if(!qe||qe.length===0){for(De=0;De<17;++De)de.write_shift(4,0);for(De=0;De<3;++De)de.write_shift(4,-1);for(De=0;De<12;++De)de.write_shift(4,0);continue}Fe=J.FileIndex[pe],pe===0&&(Fe.start=Fe.size?Fe.start-1:k);var Je=pe===0&&ae.root||Fe.name;if(Pe=2*(Je.length+1),de.write_shift(64,Je,"utf16le"),de.write_shift(2,Pe),de.write_shift(1,Fe.type),de.write_shift(1,Fe.color),de.write_shift(-4,Fe.L),de.write_shift(-4,Fe.R),de.write_shift(-4,Fe.C),Fe.clsid)de.write_shift(16,Fe.clsid,"hex");else for(De=0;De<4;++De)de.write_shift(4,0);de.write_shift(4,Fe.state||0),de.write_shift(4,0),de.write_shift(4,0),de.write_shift(4,0),de.write_shift(4,0),de.write_shift(4,Fe.start),de.write_shift(4,Fe.size),de.write_shift(4,0)}for(pe=1;pe<J.FileIndex.length;++pe)if(Fe=J.FileIndex[pe],Fe.size>=4096)if(de.l=Fe.start+1<<9,Kt&&Buffer.isBuffer(Fe.content))Fe.content.copy(de,de.l,0,Fe.size),de.l+=Fe.size+511&-512;else{for(De=0;De<Fe.size;++De)de.write_shift(1,Fe.content[De]);for(;De&511;++De)de.write_shift(1,0)}for(pe=1;pe<J.FileIndex.length;++pe)if(Fe=J.FileIndex[pe],Fe.size>0&&Fe.size<4096)if(Kt&&Buffer.isBuffer(Fe.content))Fe.content.copy(de,de.l,0,Fe.size),de.l+=Fe.size+63&-64;else{for(De=0;De<Fe.size;++De)de.write_shift(1,Fe.content[De]);for(;De&63;++De)de.write_shift(1,0)}if(Kt)de.l=de.length;else for(;de.l<de.length;)de.write_shift(1,0);return de}function C(J,ue){var ae=J.FullPaths.map(function(De){return De.toUpperCase()}),oe=ae.map(function(De){var Pe=De.split("/");return Pe[Pe.length-(De.slice(-1)=="/"?2:1)]}),de=!1;ue.charCodeAt(0)===47?(de=!0,ue=ae[0].slice(0,-1)+ue):de=ue.indexOf("/")!==-1;var pe=ue.toUpperCase(),ke=de===!0?ae.indexOf(pe):oe.indexOf(pe);if(ke!==-1)return J.FileIndex[ke];var Le=!pe.match(Hu);for(pe=pe.replace(os,""),Le&&(pe=pe.replace(Hu,"!")),ke=0;ke<ae.length;++ke)if((Le?ae[ke].replace(Hu,"!"):ae[ke]).replace(os,"")==pe||(Le?oe[ke].replace(Hu,"!"):oe[ke]).replace(os,"")==pe)return J.FileIndex[ke];return null}var T=64,k=-2,N="d0cf11e0a1b11ae1",B=[208,207,17,224,161,177,26,225],R="00000000000000000000000000000000",O={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:N,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:R,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function U(J,ue,ae){c();var oe=w(J,ae);l.writeFileSync(ue,oe)}function M(J){for(var ue=new Array(J.length),ae=0;ae<J.length;++ae)ue[ae]=String.fromCharCode(J[ae]);return ue.join("")}function q(J,ue){var ae=w(J,ue);switch(ue&&ue.type||"buffer"){case"file":return c(),l.writeFileSync(ue.filename,ae),ae;case"binary":return typeof ae=="string"?ae:M(ae);case"base64":return H2(typeof ae=="string"?ae:M(ae));case"buffer":if(Kt)return Buffer.isBuffer(ae)?ae:wl(ae);case"array":return typeof ae=="string"?na(ae):ae}return ae}var H;function L(J){try{var ue=J.InflateRaw,ae=new ue;if(ae._processChunk(new Uint8Array([3,0]),ae._finishFlushFlag),ae.bytesRead)H=J;else throw new Error("zlib does not expose bytesRead")}catch(oe){console.error("cannot use native zlib: "+(oe.message||oe))}}function z(J,ue){if(!H)return pt(J,ue);var ae=H.InflateRaw,oe=new ae,de=oe._processChunk(J.slice(J.l),oe._finishFlushFlag);return J.l+=oe.bytesRead,de}function K(J){return H?H.deflateRawSync(J):ye(J)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(J){var ue=(J<<1|J<<11)&139536|(J<<5|J<<15)&558144;return(ue>>16|ue>>8|ue)&255}for(var Z=typeof Uint8Array<"u",Q=Z?new Uint8Array(256):[],xe=0;xe<256;++xe)Q[xe]=he(xe);function X(J,ue){var ae=Q[J&255];return ue<=8?ae>>>8-ue:(ae=ae<<8|Q[J>>8&255],ue<=16?ae>>>16-ue:(ae=ae<<8|Q[J>>16&255],ae>>>24-ue))}function W(J,ue){var ae=ue&7,oe=ue>>>3;return(J[oe]|(ae<=6?0:J[oe+1]<<8))>>>ae&3}function Y(J,ue){var ae=ue&7,oe=ue>>>3;return(J[oe]|(ae<=5?0:J[oe+1]<<8))>>>ae&7}function ee(J,ue){var ae=ue&7,oe=ue>>>3;return(J[oe]|(ae<=4?0:J[oe+1]<<8))>>>ae&15}function ve(J,ue){var ae=ue&7,oe=ue>>>3;return(J[oe]|(ae<=3?0:J[oe+1]<<8))>>>ae&31}function re(J,ue){var ae=ue&7,oe=ue>>>3;return(J[oe]|(ae<=1?0:J[oe+1]<<8))>>>ae&127}function se(J,ue,ae){var oe=ue&7,de=ue>>>3,pe=(1<<ae)-1,ke=J[de]>>>oe;return ae<8-oe||(ke|=J[de+1]<<8-oe,ae<16-oe)||(ke|=J[de+2]<<16-oe,ae<24-oe)||(ke|=J[de+3]<<24-oe),ke&pe}function le(J,ue,ae){var oe=ue&7,de=ue>>>3;return oe<=5?J[de]|=(ae&7)<<oe:(J[de]|=ae<<oe&255,J[de+1]=(ae&7)>>8-oe),ue+3}function Te(J,ue,ae){var oe=ue&7,de=ue>>>3;return ae=(ae&1)<<oe,J[de]|=ae,ue+1}function we(J,ue,ae){var oe=ue&7,de=ue>>>3;return ae<<=oe,J[de]|=ae&255,ae>>>=8,J[de+1]=ae,ue+8}function Se(J,ue,ae){var oe=ue&7,de=ue>>>3;return ae<<=oe,J[de]|=ae&255,ae>>>=8,J[de+1]=ae&255,J[de+2]=ae>>>8,ue+16}function ze(J,ue){var ae=J.length,oe=2*ae>ue?2*ae:ue+5,de=0;if(ae>=ue)return J;if(Kt){var pe=G2(oe);if(J.copy)J.copy(pe);else for(;de<J.length;++de)pe[de]=J[de];return pe}else if(Z){var ke=new Uint8Array(oe);if(ke.set)ke.set(J);else for(;de<ae;++de)ke[de]=J[de];return ke}return J.length=oe,J}function Ie(J){for(var ue=new Array(J),ae=0;ae<J;++ae)ue[ae]=0;return ue}function $e(J,ue,ae){var oe=1,de=0,pe=0,ke=0,Le=0,De=J.length,Pe=Z?new Uint16Array(32):Ie(32);for(pe=0;pe<32;++pe)Pe[pe]=0;for(pe=De;pe<ae;++pe)J[pe]=0;De=J.length;var Fe=Z?new Uint16Array(De):Ie(De);for(pe=0;pe<De;++pe)Pe[de=J[pe]]++,oe<de&&(oe=de),Fe[pe]=0;for(Pe[0]=0,pe=1;pe<=oe;++pe)Pe[pe+16]=Le=Le+Pe[pe-1]<<1;for(pe=0;pe<De;++pe)Le=J[pe],Le!=0&&(Fe[pe]=Pe[Le+16]++);var qe=0;for(pe=0;pe<De;++pe)if(qe=J[pe],qe!=0)for(Le=X(Fe[pe],oe)>>oe-qe,ke=(1<<oe+4-qe)-1;ke>=0;--ke)ue[Le|ke<<qe]=qe&15|pe<<4;return oe}var Be=Z?new Uint16Array(512):Ie(512),We=Z?new Uint16Array(32):Ie(32);if(!Z){for(var Ke=0;Ke<512;++Ke)Be[Ke]=0;for(Ke=0;Ke<32;++Ke)We[Ke]=0}(function(){for(var J=[],ue=0;ue<32;ue++)J.push(5);$e(J,We,32);var ae=[];for(ue=0;ue<=143;ue++)ae.push(8);for(;ue<=255;ue++)ae.push(9);for(;ue<=279;ue++)ae.push(7);for(;ue<=287;ue++)ae.push(8);$e(ae,Be,288)})();var Ee=function(){for(var ue=Z?new Uint8Array(32768):[],ae=0,oe=0;ae<ie.length-1;++ae)for(;oe<ie[ae+1];++oe)ue[oe]=ae;for(;oe<32768;++oe)ue[oe]=29;var de=Z?new Uint8Array(259):[];for(ae=0,oe=0;ae<ge.length-1;++ae)for(;oe<ge[ae+1];++oe)de[oe]=ae;function pe(Le,De){for(var Pe=0;Pe<Le.length;){var Fe=Math.min(65535,Le.length-Pe),qe=Pe+Fe==Le.length;for(De.write_shift(1,+qe),De.write_shift(2,Fe),De.write_shift(2,~Fe&65535);Fe-- >0;)De[De.l++]=Le[Pe++]}return De.l}function ke(Le,De){for(var Pe=0,Fe=0,qe=Z?new Uint16Array(32768):[];Fe<Le.length;){var Je=Math.min(65535,Le.length-Fe);if(Je<10){for(Pe=le(De,Pe,+(Fe+Je==Le.length)),Pe&7&&(Pe+=8-(Pe&7)),De.l=Pe/8|0,De.write_shift(2,Je),De.write_shift(2,~Je&65535);Je-- >0;)De[De.l++]=Le[Fe++];Pe=De.l*8;continue}Pe=le(De,Pe,+(Fe+Je==Le.length)+2);for(var it=0;Je-- >0;){var Ye=Le[Fe];it=(it<<5^Ye)&32767;var tt=-1,wt=0;if((tt=qe[it])&&(tt|=Fe&-32768,tt>Fe&&(tt-=32768),tt<Fe))for(;Le[tt+wt]==Le[Fe+wt]&&wt<250;)++wt;if(wt>2){Ye=de[wt],Ye<=22?Pe=we(De,Pe,Q[Ye+1]>>1)-1:(we(De,Pe,3),Pe+=5,we(De,Pe,Q[Ye-23]>>5),Pe+=3);var ur=Ye<8?0:Ye-4>>2;ur>0&&(Se(De,Pe,wt-ge[Ye]),Pe+=ur),Ye=ue[Fe-tt],Pe=we(De,Pe,Q[Ye]>>3),Pe-=3;var ar=Ye<4?0:Ye-2>>1;ar>0&&(Se(De,Pe,Fe-tt-ie[Ye]),Pe+=ar);for(var Sr=0;Sr<wt;++Sr)qe[it]=Fe&32767,it=(it<<5^Le[Fe])&32767,++Fe;Je-=wt-1}else Ye<=143?Ye=Ye+48:Pe=Te(De,Pe,1),Pe=we(De,Pe,Q[Ye]),qe[it]=Fe&32767,++Fe}Pe=we(De,Pe,0)-1}return De.l=(Pe+7)/8|0,De.l}return function(De,Pe){return De.length<8?pe(De,Pe):ke(De,Pe)}}();function ye(J){var ue=nn(50+Math.floor(J.length*1.1)),ae=Ee(J,ue);return ue.slice(0,ae)}var _e=Z?new Uint16Array(32768):Ie(32768),Re=Z?new Uint16Array(32768):Ie(32768),Ge=Z?new Uint16Array(128):Ie(128),st=1,gt=1;function yt(J,ue){var ae=ve(J,ue)+257;ue+=5;var oe=ve(J,ue)+1;ue+=5;var de=ee(J,ue)+4;ue+=4;for(var pe=0,ke=Z?new Uint8Array(19):Ie(19),Le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],De=1,Pe=Z?new Uint8Array(8):Ie(8),Fe=Z?new Uint8Array(8):Ie(8),qe=ke.length,Je=0;Je<de;++Je)ke[te[Je]]=pe=Y(J,ue),De<pe&&(De=pe),Pe[pe]++,ue+=3;var it=0;for(Pe[0]=0,Je=1;Je<=De;++Je)Fe[Je]=it=it+Pe[Je-1]<<1;for(Je=0;Je<qe;++Je)(it=ke[Je])!=0&&(Le[Je]=Fe[it]++);var Ye=0;for(Je=0;Je<qe;++Je)if(Ye=ke[Je],Ye!=0){it=Q[Le[Je]]>>8-Ye;for(var tt=(1<<7-Ye)-1;tt>=0;--tt)Ge[it|tt<<Ye]=Ye&7|Je<<3}var wt=[];for(De=1;wt.length<ae+oe;)switch(it=Ge[re(J,ue)],ue+=it&7,it>>>=3){case 16:for(pe=3+W(J,ue),ue+=2,it=wt[wt.length-1];pe-- >0;)wt.push(it);break;case 17:for(pe=3+Y(J,ue),ue+=3;pe-- >0;)wt.push(0);break;case 18:for(pe=11+re(J,ue),ue+=7;pe-- >0;)wt.push(0);break;default:wt.push(it),De<it&&(De=it);break}var ur=wt.slice(0,ae),ar=wt.slice(ae);for(Je=ae;Je<286;++Je)ur[Je]=0;for(Je=oe;Je<30;++Je)ar[Je]=0;return st=$e(ur,_e,286),gt=$e(ar,Re,30),ue}function Ut(J,ue){if(J[0]==3&&!(J[1]&3))return[vo(ue),2];for(var ae=0,oe=0,de=G2(ue||1<<18),pe=0,ke=de.length>>>0,Le=0,De=0;!(oe&1);){if(oe=Y(J,ae),ae+=3,oe>>>1)oe>>1==1?(Le=9,De=5):(ae=yt(J,ae),Le=st,De=gt);else{ae&7&&(ae+=8-(ae&7));var Pe=J[ae>>>3]|J[(ae>>>3)+1]<<8;if(ae+=32,Pe>0)for(!ue&&ke<pe+Pe&&(de=ze(de,pe+Pe),ke=de.length);Pe-- >0;)de[pe++]=J[ae>>>3],ae+=8;continue}for(;;){!ue&&ke<pe+32767&&(de=ze(de,pe+32767),ke=de.length);var Fe=se(J,ae,Le),qe=oe>>>1==1?Be[Fe]:_e[Fe];if(ae+=qe&15,qe>>>=4,!(qe>>>8&255))de[pe++]=qe;else{if(qe==256)break;qe-=257;var Je=qe<8?0:qe-4>>2;Je>5&&(Je=0);var it=pe+ge[qe];Je>0&&(it+=se(J,ae,Je),ae+=Je),Fe=se(J,ae,De),qe=oe>>>1==1?We[Fe]:Re[Fe],ae+=qe&15,qe>>>=4;var Ye=qe<4?0:qe-2>>1,tt=ie[qe];for(Ye>0&&(tt+=se(J,ae,Ye),ae+=Ye),!ue&&ke<it&&(de=ze(de,it+100),ke=de.length);pe<it;)de[pe]=de[pe-tt],++pe}}}return ue?[de,ae+7>>>3]:[de.slice(0,pe),ae+7>>>3]}function pt(J,ue){var ae=J.slice(J.l||0),oe=Ut(ae,ue);return J.l+=oe[1],oe[0]}function lt(J,ue){if(J)typeof console<"u"&&console.error(ue);else throw new Error(ue)}function mt(J,ue){var ae=J;_n(ae,0);var oe=[],de=[],pe={FileIndex:oe,FullPaths:de};A(pe,{root:ue.root});for(var ke=ae.length-4;(ae[ke]!=80||ae[ke+1]!=75||ae[ke+2]!=5||ae[ke+3]!=6)&&ke>=0;)--ke;ae.l=ke+4,ae.l+=4;var Le=ae.read_shift(2);ae.l+=6;var De=ae.read_shift(4);for(ae.l=De,ke=0;ke<Le;++ke){ae.l+=20;var Pe=ae.read_shift(4),Fe=ae.read_shift(4),qe=ae.read_shift(2),Je=ae.read_shift(2),it=ae.read_shift(2);ae.l+=8;var Ye=ae.read_shift(4),tt=o(ae.slice(ae.l+qe,ae.l+qe+Je));ae.l+=qe+Je+it;var wt=ae.l;ae.l=Ye+4,kt(ae,Pe,Fe,pe,tt),ae.l=wt}return pe}function kt(J,ue,ae,oe,de){J.l+=2;var pe=J.read_shift(2),ke=J.read_shift(2),Le=a(J);if(pe&8257)throw new Error("Unsupported ZIP encryption");for(var De=J.read_shift(4),Pe=J.read_shift(4),Fe=J.read_shift(4),qe=J.read_shift(2),Je=J.read_shift(2),it="",Ye=0;Ye<qe;++Ye)it+=String.fromCharCode(J[J.l++]);if(Je){var tt=o(J.slice(J.l,J.l+Je));(tt[21589]||{}).mt&&(Le=tt[21589].mt),((de||{})[21589]||{}).mt&&(Le=de[21589].mt)}J.l+=Je;var wt=J.slice(J.l,J.l+Pe);switch(ke){case 8:wt=z(J,Fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ke)}var ur=!1;pe&8&&(De=J.read_shift(4),De==134695760&&(De=J.read_shift(4),ur=!0),Pe=J.read_shift(4),Fe=J.read_shift(4)),Pe!=ue&&lt(ur,"Bad compressed size: "+ue+" != "+Pe),Fe!=ae&&lt(ur,"Bad uncompressed size: "+ae+" != "+Fe),kr(oe,it,wt,{unsafe:!0,mt:Le})}function Ot(J,ue){var ae=ue||{},oe=[],de=[],pe=nn(1),ke=ae.compression?8:0,Le=0,De=0,Pe=0,Fe=0,qe=0,Je=J.FullPaths[0],it=Je,Ye=J.FileIndex[0],tt=[],wt=0;for(De=1;De<J.FullPaths.length;++De)if(it=J.FullPaths[De].slice(Je.length),Ye=J.FileIndex[De],!(!Ye.size||!Ye.content||it=="Sh33tJ5")){var ur=Fe,ar=nn(it.length);for(Pe=0;Pe<it.length;++Pe)ar.write_shift(1,it.charCodeAt(Pe)&127);ar=ar.slice(0,ar.l),tt[qe]=gY.buf(Ye.content,0);var Sr=Ye.content;ke==8&&(Sr=K(Sr)),pe=nn(30),pe.write_shift(4,67324752),pe.write_shift(2,20),pe.write_shift(2,Le),pe.write_shift(2,ke),Ye.mt?i(pe,Ye.mt):pe.write_shift(4,0),pe.write_shift(-4,tt[qe]),pe.write_shift(4,Sr.length),pe.write_shift(4,Ye.content.length),pe.write_shift(2,ar.length),pe.write_shift(2,0),Fe+=pe.length,oe.push(pe),Fe+=ar.length,oe.push(ar),Fe+=Sr.length,oe.push(Sr),pe=nn(46),pe.write_shift(4,33639248),pe.write_shift(2,0),pe.write_shift(2,20),pe.write_shift(2,Le),pe.write_shift(2,ke),pe.write_shift(4,0),pe.write_shift(-4,tt[qe]),pe.write_shift(4,Sr.length),pe.write_shift(4,Ye.content.length),pe.write_shift(2,ar.length),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(4,0),pe.write_shift(4,ur),wt+=pe.l,de.push(pe),wt+=ar.length,de.push(ar),++qe}return pe=nn(22),pe.write_shift(4,101010256),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,qe),pe.write_shift(2,qe),pe.write_shift(4,wt),pe.write_shift(4,Fe),pe.write_shift(2,0),qi([qi(oe),qi(de),pe])}var Er={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Kn(J,ue){if(J.ctype)return J.ctype;var ae=J.name||"",oe=ae.match(/\.([^\.]+)$/);return oe&&Er[oe[1]]||ue&&(oe=(ae=ue).match(/[\.\\]([^\.\\])+$/),oe&&Er[oe[1]])?Er[oe[1]]:"application/octet-stream"}function Si(J){for(var ue=H2(J),ae=[],oe=0;oe<ue.length;oe+=76)ae.push(ue.slice(oe,oe+76));return ae.join(`\r
`)+`\r
`}function cs(J){var ue=J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Pe){var Fe=Pe.charCodeAt(0).toString(16).toUpperCase();return"="+(Fe.length==1?"0"+Fe:Fe)});ue=ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ue.charAt(0)==`
`&&(ue="=0D"+ue.slice(1)),ue=ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ae=[],oe=ue.split(`\r
`),de=0;de<oe.length;++de){var pe=oe[de];if(pe.length==0){ae.push("");continue}for(var ke=0;ke<pe.length;){var Le=76,De=pe.slice(ke,ke+Le);De.charAt(Le-1)=="="?Le--:De.charAt(Le-2)=="="?Le-=2:De.charAt(Le-3)=="="&&(Le-=3),De=pe.slice(ke,ke+Le),ke+=Le,ke<pe.length&&(De+="="),ae.push(De)}}return ae.join(`\r
`)}function Ol(J){for(var ue=[],ae=0;ae<J.length;++ae){for(var oe=J[ae];ae<=J.length&&oe.charAt(oe.length-1)=="=";)oe=oe.slice(0,oe.length-1)+J[++ae];ue.push(oe)}for(var de=0;de<ue.length;++de)ue[de]=ue[de].replace(/[=][0-9A-Fa-f]{2}/g,function(pe){return String.fromCharCode(parseInt(pe.slice(1),16))});return na(ue.join(`\r
`))}function ja(J,ue,ae){for(var oe="",de="",pe="",ke,Le=0;Le<10;++Le){var De=ue[Le];if(!De||De.match(/^\s*$/))break;var Pe=De.match(/^(.*?):\s*([^\s].*)$/);if(Pe)switch(Pe[1].toLowerCase()){case"content-location":oe=Pe[2].trim();break;case"content-type":pe=Pe[2].trim();break;case"content-transfer-encoding":de=Pe[2].trim();break}}switch(++Le,de.toLowerCase()){case"base64":ke=na(Rs(ue.slice(Le).join("")));break;case"quoted-printable":ke=Ol(ue.slice(Le));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+de)}var Fe=kr(J,oe.slice(ae.length),ke,{unsafe:!0});pe&&(Fe.ctype=pe)}function To(J,ue){if(M(J.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ae=ue&&ue.root||"",oe=(Kt&&Buffer.isBuffer(J)?J.toString("binary"):M(J)).split(`\r
`),de=0,pe="";for(de=0;de<oe.length;++de)if(pe=oe[de],!!/^Content-Location:/i.test(pe)&&(pe=pe.slice(pe.indexOf("file")),ae||(ae=pe.slice(0,pe.lastIndexOf("/")+1)),pe.slice(0,ae.length)!=ae))for(;ae.length>0&&(ae=ae.slice(0,ae.length-1),ae=ae.slice(0,ae.lastIndexOf("/")+1),pe.slice(0,ae.length)!=ae););var ke=(oe[1]||"").match(/boundary="(.*?)"/);if(!ke)throw new Error("MAD cannot find boundary");var Le="--"+(ke[1]||""),De=[],Pe=[],Fe={FileIndex:De,FullPaths:Pe};A(Fe);var qe,Je=0;for(de=0;de<oe.length;++de){var it=oe[de];it!==Le&&it!==Le+"--"||(Je++&&ja(Fe,oe.slice(qe,de),ae),qe=de)}return Fe}function en(J,ue){var ae=ue||{},oe=ae.boundary||"SheetJS";oe="------="+oe;for(var de=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+oe.slice(2)+'"',"","",""],pe=J.FullPaths[0],ke=pe,Le=J.FileIndex[0],De=1;De<J.FullPaths.length;++De)if(ke=J.FullPaths[De].slice(pe.length),Le=J.FileIndex[De],!(!Le.size||!Le.content||ke=="Sh33tJ5")){ke=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wt){return"_x"+wt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wt){return"_u"+wt.charCodeAt(0).toString(16)+"_"});for(var Pe=Le.content,Fe=Kt&&Buffer.isBuffer(Pe)?Pe.toString("binary"):M(Pe),qe=0,Je=Math.min(1024,Fe.length),it=0,Ye=0;Ye<=Je;++Ye)(it=Fe.charCodeAt(Ye))>=32&&it<128&&++qe;var tt=qe>=Je*4/5;de.push(oe),de.push("Content-Location: "+(ae.root||"file:///C:/SheetJS/")+ke),de.push("Content-Transfer-Encoding: "+(tt?"quoted-printable":"base64")),de.push("Content-Type: "+Kn(Le,ke)),de.push(""),de.push(tt?cs(Fe):Si(Fe))}return de.push(oe+`--\r
`),de.join(`\r
`)}function Ao(J){var ue={};return A(ue,J),ue}function kr(J,ue,ae,oe){var de=oe&&oe.unsafe;de||A(J);var pe=!de&&Yt.find(J,ue);if(!pe){var ke=J.FullPaths[0];ue.slice(0,ke.length)==ke?ke=ue:(ke.slice(-1)!="/"&&(ke+="/"),ke=(ke+ue).replace("//","/")),pe={name:s(ue),type:2},J.FileIndex.push(pe),J.FullPaths.push(ke),de||Yt.utils.cfb_gc(J)}return pe.content=ae,pe.size=ae?ae.length:0,oe&&(oe.CLSID&&(pe.clsid=oe.CLSID),oe.mt&&(pe.mt=oe.mt),oe.ct&&(pe.ct=oe.ct)),pe}function Cn(J,ue){A(J);var ae=Yt.find(J,ue);if(ae){for(var oe=0;oe<J.FileIndex.length;++oe)if(J.FileIndex[oe]==ae)return J.FileIndex.splice(oe,1),J.FullPaths.splice(oe,1),!0}return!1}function Nl(J,ue,ae){A(J);var oe=Yt.find(J,ue);if(oe){for(var de=0;de<J.FileIndex.length;++de)if(J.FileIndex[de]==oe)return J.FileIndex[de].name=s(ae),J.FullPaths[de]=ae,!0}return!1}function lu(J){b(J,!0)}return e.find=C,e.read=D,e.parse=u,e.write=q,e.writeFile=U,e.utils={cfb_new:Ao,cfb_add:kr,cfb_del:Cn,cfb_mov:Nl,cfb_gc:lu,ReadShift:hd,CheckField:oD,prep_blob:_n,bconcat:qi,use_zlib:L,_deflateRaw:ye,_inflateRaw:pt,consts:O},e}();function vY(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ma(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Iy(t){for(var e=[],r=Ma(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}var qh=new Date(1899,11,30,0,0,0);function ls(t,e){var r=t.getTime(),n=qh.getTime()+(t.getTimezoneOffset()-qh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Vk=new Date,xY=qh.getTime()+(Vk.getTimezoneOffset()-qh.getTimezoneOffset())*6e4,J2=Vk.getTimezoneOffset();function im(t){var e=new Date;return e.setTime(t*24*60*60*1e3+xY),e.getTimezoneOffset()!==J2&&e.setTime(e.getTime()+(e.getTimezoneOffset()-J2)*6e4),e}function yY(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var Z2=new Date("2017-02-19T19:06:09.000Z"),$k=isNaN(Z2.getFullYear())?new Date("2/19/17"):Z2,EY=$k.getFullYear()==2017;function mn(t,e){var r=new Date(t);if(EY)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if($k.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ml(t,e){if(Kt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return zu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return zu(Ik(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return zu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return zu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function wn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=wn(t[r]));return e}function Ur(t,e){for(var r="";r.length<e;)r+=t;return r}function ca(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var _Y=["january","february","march","april","may","june","july","august","september","october","november","december"];function Kc(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&_Y.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var bY=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),a=[i[0]],o=1;o<i.length;++o)a.push(s),a.push(i[o]);return a}}();function jk(t){return t?t.content&&t.type?ml(t.content,!0):t.data?ju(t.data):t.asNodeBuffer&&Kt?ju(t.asNodeBuffer().toString("binary")):t.asBinary?ju(t.asBinary()):t._data&&t._data.getContent?ju(ml(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Hk(t){if(!t)return null;if(t.data)return $2(t.data);if(t.asNodeBuffer&&Kt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?$2(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function SY(t){return t&&t.name.slice(-4)===".bin"?Hk(t):jk(t)}function Bs(t,e){for(var r=t.FullPaths||Ma(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==a||s==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Cy(t,e){var r=Bs(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Yr(t,e,r){if(!r)return SY(Cy(t,e));if(!e)return null;try{return Yr(t,e)}catch{return null}}function Ts(t,e,r){if(!r)return jk(Cy(t,e));if(!e)return null;try{return Ts(t,e)}catch{return null}}function TY(t,e,r){return Hk(Cy(t,e))}function eS(t){for(var e=t.FullPaths||Ma(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function AY(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Kt?n=wl(r):n=GX(r),Yt.utils.cfb_add(t,e,n)}Yt.utils.cfb_add(t,e,r)}else t.file(e,r)}function Gk(t,e){switch(e.type){case"base64":return Yt.read(t,{type:"base64"});case"binary":return Yt.read(t,{type:"binary"});case"buffer":case"array":return Yt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Gu(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var zk=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,wY=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tS=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,IY=/<[^>]*>/g,Wn=zk.match(tS)?tS:IY,CY=/<\w*:/,kY=/<(\/?)\w+:/;function Tt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var a=t.match(wY),o=0,l="",c=0,u="",d="",f=1;if(a)for(c=0;c!=a.length;++c){for(d=a[c],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(u=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(f=(s=d.charCodeAt(i+1))==34||s==39?1:0,l=d.slice(i+1+f,d.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var h=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[h]&&u.slice(o-3,o)=="ext")continue;n[h]=l,n[h.toLowerCase()]=l}}return n}function Va(t){return t.replace(kY,"<$1")}var Wk={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},DY=Iy(Wk),Zt=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(o,l){return Wk[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,a)+r(s.slice(a+3))}}(),PY=/[&<>'"]/g,RY=/[\u0000-\u001f]/g;function ky(t){var e=t+"";return e.replace(PY,function(r){return DY[r]}).replace(/\n/g,"<br/>").replace(RY,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var rS=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function wr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function rg(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function nS(t){var e=vo(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function sS(t){return wl(t,"binary").toString("utf8")}var y0="foo bar baz",xr=Kt&&(sS(y0)==rg(y0)&&sS||nS(y0)==rg(y0)&&nS)||rg,zu=Kt?function(t){return wl(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Qd=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Kk=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),FY=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),OY=/<\/?(?:vt:)?variant>/g,NY=/<(?:vt:)([^>]*)>([\s\S]*)</;function aS(t,e){var r=Tt(t),n=t.match(FY(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var a=i.replace(OY,"").match(NY);a&&s.push({v:xr(a[2]),t:a[1]})}),s}var MY=/(^\s|\s$|\n)/;function BY(t){return Ma(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function LY(t,e,r){return"<"+t+(r!=null?BY(r):"")+(e!=null?(e.match(MY)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Dy(t){if(Kt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return xr(Il(Ty(t)));throw new Error("Bad input format: expected Buffer or string")}var Jd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,UY={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},VY=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function $Y(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function jY(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var iS=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},oS=Kt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:wl(e)})):iS(t)}:iS,lS=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(ni(t,s)));return n.join("").replace(os,"")},Py=Kt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(os,""):lS(t,e,r)}:lS,cS=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},qk=Kt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):cS(t,e,r)}:cS,uS=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(oc(t,s)));return n.join("")},Rf=Kt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):uS(e,r,n)}:uS,Xk=function(t,e){var r=Ss(t,e);return r>0?Rf(t,e+4,e+4+r-1):""},Yk=Xk,Qk=function(t,e){var r=Ss(t,e);return r>0?Rf(t,e+4,e+4+r-1):""},Jk=Qk,Zk=function(t,e){var r=2*Ss(t,e);return r>0?Rf(t,e+4,e+4+r-1):""},eD=Zk,tD=function(e,r){var n=Ss(e,r);return n>0?Py(e,r+4,r+4+n):""},rD=tD,nD=function(t,e){var r=Ss(t,e);return r>0?Rf(t,e+4,e+4+r):""},sD=nD,aD=function(t,e){return $Y(t,e)},Xh=aD,iD=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Kt&&(Yk=function(e,r){if(!Buffer.isBuffer(e))return Xk(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Jk=function(e,r){if(!Buffer.isBuffer(e))return Qk(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},eD=function(e,r){if(!Buffer.isBuffer(e))return Zk(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},rD=function(e,r){if(!Buffer.isBuffer(e))return tD(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},sD=function(e,r){if(!Buffer.isBuffer(e))return nD(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Xh=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):aD(e,r)},iD=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var oc=function(t,e){return t[e]},ni=function(t,e){return t[e+1]*256+t[e]},HY=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Ss=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},$o=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},GY=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function hd(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,Kt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(ni(this,c)),c+=2;t*=2;break;case"utf8":r=Rf(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Py(this,this.l,this.l+t);break;case"wstr":return hd.call(this,t,"dbcs");case"lpstr-ansi":r=Yk(this,this.l),t=4+Ss(this,this.l);break;case"lpstr-cp":r=Jk(this,this.l),t=4+Ss(this,this.l);break;case"lpwstr":r=eD(this,this.l),t=4+2*Ss(this,this.l);break;case"lpp4":t=4+Ss(this,this.l),r=rD(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ss(this,this.l),r=sD(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=oc(this,this.l+t++))!==0;)i.push(x0(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=ni(this,this.l+t))!==0;)i.push(x0(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=oc(this,c),this.l=c+1,o=hd.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(x0(ni(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=oc(this,c),this.l=c+1,o=hd.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(x0(oc(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=oc(this,this.l),this.l++,n;case 2:return n=(e==="i"?HY:ni)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?$o:GY)(this,this.l),this.l+=4,n):(s=Ss(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=Xh(this,this.l):s=Xh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=qk(this,this.l,t);break}}return this.l+=t,r}var zY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},WY=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},KY=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function qY(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)KY(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,zY(this,e,this.l);break;case 8:if(n=8,r==="f"){jY(this,e,this.l);break}case 16:break;case-4:n=4,WY(this,e,this.l);break}return this.l+=n,this}function oD(t,e){var r=qk(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function _n(t,e){t.l=e,t.read_shift=hd,t.chk=oD,t.write_shift=qY}function zn(t,e){t.l+=e}function nn(t){var e=vo(t);return _n(e,0),e}function _i(t,e,r){if(t){var n,s,i;_n(t,t.l||0);for(var a=t.length,o=0,l=0;t.l<a;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=tp[o]||tp[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;l=t.l+i;var u=c.f&&c.f(t,i,r);if(t.l=l,e(u,c,o))return}}}function h1(){var t=[],e=Kt?256:2048,r=function(c){var u=nn(c);return _n(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),qi(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function pd(t,e,r){var n=wn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function dS(t,e,r){var n=wn(t);return n.s=pd(n.s,e.s,r),n.e=pd(n.e,e.s,r),n}function md(t,e){if(t.cRel&&t.c<0)for(t=wn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=wn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Rt(t);return!t.cRel&&t.cRel!=null&&(r=QY(r)),!t.rRel&&t.rRel!=null&&(r=XY(r)),r}function ng(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ln(t.s.c)+":"+(t.e.cRel?"":"$")+ln(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+In(t.s.r)+":"+(t.e.rRel?"":"$")+In(t.e.r):md(t.s,e.biff)+":"+md(t.e,e.biff)}function Ry(t){return parseInt(YY(t),10)-1}function In(t){return""+(t+1)}function XY(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function YY(t){return t.replace(/\$(\d+)$/,"$1")}function Fy(t){for(var e=JY(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ln(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function QY(t){return t.replace(/^([A-Z])/,"$$$1")}function JY(t){return t.replace(/^\$([A-Z])/,"$1")}function ZY(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ss(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function Rt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function iu(t){var e=t.indexOf(":");return e==-1?{s:ss(t),e:ss(t)}:{s:ss(t.slice(0,e)),e:ss(t.slice(e+1))}}function Jt(t,e){return typeof e>"u"||typeof e=="number"?Jt(t.s,t.e):(typeof t!="string"&&(t=Rt(t)),typeof e!="string"&&(e=Rt(e)),t==e?t:t+":"+e)}function Hr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function fS(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Gs(t.z,r?ls(e):e)}catch{}try{return t.w=Gs((t.XF||{}).numFmtId||(r?14:0),r?ls(e):e)}catch{return""+e}}function gi(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Dl[t.v]||t.v:e==null?fS(t,t.v):fS(t,e))}function bo(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function lD(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Hr(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[d].length;++f)if(!(typeof e[d][f]>"u")){var h={v:e[d][f]},p=a+d,v=o+f;if(c.s.r>p&&(c.s.r=p),c.s.c>v&&(c.s.c=v),c.e.r<p&&(c.e.r=p),c.e.c<v&&(c.e.c=v),e[d][f]&&typeof e[d][f]=="object"&&!Array.isArray(e[d][f])&&!(e[d][f]instanceof Date))h=e[d][f];else if(Array.isArray(h.v)&&(h.f=e[d][f][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Mt[14],n.cellDates?(h.t="d",h.w=Gs(h.z,ls(h.v))):(h.t="n",h.v=ls(h.v),h.w=Gs(h.z,h.v))):h.t="s";if(s)i[p]||(i[p]=[]),i[p][v]&&i[p][v].z&&(h.z=i[p][v].z),i[p][v]=h;else{var g=Rt({c:v,r:p});i[g]&&i[g].z&&(h.z=i[g].z),i[g]=h}}}return c.s.c<1e7&&(i["!ref"]=Jt(c)),i}function ou(t,e){return lD(null,t,e)}function eQ(t){return t.read_shift(4,"i")}function Gn(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function tQ(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Oy(t,e){var r=t.l,n=t.read_shift(1),s=Gn(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(tQ(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var rQ=Oy;function qs(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Cl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var nQ=Gn;function Ny(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var sQ=Gn,p1=Ny;function My(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?Xh([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):$o(e,0)>>2;return r?s/100:s}function cD(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var kl=cD;function Ln(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function aQ(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=Jo[s];c&&(e.rgb=ef(c));break;case 2:e.rgb=ef([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function iQ(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function uD(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function oQ(t){return uD(t,1)}function lQ(t){return uD(t,2)}var By=2,hs=3,E0=11,hS=12,Yh=19,_0=64,cQ=65,uQ=71,dQ=4108,fQ=4126,hn=80,dD=81,hQ=[hn,dD],pQ={1:{n:"CodePage",t:By},2:{n:"Category",t:hn},3:{n:"PresentationFormat",t:hn},4:{n:"ByteCount",t:hs},5:{n:"LineCount",t:hs},6:{n:"ParagraphCount",t:hs},7:{n:"SlideCount",t:hs},8:{n:"NoteCount",t:hs},9:{n:"HiddenCount",t:hs},10:{n:"MultimediaClipCount",t:hs},11:{n:"ScaleCrop",t:E0},12:{n:"HeadingPairs",t:dQ},13:{n:"TitlesOfParts",t:fQ},14:{n:"Manager",t:hn},15:{n:"Company",t:hn},16:{n:"LinksUpToDate",t:E0},17:{n:"CharacterCount",t:hs},19:{n:"SharedDoc",t:E0},22:{n:"HyperlinksChanged",t:E0},23:{n:"AppVersion",t:hs,p:"version"},24:{n:"DigSig",t:cQ},26:{n:"ContentType",t:hn},27:{n:"ContentStatus",t:hn},28:{n:"Language",t:hn},29:{n:"Version",t:hn},255:{},2147483648:{n:"Locale",t:Yh},2147483651:{n:"Behavior",t:Yh},1919054434:{}},mQ={1:{n:"CodePage",t:By},2:{n:"Title",t:hn},3:{n:"Subject",t:hn},4:{n:"Author",t:hn},5:{n:"Keywords",t:hn},6:{n:"Comments",t:hn},7:{n:"Template",t:hn},8:{n:"LastAuthor",t:hn},9:{n:"RevNumber",t:hn},10:{n:"EditTime",t:_0},11:{n:"LastPrinted",t:_0},12:{n:"CreatedDate",t:_0},13:{n:"ModifiedDate",t:_0},14:{n:"PageCount",t:hs},15:{n:"WordCount",t:hs},16:{n:"CharCount",t:hs},17:{n:"Thumbnail",t:uQ},18:{n:"Application",t:hn},19:{n:"DocSecurity",t:hs},255:{},2147483648:{n:"Locale",t:Yh},2147483651:{n:"Behavior",t:Yh},1919054434:{}},pS={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},gQ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function vQ(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var xQ=vQ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Jo=wn(xQ),Dl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fD={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},mS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function yQ(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function EQ(t){var e=yQ();if(!t||!t.match)return e;var r={};if((t.match(Wn)||[]).forEach(function(n){var s=Tt(n);switch(s[0].replace(CY,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[mS[s.ContentType]]!==void 0&&e[mS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==UY.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var dc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function m1(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function gd(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Wn)||[]).forEach(function(s){var i=Tt(s);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Gu(i.Target,e);r[o]=a,n[i.Id]=a}}),r["!id"]=n,r}var _Q="application/vnd.oasis.opendocument.spreadsheet";function bQ(t,e){for(var r=Dy(t),n,s;n=Jd.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Tt(n[0],!1),s.path=="/"&&s.type!==_Q)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}var vd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],SQ=function(){for(var t=new Array(vd.length),e=0;e<vd.length;++e){var r=vd[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function hD(t){var e={};t=xr(t);for(var r=0;r<vd.length;++r){var n=vd[r],s=t.match(SQ[r]);s!=null&&s.length>0&&(e[n[1]]=Zt(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=mn(e[n[1]]))}return e}var TQ=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function pD(t,e,r,n){var s=[];if(typeof t=="string")s=aS(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?aS(e,n).map(function(u){return u.v}):e,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=a.slice(o,o+l);break}o+=l}}function AQ(t,e,r){var n={};return e||(e={}),t=xr(t),TQ.forEach(function(s){var i=(t.match(Qd(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=Zt(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));a&&a.length>0&&(n[s[1]]=a[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&pD(n.HeadingPairs,n.TitlesOfParts,e,r),e}var wQ=/<[^>]+>[^<]*/g;function IQ(t,e){var r={},n="",s=t.match(wQ);if(s)for(var i=0;i!=s.length;++i){var a=s[i],o=Tt(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Zt(o.name);break;case"</property>":n=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Zt(u);break;case"bool":r[n]=wr(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=mn(u);break;case"cy":case"error":r[n]=Zt(u);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var CQ={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},sg;function kQ(t,e,r){sg||(sg=Iy(CQ)),e=sg[e]||e,t[e]=r}function Ly(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function mD(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function gD(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function vD(t,e,r){return e===31?gD(t):mD(t,e,r)}function g1(t,e,r){return vD(t,e,r===!1?0:4)}function DQ(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return vD(t,e,0)}function PQ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(os,""),t.l-s&2&&(t.l+=2)}return r}function RQ(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(os,"");return r}function FQ(t){var e=t.l,r=Qh(t,dD);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Qh(t,hs);return[r,n]}function OQ(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(FQ(t));return r}function gS(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),a=t.read_shift(4);n[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(os,"").replace(Hu,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function xD(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function NQ(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Qh(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==hS&&n!==e&&hQ.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===hS?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return mD(t,n,4).replace(os,"");case 31:return gD(t);case 64:return Ly(t);case 65:return xD(t);case 71:return NQ(t);case 80:return g1(t,n,!i.raw).replace(os,"");case 81:return DQ(t,n).replace(os,"");case 4108:return OQ(t);case 4126:case 4127:return n==4127?PQ(t):RQ(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function vS(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var u=t.read_shift(4),d=t.read_shift(4);i[a]=[u,d+r]}i.sort(function(y,E){return y[1]-E[1]});var f={};for(a=0;a!=s;++a){if(t.l!==i[a][1]){var h=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,h=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],h=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],h=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(h=!1,t.l=i[a][1]),h)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var p=e[i[a][0]];if(f[p.n]=Qh(t,p.t,{raw:!0}),p.p==="version"&&(f[p.n]=String(f[p.n]>>16)+"."+("0000"+String(f[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(f[p.n]){case 0:f[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:sa(o=f[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[p.n])}}else if(i[a][0]===1){if(o=f.CodePage=Qh(t,By),sa(o),l!==-1){var v=t.l;t.l=i[l][1],c=gS(t,o),t.l=v}}else if(i[a][0]===0){if(o===0){l=a,t.l=i[a+1][1];continue}c=gS(t,o)}else{var g=c[i[a][0]],x;switch(t[t.l]){case 65:t.l+=4,x=xD(t);break;case 30:t.l+=4,x=g1(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=g1(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=zr(t,4);break;case 64:t.l+=4,x=mn(Ly(t));break;default:throw new Error("unparsed value: "+t[t.l])}f[g]=x}}return t.l=r+n,f}function xS(t,e,r){var n=t.content;if(!n)return{};_n(n,0);var s,i,a,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==Yt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(a=n.read_shift(16),l=n.read_shift(4));var d=vS(n,e),f={SystemIdentifier:c};for(var h in d)f[h]=d[h];if(f.FMTID=i,s===1)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var p;try{p=vS(n,null)}catch{}for(h in p)f[h]=p[h];return f.FMTID=[i,a],f}function Fi(t,e){return t.read_shift(e),null}function MQ(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function zr(t,e){return t.read_shift(e)===1}function Qr(t){return t.read_shift(2,"u")}function yD(t,e){return MQ(t,e,Qr)}function BQ(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Ff(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function LQ(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),a=0,o,l={};s&&(a=t.read_shift(2)),n&&(o=t.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*a),n&&(t.l+=o),l.t=u,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function gl(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Of(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):gl(t,n,r)}function Pl(t,e,r){if(r.biff>5)return Of(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function UQ(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function VQ(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(os,"");return n&&(t.l+=24),s}function $Q(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(os,"");return r+a}function jQ(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return VQ(t);case"0303000000000000c000000000000046":return $Q(t);default:throw new Error("Unsupported Moniker "+r)}}function b0(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(os,""):"";return r}function HQ(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,a,o,l,c="",u,d;s&16&&(i=b0(t,r-t.l)),s&128&&(a=b0(t,r-t.l)),(s&257)===257&&(o=b0(t,r-t.l)),(s&257)===1&&(l=jQ(t,r-t.l)),s&8&&(c=b0(t,r-t.l)),s&32&&(u=t.read_shift(16)),s&64&&(d=Ly(t)),t.l=r;var f=a||o||l||"";f&&c&&(f+="#"+c),f||(f="#"+c),s&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var h={Target:f};return u&&(h.guid=u),d&&(h.time=d),i&&(h.Tooltip=i),h}function ED(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function _D(t,e){var r=ED(t);return r[3]=0,r}function $a(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function GQ(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function zQ(t,e,r){return e===0?"":Pl(t,e,r)}function WQ(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function bD(t){var e=t.read_shift(2),r=My(t);return[e,r]}function KQ(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=Ff(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function om(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function SD(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var qQ=SD;function TD(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function XQ(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function YQ(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Rn(t){t.l+=2,t.l+=t.read_shift(2)}var QQ={0:Rn,4:Rn,5:Rn,6:Rn,7:YQ,8:Rn,9:Rn,10:Rn,11:Rn,12:Rn,13:XQ,14:Rn,15:Rn,16:Rn,17:Rn,18:Rn,19:Rn,20:Rn,21:TD};function JQ(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(QQ[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function S0(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function ZQ(t,e){return e===0||t.read_shift(2),1200}function eJ(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=Pl(t,0,r);return t.read_shift(e+n-t.l),s}function tJ(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function rJ(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=Ff(t,0,r);return a.length===0&&(a="Sheet1"),{pos:n,hs:s,dt:i,name:a}}function nJ(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],a=0;a!=s&&t.l<r;++a)i.push(LQ(t));return i.Count=n,i.Unique=s,i}function sJ(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function aJ(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function iJ(t){var e=GQ(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function oJ(t){return t.read_shift(2),t.read_shift(4)}function yS(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function lJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function cJ(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function uJ(){}function dJ(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Ff(t,0,r),n}function fJ(t){var e=$a(t);return e.isst=t.read_shift(4),e}function hJ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=$a(t);r.biff==2&&t.l++;var i=Of(t,n-t.l,r);return s.val=i,s}function pJ(t,e,r){var n=t.read_shift(2),s=Pl(t,0,r);return[n,s]}var mJ=Pl;function ES(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),a=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:i,c:o},e:{r:a,c:l}}}function gJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=bD(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function vJ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(bD(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:a,rkrec:i}}function xJ(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:a,ixfe:i}}function yJ(t,e,r,n){var s={},i=t.read_shift(4),a=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=gQ[o>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=a&15,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function EJ(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=yJ(t,e,n.fStyle,r),n}function _J(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function _S(t,e,r){var n=$a(t);(r.biff==2||e==9)&&++t.l;var s=BQ(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function bJ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=$a(t),s=Ln(t);return n.val=s,n}var bS=zQ;function SJ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=gl(t,i),o=[];n>t.l;)o.push(Of(t));return[i,s,a,o]}function SS(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=KQ(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var TJ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function TS(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var c=gl(t,a,r);s&32&&(c=TJ[c.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var d=n==t.l||o===0||!(u>0)?[]:are(t,u,r,o);return{chKey:i,Name:c,itab:l,rgce:d}}function AD(t,e,r){if(r.biff<8)return AJ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(WQ(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function AJ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Ff(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function wJ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=gl(t,n,r),a=gl(t,s,r);return[i,a]}function IJ(t,e,r){var n=SD(t);t.l++;var s=t.read_shift(1);return e-=8,[ire(t,e,r),s,n]}function AS(t,e,r){var n=qQ(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,nre(t,e,r)]}function CJ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function kJ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),o=Pl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,a,i]}}function DJ(t,e,r){return kJ(t,e,r)}function PJ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(om(t));return r}function RJ(t,e,r){if(r&&r.biff<8)return OJ(t,e,r);var n=TD(t),s=JQ(t,e-22,n[1]);return{cmo:n,ft:s}}var FJ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function OJ(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((FJ[n]||zn)(t,e,r)),{cmo:[s,n,i],ft:a}}function NJ(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=UQ(t,6,r);var o=t.read_shift(2);t.read_shift(2),Qr(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-n!=t.lens[c])throw new Error("TxO: bad continue record");var u=t[t.l],d=gl(t,t.lens[c+1]-t.lens[c]-1);if(s+=d,s.length>=(u?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function MJ(t,e){var r=om(t);t.l+=16;var n=HQ(t,e-24);return[r,n]}function BJ(t,e){t.read_shift(2);var r=om(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(os,""),[r,n]}function LJ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=pS[r]||r,r=t.read_shift(2),e[1]=pS[r]||r,e}function UJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(_D(t));return r}function VJ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(_D(t));return r}function $J(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function wD(t,e,r){if(!r.cellStyles)return zn(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function jJ(t,e){var r={};return e<32||(t.l+=16,r.header=Ln(t),r.footer=Ln(t),t.l+=2),r}function HJ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}var GJ=$a,zJ=yD,WJ=Of;function KJ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function qJ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=$a(t);++t.l;var s=Pl(t,e-7,r);return n.t="str",n.val=s,n}function XJ(t){var e=$a(t);++t.l;var r=Ln(t);return e.t="n",e.val=r,e}function YJ(t){var e=$a(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function QJ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function JJ(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function ZJ(t,e,r){var n=t.l+e,s=$a(t),i=t.read_shift(2),a=gl(t,i,r);return t.l=n,s.t="str",s.val=a,s}var eZ=[2,3,48,49,131,139,140,245],wS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Iy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=vo(1);switch(l.type){case"base64":u=na(Rs(o));break;case"binary":u=na(o);break;case"buffer":case"array":u=o;break}_n(u,0);var d=u.read_shift(1),f=!!(d&136),h=!1,p=!1;switch(d){case 2:break;case 3:break;case 48:h=!0,f=!0;break;case 49:h=!0,f=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var v=0,g=521;d==2&&(v=u.read_shift(2)),u.l+=3,d!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),d!=2&&(g=u.read_shift(2));var x=u.read_shift(2),y=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(y=t[u[u.l]]),u.l+=1,u.l+=2),p&&(u.l+=36);for(var E=[],I={},P=Math.min(u.length,d==2?521:g-10-(h?264:0)),D=p?32:11;u.l<P&&u[u.l]!=13;)switch(I={},I.name=Xd.utils.decode(y,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,I.type=String.fromCharCode(u.read_shift(1)),d!=2&&!p&&(I.offset=u.read_shift(4)),I.len=u.read_shift(1),d==2&&(I.offset=u.read_shift(2)),I.dec=u.read_shift(1),I.name.length&&E.push(I),d!=2&&(u.l+=p?13:14),I.type){case"B":(!h||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var A=0,_=0;for(c[0]=[],_=0;_!=E.length;++_)c[0][_]=E[_].name;for(;v-- >0;){if(u[u.l]===42){u.l+=x;continue}for(++u.l,c[++A]=[],_=0,_=0;_!=E.length;++_){var b=u.slice(u.l,u.l+E[_].len);u.l+=E[_].len,_n(b,0);var w=Xd.utils.decode(y,b);switch(E[_].type){case"C":w.trim().length&&(c[A][_]=w.replace(/\s+$/,""));break;case"D":w.length===8?c[A][_]=new Date(+w.slice(0,4),+w.slice(4,6)-1,+w.slice(6,8)):c[A][_]=w;break;case"F":c[A][_]=parseFloat(w.trim());break;case"+":case"I":c[A][_]=p?b.read_shift(-4,"i")^2147483648:b.read_shift(4,"i");break;case"L":switch(w.trim().toUpperCase()){case"Y":case"T":c[A][_]=!0;break;case"N":case"F":c[A][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+w+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[A][_]="##MEMO##"+(p?parseInt(w.trim(),10):b.read_shift(4));break;case"N":w=w.replace(/\u0000/g,"").trim(),w&&w!="."&&(c[A][_]=+w||0);break;case"@":c[A][_]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":c[A][_]=new Date((b.read_shift(4)-2440588)*864e5+b.read_shift(4));break;case"Y":c[A][_]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[A][_]=-b.read_shift(-8,"f");break;case"B":if(h&&E[_].len==8){c[A][_]=b.read_shift(8,"f");break}case"G":case"P":b.l+=E[_].len;break;case"0":if(E[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[_].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=E,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=ou(r(o,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function s(o,l){try{return bo(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&sa(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=h1(),d=b1(o,{header:1,raw:!0,cellDates:!0}),f=d[0],h=d.slice(1),p=o["!cols"]||[],v=0,g=0,x=0,y=1;for(v=0;v<f.length;++v){if(((p[v]||{}).DBF||{}).name){f[v]=p[v].DBF.name,++x;continue}if(f[v]!=null){if(++x,typeof f[v]=="number"&&(f[v]=f[v].toString(10)),typeof f[v]!="string")throw new Error("DBF Invalid column name "+f[v]+" |"+typeof f[v]+"|");if(f.indexOf(f[v])!==v){for(g=0;g<1024;++g)if(f.indexOf(f[v]+"_"+g)==-1){f[v]+="_"+g;break}}}}var E=Hr(o["!ref"]),I=[],P=[],D=[];for(v=0;v<=E.e.c-E.s.c;++v){var A="",_="",b=0,w=[];for(g=0;g<h.length;++g)h[g][v]!=null&&w.push(h[g][v]);if(w.length==0||f[v]==null){I[v]="?";continue}for(g=0;g<w.length;++g){switch(typeof w[g]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=w[g]instanceof Date?"D":"C";break;default:_="C"}b=Math.max(b,String(w[g]).length),A=A&&A!=_?"C":_}b>250&&(b=250),_=((p[v]||{}).DBF||{}).type,_=="C"&&p[v].DBF.len>b&&(b=p[v].DBF.len),A=="B"&&_=="N"&&(A="N",D[v]=p[v].DBF.dec,b=p[v].DBF.len),P[v]=A=="C"||_=="N"?b:i[A]||0,y+=P[v],I[v]=A}var C=u.next(32);for(C.write_shift(4,318902576),C.write_shift(4,h.length),C.write_shift(2,296+32*x),C.write_shift(2,y),v=0;v<4;++v)C.write_shift(4,0);for(C.write_shift(4,0|(+e[Ak]||3)<<8),v=0,g=0;v<f.length;++v)if(f[v]!=null){var T=u.next(32),k=(f[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,k,"sbcs"),T.write_shift(1,I[v]=="?"?"C":I[v],"sbcs"),T.write_shift(4,g),T.write_shift(1,P[v]||i[I[v]]||0),T.write_shift(1,D[v]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),g+=P[v]||i[I[v]]||0}var N=u.next(264);for(N.write_shift(4,13),v=0;v<65;++v)N.write_shift(4,0);for(v=0;v<h.length;++v){var B=u.next(y);for(B.write_shift(1,0),g=0;g<f.length;++g)if(f[g]!=null)switch(I[g]){case"L":B.write_shift(1,h[v][g]==null?63:h[v][g]?84:70);break;case"B":B.write_shift(8,h[v][g]||0,"f");break;case"N":var R="0";for(typeof h[v][g]=="number"&&(R=h[v][g].toFixed(D[g]||0)),x=0;x<P[g]-R.length;++x)B.write_shift(1,32);B.write_shift(1,R,"sbcs");break;case"D":h[v][g]?(B.write_shift(4,("0000"+h[v][g].getFullYear()).slice(-4),"sbcs"),B.write_shift(2,("00"+(h[v][g].getMonth()+1)).slice(-2),"sbcs"),B.write_shift(2,("00"+h[v][g].getDate()).slice(-2),"sbcs")):B.write_shift(8,"00000000","sbcs");break;case"C":var O=String(h[v][g]!=null?h[v][g]:"").slice(0,P[g]);for(B.write_shift(1,O,"sbcs"),x=0;x<P[g]-O.length;++x)B.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),tZ=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ma(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,h){var p=t[h];return typeof p=="number"?j2(p):p},n=function(f,h,p){var v=h.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return v==59?f:j2(v)};t["|"]=254;function s(f,h){switch(h.type){case"base64":return i(Rs(f),h);case"binary":return i(f,h);case"buffer":return i(Kt&&Buffer.isBuffer(f)?f.toString("binary"):Il(f),h);case"array":return i(ml(f),h)}throw new Error("Unrecognized type "+h.type)}function i(f,h){var p=f.split(/[\n\r]+/),v=-1,g=-1,x=0,y=0,E=[],I=[],P=null,D={},A=[],_=[],b=[],w=0,C;for(+h.codepage>=0&&sa(+h.codepage);x!==p.length;++x){w=0;var T=p[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),k=T.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),N=k[0],B;if(T.length>0)switch(N){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":k[1].charAt(0)=="P"&&I.push(T.slice(3).replace(/;;/g,";"));break;case"C":var R=!1,O=!1,U=!1,M=!1,q=-1,H=-1;for(y=1;y<k.length;++y)switch(k[y].charAt(0)){case"A":break;case"X":g=parseInt(k[y].slice(1))-1,O=!0;break;case"Y":for(v=parseInt(k[y].slice(1))-1,O||(g=0),C=E.length;C<=v;++C)E[C]=[];break;case"K":B=k[y].slice(1),B.charAt(0)==='"'?B=B.slice(1,B.length-1):B==="TRUE"?B=!0:B==="FALSE"?B=!1:isNaN(ca(B))?isNaN(Kc(B).getDate())||(B=mn(B)):(B=ca(B),P!==null&&au(P)&&(B=im(B))),R=!0;break;case"E":M=!0;var L=kc(k[y].slice(1),{r:v,c:g});E[v][g]=[E[v][g],L];break;case"S":U=!0,E[v][g]=[E[v][g],"S5S"];break;case"G":break;case"R":q=parseInt(k[y].slice(1))-1;break;case"C":H=parseInt(k[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+T)}if(R&&(E[v][g]&&E[v][g].length==2?E[v][g][0]=B:E[v][g]=B,P=null),U){if(M)throw new Error("SYLK shared formula cannot have own formula");var z=q>-1&&E[q][H];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");E[v][g][1]=MD(z[1],{r:v-q,c:g-H})}break;case"F":var K=0;for(y=1;y<k.length;++y)switch(k[y].charAt(0)){case"X":g=parseInt(k[y].slice(1))-1,++K;break;case"Y":for(v=parseInt(k[y].slice(1))-1,C=E.length;C<=v;++C)E[C]=[];break;case"M":w=parseInt(k[y].slice(1))/20;break;case"F":break;case"G":break;case"P":P=I[parseInt(k[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(b=k[y].slice(1).split(" "),C=parseInt(b[0],10);C<=parseInt(b[1],10);++C)w=parseInt(b[2],10),_[C-1]=w===0?{hidden:!0}:{wch:w},qc(_[C-1]);break;case"C":g=parseInt(k[y].slice(1))-1,_[g]||(_[g]={});break;case"R":v=parseInt(k[y].slice(1))-1,A[v]||(A[v]={}),w>0?(A[v].hpt=w,A[v].hpx=tf(w)):w===0&&(A[v].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+T)}K<1&&(P=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+T)}}return A.length>0&&(D["!rows"]=A),_.length>0&&(D["!cols"]=_),h&&h.sheetRows&&(E=E.slice(0,h.sheetRows)),[E,D]}function a(f,h){var p=s(f,h),v=p[0],g=p[1],x=ou(v,h);return Ma(g).forEach(function(y){x[y]=g[y]}),x}function o(f,h){return bo(a(f,h),h)}function l(f,h,p,v){var g="C;Y"+(p+1)+";X"+(v+1)+";K";switch(f.t){case"n":g+=f.v||0,f.f&&!f.F&&(g+=";E"+$ee(f.f,{r:p,c:v}));break;case"b":g+=f.v?"TRUE":"FALSE";break;case"e":g+=f.w||f.v;break;case"d":g+='"'+(f.w||f.v)+'"';break;case"s":g+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function c(f,h){h.forEach(function(p,v){var g="F;W"+(v+1)+" "+(v+1)+" ";p.hidden?g+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=Zh(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=ep(p.wpx)),typeof p.wch=="number"&&(g+=Math.round(p.wch))),g.charAt(g.length-1)!=" "&&f.push(g)})}function u(f,h){h.forEach(function(p,v){var g="F;";p.hidden?g+="M0;":p.hpt?g+="M"+20*p.hpt+";":p.hpx&&(g+="M"+20*FD(p.hpx)+";"),g.length>2&&f.push(g+"R"+(v+1))})}function d(f,h){var p=["ID;PWXL;N;E"],v=[],g=Hr(f["!ref"]),x,y=Array.isArray(f),E=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),f["!cols"]&&c(p,f["!cols"]),f["!rows"]&&u(p,f["!rows"]),p.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var I=g.s.r;I<=g.e.r;++I)for(var P=g.s.c;P<=g.e.c;++P){var D=Rt({r:I,c:P});x=y?(f[I]||[])[P]:f[D],!(!x||x.v==null&&(!x.f||x.F))&&v.push(l(x,f,I,P))}return p.join(E)+E+v.join(E)+E+"E"+E}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),rZ=function(){function t(i,a){switch(a.type){case"base64":return e(Rs(i),a);case"binary":return e(i,a);case"buffer":return e(Kt&&Buffer.isBuffer(i)?i.toString("binary"):Il(i),a);case"array":return e(ml(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,u=0,d=[];u!==o.length;++u){if(o[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var f=o[u].trim().split(","),h=f[0],p=f[1];++u;for(var v=o[u]||"";(v.match(/["]/g)||[]).length&1&&u<o.length-1;)v+=`
`+o[++u];switch(v=v.trim(),+h){case-1:if(v==="BOT"){d[++l]=[],c=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?d[l][c]=!0:v==="FALSE"?d[l][c]=!1:isNaN(ca(p))?isNaN(Kc(p).getDate())?d[l][c]=p:d[l][c]=mn(p):d[l][c]=ca(p),++c;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),d[l][c++]=v!==""?v:null;break}if(v==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return ou(t(i,a),a)}function n(i,a){return bo(r(i,a),a)}var s=function(){var i=function(l,c,u,d,f){l.push(c),l.push(u+","+d),l.push('"'+f.replace(/"/g,'""')+'"')},a=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Hr(l["!ref"]),d,f=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){a(c,-1,0,"BOT");for(var p=u.s.c;p<=u.e.c;++p){var v=Rt({r:h,c:p});if(d=f?(l[h]||[])[p]:l[v],!d){a(c,1,0,"");continue}switch(d.t){case"n":var g=d.w;!g&&d.v!=null&&(g=d.v),g==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,g,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Gs(d.z||Mt[14],ls(mn(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var x=`\r
`,y=c.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),nZ=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,f){for(var h=d.split(`
`),p=-1,v=-1,g=0,x=[];g!==h.length;++g){var y=h[g].trim().split(":");if(y[0]==="cell"){var E=ss(y[1]);if(x.length<=E.r)for(p=x.length;p<=E.r;++p)x[p]||(x[p]=[]);switch(p=E.r,v=E.c,y[2]){case"t":x[p][v]=t(y[3]);break;case"v":x[p][v]=+y[3];break;case"vtf":var I=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[p][v]=!!+y[4];break;default:x[p][v]=+y[4];break}y[2]=="vtf"&&(x[p][v]=[x[p][v],I])}}}return f&&f.sheetRows&&(x=x.slice(0,f.sheetRows)),x}function n(d,f){return ou(r(d,f),f)}function s(d,f){return bo(n(d,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var f=[],h=[],p,v="",g=iu(d["!ref"]),x=Array.isArray(d),y=g.s.r;y<=g.e.r;++y)for(var E=g.s.c;E<=g.e.c;++E)if(v=Rt({r:y,c:E}),p=x?(d[y]||[])[E]:d[v],!(!p||p.v==null||p.t==="z")){switch(h=["cell",v,"t"],p.t){case"s":case"str":h.push(e(p.v));break;case"n":p.f?(h[2]="vtf",h[3]="n",h[4]=p.v,h[5]=e(p.f)):(h[2]="v",h[3]=p.v);break;case"b":h[2]="vt"+(p.f?"f":"c"),h[3]="nl",h[4]=p.v?"1":"0",h[5]=e(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var I=ls(mn(p.v));h[2]="vtc",h[3]="nd",h[4]=""+I,h[5]=p.w||Gs(p.z||Mt[14],I);break;case"e":continue}f.push(h.join(":"))}return f.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),Zd=function(){function t(u,d,f,h,p){p.raw?d[f][h]=u:u===""||(u==="TRUE"?d[f][h]=!0:u==="FALSE"?d[f][h]=!1:isNaN(ca(u))?isNaN(Kc(u).getDate())?d[f][h]=u:d[f][h]=mn(u):d[f][h]=ca(u))}function e(u,d){var f=d||{},h=[];if(!u||u.length===0)return h;for(var p=u.split(/[\r\n]/),v=p.length-1;v>=0&&p[v].length===0;)--v;for(var g=10,x=0,y=0;y<=v;++y)x=p[y].indexOf(" "),x==-1?x=p[y].length:x++,g=Math.max(g,x);for(y=0;y<=v;++y){h[y]=[];var E=0;for(t(p[y].slice(0,g).trim(),h,y,E,f),E=1;E<=(p[y].length-g)/10+1;++E)t(p[y].slice(g+(E-1)*10,g+E*10).trim(),h,y,E,f)}return f.sheetRows&&(h=h.slice(0,f.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var d={},f=!1,h=0,p=0;h<u.length;++h)(p=u.charCodeAt(h))==34?f=!f:!f&&p in r&&(d[p]=(d[p]||0)+1);p=[];for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&p.push([d[h],h]);if(!p.length){d=n;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&p.push([d[h],h])}return p.sort(function(v,g){return v[0]-g[0]||n[v[1]]-n[g[1]]}),r[p.pop()[1]]||44}function i(u,d){var f=d||{},h="",p=f.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=s(u.slice(0,1024)):f&&f.FS?h=f.FS:h=s(u.slice(0,1024));var g=0,x=0,y=0,E=0,I=0,P=h.charCodeAt(0),D=!1,A=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var b=f.dateNF!=null?pY(f.dateNF):null;function w(){var C=u.slice(E,I),T={};if(C.charAt(0)=='"'&&C.charAt(C.length-1)=='"'&&(C=C.slice(1,-1).replace(/""/g,'"')),C.length===0)T.t="z";else if(f.raw)T.t="s",T.v=C;else if(C.trim().length===0)T.t="s",T.v=C;else if(C.charCodeAt(0)==61)C.charCodeAt(1)==34&&C.charCodeAt(C.length-1)==34?(T.t="s",T.v=C.slice(2,-1).replace(/""/g,'"')):Hee(C)?(T.t="n",T.f=C.slice(1)):(T.t="s",T.v=C);else if(C=="TRUE")T.t="b",T.v=!0;else if(C=="FALSE")T.t="b",T.v=!1;else if(!isNaN(y=ca(C)))T.t="n",f.cellText!==!1&&(T.w=C),T.v=y;else if(!isNaN(Kc(C).getDate())||b&&C.match(b)){T.z=f.dateNF||Mt[14];var k=0;b&&C.match(b)&&(C=mY(C,f.dateNF,C.match(b)||[]),k=1),f.cellDates?(T.t="d",T.v=mn(C,k)):(T.t="n",T.v=ls(mn(C,k))),f.cellText!==!1&&(T.w=Gs(T.z,T.v instanceof Date?ls(T.v):T.v)),f.cellNF||delete T.z}else T.t="s",T.v=C;if(T.t=="z"||(f.dense?(p[g]||(p[g]=[]),p[g][x]=T):p[Rt({c:x,r:g})]=T),E=I+1,_=u.charCodeAt(E),v.e.c<x&&(v.e.c=x),v.e.r<g&&(v.e.r=g),A==P)++x;else if(x=0,++g,f.sheetRows&&f.sheetRows<=g)return!0}e:for(;I<u.length;++I)switch(A=u.charCodeAt(I)){case 34:_===34&&(D=!D);break;case P:case 10:case 13:if(!D&&w())break e;break}return I-E>0&&w(),p["!ref"]=Jt(v),p}function a(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,d):ou(e(u,d),d)}function o(u,d){var f="",h=d.type=="string"?[0,0,0,0]:Wy(u,d);switch(d.type){case"base64":f=Rs(u);break;case"binary":f=u;break;case"buffer":d.codepage==65001?f=u.toString("utf8"):d.codepage&&typeof Xd<"u"||(f=Kt&&Buffer.isBuffer(u)?u.toString("binary"):Il(u));break;case"array":f=ml(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+d.type)}return h[0]==239&&h[1]==187&&h[2]==191?f=xr(f.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?f=xr(f):d.type=="binary"&&typeof Xd<"u",f.slice(0,19)=="socialcalc:version:"?nZ.to_sheet(d.type=="string"?f:xr(f),d):a(f,d)}function l(u,d){return bo(o(u,d),d)}function c(u){for(var d=[],f=Hr(u["!ref"]),h,p=Array.isArray(u),v=f.s.r;v<=f.e.r;++v){for(var g=[],x=f.s.c;x<=f.e.c;++x){var y=Rt({r:v,c:x});if(h=p?(u[v]||[])[x]:u[y],!h||h.v==null){g.push("          ");continue}for(var E=(h.w||(gi(h),h.w)||"").slice(0,10);E.length<10;)E+=" ";g.push(E+(x===0?" ":""))}d.push(g.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function sZ(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=tZ.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Zd.to_workbook(t,e)}}var xd=function(){function t(L,z,K){if(L){_n(L,L.l||0);for(var te=K.Enum||q;L.l<L.length;){var ge=L.read_shift(2),ie=te[ge]||te[65535],he=L.read_shift(2),Z=L.l+he,Q=ie.f&&ie.f(L,he,K);if(L.l=Z,z(Q,ie,ge))return}}}function e(L,z){switch(z.type){case"base64":return r(na(Rs(L)),z);case"binary":return r(na(L),z);case"buffer":case"array":return r(L,z)}throw"Unsupported type "+z.type}function r(L,z){if(!L)return L;var K=z||{},te=K.dense?[]:{},ge="Sheet1",ie="",he=0,Z={},Q=[],xe=[],X={s:{r:0,c:0},e:{r:0,c:0}},W=K.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)K.Enum=q,t(L,function(re,se,le){switch(le){case 0:K.vers=re,re>=4096&&(K.qpro=!0);break;case 6:X=re;break;case 204:re&&(ie=re);break;case 222:ie=re;break;case 15:case 51:K.qpro||(re[1].v=re[1].v.slice(1));case 13:case 14:case 16:le==14&&(re[2]&112)==112&&(re[2]&15)>1&&(re[2]&15)<15&&(re[1].z=K.dateNF||Mt[14],K.cellDates&&(re[1].t="d",re[1].v=im(re[1].v))),K.qpro&&re[3]>he&&(te["!ref"]=Jt(X),Z[ge]=te,Q.push(ge),te=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},he=re[3],ge=ie||"Sheet"+(he+1),ie="");var Te=K.dense?(te[re[0].r]||[])[re[0].c]:te[Rt(re[0])];if(Te){Te.t=re[1].t,Te.v=re[1].v,re[1].z!=null&&(Te.z=re[1].z),re[1].f!=null&&(Te.f=re[1].f);break}K.dense?(te[re[0].r]||(te[re[0].r]=[]),te[re[0].r][re[0].c]=re[1]):te[Rt(re[0])]=re[1];break}},K);else if(L[2]==26||L[2]==14)K.Enum=H,L[2]==14&&(K.qpro=!0,L.l=0),t(L,function(re,se,le){switch(le){case 204:ge=re;break;case 22:re[1].v=re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(re[3]>he&&(te["!ref"]=Jt(X),Z[ge]=te,Q.push(ge),te=K.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},he=re[3],ge="Sheet"+(he+1)),W>0&&re[0].r>=W)break;K.dense?(te[re[0].r]||(te[re[0].r]=[]),te[re[0].r][re[0].c]=re[1]):te[Rt(re[0])]=re[1],X.e.c<re[0].c&&(X.e.c=re[0].c),X.e.r<re[0].r&&(X.e.r=re[0].r);break;case 27:re[14e3]&&(xe[re[14e3][0]]=re[14e3][1]);break;case 1537:xe[re[0]]=re[1],re[0]==he&&(ge=re[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(te["!ref"]=Jt(X),Z[ie||ge]=te,Q.push(ie||ge),!xe.length)return{SheetNames:Q,Sheets:Z};for(var Y={},ee=[],ve=0;ve<xe.length;++ve)Z[Q[ve]]?(ee.push(xe[ve]||Q[ve]),Y[xe[ve]]=Z[xe[ve]]||Z[Q[ve]]):(ee.push(xe[ve]),Y[xe[ve]]={"!ref":"A1"});return{SheetNames:ee,Sheets:Y}}function n(L,z){var K=z||{};if(+K.codepage>=0&&sa(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var te=h1(),ge=Hr(L["!ref"]),ie=Array.isArray(L),he=[];Js(te,0,i(1030)),Js(te,6,l(ge));for(var Z=Math.min(ge.e.r,8191),Q=ge.s.r;Q<=Z;++Q)for(var xe=In(Q),X=ge.s.c;X<=ge.e.c;++X){Q===ge.s.r&&(he[X]=ln(X));var W=he[X]+xe,Y=ie?(L[Q]||[])[X]:L[W];if(!(!Y||Y.t=="z"))if(Y.t=="n")(Y.v|0)==Y.v&&Y.v>=-32768&&Y.v<=32767?Js(te,13,h(Q,X,Y.v)):Js(te,14,v(Q,X,Y.v));else{var ee=gi(Y);Js(te,15,d(Q,X,ee.slice(0,239)))}}return Js(te,1),te.end()}function s(L,z){var K=z||{};if(+K.codepage>=0&&sa(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var te=h1();Js(te,0,a(L));for(var ge=0,ie=0;ge<L.SheetNames.length;++ge)(L.Sheets[L.SheetNames[ge]]||{})["!ref"]&&Js(te,27,M(L.SheetNames[ge],ie++));var he=0;for(ge=0;ge<L.SheetNames.length;++ge){var Z=L.Sheets[L.SheetNames[ge]];if(!(!Z||!Z["!ref"])){for(var Q=Hr(Z["!ref"]),xe=Array.isArray(Z),X=[],W=Math.min(Q.e.r,8191),Y=Q.s.r;Y<=W;++Y)for(var ee=In(Y),ve=Q.s.c;ve<=Q.e.c;++ve){Y===Q.s.r&&(X[ve]=ln(ve));var re=X[ve]+ee,se=xe?(Z[Y]||[])[ve]:Z[re];if(!(!se||se.t=="z"))if(se.t=="n")Js(te,23,w(Y,ve,he,se.v));else{var le=gi(se);Js(te,22,A(Y,ve,he,le.slice(0,239)))}}++he}}return Js(te,1),te.end()}function i(L){var z=nn(2);return z.write_shift(2,L),z}function a(L){var z=nn(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var K=0,te=0,ge=0,ie=0;ie<L.SheetNames.length;++ie){var he=L.SheetNames[ie],Z=L.Sheets[he];if(!(!Z||!Z["!ref"])){++ge;var Q=iu(Z["!ref"]);K<Q.e.r&&(K=Q.e.r),te<Q.e.c&&(te=Q.e.c)}}return K>8191&&(K=8191),z.write_shift(2,K),z.write_shift(1,ge),z.write_shift(1,te),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(L,z,K){var te={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&K.qpro?(te.s.c=L.read_shift(1),L.l++,te.s.r=L.read_shift(2),te.e.c=L.read_shift(1),L.l++,te.e.r=L.read_shift(2),te):(te.s.c=L.read_shift(2),te.s.r=L.read_shift(2),z==12&&K.qpro&&(L.l+=2),te.e.c=L.read_shift(2),te.e.r=L.read_shift(2),z==12&&K.qpro&&(L.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(L){var z=nn(8);return z.write_shift(2,L.s.c),z.write_shift(2,L.s.r),z.write_shift(2,L.e.c),z.write_shift(2,L.e.r),z}function c(L,z,K){var te=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(te[0].c=L.read_shift(1),te[3]=L.read_shift(1),te[0].r=L.read_shift(2),L.l+=2):(te[2]=L.read_shift(1),te[0].c=L.read_shift(2),te[0].r=L.read_shift(2)),te}function u(L,z,K){var te=L.l+z,ge=c(L,z,K);if(ge[1].t="s",K.vers==20768){L.l++;var ie=L.read_shift(1);return ge[1].v=L.read_shift(ie,"utf8"),ge}return K.qpro&&L.l++,ge[1].v=L.read_shift(te-L.l,"cstr"),ge}function d(L,z,K){var te=nn(7+K.length);te.write_shift(1,255),te.write_shift(2,z),te.write_shift(2,L),te.write_shift(1,39);for(var ge=0;ge<te.length;++ge){var ie=K.charCodeAt(ge);te.write_shift(1,ie>=128?95:ie)}return te.write_shift(1,0),te}function f(L,z,K){var te=c(L,z,K);return te[1].v=L.read_shift(2,"i"),te}function h(L,z,K){var te=nn(7);return te.write_shift(1,255),te.write_shift(2,z),te.write_shift(2,L),te.write_shift(2,K,"i"),te}function p(L,z,K){var te=c(L,z,K);return te[1].v=L.read_shift(8,"f"),te}function v(L,z,K){var te=nn(13);return te.write_shift(1,255),te.write_shift(2,z),te.write_shift(2,L),te.write_shift(8,K,"f"),te}function g(L,z,K){var te=L.l+z,ge=c(L,z,K);if(ge[1].v=L.read_shift(8,"f"),K.qpro)L.l=te;else{var ie=L.read_shift(2);I(L.slice(L.l,L.l+ie),ge),L.l+=ie}return ge}function x(L,z,K){var te=z&32768;return z&=-32769,z=(te?L:0)+(z>=8192?z-16384:z),(te?"":"$")+(K?ln(z):In(z))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(L,z){_n(L,0);for(var K=[],te=0,ge="",ie="",he="",Z="";L.l<L.length;){var Q=L[L.l++];switch(Q){case 0:K.push(L.read_shift(8,"f"));break;case 1:ie=x(z[0].c,L.read_shift(2),!0),ge=x(z[0].r,L.read_shift(2),!1),K.push(ie+ge);break;case 2:{var xe=x(z[0].c,L.read_shift(2),!0),X=x(z[0].r,L.read_shift(2),!1);ie=x(z[0].c,L.read_shift(2),!0),ge=x(z[0].r,L.read_shift(2),!1),K.push(xe+X+":"+ie+ge)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(L.read_shift(2));break;case 6:{for(var W="";Q=L[L.l++];)W+=String.fromCharCode(Q);K.push('"'+W.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:Z=K.pop(),he=K.pop(),K.push(["AND","OR"][Q-20]+"("+he+","+Z+")");break;default:if(Q<32&&E[Q])Z=K.pop(),he=K.pop(),K.push(he+E[Q]+Z);else if(y[Q]){if(te=y[Q][1],te==69&&(te=L[L.l++]),te>K.length){console.error("WK1 bad formula parse 0x"+Q.toString(16)+":|"+K.join("|")+"|");return}var Y=K.slice(-te);K.length-=te,K.push(y[Q][0]+"("+Y.join(",")+")")}else return Q<=7?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=24?console.error("WK1 unsupported op "+Q.toString(16)):Q<=30?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=115?console.error("WK1 unsupported function opcode "+Q.toString(16)):console.error("WK1 unrecognized opcode "+Q.toString(16))}}K.length==1?z[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function P(L){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=L.read_shift(2),z[3]=L[L.l++],z[0].c=L[L.l++],z}function D(L,z){var K=P(L);return K[1].t="s",K[1].v=L.read_shift(z-4,"cstr"),K}function A(L,z,K,te){var ge=nn(6+te.length);ge.write_shift(2,L),ge.write_shift(1,K),ge.write_shift(1,z),ge.write_shift(1,39);for(var ie=0;ie<te.length;++ie){var he=te.charCodeAt(ie);ge.write_shift(1,he>=128?95:he)}return ge.write_shift(1,0),ge}function _(L,z){var K=P(L);K[1].v=L.read_shift(2);var te=K[1].v>>1;if(K[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return K[1].v=te,K}function b(L,z){var K=P(L),te=L.read_shift(4),ge=L.read_shift(4),ie=L.read_shift(2);if(ie==65535)return te===0&&ge===3221225472?(K[1].t="e",K[1].v=15):te===0&&ge===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var he=ie&32768;return ie=(ie&32767)-16446,K[1].v=(1-he*2)*(ge*Math.pow(2,ie+32)+te*Math.pow(2,ie)),K}function w(L,z,K,te){var ge=nn(14);if(ge.write_shift(2,L),ge.write_shift(1,K),ge.write_shift(1,z),te==0)return ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(2,65535),ge;var ie=0,he=0,Z=0,Q=0;return te<0&&(ie=1,te=-te),he=Math.log2(te)|0,te/=Math.pow(2,he-31),Q=te>>>0,Q&2147483648||(te/=2,++he,Q=te>>>0),te-=Q,Q|=2147483648,Q>>>=0,te*=Math.pow(2,32),Z=te>>>0,ge.write_shift(4,Z),ge.write_shift(4,Q),he+=16383+(ie?32768:0),ge.write_shift(2,he),ge}function C(L,z){var K=b(L);return L.l+=z-14,K}function T(L,z){var K=P(L),te=L.read_shift(4);return K[1].v=te>>6,K}function k(L,z){var K=P(L),te=L.read_shift(8,"f");return K[1].v=te,K}function N(L,z){var K=k(L);return L.l+=z-10,K}function B(L,z){return L[L.l+z-1]==0?L.read_shift(z,"cstr"):""}function R(L,z){var K=L[L.l++];K>z-1&&(K=z-1);for(var te="";te.length<K;)te+=String.fromCharCode(L[L.l++]);return te}function O(L,z,K){if(!(!K.qpro||z<21)){var te=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ge=L.read_shift(z-21,"cstr");return[te,ge]}}function U(L,z){for(var K={},te=L.l+z;L.l<te;){var ge=L.read_shift(2);if(ge==14e3){for(K[ge]=[0,""],K[ge][0]=L.read_shift(2);L[L.l];)K[ge][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return K}function M(L,z){var K=nn(5+L.length);K.write_shift(2,14e3),K.write_shift(2,z);for(var te=0;te<L.length;++te){var ge=L.charCodeAt(te);K[K.l++]=ge>127?95:ge}return K[K.l++]=0,K}var q={0:{n:"BOF",f:Qr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:B},222:{n:"SHEETNAMELP",f:R},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:b},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:C},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:U},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:N},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:B},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:O},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function aZ(t){var e={},r=t.match(Wn),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Tt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=by[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var iZ=function(){var t=Qd("t"),e=Qd("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var o={t:"s",v:Zt(a[1])},l=i.match(e);return l&&(o.s=aZ(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(a){return a.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),oZ=function(){var e=/(\r\n|\n)/g;function r(s,i,a){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),a.push("</b>")),s.i&&(i.push("<i>"),a.push("</i>")),s.strike&&(i.push("<s>"),a.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),lZ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,cZ=/<(?:\w+:)?r>/,uZ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Uy(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Zt(xr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=xr(t),r&&(n.h=ky(n.t))):t.match(cZ)&&(n.r=xr(t),n.t=Zt(xr((t.replace(uZ,"").match(lZ)||[]).join("").replace(Wn,""))),r&&(n.h=oZ(iZ(n.r)))),n):{t:""}}var dZ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,fZ=/<(?:\w+:)?(?:si|sstItem)>/g,hZ=/<\/(?:\w+:)?(?:si|sstItem)>/;function pZ(t,e){var r=[],n="";if(!t)return r;var s=t.match(dZ);if(s){n=s[2].replace(fZ,"").split(hZ);for(var i=0;i!=n.length;++i){var a=Uy(n[i].trim(),e);a!=null&&(r[r.length]=a)}s=Tt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function mZ(t){return[t.read_shift(4),t.read_shift(4)]}function gZ(t,e){var r=[],n=!1;return _i(t,function(i,a,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function ID(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function ai(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function vZ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=ai(t,4),e.U=ai(t,4),e.W=ai(t,4),e}function xZ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function yZ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(xZ(t));return e}function EZ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function _Z(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=ai(t,4),e.U=ai(t,4),e.W=ai(t,4),e}function bZ(t){var e=_Z(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function CD(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function kD(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function SZ(t){var e=ai(t);switch(e.Minor){case 2:return[e.Minor,TZ(t)];case 3:return[e.Minor,AZ()];case 4:return[e.Minor,wZ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function TZ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=CD(t,r),s=kD(t,t.length-t.l);return{t:"Std",h:n,v:s}}function AZ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function wZ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Wn,function(i){var a=Tt(i);switch(Va(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=a[o]});break;case"<dataIntegrity":n.encryptedHmacKey=a.encryptedHmacKey,n.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(a);break;default:throw a[0]}}),n}function IZ(t,e){var r={},n=r.EncryptionVersionInfo=ai(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=CD(t,s),e-=s,r.EncryptionVerifier=kD(t,e),r}function CZ(t){var e={},r=e.EncryptionVersionInfo=ai(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function kZ(t){var e=0,r,n=ID(t),s=n.length+1,i,a,o,l,c;for(r=vo(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var DD=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(a){return(a/2|a*128)&255},s=function(a,o){return n(a^o)},i=function(a){for(var o=e[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],d=0;d!=7;++d)u&64&&(o^=r[l]),u*=2,--l;return o};return function(a){for(var o=ID(a),l=i(o),c=o.length,u=vo(16),d=0;d!=16;++d)u[d]=0;var f,h,p;for((c&1)===1&&(f=l>>8,u[c]=s(t[0],f),--c,f=l&255,h=o[o.length-1],u[c]=s(h,f));c>0;)--c,f=l>>8,u[c]=s(o[c],f),--c,f=l&255,u[c]=s(o[c],f);for(c=15,p=15-o.length;p>0;)f=l>>8,u[c]=s(t[p],f),--c,--p,f=l&255,u[c]=s(o[c],f),--c,--p;return u}}(),DZ=function(t,e,r,n,s){s||(s=e),n||(n=DD(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=n[r],a=(a>>5|a<<3)&255,s[i]=a,++r;return[s,r,n]},PZ=function(t){var e=0,r=DD(t);return function(n){var s=DZ("",n,e,r);return e=s[1],s[0]}};function RZ(t,e,r,n){var s={key:Qr(t),verificationBytes:Qr(t)};return r.password&&(s.verifier=kZ(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=PZ(r.password)),s}function FZ(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=CZ(t):n.Data=IZ(t,e),n}function OZ(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?FZ(t,e-2,n):RZ(t,r.biff>=8?e:e-2,r,n),n}var NZ=function(){function t(s,i){switch(i.type){case"base64":return e(Rs(s),i);case"binary":return e(s,i);case"buffer":return e(Kt&&Buffer.isBuffer(s)?s.toString("binary"):Il(s),i);case"array":return e(ml(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(o)&&(o[d]=[]);for(var f=/\\\w+\b/g,h=0,p,v=-1;p=f.exec(u);){switch(p[0]){case"\\cell":var g=u.slice(h,f.lastIndex-p[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var x={v:g,t:"s"};Array.isArray(o)?o[d][v]=x:o[Rt({r:d,c:v})]=x}break}h=f.lastIndex}v>c.e.c&&(c.e.c=v)}),o["!ref"]=Jt(c),o}function r(s,i){return bo(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=Hr(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var d=Rt({r:c,c:u});o=l?(s[c]||[])[u]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(gi(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function MZ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function ef(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function BZ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),a=s-i;if(a===0)return[0,0,e];var o=0,l=0,c=s+i;switch(l=a/(c>1?2-c:c),s){case e:o=((r-n)/a+6)%6;break;case r:o=(n-e)/a+2;break;case n:o=(e-r)/a+4;break}return[o/6,l,c/2]}function LZ(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,a=[i,i,i],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,a[0]+=s,a[1]+=l;break;case 1:l=s*(2-o),a[0]+=l,a[1]+=s;break;case 2:l=s*(o-2),a[1]+=s,a[2]+=l;break;case 3:l=s*(4-o),a[1]+=l,a[2]+=s;break;case 4:l=s*(o-4),a[2]+=s,a[0]+=l;break;case 5:l=s*(6-o),a[2]+=l,a[0]+=s;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function Jh(t,e){if(e===0)return t;var r=BZ(MZ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),ef(LZ(r))}var PD=6,UZ=15,VZ=1,ts=PD;function Zh(t){return Math.floor((t+Math.round(128/ts)/256)*ts)}function ep(t){return Math.floor((t-5)/ts*100+.5)/100}function v1(t){return Math.round((t*ts+5)/ts*256)/256}function ag(t){return v1(ep(Zh(t)))}function Vy(t){var e=Math.abs(t-ag(t)),r=ts;if(e>.005)for(ts=VZ;ts<UZ;++ts)Math.abs(t-ag(t))<=e&&(e=Math.abs(t-ag(t)),r=ts);ts=r}function qc(t){t.width?(t.wpx=Zh(t.width),t.wch=ep(t.wpx),t.MDW=ts):t.wpx?(t.wch=ep(t.wpx),t.width=v1(t.wch),t.MDW=ts):typeof t.wch=="number"&&(t.width=v1(t.wch),t.wpx=Zh(t.width),t.MDW=ts),t.customWidth&&delete t.customWidth}var $Z=96,RD=$Z;function FD(t){return t*96/RD}function tf(t){return t*RD/96}var jZ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function HZ(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Wn)||[]).forEach(function(a){var o=Tt(a);switch(Va(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=wr(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=wr(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function GZ(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Wn)||[]).forEach(function(a){var o=Tt(a);switch(Va(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function zZ(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Wn)||[]).forEach(function(a){var o=Tt(a);switch(Va(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=xr(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?wr(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?wr(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?wr(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?wr(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?wr(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?wr(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?wr(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=by[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=wr(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Jo[s.color.index];s.color.index==81&&(l=Jo[1]),l||(l=Jo[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Jh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function WZ(t,e,r){e.NumberFmt=[];for(var n=Ma(Mt),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Mt[n[s]];var i=t[0].match(Wn);if(i)for(s=0;s<i.length;++s){var a=Tt(i[s]);switch(Va(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Zt(xr(a.formatCode)),l=parseInt(a.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}Qo(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var T0=["numFmtId","fillId","fontId","borderId","xfId"],A0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function KZ(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Wn)||[]).forEach(function(i){var a=Tt(i),o=0;switch(Va(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=a,delete n[0],o=0;o<T0.length;++o)n[T0[o]]&&(n[T0[o]]=parseInt(n[T0[o]],10));for(o=0;o<A0.length;++o)n[A0[o]]&&(n[A0[o]]=wr(n[A0[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=wr(a.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var qZ=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&WZ(d,u,c),(d=o.match(s))&&zZ(d,u,l,c),(d=o.match(n))&&GZ(d,u,l,c),(d=o.match(i))&&HZ(d,u,l,c),(d=o.match(r))&&KZ(d,u,c),u}}();function XZ(t,e){var r=t.read_shift(2),n=Gn(t);return[r,n]}function YZ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=iQ(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=aQ(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Gn(t),n}var QZ=zn;function JZ(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}var ZZ=zn;function eee(t,e,r){var n={};n.NumberFmt=[];for(var s in Mt)n.NumberFmt[s]=Mt[s];n.CellXf=[],n.Fonts=[];var i=[],a=!1;return _i(t,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],Qo(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Jh(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var tee=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function ree(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Wn)||[]).forEach(function(s){var i=Tt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[tee.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function nee(){}function see(){}var aee=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,iee=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,oee=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function lee(t,e,r){e.themeElements={};var n;[["clrScheme",aee,ree],["fontScheme",iee,nee],["fmtScheme",oee,see]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var cee=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function OD(t,e){(!t||t.length===0)&&(t=uee());var r,n={};if(!(r=t.match(cee)))throw new Error("themeElements not found in theme");return lee(r[0],n,e),n.raw=t,n}function uee(t,e){var r=[zk];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function dee(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var a;try{a=Gk(i,{type:"array"})}catch{return}var o=Ts(a,"theme/theme/theme1.xml",!0);if(o)return OD(o,r)}}function fee(t){return t.read_shift(4)}function hee(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=pee(t,4);break;case 2:e.xclrValue=ED(t);break;case 3:e.xclrValue=fee(t);break;case 4:t.l+=4;break}return t.l+=8,e}function pee(t,e){return zn(t,e)}function mee(t,e){return zn(t,e)}function gee(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=hee(t);break;case 6:n[1]=mee(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function vee(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(gee(t,r-t.l));return{ixfe:n,ext:i}}function xee(t,e){e.forEach(function(r){switch(r[0]){}})}function yee(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Gn(t)}}function Eee(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function _ee(t){return t.l+=4,t.read_shift(4)!=0}function bee(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],a=!1,o=2;return _i(t,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!c.T){if(!a||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function See(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,a;return t.replace(Wn,function(o){var l=Tt(o);switch(Va(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(a=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function Tee(t){var e=[];if(!t)return e;var r=1;return(t.match(Wn)||[]).forEach(function(n){var s=Tt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function Aee(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Rt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function wee(t,e,r){var n=[];return _i(t,function(i,a,o){switch(o){case 63:n.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Iee(t,e,r,n){if(!t)return t;var s=n||{},i=!1;_i(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function Cee(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function IS(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(a){var o=ss(a.ref);if(s?(t[o.r]||(t[o.r]=[]),i=t[o.r][o.c]):i=t[a.ref],!i){i={t:"z"},s?t[o.r][o.c]=i:t[a.ref]=i;var l=Hr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Jt(l);c!==t["!ref"]&&(t["!ref"]=c)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(u.a==n[d].id){u.a=n[d].name||u.a;break}}i.c.push(u)})}function kee(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Tt(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=ss(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var d=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!d&&!!d[1]&&Uy(d[1])||{r:"",t:"",h:""};c.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),c.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=f.h),n.push(c)}}}}),n}function Dee(t,e){var r=[],n=!1,s={},i=0;return t.replace(Wn,function(o,l){var c=Tt(o);switch(Va(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=l+o.length;break;case"</text>":s.t=t.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function Pee(t,e){var r=[],n=!1;return t.replace(Wn,function(i){var a=Tt(i);switch(Va(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function Ree(t){var e={};e.iauthor=t.read_shift(4);var r=kl(t);return e.rfx=r.s,e.ref=Rt(r.s),t.l+=16,e}var Fee=Gn;function Oee(t,e){var r=[],n=[],s={},i=!1;return _i(t,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var Nee="application/vnd.ms-office.vbaProject";function Mee(t){var e=Yt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Yt.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Yt.write(e)}function Bee(){return{"!type":"dialog"}}function Lee(){return{"!type":"dialog"}}function Uee(){return{"!type":"macro"}}function Vee(){return{"!type":"macro"}}var kc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=e.c:--u,l?c+=e.r:--c,s+(o?"":"$")+ln(u)+(l?"":"$")+In(c)}return function(s,i){return e=i,s.replace(t,r)}}(),ND=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,$ee=function(){return function(e,r){return e.replace(ND,function(n,s,i,a,o,l){var c=Fy(a)-(i?0:r.c),u=Ry(l)-(o?0:r.r),d=u==0?"":o?u+1:"["+u+"]",f=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+f})}}();function MD(t,e){return t.replace(ND,function(r,n,s,i,a,o){return n+(s=="$"?s+i:ln(Fy(i)+e.c))+(a=="$"?a+o:In(Ry(o)+e.r))})}function jee(t,e,r){var n=iu(e),s=n.s,i=ss(r),a={r:i.r-s.r,c:i.c-s.c};return MD(t,a)}function Hee(t){return t.length!=1}function CS(t){return t.replace(/_xlfn\./g,"")}function Kr(t){t.l+=1}function xo(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function BD(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return LD(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=xo(t),o=xo(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function LD(t){var e=xo(t),r=xo(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Gee(t,e,r){if(r.biff<8)return LD(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=xo(t),a=xo(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function UD(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return zee(t);var n=t.read_shift(r&&r.biff==12?4:2),s=xo(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function zee(t){var e=xo(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Wee(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Kee(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return qee(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function qee(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function Xee(t,e,r){var n=(t[t.l++]&96)>>5,s=BD(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Yee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=BD(t,i,r);return[n,s,a]}function Qee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Jee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function Zee(t,e,r){var n=(t[t.l++]&96)>>5,s=Gee(t,e-1,r);return[n,s]}function ete(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function kS(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function tte(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function rte(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function nte(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ste(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function ate(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function VD(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function ite(t){return t.read_shift(2),VD(t)}function ote(t){return t.read_shift(2),VD(t)}function lte(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=UD(t,0,r);return[n,s]}function cte(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=Kee(t,0,r);return[n,s]}function ute(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=UD(t,0,r);return[n,s,i]}function dte(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[fre[s],HD[s],n]}function fte(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:hte(t);return[s,(i[0]===0?HD:dre)[i[1]]]}function hte(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function pte(t,e,r){t.l+=r&&r.biff==2?3:4}function mte(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function gte(t){return t.l++,Dl[t.read_shift(1)]}function vte(t){return t.l++,t.read_shift(2)}function xte(t){return t.l++,t.read_shift(1)!==0}function yte(t){return t.l++,Ln(t)}function Ete(t,e,r){return t.l++,Ff(t,e-1,r)}function _te(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zr(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Dl[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Ln(t);break;case 2:r[1]=Pl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function bte(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?kl:om)(t));return s}function Ste(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=_te(t,r.biff);return a}function Tte(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Ate(t,e,r){if(r.biff==5)return wte(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function wte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Ite(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Cte(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function kte(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Dte(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var Pte=zn,Rte=zn,Fte=zn;function Nf(t,e,r){return t.l+=2,[Wee(t)]}function $y(t){return t.l+=6,[]}var Ote=Nf,Nte=$y,Mte=$y,Bte=Nf;function $D(t){return t.l+=2,[Qr(t),t.read_shift(2)&1]}var Lte=Nf,Ute=$D,Vte=$y,$te=Nf,jte=Nf,Hte=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Gte(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=Hte[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function zte(t){return t.l+=2,[t.read_shift(4)]}function Wte(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Kte(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function qte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Xte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Yte(t){return t.l+=4,[0,0]}var DS={1:{n:"PtgExp",f:mte},2:{n:"PtgTbl",f:Fte},3:{n:"PtgAdd",f:Kr},4:{n:"PtgSub",f:Kr},5:{n:"PtgMul",f:Kr},6:{n:"PtgDiv",f:Kr},7:{n:"PtgPower",f:Kr},8:{n:"PtgConcat",f:Kr},9:{n:"PtgLt",f:Kr},10:{n:"PtgLe",f:Kr},11:{n:"PtgEq",f:Kr},12:{n:"PtgGe",f:Kr},13:{n:"PtgGt",f:Kr},14:{n:"PtgNe",f:Kr},15:{n:"PtgIsect",f:Kr},16:{n:"PtgUnion",f:Kr},17:{n:"PtgRange",f:Kr},18:{n:"PtgUplus",f:Kr},19:{n:"PtgUminus",f:Kr},20:{n:"PtgPercent",f:Kr},21:{n:"PtgParen",f:Kr},22:{n:"PtgMissArg",f:Kr},23:{n:"PtgStr",f:Ete},26:{n:"PtgSheet",f:Wte},27:{n:"PtgEndSheet",f:Kte},28:{n:"PtgErr",f:gte},29:{n:"PtgBool",f:xte},30:{n:"PtgInt",f:vte},31:{n:"PtgNum",f:yte},32:{n:"PtgArray",f:ete},33:{n:"PtgFunc",f:dte},34:{n:"PtgFuncVar",f:fte},35:{n:"PtgName",f:Tte},36:{n:"PtgRef",f:lte},37:{n:"PtgArea",f:Xee},38:{n:"PtgMemArea",f:Ite},39:{n:"PtgMemErr",f:Pte},40:{n:"PtgMemNoMem",f:Rte},41:{n:"PtgMemFunc",f:Cte},42:{n:"PtgRefErr",f:kte},43:{n:"PtgAreaErr",f:Qee},44:{n:"PtgRefN",f:cte},45:{n:"PtgAreaN",f:Zee},46:{n:"PtgMemAreaN",f:qte},47:{n:"PtgMemNoMemN",f:Xte},57:{n:"PtgNameX",f:Ate},58:{n:"PtgRef3d",f:ute},59:{n:"PtgArea3d",f:Yee},60:{n:"PtgRefErr3d",f:Dte},61:{n:"PtgAreaErr3d",f:Jee},255:{}},Qte={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Jte={1:{n:"PtgElfLel",f:$D},2:{n:"PtgElfRw",f:$te},3:{n:"PtgElfCol",f:Ote},6:{n:"PtgElfRwV",f:jte},7:{n:"PtgElfColV",f:Bte},10:{n:"PtgElfRadical",f:Lte},11:{n:"PtgElfRadicalS",f:Vte},13:{n:"PtgElfColS",f:Nte},15:{n:"PtgElfColSV",f:Mte},16:{n:"PtgElfRadicalLel",f:Ute},25:{n:"PtgList",f:Gte},29:{n:"PtgSxName",f:zte},255:{}},Zte={0:{n:"PtgAttrNoop",f:Yte},1:{n:"PtgAttrSemi",f:ate},2:{n:"PtgAttrIf",f:nte},4:{n:"PtgAttrChoose",f:tte},8:{n:"PtgAttrGoto",f:rte},16:{n:"PtgAttrSum",f:pte},32:{n:"PtgAttrBaxcel",f:kS},33:{n:"PtgAttrBaxcel",f:kS},64:{n:"PtgAttrSpace",f:ite},65:{n:"PtgAttrSpaceSemi",f:ote},128:{n:"PtgAttrIfError",f:ste},255:{}};function Mf(t,e,r,n){if(n.biff<8)return zn(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Ste(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=bte(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(zn(t,e)),i}function Bf(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=DS[i]||DS[Qte[i]],(i===24||i===25)&&(s=(i===24?Jte:Zte)[t[t.l+1]]),!s||!s.f?zn(t,e):a.push([s.n,s.f(t,e,r)]);return a}function ere(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var tre={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function rre(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function jD(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function PS(t,e,r){var n=jD(t,e,r);return n=="#REF"?n:rre(n,r)}function Nn(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,d=0,f=0,h,p="";if(!t[0]||!t[0][0])return"";for(var v=-1,g="",x=0,y=t[0].length;x<y;++x){var E=t[0][x];switch(E[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),v>=0){switch(t[0][v][1][0]){case 0:g=Ur(" ",t[0][v][1][1]);break;case 1:g=Ur("\r",t[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][v][1][0])}c=c+g,v=-1}o.push(c+tre[E[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=pd(E[1][1],a,s),o.push(md(u,i));break;case"PtgRefN":u=r?pd(E[1][1],r,s):E[1][1],o.push(md(u,i));break;case"PtgRef3d":d=E[1][1],u=pd(E[1][2],a,s),p=PS(n,d,s),o.push(p+"!"+md(u,i));break;case"PtgFunc":case"PtgFuncVar":var I=E[1][0],P=E[1][1];I||(I=0),I&=127;var D=I==0?[]:o.slice(-I);o.length-=I,P==="User"&&(P=D.shift()),o.push(P+"("+D.join(",")+")");break;case"PtgBool":o.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(E[1]);break;case"PtgNum":o.push(String(E[1]));break;case"PtgStr":o.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(E[1]);break;case"PtgAreaN":h=dS(E[1][1],r?{s:r}:a,s),o.push(ng(h,s));break;case"PtgArea":h=dS(E[1][1],a,s),o.push(ng(h,s));break;case"PtgArea3d":d=E[1][1],h=E[1][2],p=PS(n,d,s),o.push(p+"!"+ng(h,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=E[1][2];var A=(n.names||[])[f-1]||(n[0]||[])[f],_=A?A.Name:"SH33TJSNAME"+String(f);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var b=E[1][1];f=E[1][2];var w;if(s.biff<=5)b<0&&(b=-b),n[b]&&(w=n[b][f]);else{var C="";if(((n[b]||[])[0]||[])[0]==14849||(((n[b]||[])[0]||[])[0]==1025?n[b][f]&&n[b][f].itab>0&&(C=n.SheetNames[n[b][f].itab-1]+"!"):C=n.SheetNames[f-1]+"!"),n[b]&&n[b][f])C+=n[b][f].Name;else if(n[0]&&n[0][f])C+=n[0][f].Name;else{var T=(jD(n,b,s)||"").split(";;");T[f-1]?C=T[f-1]:C+="SH33TJSERRX"}o.push(C);break}w||(w={Name:"SH33TJSERRY"}),o.push(w.Name);break;case"PtgParen":var k="(",N=")";if(v>=0){switch(g="",t[0][v][1][0]){case 2:k=Ur(" ",t[0][v][1][1])+k;break;case 3:k=Ur("\r",t[0][v][1][1])+k;break;case 4:N=Ur(" ",t[0][v][1][1])+N;break;case 5:N=Ur("\r",t[0][v][1][1])+N;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][v][1][0])}v=-1}o.push(k+o.pop()+N);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:E[1][1],r:E[1][0]};var B={c:r.c,r:r.r};if(n.sharedf[Rt(u)]){var R=n.sharedf[Rt(u)];o.push(Nn(R,a,B,n,s))}else{var O=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Nn(c[1],a,B,n,s)),O=!0;break}O||o.push(E[1])}break;case"PtgArray":o.push("{"+ere(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var U=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&U.indexOf(t[0][x][0])==-1){E=t[0][v];var M=!0;switch(E[1][0]){case 4:M=!1;case 0:g=Ur(" ",E[1][1]);break;case 5:M=!1;case 1:g=Ur("\r",E[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}o.push((M?g:"")+o.pop()+(M?"":g)),v=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function nre(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],zn(t,e-2)];var o=Bf(t,a,r);return e!==a+s&&(i=Mf(t,e-a-s,o,r)),t.l=n,[o,i]}function sre(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,a=t.read_shift(s);if(a==65535)return[[],zn(t,e-2)];var o=Bf(t,a,r);return e!==a+s&&(i=Mf(t,e-a-s,o,r)),t.l=n,[o,i]}function are(t,e,r,n){var s=t.l+e,i=Bf(t,n,r),a;return s!==t.l&&(a=Mf(t,s-t.l,i,r)),[i,a]}function ire(t,e,r){var n=t.l+e,s,i=t.read_shift(2),a=Bf(t,i,r);return i==65535?[[],zn(t,e-2)]:(e!==i+2&&(s=Mf(t,n-i-2,a,r)),[a,s])}function ore(t){var e;if(ni(t,t.l+6)!==65535)return[Ln(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function ig(t,e,r){var n=t.l+e,s=$a(t);r.biff==2&&++t.l;var i=ore(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=sre(t,n-t.l,r);return{cell:s,val:i[0],formula:o,shared:a>>3&1,tt:i[1]}}function lm(t,e,r){var n=t.read_shift(4),s=Bf(t,n,r),i=t.read_shift(4),a=i>0?Mf(t,i,s,r):null;return[s,a]}var lre=lm,cm=lm,cre=lm,ure=lm,dre={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},HD={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},fre={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function RS(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function og(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var yd={},Dc={};function Ed(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function GD(t,e,r,n,s,i){try{n.cellNF&&(t.z=Mt[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=mn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Mt[e]==null&&Qo(hY[e]||"General",e),t.t==="e")t.w=t.w||Dl[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Yd(t.v);else if(t.t==="d"){var a=ls(t.v);(a|0)===a?t.w=a.toString(10):t.w=Yd(a)}else{if(t.v===void 0)return"";t.w=pl(t.v,Dc)}else t.t==="d"?t.w=Gs(e,ls(t.v),Dc):t.w=Gs(e,t.v,Dc)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Jh(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Jh(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function hre(t,e){var r=Hr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Jt(r))}var pre=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,mre=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,gre=/<(?:\w:)?hyperlink [^>]*>/mg,vre=/"(\w*:\w*)"/,xre=/<(?:\w:)?col\b[^>]*[\/]?>/g,yre=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ere=/<(?:\w:)?pageMargins[^>]*\/>/g,zD=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,_re=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,bre=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Sre(t,e,r,n,s,i,a){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",d=t.match(mre);d?(c=t.slice(0,d.index),u=t.slice(d.index+d[0].length)):c=u=t;var f=c.match(zD);f?jy(f[0],o,s,r):(f=c.match(_re))&&Tre(f[0],f[1]||"",o,s,r);var h=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var p=c.slice(h,h+50).match(vre);p&&hre(o,p[1])}var v=c.match(bre);v&&v[1]&&Dre(v[1],s);var g=[];if(e.cellStyles){var x=c.match(xre);x&&Ire(g,x)}d&&Pre(d[1],o,e,l,i,a);var y=u.match(yre);y&&(o["!autofilter"]=Cre(y[0]));var E=[],I=u.match(pre);if(I)for(h=0;h!=I.length;++h)E[h]=Hr(I[h].slice(I[h].indexOf('"')+1));var P=u.match(gre);P&&Are(o,P,n);var D=u.match(Ere);if(D&&(o["!margins"]=wre(Tt(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Jt(l)),e.sheetRows>0&&o["!ref"]){var A=Hr(o["!ref"]);e.sheetRows<=+A.e.r&&(A.e.r=e.sheetRows-1,A.e.r>l.e.r&&(A.e.r=l.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>l.e.c&&(A.e.c=l.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Jt(A))}return g.length>0&&(o["!cols"]=g),E.length>0&&(o["!merges"]=E),o}function jy(t,e,r,n){var s=Tt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Zt(xr(s.codeName)))}function Tre(t,e,r,n,s){jy(t.slice(0,t.indexOf(">")),r,n,s)}function Are(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=Tt(xr(e[s]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+Zt(i.location))):(i.Target="#"+Zt(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Hr(i.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Rt({c,r:l});n?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function wre(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Ire(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Tt(e[n],!0);s.hidden&&(s.hidden=wr(s.hidden));var i=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Vy(s.width)),qc(s);i<=a;)t[i++]=wn(s)}}function Cre(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var kre=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Dre(t,e){e.Views||(e.Views=[{}]),(t.match(kre)||[]).forEach(function(r,n){var s=Tt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),wr(s.rightToLeft)&&(e.Views[n].RTL=!0)})}var Pre=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Qd("v"),a=Qd("f");return function(l,c,u,d,f,h){for(var p=0,v="",g=[],x=[],y=0,E=0,I=0,P="",D,A,_=0,b=0,w,C,T=0,k=0,N=Array.isArray(h.CellXf),B,R=[],O=[],U=Array.isArray(c),M=[],q={},H=!1,L=!!u.sheetStubs,z=l.split(e),K=0,te=z.length;K!=te;++K){v=z[K].trim();var ge=v.length;if(ge!==0){var ie=0;e:for(p=0;p<ge;++p)switch(v[p]){case">":if(v[p-1]!="/"){++p;break e}if(u&&u.cellStyles){if(A=Tt(v.slice(ie,p),!0),_=A.r!=null?parseInt(A.r,10):_+1,b=-1,u.sheetRows&&u.sheetRows<_)continue;q={},H=!1,A.ht&&(H=!0,q.hpt=parseFloat(A.ht),q.hpx=tf(q.hpt)),A.hidden=="1"&&(H=!0,q.hidden=!0),A.outlineLevel!=null&&(H=!0,q.level=+A.outlineLevel),H&&(M[_-1]=q)}break;case"<":ie=p;break}if(ie>=p)break;if(A=Tt(v.slice(ie,p),!0),_=A.r!=null?parseInt(A.r,10):_+1,b=-1,!(u.sheetRows&&u.sheetRows<_)){d.s.r>_-1&&(d.s.r=_-1),d.e.r<_-1&&(d.e.r=_-1),u&&u.cellStyles&&(q={},H=!1,A.ht&&(H=!0,q.hpt=parseFloat(A.ht),q.hpx=tf(q.hpt)),A.hidden=="1"&&(H=!0,q.hidden=!0),A.outlineLevel!=null&&(H=!0,q.level=+A.outlineLevel),H&&(M[_-1]=q)),g=v.slice(p).split(t);for(var he=0;he!=g.length&&g[he].trim().charAt(0)=="<";++he);for(g=g.slice(he),p=0;p!=g.length;++p)if(v=g[p].trim(),v.length!==0){if(x=v.match(r),y=p,E=0,I=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,x!=null&&x.length===2){for(y=0,P=x[1],E=0;E!=P.length&&!((I=P.charCodeAt(E)-64)<1||I>26);++E)y=26*y+I;--y,b=y}else++b;for(E=0;E!=v.length&&v.charCodeAt(E)!==62;++E);if(++E,A=Tt(v.slice(0,E),!0),A.r||(A.r=Rt({r:_-1,c:b})),P=v.slice(E),D={t:""},(x=P.match(i))!=null&&x[1]!==""&&(D.v=Zt(x[1])),u.cellFormula){if((x=P.match(a))!=null&&x[1]!==""){if(D.f=Zt(xr(x[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=CS(D.f)),x[0].indexOf('t="array"')>-1)D.F=(P.match(s)||[])[1],D.F.indexOf(":")>-1&&R.push([Hr(D.F),D.F]);else if(x[0].indexOf('t="shared"')>-1){C=Tt(x[0]);var Z=Zt(xr(x[1]));u.xlfn||(Z=CS(Z)),O[parseInt(C.si,10)]=[C,Z,A.r]}}else(x=P.match(/<f[^>]*\/>/))&&(C=Tt(x[0]),O[C.si]&&(D.f=jee(O[C.si][1],O[C.si][2],A.r)));var Q=ss(A.r);for(E=0;E<R.length;++E)Q.r>=R[E][0].s.r&&Q.r<=R[E][0].e.r&&Q.c>=R[E][0].s.c&&Q.c<=R[E][0].e.c&&(D.F=R[E][1])}if(A.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(L)D.t="z";else continue;else D.t=A.t||"n";switch(d.s.c>b&&(d.s.c=b),d.e.c<b&&(d.e.c=b),D.t){case"n":if(D.v==""||D.v==null){if(!L)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!L)continue;D.t="z"}else w=yd[parseInt(D.v,10)],D.v=w.t,D.r=w.r,u.cellHTML&&(D.h=w.h);break;case"str":D.t="s",D.v=D.v!=null?xr(D.v):"",u.cellHTML&&(D.h=ky(D.v));break;case"inlineStr":x=P.match(n),D.t="s",x!=null&&(w=Uy(x[1]))?(D.v=w.t,u.cellHTML&&(D.h=w.h)):D.v="";break;case"b":D.v=wr(D.v);break;case"d":u.cellDates?D.v=mn(D.v,1):(D.v=ls(mn(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=fD[D.v];break}if(T=k=0,B=null,N&&A.s!==void 0&&(B=h.CellXf[A.s],B!=null&&(B.numFmtId!=null&&(T=B.numFmtId),u.cellStyles&&B.fillId!=null&&(k=B.fillId))),GD(D,T,k,u,f,h),u.cellDates&&N&&D.t=="n"&&au(Mt[T])&&(D.t="d",D.v=im(D.v)),A.cm&&u.xlmeta){var xe=(u.xlmeta.Cell||[])[+A.cm-1];xe&&xe.type=="XLDAPR"&&(D.D=!0)}if(U){var X=ss(A.r);c[X.r]||(c[X.r]=[]),c[X.r][X.c]=D}else c[A.r]=D}}}}M.length>0&&(c["!rows"]=M)}}();function Rre(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var Fre=kl;function Ore(){}function Nre(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=nQ(t),r}function Mre(t){var e=qs(t);return[e]}function Bre(t){var e=Cl(t);return[e]}function Lre(t){var e=qs(t),r=t.read_shift(1);return[e,r,"b"]}function Ure(t){var e=Cl(t),r=t.read_shift(1);return[e,r,"b"]}function Vre(t){var e=qs(t),r=t.read_shift(1);return[e,r,"e"]}function $re(t){var e=Cl(t),r=t.read_shift(1);return[e,r,"e"]}function jre(t){var e=qs(t),r=t.read_shift(4);return[e,r,"s"]}function Hre(t){var e=Cl(t),r=t.read_shift(4);return[e,r,"s"]}function Gre(t){var e=qs(t),r=Ln(t);return[e,r,"n"]}function WD(t){var e=Cl(t),r=Ln(t);return[e,r,"n"]}function zre(t){var e=qs(t),r=My(t);return[e,r,"n"]}function Wre(t){var e=Cl(t),r=My(t);return[e,r,"n"]}function Kre(t){var e=qs(t),r=Oy(t);return[e,r,"is"]}function qre(t){var e=qs(t),r=Gn(t);return[e,r,"str"]}function Xre(t){var e=Cl(t),r=Gn(t);return[e,r,"str"]}function Yre(t,e,r){var n=t.l+e,s=qs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=cm(t,n-t.l,r);a[3]=Nn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Qre(t,e,r){var n=t.l+e,s=qs(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=cm(t,n-t.l,r);a[3]=Nn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Jre(t,e,r){var n=t.l+e,s=qs(t);s.r=r["!row"];var i=Ln(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=cm(t,n-t.l,r);a[3]=Nn(o,null,s,r.supbooks,r)}else t.l=n;return a}function Zre(t,e,r){var n=t.l+e,s=qs(t);s.r=r["!row"];var i=Gn(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=cm(t,n-t.l,r);a[3]=Nn(o,null,s,r.supbooks,r)}else t.l=n;return a}var ene=kl;function tne(t,e){var r=t.l+e,n=kl(t),s=Ny(t),i=Gn(t),a=Gn(t),o=Gn(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function rne(){}function nne(t,e,r){var n=t.l+e,s=cD(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=lre(t,n-t.l,r);a[1]=o}else t.l=n;return a}function sne(t,e,r){var n=t.l+e,s=kl(t),i=[s];if(r.cellFormula){var a=ure(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}var ane=["left","right","top","bottom","header","footer"];function ine(t){var e={};return ane.forEach(function(r){e[r]=Ln(t)}),e}function one(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function lne(){}function cne(){}function une(t,e,r,n,s,i,a){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,f=!1,h,p,v,g,x,y,E,I,P,D=[];o.biff=12,o["!row"]=0;var A=0,_=!1,b=[],w={},C=o.supbooks||s.supbooks||[[]];if(C.sharedf=w,C.arrayf=b,C.SheetNames=s.SheetNames||s.Sheets.map(function(U){return U.name}),!o.supbooks&&(o.supbooks=C,s.Names))for(var T=0;T<s.Names.length;++T)C[0][T+1]=s.Names[T];var k=[],N=[],B=!1;tp[16]={n:"BrtShortReal",f:WD};var R;if(_i(t,function(M,q,H){if(!f)switch(H){case 148:c=M;break;case 0:h=M,o.sheetRows&&o.sheetRows<=h.r&&(f=!0),I=In(g=h.r),o["!row"]=h.r,(M.hidden||M.hpt||M.level!=null)&&(M.hpt&&(M.hpx=tf(M.hpt)),N[M.r]=M);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:M[2]},M[2]){case"n":p.v=M[1];break;case"s":E=yd[M[1]],p.v=E.t,p.r=E.r;break;case"b":p.v=!!M[1];break;case"e":p.v=M[1],o.cellText!==!1&&(p.w=Dl[p.v]);break;case"str":p.t="s",p.v=M[1];break;case"is":p.t="s",p.v=M[1].t;break}if((v=a.CellXf[M[0].iStyleRef])&&GD(p,v.numFmtId,null,o,i,a),x=M[0].c==-1?x+1:M[0].c,o.dense?(l[g]||(l[g]=[]),l[g][x]=p):l[ln(x)+I]=p,o.cellFormula){for(_=!1,A=0;A<b.length;++A){var L=b[A];h.r>=L[0].s.r&&h.r<=L[0].e.r&&x>=L[0].s.c&&x<=L[0].e.c&&(p.F=Jt(L[0]),_=!0)}!_&&M.length>3&&(p.f=M[3])}if(u.s.r>h.r&&(u.s.r=h.r),u.s.c>x&&(u.s.c=x),u.e.r<h.r&&(u.e.r=h.r),u.e.c<x&&(u.e.c=x),o.cellDates&&v&&p.t=="n"&&au(Mt[v.numFmtId])){var z=Go(p.v);z&&(p.t="d",p.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}R&&(R.type=="XLDAPR"&&(p.D=!0),R=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;p={t:"z",v:void 0},x=M[0].c==-1?x+1:M[0].c,o.dense?(l[g]||(l[g]=[]),l[g][x]=p):l[ln(x)+I]=p,u.s.r>h.r&&(u.s.r=h.r),u.s.c>x&&(u.s.c=x),u.e.r<h.r&&(u.e.r=h.r),u.e.c<x&&(u.e.c=x),R&&(R.type=="XLDAPR"&&(p.D=!0),R=void 0);break;case 176:D.push(M);break;case 49:R=((o.xlmeta||{}).Cell||[])[M-1];break;case 494:var K=n["!id"][M.relId];for(K?(M.Target=K.Target,M.loc&&(M.Target+="#"+M.loc),M.Rel=K):M.relId==""&&(M.Target="#"+M.loc),g=M.rfx.s.r;g<=M.rfx.e.r;++g)for(x=M.rfx.s.c;x<=M.rfx.e.c;++x)o.dense?(l[g]||(l[g]=[]),l[g][x]||(l[g][x]={t:"z",v:void 0}),l[g][x].l=M):(y=Rt({c:x,r:g}),l[y]||(l[y]={t:"z",v:void 0}),l[y].l=M);break;case 426:if(!o.cellFormula)break;b.push(M),P=o.dense?l[g][x]:l[ln(x)+I],P.f=Nn(M[1],u,{r:h.r,c:x},C,o),P.F=Jt(M[0]);break;case 427:if(!o.cellFormula)break;w[Rt(M[0].s)]=M[1],P=o.dense?l[g][x]:l[ln(x)+I],P.f=Nn(M[1],u,{r:h.r,c:x},C,o);break;case 60:if(!o.cellStyles)break;for(;M.e>=M.s;)k[M.e--]={width:M.w/256,hidden:!!(M.flags&1),level:M.level},B||(B=!0,Vy(M.w/256)),qc(k[M.e+1]);break;case 161:l["!autofilter"]={ref:Jt(M)};break;case 476:l["!margins"]=M;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),M.name&&(s.Sheets[r].CodeName=M.name),(M.above||M.left)&&(l["!outline"]={above:M.above,left:M.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),M.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!q.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Jt(c||u)),o.sheetRows&&l["!ref"]){var O=Hr(l["!ref"]);o.sheetRows<=+O.e.r&&(O.e.r=o.sheetRows-1,O.e.r>u.e.r&&(O.e.r=u.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>u.e.c&&(O.e.c=u.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Jt(O))}return D.length>0&&(l["!merges"]=D),k.length>0&&(l["!cols"]=k),N.length>0&&(l["!rows"]=N),l}function dne(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var s=Zt((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function fne(t,e,r,n,s,i){var a=i||{"!type":"chart"};if(!t)return i;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var f=dne(d);u.s.r=u.s.c=0,u.e.c=o,c=ln(o),f[0].forEach(function(h,p){a[c+In(p)]={t:"n",v:h,z:f[1]},l=p}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=Jt(u)),a}function hne(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,o=t.match(zD);return o&&jy(o[0],i,s,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function pne(t,e){t.l+=10;var r=Gn(t);return{name:r}}function mne(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return _i(t,function(l,c,u){switch(u){case 550:i["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var KD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],gne=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],vne=[],xne=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function FS(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=wr(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function OS(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=wr(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function qD(t){OS(t.WBProps,KD),OS(t.CalcPr,xne),FS(t.WBView,gne),FS(t.Sheets,vne),Dc.date1904=wr(t.WBProps.date1904)}var yne="][*?/\\".split("");function Ene(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return yne.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var _ne=/<\w+:workbook/;function bne(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},a=0;if(t.replace(Wn,function(l,c){var u=Tt(l);switch(Va(u[0])){case"<?xml":break;case"<workbook":l.match(_ne)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":KD.forEach(function(d){if(u[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=wr(u[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(u[d[0]],10);break;default:r.WBProps[d[0]]=u[d[0]]}}),u.codeName&&(r.WBProps.CodeName=xr(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Zt(xr(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=xr(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),wr(u.hidden||"0")&&(i.Hidden=!0),a=c+l.length;break;case"</definedName>":i.Ref=Zt(xr(t.slice(a,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),VY.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return qD(r),r}function Sne(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=p1(t),r.name=Gn(t),r}function Tne(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Gn(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Ane(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function wne(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=sQ(t),a=cre(t,0,r),o=Ny(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Ine(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],tp[16]={n:"BrtFRTArchID$",f:Ane},_i(t,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Nn(l.Ptg,null,null,a,e),delete e.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),qD(r),r.Names=i,r.supbooks=a,r}function Cne(t,e,r){return e.slice(-4)===".bin"?Ine(t,r):bne(t,r)}function kne(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?une(t,n,r,s,i,a,o):Sre(t,n,r,s,i,a,o)}function Dne(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?mne(t,n,r,s,i):hne(t,n,r,s,i)}function Pne(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Uee():Vee()}function Rne(t,e,r,n,s,i,a,o){return e.slice(-4)===".bin"?Bee():Lee()}function Fne(t,e,r,n){return e.slice(-4)===".bin"?eee(t,r,n):qZ(t,r,n)}function One(t,e,r){return OD(t,r)}function Nne(t,e,r){return e.slice(-4)===".bin"?gZ(t,r):pZ(t,r)}function Mne(t,e,r){return e.slice(-4)===".bin"?Oee(t,r):kee(t,r)}function Bne(t,e,r){return e.slice(-4)===".bin"?wee(t):Tee(t)}function Lne(t,e,r,n){return r.slice(-4)===".bin"?Iee(t,e,r,n):void 0}function Une(t,e,r){return e.slice(-4)===".bin"?bee(t,e,r):See(t,e,r)}var XD=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,YD=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Qs(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(XD),i,a,o,l;if(s)for(l=0;l!=s.length;++l)i=s[l].match(YD),(a=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(a+1),n[o]=i[2].slice(1,i[2].length-1));return n}function Vne(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(XD),s,i,a,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(YD),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?a="xmlns"+s[1].slice(6):a=s[1].slice(i+1),r[a]=s[2].slice(1,s[2].length-1));return r}var _d;function $ne(t,e){var r=_d[t]||Zt(t);return r==="General"?pl(e):Gs(r,e)}function jne(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=wr(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=mn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Zt(e)]=s}function Hne(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Dl[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Yd(t.v):t.w=pl(t.v):t.w=$ne(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=_d[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&au(n)){var s=Go(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Gne(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=jZ[n.Pattern]||n.Pattern)}t[e.ID]=e}function zne(t,e,r,n,s,i,a,o,l,c){var u="General",d=n.StyleID,f={};c=c||{};var h=[],p=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&a&&(d=a.StyleID);i[d]!==void 0&&(i[d].nf&&(u=i[d].nf),i[d].Interior&&h.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=wr(t);break;case"String":n.t="s",n.r=rS(Zt(t)),n.v=t.indexOf("<")>-1?Zt(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(mn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Zt(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=fD[t],c.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=rS(e||t));break}if(Hne(n,u,c),c.cellFormula!==!1)if(n.Formula){var v=Zt(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=kc(v,s),delete n.Formula,n.ArrayRange=="RC"?n.F=kc("RC:RC",s):n.ArrayRange&&(n.F=kc(n.ArrayRange,s),l.push([Hr(n.F),n.F]))}else for(p=0;p<l.length;++p)s.r>=l[p][0].s.r&&s.r<=l[p][0].e.r&&s.c>=l[p][0].s.c&&s.c<=l[p][0].e.c&&(n.F=l[p][1]);c.cellStyles&&(h.forEach(function(g){!f.patternType&&g.patternType&&(f.patternType=g.patternType)}),n.s=f),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Wne(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function lg(t,e){var r=e||{};Lk();var n=ju(Dy(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=xr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var a=wn(r);return a.type="string",Zd.to_workbook(n,a)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(se){s.indexOf("<"+se)>=0&&(i=!0)}),i)return tse(n,r);_d={"General Number":"General","General Date":Mt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mt[15],"Short Date":Mt[14],"Long Time":Mt[19],"Medium Time":Mt[18],"Short Time":Mt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mt[2],Standard:Mt[4],Percent:Mt[10],Scientific:Mt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},d=[],f=r.dense?[]:{},h="",p={},v={},g=Qs('<Data ss:Type="String">'),x=0,y=0,E=0,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},D={},A="",_=0,b=[],w={},C={},T=0,k=[],N=[],B={},R=[],O,U=!1,M=[],q=[],H={},L=0,z=0,K={Sheets:[],WBProps:{date1904:!1}},te={};Jd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ge="";o=Jd.exec(n);)switch(o[3]=(ge=o[3]).toLowerCase()){case"data":if(ge=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?zne(n.slice(x,o.index),A,g,l[l.length-1][0]=="comment"?B:p,{c:y,r:E},P,R[y],v,M,r):(A="",g=Qs(o[0]),x=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(N.length>0&&(p.c=N),(!r.sheetRows||r.sheetRows>E)&&p.v!==void 0&&(r.dense?(f[E]||(f[E]=[]),f[E][y]=p):f[ln(y)+In(E)]=p),p.HRef&&(p.l={Target:Zt(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(L=y+(parseInt(p.MergeAcross,10)|0),z=E+(parseInt(p.MergeDown,10)|0),b.push({s:{c:y,r:E},e:{c:L,r:z}})),!r.sheetStubs)p.MergeAcross?y=L+1:++y;else if(p.MergeAcross||p.MergeDown){for(var ie=y;ie<=L;++ie)for(var he=E;he<=z;++he)(ie>y||he>E)&&(r.dense?(f[he]||(f[he]=[]),f[he][ie]={t:"z"}):f[ln(ie)+In(he)]={t:"z"});y=L+1}else++y;else p=Vne(o[0]),p.Index&&(y=+p.Index-1),y<I.s.c&&(I.s.c=y),y>I.e.c&&(I.e.c=y),o[0].slice(-2)==="/>"&&++y,N=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(E<I.s.r&&(I.s.r=E),E>I.e.r&&(I.e.r=E),o[0].slice(-2)==="/>"&&(v=Qs(o[0]),v.Index&&(E=+v.Index-1)),y=0,++E):(v=Qs(o[0]),v.Index&&(E=+v.Index-1),H={},(v.AutoFitHeight=="0"||v.Height)&&(H.hpx=parseInt(v.Height,10),H.hpt=FD(H.hpx),q[E]=H),v.Hidden=="1"&&(H.hidden=!0,q[E]=H));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));d.push(h),I.s.r<=I.e.r&&I.s.c<=I.e.c&&(f["!ref"]=Jt(I),r.sheetRows&&r.sheetRows<=I.e.r&&(f["!fullref"]=f["!ref"],I.e.r=r.sheetRows-1,f["!ref"]=Jt(I))),b.length&&(f["!merges"]=b),R.length>0&&(f["!cols"]=R),q.length>0&&(f["!rows"]=q),u[h]=f}else I={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=y=0,l.push([o[3],!1]),c=Qs(o[0]),h=Zt(c.Name),f=r.dense?[]:{},b=[],M=[],q=[],te={name:h,Hidden:0},K.Sheets.push(te);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),R=[],U=!1}break;case"style":o[1]==="/"?Gne(P,D,r):D=Qs(o[0]);break;case"numberformat":D.nf=Zt(Qs(o[0]).Format||"General"),_d[D.nf]&&(D.nf=_d[D.nf]);for(var Z=0;Z!=392&&Mt[Z]!=D.nf;++Z);if(Z==392){for(Z=57;Z!=392;++Z)if(Mt[Z]==null){Qo(D.nf,Z);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(O=Qs(o[0]),O.Hidden&&(O.hidden=!0,delete O.Hidden),O.Width&&(O.wpx=parseInt(O.Width,10)),!U&&O.wpx>10){U=!0,ts=PD;for(var Q=0;Q<R.length;++Q)R[Q]&&qc(R[Q])}U&&qc(O),R[O.Index-1||R.length]=O;for(var xe=0;xe<+O.Span;++xe)R[R.length]=wn(O);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var X=Tt(o[0]),W={Name:X.Name,Ref:kc(X.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(W.Sheet=K.Sheets.length-1),K.Names.push(W);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?A+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=Qs(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?kQ(w,ge,n.slice(T,o.index)):T=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));Wne(B),N.push(B)}else l.push([o[3],!1]),c=Qs(o[0]),B={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Y=Qs(o[0]);f["!autofilter"]={ref:kc(Y.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return VS(n,r);var ee=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ee=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ee=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ee=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ee=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(T,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else T=o.index+o[0].length;break;case"header":f["!margins"]||Ed(f["!margins"]={},"xlml"),isNaN(+Tt(o[0]).Margin)||(f["!margins"].header=+Tt(o[0]).Margin);break;case"footer":f["!margins"]||Ed(f["!margins"]={},"xlml"),isNaN(+Tt(o[0]).Margin)||(f["!margins"].footer=+Tt(o[0]).Margin);break;case"pagemargins":var ve=Tt(o[0]);f["!margins"]||Ed(f["!margins"]={},"xlml"),isNaN(+ve.Top)||(f["!margins"].top=+ve.Top),isNaN(+ve.Left)||(f["!margins"].left=+ve.Left),isNaN(+ve.Right)||(f["!margins"].right=+ve.Right),isNaN(+ve.Bottom)||(f["!margins"].bottom=+ve.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ee=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ee=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ee=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ee=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ee=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ee=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ee=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ee=!1}break;case"smarttags":break;default:ee=!1;break}if(ee||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?jne(C,ge,k,n.slice(T,o.index)):(k=o,T=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var re={};return!r.bookSheets&&!r.bookProps&&(re.Sheets=u),re.SheetNames=d,re.Workbook=K,re.SSF=wn(Mt),re.Props=w,re.Custprops=C,re}function x1(t,e){switch(zy(e=e||{}),e.type||"base64"){case"base64":return lg(Rs(t),e);case"binary":case"buffer":case"file":return lg(t,e);case"array":return lg(Il(t),e)}}function Kne(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=oQ(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=lQ(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var qne=[60,1084,2066,2165,2175];function Xne(t,e,r,n,s){var i=n,a=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}a.push(o),r.l+=i;for(var l=ni(r,r.l),c=y1[l],u=0;c!=null&&qne.indexOf(l)>-1;)i=ni(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+i),a.push(o),r.l+=4+i,c=y1[l=ni(r,r.l)];var d=qi(a);_n(d,0);var f=0;d.lens=[];for(var h=0;h<a.length;++h)d.lens.push(f),f+=a[h].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,s)}function xa(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Mt[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Dl[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Yd(t.v):t.w=pl(t.v):t.w=Gs(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&au(Mt[n]||String(n))){var s=Go(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function w0(t,e,r){return{v:t,ixfe:e,t:r}}function Yne(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},a={},o=null,l=[],c="",u={},d,f="",h,p,v,g,x={},y=[],E,I,P=[],D=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},b=function(ye){return ye<8?Jo[ye]:ye<64&&D[ye-8]||Jo[ye]},w=function(ye,_e,Re){var Ge=_e.XF.data;if(!(!Ge||!Ge.patternType||!Re||!Re.cellStyles)){_e.s={},_e.s.patternType=Ge.patternType;var st;(st=ef(b(Ge.icvFore)))&&(_e.s.fgColor={rgb:st}),(st=ef(b(Ge.icvBack)))&&(_e.s.bgColor={rgb:st})}},C=function(ye,_e,Re){if(!(H>1)&&!(Re.sheetRows&&ye.r>=Re.sheetRows)){if(Re.cellStyles&&_e.XF&&_e.XF.data&&w(ye,_e,Re),delete _e.ixfe,delete _e.XF,d=ye,f=Rt(ye),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),ye.r<a.s.r&&(a.s.r=ye.r),ye.c<a.s.c&&(a.s.c=ye.c),ye.r+1>a.e.r&&(a.e.r=ye.r+1),ye.c+1>a.e.c&&(a.e.c=ye.c+1),Re.cellFormula&&_e.f){for(var Ge=0;Ge<y.length;++Ge)if(!(y[Ge][0].s.c>ye.c||y[Ge][0].s.r>ye.r)&&!(y[Ge][0].e.c<ye.c||y[Ge][0].e.r<ye.r)){_e.F=Jt(y[Ge][0]),(y[Ge][0].s.c!=ye.c||y[Ge][0].s.r!=ye.r)&&delete _e.f,_e.f&&(_e.f=""+Nn(y[Ge][1],a,ye,M,T));break}}Re.dense?(s[ye.r]||(s[ye.r]=[]),s[ye.r][ye.c]=_e):s[f]=_e}},T={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(T.password=e.password);var k,N=[],B=[],R=[],O=[],U=!1,M=[];M.SheetNames=T.snames,M.sharedf=T.sharedf,M.arrayf=T.arrayf,M.names=[],M.XTI=[];var q=0,H=0,L=0,z=[],K=[],te;T.codepage=1200,sa(1200);for(var ge=!1;t.l<t.length-1;){var ie=t.l,he=t.read_shift(2);if(he===0&&q===10)break;var Z=t.l===t.length?0:t.read_shift(2),Q=y1[he];if(Q&&Q.f){if(e.bookSheets&&q===133&&he!==133)break;if(q=he,Q.r===2||Q.r==12){var xe=t.read_shift(2);if(Z-=2,!T.enc&&xe!==he&&((xe&255)<<8|xe>>8)!==he)throw new Error("rt mismatch: "+xe+"!="+he);Q.r==12&&(t.l+=10,Z-=10)}var X={};if(he===10?X=Q.f(t,Z,T):X=Xne(he,Q,t,Z,T),H==0&&[9,521,1033,2057].indexOf(q)===-1)continue;switch(he){case 34:r.opts.Date1904=A.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(t.l=0),T.enc=X,!e.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=X;break;case 66:var W=Number(X);switch(W){case 21010:W=1200;break;case 32768:W=1e4;break;case 32769:W=1252;break}sa(T.codepage=W),ge=!0;break;case 317:T.rrtabid=X;break;case 25:T.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:T.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(s["!type"]="dialog"),X.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),X.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:P.push(X);break;case 430:M.push([X]),M[M.length-1].XTI=[];break;case 35:case 547:M[M.length-1].push(X);break;case 24:case 536:te={Name:X.Name,Ref:Nn(X.rgce,a,null,M,T)},X.itab>0&&(te.Sheet=X.itab-1),M.names.push(te),M[0]||(M[0]=[],M[0].XTI=[]),M[M.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(K[X.itab-1]={ref:Jt(X.rgce[0][0][1][2])});break;case 22:T.ExternCount=X;break;case 23:M.length==0&&(M[0]=[],M[0].XTI=[]),M[M.length-1].XTI=M[M.length-1].XTI.concat(X),M.XTI=M.XTI.concat(X);break;case 2196:if(T.biff<8)break;te!=null&&(te.Comment=X[1]);break;case 18:s["!protect"]=X;break;case 19:X!==0&&T.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,T.snames.push(X.name);break;case 10:{if(--H)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,s["!ref"]=Jt(a),e.sheetRows&&e.sheetRows<=a.e.r){var Y=a.e.r;a.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Jt(a),a.e.r=Y}a.e.r++,a.e.c++}N.length>0&&(s["!merges"]=N),B.length>0&&(s["!objects"]=B),R.length>0&&(s["!cols"]=R),O.length>0&&(s["!rows"]=O),A.Sheets.push(_)}c===""?u=s:n[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),T.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(T.biff=5,ge=!0,sa(T.codepage=28591)),T.biff==8&&X.BIFFVer==0&&X.dt==16&&(T.biff=2),H++)break;if(s=e.dense?[]:{},T.biff<8&&!ge&&(ge=!0,sa(T.codepage=e.codepage||1252)),T.biff<5||X.BIFFVer==0&&X.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ee={pos:t.l-Z,name:c};i[ee.pos]=ee,T.snames.push(c)}else c=(i[ie]||{name:""}).name;X.dt==32&&(s["!type"]="chart"),X.dt==64&&(s["!type"]="macro"),N=[],B=[],T.arrayf=y=[],R=[],O=[],U=!1,_={Hidden:(i[ie]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[X.r]||[])[X.c]:s[Rt({c:X.c,r:X.r})])&&++X.c,E={ixfe:X.ixfe,XF:P[X.ixfe]||{},v:X.val,t:"n"},L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:X.c,r:X.r},E,e);break;case 5:case 517:E={ixfe:X.ixfe,XF:P[X.ixfe],v:X.val,t:X.t},L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:X.c,r:X.r},E,e);break;case 638:E={ixfe:X.ixfe,XF:P[X.ixfe],v:X.rknum,t:"n"},L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:X.c,r:X.r},E,e);break;case 189:for(var ve=X.c;ve<=X.C;++ve){var re=X.rkrec[ve-X.c][0];E={ixfe:re,XF:P[re],v:X.rkrec[ve-X.c][1],t:"n"},L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:ve,r:X.r},E,e)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(E=w0(X.val,X.cell.ixfe,X.tt),E.XF=P[E.ixfe],e.cellFormula){var se=X.formula;if(se&&se[0]&&se[0][0]&&se[0][0][0]=="PtgExp"){var le=se[0][0][1][0],Te=se[0][0][1][1],we=Rt({r:le,c:Te});x[we]?E.f=""+Nn(X.formula,a,X.cell,M,T):E.F=((e.dense?(s[le]||[])[Te]:s[we])||{}).F}else E.f=""+Nn(X.formula,a,X.cell,M,T)}L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C(X.cell,E,e),o=X}break;case 7:case 519:if(o)o.val=X,E=w0(X,o.cell.ixfe,"s"),E.XF=P[E.ixfe],e.cellFormula&&(E.f=""+Nn(o.formula,a,o.cell,M,T)),L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C(o.cell,E,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(X);var Se=Rt(X[0].s);if(h=e.dense?(s[X[0].s.r]||[])[X[0].s.c]:s[Se],e.cellFormula&&h){if(!o||!Se||!h)break;h.f=""+Nn(X[1],a,X[0],M,T),h.F=Jt(X[0])}}break;case 1212:{if(!e.cellFormula)break;if(f){if(!o)break;x[Rt(o.cell)]=X[0],h=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Rt(o.cell)],(h||{}).f=""+Nn(X[0],a,d,M,T)}}break;case 253:E=w0(l[X.isst].t,X.ixfe,"s"),l[X.isst].h&&(E.h=l[X.isst].h),E.XF=P[E.ixfe],L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:X.c,r:X.r},E,e);break;case 513:e.sheetStubs&&(E={ixfe:X.ixfe,XF:P[X.ixfe],t:"z"},L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:X.c,r:X.r},E,e));break;case 190:if(e.sheetStubs)for(var ze=X.c;ze<=X.C;++ze){var Ie=X.ixfe[ze-X.c];E={ixfe:Ie,XF:P[Ie],t:"z"},L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:ze,r:X.r},E,e)}break;case 214:case 516:case 4:E=w0(X.val,X.ixfe,"s"),E.XF=P[E.ixfe],L>0&&(E.z=z[E.ixfe>>8&63]),xa(E,e,r.opts.Date1904),C({c:X.c,r:X.r},E,e);break;case 0:case 512:H===1&&(a=X);break;case 252:l=X;break;case 1054:if(T.biff==4){z[L++]=X[1];for(var $e=0;$e<L+163&&Mt[$e]!=X[1];++$e);$e>=163&&Qo(X[1],L+163)}else Qo(X[1],X[0]);break;case 30:{z[L++]=X;for(var Be=0;Be<L+163&&Mt[Be]!=X;++Be);Be>=163&&Qo(X,L+163)}break;case 229:N=N.concat(X);break;case 93:B[X.cmo[0]]=T.lastobj=X;break;case 438:T.lastobj.TxO=X;break;case 127:T.lastobj.ImData=X;break;case 440:for(g=X[0].s.r;g<=X[0].e.r;++g)for(v=X[0].s.c;v<=X[0].e.c;++v)h=e.dense?(s[g]||[])[v]:s[Rt({c:v,r:g})],h&&(h.l=X[1]);break;case 2048:for(g=X[0].s.r;g<=X[0].e.r;++g)for(v=X[0].s.c;v<=X[0].e.c;++v)h=e.dense?(s[g]||[])[v]:s[Rt({c:v,r:g})],h&&h.l&&(h.l.Tooltip=X[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;h=e.dense?(s[X[0].r]||[])[X[0].c]:s[Rt(X[0])];var We=B[X[2]];h||(e.dense?(s[X[0].r]||(s[X[0].r]=[]),h=s[X[0].r][X[0].c]={t:"z"}):h=s[Rt(X[0])]={t:"z"},a.e.r=Math.max(a.e.r,X[0].r),a.s.r=Math.min(a.s.r,X[0].r),a.e.c=Math.max(a.e.c,X[0].c),a.s.c=Math.min(a.s.c,X[0].c)),h.c||(h.c=[]),p={a:X[1],t:We.TxO.t},h.c.push(p)}break;case 2173:xee(P[X.ixfe],X.ext);break;case 125:{if(!T.cellStyles)break;for(;X.e>=X.s;)R[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},U||(U=!0,Vy(X.w/256)),qc(R[X.e+1])}break;case 520:{var Ke={};X.level!=null&&(O[X.r]=Ke,Ke.level=X.level),X.hidden&&(O[X.r]=Ke,Ke.hidden=!0),X.hpt&&(O[X.r]=Ke,Ke.hpt=X.hpt,Ke.hpx=tf(X.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Ed(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=X;break;case 161:s["!margins"]||Ed(s["!margins"]={}),s["!margins"].header=X.header,s["!margins"].footer=X.footer;break;case 574:X.RTL&&(A.Views[0].RTL=!0);break;case 146:D=X;break;case 2198:k=X;break;case 140:I=X;break;case 442:c?_.CodeName=X||_.name:A.WBProps.CodeName=X||"ThisWorkbook";break}}else Q||console.error("Missing Info for XLS Record 0x"+he.toString(16)),t.l+=Z}return r.SheetNames=Ma(i).sort(function(Ee,ye){return Number(Ee)-Number(ye)}).map(function(Ee){return i[Ee].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&K.forEach(function(Ee,ye){r.Sheets[r.SheetNames[ye]]["!autofilter"]=Ee}),r.Strings=l,r.SSF=wn(Mt),T.enc&&(r.Encryption=T.enc),k&&(r.Themes=k),r.Metadata={},I!==void 0&&(r.Metadata.Country=I),M.names.length>0&&(A.Names=M.names),r.Workbook=A,r}var NS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Qne(t,e,r){var n=Yt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=xS(n,pQ,NS.DSI);for(var i in s)e[i]=s[i]}catch(c){if(r.WTF)throw c}var a=Yt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var o=xS(a,mQ,NS.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(r.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(pD(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function QD(t,e){e||(e={}),zy(e),wk(),e.codepage&&Sy(e.codepage);var r,n;if(t.FullPaths){if(Yt.find(t,"/encryption"))throw new Error("File is password-protected");r=Yt.find(t,"!CompObj"),n=Yt.find(t,"/Workbook")||Yt.find(t,"/Book")}else{switch(e.type){case"base64":t=na(Rs(t));break;case"binary":t=na(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}_n(t,0),n={content:t}}var s,i;if(r&&Kne(r),e.bookProps&&!e.bookSheets)s={};else{var a=Kt?"buffer":"array";if(n&&n.content)s=Yne(n.content,e);else if((i=Yt.find(t,"PerfectOffice_MAIN"))&&i.content)s=xd.to_workbook(i.content,(e.type=a,e));else if((i=Yt.find(t,"NativeContent_MAIN"))&&i.content)s=xd.to_workbook(i.content,(e.type=a,e));else throw(i=Yt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Yt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Mee(t))}var o={};return t.FullPaths&&Qne(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}var tp={0:{f:Rre},1:{f:Mre},2:{f:zre},3:{f:Vre},4:{f:Lre},5:{f:Gre},6:{f:qre},7:{f:jre},8:{f:Zre},9:{f:Jre},10:{f:Yre},11:{f:Qre},12:{f:Bre},13:{f:Wre},14:{f:$re},15:{f:Ure},16:{f:WD},17:{f:Xre},18:{f:Hre},19:{f:Oy},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:wne},40:{},42:{},43:{f:YZ},44:{f:XZ},45:{f:QZ},46:{f:ZZ},47:{f:JZ},48:{},49:{f:eQ},50:{},51:{f:Eee},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wD},62:{f:Kre},63:{f:Aee},64:{f:lne},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:zn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:one},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Nre},148:{f:Fre,p:16},151:{f:rne},152:{},153:{f:Tne},154:{},155:{},156:{f:Sne},157:{},158:{},159:{T:1,f:mZ},160:{T:-1},161:{T:1,f:kl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ene},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:yee},336:{T:-1},337:{f:_ee,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:p1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:AD},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:nne},427:{f:sne},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:ine},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Ore},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:tne},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:p1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Fee},633:{T:1},634:{T:-1},635:{T:1,f:Ree},636:{T:-1},637:{f:rQ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:pne},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:cne},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},y1={6:{f:ig},10:{f:Fi},12:{f:Qr},13:{f:Qr},14:{f:zr},15:{f:zr},16:{f:Ln},17:{f:zr},18:{f:zr},19:{f:Qr},20:{f:bS},21:{f:bS},23:{f:AD},24:{f:TS},25:{f:zr},26:{},27:{},28:{f:DJ},29:{},34:{f:zr},35:{f:SS},38:{f:Ln},39:{f:Ln},40:{f:Ln},41:{f:Ln},42:{f:zr},43:{f:zr},47:{f:OZ},49:{f:dJ},51:{f:Qr},60:{},61:{f:lJ},64:{f:zr},65:{f:uJ},66:{f:Qr},77:{},80:{},81:{},82:{},85:{f:Qr},89:{},90:{},91:{},92:{f:eJ},93:{f:RJ},94:{},95:{f:zr},96:{},97:{},99:{f:zr},125:{f:wD},128:{f:_J},129:{f:tJ},130:{f:Qr},131:{f:zr},132:{f:zr},133:{f:rJ},134:{},140:{f:LJ},141:{f:Qr},144:{},146:{f:VJ},151:{},152:{},153:{},154:{},155:{},156:{f:Qr},157:{},158:{},160:{f:zJ},161:{f:jJ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:vJ},190:{f:xJ},193:{f:Fi},197:{},198:{},199:{},200:{},201:{},202:{f:zr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Qr},220:{},221:{f:zr},222:{},224:{f:EJ},225:{f:ZQ},226:{f:Fi},227:{},229:{f:PJ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:nJ},253:{f:fJ},255:{f:sJ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:yD},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zr},353:{f:Fi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:SJ},431:{f:zr},432:{},433:{},434:{},437:{},438:{f:NJ},439:{f:zr},440:{f:MJ},441:{},442:{f:Of},443:{},444:{f:Qr},445:{},446:{},448:{f:Fi},449:{f:oJ,r:2},450:{f:Fi},512:{f:ES},513:{f:GJ},515:{f:bJ},516:{f:hJ},517:{f:_S},519:{f:WJ},520:{f:aJ},523:{},545:{f:AS},549:{f:yS},566:{},574:{f:cJ},638:{f:gJ},659:{},1048:{},1054:{f:pJ},1084:{},1212:{f:IJ},2048:{f:BJ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:S0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Fi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:$J,r:12},2173:{f:vee,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:wJ,r:12},2197:{},2198:{f:dee,r:12},2199:{},2200:{},2201:{},2202:{f:CJ,r:12},2203:{f:Fi},2204:{},2205:{},2206:{},2207:{},2211:{f:iJ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Qr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:HJ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:UJ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:ES},1:{},2:{f:YJ},3:{f:XJ},4:{f:qJ},5:{f:_S},7:{f:QJ},8:{},9:{f:S0},11:{},22:{f:Qr},30:{f:mJ},31:{},32:{},33:{f:AS},36:{},37:{f:yS},50:{f:JJ},62:{},52:{},67:{},68:{f:Qr},69:{},86:{},126:{},127:{f:KJ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ZJ},223:{},234:{},354:{},421:{},518:{f:ig},521:{f:S0},536:{f:TS},547:{f:SS},561:{},579:{},1030:{f:ig},1033:{f:S0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Js(t,e,r,n){var s=e;if(!isNaN(s)){var i=(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&iD(r)&&t.push(r)}}function MS(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=s.index,o=i&&i.index||t.length,l=bY(t.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,d=0,f=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(a=0;a<l.length;++a){var v=l[a].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var x=v.split(/<\/t[dh]>/i);for(o=0;o<x.length;++o){var y=x[o].trim();if(y.match(/<t[dh]/i)){for(var E=y,I=0;E.charAt(0)=="<"&&(I=E.indexOf(">"))>-1;)E=E.slice(I+1);for(var P=0;P<p.length;++P){var D=p[P];D.s.c==u&&D.s.r<c&&c<=D.e.r&&(u=D.e.c+1,P=-1)}var A=Tt(y.slice(0,y.indexOf(">")));f=A.colspan?+A.colspan:1,((d=+A.rowspan)>1||f>1)&&p.push({s:{r:c,c:u},e:{r:c+(d||1)-1,c:u+f-1}});var _=A.t||A["data-t"]||"";if(!E.length){u+=f;continue}if(E=Kk(E),h.s.r>c&&(h.s.r=c),h.e.r<c&&(h.e.r=c),h.s.c>u&&(h.s.c=u),h.e.c<u&&(h.e.c=u),!E.length){u+=f;continue}var b={t:"s",v:E};r.raw||!E.trim().length||_=="s"||(E==="TRUE"?b={t:"b",v:!0}:E==="FALSE"?b={t:"b",v:!1}:isNaN(ca(E))?isNaN(Kc(E).getDate())||(b={t:"d",v:mn(E)},r.cellDates||(b={t:"n",v:ls(b.v)}),b.z=r.dateNF||Mt[14]):b={t:"n",v:ca(E)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=b):n[Rt({r:c,c:u})]=b,u+=f}}}}return n["!ref"]=Jt(h),p.length&&(n["!merges"]=p),n}function Jne(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var u=Rt({r,c:a}),d=n.dense?(t[r]||[])[a]:t[u],f=d&&d.v!=null&&(d.h||ky(d.w||(gi(d),d.w)||""))||"",h={};o>1&&(h.rowspan=o),l>1&&(h.colspan=l),n.editable?f='<span contenteditable="true">'+f+"</span>":d&&(h["data-t"]=d&&d.t||"z",d.v!=null&&(h["data-v"]=d.v),d.z!=null&&(h["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+d.l.Target+'">'+f+"</a>")),h.id=(n.id||"sjs")+"-"+u,i.push(LY("td",f,h))}}var p="<tr>";return p+i.join("")+"</tr>"}var Zne='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',ese="</body></html>";function tse(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return bo(MS(r[0],e),e);var n=Ky();return r.forEach(function(s,i){qy(n,MS(s,e),"Sheet"+(i+1))}),n}function rse(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function nse(t,e){var r=e||{},n=r.header!=null?r.header:Zne,s=r.footer!=null?r.footer:ese,i=[n],a=iu(t["!ref"]);r.dense=Array.isArray(t),i.push(rse(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(Jne(t,a,o,r));return i.push("</table>"+s),i.join("")}function JD(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?ss(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var u=iu(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),s==-1&&(c.e.r=s=u.e.r+1)}var d=[],f=0,h=t["!rows"]||(t["!rows"]=[]),p=0,v=0,g=0,x=0,y=0,E=0;for(t["!cols"]||(t["!cols"]=[]);p<o.length&&v<l;++p){var I=o[p];if(BS(I)){if(n.display)continue;h[v]={hidden:!0}}var P=I.children;for(g=x=0;g<P.length;++g){var D=P[g];if(!(n.display&&BS(D))){var A=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):Kk(D.innerHTML),_=D.getAttribute("data-z")||D.getAttribute("z");for(f=0;f<d.length;++f){var b=d[f];b.s.c==x+i&&b.s.r<v+s&&v+s<=b.e.r&&(x=b.e.c+1-i,f=-1)}E=+D.getAttribute("colspan")||1,((y=+D.getAttribute("rowspan")||1)>1||E>1)&&d.push({s:{r:v+s,c:x+i},e:{r:v+s+(y||1)-1,c:x+i+(E||1)-1}});var w={t:"s",v:A},C=D.getAttribute("data-t")||D.getAttribute("t")||"";A!=null&&(A.length==0?w.t=C||"z":n.raw||A.trim().length==0||C=="s"||(A==="TRUE"?w={t:"b",v:!0}:A==="FALSE"?w={t:"b",v:!1}:isNaN(ca(A))?isNaN(Kc(A).getDate())||(w={t:"d",v:mn(A)},n.cellDates||(w={t:"n",v:ls(w.v)}),w.z=n.dateNF||Mt[14]):w={t:"n",v:ca(A)})),w.z===void 0&&_!=null&&(w.z=_);var T="",k=D.getElementsByTagName("A");if(k&&k.length)for(var N=0;N<k.length&&!(k[N].hasAttribute("href")&&(T=k[N].getAttribute("href"),T.charAt(0)!="#"));++N);T&&T.charAt(0)!="#"&&(w.l={Target:T}),n.dense?(t[v+s]||(t[v+s]=[]),t[v+s][x+i]=w):t[Rt({c:x+i,r:v+s})]=w,c.e.c<x+i&&(c.e.c=x+i),x+=E}}++v}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,v-1+s),t["!ref"]=Jt(c),v>=l&&(t["!fullref"]=Jt((c.e.r=o.length-p+v-1+s,c))),t}function ZD(t,e){var r=e||{},n=r.dense?[]:{};return JD(n,t,e)}function sse(t,e){return bo(ZD(t,e),e)}function BS(t){var e="",r=ase(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function ase(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function ise(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Zt(e.replace(/<[^>]*>/g,""));return[r]}var LS={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function eP(t,e){var r=e||{},n=Dy(t),s=[],i,a,o={name:""},l="",c=0,u,d,f={},h=[],p=r.dense?[]:{},v,g,x={value:""},y="",E=0,I=[],P=-1,D=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,b={},w=[],C={},T=0,k=0,N=[],B=1,R=1,O=[],U={Names:[]},M={},q=["",""],H=[],L={},z="",K=0,te=!1,ge=!1,ie=0;for(Jd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=Jd.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?p["!ref"]=Jt(A):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=A.e.r&&(p["!fullref"]=p["!ref"],A.e.r=r.sheetRows-1,p["!ref"]=Jt(A)),w.length&&(p["!merges"]=w),N.length&&(p["!rows"]=N),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),h.push(u.name),f[u.name]=p,ge=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=Tt(v[0],!1),P=D=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,p=r.dense?[]:{},w=[],N=[],ge=!0);break;case"table-row-group":v[1]==="/"?--_:++_;break;case"table-row":case"":if(v[1]==="/"){P+=B,B=1;break}if(d=Tt(v[0],!1),d.?P=d.-1:P==-1&&(P=0),B=+d["number-rows-repeated"]||1,B<10)for(ie=0;ie<B;++ie)_>0&&(N[P+ie]={level:_});D=-1;break;case"covered-table-cell":v[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(p[P]||(p[P]=[]),p[P][D]={t:"z"}):p[Rt({r:P,c:D})]={t:"z"}),y="",I=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++D,x=Tt(v[0],!1),R=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=RS(Zt(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=Zt(x["string-value"]||""),r.dense?(p[P]||(p[P]=[]),p[P][D]=g):p[Rt({r:P,c:D})]=g),D+=R-1;else if(v[1]!=="/"){++D,y="",E=0,I=[],R=1;var he=B?P+B-1:P;if(D>A.e.c&&(A.e.c=D),D<A.s.c&&(A.s.c=D),P<A.s.r&&(A.s.r=P),he>A.e.r&&(A.e.r=he),x=Tt(v[0],!1),H=[],L={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=Zt(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(T=parseInt(x["number-matrix-rows-spanned"],10)||0,k=parseInt(x["number-matrix-columns-spanned"],10)||0,C={s:{r:P,c:D},e:{r:P+T-1,c:D+k-1}},g.F=Jt(C),O.push([C,g.F])),x.formula)g.f=RS(x.formula);else for(ie=0;ie<O.length;++ie)P>=O[ie][0].s.r&&P<=O[ie][0].e.r&&D>=O[ie][0].s.c&&D<=O[ie][0].e.c&&(g.F=O[ie][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(T=parseInt(x["number-rows-spanned"],10)||0,k=parseInt(x["number-columns-spanned"],10)||0,C={s:{r:P,c:D},e:{r:P+T-1,c:D+k-1}},w.push(C)),x["number-columns-repeated"]&&(R=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=wr(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=mn(x["date-value"]),r.cellDates||(g.t="n",g.v=ls(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=yY(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=im(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=Zt(x["string-value"]),I=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(te=!1,g.t==="s"&&(g.v=y||"",I.length&&(g.R=I),te=E==0),M.Target&&(g.l=M),H.length>0&&(g.c=H,H=[]),y&&r.cellText!==!1&&(g.w=y),te&&(g.t="z",delete g.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var Z=0;Z<B;++Z){if(R=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(p[P+Z]||(p[P+Z]=[]),p[P+Z][D]=Z==0?g:wn(g);--R>0;)p[P+Z][D+R]=wn(g);else for(p[Rt({r:P+Z,c:D})]=g;--R>0;)p[Rt({r:P+Z,c:D+R})]=wn(g);A.e.c<=D&&(A.e.c=D)}R=parseInt(x["number-columns-repeated"]||"1",10),D+=R-1,R=0,g={},y="",I=[]}M={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;L.t=y,I.length&&(L.R=I),L.a=z,H.push(L)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);z="",K=0,y="",E=0,I=[];break;case"creator":v[1]==="/"?z=n.slice(K,v.index):K=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);y="",E=0,I=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(b[o.name]=l,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=Tt(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":a=Tt(v[0],!1),l+=LS[v[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":a=Tt(v[0],!1),l+=LS[v[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,v.index);break}else c=v.index+v[0].length;break;case"named-range":a=Tt(v[0],!1),q=og(a["cell-range-address"]);var Q={Name:a.name,Ref:q[0]+"!"+q[1]};ge&&(Q.Sheet=h.length),U.Names.push(Q);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!x||!x["string-value"])){var xe=ise(n.slice(E,v.index));y=(y.length>0?y+`
`:"")+xe[0]}else Tt(v[0],!1),E=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{q=og(Tt(v[0])["target-range-address"]),f[q[0]]["!autofilter"]={ref:q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(M=Tt(v[0],!1),!M.href)break;M.Target=Zt(M.href),delete M.href,M.Target.charAt(0)=="#"&&M.Target.indexOf(".")>-1?(q=og(M.Target.slice(1)),M.Target="#"+q[0]+"!"+q[1]):M.Target.match(/^\.\.[\\\/]/)&&(M.Target=M.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var X={Sheets:f,SheetNames:h,Workbook:U};return r.bookSheets&&delete X.Sheets,X}function US(t,e){e=e||{},Bs(t,"META-INF/manifest.xml")&&bQ(Yr(t,"META-INF/manifest.xml"),e);var r=Ts(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=eP(xr(r),e);return Bs(t,"meta.xml")&&(n.Props=hD(Yr(t,"meta.xml"))),n}function VS(t,e){return eP(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Hy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function E1(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):xr(Il(t))}function _1(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function $S(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function ose(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function rf(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function cn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function $n(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=rf(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=rf(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Gy(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function lse(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=rf(t,n),i=$n(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:cn(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=$n(o.data),c=cn(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=cn(i[3][0].data)>>>0>0),r.push(a)}return r}function cse(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=rf(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[_1(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var u=_1(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function use(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(cse(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return _1(e)}function dse(t,e,r,n){var s=Hy(t),i=s.getUint32(4,!0),a=(n>1?12:8)+$S(i&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);i&512&&(o=s.getUint32(a,!0),a+=4),a+=$S(i&(n>1?12288:4096))*4,i&16&&(l=s.getUint32(a,!0),a+=4),i&32&&(c=s.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(a,!0)*1e3),a+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(c))d={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function fse(t,e,r){var n=Hy(t),s=n.getUint32(8,!0),i=12,a=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);s&1&&(l=ose(t,i),i+=16),s&2&&(c=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=n.getUint32(i,!0),i+=4),s&16&&(a=n.getUint32(i,!0),i+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c/86400};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1)d={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return d}function hse(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return dse(t,e,r,t[0]);case 5:return fse(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function oo(t){var e=$n(t);return rf(e[1][0].data)}function jS(t,e){var r=$n(e.data),n=cn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(a){var o=$n(a.data),l=cn(o[1][0].data)>>>0;switch(n){case 1:i[l]=E1(o[3][0].data);break;case 8:{var c=t[oo(o[9][0].data)][0],u=$n(c.data),d=t[oo(u[1][0].data)][0],f=cn(d.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var h=$n(d.data);i[l]=h[3].map(function(p){return E1(p.data)}).join("")}break}}),i}function pse(t,e){var r,n,s,i,a,o,l,c,u,d,f,h,p,v,g=$n(t),x=cn(g[1][0].data)>>>0,y=cn(g[2][0].data)>>>0,E=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&cn(g[8][0].data)>0||!1,I,P;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&e!=0)I=(o=(a=g[7])==null?void 0:a[0])==null?void 0:o.data,P=(c=(l=g[6])==null?void 0:l[0])==null?void 0:c.data;else if((d=(u=g[4])==null?void 0:u[0])!=null&&d.data&&e!=1)I=(h=(f=g[4])==null?void 0:f[0])==null?void 0:h.data,P=(v=(p=g[3])==null?void 0:p[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var D=E?4:1,A=Hy(I),_=[],b=0;b<I.length/2;++b){var w=A.getUint16(b*2,!0);w<65535&&_.push([b,w])}if(_.length!=y)throw"Expected ".concat(y," cells, found ").concat(_.length);var C=[];for(b=0;b<_.length-1;++b)C[_[b][0]]=P.subarray(_[b][1]*D,_[b+1][1]*D);return _.length>=1&&(C[_[_.length-1][0]]=P.subarray(_[_.length-1][1]*D)),{R:x,cells:C}}function mse(t,e){var r,n=$n(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?cn(n[7][0].data)>>>0>0?1:0:-1,i=Gy(n[5],function(a){return pse(a,s)});return{nrows:cn(n[4][0].data)>>>0,data:i.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function gse(t,e,r){var n,s=$n(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(cn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(cn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Jt(i);var a=$n(s[4][0].data),o=jS(t,t[oo(a[4][0].data)][0]),l=(n=a[17])!=null&&n[0]?jS(t,t[oo(a[17][0].data)][0]):[],c=$n(a[3][0].data),u=0;c[1].forEach(function(d){var f=$n(d.data),h=t[oo(f[2][0].data)][0],p=cn(h.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var v=mse(t,h);v.data.forEach(function(g,x){g.forEach(function(y,E){var I=Rt({r:u+x,c:E}),P=hse(y,o,l);P&&(r[I]=P)})}),u+=v.nrows})}function vse(t,e){var r=$n(e.data),n={"!ref":"A1"},s=t[oo(r[2][0].data)],i=cn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return gse(t,s[0],n),n}function xse(t,e){var r,n=$n(e.data),s={name:(r=n[1])!=null&&r[0]?E1(n[1][0].data):"",sheets:[]},i=Gy(n[2],oo);return i.forEach(function(a){t[a].forEach(function(o){var l=cn(o.meta[1][0].data);l==6e3&&s.sheets.push(vse(t,o))})}),s}function yse(t,e){var r=Ky(),n=$n(e.data),s=Gy(n[1],oo);if(s.forEach(function(i){t[i].forEach(function(a){var o=cn(a.meta[1][0].data);if(o==2){var l=xse(t,a);l.sheets.forEach(function(c,u){qy(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function cg(t){var e,r,n,s,i={},a=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=use(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var u;try{u=lse(c)}catch(d){return console.log("## "+(d.message||d))}u.forEach(function(d){i[d.id]=d.messages,a.push(d.id)})}}),!a.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&cn(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||a.forEach(function(l){i[l].forEach(function(c){var u=cn(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return yse(i,o)}function Ese(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function zy(t){Ese([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function _se(t){return dc.WS.indexOf(t)>-1?"sheet":t==dc.CS?"chart":t==dc.DS?"dialog":t==dc.MS?"macro":t&&t.length?t:"sheet"}function bse(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,_se(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Sse(t,e,r,n,s,i,a,o,l,c,u,d){try{i[n]=gd(Ts(t,r,!0),e);var f=Yr(t,e),h;switch(o){case"sheet":h=kne(f,e,s,l,i[n],c,u,d);break;case"chart":if(h=Dne(f,e,s,l,i[n],c,u,d),!h||!h["!drawel"])break;var p=Gu(h["!drawel"].Target,e),v=m1(p),g=Cee(Ts(t,p,!0),gd(Ts(t,v,!0),p)),x=Gu(g,p),y=m1(x);h=fne(Ts(t,x,!0),x,l,gd(Ts(t,y,!0),x),c,h);break;case"macro":h=Pne(f,e,s,l,i[n],c,u,d);break;case"dialog":h=Rne(f,e,s,l,i[n],c,u,d);break;default:throw new Error("Unrecognized sheet type "+o)}a[n]=h;var E=[];i&&i[n]&&Ma(i[n]).forEach(function(I){var P="";if(i[n][I].Type==dc.CMNT){P=Gu(i[n][I].Target,e);var D=Mne(Yr(t,P,!0),P,l);if(!D||!D.length)return;IS(h,D,!1)}i[n][I].Type==dc.TCMNT&&(P=Gu(i[n][I].Target,e),E=E.concat(Dee(Yr(t,P,!0),l)))}),E&&E.length&&IS(h,E,!0,l.people||[])}catch(I){if(l.WTF)throw I}}function Os(t){return t.charAt(0)=="/"?t.slice(1):t}function Tse(t,e){if(Lk(),e=e||{},zy(e),Bs(t,"META-INF/manifest.xml")||Bs(t,"objectdata.xml"))return US(t,e);if(Bs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof cg<"u"){if(t.FileIndex)return cg(t);var r=Yt.utils.cfb_new();return eS(t).forEach(function(N){AY(r,N,TY(t,N))}),cg(r)}throw new Error("Unsupported NUMBERS file")}if(!Bs(t,"[Content_Types].xml"))throw Bs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Bs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=eS(t),s=EQ(Ts(t,"[Content_Types].xml")),i=!1,a,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Yr(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Yr(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(yd=[],s.sst)try{yd=Nne(Yr(t,Os(s.sst)),s.sst,e)}catch(N){if(e.WTF)throw N}e.cellStyles&&s.themes.length&&(l=One(Ts(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=Fne(Yr(t,Os(s.style)),s.style,l,e))}s.links.map(function(N){try{var B=gd(Ts(t,m1(Os(N))),N);return Lne(Yr(t,Os(N)),B,N,e)}catch{}});var u=Cne(Yr(t,Os(s.workbooks[0])),s.workbooks[0],e),d={},f="";s.coreprops.length&&(f=Yr(t,Os(s.coreprops[0]),!0),f&&(d=hD(f)),s.extprops.length!==0&&(f=Yr(t,Os(s.extprops[0]),!0),f&&AQ(f,d,e)));var h={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(f=Ts(t,Os(s.custprops[0]),!0),f&&(h=IQ(f,e)));var p={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(B){return B.name}):d.Worksheets&&d.SheetNames.length>0&&(a=d.SheetNames),e.bookProps&&(p.Props=d,p.Custprops=h),e.bookSheets&&typeof a<"u"&&(p.SheetNames=a),e.bookSheets?p.SheetNames:e.bookProps))return p;a={};var v={};e.bookDeps&&s.calcchain&&(v=Bne(Yr(t,Os(s.calcchain)),s.calcchain));var g=0,x={},y,E;{var I=u.Sheets;d.Worksheets=I.length,d.SheetNames=[];for(var P=0;P!=I.length;++P)d.SheetNames[P]=I[P].name}var D=i?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");Bs(t,_)||(_="xl/_rels/workbook."+D+".rels");var b=gd(Ts(t,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=Une(Yr(t,Os(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Pee(Yr(t,Os(s.people[0])),e)),b&&(b=bse(b,u.Sheets));var w=Yr(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=d.Worksheets;++g){var C="sheet";if(b&&b[g]?(y="xl/"+b[g][1].replace(/[\/]?xl\//,""),Bs(t,y)||(y=b[g][1]),Bs(t,y)||(y=_.replace(/_rels\/.*$/,"")+b[g][1]),C=b[g][2]):(y="xl/worksheets/sheet"+(g+1-w)+"."+D,y=y.replace(/sheet0\./,"sheet.")),E=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(d.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var T=!1,k=0;k!=e.sheets.length;++k)typeof e.sheets[k]=="number"&&e.sheets[k]==g&&(T=1),typeof e.sheets[k]=="string"&&e.sheets[k].toLowerCase()==d.SheetNames[g].toLowerCase()&&(T=1);if(!T)continue e}}Sse(t,y,E,d.SheetNames[g],g,x,a,C,e,u,l,c)}return p={Directory:s,Workbook:u,Props:d,Custprops:h,Deps:v,Sheets:a,SheetNames:d.SheetNames,Strings:yd,Styles:c,Themes:l,SSF:wn(Mt)},e&&e.bookFiles&&(t.files?(p.keys=n,p.files=t.files):(p.keys=[],p.files={},t.FullPaths.forEach(function(N,B){N=N.replace(/^Root Entry[\/]/,""),p.keys.push(N),p.files[N]=t.FileIndex[B]}))),e&&e.bookVBA&&(s.vba.length>0?p.vbaraw=Yr(t,Os(s.vba[0]),!0):s.defaults&&s.defaults.bin===Nee&&(p.vbaraw=Yr(t,"xl/vbaProject.bin",!0))),p}function Ase(t,e){var r=e||{},n="Workbook",s=Yt.find(t,n);try{if(n="/!DataSpaces/Version",s=Yt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(vZ(s.content),n="/!DataSpaces/DataSpaceMap",s=Yt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=yZ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Yt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=EZ(s.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Yt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);bZ(s.content)}catch{}if(n="/EncryptionInfo",s=Yt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=SZ(s.content);if(n="/EncryptedPackage",s=Yt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Wy(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Rs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function wse(t,e){return Yt.find(t,"EncryptedPackage")?Ase(t,e):QD(t,e)}function Ise(t,e){var r,n=t,s=e||{};return s.type||(s.type=Kt&&Buffer.isBuffer(t)?"buffer":"base64"),r=Gk(n,s),Tse(r,s)}function tP(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return x1(t.slice(r),e);default:break e}return Zd.to_workbook(t,e)}function Cse(t,e){var r="",n=Wy(t,e);switch(e.type){case"base64":r=Rs(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=ml(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=xr(r)),e.type="binary",tP(r,e)}function kse(t,e){var r=t;return e.type=="base64"&&(r=Rs(r)),r=Xd.utils.decode(1200,r.slice(2),"str"),e.type="binary",tP(r,e)}function Dse(t){return t.match(/[^\x00-\x7F]/)?zu(t):t}function ug(t,e,r,n){return n?(r.type="string",Zd.to_workbook(t,r)):Zd.to_workbook(e,r)}function rp(t,e){wk();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return rp(new Uint8Array(t),(r=wn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Dc={},r.dateNF&&(Dc.dateNF=r.dateNF),r.type||(r.type=Kt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Kt?"buffer":"binary",n=vY(t),typeof Uint8Array<"u"&&!Kt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Dse(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return r=wn(r),r.type="array",rp(Ty(n),r)}switch((s=Wy(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return wse(Yt.read(n,r),r);break;case 9:if(s[1]<=8)return QD(n,r);break;case 60:return x1(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return sZ(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return rZ.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Ise(n,r):ug(t,n,r,i);case 239:return s[3]===60?x1(n,r):ug(t,n,r,i);case 255:if(s[1]===254)return kse(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return xd.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return xd.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return wS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return NZ.to_workbook(n,r);break;case 10:case 13:case 32:return Cse(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return eZ.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?wS.to_workbook(n,r):ug(t,n,r,i)}function Pse(t,e,r,n,s,i,a,o){var l=In(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!a||t[r])for(var h=e.s.c;h<=e.e.c;++h){var p=a?t[r][h]:t[n[h]+l];if(p===void 0||p.t===void 0){if(c===void 0)continue;i[h]!=null&&(f[i[h]]=c);continue}var v=p.v;switch(p.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(i[h]!=null){if(v==null)if(p.t=="e"&&v===null)f[i[h]]=null;else if(c!==void 0)f[i[h]]=c;else if(u&&v===null)f[i[h]]=null;else continue;else f[i[h]]=u&&(p.t!=="n"||p.t==="n"&&o.rawNumbers!==!1)?v:gi(p,v,o);v!=null&&(d=!1)}}return{row:f,isempty:d}}function b1(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=Hr(u);break;case"number":l=Hr(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(s=0);var d=In(l.s.r),f=[],h=[],p=0,v=0,g=Array.isArray(t),x=l.s.r,y=0,E={};g&&!t[x]&&(t[x]=[]);var I=c.skipHidden&&t["!cols"]||[],P=c.skipHidden&&t["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(I[y]||{}).hidden)switch(f[y]=ln(y),r=g?t[x][y]:t[f[y]+d],n){case 1:i[y]=y-l.s.c;break;case 2:i[y]=f[y];break;case 3:i[y]=c.header[y-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=gi(r,null,c),v=E[a]||0,!v)E[a]=1;else{do o=a+"_"+v++;while(E[o]);E[a]=v,E[o]=1}i[y]=o}for(x=l.s.r+s;x<=l.e.r;++x)if(!(P[x]||{}).hidden){var D=Pse(t,l,x,f,n,i,g,c);(D.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(h[p++]=D.row)}return h.length=p,h}var HS=/"/g;function Rse(t,e,r,n,s,i,a,o){for(var l=!0,c=[],u="",d=In(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var h=o.dense?(t[r]||[])[f]:t[n[f]+d];if(h==null)u="";else if(h.v!=null){l=!1,u=""+(o.rawNumbers&&h.t=="n"?h.v:gi(h,null,o));for(var p=0,v=0;p!==u.length;++p)if((v=u.charCodeAt(p))===s||v===i||v===34||o.forceQuotes){u='"'+u.replace(HS,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(l=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(HS,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(a)}function rP(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Hr(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",d=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(f[p]||{}).hidden||(d[p]=ln(p));for(var v=0,g=s.s.r;g<=s.e.r;++g)(h[g]||{}).hidden||(u=Rse(t,s,g,d,a,l,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((v++?o:"")+u)));return delete n.dense,r.join("")}function Fse(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=rP(t,e);return r}function Ose(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Hr(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=ln(o);for(var u=s.s.r;u<=s.e.r;++u)for(i=In(u),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function nP(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?ss(n.origin):n.origin;a=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=Hr(i["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),a==-1&&(a=d.e.r+1,u.e.r=a+e.length-1+s)}else a==-1&&(a=0,u.e.r=e.length-1+s);var f=n.header||[],h=0;e.forEach(function(v,g){Ma(v).forEach(function(x){(h=f.indexOf(x))==-1&&(f[h=f.length]=x);var y=v[x],E="z",I="",P=Rt({c:o+h,r:a+g+s});c=nf(i,P),y&&typeof y=="object"&&!(y instanceof Date)?i[P]=y:(typeof y=="number"?E="n":typeof y=="boolean"?E="b":typeof y=="string"?E="s":y instanceof Date?(E="d",n.cellDates||(E="n",y=ls(y)),I=n.dateNF||Mt[14]):y===null&&n.nullError&&(E="e",y=0),c?(c.t=E,c.v=y,delete c.w,delete c.R,I&&(c.z=I)):i[P]=c={t:E,v:y},I&&(c.z=I))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var p=In(a);if(s)for(h=0;h<f.length;++h)i[ln(h+o)+p]={t:"s",v:f[h]};return i["!ref"]=Jt(u),i}function Nse(t,e){return nP(null,t,e)}function nf(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=ss(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?nf(t,Rt(e)):nf(t,Rt({r:e,c:r||0}))}function Mse(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Ky(){return{SheetNames:[],Sheets:{}}}function qy(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(Ene(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Bse(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Mse(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Lse(t,e){return t.z=e,t}function sP(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Use(t,e,r){return sP(t,"#"+e,r)}function Vse(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function $se(t,e,r,n){for(var s=typeof e!="string"?e:Hr(e),i=typeof e=="string"?e:Jt(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=nf(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var jse={encode_col:ln,encode_row:In,encode_cell:Rt,encode_range:Jt,decode_col:Fy,decode_row:Ry,split_cell:ZY,decode_cell:ss,decode_range:iu,format_cell:gi,sheet_add_aoa:lD,sheet_add_json:nP,sheet_add_dom:JD,aoa_to_sheet:ou,json_to_sheet:Nse,table_to_sheet:ZD,table_to_book:sse,sheet_to_csv:rP,sheet_to_txt:Fse,sheet_to_json:b1,sheet_to_html:nse,sheet_to_formulae:Ose,sheet_to_row_object_array:b1,sheet_get_cell:nf,book_new:Ky,book_append_sheet:qy,book_set_sheet_visibility:Bse,cell_set_number_format:Lse,cell_set_hyperlink:sP,cell_set_internal_link:Use,cell_add_comment:Vse,sheet_set_array_formula:$se,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Hse={class:"admin-time-table"},Gse={class:"header"},zse={class:"header-actions"},Wse=["disabled"],Kse={class:"import-section"},qse={key:0,class:"import-preview"},Xse={class:"import-options"},Yse={class:"import-option-group"},Qse=["disabled"],Jse=["value"],Zse={class:"import-option-group"},eae=["disabled"],tae={class:"import-actions"},rae=["disabled"],nae={class:"content"},sae={key:0,class:"loading"},aae={key:1,class:"time-tables-container"},iae={key:0,class:"empty-state"},oae={key:1,class:"time-tables-list"},lae={class:"time-table-header"},cae={class:"time-table-info"},uae={class:"time-table-days"},dae={class:"time-table-actions"},fae=["onClick"],hae=["onClick"],pae={class:"time-table-schedule"},mae={class:"schedule-item-info"},gae={class:"item-name"},vae={class:"item-time"},xae={class:"schedule-item-type"},yae={class:"dialog-header"},Eae={class:"dialog-content"},_ae={class:"form-group"},bae={class:"form-group"},Sae={class:"days-checkboxes"},Tae=["value"],Aae={class:"form-group"},wae={class:"schedule-items"},Iae={class:"item-row"},Cae=["onUpdate:modelValue"],kae=["onUpdate:modelValue"],Dae=["onUpdate:modelValue"],Pae=["onUpdate:modelValue"],Rae=["onClick"],Fae={__name:"AdminTimeTable",setup(t){const{saveAppSettings:e}=ma(),r=fe(!0),n=fe(!1),s=fe([]),i=fe(!1),a=fe(-1),o=fe({name:"",days:[],schedule:[]}),l=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],c=fe(null),u=fe([]),d=fe([]),f=fe("overwrite"),h=fe(""),p=fe(""),v=be(()=>f.value==="overwrite"?h.value!=="":p.value.trim()!==""),g=()=>{const O=gr(o.value.name,{trim:!0,maxLength:100,removeDangerous:!0}),U=pn(O);if(!U.isSafe)return alert(`Security threat detected in time table name: ${U.threats.join(", ")}`),!1;if(o.value.name=O,!o.value.name.trim())return alert("Please enter a time table name"),!1;if(o.value.days.length===0)return alert("Please select at least one day"),!1;if(o.value.schedule.length===0)return alert("Please add at least one schedule item"),!1;for(let M=0;M<o.value.schedule.length;M++){const q=o.value.schedule[M],H=gr(q.name,{trim:!0,maxLength:50,removeDangerous:!0}),L=pn(H);if(!L.isSafe)return alert(`Security threat detected in schedule item ${M+1}: ${L.threats.join(", ")}`),!1;if(q.name=H,!q.name.trim())return alert(`Please enter a name for schedule item ${M+1}`),!1;if(!q.startTime||!q.endTime)return alert(`Please enter start and end times for ${q.name}`),!1;if(q.startTime>=q.endTime)return alert(`${q.name}: Start time must be before end time`),!1}return!0},x=O=>{const U=gr(O,{trim:!0,maxLength:100,removeDangerous:!0}),M=pn(U);return M.isSafe?U:(alert(`Security threat detected in import name: ${M.threats.join(", ")}`),null)};async function y(){try{console.log("Loading time tables..."),r.value=!0;const O=await $r(xt(ot,"app_settings","global"));if(O.exists()){const U=O.data();s.value=U.timeTables||[],console.log("Loaded time tables:",s.value)}else s.value=[],console.log("No time tables found, starting with empty array");r.value=!1}catch(O){console.error("Error loading time tables:",O),r.value=!1}}function E(){a.value=-1,o.value={name:"",days:[],schedule:[]},i.value=!0}function I(O){a.value=O,o.value=JSON.parse(JSON.stringify(s.value[O])),i.value=!0}function P(O){confirm("Are you sure you want to delete this time table?")&&s.value.splice(O,1)}function D(){o.value.schedule.push({name:"",type:"period",startTime:"",endTime:""})}function A(O){o.value.schedule.splice(O,1)}function _(){if(!g())return;if(!Is("saveTimeTable",10,6e4).allowed){alert("Too many save requests. Please wait before saving again.");return}a.value===-1?s.value.push(JSON.parse(JSON.stringify(o.value))):s.value[a.value]=JSON.parse(JSON.stringify(o.value)),b()}function b(){i.value=!1,a.value=-1,o.value={name:"",days:[],schedule:[]}}async function w(){try{if(!Is("saveAllTimeTables",5,3e5).allowed){alert("Too many save all requests. Please wait before saving again.");return}n.value=!0,console.log("Saving time tables:",s.value);const U=await $r(xt(ot,"app_settings","global")),q={...U.exists()?U.data():{},timeTables:s.value};await e(q),n.value=!1,console.log("Time tables saved successfully")}catch(O){console.error("Error saving time tables:",O),n.value=!1}}function C(O){return O.length===0?"No days selected":O.length===7?"Every day":O.length===5&&O.includes("monday")&&O.includes("friday")?"Weekdays":O.map(U=>{const M=l.find(q=>q.value===U);return M?M.label:U}).join(", ")}function T(O){if(!O)return"";const[U,M]=O.split(":"),q=parseInt(U),H=q>=12?"PM":"AM";return`${q===0?12:q>12?q-12:q}:${M} ${H}`}function k(){c.value&&c.value.click()}function N(O){const U=O.target.files[0];if(!U)return;const M=Df(U,{allowedTypes:["csv","excel"],maxSize:5*1024*1024,fieldName:"Time Table Import File"});if(!M.isValid){alert(M.error),O.target.value="";return}const q=pn(U.name);if(!q.isSafe){alert(`File name contains potentially dangerous content: ${q.threats.join(", ")}`),O.target.value="";return}const H=new FileReader;H.onload=L=>{try{let z=L.target.result,K;U.name.endsWith(".csv")?K=rp(z,{type:"binary"}):K=rp(z,{type:"binary"});const te=K.SheetNames[0],ge=K.Sheets[te],he=jse.sheet_to_json(ge,{defval:""}).map(Z=>{const Q={};return Object.entries(Z).forEach(([xe,X])=>{const W=gr(xe,{trim:!0,maxLength:50,removeDangerous:!0}),Y=gr(String(X),{trim:!0,maxLength:100,removeDangerous:!0});Q[W]=Y}),Q});u.value=he,d.value=he.length?Object.keys(he[0]):[]}catch(z){alert("Error parsing file. Please check the file format and try again."),console.error("File parsing error:",z)}},H.readAsBinaryString(U)}function B(){try{if(!Is("importTimeTable",3,3e5).allowed){alert("Too many import requests. Please wait before importing again.");return}const U=u.value.map(M=>{const q=M.name||M.Name||M.period||M.Period||M.item||M.Item||"Unknown",H=M.startTime||M["Start Time"]||M.start||M.Start||"08:00",L=M.endTime||M["End Time"]||M.end||M.End||"08:55",z=gr(q,{trim:!0,maxLength:50,removeDangerous:!0}),K=pn(z);if(!K.isSafe)return console.warn(`Security threat detected in imported item: ${K.threats.join(", ")}`),null;let te="period";const ge=M.type||M.Type||"",ie=z.toLowerCase();return ge.toLowerCase().includes("lunch")||ie.includes("lunch")?te="lunch":ge.toLowerCase().includes("break")||ie.includes("break")?te="break":(ge.toLowerCase().includes("other")||ie.includes("other"))&&(te="other"),{name:z,type:te,startTime:H,endTime:L}}).filter(M=>M&&M.name&&M.name!=="Unknown");if(U.length===0){alert("No valid schedule items found in the imported data. Please check your file format.");return}if(f.value==="overwrite"){if(h.value===""){alert("Please select a time table to overwrite");return}const M=parseInt(h.value);s.value[M]={...s.value[M],schedule:U}}else{const M=x(p.value);if(!M)return;const q={name:M,days:["monday","tuesday","wednesday","thursday","friday"],schedule:U};s.value.push(q)}u.value=[],d.value=[],f.value="overwrite",h.value="",p.value="",alert("Time table imported successfully!")}catch(O){console.error("Error importing time table:",O),alert("Error importing time table. Please check your file format and try again.")}}function R(){u.value=[],d.value=[],f.value="overwrite",h.value="",p.value=""}return tr(y),(O,U)=>(V(),j("div",Hse,[m("div",Gse,[U[7]||(U[7]=m("h1",null,"Time Table Management",-1)),m("div",zse,[m("button",{onClick:w,class:"btn btn-primary",disabled:n.value},ce(n.value?"Saving...":"Save Time Tables"),9,Wse),m("button",{onClick:E,class:"btn btn-secondary"}," Add Time Table ")])]),m("div",Kse,[m("button",{onClick:k,class:"btn btn-secondary"},"Import CSV/XLSX"),m("input",{ref_key:"fileInput",ref:c,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:N},null,544),U[8]||(U[8]=m("div",{class:"import-note"}," You can export from Google Sheets or Excel as CSV, or upload your Excel file directly. ",-1))]),u.value.length?(V(),j("div",qse,[U[13]||(U[13]=m("h3",null,"Preview Imported Time Table",-1)),m("table",null,[m("thead",null,[m("tr",null,[(V(!0),j(Ne,null,He(d.value,M=>(V(),j("th",{key:M},ce(M),1))),128))])]),m("tbody",null,[(V(!0),j(Ne,null,He(u.value,(M,q)=>(V(),j("tr",{key:q},[(V(!0),j(Ne,null,He(d.value,H=>(V(),j("td",{key:H},ce(M[H]),1))),128))]))),128))])]),m("div",Xse,[U[12]||(U[12]=m("h4",null,"Import Options",-1)),m("div",Yse,[m("label",null,[je(m("input",{type:"radio","onUpdate:modelValue":U[0]||(U[0]=M=>f.value=M),value:"overwrite"},null,512),[[oa,f.value]]),U[9]||(U[9]=Ve(" Overwrite existing time table: "))]),je(m("select",{"onUpdate:modelValue":U[1]||(U[1]=M=>h.value=M),disabled:f.value!=="overwrite",class:"form-select"},[U[10]||(U[10]=m("option",{value:""},"Select a time table...",-1)),(V(!0),j(Ne,null,He(s.value,(M,q)=>(V(),j("option",{key:q,value:q},ce(M.name),9,Jse))),128))],8,Qse),[[vr,h.value]])]),m("div",Zse,[m("label",null,[je(m("input",{type:"radio","onUpdate:modelValue":U[2]||(U[2]=M=>f.value=M),value:"create"},null,512),[[oa,f.value]]),U[11]||(U[11]=Ve(" Create new time table: "))]),je(m("input",{"onUpdate:modelValue":U[3]||(U[3]=M=>p.value=M),type:"text",placeholder:"Enter time table name...",disabled:f.value!=="create",class:"form-input"},null,8,eae),[[Ct,p.value]])])]),m("div",tae,[m("button",{onClick:B,class:"btn btn-primary",disabled:!v.value},ce(f.value==="overwrite"?"Overwrite Time Table":"Create New Time Table"),9,rae),m("button",{onClick:R,class:"btn btn-secondary"},"Cancel")])])):Oe("",!0),m("div",nae,[r.value?(V(),j("div",sae," Loading time tables... ")):(V(),j("div",aae,[s.value.length===0?(V(),j("div",iae,[U[14]||(U[14]=m("h3",null,"No Time Tables Created",-1)),U[15]||(U[15]=m("p",null,"Create your first time table to get started.",-1)),m("button",{onClick:E,class:"btn btn-primary"},"Create Time Table")])):(V(),j("div",oae,[(V(!0),j(Ne,null,He(s.value,(M,q)=>(V(),j("div",{key:q,class:"time-table-card"},[m("div",lae,[m("div",cae,[m("h3",null,ce(M.name),1),m("p",uae,ce(C(M.days)),1)]),m("div",dae,[m("button",{onClick:H=>I(q),class:"btn btn-small btn-secondary"}," Edit ",8,fae),m("button",{onClick:H=>P(q),class:"btn btn-small btn-danger"}," Delete ",8,hae)])]),m("div",pae,[(V(!0),j(Ne,null,He(M.schedule,(H,L)=>(V(),j("div",{key:L,class:"schedule-item"},[m("div",mae,[m("span",gae,ce(H.name),1),m("span",vae,ce(T(H.startTime))+" - "+ce(T(H.endTime)),1)]),m("div",xae,[m("span",{class:ut(["type-badge",H.type])},ce(H.type),3)])]))),128))])]))),128))]))]))]),i.value?(V(),j("div",{key:1,class:"edit-dialog-overlay",onClick:b},[m("div",{class:"edit-dialog",onClick:U[6]||(U[6]=Ds(()=>{},["stop"]))},[m("div",yae,[m("h2",null,ce(a.value===-1?"Create Time Table":"Edit Time Table"),1),m("button",{onClick:b,class:"btn-close"},"")]),m("div",Eae,[m("div",_ae,[U[16]||(U[16]=m("label",{for:"timeTableName"},"Time Table Name",-1)),je(m("input",{id:"timeTableName","onUpdate:modelValue":U[4]||(U[4]=M=>o.value.name=M),type:"text",placeholder:"e.g., Regular Schedule, Rally Day, Minimum Day",class:"form-input"},null,512),[[Ct,o.value.name]])]),m("div",bae,[U[17]||(U[17]=m("label",null,"Days This Schedule Applies",-1)),m("div",Sae,[(V(),j(Ne,null,He(l,M=>m("label",{key:M.value,class:"day-checkbox"},[je(m("input",{type:"checkbox",value:M.value,"onUpdate:modelValue":U[5]||(U[5]=q=>o.value.days=q)},null,8,Tae),[[St,o.value.days]]),Ve(" "+ce(M.label),1)])),64))])]),m("div",Aae,[U[20]||(U[20]=m("label",null,"Schedule Items",-1)),m("div",wae,[(V(!0),j(Ne,null,He(o.value.schedule,(M,q)=>(V(),j("div",{key:q,class:"schedule-item-edit"},[m("div",Iae,[je(m("input",{"onUpdate:modelValue":H=>M.name=H,type:"text",placeholder:"Period 1, Lunch, Break, etc.",class:"form-input item-name-input"},null,8,Cae),[[Ct,M.name]]),je(m("select",{"onUpdate:modelValue":H=>M.type=H,class:"form-select item-type-select"},U[18]||(U[18]=[m("option",{value:"period"},"Period",-1),m("option",{value:"break"},"Break",-1),m("option",{value:"lunch"},"Lunch",-1),m("option",{value:"other"},"Other",-1)]),8,kae),[[vr,M.type]]),je(m("input",{"onUpdate:modelValue":H=>M.startTime=H,type:"time",class:"form-input time-input"},null,8,Dae),[[Ct,M.startTime]]),U[19]||(U[19]=m("span",{class:"time-separator"},"to",-1)),je(m("input",{"onUpdate:modelValue":H=>M.endTime=H,type:"time",class:"form-input time-input"},null,8,Pae),[[Ct,M.endTime]]),m("button",{onClick:H=>A(q),class:"btn btn-small btn-danger"}," Delete ",8,Rae)])]))),128)),m("button",{onClick:D,class:"btn btn-secondary btn-add-item"}," Add Schedule Item ")])])]),m("div",{class:"dialog-actions"},[m("button",{onClick:b,class:"btn btn-secondary"},"Cancel"),m("button",{onClick:_,class:"btn btn-primary"},"Save Time Table")])])])):Oe("",!0)]))}},aP=At(Fae,[["__scopeId","data-v-168ca22a"]]);function Oae(){const t=fe({}),e=fe(!1);async function r(){e.value=!0;try{const d=await fr(Ht(ot,"aideSchedules")),f={};d.forEach(h=>{f[h.id]=h.data()}),t.value=f}catch(d){console.error("Error loading aide schedules:",d),t.value={}}finally{e.value=!1}}async function n(d){e.value=!0;try{const f=await $r(xt(ot,"aideSchedules",d));f.exists()?t.value[d]=f.data():t.value[d]={schedule:{},directAssignment:[]}}catch(f){console.error("Error loading aide schedule:",f),t.value[d]={schedule:{},directAssignment:[]}}finally{e.value=!1}}async function s(d,f,h=!0){try{const p=JSON.parse(JSON.stringify(f));h?await br(xt(ot,"aideSchedules",d),p,{merge:!0}):await br(xt(ot,"aideSchedules",d),p),t.value[d]=p}catch(p){throw console.error("Error saving aide schedule:",p),p}}async function i(){try{const d=Object.entries(t.value);for(const[f,h]of d){const p=JSON.parse(JSON.stringify(h));await br(xt(ot,"aideSchedules",f),p,{merge:!0})}}catch(d){throw console.error("Error saving all aide schedules:",d),d}}function a(d,f){const h=[];return Object.entries(t.value).forEach(([p,v])=>{v.schedule&&v.schedule[f]&&(Array.isArray(v.schedule[f])?v.schedule[f]:[v.schedule[f]]).includes(d)&&h.push(p)}),h}function o(d){var h;const f=(h=t.value[d])==null?void 0:h.directAssignment;return Array.isArray(f)?f.length>0?f[0]:null:f||null}function l(d){return Object.keys(t.value).find(h=>{var v;const p=(v=t.value[h])==null?void 0:v.directAssignment;return Array.isArray(p)?p.includes(d):p===d})||null}function c(d,f,h){const p=[],v=t.value[d];return v&&((Array.isArray(v.directAssignment)?v.directAssignment:v.directAssignment?[v.directAssignment]:[]).forEach(x=>{if(x){const y=f.find(E=>E.id===x);y&&p.push({...y,assignmentType:"direct"})}}),Object.entries(v.schedule||{}).forEach(([x,y])=>{y&&(Array.isArray(y)?y:[y]).forEach(I=>{I&&f.forEach(P=>{if(P.schedule&&P.schedule[x]===I){const D=p.findIndex(A=>A.id===P.id);D===-1?p.push({...P,assignmentType:"class",period:x,teacherId:I}):(p[D].assignmentType="both",p[D].period=x,p[D].teacherId=I)}})})})),p}function u(d,f,h,p){if(!d||!f||!h||!p)return!1;const v=h.find(I=>I.id===f);if(!v)return!1;const g=t.value[d];if(!g)return!1;if((Array.isArray(g.directAssignment)?g.directAssignment:g.directAssignment?[g.directAssignment]:[]).includes(f))return!0;if(!v.schedule)return!1;const y=g.schedule||{};return Object.entries(v.schedule).some(([I,P])=>{const D=y[I];return D?(Array.isArray(D)?D:[D]).includes(P):!1})}return{aideSchedule:be(()=>t.value),loading:be(()=>e.value),loadAideSchedules:r,loadAideSchedule:n,saveAideSchedule:s,saveAllAideSchedules:i,getAidesForTeacher:a,getDirectStudentForAide:o,getAideForStudent:l,getStudentsForAide:c,shouldAideSeeStudent:u}}var Nae={exports:{}};const Mae=_y(x8);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function GS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ba(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GS(Object(r),!0).forEach(function(n){Bae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eh(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?eh=function(e){return typeof e}:eh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}function Bae(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zs(){return zs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zs.apply(this,arguments)}function Lae(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Uae(t,e){if(t==null)return{};var r=Lae(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vae(t){return $ae(t)||jae(t)||Hae(t)||Gae()}function $ae(t){if(Array.isArray(t))return S1(t)}function jae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hae(t,e){if(t){if(typeof t=="string")return S1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S1(t,e)}}function S1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zae="1.14.0";function ii(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var bi=ii(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Lf=ii(/Edge/i),zS=ii(/firefox/i),bd=ii(/safari/i)&&!ii(/chrome/i)&&!ii(/android/i),iP=ii(/iP(ad|od|hone)/i),Wae=ii(/chrome/i)&&ii(/android/i),oP={capture:!1,passive:!1};function $t(t,e,r){t.addEventListener(e,r,!bi&&oP)}function Vt(t,e,r){t.removeEventListener(e,r,!bi&&oP)}function np(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Kae(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ta(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&np(t,e):np(t,e))||n&&t===r)return t;if(t===r)break}while(t=Kae(t))}return null}var WS=/\s+/g;function Dr(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(WS," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(WS," ")}}function ft(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Zo(t,e){var r="";if(typeof t=="string")r=t;else do{var n=ft(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function lP(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function Ra(){var t=document.scrollingElement;return t||document.documentElement}function Ir(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,o,l,c,u,d;if(t!==window&&t.parentNode&&t!==Ra()?(i=t.getBoundingClientRect(),a=i.top,o=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,o=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!bi))do if(s&&s.getBoundingClientRect&&(ft(s,"transform")!=="none"||r&&ft(s,"position")!=="static")){var f=s.getBoundingClientRect();a-=f.top+parseInt(ft(s,"border-top-width")),o-=f.left+parseInt(ft(s,"border-left-width")),l=a+i.height,c=o+i.width;break}while(s=s.parentNode);if(n&&t!==window){var h=Zo(s||t),p=h&&h.a,v=h&&h.d;h&&(a/=v,o/=p,d/=p,u/=v,l=a+u,c=o+d)}return{top:a,left:o,bottom:l,right:c,width:d,height:u}}}function KS(t,e,r){for(var n=Zi(t,!0),s=Ir(t)[e];n;){var i=Ir(n)[r],a=void 0;if(a=s>=i,!a)return n;if(n===Ra())break;n=Zi(n,!1)}return!1}function Xc(t,e,r,n){for(var s=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==bt.ghost&&(n||a[i]!==bt.dragged)&&ta(a[i],r.draggable,t,!1)){if(s===e)return a[i];s++}i++}return null}function Xy(t,e){for(var r=t.lastElementChild;r&&(r===bt.ghost||ft(r,"display")==="none"||e&&!np(r,e));)r=r.previousElementSibling;return r||null}function Lr(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==bt.clone&&(!e||np(t,e))&&r++;return r}function qS(t){var e=0,r=0,n=Ra();if(t)do{var s=Zo(t),i=s.a,a=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,r]}function qae(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function Zi(t,e){if(!t||!t.getBoundingClientRect)return Ra();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=ft(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Ra();if(n||e)return r;n=!0}}while(r=r.parentNode);return Ra()}function Xae(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function dg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Sd;function cP(t,e){return function(){if(!Sd){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),Sd=setTimeout(function(){Sd=void 0},e)}}}function Yae(){clearTimeout(Sd),Sd=void 0}function uP(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Yy(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function XS(t,e){ft(t,"position","absolute"),ft(t,"top",e.top),ft(t,"left",e.left),ft(t,"width",e.width),ft(t,"height",e.height)}function fg(t){ft(t,"position",""),ft(t,"top",""),ft(t,"left",""),ft(t,"width",""),ft(t,"height","")}var Un="Sortable"+new Date().getTime();function Qae(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(ft(s,"display")==="none"||s===bt.ghost)){t.push({target:s,rect:Ir(s)});var i=Ba({},t[t.length-1].rect);if(s.thisAnimationDuration){var a=Zo(s,!0);a&&(i.top-=a.f,i.left-=a.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(qae(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,a=0;t.forEach(function(o){var l=0,c=o.target,u=c.fromRect,d=Ir(c),f=c.prevFromRect,h=c.prevToRect,p=o.rect,v=Zo(c,!0);v&&(d.top-=v.f,d.left-=v.e),c.toRect=d,c.thisAnimationDuration&&dg(f,d)&&!dg(u,d)&&(p.top-d.top)/(p.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Zae(p,f,h,s.options)),dg(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,p,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,a){if(a){ft(n,"transition",""),ft(n,"transform","");var o=Zo(this.el),l=o&&o.a,c=o&&o.d,u=(s.left-i.left)/(l||1),d=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!d,ft(n,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Jae(n),ft(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),ft(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){ft(n,"transition",""),ft(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function Jae(t){return t.offsetWidth}function Zae(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Yl=[],hg={initializeByDefault:!0},Uf={mount:function(e){for(var r in hg)hg.hasOwnProperty(r)&&!(r in e)&&(e[r]=hg[r]);Yl.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Yl.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Yl.forEach(function(a){r[a.pluginName]&&(r[a.pluginName][i]&&r[a.pluginName][i](Ba({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][e]&&r[a.pluginName][e](Ba({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Yl.forEach(function(o){var l=o.pluginName;if(!(!e.options[l]&&!o.initializeByDefault)){var c=new o(e,r,e.options);c.sortable=e,c.options=e.options,e[l]=c,zs(n,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,r){var n={};return Yl.forEach(function(s){typeof s.eventProperties=="function"&&zs(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Yl.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function Wu(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,a=t.toEl,o=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||r&&r[Un],!!e){var v,g=e.options,x="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!bi&&!Lf?v=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(n,!0,!0)),v.to=a||r,v.from=o||r,v.item=s||r,v.clone=i,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=d,v.originalEvent=f,v.pullMode=h?h.lastPutMode:void 0;var y=Ba(Ba({},p),Uf.getEventProperties(n,e));for(var E in y)v[E]=y[E];r&&r.dispatchEvent(v),g[x]&&g[x].call(e,v)}}var eie=["evt"],us=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=Uae(n,eie);Uf.pluginEvent.bind(bt)(e,r,Ba({dragEl:et,parentEl:Nr,ghostEl:Nt,rootEl:Tr,nextEl:Mo,lastDownEl:th,cloneEl:Br,cloneHidden:Xi,dragStarted:Ku,putSortable:xn,activeSortable:bt.active,originalEvent:s,oldIndex:fc,oldDraggableIndex:Td,newIndex:bs,newDraggableIndex:$i,hideGhostForTarget:pP,unhideGhostForTarget:mP,cloneNowHidden:function(){Xi=!0},cloneNowShown:function(){Xi=!1},dispatchSortableEvent:function(o){Yn({sortable:r,name:o,originalEvent:s})}},i))};function Yn(t){Wu(Ba({putSortable:xn,cloneEl:Br,targetEl:et,rootEl:Tr,oldIndex:fc,oldDraggableIndex:Td,newIndex:bs,newDraggableIndex:$i},t))}var et,Nr,Nt,Tr,Mo,th,Br,Xi,fc,bs,Td,$i,I0,xn,lc=!1,sp=!1,ap=[],Ro,Zs,pg,mg,YS,QS,Ku,Ql,Ad,wd=!1,C0=!1,rh,Fn,gg=[],T1=!1,ip=[],um=typeof document<"u",k0=iP,JS=Lf||bi?"cssFloat":"float",tie=um&&!Wae&&!iP&&"draggable"in document.createElement("div"),dP=function(){if(um){if(bi)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fP=function(e,r){var n=ft(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Xc(e,0,r),a=Xc(e,1,r),o=i&&ft(i),l=a&&ft(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Ir(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ir(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var d=o.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||c>=s&&n[JS]==="none"||a&&n[JS]==="none"&&c+u>s)?"vertical":"horizontal"},rie=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===o||i===l||s+a/2===o+c/2},nie=function(e,r){var n;return ap.some(function(s){var i=s[Un].options.emptyInsertThreshold;if(!(!i||Xy(s))){var a=Ir(s),o=e>=a.left-i&&e<=a.right+i,l=r>=a.top-i&&r<=a.bottom+i;if(o&&l)return n=s}}),n},hP=function(e){function r(i,a){return function(o,l,c,u){var d=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,c,u),a)(o,l,c,u);var f=(a?o:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},s=e.group;(!s||eh(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},pP=function(){!dP&&Nt&&ft(Nt,"display","none")},mP=function(){!dP&&Nt&&ft(Nt,"display","")};um&&document.addEventListener("click",function(t){if(sp)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),sp=!1,!1},!0);var Fo=function(e){if(et){e=e.touches?e.touches[0]:e;var r=nie(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Un]._onDragOver(n)}}},sie=function(e){et&&et.parentNode[Un]._isOutsideThisEl(e.target)};function bt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=zs({},e),t[Un]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:bt.supportPointer!==!1&&"PointerEvent"in window&&!bd,emptyInsertThreshold:5};Uf.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);hP(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:tie,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?$t(t,"pointerdown",this._onTapStart):($t(t,"mousedown",this._onTapStart),$t(t,"touchstart",this._onTapStart)),this.nativeDraggable&&($t(t,"dragover",this),$t(t,"dragenter",this)),ap.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),zs(this,Qae())}bt.prototype={constructor:bt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ql=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,et):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(fie(n),!et&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&bd&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ta(l,s.draggable,n,!1),!(l&&l.animated)&&th!==l)){if(fc=Lr(l),Td=Lr(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Yn({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),us("filter",r,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=ta(c,d.trim(),n,!1),d)return Yn({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),us("filter",r,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}s.handle&&!ta(c,s.handle,n,!1)||this._prepareDragStart(e,o,l)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,a=s.options,o=i.ownerDocument,l;if(n&&!et&&n.parentNode===i){var c=Ir(n);if(Tr=i,et=n,Nr=et.parentNode,Mo=et.nextSibling,th=n,I0=a.group,bt.dragged=et,Ro={target:et,clientX:(r||e).clientX,clientY:(r||e).clientY},YS=Ro.clientX-c.left,QS=Ro.clientY-c.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,et.style["will-change"]="all",l=function(){if(us("delayEnded",s,{evt:e}),bt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!zS&&s.nativeDraggable&&(et.draggable=!0),s._triggerDragStart(e,r),Yn({sortable:s,name:"choose",originalEvent:e}),Dr(et,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){lP(et,u.trim(),vg)}),$t(o,"dragover",Fo),$t(o,"mousemove",Fo),$t(o,"touchmove",Fo),$t(o,"mouseup",s._onDrop),$t(o,"touchend",s._onDrop),$t(o,"touchcancel",s._onDrop),zS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,et.draggable=!0),us("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Lf||bi))){if(bt.eventCanceled){this._onDrop();return}$t(o,"mouseup",s._disableDelayedDrag),$t(o,"touchend",s._disableDelayedDrag),$t(o,"touchcancel",s._disableDelayedDrag),$t(o,"mousemove",s._delayedDragTouchMoveHandler),$t(o,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&$t(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){et&&vg(et),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Vt(e,"mouseup",this._disableDelayedDrag),Vt(e,"touchend",this._disableDelayedDrag),Vt(e,"touchcancel",this._disableDelayedDrag),Vt(e,"mousemove",this._delayedDragTouchMoveHandler),Vt(e,"touchmove",this._delayedDragTouchMoveHandler),Vt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?$t(document,"pointermove",this._onTouchMove):r?$t(document,"touchmove",this._onTouchMove):$t(document,"mousemove",this._onTouchMove):($t(et,"dragend",this),$t(Tr,"dragstart",this._onDragStart));try{document.selection?nh(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(lc=!1,Tr&&et){us("dragStarted",this,{evt:r}),this.nativeDraggable&&$t(document,"dragover",sie);var n=this.options;!e&&Dr(et,n.dragClass,!1),Dr(et,n.ghostClass,!0),bt.active=this,e&&this._appendGhost(),Yn({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(Zs){this._lastX=Zs.clientX,this._lastY=Zs.clientY,pP();for(var e=document.elementFromPoint(Zs.clientX,Zs.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Zs.clientX,Zs.clientY),e!==r);)r=e;if(et.parentNode[Un]._isOutsideThisEl(e),r)do{if(r[Un]){var n=void 0;if(n=r[Un]._onDragOver({clientX:Zs.clientX,clientY:Zs.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=r.parentNode);mP()}},_onTouchMove:function(e){if(Ro){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,a=Nt&&Zo(Nt,!0),o=Nt&&a&&a.a,l=Nt&&a&&a.d,c=k0&&Fn&&qS(Fn),u=(i.clientX-Ro.clientX+s.x)/(o||1)+(c?c[0]-gg[0]:0)/(o||1),d=(i.clientY-Ro.clientY+s.y)/(l||1)+(c?c[1]-gg[1]:0)/(l||1);if(!bt.active&&!lc){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Nt){a?(a.e+=u-(pg||0),a.f+=d-(mg||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ft(Nt,"webkitTransform",f),ft(Nt,"mozTransform",f),ft(Nt,"msTransform",f),ft(Nt,"transform",f),pg=u,mg=d,Zs=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Nt){var e=this.options.fallbackOnBody?document.body:Tr,r=Ir(et,!0,k0,!0,e),n=this.options;if(k0){for(Fn=e;ft(Fn,"position")==="static"&&ft(Fn,"transform")==="none"&&Fn!==document;)Fn=Fn.parentNode;Fn!==document.body&&Fn!==document.documentElement?(Fn===document&&(Fn=Ra()),r.top+=Fn.scrollTop,r.left+=Fn.scrollLeft):Fn=Ra(),gg=qS(Fn)}Nt=et.cloneNode(!0),Dr(Nt,n.ghostClass,!1),Dr(Nt,n.fallbackClass,!0),Dr(Nt,n.dragClass,!0),ft(Nt,"transition",""),ft(Nt,"transform",""),ft(Nt,"box-sizing","border-box"),ft(Nt,"margin",0),ft(Nt,"top",r.top),ft(Nt,"left",r.left),ft(Nt,"width",r.width),ft(Nt,"height",r.height),ft(Nt,"opacity","0.8"),ft(Nt,"position",k0?"absolute":"fixed"),ft(Nt,"zIndex","100000"),ft(Nt,"pointerEvents","none"),bt.ghost=Nt,e.appendChild(Nt),ft(Nt,"transform-origin",YS/parseInt(Nt.style.width)*100+"% "+QS/parseInt(Nt.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(us("dragStart",this,{evt:e}),bt.eventCanceled){this._onDrop();return}us("setupClone",this),bt.eventCanceled||(Br=Yy(et),Br.draggable=!1,Br.style["will-change"]="",this._hideClone(),Dr(Br,this.options.chosenClass,!1),bt.clone=Br),n.cloneId=nh(function(){us("clone",n),!bt.eventCanceled&&(n.options.removeCloneOnHide||Tr.insertBefore(Br,et),n._hideClone(),Yn({sortable:n,name:"clone"}))}),!r&&Dr(et,i.dragClass,!0),r?(sp=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Vt(document,"mouseup",n._onDrop),Vt(document,"touchend",n._onDrop),Vt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,et)),$t(document,"drop",n),ft(et,"transform","translateZ(0)")),lc=!0,n._dragStartId=nh(n._dragStarted.bind(n,r,e)),$t(document,"selectstart",n),Ku=!0,bd&&ft(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,a,o=this.options,l=o.group,c=bt.active,u=I0===l,d=o.sort,f=xn||c,h,p=this,v=!1;if(T1)return;function g(U,M){us(U,p,Ba({evt:e,isOwner:u,axis:h?"vertical":"horizontal",revert:a,dragRect:s,targetRect:i,canSort:d,fromSortable:f,target:n,completed:y,onMove:function(H,L){return D0(Tr,r,et,s,H,Ir(H),e,L)},changed:E},M))}function x(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function y(U){return g("dragOverCompleted",{insertion:U}),U&&(u?c._hideClone():c._showClone(p),p!==f&&(Dr(et,xn?xn.options.ghostClass:c.options.ghostClass,!1),Dr(et,o.ghostClass,!0)),xn!==p&&p!==bt.active?xn=p:p===bt.active&&xn&&(xn=null),f===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===et&&!et.animated||n===r&&!n.animated)&&(Ql=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(et.parentNode[Un]._isOutsideThisEl(e.target),!U&&Fo(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function E(){bs=Lr(et),$i=Lr(et,o.draggable),Yn({sortable:p,name:"change",toEl:r,newIndex:bs,newDraggableIndex:$i,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=ta(n,o.draggable,r,!0),g("dragOver"),bt.eventCanceled)return v;if(et.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return y(!1);if(sp=!1,c&&!o.disabled&&(u?d||(a=Nr!==Tr):xn===this||(this.lastPutMode=I0.checkPull(this,c,et,e))&&l.checkPut(this,c,et,e))){if(h=this._getDirection(e,n)==="vertical",s=Ir(et),g("dragOverValid"),bt.eventCanceled)return v;if(a)return Nr=Tr,x(),this._hideClone(),g("revert"),bt.eventCanceled||(Mo?Tr.insertBefore(et,Mo):Tr.appendChild(et)),y(!0);var I=Xy(r,o.draggable);if(!I||lie(e,h,this)&&!I.animated){if(I===et)return y(!1);if(I&&r===e.target&&(n=I),n&&(i=Ir(n)),D0(Tr,r,et,s,n,i,e,!!n)!==!1)return x(),r.appendChild(et),Nr=r,E(),y(!0)}else if(I&&oie(e,h,this)){var P=Xc(r,0,o,!0);if(P===et)return y(!1);if(n=P,i=Ir(n),D0(Tr,r,et,s,n,i,e,!1)!==!1)return x(),r.insertBefore(et,P),Nr=r,E(),y(!0)}else if(n.parentNode===r){i=Ir(n);var D=0,A,_=et.parentNode!==r,b=!rie(et.animated&&et.toRect||s,n.animated&&n.toRect||i,h),w=h?"top":"left",C=KS(n,"top","top")||KS(et,"top","top"),T=C?C.scrollTop:void 0;Ql!==n&&(A=i[w],wd=!1,C0=!b&&o.invertSwap||_),D=cie(e,n,i,h,b?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,C0,Ql===n);var k;if(D!==0){var N=Lr(et);do N-=D,k=Nr.children[N];while(k&&(ft(k,"display")==="none"||k===Nt))}if(D===0||k===n)return y(!1);Ql=n,Ad=D;var B=n.nextElementSibling,R=!1;R=D===1;var O=D0(Tr,r,et,s,n,i,e,R);if(O!==!1)return(O===1||O===-1)&&(R=O===1),T1=!0,setTimeout(iie,30),x(),R&&!B?r.appendChild(et):n.parentNode.insertBefore(et,R?B:n),C&&uP(C,0,T-C.scrollTop),Nr=et.parentNode,A!==void 0&&!C0&&(rh=Math.abs(A-Ir(n)[w])),E(),y(!0)}if(r.contains(et))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Vt(document,"mousemove",this._onTouchMove),Vt(document,"touchmove",this._onTouchMove),Vt(document,"pointermove",this._onTouchMove),Vt(document,"dragover",Fo),Vt(document,"mousemove",Fo),Vt(document,"touchmove",Fo)},_offUpEvents:function(){var e=this.el.ownerDocument;Vt(e,"mouseup",this._onDrop),Vt(e,"touchend",this._onDrop),Vt(e,"pointerup",this._onDrop),Vt(e,"touchcancel",this._onDrop),Vt(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(bs=Lr(et),$i=Lr(et,n.draggable),us("drop",this,{evt:e}),Nr=et&&et.parentNode,bs=Lr(et),$i=Lr(et,n.draggable),bt.eventCanceled){this._nulling();return}lc=!1,C0=!1,wd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),A1(this.cloneId),A1(this._dragStartId),this.nativeDraggable&&(Vt(document,"drop",this),Vt(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),bd&&ft(document.body,"user-select",""),ft(et,"transform",""),e&&(Ku&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Nt&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),(Tr===Nr||xn&&xn.lastPutMode!=="clone")&&Br&&Br.parentNode&&Br.parentNode.removeChild(Br),et&&(this.nativeDraggable&&Vt(et,"dragend",this),vg(et),et.style["will-change"]="",Ku&&!lc&&Dr(et,xn?xn.options.ghostClass:this.options.ghostClass,!1),Dr(et,this.options.chosenClass,!1),Yn({sortable:this,name:"unchoose",toEl:Nr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Tr!==Nr?(bs>=0&&(Yn({rootEl:Nr,name:"add",toEl:Nr,fromEl:Tr,originalEvent:e}),Yn({sortable:this,name:"remove",toEl:Nr,originalEvent:e}),Yn({rootEl:Nr,name:"sort",toEl:Nr,fromEl:Tr,originalEvent:e}),Yn({sortable:this,name:"sort",toEl:Nr,originalEvent:e})),xn&&xn.save()):bs!==fc&&bs>=0&&(Yn({sortable:this,name:"update",toEl:Nr,originalEvent:e}),Yn({sortable:this,name:"sort",toEl:Nr,originalEvent:e})),bt.active&&((bs==null||bs===-1)&&(bs=fc,$i=Td),Yn({sortable:this,name:"end",toEl:Nr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){us("nulling",this),Tr=et=Nr=Nt=Mo=Br=th=Xi=Ro=Zs=Ku=bs=$i=fc=Td=Ql=Ad=xn=I0=bt.dragged=bt.ghost=bt.clone=bt.active=null,ip.forEach(function(e){e.checked=!0}),ip.length=pg=mg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":et&&(this._onDragOver(e),aie(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,a=this.options;s<i;s++)r=n[s],ta(r,a.draggable,this.el,!1)&&e.push(r.getAttribute(a.dataIdAttr)||die(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,a){var o=s.children[a];ta(o,this.options.draggable,s,!1)&&(n[i]=o)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return ta(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=Uf.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&hP(n)},destroy:function(){us("destroy",this);var e=this.el;e[Un]=null,Vt(e,"mousedown",this._onTapStart),Vt(e,"touchstart",this._onTapStart),Vt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Vt(e,"dragover",this),Vt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ap.splice(ap.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Xi){if(us("hideClone",this),bt.eventCanceled)return;ft(Br,"display","none"),this.options.removeCloneOnHide&&Br.parentNode&&Br.parentNode.removeChild(Br),Xi=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Xi){if(us("showClone",this),bt.eventCanceled)return;et.parentNode==Tr&&!this.options.group.revertClone?Tr.insertBefore(Br,et):Mo?Tr.insertBefore(Br,Mo):Tr.appendChild(Br),this.options.group.revertClone&&this.animate(et,Br),ft(Br,"display",""),Xi=!1}}};function aie(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function D0(t,e,r,n,s,i,a,o){var l,c=t[Un],u=c.options.onMove,d;return window.CustomEvent&&!bi&&!Lf?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=r,l.draggedRect=n,l.related=s||e,l.relatedRect=i||Ir(e),l.willInsertAfter=o,l.originalEvent=a,t.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function vg(t){t.draggable=!1}function iie(){T1=!1}function oie(t,e,r){var n=Ir(Xc(r.el,0,r.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function lie(t,e,r){var n=Ir(Xy(r.el,r.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function cie(t,e,r,n,s,i,a,o){var l=n?t.clientY:t.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,f=!1;if(!a){if(o&&rh<c*s){if(!wd&&(Ad===1?l>u+c*i/2:l<d-c*i/2)&&(wd=!0),wd)f=!0;else if(Ad===1?l<u+rh:l>d-rh)return-Ad}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return uie(e)}return f=f||a,f&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function uie(t){return Lr(et)<Lr(t)?1:-1}function die(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function fie(t){ip.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&ip.push(n)}}function nh(t){return setTimeout(t,0)}function A1(t){return clearTimeout(t)}um&&$t(document,"touchmove",function(t){(bt.active||lc)&&t.cancelable&&t.preventDefault()});bt.utils={on:$t,off:Vt,css:ft,find:lP,is:function(e,r){return!!ta(e,r,e,!1)},extend:Xae,throttle:cP,closest:ta,toggleClass:Dr,clone:Yy,index:Lr,nextTick:nh,cancelNextTick:A1,detectDirection:fP,getChild:Xc};bt.get=function(t){return t[Un]};bt.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(bt.utils=Ba(Ba({},bt.utils),n.utils)),Uf.mount(n)})};bt.create=function(t,e){return new bt(t,e)};bt.version=zae;var Xr=[],qu,w1,I1=!1,xg,yg,op,Xu;function hie(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?$t(document,"dragover",this._handleAutoScroll):this.options.supportPointer?$t(document,"pointermove",this._handleFallbackAutoScroll):n.touches?$t(document,"touchmove",this._handleFallbackAutoScroll):$t(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Vt(document,"dragover",this._handleAutoScroll):(Vt(document,"pointermove",this._handleFallbackAutoScroll),Vt(document,"touchmove",this._handleFallbackAutoScroll),Vt(document,"mousemove",this._handleFallbackAutoScroll)),ZS(),sh(),Yae()},nulling:function(){op=w1=qu=I1=Xu=xg=yg=null,Xr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,a);if(op=r,n||this.options.forceAutoScrollFallback||Lf||bi||bd){Eg(r,this.options,o,n);var l=Zi(o,!0);I1&&(!Xu||i!==xg||a!==yg)&&(Xu&&ZS(),Xu=setInterval(function(){var c=Zi(document.elementFromPoint(i,a),!0);c!==l&&(l=c,sh()),Eg(r,s.options,c,n)},10),xg=i,yg=a)}else{if(!this.options.bubbleScroll||Zi(o,!0)===Ra()){sh();return}Eg(r,this.options,Zi(o,!1),!1)}}},zs(t,{pluginName:"scroll",initializeByDefault:!0})}function sh(){Xr.forEach(function(t){clearInterval(t.pid)}),Xr=[]}function ZS(){clearInterval(Xu)}var Eg=cP(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,l=Ra(),c=!1,u;w1!==r&&(w1=r,sh(),qu=e.scroll,u=e.scrollFn,qu===!0&&(qu=Zi(r,!0)));var d=0,f=qu;do{var h=f,p=Ir(h),v=p.top,g=p.bottom,x=p.left,y=p.right,E=p.width,I=p.height,P=void 0,D=void 0,A=h.scrollWidth,_=h.scrollHeight,b=ft(h),w=h.scrollLeft,C=h.scrollTop;h===l?(P=E<A&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),D=I<_&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(P=E<A&&(b.overflowX==="auto"||b.overflowX==="scroll"),D=I<_&&(b.overflowY==="auto"||b.overflowY==="scroll"));var T=P&&(Math.abs(y-s)<=a&&w+E<A)-(Math.abs(x-s)<=a&&!!w),k=D&&(Math.abs(g-i)<=a&&C+I<_)-(Math.abs(v-i)<=a&&!!C);if(!Xr[d])for(var N=0;N<=d;N++)Xr[N]||(Xr[N]={});(Xr[d].vx!=T||Xr[d].vy!=k||Xr[d].el!==h)&&(Xr[d].el=h,Xr[d].vx=T,Xr[d].vy=k,clearInterval(Xr[d].pid),(T!=0||k!=0)&&(c=!0,Xr[d].pid=setInterval((function(){n&&this.layer===0&&bt.active._onTouchMove(op);var B=Xr[this.layer].vy?Xr[this.layer].vy*o:0,R=Xr[this.layer].vx?Xr[this.layer].vx*o:0;typeof u=="function"&&u.call(bt.dragged.parentNode[Un],R,B,t,op,Xr[this.layer].el)!=="continue"||uP(Xr[this.layer].el,R,B)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=Zi(f,!1)));I1=c}},30),gP=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(r){var c=n||i;o();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Qy(){}Qy.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Xc(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:gP};zs(Qy,{pluginName:"revertOnSpill"});function Jy(){}Jy.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:gP};zs(Jy,{pluginName:"removeOnSpill"});var Ns;function pie(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(r){var n=r.dragEl;Ns=n},dragOverValid:function(r){var n=r.completed,s=r.target,i=r.onMove,a=r.activeSortable,o=r.changed,l=r.cancel;if(a.options.swap){var c=this.sortable.el,u=this.options;if(s&&s!==c){var d=Ns;i(s)!==!1?(Dr(s,u.swapClass,!0),Ns=s):Ns=null,d&&d!==Ns&&Dr(d,u.swapClass,!1)}o(),n(!0),l()}},drop:function(r){var n=r.activeSortable,s=r.putSortable,i=r.dragEl,a=s||this.sortable,o=this.options;Ns&&Dr(Ns,o.swapClass,!1),Ns&&(o.swap||s&&s.options.swap)&&i!==Ns&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),mie(i,Ns),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){Ns=null}},zs(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Ns}}})}function mie(t,e){var r=t.parentNode,n=e.parentNode,s,i;!r||!n||r.isEqualNode(e)||n.isEqualNode(t)||(s=Lr(t),i=Lr(e),r.isEqualNode(n)&&s<i&&i++,r.insertBefore(e,r.children[s]),n.insertBefore(t,n.children[i]))}var Pt=[],_s=[],Pu,ea,Ru=!1,ds=!1,Jl=!1,pr,Fu,P0;function gie(){function t(e){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));e.options.supportPointer?$t(document,"pointerup",this._deselectMultiDrag):($t(document,"mouseup",this._deselectMultiDrag),$t(document,"touchend",this._deselectMultiDrag)),$t(document,"keydown",this._checkKeyDown),$t(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,i){var a="";Pt.length&&ea===e?Pt.forEach(function(o,l){a+=(l?", ":"")+o.textContent}):a=i.textContent,s.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;pr=n},delayEnded:function(){this.isMultiDrag=~Pt.indexOf(pr)},setupClone:function(r){var n=r.sortable,s=r.cancel;if(this.isMultiDrag){for(var i=0;i<Pt.length;i++)_s.push(Yy(Pt[i])),_s[i].sortableIndex=Pt[i].sortableIndex,_s[i].draggable=!1,_s[i].style["will-change"]="",Dr(_s[i],this.options.selectedClass,!1),Pt[i]===pr&&Dr(_s[i],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(r){var n=r.sortable,s=r.rootEl,i=r.dispatchSortableEvent,a=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Pt.length&&ea===n&&(eT(!0,s),i("clone"),a()))},showClone:function(r){var n=r.cloneNowShown,s=r.rootEl,i=r.cancel;this.isMultiDrag&&(eT(!1,s),_s.forEach(function(a){ft(a,"display","")}),n(),P0=!1,i())},hideClone:function(r){var n=this;r.sortable;var s=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(_s.forEach(function(a){ft(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),s(),P0=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&ea&&ea.multiDrag._deselectMultiDrag(),Pt.forEach(function(n){n.sortableIndex=Lr(n)}),Pt=Pt.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Jl=!0},dragStarted:function(r){var n=this,s=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Pt.forEach(function(a){a!==pr&&ft(a,"position","absolute")});var i=Ir(pr,!1,!0,!0);Pt.forEach(function(a){a!==pr&&XS(a,i)}),ds=!0,Ru=!0}s.animateAll(function(){ds=!1,Ru=!1,n.options.animation&&Pt.forEach(function(a){fg(a)}),n.options.sort&&R0()})}},dragOver:function(r){var n=r.target,s=r.completed,i=r.cancel;ds&&~Pt.indexOf(n)&&(s(!1),i())},revert:function(r){var n=r.fromSortable,s=r.rootEl,i=r.sortable,a=r.dragRect;Pt.length>1&&(Pt.forEach(function(o){i.addAnimationState({target:o,rect:ds?Ir(o):a}),fg(o),o.fromRect=a,n.removeAnimationState(o)}),ds=!1,vie(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var n=r.sortable,s=r.isOwner,i=r.insertion,a=r.activeSortable,o=r.parentEl,l=r.putSortable,c=this.options;if(i){if(s&&a._hideClone(),Ru=!1,c.animation&&Pt.length>1&&(ds||!s&&!a.options.sort&&!l)){var u=Ir(pr,!1,!0,!0);Pt.forEach(function(f){f!==pr&&(XS(f,u),o.appendChild(f))}),ds=!0}if(!s)if(ds||R0(),Pt.length>1){var d=P0;a._showClone(n),a.options.animation&&!P0&&d&&_s.forEach(function(f){a.addAnimationState({target:f,rect:Fu}),f.fromRect=Fu,f.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,s=r.isOwner,i=r.activeSortable;if(Pt.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!s&&i.multiDrag.isMultiDrag){Fu=zs({},n);var a=Zo(pr,!0);Fu.top-=a.f,Fu.left-=a.e}},dragOverAnimationComplete:function(){ds&&(ds=!1,R0())},drop:function(r){var n=r.originalEvent,s=r.rootEl,i=r.parentEl,a=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,c=r.putSortable,u=c||this.sortable;if(n){var d=this.options,f=i.children;if(!Jl)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Dr(pr,d.selectedClass,!~Pt.indexOf(pr)),~Pt.indexOf(pr))Pt.splice(Pt.indexOf(pr),1),Pu=null,Wu({sortable:a,rootEl:s,name:"deselect",targetEl:pr});else{if(Pt.push(pr),Wu({sortable:a,rootEl:s,name:"select",targetEl:pr}),n.shiftKey&&Pu&&a.el.contains(Pu)){var h=Lr(Pu),p=Lr(pr);if(~h&&~p&&h!==p){var v,g;for(p>h?(g=h,v=p):(g=p,v=h+1);g<v;g++)~Pt.indexOf(f[g])||(Dr(f[g],d.selectedClass,!0),Pt.push(f[g]),Wu({sortable:a,rootEl:s,name:"select",targetEl:f[g]}))}}else Pu=pr;ea=u}if(Jl&&this.isMultiDrag){if(ds=!1,(i[Un].options.sort||i!==s)&&Pt.length>1){var x=Ir(pr),y=Lr(pr,":not(."+this.options.selectedClass+")");if(!Ru&&d.animation&&(pr.thisAnimationDuration=null),u.captureAnimationState(),!Ru&&(d.animation&&(pr.fromRect=x,Pt.forEach(function(I){if(I.thisAnimationDuration=null,I!==pr){var P=ds?Ir(I):x;I.fromRect=P,u.addAnimationState({target:I,rect:P})}})),R0(),Pt.forEach(function(I){f[y]?i.insertBefore(I,f[y]):i.appendChild(I),y++}),l===Lr(pr))){var E=!1;Pt.forEach(function(I){if(I.sortableIndex!==Lr(I)){E=!0;return}}),E&&o("update")}Pt.forEach(function(I){fg(I)}),u.animateAll()}ea=u}(s===i||c&&c.lastPutMode!=="clone")&&_s.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=Jl=!1,_s.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Vt(document,"pointerup",this._deselectMultiDrag),Vt(document,"mouseup",this._deselectMultiDrag),Vt(document,"touchend",this._deselectMultiDrag),Vt(document,"keydown",this._checkKeyDown),Vt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Jl<"u"&&Jl)&&ea===this.sortable&&!(r&&ta(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;Pt.length;){var n=Pt[0];Dr(n,this.options.selectedClass,!1),Pt.shift(),Wu({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},zs(t,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[Un];!n||!n.options.multiDrag||~Pt.indexOf(r)||(ea&&ea!==n&&(ea.multiDrag._deselectMultiDrag(),ea=n),Dr(r,n.options.selectedClass,!0),Pt.push(r))},deselect:function(r){var n=r.parentNode[Un],s=Pt.indexOf(r);!n||!n.options.multiDrag||!~s||(Dr(r,n.options.selectedClass,!1),Pt.splice(s,1))}},eventProperties:function(){var r=this,n=[],s=[];return Pt.forEach(function(i){n.push({multiDragElement:i,index:i.sortableIndex});var a;ds&&i!==pr?a=-1:ds?a=Lr(i,":not(."+r.options.selectedClass+")"):a=Lr(i),s.push({multiDragElement:i,index:a})}),{items:Vae(Pt),clones:[].concat(_s),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function vie(t,e){Pt.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function eT(t,e){_s.forEach(function(r,n){var s=e.children[r.sortableIndex+(t?Number(n):0)];s?e.insertBefore(r,s):e.appendChild(r)})}function R0(){Pt.forEach(function(t){t!==pr&&t.parentNode&&t.parentNode.removeChild(t)})}bt.mount(new hie);bt.mount(Jy,Qy);const xie=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:gie,Sortable:bt,Swap:pie,default:bt},Symbol.toStringTag,{value:"Module"})),yie=_y(xie);(function(t,e){(function(n,s){t.exports=s(Mae,yie)})(typeof self<"u"?self:Bt,function(r,n){return function(s){var i={};function a(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return s[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=i,a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var u in o)a.d(c,u,(function(d){return o[d]}).bind(null,u));return c},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s="fb15")}({"00ee":function(s,i,a){var o=a("b622"),l=o("toStringTag"),c={};c[l]="z",s.exports=String(c)==="[object z]"},"0366":function(s,i,a){var o=a("1c0b");s.exports=function(l,c,u){if(o(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,f){return l.call(c,d,f)};case 3:return function(d,f,h){return l.call(c,d,f,h)}}return function(){return l.apply(c,arguments)}}},"057f":function(s,i,a){var o=a("fc6a"),l=a("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return l(f)}catch{return u.slice()}};s.exports.f=function(h){return u&&c.call(h)=="[object Window]"?d(h):l(o(h))}},"06cf":function(s,i,a){var o=a("83ab"),l=a("d1e7"),c=a("5c6c"),u=a("fc6a"),d=a("c04e"),f=a("5135"),h=a("0cfb"),p=Object.getOwnPropertyDescriptor;i.f=o?p:function(g,x){if(g=u(g),x=d(x,!0),h)try{return p(g,x)}catch{}if(f(g,x))return c(!l.f.call(g,x),g[x])}},"0cfb":function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("cc12");s.exports=!o&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,i,a){var o=a("23e7"),l=a("d58f").left,c=a("a640"),u=a("ae40"),d=c("reduce"),f=u("reduce",{1:0});o({target:"Array",proto:!0,forced:!d||!f},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,i,a){var o=a("c6b6"),l=a("9263");s.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var f=d.call(c,u);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(o(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("17c2"),u=a("9112");for(var d in l){var f=o[d],h=f&&f.prototype;if(h&&h.forEach!==c)try{u(h,"forEach",c)}catch{h.forEach=c}}},"17c2":function(s,i,a){var o=a("b727").forEach,l=a("a640"),c=a("ae40"),u=l("forEach"),d=c("forEach");s.exports=!u||!d?function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,i,a){var o=a("d066");s.exports=o("document","documentElement")},"1c0b":function(s,i){s.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(s,i,a){var o=a("b622"),l=o("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(f,h){if(!h&&!c)return!1;var p=!1;try{var v={};v[l]=function(){return{next:function(){return{done:p=!0}}}},f(v)}catch{}return p}},"1d80":function(s,i){s.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(s,i,a){var o=a("d039"),l=a("b622"),c=a("2d00"),u=l("species");s.exports=function(d){return c>=51||!o(function(){var f=[],h=f.constructor={};return h[u]=function(){return{foo:1}},f[d](Boolean).foo!==1})}},"23cb":function(s,i,a){var o=a("a691"),l=Math.max,c=Math.min;s.exports=function(u,d){var f=o(u);return f<0?l(f+d,0):c(f,d)}},"23e7":function(s,i,a){var o=a("da84"),l=a("06cf").f,c=a("9112"),u=a("6eeb"),d=a("ce4e"),f=a("e893"),h=a("94ca");s.exports=function(p,v){var g=p.target,x=p.global,y=p.stat,E,I,P,D,A,_;if(x?I=o:y?I=o[g]||d(g,{}):I=(o[g]||{}).prototype,I)for(P in v){if(A=v[P],p.noTargetGet?(_=l(I,P),D=_&&_.value):D=I[P],E=h(x?P:g+(y?".":"#")+P,p.forced),!E&&D!==void 0){if(typeof A==typeof D)continue;f(A,D)}(p.sham||D&&D.sham)&&c(A,"sham",!0),u(I,P,A,p)}}},"241c":function(s,i,a){var o=a("ca84"),l=a("7839"),c=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(d){return o(d,c)}},"25f0":function(s,i,a){var o=a("6eeb"),l=a("825a"),c=a("d039"),u=a("ad6d"),d="toString",f=RegExp.prototype,h=f[d],p=c(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),v=h.name!=d;(p||v)&&o(RegExp.prototype,d,function(){var x=l(this),y=String(x.source),E=x.flags,I=String(E===void 0&&x instanceof RegExp&&!("flags"in f)?u.call(x):E);return"/"+y+"/"+I},{unsafe:!0})},"2ca0":function(s,i,a){var o=a("23e7"),l=a("06cf").f,c=a("50c4"),u=a("5a34"),d=a("1d80"),f=a("ab13"),h=a("c430"),p="".startsWith,v=Math.min,g=f("startsWith"),x=!h&&!g&&!!function(){var y=l(String.prototype,"startsWith");return y&&!y.writable}();o({target:"String",proto:!0,forced:!x&&!g},{startsWith:function(E){var I=String(d(this));u(E);var P=c(v(arguments.length>1?arguments[1]:void 0,I.length)),D=String(E);return p?p.call(I,D,P):I.slice(P,P+D.length)===D}})},"2d00":function(s,i,a){var o=a("da84"),l=a("342f"),c=o.process,u=c&&c.versions,d=u&&u.v8,f,h;d?(f=d.split("."),h=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(h=f[1]))),s.exports=h&&+h},"342f":function(s,i,a){var o=a("d066");s.exports=o("navigator","userAgent")||""},"35a1":function(s,i,a){var o=a("f5df"),l=a("3f8c"),c=a("b622"),u=c("iterator");s.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||l[o(d)]}},"37e8":function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("825a"),u=a("df75");s.exports=o?Object.defineProperties:function(f,h){c(f);for(var p=u(h),v=p.length,g=0,x;v>g;)l.f(f,x=p[g++],h[x]);return f}},"3bbe":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(s,i,a){var o=a("6547").charAt,l=a("69f3"),c=a("7dd0"),u="String Iterator",d=l.set,f=l.getterFor(u);c(String,"String",function(h){d(this,{type:u,string:String(h),index:0})},function(){var p=f(this),v=p.string,g=p.index,x;return g>=v.length?{value:void 0,done:!0}:(x=o(v,g),p.index+=x.length,{value:x,done:!1})})},"3f8c":function(s,i){s.exports={}},4160:function(s,i,a){var o=a("23e7"),l=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(s,i,a){var o=a("da84");s.exports=o},"44ad":function(s,i,a){var o=a("d039"),l=a("c6b6"),c="".split;s.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(s,i,a){var o=a("b622"),l=a("7c73"),c=a("9bf2"),u=o("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:l(null)}),s.exports=function(f){d[u][f]=!0}},"44e7":function(s,i,a){var o=a("861d"),l=a("c6b6"),c=a("b622"),u=c("match");s.exports=function(d){var f;return o(d)&&((f=d[u])!==void 0?!!f:l(d)=="RegExp")}},4930:function(s,i,a){var o=a("d039");s.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(s,i,a){var o=a("fc6a"),l=a("50c4"),c=a("23cb"),u=function(d){return function(f,h,p){var v=o(f),g=l(v.length),x=c(p,g),y;if(d&&h!=h){for(;g>x;)if(y=v[x++],y!=y)return!0}else for(;g>x;x++)if((d||x in v)&&v[x]===h)return d||x||0;return!d&&-1}};s.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(s,i,a){var o=a("23e7"),l=a("b727").filter,c=a("1dde"),u=a("ae40"),d=c("filter"),f=u("filter");o({target:"Array",proto:!0,forced:!d||!f},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,i,a){var o=a("0366"),l=a("7b0b"),c=a("9bdd"),u=a("e95a"),d=a("50c4"),f=a("8418"),h=a("35a1");s.exports=function(v){var g=l(v),x=typeof this=="function"?this:Array,y=arguments.length,E=y>1?arguments[1]:void 0,I=E!==void 0,P=h(g),D=0,A,_,b,w,C,T;if(I&&(E=o(E,y>2?arguments[2]:void 0,2)),P!=null&&!(x==Array&&u(P)))for(w=P.call(g),C=w.next,_=new x;!(b=C.call(w)).done;D++)T=I?c(w,E,[b.value,D],!0):b.value,f(_,D,T);else for(A=d(g.length),_=new x(A);A>D;D++)T=I?E(g[D],D):g[D],f(_,D,T);return _.length=D,_}},"4fad":function(s,i,a){var o=a("23e7"),l=a("6f53").entries;o({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(s,i,a){var o=a("a691"),l=Math.min;s.exports=function(c){return c>0?l(o(c),9007199254740991):0}},5135:function(s,i){var a={}.hasOwnProperty;s.exports=function(o,l){return a.call(o,l)}},5319:function(s,i,a){var o=a("d784"),l=a("825a"),c=a("7b0b"),u=a("50c4"),d=a("a691"),f=a("1d80"),h=a("8aa5"),p=a("14c3"),v=Math.max,g=Math.min,x=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,E=/\$([$&'`]|\d\d?)/g,I=function(P){return P===void 0?P:String(P)};o("replace",2,function(P,D,A,_){var b=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=_.REPLACE_KEEPS_$0,C=b?"$":"$0";return[function(N,B){var R=f(this),O=N==null?void 0:N[P];return O!==void 0?O.call(N,R,B):D.call(String(R),N,B)},function(k,N){if(!b&&w||typeof N=="string"&&N.indexOf(C)===-1){var B=A(D,k,this,N);if(B.done)return B.value}var R=l(k),O=String(this),U=typeof N=="function";U||(N=String(N));var M=R.global;if(M){var q=R.unicode;R.lastIndex=0}for(var H=[];;){var L=p(R,O);if(L===null||(H.push(L),!M))break;var z=String(L[0]);z===""&&(R.lastIndex=h(O,u(R.lastIndex),q))}for(var K="",te=0,ge=0;ge<H.length;ge++){L=H[ge];for(var ie=String(L[0]),he=v(g(d(L.index),O.length),0),Z=[],Q=1;Q<L.length;Q++)Z.push(I(L[Q]));var xe=L.groups;if(U){var X=[ie].concat(Z,he,O);xe!==void 0&&X.push(xe);var W=String(N.apply(void 0,X))}else W=T(ie,O,he,Z,xe,N);he>=te&&(K+=O.slice(te,he)+W,te=he+ie.length)}return K+O.slice(te)}];function T(k,N,B,R,O,U){var M=B+k.length,q=R.length,H=E;return O!==void 0&&(O=c(O),H=y),D.call(U,H,function(L,z){var K;switch(z.charAt(0)){case"$":return"$";case"&":return k;case"`":return N.slice(0,B);case"'":return N.slice(M);case"<":K=O[z.slice(1,-1)];break;default:var te=+z;if(te===0)return L;if(te>q){var ge=x(te/10);return ge===0?L:ge<=q?R[ge-1]===void 0?z.charAt(1):R[ge-1]+z.charAt(1):L}K=R[te-1]}return K===void 0?"":K})}})},5692:function(s,i,a){var o=a("c430"),l=a("c6cd");(s.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,i,a){var o=a("d066"),l=a("241c"),c=a("7418"),u=a("825a");s.exports=o("Reflect","ownKeys")||function(f){var h=l.f(u(f)),p=c.f;return p?h.concat(p(f)):h}},"5a34":function(s,i,a){var o=a("44e7");s.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(s,i){s.exports=function(a,o){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:o}}},"5db7":function(s,i,a){var o=a("23e7"),l=a("a2bf"),c=a("7b0b"),u=a("50c4"),d=a("1c0b"),f=a("65f0");o({target:"Array",proto:!0},{flatMap:function(p){var v=c(this),g=u(v.length),x;return d(p),x=f(v,0),x.length=l(x,v,v,g,0,1,p,arguments.length>1?arguments[1]:void 0),x}})},6547:function(s,i,a){var o=a("a691"),l=a("1d80"),c=function(u){return function(d,f){var h=String(l(d)),p=o(f),v=h.length,g,x;return p<0||p>=v?u?"":void 0:(g=h.charCodeAt(p),g<55296||g>56319||p+1===v||(x=h.charCodeAt(p+1))<56320||x>57343?u?h.charAt(p):g:u?h.slice(p,p+2):(g-55296<<10)+(x-56320)+65536)}};s.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(s,i,a){var o=a("861d"),l=a("e8b5"),c=a("b622"),u=c("species");s.exports=function(d,f){var h;return l(d)&&(h=d.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:o(h)&&(h=h[u],h===null&&(h=void 0))),new(h===void 0?Array:h)(f===0?0:f)}},"69f3":function(s,i,a){var o=a("7f9a"),l=a("da84"),c=a("861d"),u=a("9112"),d=a("5135"),f=a("f772"),h=a("d012"),p=l.WeakMap,v,g,x,y=function(b){return x(b)?g(b):v(b,{})},E=function(b){return function(w){var C;if(!c(w)||(C=g(w)).type!==b)throw TypeError("Incompatible receiver, "+b+" required");return C}};if(o){var I=new p,P=I.get,D=I.has,A=I.set;v=function(b,w){return A.call(I,b,w),w},g=function(b){return P.call(I,b)||{}},x=function(b){return D.call(I,b)}}else{var _=f("state");h[_]=!0,v=function(b,w){return u(b,_,w),w},g=function(b){return d(b,_)?b[_]:{}},x=function(b){return d(b,_)}}s.exports={set:v,get:g,has:x,enforce:y,getterFor:E}},"6eeb":function(s,i,a){var o=a("da84"),l=a("9112"),c=a("5135"),u=a("ce4e"),d=a("8925"),f=a("69f3"),h=f.get,p=f.enforce,v=String(String).split("String");(s.exports=function(g,x,y,E){var I=E?!!E.unsafe:!1,P=E?!!E.enumerable:!1,D=E?!!E.noTargetGet:!1;if(typeof y=="function"&&(typeof x=="string"&&!c(y,"name")&&l(y,"name",x),p(y).source=v.join(typeof x=="string"?x:"")),g===o){P?g[x]=y:u(x,y);return}else I?!D&&g[x]&&(P=!0):delete g[x];P?g[x]=y:l(g,x,y)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||d(this)})},"6f53":function(s,i,a){var o=a("83ab"),l=a("df75"),c=a("fc6a"),u=a("d1e7").f,d=function(f){return function(h){for(var p=c(h),v=l(p),g=v.length,x=0,y=[],E;g>x;)E=v[x++],(!o||u.call(p,E))&&y.push(f?[E,p[E]]:p[E]);return y}};s.exports={entries:d(!0),values:d(!1)}},"73d9":function(s,i,a){var o=a("44d2");o("flatMap")},7418:function(s,i){i.f=Object.getOwnPropertySymbols},"746f":function(s,i,a){var o=a("428f"),l=a("5135"),c=a("e538"),u=a("9bf2").f;s.exports=function(d){var f=o.Symbol||(o.Symbol={});l(f,d)||u(f,d,{value:c.f(d)})}},7839:function(s,i){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,i,a){var o=a("1d80");s.exports=function(l){return Object(o(l))}},"7c73":function(s,i,a){var o=a("825a"),l=a("37e8"),c=a("7839"),u=a("d012"),d=a("1be4"),f=a("cc12"),h=a("f772"),p=">",v="<",g="prototype",x="script",y=h("IE_PROTO"),E=function(){},I=function(b){return v+x+p+b+v+"/"+x+p},P=function(b){b.write(I("")),b.close();var w=b.parentWindow.Object;return b=null,w},D=function(){var b=f("iframe"),w="java"+x+":",C;return b.style.display="none",d.appendChild(b),b.src=String(w),C=b.contentWindow.document,C.open(),C.write(I("document.F=Object")),C.close(),C.F},A,_=function(){try{A=document.domain&&new ActiveXObject("htmlfile")}catch{}_=A?P(A):D();for(var b=c.length;b--;)delete _[g][c[b]];return _()};u[y]=!0,s.exports=Object.create||function(w,C){var T;return w!==null?(E[g]=o(w),T=new E,E[g]=null,T[y]=w):T=_(),C===void 0?T:l(T,C)}},"7dd0":function(s,i,a){var o=a("23e7"),l=a("9ed3"),c=a("e163"),u=a("d2bb"),d=a("d44e"),f=a("9112"),h=a("6eeb"),p=a("b622"),v=a("c430"),g=a("3f8c"),x=a("ae93"),y=x.IteratorPrototype,E=x.BUGGY_SAFARI_ITERATORS,I=p("iterator"),P="keys",D="values",A="entries",_=function(){return this};s.exports=function(b,w,C,T,k,N,B){l(C,w,T);var R=function(ge){if(ge===k&&H)return H;if(!E&&ge in M)return M[ge];switch(ge){case P:return function(){return new C(this,ge)};case D:return function(){return new C(this,ge)};case A:return function(){return new C(this,ge)}}return function(){return new C(this)}},O=w+" Iterator",U=!1,M=b.prototype,q=M[I]||M["@@iterator"]||k&&M[k],H=!E&&q||R(k),L=w=="Array"&&M.entries||q,z,K,te;if(L&&(z=c(L.call(new b)),y!==Object.prototype&&z.next&&(!v&&c(z)!==y&&(u?u(z,y):typeof z[I]!="function"&&f(z,I,_)),d(z,O,!0,!0),v&&(g[O]=_))),k==D&&q&&q.name!==D&&(U=!0,H=function(){return q.call(this)}),(!v||B)&&M[I]!==H&&f(M,I,H),g[w]=H,k)if(K={values:R(D),keys:N?H:R(P),entries:R(A)},B)for(te in K)(E||U||!(te in M))&&h(M,te,K[te]);else o({target:w,proto:!0,forced:E||U},K);return K}},"7f9a":function(s,i,a){var o=a("da84"),l=a("8925"),c=o.WeakMap;s.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(s,i,a){var o=a("861d");s.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(s,i,a){var o=a("d039");s.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,i,a){var o=a("c04e"),l=a("9bf2"),c=a("5c6c");s.exports=function(u,d,f){var h=o(d);h in u?l.f(u,h,c(0,f)):u[h]=f}},"861d":function(s,i){s.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(s,i,a){var o,l,c;(function(u,d){l=[],o=d,c=typeof o=="function"?o.apply(i,l):o,c!==void 0&&(s.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(A){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,p=f.exec(A.stack)||h.exec(A.stack),v=p&&p[1]||!1,g=p&&p[2]||!1,x=document.location.href.replace(document.location.hash,""),y,E,I,P=document.getElementsByTagName("script");v===x&&(y=document.documentElement.outerHTML,E=new RegExp("(?:[^\\n]+?\\n){0,"+(g-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),I=y.replace(E,"$1").trim());for(var D=0;D<P.length;D++)if(P[D].readyState==="interactive"||P[D].src===v||v===x&&P[D].innerHTML&&P[D].innerHTML.trim()===I)return P[D];return null}}return u})},8925:function(s,i,a){var o=a("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(c){return l.call(c)}),s.exports=o.inspectSource},"8aa5":function(s,i,a){var o=a("6547").charAt;s.exports=function(l,c,u){return c+(u?o(l,c).length:1)}},"8bbf":function(s,i){s.exports=r},"90e3":function(s,i){var a=0,o=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+o).toString(36)}},9112:function(s,i,a){var o=a("83ab"),l=a("9bf2"),c=a("5c6c");s.exports=o?function(u,d,f){return l.f(u,d,c(1,f))}:function(u,d,f){return u[d]=f,u}},9263:function(s,i,a){var o=a("ad6d"),l=a("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,f=function(){var g=/a/,x=/b*/g;return c.call(g,"a"),c.call(x,"a"),g.lastIndex!==0||x.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,v=f||p||h;v&&(d=function(x){var y=this,E,I,P,D,A=h&&y.sticky,_=o.call(y),b=y.source,w=0,C=x;return A&&(_=_.replace("y",""),_.indexOf("g")===-1&&(_+="g"),C=String(x).slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&x[y.lastIndex-1]!==`
`)&&(b="(?: "+b+")",C=" "+C,w++),I=new RegExp("^(?:"+b+")",_)),p&&(I=new RegExp("^"+b+"$(?!\\s)",_)),f&&(E=y.lastIndex),P=c.call(A?I:y,C),A?P?(P.input=P.input.slice(w),P[0]=P[0].slice(w),P.index=y.lastIndex,y.lastIndex+=P[0].length):y.lastIndex=0:f&&P&&(y.lastIndex=y.global?P.index+P[0].length:E),p&&P&&P.length>1&&u.call(P[0],I,function(){for(D=1;D<arguments.length-2;D++)arguments[D]===void 0&&(P[D]=void 0)}),P}),s.exports=d},"94ca":function(s,i,a){var o=a("d039"),l=/#|\.prototype\./,c=function(p,v){var g=d[u(p)];return g==h?!0:g==f?!1:typeof v=="function"?o(v):!!v},u=c.normalize=function(p){return String(p).replace(l,".").toLowerCase()},d=c.data={},f=c.NATIVE="N",h=c.POLYFILL="P";s.exports=c},"99af":function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("e8b5"),u=a("861d"),d=a("7b0b"),f=a("50c4"),h=a("8418"),p=a("65f0"),v=a("1dde"),g=a("b622"),x=a("2d00"),y=g("isConcatSpreadable"),E=9007199254740991,I="Maximum allowed index exceeded",P=x>=51||!l(function(){var b=[];return b[y]=!1,b.concat()[0]!==b}),D=v("concat"),A=function(b){if(!u(b))return!1;var w=b[y];return w!==void 0?!!w:c(b)},_=!P||!D;o({target:"Array",proto:!0,forced:_},{concat:function(w){var C=d(this),T=p(C,0),k=0,N,B,R,O,U;for(N=-1,R=arguments.length;N<R;N++)if(U=N===-1?C:arguments[N],A(U)){if(O=f(U.length),k+O>E)throw TypeError(I);for(B=0;B<O;B++,k++)B in U&&h(T,k,U[B])}else{if(k>=E)throw TypeError(I);h(T,k++,U)}return T.length=k,T}})},"9bdd":function(s,i,a){var o=a("825a");s.exports=function(l,c,u,d){try{return d?c(o(u)[0],u[1]):c(u)}catch(h){var f=l.return;throw f!==void 0&&o(f.call(l)),h}}},"9bf2":function(s,i,a){var o=a("83ab"),l=a("0cfb"),c=a("825a"),u=a("c04e"),d=Object.defineProperty;i.f=o?d:function(h,p,v){if(c(h),p=u(p,!0),c(v),l)try{return d(h,p,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported");return"value"in v&&(h[p]=v.value),h}},"9ed3":function(s,i,a){var o=a("ae93").IteratorPrototype,l=a("7c73"),c=a("5c6c"),u=a("d44e"),d=a("3f8c"),f=function(){return this};s.exports=function(h,p,v){var g=p+" Iterator";return h.prototype=l(o,{next:c(1,v)}),u(h,g,!1,!0),d[g]=f,h}},"9f7f":function(s,i,a){var o=a("d039");function l(c,u){return RegExp(c,u)}i.UNSUPPORTED_Y=o(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(s,i,a){var o=a("e8b5"),l=a("50c4"),c=a("0366"),u=function(d,f,h,p,v,g,x,y){for(var E=v,I=0,P=x?c(x,y,3):!1,D;I<p;){if(I in h){if(D=P?P(h[I],I,f):h[I],g>0&&o(D))E=u(d,f,D,l(D.length),E,g-1)-1;else{if(E>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[E]=D}E++}I++}return E};s.exports=u},a352:function(s,i){s.exports=n},a434:function(s,i,a){var o=a("23e7"),l=a("23cb"),c=a("a691"),u=a("50c4"),d=a("7b0b"),f=a("65f0"),h=a("8418"),p=a("1dde"),v=a("ae40"),g=p("splice"),x=v("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,E=Math.min,I=9007199254740991,P="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!g||!x},{splice:function(A,_){var b=d(this),w=u(b.length),C=l(A,w),T=arguments.length,k,N,B,R,O,U;if(T===0?k=N=0:T===1?(k=0,N=w-C):(k=T-2,N=E(y(c(_),0),w-C)),w+k-N>I)throw TypeError(P);for(B=f(b,N),R=0;R<N;R++)O=C+R,O in b&&h(B,R,b[O]);if(B.length=N,k<N){for(R=C;R<w-N;R++)O=R+N,U=R+k,O in b?b[U]=b[O]:delete b[U];for(R=w;R>w-N+k;R--)delete b[R-1]}else if(k>N)for(R=w-N;R>C;R--)O=R+N-1,U=R+k-1,O in b?b[U]=b[O]:delete b[U];for(R=0;R<k;R++)b[R+C]=arguments[R+2];return b.length=w-N+k,B}})},a4d3:function(s,i,a){var o=a("23e7"),l=a("da84"),c=a("d066"),u=a("c430"),d=a("83ab"),f=a("4930"),h=a("fdbf"),p=a("d039"),v=a("5135"),g=a("e8b5"),x=a("861d"),y=a("825a"),E=a("7b0b"),I=a("fc6a"),P=a("c04e"),D=a("5c6c"),A=a("7c73"),_=a("df75"),b=a("241c"),w=a("057f"),C=a("7418"),T=a("06cf"),k=a("9bf2"),N=a("d1e7"),B=a("9112"),R=a("6eeb"),O=a("5692"),U=a("f772"),M=a("d012"),q=a("90e3"),H=a("b622"),L=a("e538"),z=a("746f"),K=a("d44e"),te=a("69f3"),ge=a("b727").forEach,ie=U("hidden"),he="Symbol",Z="prototype",Q=H("toPrimitive"),xe=te.set,X=te.getterFor(he),W=Object[Z],Y=l.Symbol,ee=c("JSON","stringify"),ve=T.f,re=k.f,se=w.f,le=N.f,Te=O("symbols"),we=O("op-symbols"),Se=O("string-to-symbol-registry"),ze=O("symbol-to-string-registry"),Ie=O("wks"),$e=l.QObject,Be=!$e||!$e[Z]||!$e[Z].findChild,We=d&&p(function(){return A(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a!=7})?function(pt,lt,mt){var kt=ve(W,lt);kt&&delete W[lt],re(pt,lt,mt),kt&&pt!==W&&re(W,lt,kt)}:re,Ke=function(pt,lt){var mt=Te[pt]=A(Y[Z]);return xe(mt,{type:he,tag:pt,description:lt}),d||(mt.description=lt),mt},Ee=h?function(pt){return typeof pt=="symbol"}:function(pt){return Object(pt)instanceof Y},ye=function(lt,mt,kt){lt===W&&ye(we,mt,kt),y(lt);var Ot=P(mt,!0);return y(kt),v(Te,Ot)?(kt.enumerable?(v(lt,ie)&&lt[ie][Ot]&&(lt[ie][Ot]=!1),kt=A(kt,{enumerable:D(0,!1)})):(v(lt,ie)||re(lt,ie,D(1,{})),lt[ie][Ot]=!0),We(lt,Ot,kt)):re(lt,Ot,kt)},_e=function(lt,mt){y(lt);var kt=I(mt),Ot=_(kt).concat(yt(kt));return ge(Ot,function(Er){(!d||Ge.call(kt,Er))&&ye(lt,Er,kt[Er])}),lt},Re=function(lt,mt){return mt===void 0?A(lt):_e(A(lt),mt)},Ge=function(lt){var mt=P(lt,!0),kt=le.call(this,mt);return this===W&&v(Te,mt)&&!v(we,mt)?!1:kt||!v(this,mt)||!v(Te,mt)||v(this,ie)&&this[ie][mt]?kt:!0},st=function(lt,mt){var kt=I(lt),Ot=P(mt,!0);if(!(kt===W&&v(Te,Ot)&&!v(we,Ot))){var Er=ve(kt,Ot);return Er&&v(Te,Ot)&&!(v(kt,ie)&&kt[ie][Ot])&&(Er.enumerable=!0),Er}},gt=function(lt){var mt=se(I(lt)),kt=[];return ge(mt,function(Ot){!v(Te,Ot)&&!v(M,Ot)&&kt.push(Ot)}),kt},yt=function(lt){var mt=lt===W,kt=se(mt?we:I(lt)),Ot=[];return ge(kt,function(Er){v(Te,Er)&&(!mt||v(W,Er))&&Ot.push(Te[Er])}),Ot};if(f||(Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var lt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),mt=q(lt),kt=function(Ot){this===W&&kt.call(we,Ot),v(this,ie)&&v(this[ie],mt)&&(this[ie][mt]=!1),We(this,mt,D(1,Ot))};return d&&Be&&We(W,mt,{configurable:!0,set:kt}),Ke(mt,lt)},R(Y[Z],"toString",function(){return X(this).tag}),R(Y,"withoutSetter",function(pt){return Ke(q(pt),pt)}),N.f=Ge,k.f=ye,T.f=st,b.f=w.f=gt,C.f=yt,L.f=function(pt){return Ke(H(pt),pt)},d&&(re(Y[Z],"description",{configurable:!0,get:function(){return X(this).description}}),u||R(W,"propertyIsEnumerable",Ge,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Y}),ge(_(Ie),function(pt){z(pt)}),o({target:he,stat:!0,forced:!f},{for:function(pt){var lt=String(pt);if(v(Se,lt))return Se[lt];var mt=Y(lt);return Se[lt]=mt,ze[mt]=lt,mt},keyFor:function(lt){if(!Ee(lt))throw TypeError(lt+" is not a symbol");if(v(ze,lt))return ze[lt]},useSetter:function(){Be=!0},useSimple:function(){Be=!1}}),o({target:"Object",stat:!0,forced:!f,sham:!d},{create:Re,defineProperty:ye,defineProperties:_e,getOwnPropertyDescriptor:st}),o({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:gt,getOwnPropertySymbols:yt}),o({target:"Object",stat:!0,forced:p(function(){C.f(1)})},{getOwnPropertySymbols:function(lt){return C.f(E(lt))}}),ee){var Ut=!f||p(function(){var pt=Y();return ee([pt])!="[null]"||ee({a:pt})!="{}"||ee(Object(pt))!="{}"});o({target:"JSON",stat:!0,forced:Ut},{stringify:function(lt,mt,kt){for(var Ot=[lt],Er=1,Kn;arguments.length>Er;)Ot.push(arguments[Er++]);if(Kn=mt,!(!x(mt)&&lt===void 0||Ee(lt)))return g(mt)||(mt=function(Si,cs){if(typeof Kn=="function"&&(cs=Kn.call(this,Si,cs)),!Ee(cs))return cs}),Ot[1]=mt,ee.apply(null,Ot)}})}Y[Z][Q]||B(Y[Z],Q,Y[Z].valueOf),K(Y,he),M[ie]=!0},a630:function(s,i,a){var o=a("23e7"),l=a("4df4"),c=a("1c7e"),u=!c(function(d){Array.from(d)});o({target:"Array",stat:!0,forced:u},{from:l})},a640:function(s,i,a){var o=a("d039");s.exports=function(l,c){var u=[][l];return!!u&&o(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(s,i){var a=Math.ceil,o=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?o:a)(l)}},ab13:function(s,i,a){var o=a("b622"),l=o("match");s.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(s,i,a){var o=a("23e7"),l=a("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(s,i,a){var o=a("825a");s.exports=function(){var l=o(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(s,i,a){var o=a("83ab"),l=a("d039"),c=a("5135"),u=Object.defineProperty,d={},f=function(h){throw h};s.exports=function(h,p){if(c(d,h))return d[h];p||(p={});var v=[][h],g=c(p,"ACCESSORS")?p.ACCESSORS:!1,x=c(p,0)?p[0]:f,y=c(p,1)?p[1]:void 0;return d[h]=!!v&&!l(function(){if(g&&!o)return!0;var E={length:-1};g?u(E,1,{enumerable:!0,get:f}):E[1]=1,v.call(E,x,y)})}},ae93:function(s,i,a){var o=a("e163"),l=a("9112"),c=a("5135"),u=a("b622"),d=a("c430"),f=u("iterator"),h=!1,p=function(){return this},v,g,x;[].keys&&(x=[].keys(),"next"in x?(g=o(o(x)),g!==Object.prototype&&(v=g)):h=!0),v==null&&(v={}),!d&&!c(v,f)&&l(v,f,p),s.exports={IteratorPrototype:v,BUGGY_SAFARI_ITERATORS:h}},b041:function(s,i,a){var o=a("00ee"),l=a("f5df");s.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(s,i,a){var o=a("83ab"),l=a("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,f="name";o&&!(f in c)&&l(c,f,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(s,i,a){var o=a("da84"),l=a("5692"),c=a("5135"),u=a("90e3"),d=a("4930"),f=a("fdbf"),h=l("wks"),p=o.Symbol,v=f?p:p&&p.withoutSetter||u;s.exports=function(g){return c(h,g)||(d&&c(p,g)?h[g]=p[g]:h[g]=v("Symbol."+g)),h[g]}},b64b:function(s,i,a){var o=a("23e7"),l=a("7b0b"),c=a("df75"),u=a("d039"),d=u(function(){c(1)});o({target:"Object",stat:!0,forced:d},{keys:function(h){return c(l(h))}})},b727:function(s,i,a){var o=a("0366"),l=a("44ad"),c=a("7b0b"),u=a("50c4"),d=a("65f0"),f=[].push,h=function(p){var v=p==1,g=p==2,x=p==3,y=p==4,E=p==6,I=p==5||E;return function(P,D,A,_){for(var b=c(P),w=l(b),C=o(D,A,3),T=u(w.length),k=0,N=_||d,B=v?N(P,T):g?N(P,0):void 0,R,O;T>k;k++)if((I||k in w)&&(R=w[k],O=C(R,k,b),p)){if(v)B[k]=O;else if(O)switch(p){case 3:return!0;case 5:return R;case 6:return k;case 2:f.call(B,R)}else if(y)return!1}return E?-1:x||y?y:B}};s.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(s,i,a){var o=a("861d");s.exports=function(l,c){if(!o(l))return l;var u,d;if(c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l))||typeof(u=l.valueOf)=="function"&&!o(d=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!o(d=u.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(s,i){s.exports=!1},c6b6:function(s,i){var a={}.toString;s.exports=function(o){return a.call(o).slice(8,-1)}},c6cd:function(s,i,a){var o=a("da84"),l=a("ce4e"),c="__core-js_shared__",u=o[c]||l(c,{});s.exports=u},c740:function(s,i,a){var o=a("23e7"),l=a("b727").findIndex,c=a("44d2"),u=a("ae40"),d="findIndex",f=!0,h=u(d);d in[]&&Array(1)[d](function(){f=!1}),o({target:"Array",proto:!0,forced:f||!h},{findIndex:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(s,i){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a},c975:function(s,i,a){var o=a("23e7"),l=a("4d64").indexOf,c=a("a640"),u=a("ae40"),d=[].indexOf,f=!!d&&1/[1].indexOf(1,-0)<0,h=c("indexOf"),p=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:f||!h||!p},{indexOf:function(g){return f?d.apply(this,arguments)||0:l(this,g,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,i,a){var o=a("5135"),l=a("fc6a"),c=a("4d64").indexOf,u=a("d012");s.exports=function(d,f){var h=l(d),p=0,v=[],g;for(g in h)!o(u,g)&&o(h,g)&&v.push(g);for(;f.length>p;)o(h,g=f[p++])&&(~c(v,g)||v.push(g));return v}},caad:function(s,i,a){var o=a("23e7"),l=a("4d64").includes,c=a("44d2"),u=a("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!d},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(s,i,a){var o=a("da84"),l=a("861d"),c=o.document,u=l(c)&&l(c.createElement);s.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(s,i,a){var o=a("da84"),l=a("9112");s.exports=function(c,u){try{l(o,c,u)}catch{o[c]=u}return u}},d012:function(s,i){s.exports={}},d039:function(s,i){s.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(s,i,a){var o=a("428f"),l=a("da84"),c=function(u){return typeof u=="function"?u:void 0};s.exports=function(u,d){return arguments.length<2?c(o[u])||c(l[u]):o[u]&&o[u][d]||l[u]&&l[u][d]}},d1e7:function(s,i,a){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!o.call({1:2},1);i.f=c?function(d){var f=l(this,d);return!!f&&f.enumerable}:o},d28b:function(s,i,a){var o=a("746f");o("iterator")},d2bb:function(s,i,a){var o=a("825a"),l=a("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(h,p){return o(h),l(p),c?d.call(h,p):h.__proto__=p,h}}():void 0)},d3b7:function(s,i,a){var o=a("00ee"),l=a("6eeb"),c=a("b041");o||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(s,i,a){var o=a("9bf2").f,l=a("5135"),c=a("b622"),u=c("toStringTag");s.exports=function(d,f,h){d&&!l(d=h?d:d.prototype,u)&&o(d,u,{configurable:!0,value:f})}},d58f:function(s,i,a){var o=a("1c0b"),l=a("7b0b"),c=a("44ad"),u=a("50c4"),d=function(f){return function(h,p,v,g){o(p);var x=l(h),y=c(x),E=u(x.length),I=f?E-1:0,P=f?-1:1;if(v<2)for(;;){if(I in y){g=y[I],I+=P;break}if(I+=P,f?I<0:E<=I)throw TypeError("Reduce of empty array with no initial value")}for(;f?I>=0:E>I;I+=P)I in y&&(g=p(g,y[I],I,x));return g}};s.exports={left:d(!1),right:d(!0)}},d784:function(s,i,a){a("ac1f");var o=a("6eeb"),l=a("d039"),c=a("b622"),u=a("9263"),d=a("9112"),f=c("species"),h=!l(function(){var y=/./;return y.exec=function(){var E=[];return E.groups={a:"7"},E},"".replace(y,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),v=c("replace"),g=function(){return/./[v]?/./[v]("a","$0")==="":!1}(),x=!l(function(){var y=/(?:)/,E=y.exec;y.exec=function(){return E.apply(this,arguments)};var I="ab".split(y);return I.length!==2||I[0]!=="a"||I[1]!=="b"});s.exports=function(y,E,I,P){var D=c(y),A=!l(function(){var k={};return k[D]=function(){return 7},""[y](k)!=7}),_=A&&!l(function(){var k=!1,N=/a/;return y==="split"&&(N={},N.constructor={},N.constructor[f]=function(){return N},N.flags="",N[D]=/./[D]),N.exec=function(){return k=!0,null},N[D](""),!k});if(!A||!_||y==="replace"&&!(h&&p&&!g)||y==="split"&&!x){var b=/./[D],w=I(D,""[y],function(k,N,B,R,O){return N.exec===u?A&&!O?{done:!0,value:b.call(N,B,R)}:{done:!0,value:k.call(B,N,R)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),C=w[0],T=w[1];o(String.prototype,y,C),o(RegExp.prototype,D,E==2?function(k,N){return T.call(k,this,N)}:function(k){return T.call(k,this)})}P&&d(RegExp.prototype[D],"sham",!0)}},d81d:function(s,i,a){var o=a("23e7"),l=a("b727").map,c=a("1dde"),u=a("ae40"),d=c("map"),f=u("map");o({target:"Array",proto:!0,forced:!d||!f},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,i,a){(function(o){var l=function(c){return c&&c.Math==Math&&c};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("56ef"),u=a("fc6a"),d=a("06cf"),f=a("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var v=u(p),g=d.f,x=c(v),y={},E=0,I,P;x.length>E;)P=g(v,I=x[E++]),P!==void 0&&f(y,I,P);return y}})},dbf1:function(s,i,a){(function(o){a.d(i,"a",function(){return c});function l(){return typeof window<"u"?window.console:o.console}var c=l()}).call(this,a("c8ba"))},ddb0:function(s,i,a){var o=a("da84"),l=a("fdbc"),c=a("e260"),u=a("9112"),d=a("b622"),f=d("iterator"),h=d("toStringTag"),p=c.values;for(var v in l){var g=o[v],x=g&&g.prototype;if(x){if(x[f]!==p)try{u(x,f,p)}catch{x[f]=p}if(x[h]||u(x,h,v),l[v]){for(var y in c)if(x[y]!==c[y])try{u(x,y,c[y])}catch{x[y]=c[y]}}}}},df75:function(s,i,a){var o=a("ca84"),l=a("7839");s.exports=Object.keys||function(u){return o(u,l)}},e01a:function(s,i,a){var o=a("23e7"),l=a("83ab"),c=a("da84"),u=a("5135"),d=a("861d"),f=a("9bf2").f,h=a("e893"),p=c.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var v={},g=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),A=this instanceof g?new p(D):D===void 0?p():p(D);return D===""&&(v[A]=!0),A};h(g,p);var x=g.prototype=p.prototype;x.constructor=g;var y=x.toString,E=String(p("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;f(x,"description",{configurable:!0,get:function(){var D=d(this)?this.valueOf():this,A=y.call(D);if(u(v,D))return"";var _=E?A.slice(7,-1):A.replace(I,"$1");return _===""?void 0:_}}),o({global:!0,forced:!0},{Symbol:g})}},e163:function(s,i,a){var o=a("5135"),l=a("7b0b"),c=a("f772"),u=a("e177"),d=c("IE_PROTO"),f=Object.prototype;s.exports=u?Object.getPrototypeOf:function(h){return h=l(h),o(h,d)?h[d]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}},e177:function(s,i,a){var o=a("d039");s.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(s,i,a){var o=a("fc6a"),l=a("44d2"),c=a("3f8c"),u=a("69f3"),d=a("7dd0"),f="Array Iterator",h=u.set,p=u.getterFor(f);s.exports=d(Array,"Array",function(v,g){h(this,{type:f,target:o(v),index:0,kind:g})},function(){var v=p(this),g=v.target,x=v.kind,y=v.index++;return!g||y>=g.length?(v.target=void 0,{value:void 0,done:!0}):x=="keys"?{value:y,done:!1}:x=="values"?{value:g[y],done:!1}:{value:[y,g[y]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(s,i,a){var o=a("23e7"),l=a("d039"),c=a("fc6a"),u=a("06cf").f,d=a("83ab"),f=l(function(){u(1)}),h=!d||f;o({target:"Object",stat:!0,forced:h,sham:!d},{getOwnPropertyDescriptor:function(v,g){return u(c(v),g)}})},e538:function(s,i,a){var o=a("b622");i.f=o},e893:function(s,i,a){var o=a("5135"),l=a("56ef"),c=a("06cf"),u=a("9bf2");s.exports=function(d,f){for(var h=l(f),p=u.f,v=c.f,g=0;g<h.length;g++){var x=h[g];o(d,x)||p(d,x,v(f,x))}}},e8b5:function(s,i,a){var o=a("c6b6");s.exports=Array.isArray||function(c){return o(c)=="Array"}},e95a:function(s,i,a){var o=a("b622"),l=a("3f8c"),c=o("iterator"),u=Array.prototype;s.exports=function(d){return d!==void 0&&(l.Array===d||u[c]===d)}},f5df:function(s,i,a){var o=a("00ee"),l=a("c6b6"),c=a("b622"),u=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",f=function(h,p){try{return h[p]}catch{}};s.exports=o?l:function(h){var p,v,g;return h===void 0?"Undefined":h===null?"Null":typeof(v=f(p=Object(h),u))=="string"?v:d?l(p):(g=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":g}},f772:function(s,i,a){var o=a("5692"),l=a("90e3"),c=o("keys");s.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(s,i,a){if(a.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=a("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(a.p=c[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function u(Ee,ye,_e){return ye in Ee?Object.defineProperty(Ee,ye,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Ee[ye]=_e,Ee}function d(Ee,ye){var _e=Object.keys(Ee);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(Ee);ye&&(Re=Re.filter(function(Ge){return Object.getOwnPropertyDescriptor(Ee,Ge).enumerable})),_e.push.apply(_e,Re)}return _e}function f(Ee){for(var ye=1;ye<arguments.length;ye++){var _e=arguments[ye]!=null?arguments[ye]:{};ye%2?d(Object(_e),!0).forEach(function(Re){u(Ee,Re,_e[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(_e)):d(Object(_e)).forEach(function(Re){Object.defineProperty(Ee,Re,Object.getOwnPropertyDescriptor(_e,Re))})}return Ee}function h(Ee){if(Array.isArray(Ee))return Ee}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function p(Ee,ye){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ee)))){var _e=[],Re=!0,Ge=!1,st=void 0;try{for(var gt=Ee[Symbol.iterator](),yt;!(Re=(yt=gt.next()).done)&&(_e.push(yt.value),!(ye&&_e.length===ye));Re=!0);}catch(Ut){Ge=!0,st=Ut}finally{try{!Re&&gt.return!=null&&gt.return()}finally{if(Ge)throw st}}return _e}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function v(Ee,ye){(ye==null||ye>Ee.length)&&(ye=Ee.length);for(var _e=0,Re=new Array(ye);_e<ye;_e++)Re[_e]=Ee[_e];return Re}function g(Ee,ye){if(Ee){if(typeof Ee=="string")return v(Ee,ye);var _e=Object.prototype.toString.call(Ee).slice(8,-1);if(_e==="Object"&&Ee.constructor&&(_e=Ee.constructor.name),_e==="Map"||_e==="Set")return Array.from(Ee);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return v(Ee,ye)}}function x(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(Ee,ye){return h(Ee)||p(Ee,ye)||g(Ee,ye)||x()}function E(Ee){if(Array.isArray(Ee))return v(Ee)}function I(Ee){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ee))return Array.from(Ee)}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ee){return E(Ee)||I(Ee)||g(Ee)||P()}var A=a("a352"),_=a.n(A);function b(Ee){Ee.parentElement!==null&&Ee.parentElement.removeChild(Ee)}function w(Ee,ye,_e){var Re=_e===0?Ee.children[0]:Ee.children[_e-1].nextSibling;Ee.insertBefore(ye,Re)}var C=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function T(Ee){var ye=Object.create(null);return function(Re){var Ge=ye[Re];return Ge||(ye[Re]=Ee(Re))}}var k=/-(\w)/g,N=T(function(Ee){return Ee.replace(k,function(ye,_e){return _e.toUpperCase()})});a("5db7"),a("73d9");var B=["Start","Add","Remove","Update","End"],R=["Choose","Unchoose","Sort","Filter","Clone"],O=["Move"],U=[O,B,R].flatMap(function(Ee){return Ee}).map(function(Ee){return"on".concat(Ee)}),M={manage:O,manageAndEmit:B,emit:R};function q(Ee){return U.indexOf(Ee)!==-1}a("caad"),a("2ca0");var H=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function L(Ee){return H.includes(Ee)}function z(Ee){return["transition-group","TransitionGroup"].includes(Ee)}function K(Ee){return["id","class","role","style"].includes(Ee)||Ee.startsWith("data-")||Ee.startsWith("aria-")||Ee.startsWith("on")}function te(Ee){return Ee.reduce(function(ye,_e){var Re=y(_e,2),Ge=Re[0],st=Re[1];return ye[Ge]=st,ye},{})}function ge(Ee){var ye=Ee.$attrs,_e=Ee.componentData,Re=_e===void 0?{}:_e,Ge=te(Object.entries(ye).filter(function(st){var gt=y(st,2),yt=gt[0];return gt[1],K(yt)}));return f(f({},Ge),Re)}function ie(Ee){var ye=Ee.$attrs,_e=Ee.callBackBuilder,Re=te(he(ye));Object.entries(_e).forEach(function(st){var gt=y(st,2),yt=gt[0],Ut=gt[1];M[yt].forEach(function(pt){Re["on".concat(pt)]=Ut(pt)})});var Ge="[data-draggable]".concat(Re.draggable||"");return f(f({},Re),{},{draggable:Ge})}function he(Ee){return Object.entries(Ee).filter(function(ye){var _e=y(ye,2),Re=_e[0];return _e[1],!K(Re)}).map(function(ye){var _e=y(ye,2),Re=_e[0],Ge=_e[1];return[N(Re),Ge]}).filter(function(ye){var _e=y(ye,2),Re=_e[0];return _e[1],!q(Re)})}a("c740");function Z(Ee,ye){if(!(Ee instanceof ye))throw new TypeError("Cannot call a class as a function")}function Q(Ee,ye){for(var _e=0;_e<ye.length;_e++){var Re=ye[_e];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(Ee,Re.key,Re)}}function xe(Ee,ye,_e){return ye&&Q(Ee.prototype,ye),Ee}var X=function(ye){var _e=ye.el;return _e},W=function(ye,_e){return ye.__draggable_context=_e},Y=function(ye){return ye.__draggable_context},ee=function(){function Ee(ye){var _e=ye.nodes,Re=_e.header,Ge=_e.default,st=_e.footer,gt=ye.root,yt=ye.realList;Z(this,Ee),this.defaultNodes=Ge,this.children=[].concat(D(Re),D(Ge),D(st)),this.externalComponent=gt.externalComponent,this.rootTransition=gt.transition,this.tag=gt.tag,this.realList=yt}return xe(Ee,[{key:"render",value:function(_e,Re){var Ge=this.tag,st=this.children,gt=this._isRootComponent,yt=gt?{default:function(){return st}}:st;return _e(Ge,Re,yt)}},{key:"updated",value:function(){var _e=this.defaultNodes,Re=this.realList;_e.forEach(function(Ge,st){W(X(Ge),{element:Re[st],index:st})})}},{key:"getUnderlyingVm",value:function(_e){return Y(_e)}},{key:"getVmIndexFromDomIndex",value:function(_e,Re){var Ge=this.defaultNodes,st=Ge.length,gt=Re.children,yt=gt.item(_e);if(yt===null)return st;var Ut=Y(yt);if(Ut)return Ut.index;if(st===0)return 0;var pt=X(Ge[0]),lt=D(gt).findIndex(function(mt){return mt===pt});return _e<lt?0:st}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ee}(),ve=a("8bbf");function re(Ee,ye){var _e=Ee[ye];return _e?_e():[]}function se(Ee){var ye=Ee.$slots,_e=Ee.realList,Re=Ee.getKey,Ge=_e||[],st=["header","footer"].map(function(mt){return re(ye,mt)}),gt=y(st,2),yt=gt[0],Ut=gt[1],pt=ye.item;if(!pt)throw new Error("draggable element must have an item slot");var lt=Ge.flatMap(function(mt,kt){return pt({element:mt,index:kt}).map(function(Ot){return Ot.key=Re(mt),Ot.props=f(f({},Ot.props||{}),{},{"data-draggable":!0}),Ot})});if(lt.length!==Ge.length)throw new Error("Item slot must have only one child");return{header:yt,footer:Ut,default:lt}}function le(Ee){var ye=z(Ee),_e=!L(Ee)&&!ye;return{transition:ye,externalComponent:_e,tag:_e?Object(ve.resolveComponent)(Ee):ye?ve.TransitionGroup:Ee}}function Te(Ee){var ye=Ee.$slots,_e=Ee.tag,Re=Ee.realList,Ge=Ee.getKey,st=se({$slots:ye,realList:Re,getKey:Ge}),gt=le(_e);return new ee({nodes:st,root:gt,realList:Re})}function we(Ee,ye){var _e=this;Object(ve.nextTick)(function(){return _e.$emit(Ee.toLowerCase(),ye)})}function Se(Ee){var ye=this;return function(_e,Re){if(ye.realList!==null)return ye["onDrag".concat(Ee)](_e,Re)}}function ze(Ee){var ye=this,_e=Se.call(this,Ee);return function(Re,Ge){_e.call(ye,Re,Ge),we.call(ye,Ee,Re)}}var Ie=null,$e={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ye){return ye}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Be=["update:modelValue","change"].concat(D([].concat(D(M.manageAndEmit),D(M.emit)).map(function(Ee){return Ee.toLowerCase()}))),We=Object(ve.defineComponent)({name:"draggable",inheritAttrs:!1,props:$e,emits:Be,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ye=this.$slots,_e=this.$attrs,Re=this.tag,Ge=this.componentData,st=this.realList,gt=this.getKey,yt=Te({$slots:ye,tag:Re,realList:st,getKey:gt});this.componentStructure=yt;var Ut=ge({$attrs:_e,componentData:Ge});return yt.render(ve.h,Ut)}catch(pt){return this.error=!0,Object(ve.h)("pre",{style:{color:"red"}},pt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&C.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ye=this;if(!this.error){var _e=this.$attrs,Re=this.$el,Ge=this.componentStructure;Ge.updated();var st=ie({$attrs:_e,callBackBuilder:{manageAndEmit:function(Ut){return ze.call(ye,Ut)},emit:function(Ut){return we.bind(ye,Ut)},manage:function(Ut){return Se.call(ye,Ut)}}}),gt=Re.nodeType===1?Re:Re.parentElement;this._sortable=new _.a(gt,st),this.targetDomElement=gt,gt.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ye=this.list;return ye||this.modelValue},getKey:function(){var ye=this.itemKey;return typeof ye=="function"?ye:function(_e){return _e[ye]}}},watch:{$attrs:{handler:function(ye){var _e=this._sortable;_e&&he(ye).forEach(function(Re){var Ge=y(Re,2),st=Ge[0],gt=Ge[1];_e.option(st,gt)})},deep:!0}},methods:{getUnderlyingVm:function(ye){return this.componentStructure.getUnderlyingVm(ye)||null},getUnderlyingPotencialDraggableComponent:function(ye){return ye.__draggable_component__},emitChanges:function(ye){var _e=this;Object(ve.nextTick)(function(){return _e.$emit("change",ye)})},alterList:function(ye){if(this.list){ye(this.list);return}var _e=D(this.modelValue);ye(_e),this.$emit("update:modelValue",_e)},spliceList:function(){var ye=arguments,_e=function(Ge){return Ge.splice.apply(Ge,D(ye))};this.alterList(_e)},updatePosition:function(ye,_e){var Re=function(st){return st.splice(_e,0,st.splice(ye,1)[0])};this.alterList(Re)},getRelatedContextFromMoveEvent:function(ye){var _e=ye.to,Re=ye.related,Ge=this.getUnderlyingPotencialDraggableComponent(_e);if(!Ge)return{component:Ge};var st=Ge.realList,gt={list:st,component:Ge};if(_e!==Re&&st){var yt=Ge.getUnderlyingVm(Re)||{};return f(f({},yt),gt)}return gt},getVmIndexFromDomIndex:function(ye){return this.componentStructure.getVmIndexFromDomIndex(ye,this.targetDomElement)},onDragStart:function(ye){this.context=this.getUnderlyingVm(ye.item),ye.item._underlying_vm_=this.clone(this.context.element),Ie=ye.item},onDragAdd:function(ye){var _e=ye.item._underlying_vm_;if(_e!==void 0){b(ye.item);var Re=this.getVmIndexFromDomIndex(ye.newIndex);this.spliceList(Re,0,_e);var Ge={element:_e,newIndex:Re};this.emitChanges({added:Ge})}},onDragRemove:function(ye){if(w(this.$el,ye.item,ye.oldIndex),ye.pullMode==="clone"){b(ye.clone);return}var _e=this.context,Re=_e.index,Ge=_e.element;this.spliceList(Re,1);var st={element:Ge,oldIndex:Re};this.emitChanges({removed:st})},onDragUpdate:function(ye){b(ye.item),w(ye.from,ye.item,ye.oldIndex);var _e=this.context.index,Re=this.getVmIndexFromDomIndex(ye.newIndex);this.updatePosition(_e,Re);var Ge={element:this.context.element,oldIndex:_e,newIndex:Re};this.emitChanges({moved:Ge})},computeFutureIndex:function(ye,_e){if(!ye.element)return 0;var Re=D(_e.to.children).filter(function(yt){return yt.style.display!=="none"}),Ge=Re.indexOf(_e.related),st=ye.component.getVmIndexFromDomIndex(Ge),gt=Re.indexOf(Ie)!==-1;return gt||!_e.willInsertAfter?st:st+1},onDragMove:function(ye,_e){var Re=this.move,Ge=this.realList;if(!Re||!Ge)return!0;var st=this.getRelatedContextFromMoveEvent(ye),gt=this.computeFutureIndex(st,ye),yt=f(f({},this.context),{},{futureIndex:gt}),Ut=f(f({},ye),{},{relatedContext:st,draggedContext:yt});return Re(Ut,_e)},onDragEnd:function(){Ie=null}}}),Ke=We;i.default=Ke},fb6a:function(s,i,a){var o=a("23e7"),l=a("861d"),c=a("e8b5"),u=a("23cb"),d=a("50c4"),f=a("fc6a"),h=a("8418"),p=a("b622"),v=a("1dde"),g=a("ae40"),x=v("slice"),y=g("slice",{ACCESSORS:!0,0:0,1:2}),E=p("species"),I=[].slice,P=Math.max;o({target:"Array",proto:!0,forced:!x||!y},{slice:function(A,_){var b=f(this),w=d(b.length),C=u(A,w),T=u(_===void 0?w:_,w),k,N,B;if(c(b)&&(k=b.constructor,typeof k=="function"&&(k===Array||c(k.prototype))?k=void 0:l(k)&&(k=k[E],k===null&&(k=void 0)),k===Array||k===void 0))return I.call(b,C,T);for(N=new(k===void 0?Array:k)(P(T-C,0)),B=0;C<T;C++,B++)C in b&&h(N,B,b[C]);return N.length=B,N}})},fc6a:function(s,i,a){var o=a("44ad"),l=a("1d80");s.exports=function(c){return o(l(c))}},fdbc:function(s,i){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,i,a){var o=a("4930");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Nae);const Eie={class:"assignment-dialog-modal"},_ie={class:"form-row"},bie={key:0,class:"form-row"},Sie=["value"],Tie={key:1,class:"form-row"},Aie=["value"],wie={key:2,class:"form-row"},Iie={class:"form-row"},Cie={class:"form-row"},kie={class:"form-row"},Die={class:"dialog-actions"},Pie={__name:"AssignmentDialog",props:{teachers:Array,students:Array,assignment:Object},emits:["save","close"],setup(t,{emit:e}){const r=t,n=e,s=fe("lunch"),i=fe(""),a=fe(""),o=fe(""),l=fe("12:00"),c=fe("12:30"),u=fe(""),d=fe(""),f=fe("");Qt(()=>r.assignment,v=>{v?(d.value=v.id||Date.now().toString(),f.value=v.blockId||d.value||`block-${Date.now()}`,s.value=v.type||"lunch",i.value=v.teacherId||"",a.value=v.studentId||"",o.value=v.type==="other"?v.label:"",l.value=v.start||"12:00",c.value=v.end||"12:30",u.value=v.note||""):(d.value=Date.now().toString(),f.value=`block-${d.value}`,s.value="lunch",i.value="",a.value="",o.value="",l.value="12:00",c.value="12:30",u.value="")},{immediate:!0});const h=be(()=>{if(s.value==="lunch")return"Lunch";if(s.value==="break")return"Break";if(s.value==="class"){const v=r.teachers.find(g=>g.id===i.value);return v?v.name||v.email||v.id:""}if(s.value==="student"){const v=r.students.find(g=>g.id===a.value);return v?`${v.firstName} ${v.lastName}`:""}return s.value==="other"?o.value:""});function p(){!l.value||!c.value||s.value==="class"&&!i.value||s.value==="student"&&!a.value||s.value==="other"&&!o.value||n("save",{id:d.value,blockId:f.value,type:s.value,label:h.value,start:l.value,end:c.value,note:u.value,teacherId:i.value,studentId:a.value})}return(v,g)=>(V(),j("div",{class:"assignment-dialog-overlay",onClick:g[8]||(g[8]=Ds(x=>v.$emit("close"),["self"]))},[m("div",Eie,[g[20]||(g[20]=m("h2",null,"Add Assignment",-1)),m("form",{onSubmit:Ds(p,["prevent"])},[m("div",_ie,[g[10]||(g[10]=m("label",null,"Type:",-1)),je(m("select",{"onUpdate:modelValue":g[0]||(g[0]=x=>s.value=x)},g[9]||(g[9]=[rs('<option value="lunch" data-v-f2af98a0>Lunch</option><option value="break" data-v-f2af98a0>Break</option><option value="class" data-v-f2af98a0>Class</option><option value="student" data-v-f2af98a0>Student</option><option value="other" data-v-f2af98a0>Other</option>',5)]),512),[[vr,s.value]])]),s.value==="class"?(V(),j("div",bie,[g[12]||(g[12]=m("label",null,"Teacher:",-1)),je(m("select",{"onUpdate:modelValue":g[1]||(g[1]=x=>i.value=x)},[g[11]||(g[11]=m("option",{value:""},"Select teacher...",-1)),(V(!0),j(Ne,null,He(t.teachers,x=>(V(),j("option",{key:x.id,value:x.id},ce(x.name||x.email||x.id),9,Sie))),128))],512),[[vr,i.value]])])):Oe("",!0),s.value==="student"?(V(),j("div",Tie,[g[14]||(g[14]=m("label",null,"Student:",-1)),je(m("select",{"onUpdate:modelValue":g[2]||(g[2]=x=>a.value=x)},[g[13]||(g[13]=m("option",{value:""},"Select student...",-1)),(V(!0),j(Ne,null,He(t.students,x=>(V(),j("option",{key:x.id,value:x.id},ce(x.firstName)+" "+ce(x.lastName),9,Aie))),128))],512),[[vr,a.value]])])):Oe("",!0),s.value==="other"?(V(),j("div",wie,[g[15]||(g[15]=m("label",null,"Label:",-1)),je(m("input",{"onUpdate:modelValue":g[3]||(g[3]=x=>o.value=x),placeholder:"Custom label"},null,512),[[Ct,o.value]])])):Oe("",!0),m("div",Iie,[g[16]||(g[16]=m("label",null,"Start Time:",-1)),je(m("input",{"onUpdate:modelValue":g[4]||(g[4]=x=>l.value=x),type:"time",required:""},null,512),[[Ct,l.value]])]),m("div",Cie,[g[17]||(g[17]=m("label",null,"End Time:",-1)),je(m("input",{"onUpdate:modelValue":g[5]||(g[5]=x=>c.value=x),type:"time",required:""},null,512),[[Ct,c.value]])]),m("div",kie,[g[18]||(g[18]=m("label",null,"Note:",-1)),je(m("input",{"onUpdate:modelValue":g[6]||(g[6]=x=>u.value=x),placeholder:"Optional note"},null,512),[[Ct,u.value]])]),m("div",Die,[g[19]||(g[19]=m("button",{type:"submit",class:"btn btn-primary"},"Add",-1)),m("button",{type:"button",class:"btn btn-secondary",onClick:g[7]||(g[7]=x=>v.$emit("close"))},"Cancel")])],32)])]))}},Rie=At(Pie,[["__scopeId","data-v-f2af98a0"]]),Fie={class:"vertical-time-grid-wrapper"},Oie={class:"grid-block-label-time"},Nie=["title"],Mie=["title"],Bie=["onDragstart","onDrag","onDragend"],Lie={class:"assignment-content"},Uie={class:"assignment-label-time"},Vie={class:"assignment-time-label"},$ie={class:"assignment-actions"},jie=["onClick"],Hie=["onClick"],Gie=["onMousedown"],tT=24,zie={__name:"VerticalTimeGrid",props:{assignments:Array,teachers:Array,students:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,blocks:Array},emits:["update:assignments","edit-assignment"],setup(t,{emit:e}){const r=t,n=e,s=fe(null);fe(!1);const i=fe(r.assignments?r.assignments.map(R=>({...R})):[]);Qt(()=>r.assignments,R=>{i.value=R?R.map(O=>({...O})):[]},{immediate:!0});function a(R){const[O,U]=R.split(":").map(Number);return O*60+U}function o(R){const O=Math.floor(R/60),U=R%60;return`${O<10?"0":""}${O}:${U<10?"0":""}${U}`}const l=be(()=>!r.blocks||r.blocks.length===0?"08:00":r.blocks.reduce((R,O)=>O.startTime<R?O.startTime:R,r.blocks[0].startTime)),c=be(()=>!r.blocks||r.blocks.length===0?"16:00":r.blocks.reduce((R,O)=>O.endTime>R?O.endTime:R,r.blocks[0].endTime)),u=be(()=>a(l.value)),d=be(()=>a(c.value)),f=be(()=>d.value-u.value),h=be(()=>f.value*2.5+tT*2);be(()=>{if(!r.blocks)return[];const R=[];return r.blocks.forEach(O=>{R.includes(O.startTime)||R.push(O.startTime),R.includes(O.endTime)||R.push(O.endTime)}),R.sort((O,U)=>a(O)-a(U))});function p(R){return(a(R)-u.value)*2.5+tT-10}function v(R,O){if(!R||!O)return!1;const U=a(R.startTime),M=a(R.endTime),q=a(O.startTime),H=a(O.endTime);return U<H&&M>q}function g(R){const O=[];for(let M=0;M<R.length;M++){const q=R[M];let H=null;for(let L=0;L<O.length;L++)if(O[L].ids.some(z=>v(q,R.find(K=>K.id===z)))){H=O[L];break}H?(H.ids.push(q.id),H.blocks.push(q)):O.push({ids:[q.id],blocks:[q]})}let U=!0;for(;U;){U=!1;for(let M=0;M<O.length;M++){for(let q=M+1;q<O.length;q++)if(O[M].ids.some(H=>O[q].ids.some(L=>v(R.find(z=>z.id===H),R.find(z=>z.id===L))))){O[M].ids=Array.from(new Set([...O[M].ids,...O[q].ids])),O[M].blocks=Array.from(new Set([...O[M].blocks,...O[q].blocks])),O.splice(q,1),U=!0;break}if(U)break}}return O.map(M=>{const q=M.blocks.sort((z,K)=>z.startTime.localeCompare(K.startTime)||z.id.localeCompare(K.id)),H=q.reduce((z,K)=>K.startTime<z?K.startTime:z,q[0].startTime),L=q.reduce((z,K)=>K.endTime>z?K.endTime:z,q[0].endTime);return{ids:M.ids,startTime:H,endTime:L}})}be(()=>g(x.value));const x=be(()=>(r.blocks||[]).map((R,O)=>({...R,id:R.id||`block-${O}`})));function y(R){const O=[];for(let q=0;q<R.length;q++){const H=R[q];let L=null;for(let z=0;z<O.length;z++)if(O[z].some(K=>v(H,R.find(te=>te.id===K)))){L=O[z];break}L?L.push(H.id):O.push([H.id])}let U=!0;for(;U;){U=!1;for(let q=0;q<O.length;q++){for(let H=q+1;H<O.length;H++)if(O[q].some(L=>O[H].some(z=>v(R.find(K=>K.id===L),R.find(K=>K.id===z))))){O[q]=Array.from(new Set([...O[q],...O[H]])),O.splice(H,1),U=!0;break}if(U)break}}const M={};for(const q of O){const H=q.map(L=>R.find(z=>z.id===L)).sort((L,z)=>L.startTime.localeCompare(z.startTime)||L.id.localeCompare(z.id));H.forEach((L,z)=>{M[L.id]={groupSize:H.length,colIndex:z}})}return M}function E(R,O){const U=y(x.value)[R.id]||{groupSize:1,colIndex:0},M=p(R.startTime),q=(a(R.endTime)-a(R.startTime))*2.5,H=100/U.groupSize;return{position:"absolute",left:H*U.colIndex+"%",width:H+"%",top:M+"px",height:q+"px",zIndex:1,opacity:.38,boxSizing:"border-box",overflow:"hidden"}}function I(R,O){const U=i.value.filter((Z,Q)=>{if(Z.id===R.id)return!1;const xe=a(Z.start),X=a(Z.end),W=a(R.start),Y=a(R.end);return xe<Y&&X>W}),M=U.length+1,H=[R,...U].sort((Z,Q)=>Z.start.localeCompare(Q.start)||Z.id.localeCompare(Q.id)).findIndex(Z=>Z.id===R.id),L=p(R.start),z=(a(R.end)-a(R.start))*2.5,K=Math.max(z,2.5),te=73,ge=27,ie=te/M;return{position:"absolute",left:ge+ie*H+"%",width:ie+"%",top:L+"px",height:K+"px",zIndex:2,minWidth:"80px",boxSizing:"border-box",padding:"4px",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",cursor:"grab",transition:"top 0.2s, height 0.2s"}}const P=fe(null),D=fe(0),A=fe(0),_=fe(null);function b(R,O){P.value=O,D.value=R.clientY,A.value=a(O.start),_.value="move",O.isDragging=!0,R.target.classList.add("background-dragging-div");const M=document.createElement("div");M.className="drag-preview-div",M.style.width="160px",M.style.height="40px",M.style.background="transparent",M.style.border="2px solid #007bff",M.style.position="absolute",M.style.top="-9999px",M.style.left="-9999px",document.body.appendChild(M),R.dataTransfer.setDragImage(M,80,20),R.dataTransfer.effectAllowed="move",R.dataTransfer.setData("text/plain",O.id)}function w(R,O){if(!P.value||R.clientY===0)return;const U=R.clientY-D.value,M=Math.round(U/2.5);if(_.value==="move"){let q=A.value+M,H=q+(a(O.end)-a(O.start));q=Math.max(u.value,Math.min(q,d.value-1)),H=Math.max(q+1,Math.min(H,d.value)),O.start=o(q),O.end=o(H)}}function C(R,O){P.value=null,_.value=null,O.isDragging=!1,n("update:assignments",i.value)}function T(R,O){P.value=O,D.value=R.clientY,A.value=a(O.end),_.value="resize",window.addEventListener("mousemove",k),window.addEventListener("mouseup",N)}function k(R){if(!P.value)return;const O=R.clientY-D.value;let U=A.value+Math.round(O/2.5);const M=a(P.value.start);U=Math.max(M+1,Math.min(U,d.value)),P.value.end=o(U)}function N(R){P.value=null,_.value=null,window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",N)}function B(R){const O=i.value.findIndex(U=>U.id===R);O!==-1&&(i.value.splice(O,1),n("update:assignments",i.value))}return(R,O)=>(V(),j("div",Fie,[m("div",{class:"vertical-time-grid",ref_key:"timeGridRef",ref:s,style:bn({position:"relative",height:h.value+"px"})},[(V(!0),j(Ne,null,He(x.value,(U,M)=>(V(),j("div",{key:U.id,class:ut(["grid-block-bg",U.type==="period"?"blocktype-period":"blocktype-"+(U.type||"period")]),style:bn(E(U))},[m("div",Oie,[m("span",{class:"grid-block-label",title:U.name||(U.type==="period"?U.label||U.periodName||U.periodNumber||"Period":U.type?U.type.charAt(0).toUpperCase()+U.type.slice(1):"")},ce(U.name||(U.type==="period"?U.label||U.periodName||U.periodNumber||"Period":U.type?U.type.charAt(0).toUpperCase()+U.type.slice(1):"")),9,Nie),m("span",{class:"grid-block-time",title:U.startTime},ce(U.startTime),9,Mie)])],6))),128)),(V(!0),j(Ne,null,He(i.value,(U,M)=>(V(),j("div",{key:U.id,class:ut(["dialog-assignment-box",["type-"+(U.type||"other"),{dragging:U.isDragging}]]),style:bn(I(U)),draggable:"true",onDragstart:q=>b(q,U),onDrag:q=>w(q,U),onDragend:q=>C(q,U)},[m("div",Lie,[m("div",Uie,[m("span",Vie,ce(U.start)+""+ce(U.end)+" "+ce(U.label),1)])]),m("div",$ie,[m("button",{class:"edit-btn",onClick:q=>R.$emit("edit-assignment",U)},"",8,jie),m("button",{class:"delete-btn",onClick:q=>B(U.id)},"",8,Hie)]),m("div",{class:"resize-handle",onMousedown:Ds(q=>T(q,U),["stop"]),title:"Drag to resize block"},null,40,Gie)],46,Bie))),128))],4)]))}},Wie=At(zie,[["__scopeId","data-v-8f5880e4"]]),Kie={class:"dialog-header"},qie={class:"dialog-header-actions"},Xie={class:"dialog-content"},Yie={style:{display:"flex","align-items":"flex-start"}},Qie={class:"dialog-actions"},Jie=["disabled"],Zie={key:0},eoe={key:1},toe={__name:"AideScheduleEditDialog",props:{aideName:String,timeTicks:Array,isTickInAnyBlock:Function,aideAssignments:Array,getAssignmentBoxStyle:Function,onAssignmentDragStart:Function,onAssignmentDrag:Function,onAssignmentDragEnd:Function,onResizeStart:Function,showAddAssignment:Boolean,addAssignment:Function,onImportAssignments:Function,onSave:Function,onClose:Function,saving:Boolean,blocks:Array,teachers:Array,students:Array},setup(t){const e=t,r=fe([]),n=fe(!1),s=fe(null);tr(()=>{console.log("DEBUG: AideScheduleEditDialog mounted, blocks:",e.blocks)}),Qt(()=>e.blocks,d=>{console.log("DEBUG: props.blocks in AideScheduleEditDialog",d)});function i(){e.onSave(r.value)}function a(){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],n.value=!0}function o(d){r.value=e.aideAssignments?JSON.parse(JSON.stringify(e.aideAssignments)):[],s.value={...d},n.value=!0}function l(d){if(s.value){const f=r.value.findIndex(h=>h.id===d.id);f!==-1&&(r.value[f]={...d}),s.value=null}else r.value=[...r.value,d];n.value=!1}function c(){s.value=null,n.value=!1}function u(d){console.log("handleUpdateAssignments called with:",d),r.value=d}return(d,f)=>(V(),j("div",{class:"dialog-overlay",onClick:f[4]||(f[4]=(...h)=>t.onClose&&t.onClose(...h))},[m("div",{class:"edit-dialog",onClick:f[3]||(f[3]=Ds(()=>{},["stop"]))},[m("div",Kie,[m("h2",null,"Edit Schedule: "+ce(t.aideName),1),m("div",qie,[m("button",{onClick:f[0]||(f[0]=(...h)=>t.onImportAssignments&&t.onImportAssignments(...h)),class:"btn btn-secondary btn-import-assignments"},"Import Aide Assignments"),m("button",{onClick:a,class:"btn btn-primary btn-add-assignment"},"Add Assignment"),m("button",{onClick:f[1]||(f[1]=(...h)=>t.onClose&&t.onClose(...h)),class:"btn btn-secondary close-btn"},"")])]),m("div",Xie,[m("div",Yie,[at(Wie,{timeTicks:t.timeTicks,isTickInAnyBlock:t.isTickInAnyBlock,assignments:r.value,getAssignmentBoxStyle:t.getAssignmentBoxStyle,onAssignmentDragStart:t.onAssignmentDragStart,onAssignmentDrag:t.onAssignmentDrag,onAssignmentDragEnd:t.onAssignmentDragEnd,onResizeStart:t.onResizeStart,blocks:t.blocks,onEditAssignment:o,"onUpdate:assignments":u},null,8,["timeTicks","isTickInAnyBlock","assignments","getAssignmentBoxStyle","onAssignmentDragStart","onAssignmentDrag","onAssignmentDragEnd","onResizeStart","blocks"])]),n.value?(V(),Tn(Rie,{key:0,teachers:t.teachers,students:t.students,assignment:s.value,onSave:l,onClose:c},null,8,["teachers","students","assignment"])):Oe("",!0)]),m("div",Qie,[m("button",{onClick:i,class:"btn btn-primary",disabled:t.saving},[t.saving?(V(),j("span",Zie,"")):(V(),j("span",eoe,"")),Ve(" "+ce(t.saving?"Saving...":"Save Schedule"),1)],8,Jie),m("button",{onClick:f[2]||(f[2]=(...h)=>t.onClose&&t.onClose(...h)),class:"btn btn-secondary"},"Cancel")])])]))}},roe={class:"master-schedule"},noe={key:0,class:"no-time-table"},soe={class:"no-data-message"},aoe={key:1,class:"schedule-graph-container"},ioe={class:"timeline-header"},ooe={class:"block-time"},loe={class:"block-name"},coe={class:"block-time"},uoe={class:"aide-header"},doe={class:"aide-name"},foe=["onClick"],hoe={class:"time-line-container"},poe={class:"time-blocks-background"},moe={class:"assignment-bars"},goe={class:"assignment-label"},_g=30,voe={__name:"AideScheduleMasterTable",props:{paraeducators:Array,blocks:Array,getAideTimeBlocks:Function,getAideName:Function,currentTimeTable:Object},emits:["editAideAssignment","gotoTimeTableConfig"],setup(t,{emit:e}){const r=t,n=fe([]);function s(x){const y=r.getAideTimeBlocks(x).filter(E=>E.assignment).map(E=>({id:E.id,label:E.assignment,type:E.assignmentType,start:E.start||E.displayTime.split(" - ")[0],end:E.end||E.displayTime.split(" - ")[1]}));return i(y)}function i(x){if(x.length===0)return[];const y=[...x].sort((D,A)=>d(D.start)-d(A.start)),E=[];let I=[];for(const D of y)I.length===0?I=[D]:I.some(_=>d(D.start)<d(_.end)&&d(D.end)>d(_.start))?I.push(D):(E.push(I),I=[D]);I.length>0&&E.push(I);const P=[];for(const D of E)D.forEach((A,_)=>{A.overlapIndex=_,A.overlapCount=D.length,P.push(A)});return P}function a(x){if(!x.overlapCount||x.overlapCount<=1)return 10;const y=40;return(60-(x.overlapCount*y+(x.overlapCount-1)*2))/2+x.overlapIndex*(y+2)}function o(x){if(!r.blocks||r.blocks.length===0)return 0;const y=r.blocks[0],E=r.blocks[r.blocks.length-1],I=d(y.startTime),D=d(E.endTime)-I,_=(d(x)-I)/D*100;return Math.max(0,Math.min(95,_))}function l(x,y){if(!r.blocks||r.blocks.length===0)return 10;const E=r.blocks[0],I=r.blocks[r.blocks.length-1],P=d(E.startTime),A=d(I.endTime)-P,_=d(x),w=(d(y)-_)/A*100;return Math.max(5,Math.min(95,w))}function c(x){if(!r.blocks||r.blocks.length===0)return 0;const y=r.blocks[0],E=r.blocks[r.blocks.length-1],I=d(y.startTime),D=d(E.endTime)-I,_=(d(x)-I)/D*100;return Math.max(0,Math.min(95,_))}function u(x,y){if(!r.blocks||r.blocks.length===0)return 10;const E=r.blocks[0],I=r.blocks[r.blocks.length-1],P=d(E.startTime),A=d(I.endTime)-P,_=d(x),w=(d(y)-_)/A*100;return Math.max(5,Math.min(95,w))}function d(x){const[y,E]=x.split(":").map(Number);return y*60+E}function f(x){var E;const y=((E=x.name)==null?void 0:E.toLowerCase())||"";return y.includes("lunch")?"lunch":y.includes("break")||y.includes("recess")?"break":y.includes("period")||y.includes("class")?"period":"other"}function h(x){const y=[...x].sort((P,D)=>d(P.startTime)-d(D.startTime)),E=[];for(const P of y){let D=!1;for(let A=0;A<E.length;A++){const _=E[A];if(!_.some(w=>d(P.startTime)<d(w.endTime)&&d(P.endTime)>d(w.startTime))){_.push(P),P.overlapIndex=A,D=!0;break}}D||(P.overlapIndex=E.length,E.push([P]))}const I=E.length;return y.map(P=>({...P,overlapIndex:P.overlapIndex,overlapCount:I}))}const p=be(()=>h(r.blocks||[])),v=be(()=>Math.max(...p.value.map(x=>x.overlapCount||1),1)),g=be(()=>v.value*_g);return Qt(()=>r.aideAssignments,x=>{n.value=x?JSON.parse(JSON.stringify(x)):[]},{immediate:!0}),(x,y)=>(V(),j("div",roe,[y[4]||(y[4]=m("h2",null,"Master Schedule View",-1)),DA(x.$slots,"tab-bar",{},void 0,!0),!t.currentTimeTable||!t.currentTimeTable.schedule||t.currentTimeTable.schedule.length===0?(V(),j("div",noe,[m("div",soe,[y[1]||(y[1]=m("h3",null,"No Time Table Configured",-1)),y[2]||(y[2]=m("p",null,"You need to configure a time table first before you can create aide assignments.",-1)),m("button",{onClick:y[0]||(y[0]=E=>x.$emit("gotoTimeTableConfig")),class:"btn btn-primary"}," Go to Time Table Configuration ")])])):(V(),j("div",aoe,[m("div",ioe,[y[3]||(y[3]=m("div",{class:"aide-name-header"},"Aide Name",-1)),m("div",{class:"timeline-container",style:bn({height:g.value+"px"})},[m("div",{class:"time-blocks-header",style:bn({height:g.value+"px"})},[(V(!0),j(Ne,null,He(p.value,E=>(V(),j("div",{key:E.id+"-"+E.overlapIndex,class:ut(["time-block-header",f(E)]),style:bn({left:o(E.startTime)+"%",width:l(E.startTime,E.endTime)+"%",top:E.overlapIndex*_g+"px",height:_g+"px",zIndex:10})},[m("div",ooe,ce(E.startTime),1),m("div",loe,ce(E.name||E.type),1),m("div",coe,ce(E.endTime),1)],6))),128))],4)],4)]),(V(!0),j(Ne,null,He(t.paraeducators,E=>(V(),j("div",{key:E.id,class:"aide-row"},[m("div",uoe,[m("span",doe,ce(t.getAideName(E.id)),1),m("button",{onClick:I=>x.$emit("editAideAssignment",E.id),class:"btn btn-small btn-primary edit-btn"}," Edit ",8,foe)]),m("div",hoe,[m("div",poe,[(V(!0),j(Ne,null,He(t.blocks,I=>(V(),j("div",{key:I.id,class:ut(["time-block-bg",f(I)]),style:bn({left:o(I.startTime)+"%",width:l(I.startTime,I.endTime)+"%"})},null,6))),128)),(V(!0),j(Ne,null,He(t.blocks.slice(0,-1),(I,P)=>(V(),j("div",{key:`bg-gap-${I.id}`,class:"time-block-bg-gap",style:bn({left:o(I.endTime)-.5+"%",width:"1%"})},null,4))),128))]),m("div",moe,[(V(!0),j(Ne,null,He(s(E.id),I=>(V(),j("div",{key:I.id,class:ut(["master-assignment-bar",I.type]),style:bn({left:c(I.start)+"%",width:u(I.start,I.end)+"%",top:a(I)+"px"})},[m("span",goe,ce(I.label),1)],6))),128))])])]))),128))]))]))}},xoe=At(voe,[["__scopeId","data-v-40c5158e"]]);function F0(t){return(t==null?void 0:t.schedule)||[]}function yoe(t){let e="23:59",r="00:00";for(const n of t)n.startTime&&n.startTime<e&&(e=n.startTime),n.endTime&&n.endTime>r&&(r=n.endTime);return{min:e,max:r}}function Eoe(t){return be(()=>{const{min:e,max:r}=yoe(t.value||t),[n,s]=e.split(":").map(Number),[i,a]=r.split(":").map(Number);let o=[],l=n,c=s;for(;l<i||l===i&&c<=a;){const d=l<10?`0${l}`:`${l}`,f=c<10?`0${c}`:`${c}`;o.push({time:`${d}:${f}`}),c+=5,c>=60&&(c=0,l++)}const u=(t.value||t).map(d=>d.startTime);for(const d of u)o.find(f=>f.time===d)||o.push({time:d});return o=Array.from(new Set(o.map(d=>d.time))).sort().map(d=>({time:d})),o})}function _oe(t,e){return e.some(r=>r.startTime<=t&&r.endTime>=t)}const boe={class:"admin-aide-schedule-detailed"},Soe={class:"header"},Toe={class:"header-actions"},Aoe=["disabled"],woe={key:0},Ioe={key:1},Coe={class:"content"},koe={key:0,class:"error-message"},Doe={key:1,class:"error-message"},Poe={key:2,class:"loading"},Roe={key:3,class:"schedule-container"},Foe={key:0,class:"time-table-tab-bar"},Ooe=["onClick"],vP={__name:"AdminAideSchedule",setup(t){const e=Al(),r=Ei(),{userList:n,fetchUsers:s}=pa(),{students:i,fetchStudents:a}=Ua(),{appSettings:o,loadAppSettings:l,saveAppSettings:c}=ma(),{labels:u}=Pf(),{aideSchedule:d,loadAideSchedules:f,saveAideSchedule:h}=Oae(),{aideAssignment:p}=yy(),v=fe(!0),g=fe(!1),x=fe(null),y=fe({}),E=fe({}),I=fe(null);fe([]);const P=fe({}),D=be(()=>y.value&&Array.isArray(y.value.timeTables)&&y.value.timeTables.length>0?y.value.timeTables.map((se,le)=>({id:se.name?se.name.toLowerCase().replace(/\s+/g,"-"):`tt-${le}`,label:se.name||`Time Table ${le+1}`,...se})):y.value&&y.value.schedule?[{id:"default",label:y.value.label||"Default Schedule",schedule:y.value.schedule}]:[]);tr(async()=>{console.log("Loaded timeTableData:",y.value),console.log("Computed allTimeTables:",D.value),D.value.length>0&&!I.value&&(I.value=D.value[0].id,console.log("Set selectedTimeTable:",I.value)),await l(),o.value.timeTables&&Array.isArray(o.value.timeTables)?(y.value={timeTables:o.value.timeTables},console.log("Set timeTableData to timeTables array:",y.value)):o.value.schedule&&(y.value={schedule:o.value.schedule},console.log("Set timeTableData to single schedule:",y.value))}),Qt(D,se=>{console.log("allTimeTables changed:",se)}),Qt(I,se=>{console.log("selectedTimeTable changed:",se)});const A=be(()=>{const se=D.value.find(le=>le.id===I.value)||D.value[0];return console.log("currentTimeTable:",se),se}),_=be(()=>F0(A.value)),b=Eoe(_);function w(se){return _oe(se,_.value)}const C=be(()=>{var le;const se=(le=r.currentUser)==null?void 0:le.role;return["admin","administrator","sped_chair","administrator_504_CM"].includes(se)}),T=be(()=>{var se;return((se=n.value)==null?void 0:se.filter(le=>le.role==="paraeducator"))||[]}),k=be(()=>{var se;return((se=n.value)==null?void 0:se.filter(le=>le.role==="teacher"))||[]});be(()=>u.value);function N(se){if(!_.value)return[];console.log("DEBUG: getAideTimeBlocks called for aide:",se),console.log("DEBUG: aideSchedule.value:",d.value),console.log("DEBUG: aideAssignment.value:",p.value);const Te=(d.value[se]||{}).schedule||{};console.log("DEBUG: aideScheduleData:",Te);const we=Object.values(Te).filter(Se=>Se.start&&Se.end&&Se.label).map(Se=>({id:Se.id||Se.blockId||`assignment-${Date.now()}`,assignment:Se.label,assignmentType:Se.type||"custom",displayTime:`${Se.start} - ${Se.end}`,start:Se.start,end:Se.end}));return console.log("DEBUG: individualAssignments:",we),we.length>0?we:(console.log("DEBUG: No individual assignments found, adding test data"),[{id:"test-1",assignment:"Test Class Assignment",assignmentType:"class",displayTime:"08:00 - 09:00",start:"08:00",end:"09:00"},{id:"test-2",assignment:"Test Student Assignment",assignmentType:"student",displayTime:"10:00 - 11:00",start:"10:00",end:"11:00"}])}function B(se){const le=T.value.find(Te=>Te.id===se);return le?le.name||le.email:"Unknown Aide"}function R(se){x.value=se,Z.value=!0}function O(){x.value=null}async function U(){try{g.value=!0;const le={...await l(),detailedAideSchedule:E.value};await c(le),console.log("Detailed aide schedule saved successfully")}catch(se){console.error("Error saving detailed aide schedule:",se)}finally{g.value=!1}}function M(){e.push("/admin")}async function q(){try{v.value=!0,await Promise.all([s(),a(),l()]);const se=await $r(xt(ot,"app_settings","global"));if(se.exists()){const le=se.data();E.value=le.detailedAideSchedule||{}}v.value=!1}catch(se){console.error("Error loading aide schedule data:",se),v.value=!1}}tr(q);function H(se,le){return se.assignments&&se.assignments[le]||""}function L(){var Se,ze;if(console.log("DEBUG: handleImportAssignments called"),console.log("DEBUG: editingAideId.value:",x.value),console.log("DEBUG: aideAssignment.value:",p.value),console.log("DEBUG: All aide IDs:",Object.keys(p.value)),console.log("DEBUG: All aide data:",Object.entries(p.value).map(([Ie,$e])=>({id:Ie,keys:Object.keys($e)}))),!x.value||!p.value[x.value]){console.log("DEBUG: No aide data found"),alert("No aide assignment data found for this aide.");return}const se=Y.value.length;if(se>0&&!confirm(`WARNING: This will remove ${se} current assignments and replace them with imported assignments.

Do you want to continue?`))return;const le=p.value[x.value];console.log("DEBUG: aideData:",le),console.log("DEBUG: aideData.classAssignment:",le.classAssignment),console.log("DEBUG: aideData.directAssignment:",le.directAssignment),console.log("DEBUG: Object.keys(aideData):",Object.keys(le)),console.log("DEBUG: aideData.schedule:",le.schedule),console.log("DEBUG: typeof aideData.schedule:",typeof le.schedule),console.log("DEBUG: Array.isArray(aideData.schedule):",Array.isArray(le.schedule));let Te=0;Y.value=[];const we=F0(A.value);console.log("DEBUG: timeTableBlocks:",we),console.log("DEBUG: timeTableBlocks with period numbers:",we.map(Ie=>({name:Ie.name,periodNumber:Ie.periodNumber,type:Ie.type})));for(const Ie of we){console.log("DEBUG: Processing block:",Ie),console.log("DEBUG: Block periodNumber:",Ie.periodNumber),console.log("DEBUG: Block name:",Ie.name),console.log("DEBUG: Available classAssignment keys:",Object.keys(le.classAssignment||{}));let $e=Ie.periodNumber;if(!$e&&Ie.name){const Ke=Ie.name.match(/Period\s*(\d+)/i);Ke&&($e=Ke[1],console.log("DEBUG: Extracted periodNumber from name:",$e))}let Be="",We=[];if($e&&le.classAssignment&&le.classAssignment[$e]){console.log("DEBUG: Found class assignment for periodNumber:",$e);const Ke=Array.isArray(le.classAssignment[$e])?le.classAssignment[$e]:[le.classAssignment[$e]];We=Ke.filter(Boolean).map(Ee=>{const ye=k.value.find(_e=>_e.id===Ee);return ye?ye.name||ye.email:"Unknown Teacher"}),Be=Ke.filter(Boolean).map(Ee=>`teacher:${Ee}`).join(","),console.log("DEBUG: Created assignment for periodNumber:",Be)}if(!Be&&Ie.name&&le.classAssignment){console.log("DEBUG: Trying to match by block name:",Ie.name);const Ke=Object.keys(le.classAssignment).find(Ee=>Ee.toLowerCase().trim()===Ie.name.toLowerCase().trim());if(Ke){console.log("DEBUG: Found match by block name:",Ke);const Ee=Array.isArray(le.classAssignment[Ke])?le.classAssignment[Ke]:[le.classAssignment[Ke]];We=Ee.filter(Boolean).map(ye=>{const _e=k.value.find(Re=>Re.id===ye);return _e?_e.name||_e.email:"Unknown Teacher"}),Be=Ee.filter(Boolean).map(ye=>`teacher:${ye}`).join(","),console.log("DEBUG: Created assignment for block name:",Be)}}if(Be){const Ke=Ie.startTime,Ee=z(Ie.startTime,30),ye=Be.split(",").map(Re=>Re.replace("teacher:","")).filter(Boolean),_e={id:`imported-class-${Date.now()}-${Te}`,label:We.join(", "),start:Ke,end:Ee,type:"class",blockId:`imported-block-${Te}`,teacherId:ye[0]||"",note:ye.length>1?`Multiple teachers: ${We.join(", ")}`:""};console.log("DEBUG: Adding new assignment:",_e),Y.value.push(_e),Te++}}if(console.log("DEBUG: Checking direct assignments..."),console.log("DEBUG: aideData.directAssignment:",le.directAssignment),console.log("DEBUG: typeof aideData.directAssignment:",typeof le.directAssignment),console.log("DEBUG: Array.isArray(aideData.directAssignment):",Array.isArray(le.directAssignment)),le.directAssignment){console.log("DEBUG: Found directAssignment:",le.directAssignment);const Ie=Array.isArray(le.directAssignment)?le.directAssignment:[le.directAssignment];console.log("DEBUG: directStudentIds:",Ie),console.log("DEBUG: students.value length:",(Se=i.value)==null?void 0:Se.length),console.log("DEBUG: students.value sample:",(ze=i.value)==null?void 0:ze.slice(0,3));for(const $e of Ie)if(console.log("DEBUG: Processing studentId:",$e),$e&&$e!==""){const Be=i.value.find(We=>We.id===$e);if(console.log("DEBUG: Found student:",Be),Be){const We=`${ct(Be,"firstName")} ${ct(Be,"lastName")}`;console.log("DEBUG: Student name:",We);const Ke=F0(A.value).find(Ee=>Ee.type==="period");if(console.log("DEBUG: First period block:",Ke),Ke){const Ee=Ke.startTime,ye=z(Ke.startTime,30),_e={id:`imported-direct-${Date.now()}-${Te}`,label:We,start:Ee,end:ye,type:"student",blockId:`imported-direct-block-${Te}`,studentId:$e};console.log("DEBUG: Adding direct assignment:",_e),Y.value.push(_e),Te++}}}}else console.log("DEBUG: No directAssignment found");if(console.log("DEBUG: Final importedCount:",Te),console.log("DEBUG: Final localAideAssignments:",Y.value),Te>0){alert(`Successfully imported ${Te} assignments with 30-minute time spans.

Types: Class assignments set to 'class', Direct assignments set to 'student'
Labels: Teacher names for class assignments, Student names for direct assignments
Duration: 30 minutes each`);const Ie=x.value,$e=d.value[Ie]||{},Be={};Y.value.forEach(Ke=>{const Ee=Ke.blockId||Ke.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Be[Ee]={id:Ke.id,blockId:Ee,type:Ke.type,label:Ke.label,start:Ke.start,end:Ke.end,note:Ke.note,teacherId:Ke.teacherId,studentId:Ke.studentId}});const We={...$e,schedule:Be};h(Ie,We).then(()=>{f().then(()=>{O(),yl(()=>{R(Ie)})})})}else alert("No matching assignments found in the Aide Assignment data for this schedule.")}function z(se,le){const[Te,we]=se.split(":").map(Number),Se=Te*60+we+le,ze=Math.floor(Se/60),Ie=Se%60;return`${ze.toString().padStart(2,"0")}:${Ie.toString().padStart(2,"0")}`}Qt(()=>F0(A.value),se=>{const le={};for(const Te of se){const we=H(Te,x.value);le[Te.id]=we?[{id:we,value:we}]:[]}P.value=le},{immediate:!0});function K(se,le){Q.value=le,xe.value=se.clientY,X.value=b.value.findIndex(Te=>Te.time===le.start),W.value=0,se.dataTransfer.effectAllowed="move",se.dataTransfer.setData("text/plain",le.id)}function te(se,le){if(!Q.value||se.clientY===0)return;const Te=se.clientY-xe.value;W.value=Te,le._dragOffset=Te}function ge(se,le){if(!Q.value)return;const Te=24,we=b.value.length;let Se=X.value+Math.round(W.value/Te);Se=Math.max(0,Math.min(we-2,Se));const ze=b.value[Se].time,Ie=b.value.findIndex(We=>We.time===le.end)-X.value;let $e=Se+Ie;$e=Math.max(Se+1,Math.min(we-1,$e));const Be=b.value[$e].time;le.start=ze,le.end=Be,le._dragOffset=0,Q.value=null,W.value=0}function ie(se){const le=b.value.findIndex(Be=>Be.time===se.start),Te=b.value.findIndex(Be=>Be.time===se.end),we=24;if(le===-1||Te===-1)return{display:"none"};const Se=le*we+(se._dragOffset||0),ze=Math.max((Te-le)*we,we);let Ie,$e;return se.type==="class"?(Ie="#e8f4fd",$e="#4a90e2"):se.type==="student"?(Ie="#f0f8e8",$e="#7cb342"):(Ie="#f5f5f5",$e="#9e9e9e"),{position:"absolute",left:"20px",top:`${Se}px`,height:`${ze}px`,width:"200px",minHeight:"24px",background:Ie,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#333",border:`2px solid ${$e}`,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"grab",zIndex:2,transition:Q.value===se?"none":"top 0.2s"}}function he(){const se=_.value&&_.value.length>0?_.value[0].startTime:"08:00",le=_.value&&_.value.length>0?_.value[0].endTime:"08:30";Y.value.push({id:`custom:${Date.now()}`,label:"",start:se,end:le,blockId:`block-${Date.now()}`})}const Z=fe(!1);fe(null);const Q=fe(null),xe=fe(0),X=fe(0),W=fe(0),Y=fe([]);Qt(x,se=>{if(!se){Y.value=[];return}const Te=(d.value[se]||{}).schedule||{};Y.value=Object.entries(Te).map(([we,Se])=>({id:we+"-"+(se||""),label:Se.label||"",start:Se.start,end:Se.end,blockId:we,type:Se.type||"lunch",teacherId:Se.teacherId||"",studentId:Se.studentId||"",note:Se.note||""}))},{immediate:!0});async function ee(se){if(x.value)try{g.value=!0;const le=d.value[x.value]||{},Te={};se.forEach(Se=>{const ze=Se.blockId||Se.id||`block-${Date.now()}-${Math.random().toString(36).slice(2)}`;Te[ze]={id:Se.id,blockId:ze,type:Se.type,label:Se.label,start:Se.start,end:Se.end,note:Se.note,teacherId:Se.teacherId,studentId:Se.studentId}});const we={...le,schedule:Te};await h(x.value,we),await f(),O(),alert("Schedule saved!")}catch(le){alert("Failed to save schedule: "+le.message)}finally{g.value=!1}}Qt(()=>_,se=>{console.log("DEBUG: blocks",se)},{immediate:!0}),Qt(x,se=>{se&&(console.log("DEBUG: Opening edit dialog for aide",se),console.log("DEBUG: blocks passed to dialog",_.value))});function ve(se,le){console.log("Resize start:",le)}function re(){he()}return(se,le)=>(V(),j("div",boe,[m("div",Soe,[le[4]||(le[4]=m("h1",null,"Aide Schedule Management",-1)),m("div",Toe,[m("button",{onClick:U,class:"btn btn-primary",disabled:g.value},[g.value?(V(),j("span",woe,"")):(V(),j("span",Ioe,"")),Ve(" "+ce(g.value?"Saving...":"Save Schedule"),1)],8,Aoe),m("button",{onClick:M,class:"btn btn-secondary"},le[3]||(le[3]=[m("span",null,"",-1),Ve(" Back ")]))])]),m("div",Coe,[me(r).currentUser?C.value?v.value?(V(),j("div",Poe," Loading aide schedules... ")):(V(),j("div",Roe,[at(xoe,{paraeducators:T.value,blocks:_.value,getAideTimeBlocks:N,getAideName:B,currentTimeTable:A.value,onEditAideAssignment:R,onGotoTimeTableConfig:le[2]||(le[2]=()=>me(e).push("/admin?tab=time-table"))},{"tab-bar":Ep(()=>[D.value.length>1?(V(),j("div",Foe,[(V(!0),j(Ne,null,He(D.value,Te=>(V(),j("div",{key:Te.id,class:ut(["tab-btn",{active:I.value===Te.id}]),onClick:we=>I.value=Te.id},ce(Te.label),11,Ooe))),128))])):Oe("",!0)]),_:1},8,["paraeducators","blocks","currentTimeTable"]),x.value?(V(),Tn(toe,{key:0,aideName:B(x.value),timeTicks:me(b),isTickInAnyBlock:w,aideAssignments:Y.value,getAssignmentBoxStyle:ie,onAssignmentDragStart:K,onAssignmentDrag:te,onAssignmentDragEnd:ge,onResizeStart:ve,showAddAssignment:Z.value,addAssignment:re,onImportAssignments:L,onSave:ee,onClose:O,saving:g.value,blocks:_.value,teachers:k.value,students:me(i)},null,8,["aideName","timeTicks","aideAssignments","showAddAssignment","saving","blocks","teachers","students"])):Oe("",!0)])):(V(),j("div",Doe,[le[7]||(le[7]=m("h2",null,"Access Denied",-1)),le[8]||(le[8]=m("p",null,"You do not have permission to access this page.",-1)),m("button",{onClick:le[1]||(le[1]=Te=>me(e).push("/")),class:"btn btn-primary"},"Go Home")])):(V(),j("div",koe,[le[5]||(le[5]=m("h2",null,"Authentication Required",-1)),le[6]||(le[6]=m("p",null,"Please log in to access this page.",-1)),m("button",{onClick:le[0]||(le[0]=Te=>me(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])]))}},Noe={name:"AdminBackupRestore",setup(){const t=fe([{id:"users",name:"Users"},{id:"students",name:"Students"},{id:"app_settings",name:"App Settings"},{id:"aideSchedules",name:"Aide Schedules"},{id:"aideAssignments",name:"Aide Assignments"}]),e=fe(["users","students","app_settings"]),r=fe(""),n=fe(!1),s=fe(!1),i=fe(null),a=fe(null),o=fe([]),l=fe(""),c=fe("info"),u=Ws({overwrite:!1,validate:!0}),d=fe(null),f=async()=>{try{const N=Ht(ot,"backups"),B=Jr(N,Ja("createdAt","desc"),Wi(20)),R=await fr(B);o.value=R.docs.map(O=>({id:O.id,...O.data()}))}catch(N){console.error("Error loading backups:",N),I("Error loading backups","error")}},h=async()=>{if(e.value.length===0){I("Please select at least one collection","error");return}n.value=!0,I("Creating backup...","info");try{const N={metadata:{version:"1.0",createdAt:new Date().toISOString(),createdBy:"admin",description:r.value||"Manual backup"},collections:{}};for(const O of e.value)if(O==="app_settings"){const U=xt(ot,"app_settings","global"),M=await $r(U);N.collections[O]=M.exists()?M.data():{}}else{const U=Ht(ot,O),M=await fr(U);N.collections[O]=M.docs.map(q=>({id:q.id,...q.data()}))}const B=`backup_${Date.now()}`,R=xt(ot,"backups",B);await br(R,{name:r.value||`Backup ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString(),collections:e.value,size:JSON.stringify(N).length,data:N}),r.value="",await f(),I("Backup created successfully!","success")}catch(N){console.error("Error creating backup:",N),I("Error creating backup: "+N.message,"error")}finally{n.value=!1}},p=N=>{const B=N.target.files[0];if(!B)return;i.value=B,a.value=null;const R=new FileReader;R.onload=O=>{try{const U=JSON.parse(O.target.result);U.metadata&&U.collections?(a.value=U,I("Backup file loaded successfully","success")):I("Invalid backup file format","error")}catch{I("Error parsing JSON file","error")}},R.readAsText(B)},v=async()=>{if(!i.value||!a.value){I("Please select a valid backup file","error");return}if(u.overwrite){if(!confirm("This will overwrite existing data. This action cannot be undone. Continue?"))return}else if(!confirm("This will add new data without overwriting existing records. Continue?"))return;s.value=!0,I("Restoring backup...","info");try{for(const[N,B]of Object.entries(a.value.collections))if(N==="app_settings"||N==="appSettings"){const R=xt(ot,"app_settings","global");await br(R,B,{merge:!u.overwrite})}else{const R=Ht(ot,N);if(Array.isArray(B))for(const O of B){const U=xt(R,O.id);u.overwrite?await br(U,O):await br(U,O,{merge:!0})}}I("Backup restored successfully!","success"),i.value=null,a.value=null,d.value&&(d.value.value="")}catch(N){console.error("Error restoring backup:",N),I("Error restoring backup: "+N.message,"error")}finally{s.value=!1}},g=N=>{const B=JSON.stringify(N.data,null,2),R=new Blob([B],{type:"application/json"}),O=URL.createObjectURL(R),U=document.createElement("a");U.href=O,U.download=`${N.name||"backup"}.json`,U.click(),URL.revokeObjectURL(O)},x=async N=>{if(confirm("Are you sure you want to delete this backup?"))try{await Gc(xt(ot,"backups",N)),await f(),I("Backup deleted successfully","success")}catch(R){console.error("Error deleting backup:",R),I("Error deleting backup","error")}},y=N=>{if(N===0)return"0 Bytes";const B=1024,R=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(N)/Math.log(B));return parseFloat((N/Math.pow(B,O)).toFixed(2))+" "+R[O]},E=N=>new Date(N).toLocaleString(),I=(N,B="info")=>{l.value=N,c.value=B,setTimeout(()=>{l.value=""},5e3)},P=fe(!1),D=fe(""),A=fe(null),_=fe({total:0,processed:0,updated:0}),b={1:1,P1:1,2:2,P2:2,3:3,P3:3,4:4,P4:4,5:5,P5:5,6:6,P6:6,7:7,SH:7,F:7};function w(N){const B=new Date().toLocaleTimeString();D.value+=`[${B}] ${N}
`,A.value&&(A.value.scrollTop=A.value.scrollHeight)}function C(N){if(!N||typeof N!="object")return{};const B={};return Object.entries(N).forEach(([R,O])=>{const U=b[R];U&&O&&(B[U]?(typeof B[U]=="string"&&typeof O=="object"||typeof B[U]=="object"&&typeof O=="object"&&O.coTeaching&&!B[U].coTeaching)&&(B[U]=O):B[U]=O)}),B}async function T(){var N,B;if(!P.value){P.value=!0,D.value="",_.value={total:0,processed:0,updated:0};try{w(" Starting schedule normalization...");const O=(await fr(Ht(ot,"students"))).docs;_.value.total=O.length,w(` Found ${O.length} students to process`);for(const U of O){const M=U.data(),q=U.id;if(_.value.processed++,(B=(N=M.app)==null?void 0:N.schedule)!=null&&B.periods){const H=M.app.schedule.periods,L=C(H),z=Object.keys(H).sort(),K=Object.keys(L).map(ge=>String(ge)).sort();(JSON.stringify(z)!==JSON.stringify(K)||JSON.stringify(H)!==JSON.stringify(L))&&(w(` Updating student ${q}:`),w(`   Before: ${JSON.stringify(H)}`),w(`   After:  ${JSON.stringify(L)}`),await iy(xt(ot,"students",q),{"app.schedule.periods":L}),_.value.updated++)}_.value.processed%10===0&&await new Promise(H=>setTimeout(H,100))}w(" Schedule normalization complete!"),w(` Final stats: ${_.value.processed} processed, ${_.value.updated} updated`)}catch(R){w(` Error during normalization: ${R.message}`),console.error("Normalization error:",R)}finally{P.value=!1}}}function k(){D.value="",_.value={total:0,processed:0,updated:0}}return tr(()=>{f()}),{collections:t,selectedCollections:e,backupName:r,isBackingUp:n,isRestoring:s,selectedFile:i,backupData:a,backups:o,statusMessage:l,statusType:c,restoreOptions:u,fileInput:d,createBackup:h,handleFileSelect:p,restoreBackup:v,downloadBackup:g,deleteBackup:x,formatFileSize:y,formatDate:E,normalizationInProgress:P,normalizationLog:D,normalizationLogRef:A,normalizationProgress:_,startNormalization:T,clearNormalizationLog:k}}},Moe={class:"admin-backup-restore"},Boe={class:"content"},Loe={class:"section"},Uoe={class:"backup-options"},Voe={class:"option-group"},$oe={class:"checkbox-group"},joe=["value","disabled"],Hoe={class:"option-group"},Goe=["disabled"],zoe=["disabled"],Woe={key:0},Koe={key:1},qoe={class:"section"},Xoe={class:"restore-options"},Yoe={class:"file-upload"},Qoe=["disabled"],Joe={key:0,class:"file-info"},Zoe={key:0,class:"option-group"},ele={class:"backup-info"},tle={class:"collection-name"},rle={class:"collection-count"},nle={key:1,class:"option-group"},sle={class:"checkbox-group"},ale={class:"checkbox"},ile=["disabled"],ole={class:"checkbox"},lle=["disabled"],cle=["disabled"],ule={key:0},dle={key:1},fle={class:"section"},hle={key:0,class:"backup-list"},ple={class:"backup-info"},mle={class:"backup-actions"},gle=["onClick"],vle=["onClick"],xle={key:1,class:"no-backups"},yle={class:"section"},Ele={class:"controls"},_le=["disabled"],ble={key:0,class:"progress-section"},Sle={class:"progress-bar"},Tle={class:"progress-text"},Ale={class:"log-container"};function wle(t,e,r,n,s,i){return V(),j("div",Moe,[e[22]||(e[22]=m("h1",null," Admin Tools",-1)),e[23]||(e[23]=m("div",{class:"header"},[m("h1",null,"Backup & Restore"),m("p",null,"Manage database backups and restore data from JSON files")],-1)),m("div",Boe,[m("div",Loe,[e[11]||(e[11]=m("h2",null,"Create Backup",-1)),m("div",Uoe,[m("div",Voe,[e[9]||(e[9]=m("label",null,"Collections to backup:",-1)),m("div",$oe,[(V(!0),j(Ne,null,He(n.collections,a=>(V(),j("label",{key:a.id,class:"checkbox"},[je(m("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedCollections=o),value:a.id,disabled:n.isBackingUp},null,8,joe),[[St,n.selectedCollections]]),Ve(" "+ce(a.name),1)]))),128))])]),m("div",Hoe,[e[10]||(e[10]=m("label",null,"Backup name (optional):",-1)),je(m("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.backupName=a),placeholder:"e.g., backup-2024-01-15",disabled:n.isBackingUp},null,8,Goe),[[Ct,n.backupName]])]),m("button",{onClick:e[2]||(e[2]=(...a)=>n.createBackup&&n.createBackup(...a)),disabled:n.isBackingUp||n.selectedCollections.length===0,class:"btn btn-primary"},[n.isBackingUp?(V(),j("span",Woe,"Creating Backup...")):(V(),j("span",Koe,"Create Backup"))],8,zoe)])]),m("div",qoe,[e[17]||(e[17]=m("h2",null,"Restore from Backup",-1)),m("div",Xoe,[m("div",Yoe,[e[12]||(e[12]=m("label",null,"Select JSON backup file:",-1)),m("input",{type:"file",onChange:e[3]||(e[3]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a)),accept:".json",disabled:n.isRestoring,ref:"fileInput"},null,40,Qoe),n.selectedFile?(V(),j("p",Joe," Selected: "+ce(n.selectedFile.name)+" ("+ce(n.formatFileSize(n.selectedFile.size))+") ",1)):Oe("",!0)]),n.backupData?(V(),j("div",Zoe,[e[13]||(e[13]=m("label",null,"Collections in backup:",-1)),m("div",ele,[(V(!0),j(Ne,null,He(n.backupData.collections,(a,o)=>(V(),j("div",{key:o,class:"collection-info"},[m("span",tle,ce(o)+":",1),m("span",rle,ce(Array.isArray(a)?a.length:"1")+" items",1)]))),128))])])):Oe("",!0),n.backupData?(V(),j("div",nle,[e[16]||(e[16]=m("label",null,"Restore options:",-1)),m("div",sle,[m("label",ale,[je(m("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>n.restoreOptions.overwrite=a),disabled:n.isRestoring},null,8,ile),[[St,n.restoreOptions.overwrite]]),e[14]||(e[14]=Ve(" Overwrite existing data "))]),m("label",ole,[je(m("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>n.restoreOptions.validate=a),disabled:n.isRestoring},null,8,lle),[[St,n.restoreOptions.validate]]),e[15]||(e[15]=Ve(" Validate data before restore "))])])])):Oe("",!0),m("button",{onClick:e[6]||(e[6]=(...a)=>n.restoreBackup&&n.restoreBackup(...a)),disabled:n.isRestoring||!n.selectedFile||!n.backupData,class:"btn btn-warning"},[n.isRestoring?(V(),j("span",ule,"Restoring...")):(V(),j("span",dle,"Restore Backup"))],8,cle)])]),m("div",fle,[e[18]||(e[18]=m("h2",null,"Backup History",-1)),n.backups.length>0?(V(),j("div",hle,[(V(!0),j(Ne,null,He(n.backups,a=>(V(),j("div",{key:a.id,class:"backup-item"},[m("div",ple,[m("h3",null,ce(a.name||"Unnamed Backup"),1),m("p",null,"Created: "+ce(n.formatDate(a.createdAt)),1),m("p",null,"Size: "+ce(n.formatFileSize(a.size)),1),m("p",null,"Collections: "+ce(a.collections.join(", ")),1)]),m("div",mle,[m("button",{onClick:o=>n.downloadBackup(a),class:"btn btn-secondary"},"Download",8,gle),m("button",{onClick:o=>n.deleteBackup(a.id),class:"btn btn-danger"},"Delete",8,vle)])]))),128))])):(V(),j("p",xle,"No backups found"))]),m("div",yle,[e[19]||(e[19]=m("h2",null," Schedule Period Normalization",-1)),e[20]||(e[20]=m("p",{class:"description"}," This tool normalizes all student schedule periods to use numeric format (1-7) and merges co-teaching data from string periods (P1, P2, etc.) into numeric periods. ",-1)),e[21]||(e[21]=m("div",{class:"warning-box"},[m("strong",null," Important:"),Ve(" This operation will modify all student records. Make sure to backup first! ")],-1)),m("div",Ele,[m("button",{onClick:e[7]||(e[7]=(...a)=>n.startNormalization&&n.startNormalization(...a)),disabled:n.normalizationInProgress,class:"btn btn-primary"},ce(n.normalizationInProgress?"Normalizing...":"Start Schedule Normalization"),9,_le),m("button",{onClick:e[8]||(e[8]=(...a)=>n.clearNormalizationLog&&n.clearNormalizationLog(...a)),class:"btn btn-secondary"},"Clear Log")]),n.normalizationProgress.total>0?(V(),j("div",ble,[m("div",Sle,[m("div",{class:"progress-fill",style:bn({width:n.normalizationProgress.processed/n.normalizationProgress.total*100+"%"})},null,4)]),m("p",Tle," Progress: "+ce(n.normalizationProgress.processed)+"/"+ce(n.normalizationProgress.total)+" processed, "+ce(n.normalizationProgress.updated)+" updated ",1)])):Oe("",!0),m("div",Ale,[m("pre",{class:"log-output",ref:"normalizationLogRef"},ce(n.normalizationLog),513)])])]),n.statusMessage?(V(),j("div",{key:0,class:ut(["status-message",n.statusType])},ce(n.statusMessage),3)):Oe("",!0)])}const xP=At(Noe,[["render",wle],["__scopeId","data-v-23a43db2"]]),Ile={name:"AdminTeacherFeedback",setup(){const{isLoading:t,error:e,successMessage:r,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,createFeedbackForm:o,deleteFeedbackForm:l,syncResponses:c,getResponsesForSpreadsheet:u,clearMessages:d,extractSpreadsheetId:f}=Ey(),{fetchStudents:h}=Ua(),{fetchUsers:p}=pa(),v=Ei(),g=fe(!1),x=fe(""),y=fe(""),E=fe(""),I=fe(""),P=be(()=>x.value.trim()&&E.value.trim()&&I.value.trim()),D=async()=>{if(P.value)try{d();const R={title:x.value.trim(),description:y.value.trim(),formUrl:E.value.trim(),responseSpreadsheetId:f(I.value),createdBy:v.user.uid};await o(R),A()}catch(R){console.error("Error adding form:",R)}},A=()=>{g.value=!1,x.value="",y.value="",E.value="",I.value="",d()},_=R=>{window.open(R.formUrl,"_blank")},b=async R=>{try{await c(R.responseSpreadsheetId)}catch(O){console.error("Error syncing responses:",O)}},w=async R=>{window.open(R.formUrl,"_blank")},C=async R=>{if(confirm(`Are you sure you want to delete "${R.title}"?`))try{await l(R.id)}catch(O){console.error("Error deleting form:",O)}},T=R=>u(R).value.length,k=R=>{var M,q;const O=u(R);if(O.value.length===0)return"Never";const U=((M=O.value[0])==null?void 0:M.syncedAt)||((q=O.value[0])==null?void 0:q.autoSyncedAt);return U?new Date(U.seconds*1e3).toLocaleDateString():"Never"},N=R=>`https://docs.google.com/spreadsheets/d/${R}`,B=R=>R?(R.seconds?new Date(R.seconds*1e3):new Date(R)).toLocaleDateString():"N/A";return tr(async()=>{try{await Promise.all([h(),p()])}catch(R){console.error("Error initializing teacher feedback:",R)}}),{isLoading:t,error:e,successMessage:r,showCreateModal:g,formTitle:x,formDescription:y,formUrl:E,responseSpreadsheetUrl:I,formsLoading:n,feedbackForms:s,activeForms:i,totalResponses:a,canAddForm:P,addForm:D,closeCreateForm:A,openForm:_,syncFormResponses:b,editForm:w,deleteForm:C,getResponseCount:T,getLastSyncDate:k,getSpreadsheetUrl:N,formatDate:B}}},Cle={class:"teacher-feedback-admin"},kle={key:0,class:"status-message loading"},Dle={key:1,class:"status-message success"},Ple={key:2,class:"status-message error"},Rle={class:"quick-actions"},Fle=["disabled"],Ole={class:"modal-header"},Nle={class:"modal-body"},Mle={class:"form-group"},Ble={class:"form-group"},Lle={class:"form-group"},Ule={class:"form-group"},Vle={class:"modal-footer"},$le=["disabled"],jle={key:0},Hle={key:1},Gle={class:"forms-list"},zle={key:0,class:"loading"},Wle={key:1,class:"empty-state"},Kle={key:2,class:"forms-grid"},qle={class:"form-header"},Xle={class:"form-actions"},Yle=["onClick"],Qle=["onClick"],Jle=["onClick"],Zle=["onClick"],ece={class:"form-meta"},tce={key:0},rce=["href"],nce=["href"],sce={class:"form-stats"},ace={class:"stat"},ice={class:"stat-value"},oce={class:"stat"},lce={class:"stat-value"};function cce(t,e,r,n,s,i){return V(),j("div",Cle,[e[29]||(e[29]=m("div",{class:"admin-header"},[m("h2",null,"Teacher Feedback Forms"),m("p",{class:"admin-description"}," Create and manage Google Forms for collecting teacher feedback on students. Forms can be customized with different question templates and sent to specific teachers. ")],-1)),n.isLoading?(V(),j("div",kle," Processing... ")):Oe("",!0),n.successMessage?(V(),j("div",Dle,ce(n.successMessage),1)):Oe("",!0),n.error?(V(),j("div",Ple,ce(n.error),1)):Oe("",!0),m("div",Rle,[m("button",{onClick:e[0]||(e[0]=a=>n.showCreateModal=!0),class:"primary-btn",disabled:n.isLoading},e[10]||(e[10]=[m("span",null,"",-1),Ve(" Add Form ")]),8,Fle)]),n.showCreateModal?(V(),j("div",{key:3,class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a))},[m("div",{class:"modal-content",onClick:e[8]||(e[8]=Ds(()=>{},["stop"]))},[m("div",Ole,[e[11]||(e[11]=m("h3",null,"Add Teacher Feedback Form",-1)),m("button",{onClick:e[1]||(e[1]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"close-btn"},"")]),m("div",Nle,[m("div",Mle,[e[12]||(e[12]=m("label",null,"Form Title:",-1)),je(m("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>n.formTitle=a),placeholder:"Enter a descriptive title for this form",class:"form-input",required:""},null,512),[[Ct,n.formTitle]])]),m("div",Ble,[e[13]||(e[13]=m("label",null,"Form Description (optional):",-1)),je(m("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.formDescription=a),placeholder:"Brief description of what this form is for",class:"form-textarea",rows:"3"},null,512),[[Ct,n.formDescription]])]),m("div",Lle,[e[14]||(e[14]=m("label",null,"Google Form URL:",-1)),je(m("input",{type:"url","onUpdate:modelValue":e[4]||(e[4]=a=>n.formUrl=a),placeholder:"https://docs.google.com/forms/d/your-form-id/viewform",class:"form-input",required:""},null,512),[[Ct,n.formUrl]]),e[15]||(e[15]=m("small",{class:"form-help"},"Paste the Google Form URL here (viewform link)",-1))]),m("div",Ule,[e[16]||(e[16]=m("label",null,"Response Spreadsheet URL:",-1)),je(m("input",{type:"url","onUpdate:modelValue":e[5]||(e[5]=a=>n.responseSpreadsheetUrl=a),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id",class:"form-input",required:""},null,512),[[Ct,n.responseSpreadsheetUrl]]),e[17]||(e[17]=m("small",{class:"form-help"},"Link to the Google Sheet where responses are collected",-1))]),e[18]||(e[18]=m("div",{class:"form-info"},[m("h4",null," Setup Instructions:"),m("ol",null,[m("li",null,"Create your Google Form manually with the questions you want"),m("li",null,[Ve("Go to "),m("strong",null,"Responses"),Ve(" tab in your form")]),m("li",null,[Ve("Click "),m("strong",null,"Create Spreadsheet"),Ve(" to link it to a Google Sheet")]),m("li",null,"Copy both URLs and paste them above")])],-1))]),m("div",Vle,[m("button",{onClick:e[6]||(e[6]=(...a)=>n.closeCreateForm&&n.closeCreateForm(...a)),class:"secondary-btn"},"Cancel"),m("button",{onClick:e[7]||(e[7]=(...a)=>n.addForm&&n.addForm(...a)),class:"primary-btn",disabled:!n.canAddForm||n.isLoading},[n.isLoading?(V(),j("span",jle,"Adding Form...")):(V(),j("span",Hle,"Add Form"))],8,$le)])])])):Oe("",!0),m("div",Gle,[e[28]||(e[28]=m("h3",null,"Feedback Forms",-1)),n.formsLoading?(V(),j("div",zle,"Loading forms...")):n.activeForms.length===0?(V(),j("div",Wle,e[19]||(e[19]=[m("p",null,"No feedback forms added yet.",-1),m("p",null,'Click "Add Form" to get started.',-1)]))):(V(),j("div",Kle,[(V(!0),j(Ne,null,He(n.activeForms,a=>(V(),j("div",{key:a.id,class:"form-card"},[m("div",qle,[m("h4",null,ce(a.title||"Untitled Form"),1),m("div",Xle,[m("button",{onClick:o=>n.openForm(a),class:"action-btn view",title:"View Form"},"  ",8,Yle),m("button",{onClick:o=>n.syncFormResponses(a),class:"action-btn sync",title:"Sync Responses"},"  ",8,Qle),m("button",{onClick:o=>n.editForm(a),class:"action-btn edit",title:"Edit Form"},"  ",8,Jle),m("button",{onClick:o=>n.deleteForm(a),class:"action-btn delete",title:"Delete Form"},"  ",8,Zle)])]),m("div",ece,[m("p",null,[e[20]||(e[20]=m("strong",null,"Created:",-1)),Ve(" "+ce(n.formatDate(a.createdAt)),1)]),a.description?(V(),j("p",tce,[e[21]||(e[21]=m("strong",null,"Description:",-1)),Ve(" "+ce(a.description),1)])):Oe("",!0),m("p",null,[e[22]||(e[22]=m("strong",null,"Form URL:",-1)),e[23]||(e[23]=Ve()),m("a",{href:a.formUrl,target:"_blank",class:"form-link"},"Open Form",8,rce)]),m("p",null,[e[24]||(e[24]=m("strong",null,"Responses:",-1)),e[25]||(e[25]=Ve()),m("a",{href:n.getSpreadsheetUrl(a.responseSpreadsheetId),target:"_blank",class:"form-link"},"View Sheet",8,nce)])]),m("div",sce,[m("div",ace,[e[26]||(e[26]=m("span",{class:"stat-label"},"Responses:",-1)),m("span",ice,ce(n.getResponseCount(a.responseSpreadsheetId)),1)]),m("div",oce,[e[27]||(e[27]=m("span",{class:"stat-label"},"Last Sync:",-1)),m("span",lce,ce(n.getLastSyncDate(a.responseSpreadsheetId)),1)])])]))),128))]))])])}const uce=At(Ile,[["render",cce],["__scopeId","data-v-ca33e38a"]]);function dce(t,e,r){const{getLabel:n}=Pf(),s=be(()=>{var f;const d=((f=r.value)==null?void 0:f.numPeriods)||7;return Array.from({length:d},(h,p)=>({value:p.toString(),label:n(p+1),periodIndex:p}))}),i=be(()=>{const d=new Set;return console.log(" Finding teachers from students:",t.value.length),t.value.forEach(f=>{var h,p,v,g,x;(h=f.aeries)!=null&&h.schedule&&Object.values(f.aeries.schedule).forEach(y=>{y&&y.teacherId&&(console.log(" Found teacher ID in aeries.schedule:",y.teacherId),d.add(String(y.teacherId)))}),(v=(p=f.app)==null?void 0:p.schedule)!=null&&v.periods&&Object.values(f.app.schedule.periods).forEach(y=>{y&&(console.log(" Found teacher ID in app.schedule.periods:",y),d.add(String(y)))});for(let y=1;y<=7;y++){const E=`period${y}TeacherId`,I=f[E]||((g=f.aeries)==null?void 0:g[E])||((x=f.app)==null?void 0:x[E]);I&&(console.log(" Found teacher ID in",E,":",I),d.add(String(I)))}}),console.log(" Unique teacher IDs found:",Array.from(d)),console.log(" Users available:",e.value.length),Array.from(d).map(f=>{let h=e.value.find(p=>p.id===f);return!h&&/^\d+$/.test(f)&&(h=e.value.find(p=>p.aeriesId===f)),{id:f,name:h?h.name||`${h.firstName} ${h.lastName}`:`Teacher ${f}`,actualUserId:h?h.id:null}}).sort((f,h)=>f.name.localeCompare(h.name))}),a=(d,f=[])=>{let h=-1;if(/^\d+$/.test(d))h=parseInt(d)-1;else if(d==="SH")h=6;else if(d.startsWith("Per")){const p=d.replace("Per","");/^\d+$/.test(p)&&(h=parseInt(p)-1)}return f.includes(h.toString())};return{availablePeriods:s,availableTeachers:i,getStudentsForTeachers:(d,f=[])=>t.value.filter(h=>{var v,g,x,y,E,I,P;if(!(((g=(v=h.app)==null?void 0:v.flags)==null?void 0:g.flag1)||h.flag1||!1))return!1;if((x=h.aeries)!=null&&x.schedule){const D=Object.entries(h.aeries.schedule);for(let A=0;A<D.length;A++){const[_,b]=D[A];if(b&&b.teacherId&&d.includes(String(b.teacherId))&&!a(_,f))return!0}}if((E=(y=h.app)==null?void 0:y.schedule)!=null&&E.periods){const D=Object.entries(h.app.schedule.periods);for(let A=0;A<D.length;A++){const[_,b]=D[A];if(b&&d.includes(String(b))&&!a(_,f))return!0}}for(let D=0;D<7;D++){const A=`period${D+1}TeacherId`,_=h[A]||((I=h.aeries)==null?void 0:I[A])||((P=h.app)==null?void 0:P[A]);if(_&&d.includes(String(_))&&!f.includes(D.toString()))return!0}return!1}),getStudentTeacherPeriods:(d,f,h=[])=>{var v,g,x,y,E;const p=[];if((v=d.aeries)!=null&&v.schedule){const I=Object.entries(d.aeries.schedule);for(let P=0;P<I.length;P++){const[D,A]=I[P];if(A&&A.teacherId&&f.includes(String(A.teacherId))&&!a(D,h)){let _=e.value.find(w=>w.id===String(A.teacherId));!_&&/^\d+$/.test(A.teacherId)&&(_=e.value.find(w=>w.aeriesId===String(A.teacherId)));const b=n(P+1);p.push({period:b,teacherName:_?_.name||`${_.firstName} ${_.lastName}`:`Teacher ${A.teacherId}`})}}}if((x=(g=d.app)==null?void 0:g.schedule)!=null&&x.periods){const I=Object.entries(d.app.schedule.periods);for(let P=0;P<I.length;P++){const[D,A]=I[P];if(A&&f.includes(String(A))&&!a(D,h)){const _=e.value.find(w=>w.id===String(A)),b=n(parseInt(D));p.push({period:b,teacherName:_?_.name||`${_.firstName} ${_.lastName}`:`Teacher ${A}`})}}}for(let I=0;I<7;I++){const P=`period${I+1}TeacherId`,D=d[P]||((y=d.aeries)==null?void 0:y[P])||((E=d.app)==null?void 0:E[P]);if(D&&f.includes(String(D))&&!h.includes(I.toString())){let A=e.value.find(b=>b.id===String(D));!A&&/^\d+$/.test(D)&&(A=e.value.find(b=>b.aeriesId===String(D)));const _=n(I+1);p.push({period:_,teacherName:A?A.name||`${A.firstName} ${A.lastName}`:`Teacher ${D}`})}}return p},generateCSV:()=>{const d=["Student ID","First Name","Last Name","Grade","Case Manager","Assessment Accommodations","Services"],f=t.value.map(p=>{var P,D,A,_,b;const v=ct(p,"firstName")||"",g=ct(p,"lastName")||"",x=ct(p,"grade")||"",y=p.caseManagerId||((D=(P=p.app)==null?void 0:P.studentData)==null?void 0:D.caseManagerId)||"",E=((_=(A=p.app)==null?void 0:A.accommodations)==null?void 0:_.assessment)||[],I=((b=p.app)==null?void 0:b.classServices)||[];return[p.id||"",v,g,x,y,Array.isArray(E)?E.join("; "):E,Array.isArray(I)?I.map(w=>w.name||w).join("; "):I]});return[d,...f].map(p=>p.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(",")).join(`
`)},downloadCSV:(d,f)=>{const h=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download=f,p.click(),URL.revokeObjectURL(p.href)},isPeriodExcluded:a}}function fce(t,e,r){const{generateCSV:n,downloadCSV:s}=r,{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeGoogleAuth:u,createLinkedSheet:d,updateSheetData:f,createCustomTab:h,deleteCustomTab:p,unlinkSheet:v,checkSheetConnection:g}=xy();let x=null,y=!1;const E=async()=>{try{const k=localStorage.getItem("casemanage_linked_sheet_id");k&&k.startsWith("1XSL0Sl7")&&(console.log("Clearing old sheet ID that was causing 403 errors"),localStorage.removeItem("casemanage_linked_sheet_id")),await u(),i.value&&await g()&&(await A(),I())}catch(k){console.error("Failed to initialize Google Auth:",k)}};Qt(()=>t.value,(k,N)=>{k&&N&&k!==N&&(y=!0,console.log(" Student data changed, will sync on next interval")),k!=null&&k.length},{deep:!0});const I=()=>{x&&clearInterval(x),x=setInterval(async()=>{if(i.value&&y&&l.value!=="syncing")try{console.log(" Hourly auto-sync starting..."),await A(),y=!1,console.log(" Hourly auto-sync completed")}catch(k){console.error(" Hourly auto-sync failed:",k)}},36e5)},P=()=>{x&&clearInterval(x)},D=async()=>{try{await d(t.value,e.value),I()}catch(k){console.error("Failed to create linked sheet:",k),alert("Failed to create Google Sheet. Please make sure you are signed in to Google.")}},A=async()=>{if(!(!i.value||l.value==="syncing"))try{await f(t.value,e.value)}catch(k){console.error("Failed to sync sheet:",k),alert("Failed to sync sheet. Please try again.")}};return{linkedSheetId:i,linkedSheetUrl:a,lastSyncTime:o,syncStatus:l,syncMessage:c,initializeIntegration:E,createLinkedGoogleSheet:D,syncNow:A,openGoogleSheet:()=>{a.value&&(window.open(a.value,"_blank","noopener,noreferrer")||(window.location.href=a.value))},unlinkSheet:v,createCustomTab:h,deleteCustomTab:p,createGoogleSheetWithData:()=>{const k=n();s(k,"student_data.csv"),window.open("https://sheets.new","_blank")},createBlankGoogleSheet:()=>{window.open("https://sheets.new","_blank")},exportToCSV:()=>{const k=n();s(k,"student_data_export.csv")},formatTime:k=>new Date(k).toLocaleString(),setupAutoSync:I,cleanupAutoSync:P}}function hce(t,e){const{getStudentsForTeachers:r}=t,{createCustomTab:n,deleteCustomTab:s}=e,i=fe([]),a=fe(!1),o=fe(""),l=fe([]),c=fe([]),u=5,d=be(()=>l.value.length===0?[]:r(l.value,c.value)),f=async g=>{if(!o.value.trim()||l.value.length===0){alert("Please enter a tab name and select at least one teacher");return}if(i.value.length>=u){alert(`Maximum of ${u} custom tabs allowed`);return}try{const x=r(l.value,c.value),y=await n(o.value.trim(),x,l.value,g,c.value),E={id:Date.now().toString(),name:o.value.trim(),teachers:[...l.value],studentCount:y.rowCount,sheetId:y.sheetId};i.value.push(E),p(),console.log("Custom tab added:",E),alert(`Custom tab "${E.name}" created successfully with ${y.rowCount} student entries!`)}catch(x){console.error("Failed to create custom tab:",x),alert("Failed to create custom tab in Google Sheet. Please try again.")}},h=async g=>{const x=i.value.find(y=>y.id===g);if(x&&confirm(`Are you sure you want to remove the "${x.name}" tab?`))try{x.sheetId&&await s(x.sheetId),i.value=i.value.filter(y=>y.id!==g),console.log("Custom tab removed:",g),alert(`Tab "${x.name}" removed successfully.`)}catch(y){console.error("Failed to delete custom tab:",y),alert("Failed to delete tab from Google Sheet. You may need to delete it manually."),i.value=i.value.filter(E=>E.id!==g)}},p=()=>{o.value="",l.value=[],c.value=[],a.value=!1};return{customTabs:i,showAddTabForm:a,newTabName:o,selectedTeachers:l,selectedExcludedPeriods:c,maxCustomTabs:u,filteredStudentsPreview:d,addCustomTab:f,removeCustomTab:h,resetForm:p,toggleAddTabForm:()=>{a.value=!a.value,a.value||p()}}}const pce={class:"sheets-section"},mce={key:0,class:"linked-sheet-status"},gce={class:"status-card success"},vce={class:"sync-info"},xce={key:0},yce={key:1,class:"syncing"},Ece={key:2,class:"success"},_ce={key:3,class:"error"},bce={class:"sheet-actions"},Sce=["disabled"],Tce={key:1,class:"create-sheet-section"},Ace={class:"alternative-options"},wce={class:"button-group"},Ice={__name:"GoogleSheetsConnector",props:{linkedSheetId:String,lastSyncTime:[String,Date],syncStatus:String,syncMessage:String},emits:["openGoogleSheet","syncNow","unlinkSheet","createLinkedGoogleSheet","createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){const e=r=>new Date(r).toLocaleString();return(r,n)=>(V(),j("div",pce,[n[12]||(n[12]=m("h4",null,"Google Sheets Integration",-1)),t.linkedSheetId?(V(),j("div",mce,[m("div",gce,[n[7]||(n[7]=m("h5",null," Linked Google Sheet",-1)),n[8]||(n[8]=m("p",null,"Your student data is synced to Google Sheets",-1)),m("button",{onClick:n[0]||(n[0]=s=>r.$emit("openGoogleSheet")),class:"sheet-link"}," Open Google Sheet  "),m("div",vce,[t.lastSyncTime?(V(),j("span",xce,"Last synced: "+ce(e(t.lastSyncTime)),1)):Oe("",!0),t.syncStatus==="syncing"?(V(),j("span",yce," Syncing...")):t.syncStatus==="success"?(V(),j("span",Ece," Synced")):t.syncStatus==="error"?(V(),j("span",_ce," "+ce(t.syncMessage),1)):Oe("",!0)]),n[9]||(n[9]=m("div",{class:"auto-sync-info"},[m("span",{class:"auto-sync-badge"},[m("span",{class:"pulse"}),Ve(" Auto-sync enabled ")]),m("p",{class:"auto-sync-description"}," Changes to student data, accommodations, and services are automatically synced to your Google Sheet. ")],-1)),m("div",bce,[m("button",{onClick:n[1]||(n[1]=s=>r.$emit("syncNow")),disabled:t.syncStatus==="syncing",class:"btn-sync"}," Sync Now ",8,Sce),m("button",{onClick:n[2]||(n[2]=s=>r.$emit("unlinkSheet")),class:"btn-unlink"}," Unlink Sheet ")])])])):(V(),j("div",Tce,[n[10]||(n[10]=rs('<h5 data-v-ec72cef0>Create a Linked Google Sheet</h5><p data-v-ec72cef0>Link your student data to a Google Sheet that automatically updates when changes are made.</p><div class="features-list" data-v-ec72cef0><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Auto-syncs when students are added or updated</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Updates accommodations and services in real-time</span></div><div class="feature" data-v-ec72cef0><span class="feature-icon" data-v-ec72cef0></span><span data-v-ec72cef0>Maintains a live connection to your data</span></div></div>',3)),m("button",{onClick:n[3]||(n[3]=s=>r.$emit("createLinkedGoogleSheet")),class:"btn-primary"},"  Create & Link Google Sheet ")])),m("div",Ace,[n[11]||(n[11]=m("h5",null,"Other Export Options",-1)),m("div",wce,[m("button",{onClick:n[4]||(n[4]=s=>r.$emit("createGoogleSheetWithData")),class:"btn-secondary"},"  Create Google Sheet with Data (One-time) "),m("button",{onClick:n[5]||(n[5]=s=>r.$emit("createBlankGoogleSheet")),class:"btn-secondary"},"  Create Blank Google Sheet "),m("button",{onClick:n[6]||(n[6]=s=>r.$emit("exportToCSV")),class:"btn-secondary"},"  Export to CSV Only ")])])]))}},Cce=At(Ice,[["__scopeId","data-v-ec72cef0"]]),kce={class:"preview-section"},Dce={class:"preview-table"},Pce={key:0},Rce={key:0},Fce={key:0,class:"preview-note"},bg=5,Oce={__name:"StudentPreview",props:{filteredStudents:{type:Array,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},setup(t){const e=t,r=be(()=>e.filteredStudents.slice(0,bg)),n=a=>{const o=ct(a,"firstName")||"",l=ct(a,"lastName")||"";return`${o} ${l}`.trim()},s=a=>ct(a,"grade")||"",i=a=>e.getStudentTeacherPeriods(a,e.selectedTeachers,e.selectedExcludedPeriods);return(a,o)=>(V(),j("div",kce,[m("h6",null,"Preview ("+ce(t.filteredStudents.length)+" students)",1),m("div",Dce,[m("table",null,[o[0]||(o[0]=m("thead",null,[m("tr",null,[m("th",null,"Name"),m("th",null,"Grade"),m("th",null,"Period"),m("th",null,"Teacher")])],-1)),m("tbody",null,[(V(!0),j(Ne,null,He(r.value,l=>(V(),j("tr",{key:l.id},[m("td",null,ce(n(l)),1),m("td",null,ce(s(l)),1),m("td",null,[(V(!0),j(Ne,null,He(i(l),(c,u)=>(V(),j("span",{key:u},[Ve(ce(c.period),1),u<i(l).length-1?(V(),j("span",Pce,", ")):Oe("",!0)]))),128))]),m("td",null,[(V(!0),j(Ne,null,He(i(l),(c,u)=>(V(),j("span",{key:u},[Ve(ce(c.teacherName),1),u<i(l).length-1?(V(),j("span",Rce,", ")):Oe("",!0)]))),128))])]))),128))])]),t.filteredStudents.length>bg?(V(),j("p",Fce," ... and "+ce(t.filteredStudents.length-bg)+" more students ",1)):Oe("",!0)])]))}},Nce=At(Oce,[["__scopeId","data-v-936b1ce9"]]),Mce={class:"custom-tabs-config"},Bce={class:"add-tab-controls"},Lce=["disabled"],Uce={key:0,class:"max-tabs-warning"},Vce={key:0,class:"add-tab-form"},$ce={class:"form-group"},jce=["value"],Hce={class:"form-group"},Gce={class:"teacher-checkboxes"},zce=["value","checked","onChange"],Wce={class:"form-group"},Kce={class:"period-checkboxes"},qce=["value","checked","onChange"],Xce={class:"form-actions"},Yce={key:1,class:"existing-tabs"},Qce={class:"tab-teachers"},Jce=["onClick"],Zce={__name:"CustomTabManager",props:{customTabs:{type:Array,required:!0},showAddTabForm:{type:Boolean,required:!0},newTabName:{type:String,required:!0},selectedTeachers:{type:Array,required:!0},selectedExcludedPeriods:{type:Array,required:!0},maxCustomTabs:{type:Number,required:!0},availableTeachers:{type:Array,required:!0},availablePeriods:{type:Array,required:!0},filteredStudentsPreview:{type:Array,required:!0},getStudentTeacherPeriods:{type:Function,required:!0}},emits:["toggleAddTabForm","update:newTabName","updateSelectedTeachers","updateSelectedExcludedPeriods","addCustomTab","removeCustomTab","resetForm"],setup(t){return(e,r)=>(V(),j("div",Mce,[r[8]||(r[8]=m("h5",null,"Custom Teacher Tabs",-1)),r[9]||(r[9]=m("p",null,"Create custom tabs with data filtered by specific teachers",-1)),m("div",Bce,[m("button",{onClick:r[0]||(r[0]=n=>e.$emit("toggleAddTabForm")),disabled:t.customTabs.length>=t.maxCustomTabs,class:"btn-primary"}," + Add Custom Tab ",8,Lce),t.customTabs.length>=t.maxCustomTabs?(V(),j("span",Uce," Maximum of "+ce(t.maxCustomTabs)+" custom tabs allowed ",1)):Oe("",!0)]),t.showAddTabForm?(V(),j("div",Vce,[m("div",$ce,[r[4]||(r[4]=m("label",null,"Tab Name",-1)),m("input",{value:t.newTabName,onInput:r[1]||(r[1]=n=>e.$emit("update:newTabName",n.target.value)),type:"text",class:"form-input",placeholder:"e.g., Math Teachers",maxlength:"30"},null,40,jce)]),m("div",Hce,[r[5]||(r[5]=m("label",null,"Select Teachers",-1)),m("div",Gce,[(V(!0),j(Ne,null,He(t.availableTeachers,n=>(V(),j("label",{key:n.id,class:"checkbox-label"},[m("input",{type:"checkbox",value:n.id,checked:t.selectedTeachers.includes(n.id),onChange:s=>e.$emit("updateSelectedTeachers",n.id,s.target.checked)},null,40,zce),Ve(" "+ce(n.name),1)]))),128))])]),m("div",Wce,[r[6]||(r[6]=m("label",null,"Exclude Periods (Optional)",-1)),m("div",Kce,[(V(!0),j(Ne,null,He(t.availablePeriods,n=>(V(),j("label",{key:n.value,class:"checkbox-label"},[m("input",{type:"checkbox",value:n.value,checked:t.selectedExcludedPeriods.includes(n.value),onChange:s=>e.$emit("updateSelectedExcludedPeriods",n.value,s.target.checked)},null,40,qce),Ve(" "+ce(n.label),1)]))),128))])]),t.selectedTeachers.length>0?(V(),Tn(Nce,{key:0,"filtered-students":t.filteredStudentsPreview,"selected-teachers":t.selectedTeachers,"selected-excluded-periods":t.selectedExcludedPeriods,"get-student-teacher-periods":t.getStudentTeacherPeriods},null,8,["filtered-students","selected-teachers","selected-excluded-periods","get-student-teacher-periods"])):Oe("",!0),m("div",Xce,[m("button",{onClick:r[2]||(r[2]=n=>e.$emit("addCustomTab")),class:"btn-primary"}," Create Tab "),m("button",{onClick:r[3]||(r[3]=n=>e.$emit("resetForm")),class:"btn-secondary"}," Cancel ")])])):Oe("",!0),t.customTabs.length>0?(V(),j("div",Yce,[r[7]||(r[7]=m("h6",null,"Current Custom Tabs",-1)),(V(!0),j(Ne,null,He(t.customTabs,n=>(V(),j("div",{key:n.id,class:"tab-item"},[m("div",null,[m("strong",null,ce(n.name),1),m("span",Qce,ce(n.teachers.length)+" teacher(s), "+ce(n.studentCount)+" students ",1)]),m("button",{onClick:s=>e.$emit("removeCustomTab",n.id),class:"btn-danger btn-small"}," Remove ",8,Jce)]))),128))])):Oe("",!0)]))}},eue=At(Zce,[["__scopeId","data-v-236484db"]]),tue={class:"export-options-section"},rue={class:"export-grid"},nue={class:"export-card"},sue={class:"export-card"},aue={class:"export-card"},iue={__name:"TestingExportOptions",emits:["createGoogleSheetWithData","createBlankGoogleSheet","exportToCSV"],setup(t){return(e,r)=>(V(),j("div",tue,[r[12]||(r[12]=m("h4",null,"Export Options",-1)),r[13]||(r[13]=m("p",null,"Additional ways to export and work with your student data",-1)),m("div",rue,[m("div",nue,[r[3]||(r[3]=m("div",{class:"export-icon"},"",-1)),r[4]||(r[4]=m("h5",null,"Google Sheets with Data",-1)),r[5]||(r[5]=m("p",null,"Create a new Google Sheet and populate it with current student data (one-time export)",-1)),m("button",{onClick:r[0]||(r[0]=n=>e.$emit("createGoogleSheetWithData")),class:"btn-primary"}," Create Sheet with Data ")]),m("div",sue,[r[6]||(r[6]=m("div",{class:"export-icon"},"",-1)),r[7]||(r[7]=m("h5",null,"Blank Google Sheet",-1)),r[8]||(r[8]=m("p",null,"Create a new blank Google Sheet that you can customize yourself",-1)),m("button",{onClick:r[1]||(r[1]=n=>e.$emit("createBlankGoogleSheet")),class:"btn-primary"}," Create Blank Sheet ")]),m("div",aue,[r[9]||(r[9]=m("div",{class:"export-icon"},"",-1)),r[10]||(r[10]=m("h5",null,"CSV Export",-1)),r[11]||(r[11]=m("p",null,"Download student data as a CSV file for use in Excel or other applications",-1)),m("button",{onClick:r[2]||(r[2]=n=>e.$emit("exportToCSV")),class:"btn-primary"}," Download CSV ")])]),r[14]||(r[14]=m("div",{class:"export-info"},[m("h5",null,"Export Information"),m("ul",null,[m("li",null,[m("strong",null,"Linked Sheets:"),Ve(" Automatically sync when data changes")]),m("li",null,[m("strong",null,"One-time Exports:"),Ve(" Snapshot of data at export time")]),m("li",null,[m("strong",null,"CSV Files:"),Ve(" Compatible with Excel, Numbers, and other spreadsheet apps")])])],-1))]))}},oue=At(iue,[["__scopeId","data-v-3bc6896f"]]),lue={class:"testing-links-container"},cue={__name:"TestingLinks",setup(t){const{students:e,fetchStudents:r}=Ua(),{userList:n,fetchUsers:s}=pa(),{appSettings:i,loadAppSettings:a}=ma(),o=dce(e,n,i),{availablePeriods:l,availableTeachers:c,getStudentTeacherPeriods:u}=o,d=fce(e,n,o),{linkedSheetId:f,lastSyncTime:h,syncStatus:p,syncMessage:v,initializeIntegration:g,createLinkedGoogleSheet:x,syncNow:y,openGoogleSheet:E,unlinkSheet:I,createGoogleSheetWithData:P,createBlankGoogleSheet:D,exportToCSV:A,cleanupAutoSync:_}=d,b=hce(o,d),{customTabs:w,showAddTabForm:C,newTabName:T,selectedTeachers:k,selectedExcludedPeriods:N,maxCustomTabs:B,filteredStudentsPreview:R,addCustomTab:O,removeCustomTab:U,resetForm:M,toggleAddTabForm:q}=b,H=(K,te)=>{if(te)k.value.includes(K)||k.value.push(K);else{const ge=k.value.indexOf(K);ge>-1&&k.value.splice(ge,1)}},L=(K,te)=>{if(te)N.value.includes(K)||N.value.push(K);else{const ge=N.value.indexOf(K);ge>-1&&N.value.splice(ge,1)}},z=async()=>{await O(n.value)};return tr(async()=>{try{await Promise.all([r(),s(),a()]),console.log("Students loaded:",e.value.length),console.log("Users loaded:",n.value.length),console.log("App settings loaded:",i.value),await g()}catch(K){console.error("Failed to initialize TestingLinks:",K)}}),xi(()=>{_()}),(K,te)=>(V(),j("div",lue,[te[1]||(te[1]=m("h3",null,"Testing Links & Google Sheets Integration",-1)),at(Cce,{"linked-sheet-id":me(f),"last-sync-time":me(h),"sync-status":me(p),"sync-message":me(v),onOpenGoogleSheet:me(E),onSyncNow:me(y),onUnlinkSheet:me(I),onCreateLinkedGoogleSheet:me(x),onCreateGoogleSheetWithData:me(P),onCreateBlankGoogleSheet:me(D),onExportToCsv:me(A)},null,8,["linked-sheet-id","last-sync-time","sync-status","sync-message","onOpenGoogleSheet","onSyncNow","onUnlinkSheet","onCreateLinkedGoogleSheet","onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"]),me(f)?(V(),Tn(eue,{key:0,"custom-tabs":me(w),"show-add-tab-form":me(C),"new-tab-name":me(T),"selected-teachers":me(k),"selected-excluded-periods":me(N),"max-custom-tabs":me(B),"available-teachers":me(c),"available-periods":me(l),"filtered-students-preview":me(R),"get-student-teacher-periods":me(u),onToggleAddTabForm:me(q),"onUpdate:newTabName":te[0]||(te[0]=ge=>T.value=ge),onUpdateSelectedTeachers:H,onUpdateSelectedExcludedPeriods:L,onAddCustomTab:z,onRemoveCustomTab:me(U),onResetForm:me(M)},null,8,["custom-tabs","show-add-tab-form","new-tab-name","selected-teachers","selected-excluded-periods","max-custom-tabs","available-teachers","available-periods","filtered-students-preview","get-student-teacher-periods","onToggleAddTabForm","onRemoveCustomTab","onResetForm"])):Oe("",!0),at(oue,{onCreateGoogleSheetWithData:me(P),onCreateBlankGoogleSheet:me(D),onExportToCsv:me(A)},null,8,["onCreateGoogleSheetWithData","onCreateBlankGoogleSheet","onExportToCsv"])]))}},uue=At(cue,[["__scopeId","data-v-8d441fb1"]]),due={class:"admin-dashboard"},fue={class:"stats-grid"},hue={class:"stat-card"},pue={class:"stat-content"},mue={class:"stat-card"},gue={class:"stat-content"},vue={class:"stat-card"},xue={class:"stat-content"},yue={class:"stat-card"},Eue={class:"stat-content"},_ue={class:"categories-grid"},bue={class:"category-card"},Sue={class:"category-header"},Tue={class:"category-card"},Aue={class:"category-header"},wue={class:"category-card"},Iue={class:"category-header"},Cue={class:"category-card"},kue={class:"category-header"},Due={class:"system-status"},Pue={class:"status-grid"},Rue={class:"status-card"},Fue={class:"sync-status"},Oue={class:"sync-item"},Nue={key:0,class:"sync-time"},Mue={class:"sync-item"},Bue={class:"sync-time"},Lue={class:"status-card"},Uue={class:"user-activity"},Vue={class:"activity-item"},$ue={class:"activity-count"},jue={class:"activity-item"},Hue={class:"activity-count"},Gue={class:"quick-actions"},zue={class:"actions-grid"},Wue={__name:"AdminDashboard",emits:["goToCategory","goToStudents"],setup(t){const{students:e,fetchStudents:r}=Ua(),{userList:n,fetchUsers:s}=pa(),{linkedSheetId:i,lastSyncTime:a}=xy(),o=fe(12),l=fe(8),c=fe(!0),u=fe("Connected"),d=be(()=>{var x;return((x=e.value)==null?void 0:x.length)||0}),f=be(()=>{var x;return((x=n.value)==null?void 0:x.length)||0}),h=be(()=>{var x;return((x=n.value)==null?void 0:x.filter(y=>y.role==="paraeducator").length)||0}),p=be(()=>i.value?1:0),v=be(()=>!!i.value),g=x=>x?new Date(x).toLocaleString():"Never";return tr(async()=>{try{await Promise.all([r(),s()])}catch(x){console.error("Error loading dashboard data:",x)}}),(x,y)=>(V(),j("div",due,[m("div",fue,[m("div",hue,[y[9]||(y[9]=m("div",{class:"stat-icon"},"",-1)),m("div",pue,[m("h3",null,ce(d.value),1),y[8]||(y[8]=m("p",null,"Total Students",-1))])]),m("div",mue,[y[11]||(y[11]=m("div",{class:"stat-icon"},"",-1)),m("div",gue,[m("h3",null,ce(f.value),1),y[10]||(y[10]=m("p",null,"System Users",-1))])]),m("div",vue,[y[13]||(y[13]=m("div",{class:"stat-icon"},"",-1)),m("div",xue,[m("h3",null,ce(h.value),1),y[12]||(y[12]=m("p",null,"Paraeducators",-1))])]),m("div",yue,[y[15]||(y[15]=m("div",{class:"stat-icon"},"",-1)),m("div",Eue,[m("h3",null,ce(p.value),1),y[14]||(y[14]=m("p",null,"Linked Sheets",-1))])])]),m("div",_ue,[m("div",bue,[m("div",Sue,[y[16]||(y[16]=m("h2",null," User & Student Management",-1)),m("button",{onClick:y[0]||(y[0]=E=>x.$emit("goToCategory","users-students")),class:"category-btn"}," Manage  ")]),y[17]||(y[17]=rs('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Add Users</h4><p data-v-71bf3b1b>Create new user accounts with role assignments</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Manage Users</h4><p data-v-71bf3b1b>Edit existing users, roles, and permissions</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Student Administration</h4><p data-v-71bf3b1b>Comprehensive student data management</p></div></div></div></div>',1))]),m("div",Tue,[m("div",Aue,[y[18]||(y[18]=m("h2",null," Aide Management",-1)),m("button",{onClick:y[1]||(y[1]=E=>x.$emit("goToCategory","aide-management")),class:"category-btn"}," Manage  ")]),y[19]||(y[19]=rs('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aide Assignment</h4><p data-v-71bf3b1b>Assign paraeducators to students and periods</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aide Schedule</h4><p data-v-71bf3b1b>Manage paraeducator schedules and assignments</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Time Table</h4><p data-v-71bf3b1b>Configure school periods and time slots</p></div></div></div></div>',1))]),m("div",wue,[m("div",Iue,[y[20]||(y[20]=m("h2",null," Data & Integration",-1)),m("button",{onClick:y[2]||(y[2]=E=>x.$emit("goToCategory","data-integration")),class:"category-btn"}," Manage  ")]),y[21]||(y[21]=rs('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>SEIS Import</h4><p data-v-71bf3b1b>Import student data from SEIS system</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Aeries API &amp; Import</h4><p data-v-71bf3b1b>Connect to Aeries SIS for data synchronization</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Testing Links</h4><p data-v-71bf3b1b>Google Sheets integration and export tools</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Teacher Feedback</h4><p data-v-71bf3b1b>Manage teacher feedback forms and responses</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Backup &amp; Restore</h4><p data-v-71bf3b1b>System backup and data restoration tools</p></div></div></div></div>',1))]),m("div",Cue,[m("div",kue,[y[22]||(y[22]=m("h2",null," System Configuration",-1)),m("button",{onClick:y[3]||(y[3]=E=>x.$emit("goToCategory","system-config")),class:"category-btn"}," Manage  ")]),y[23]||(y[23]=rs('<div class="category-content" data-v-71bf3b1b><div class="feature-list" data-v-71bf3b1b><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>Permissions</h4><p data-v-71bf3b1b>Role-based access control and permissions matrix</p></div></div><div class="feature-item" data-v-71bf3b1b><span class="feature-icon" data-v-71bf3b1b></span><div data-v-71bf3b1b><h4 data-v-71bf3b1b>App Settings</h4><p data-v-71bf3b1b>Configure application settings and preferences</p></div></div></div></div>',1))])]),m("div",Due,[y[31]||(y[31]=m("h2",null," System Status",-1)),m("div",Pue,[m("div",Rue,[y[26]||(y[26]=m("h3",null," Data Sync Status",-1)),m("div",Fue,[m("div",Oue,[m("span",{class:ut(["sync-indicator",{active:v.value}])},null,2),y[24]||(y[24]=m("span",null,"Google Sheets",-1)),me(a)?(V(),j("span",Nue,ce(g(me(a))),1)):Oe("",!0)]),m("div",Mue,[m("span",{class:ut(["sync-indicator",{active:c.value}])},null,2),y[25]||(y[25]=m("span",null,"Aeries SIS",-1)),m("span",Bue,ce(u.value),1)])])]),m("div",Lue,[y[29]||(y[29]=m("h3",null," User Activity",-1)),m("div",Uue,[m("div",Vue,[y[27]||(y[27]=m("span",null,"Active Users Today",-1)),m("span",$ue,ce(o.value),1)]),m("div",jue,[y[28]||(y[28]=m("span",null,"Recent Logins",-1)),m("span",Hue,ce(l.value),1)])])]),y[30]||(y[30]=rs('<div class="status-card" data-v-71bf3b1b><h3 data-v-71bf3b1b> System Health</h3><div class="health-indicators" data-v-71bf3b1b><div class="health-item" data-v-71bf3b1b><span data-v-71bf3b1b>Database</span><span class="health-status healthy" data-v-71bf3b1b> Healthy</span></div><div class="health-item" data-v-71bf3b1b><span data-v-71bf3b1b>Functions</span><span class="health-status healthy" data-v-71bf3b1b> Operational</span></div></div></div>',1))])]),m("div",Gue,[y[36]||(y[36]=m("h2",null," Quick Actions",-1)),m("div",zue,[m("button",{onClick:y[4]||(y[4]=E=>x.$emit("goToStudents")),class:"action-btn students"},y[32]||(y[32]=[m("span",{class:"action-icon"},"",-1),m("span",null,"View Students",-1)])),m("button",{onClick:y[5]||(y[5]=E=>x.$emit("goToCategory","users-students")),class:"action-btn users"},y[33]||(y[33]=[m("span",{class:"action-icon"},"",-1),m("span",null,"Manage Users",-1)])),m("button",{onClick:y[6]||(y[6]=E=>x.$emit("goToCategory","aide-management")),class:"action-btn aide"},y[34]||(y[34]=[m("span",{class:"action-icon"},"",-1),m("span",null,"Aide Management",-1)])),m("button",{onClick:y[7]||(y[7]=E=>x.$emit("goToCategory","data-integration")),class:"action-btn data"},y[35]||(y[35]=[m("span",{class:"action-icon"},"",-1),m("span",null,"Data & Integration",-1)]))])])]))}},Kue=At(Wue,[["__scopeId","data-v-71bf3b1b"]]);var yP={exports:{}};function que(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sg={exports:{}};const Xue={},Yue=Object.freeze(Object.defineProperty({__proto__:null,default:Xue},Symbol.toStringTag,{value:"Module"})),Que=_y(Yue);var rT;function qt(){return rT||(rT=1,function(t,e){(function(r,n){t.exports=n()})(Bt,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof Bt<"u"&&Bt.crypto&&(i=Bt.crypto),!i&&typeof que=="function")try{i=Que}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function y(){}return function(E){var I;return y.prototype=E,I=new y,y.prototype=null,I}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(y){var E=o(this);return y&&E.mixIn(y),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var E in y)y.hasOwnProperty(E)&&(this[E]=y[E]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=c.WordArray=u.extend({init:function(y,E){y=this.words=y||[],E!=s?this.sigBytes=E:this.sigBytes=y.length*4},toString:function(y){return(y||h).stringify(this)},concat:function(y){var E=this.words,I=y.words,P=this.sigBytes,D=y.sigBytes;if(this.clamp(),P%4)for(var A=0;A<D;A++){var _=I[A>>>2]>>>24-A%4*8&255;E[P+A>>>2]|=_<<24-(P+A)%4*8}else for(var b=0;b<D;b+=4)E[P+b>>>2]=I[b>>>2];return this.sigBytes+=D,this},clamp:function(){var y=this.words,E=this.sigBytes;y[E>>>2]&=4294967295<<32-E%4*8,y.length=n.ceil(E/4)},clone:function(){var y=u.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var E=[],I=0;I<y;I+=4)E.push(a());return new d.init(E,y)}}),f=l.enc={},h=f.Hex={stringify:function(y){for(var E=y.words,I=y.sigBytes,P=[],D=0;D<I;D++){var A=E[D>>>2]>>>24-D%4*8&255;P.push((A>>>4).toString(16)),P.push((A&15).toString(16))}return P.join("")},parse:function(y){for(var E=y.length,I=[],P=0;P<E;P+=2)I[P>>>3]|=parseInt(y.substr(P,2),16)<<24-P%8*4;return new d.init(I,E/2)}},p=f.Latin1={stringify:function(y){for(var E=y.words,I=y.sigBytes,P=[],D=0;D<I;D++){var A=E[D>>>2]>>>24-D%4*8&255;P.push(String.fromCharCode(A))}return P.join("")},parse:function(y){for(var E=y.length,I=[],P=0;P<E;P++)I[P>>>2]|=(y.charCodeAt(P)&255)<<24-P%4*8;return new d.init(I,E)}},v=f.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},g=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=v.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var E,I=this._data,P=I.words,D=I.sigBytes,A=this.blockSize,_=A*4,b=D/_;y?b=n.ceil(b):b=n.max((b|0)-this._minBufferSize,0);var w=b*A,C=n.min(w*4,D);if(w){for(var T=0;T<w;T+=A)this._doProcessBlock(P,T);E=P.splice(0,w),I.sigBytes-=C}return new d.init(E,C)},clone:function(){var y=u.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});c.Hasher=g.extend({cfg:u.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var E=this._doFinalize();return E},blockSize:16,_createHelper:function(y){return function(E,I){return new y.init(I).finalize(E)}},_createHmacHelper:function(y){return function(E,I){return new x.HMAC.init(y,I).finalize(E)}}});var x=l.algo={};return l}(Math);return r})}(Sg)),Sg.exports}var Tg={exports:{}},nT;function dm(){return nT||(nT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=s.x64={};l.Word=a.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=a.extend({init:function(c,u){c=this.words=c||[],u!=n?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,d=[],f=0;f<u;f++){var h=c[f];d.push(h.high),d.push(h.low)}return o.create(d,this.sigBytes)},clone:function(){for(var c=a.clone.call(this),u=c.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return c}})}(),r})}(Tg)),Tg.exports}var Ag={exports:{}},sT;function Jue(){return sT||(sT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,o=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],d=0;d<c;d++)u[d>>>2]|=l[d]<<24-d%4*8;a.call(this,u,c)}else a.apply(this,arguments)};o.prototype=i}}(),r.lib.WordArray})}(Ag)),Ag.exports}var wg={exports:{}},aT;function Zue(){return aT||(aT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var h=c[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(u,c*2)}},a.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,d=[],f=0;f<u;f+=2){var h=o(c[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=o(l.charCodeAt(d)<<16-d%2*16);return i.create(u,c*2)}};function o(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(wg)),wg.exports}var Ig={exports:{}},iT;function Rl(){return iT||(iT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var f=[],h=0;h<u;h+=3)for(var p=c[h>>>2]>>>24-h%4*8&255,v=c[h+1>>>2]>>>24-(h+1)%4*8&255,g=c[h+2>>>2]>>>24-(h+2)%4*8&255,x=p<<16|v<<8|g,y=0;y<4&&h+y*.75<u;y++)f.push(d.charAt(x>>>6*(3-y)&63));var E=d.charAt(64);if(E)for(;f.length%4;)f.push(E);return f.join("")},parse:function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var h=u.charAt(64);if(h){var p=l.indexOf(h);p!==-1&&(c=p)}return o(l,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,c,u){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var p=u[l.charCodeAt(h-1)]<<h%4*2,v=u[l.charCodeAt(h)]>>>6-h%4*2,g=p|v;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64})}(Ig)),Ig.exports}var Cg={exports:{}},oT;function ede(){return oT||(oT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,f=c?this._safe_map:this._map;l.clamp();for(var h=[],p=0;p<d;p+=3)for(var v=u[p>>>2]>>>24-p%4*8&255,g=u[p+1>>>2]>>>24-(p+1)%4*8&255,x=u[p+2>>>2]>>>24-(p+2)%4*8&255,y=v<<16|g<<8|x,E=0;E<4&&p+E*.75<d;E++)h.push(f.charAt(y>>>6*(3-E)&63));var I=f.charAt(64);if(I)for(;h.length%4;)h.push(I);return h.join("")},parse:function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var v=l.indexOf(p);v!==-1&&(u=v)}return o(l,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(l,c,u){for(var d=[],f=0,h=0;h<c;h++)if(h%4){var p=u[l.charCodeAt(h-1)]<<h%4*2,v=u[l.charCodeAt(h)]>>>6-h%4*2,g=p|v;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),r.enc.Base64url})}(Cg)),Cg.exports}var kg={exports:{}},lT;function Fl(){return lT||(lT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[];(function(){for(var v=0;v<64;v++)c[v]=n.abs(n.sin(v+1))*4294967296|0})();var u=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,g){for(var x=0;x<16;x++){var y=g+x,E=v[y];v[y]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var I=this._hash.words,P=v[g+0],D=v[g+1],A=v[g+2],_=v[g+3],b=v[g+4],w=v[g+5],C=v[g+6],T=v[g+7],k=v[g+8],N=v[g+9],B=v[g+10],R=v[g+11],O=v[g+12],U=v[g+13],M=v[g+14],q=v[g+15],H=I[0],L=I[1],z=I[2],K=I[3];H=d(H,L,z,K,P,7,c[0]),K=d(K,H,L,z,D,12,c[1]),z=d(z,K,H,L,A,17,c[2]),L=d(L,z,K,H,_,22,c[3]),H=d(H,L,z,K,b,7,c[4]),K=d(K,H,L,z,w,12,c[5]),z=d(z,K,H,L,C,17,c[6]),L=d(L,z,K,H,T,22,c[7]),H=d(H,L,z,K,k,7,c[8]),K=d(K,H,L,z,N,12,c[9]),z=d(z,K,H,L,B,17,c[10]),L=d(L,z,K,H,R,22,c[11]),H=d(H,L,z,K,O,7,c[12]),K=d(K,H,L,z,U,12,c[13]),z=d(z,K,H,L,M,17,c[14]),L=d(L,z,K,H,q,22,c[15]),H=f(H,L,z,K,D,5,c[16]),K=f(K,H,L,z,C,9,c[17]),z=f(z,K,H,L,R,14,c[18]),L=f(L,z,K,H,P,20,c[19]),H=f(H,L,z,K,w,5,c[20]),K=f(K,H,L,z,B,9,c[21]),z=f(z,K,H,L,q,14,c[22]),L=f(L,z,K,H,b,20,c[23]),H=f(H,L,z,K,N,5,c[24]),K=f(K,H,L,z,M,9,c[25]),z=f(z,K,H,L,_,14,c[26]),L=f(L,z,K,H,k,20,c[27]),H=f(H,L,z,K,U,5,c[28]),K=f(K,H,L,z,A,9,c[29]),z=f(z,K,H,L,T,14,c[30]),L=f(L,z,K,H,O,20,c[31]),H=h(H,L,z,K,w,4,c[32]),K=h(K,H,L,z,k,11,c[33]),z=h(z,K,H,L,R,16,c[34]),L=h(L,z,K,H,M,23,c[35]),H=h(H,L,z,K,D,4,c[36]),K=h(K,H,L,z,b,11,c[37]),z=h(z,K,H,L,T,16,c[38]),L=h(L,z,K,H,B,23,c[39]),H=h(H,L,z,K,U,4,c[40]),K=h(K,H,L,z,P,11,c[41]),z=h(z,K,H,L,_,16,c[42]),L=h(L,z,K,H,C,23,c[43]),H=h(H,L,z,K,N,4,c[44]),K=h(K,H,L,z,O,11,c[45]),z=h(z,K,H,L,q,16,c[46]),L=h(L,z,K,H,A,23,c[47]),H=p(H,L,z,K,P,6,c[48]),K=p(K,H,L,z,T,10,c[49]),z=p(z,K,H,L,M,15,c[50]),L=p(L,z,K,H,w,21,c[51]),H=p(H,L,z,K,O,6,c[52]),K=p(K,H,L,z,_,10,c[53]),z=p(z,K,H,L,B,15,c[54]),L=p(L,z,K,H,D,21,c[55]),H=p(H,L,z,K,k,6,c[56]),K=p(K,H,L,z,q,10,c[57]),z=p(z,K,H,L,C,15,c[58]),L=p(L,z,K,H,U,21,c[59]),H=p(H,L,z,K,b,6,c[60]),K=p(K,H,L,z,R,10,c[61]),z=p(z,K,H,L,A,15,c[62]),L=p(L,z,K,H,N,21,c[63]),I[0]=I[0]+H|0,I[1]=I[1]+L|0,I[2]=I[2]+z|0,I[3]=I[3]+K|0},_doFinalize:function(){var v=this._data,g=v.words,x=this._nDataBytes*8,y=v.sigBytes*8;g[y>>>5]|=128<<24-y%32;var E=n.floor(x/4294967296),I=x;g[(y+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,v.sigBytes=(g.length+1)*4,this._process();for(var P=this._hash,D=P.words,A=0;A<4;A++){var _=D[A];D[A]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return P},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});function d(v,g,x,y,E,I,P){var D=v+(g&x|~g&y)+E+P;return(D<<I|D>>>32-I)+g}function f(v,g,x,y,E,I,P){var D=v+(g&y|x&~y)+E+P;return(D<<I|D>>>32-I)+g}function h(v,g,x,y,E,I,P){var D=v+(g^x^y)+E+P;return(D<<I|D>>>32-I)+g}function p(v,g,x,y,E,I,P){var D=v+(x^(g|~y))+E+P;return(D<<I|D>>>32-I)+g}s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5})}(kg)),kg.exports}var Dg={exports:{}},cT;function EP(){return cT||(cT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,o=n.algo,l=[],c=o.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,h=f[0],p=f[1],v=f[2],g=f[3],x=f[4],y=0;y<80;y++){if(y<16)l[y]=u[d+y]|0;else{var E=l[y-3]^l[y-8]^l[y-14]^l[y-16];l[y]=E<<1|E>>>31}var I=(h<<5|h>>>27)+x+l[y];y<20?I+=(p&v|~p&g)+1518500249:y<40?I+=(p^v^g)+1859775393:y<60?I+=(p&v|p&g|v&g)-1894007588:I+=(p^v^g)-899497514,x=g,g=v,v=p<<30|p>>>2,p=h,h=I}f[0]=f[0]+h|0,f[1]=f[1]+p|0,f[2]=f[2]+v|0,f[3]=f[3]+g|0,f[4]=f[4]+x|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,h=u.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=a._createHelper(c),n.HmacSHA1=a._createHmacHelper(c)}(),r.SHA1})}(Dg)),Dg.exports}var Pg={exports:{}},uT;function Zy(){return uT||(uT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=[],u=[];(function(){function h(x){for(var y=n.sqrt(x),E=2;E<=y;E++)if(!(x%E))return!1;return!0}function p(x){return(x-(x|0))*4294967296|0}for(var v=2,g=0;g<64;)h(v)&&(g<8&&(c[g]=p(n.pow(v,1/2))),u[g]=p(n.pow(v,1/3)),g++),v++})();var d=[],f=l.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(h,p){for(var v=this._hash.words,g=v[0],x=v[1],y=v[2],E=v[3],I=v[4],P=v[5],D=v[6],A=v[7],_=0;_<64;_++){if(_<16)d[_]=h[p+_]|0;else{var b=d[_-15],w=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,C=d[_-2],T=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;d[_]=w+d[_-7]+T+d[_-16]}var k=I&P^~I&D,N=g&x^g&y^x&y,B=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),R=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),O=A+R+k+u[_]+d[_],U=B+N;A=D,D=P,P=I,I=E+O|0,E=y,y=x,x=g,g=O+U|0}v[0]=v[0]+g|0,v[1]=v[1]+x|0,v[2]=v[2]+y|0,v[3]=v[3]+E|0,v[4]=v[4]+I|0,v[5]=v[5]+P|0,v[6]=v[6]+D|0,v[7]=v[7]+A|0},_doFinalize:function(){var h=this._data,p=h.words,v=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=n.floor(v/4294967296),p[(g+64>>>9<<4)+15]=v,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA256=o._createHelper(f),s.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256})}(Pg)),Pg.exports}var Rg={exports:{}},dT;function tde(){return dT||(dT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Zy())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,o=a.SHA256,l=a.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c}});n.SHA224=o._createHelper(l),n.HmacSHA224=o._createHmacHelper(l)}(),r.SHA224})}(Rg)),Rg.exports}var Fg={exports:{}},fT;function _P(){return fT||(fT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),dm())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,o=a.Word,l=a.WordArray,c=n.algo;function u(){return o.create.apply(o,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=u()})();var h=c.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(p,v){for(var g=this._hash.words,x=g[0],y=g[1],E=g[2],I=g[3],P=g[4],D=g[5],A=g[6],_=g[7],b=x.high,w=x.low,C=y.high,T=y.low,k=E.high,N=E.low,B=I.high,R=I.low,O=P.high,U=P.low,M=D.high,q=D.low,H=A.high,L=A.low,z=_.high,K=_.low,te=b,ge=w,ie=C,he=T,Z=k,Q=N,xe=B,X=R,W=O,Y=U,ee=M,ve=q,re=H,se=L,le=z,Te=K,we=0;we<80;we++){var Se,ze,Ie=f[we];if(we<16)ze=Ie.high=p[v+we*2]|0,Se=Ie.low=p[v+we*2+1]|0;else{var $e=f[we-15],Be=$e.high,We=$e.low,Ke=(Be>>>1|We<<31)^(Be>>>8|We<<24)^Be>>>7,Ee=(We>>>1|Be<<31)^(We>>>8|Be<<24)^(We>>>7|Be<<25),ye=f[we-2],_e=ye.high,Re=ye.low,Ge=(_e>>>19|Re<<13)^(_e<<3|Re>>>29)^_e>>>6,st=(Re>>>19|_e<<13)^(Re<<3|_e>>>29)^(Re>>>6|_e<<26),gt=f[we-7],yt=gt.high,Ut=gt.low,pt=f[we-16],lt=pt.high,mt=pt.low;Se=Ee+Ut,ze=Ke+yt+(Se>>>0<Ee>>>0?1:0),Se=Se+st,ze=ze+Ge+(Se>>>0<st>>>0?1:0),Se=Se+mt,ze=ze+lt+(Se>>>0<mt>>>0?1:0),Ie.high=ze,Ie.low=Se}var kt=W&ee^~W&re,Ot=Y&ve^~Y&se,Er=te&ie^te&Z^ie&Z,Kn=ge&he^ge&Q^he&Q,Si=(te>>>28|ge<<4)^(te<<30|ge>>>2)^(te<<25|ge>>>7),cs=(ge>>>28|te<<4)^(ge<<30|te>>>2)^(ge<<25|te>>>7),Ol=(W>>>14|Y<<18)^(W>>>18|Y<<14)^(W<<23|Y>>>9),ja=(Y>>>14|W<<18)^(Y>>>18|W<<14)^(Y<<23|W>>>9),To=d[we],en=To.high,Ao=To.low,kr=Te+ja,Cn=le+Ol+(kr>>>0<Te>>>0?1:0),kr=kr+Ot,Cn=Cn+kt+(kr>>>0<Ot>>>0?1:0),kr=kr+Ao,Cn=Cn+en+(kr>>>0<Ao>>>0?1:0),kr=kr+Se,Cn=Cn+ze+(kr>>>0<Se>>>0?1:0),Nl=cs+Kn,lu=Si+Er+(Nl>>>0<cs>>>0?1:0);le=re,Te=se,re=ee,se=ve,ee=W,ve=Y,Y=X+kr|0,W=xe+Cn+(Y>>>0<X>>>0?1:0)|0,xe=Z,X=Q,Z=ie,Q=he,ie=te,he=ge,ge=kr+Nl|0,te=Cn+lu+(ge>>>0<kr>>>0?1:0)|0}w=x.low=w+ge,x.high=b+te+(w>>>0<ge>>>0?1:0),T=y.low=T+he,y.high=C+ie+(T>>>0<he>>>0?1:0),N=E.low=N+Q,E.high=k+Z+(N>>>0<Q>>>0?1:0),R=I.low=R+X,I.high=B+xe+(R>>>0<X>>>0?1:0),U=P.low=U+Y,P.high=O+W+(U>>>0<Y>>>0?1:0),q=D.low=q+ve,D.high=M+ee+(q>>>0<ve>>>0?1:0),L=A.low=L+se,A.high=H+re+(L>>>0<se>>>0?1:0),K=_.low=K+Te,_.high=z+le+(K>>>0<Te>>>0?1:0)},_doFinalize:function(){var p=this._data,v=p.words,g=this._nDataBytes*8,x=p.sigBytes*8;v[x>>>5]|=128<<24-x%32,v[(x+128>>>10<<5)+30]=Math.floor(g/4294967296),v[(x+128>>>10<<5)+31]=g,p.sigBytes=v.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var p=i.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});n.SHA512=i._createHelper(h),n.HmacSHA512=i._createHmacHelper(h)}(),r.SHA512})}(Fg)),Fg.exports}var Og={exports:{}},hT;function rde(){return hT||(hT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),dm(),_P())})(Bt,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,o=n.algo,l=o.SHA512,c=o.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=l._createHelper(c),n.HmacSHA384=l._createHmacHelper(c)}(),r.SHA384})}(Og)),Og.exports}var Ng={exports:{}},pT;function nde(){return pT||(pT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),dm())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.x64,c=l.Word,u=s.algo,d=[],f=[],h=[];(function(){for(var g=1,x=0,y=0;y<24;y++){d[g+5*x]=(y+1)*(y+2)/2%64;var E=x%5,I=(2*g+3*x)%5;g=E,x=I}for(var g=0;g<5;g++)for(var x=0;x<5;x++)f[g+5*x]=x+(2*g+3*x)%5*5;for(var P=1,D=0;D<24;D++){for(var A=0,_=0,b=0;b<7;b++){if(P&1){var w=(1<<b)-1;w<32?_^=1<<w:A^=1<<w-32}P&128?P=P<<1^113:P<<=1}h[D]=c.create(A,_)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=c.create()})();var v=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],x=0;x<25;x++)g[x]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,x){for(var y=this._state,E=this.blockSize/2,I=0;I<E;I++){var P=g[x+2*I],D=g[x+2*I+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var A=y[I];A.high^=D,A.low^=P}for(var _=0;_<24;_++){for(var b=0;b<5;b++){for(var w=0,C=0,T=0;T<5;T++){var A=y[b+5*T];w^=A.high,C^=A.low}var k=p[b];k.high=w,k.low=C}for(var b=0;b<5;b++)for(var N=p[(b+4)%5],B=p[(b+1)%5],R=B.high,O=B.low,w=N.high^(R<<1|O>>>31),C=N.low^(O<<1|R>>>31),T=0;T<5;T++){var A=y[b+5*T];A.high^=w,A.low^=C}for(var U=1;U<25;U++){var w,C,A=y[U],M=A.high,q=A.low,H=d[U];H<32?(w=M<<H|q>>>32-H,C=q<<H|M>>>32-H):(w=q<<H-32|M>>>64-H,C=M<<H-32|q>>>64-H);var L=p[f[U]];L.high=w,L.low=C}var z=p[0],K=y[0];z.high=K.high,z.low=K.low;for(var b=0;b<5;b++)for(var T=0;T<5;T++){var U=b+5*T,A=y[U],te=p[U],ge=p[(b+1)%5+5*T],ie=p[(b+2)%5+5*T];A.high=te.high^~ge.high&ie.high,A.low=te.low^~ge.low&ie.low}var A=y[0],he=h[_];A.high^=he.high,A.low^=he.low}},_doFinalize:function(){var g=this._data,x=g.words;this._nDataBytes*8;var y=g.sigBytes*8,E=this.blockSize*32;x[y>>>5]|=1<<24-y%32,x[(n.ceil((y+1)/E)*E>>>5)-1]|=128,g.sigBytes=x.length*4,this._process();for(var I=this._state,P=this.cfg.outputLength/8,D=P/8,A=[],_=0;_<D;_++){var b=I[_],w=b.high,C=b.low;w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,A.push(C),A.push(w)}return new a.init(A,P)},clone:function(){for(var g=o.clone.call(this),x=g._state=this._state.slice(0),y=0;y<25;y++)x[y]=x[y].clone();return g}});s.SHA3=o._createHelper(v),s.HmacSHA3=o._createHmacHelper(v)}(Math),r.SHA3})}(Ng)),Ng.exports}var Mg={exports:{}},mT;function sde(){return mT||(mT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,o=i.Hasher,l=s.algo,c=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=a.create([0,1518500249,1859775393,2400959708,2840853838]),p=a.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,A){for(var _=0;_<16;_++){var b=A+_,w=D[b];D[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var C=this._hash.words,T=h.words,k=p.words,N=c.words,B=u.words,R=d.words,O=f.words,U,M,q,H,L,z,K,te,ge,ie;z=U=C[0],K=M=C[1],te=q=C[2],ge=H=C[3],ie=L=C[4];for(var he,_=0;_<80;_+=1)he=U+D[A+N[_]]|0,_<16?he+=g(M,q,H)+T[0]:_<32?he+=x(M,q,H)+T[1]:_<48?he+=y(M,q,H)+T[2]:_<64?he+=E(M,q,H)+T[3]:he+=I(M,q,H)+T[4],he=he|0,he=P(he,R[_]),he=he+L|0,U=L,L=H,H=P(q,10),q=M,M=he,he=z+D[A+B[_]]|0,_<16?he+=I(K,te,ge)+k[0]:_<32?he+=E(K,te,ge)+k[1]:_<48?he+=y(K,te,ge)+k[2]:_<64?he+=x(K,te,ge)+k[3]:he+=g(K,te,ge)+k[4],he=he|0,he=P(he,O[_]),he=he+ie|0,z=ie,ie=ge,ge=P(te,10),te=K,K=he;he=C[1]+q+ge|0,C[1]=C[2]+H+ie|0,C[2]=C[3]+L+z|0,C[3]=C[4]+U+K|0,C[4]=C[0]+M+te|0,C[0]=he},_doFinalize:function(){var D=this._data,A=D.words,_=this._nDataBytes*8,b=D.sigBytes*8;A[b>>>5]|=128<<24-b%32,A[(b+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,D.sigBytes=(A.length+1)*4,this._process();for(var w=this._hash,C=w.words,T=0;T<5;T++){var k=C[T];C[T]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return w},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function g(D,A,_){return D^A^_}function x(D,A,_){return D&A|~D&_}function y(D,A,_){return(D|~A)^_}function E(D,A,_){return D&_|A&~_}function I(D,A,_){return D^(A|~_)}function P(D,A){return D<<A|D>>>32-A}s.RIPEMD160=o._createHelper(v),s.HmacRIPEMD160=o._createHmacHelper(v)}(),r.RIPEMD160})}(Mg)),Mg.exports}var Bg={exports:{}},gT;function eE(){return gT||(gT=1,function(t,e){(function(r,n){t.exports=n(qt())})(Bt,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,o=a.Utf8,l=n.algo;l.HMAC=i.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,f=d*4;u.sigBytes>f&&(u=c.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),p=this._iKey=u.clone(),v=h.words,g=p.words,x=0;x<d;x++)v[x]^=1549556828,g[x]^=909522486;h.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,d=u.finalize(c);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(Bg)),Bg.exports}var Lg={exports:{}},vT;function ade(){return vT||(vT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Zy(),eE())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.SHA256,c=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,p=c.create(h.hasher,d),v=a.create(),g=a.create([1]),x=v.words,y=g.words,E=h.keySize,I=h.iterations;x.length<E;){var P=p.update(f).finalize(g);p.reset();for(var D=P.words,A=D.length,_=P,b=1;b<I;b++){_=p.finalize(_),p.reset();for(var w=_.words,C=0;C<A;C++)D[C]^=w[C]}v.concat(P),y[0]++}return v.sigBytes=E*4,v}});n.PBKDF2=function(d,f,h){return u.create(h).compute(d,f)}}(),r.PBKDF2})}(Lg)),Lg.exports}var Ug={exports:{}},xT;function So(){return xT||(xT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),EP(),eE())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,o=n.algo,l=o.MD5,c=o.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,h=this.cfg,p=h.hasher.create(),v=a.create(),g=v.words,x=h.keySize,y=h.iterations;g.length<x;){f&&p.update(f),f=p.update(u).finalize(d),p.reset();for(var E=1;E<y;E++)f=p.finalize(f),p.reset();v.concat(f)}return v.sigBytes=x*4,v}});n.EvpKDF=function(u,d,f){return c.create(f).compute(u,d)}}(),r.EvpKDF})}(Ug)),Ug.exports}var Vg={exports:{}},yT;function gn(){return yT||(yT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),So())})(Bt,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,o=i.WordArray,l=i.BufferedBlockAlgorithm,c=s.enc;c.Utf8;var u=c.Base64,d=s.algo,f=d.EvpKDF,h=i.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(w,C){return this.create(this._ENC_XFORM_MODE,w,C)},createDecryptor:function(w,C){return this.create(this._DEC_XFORM_MODE,w,C)},init:function(w,C,T){this.cfg=this.cfg.extend(T),this._xformMode=w,this._key=C,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(w){return this._append(w),this._process()},finalize:function(w){w&&this._append(w);var C=this._doFinalize();return C},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function w(C){return typeof C=="string"?b:D}return function(C){return{encrypt:function(T,k,N){return w(k).encrypt(C,T,k,N)},decrypt:function(T,k,N){return w(k).decrypt(C,T,k,N)}}}}()});i.StreamCipher=h.extend({_doFinalize:function(){var w=this._process(!0);return w},blockSize:1});var p=s.mode={},v=i.BlockCipherMode=a.extend({createEncryptor:function(w,C){return this.Encryptor.create(w,C)},createDecryptor:function(w,C){return this.Decryptor.create(w,C)},init:function(w,C){this._cipher=w,this._iv=C}}),g=p.CBC=function(){var w=v.extend();w.Encryptor=w.extend({processBlock:function(T,k){var N=this._cipher,B=N.blockSize;C.call(this,T,k,B),N.encryptBlock(T,k),this._prevBlock=T.slice(k,k+B)}}),w.Decryptor=w.extend({processBlock:function(T,k){var N=this._cipher,B=N.blockSize,R=T.slice(k,k+B);N.decryptBlock(T,k),C.call(this,T,k,B),this._prevBlock=R}});function C(T,k,N){var B,R=this._iv;R?(B=R,this._iv=n):B=this._prevBlock;for(var O=0;O<N;O++)T[k+O]^=B[O]}return w}(),x=s.pad={},y=x.Pkcs7={pad:function(w,C){for(var T=C*4,k=T-w.sigBytes%T,N=k<<24|k<<16|k<<8|k,B=[],R=0;R<k;R+=4)B.push(N);var O=o.create(B,k);w.concat(O)},unpad:function(w){var C=w.words[w.sigBytes-1>>>2]&255;w.sigBytes-=C}};i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:y}),reset:function(){var w;h.reset.call(this);var C=this.cfg,T=C.iv,k=C.mode;this._xformMode==this._ENC_XFORM_MODE?w=k.createEncryptor:(w=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==w?this._mode.init(this,T&&T.words):(this._mode=w.call(k,this,T&&T.words),this._mode.__creator=w)},_doProcessBlock:function(w,C){this._mode.processBlock(w,C)},_doFinalize:function(){var w,C=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(C.pad(this._data,this.blockSize),w=this._process(!0)):(w=this._process(!0),C.unpad(w)),w},blockSize:128/32});var E=i.CipherParams=a.extend({init:function(w){this.mixIn(w)},toString:function(w){return(w||this.formatter).stringify(this)}}),I=s.format={},P=I.OpenSSL={stringify:function(w){var C,T=w.ciphertext,k=w.salt;return k?C=o.create([1398893684,1701076831]).concat(k).concat(T):C=T,C.toString(u)},parse:function(w){var C,T=u.parse(w),k=T.words;return k[0]==1398893684&&k[1]==1701076831&&(C=o.create(k.slice(2,4)),k.splice(0,4),T.sigBytes-=16),E.create({ciphertext:T,salt:C})}},D=i.SerializableCipher=a.extend({cfg:a.extend({format:P}),encrypt:function(w,C,T,k){k=this.cfg.extend(k);var N=w.createEncryptor(T,k),B=N.finalize(C),R=N.cfg;return E.create({ciphertext:B,key:T,iv:R.iv,algorithm:w,mode:R.mode,padding:R.padding,blockSize:w.blockSize,formatter:k.format})},decrypt:function(w,C,T,k){k=this.cfg.extend(k),C=this._parse(C,k.format);var N=w.createDecryptor(T,k).finalize(C.ciphertext);return N},_parse:function(w,C){return typeof w=="string"?C.parse(w,this):w}}),A=s.kdf={},_=A.OpenSSL={execute:function(w,C,T,k,N){if(k||(k=o.random(64/8)),N)var B=f.create({keySize:C+T,hasher:N}).compute(w,k);else var B=f.create({keySize:C+T}).compute(w,k);var R=o.create(B.words.slice(C),T*4);return B.sigBytes=C*4,E.create({key:B,iv:R,salt:k})}},b=i.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:_}),encrypt:function(w,C,T,k){k=this.cfg.extend(k);var N=k.kdf.execute(T,w.keySize,w.ivSize,k.salt,k.hasher);k.iv=N.iv;var B=D.encrypt.call(this,w,C,N.key,k);return B.mixIn(N),B},decrypt:function(w,C,T,k){k=this.cfg.extend(k),C=this._parse(C,k.format);var N=k.kdf.execute(T,w.keySize,w.ivSize,C.salt,k.hasher);k.iv=N.iv;var B=D.decrypt.call(this,w,C,N.key,k);return B}})}()})}(Vg)),Vg.exports}var $g={exports:{}},ET;function ide(){return ET||(ET=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize;s.call(this,i,a,l,o),this._prevBlock=i.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=i.slice(a,a+l);s.call(this,i,a,l,o),this._prevBlock=c}});function s(i,a,o,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var d=0;d<o;d++)i[a+d]^=c[d]}return n}(),r.mode.CFB})}($g)),$g.exports}var jg={exports:{}},_T;function ode(){return _T||(_T=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var d=u.slice(0);o.encryptBlock(d,0),u[l-1]=u[l-1]+1|0;for(var f=0;f<l;f++)i[a+f]^=d[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(jg)),jg.exports}var Hg={exports:{}},bT;function lde(){return bT||(bT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var l=o>>16&255,c=o>>8&255,u=o&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,o=0,o+=l<<16,o+=c<<8,o+=u}else o+=1<<24;return o}function i(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=n.Encryptor=n.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),i(f);var h=f.slice(0);c.encryptBlock(h,0);for(var p=0;p<u;p++)o[l+p]^=h[p]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(Hg)),Hg.exports}var Gg={exports:{}},ST;function cde(){return ST||(ST=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var o=this._cipher,l=o.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(u,0);for(var d=0;d<l;d++)i[a+d]^=u[d]}});return n.Decryptor=s,n}(),r.mode.OFB})}(Gg)),Gg.exports}var zg={exports:{}},TT;function ude(){return TT||(TT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(zg)),zg.exports}var Wg={exports:{}},AT;function dde(){return AT||(AT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,o=a-i%a,l=i+o-1;n.clamp(),n.words[l>>>2]|=o<<24-l%4*8,n.sigBytes+=o},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Wg)),Wg.exports}var Kg={exports:{}},wT;function fde(){return wT||(wT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(Kg)),Kg.exports}var qg={exports:{}},IT;function hde(){return IT||(IT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(qg)),qg.exports}var Xg={exports:{}},CT;function pde(){return CT||(CT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Xg)),Xg.exports}var Yg={exports:{}},kT;function mde(){return kT||(kT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Yg)),Yg.exports}var Qg={exports:{}},DT;function gde(){return DT||(DT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),gn())})(Bt,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,o=s.enc,l=o.Hex,c=s.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var d=l.parse(u);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Qg)),Qg.exports}var Jg={exports:{}},PT;function vde(){return PT||(PT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Rl(),Fl(),So(),gn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,o=[],l=[],c=[],u=[],d=[],f=[],h=[],p=[],v=[],g=[];(function(){for(var E=[],I=0;I<256;I++)I<128?E[I]=I<<1:E[I]=I<<1^283;for(var P=0,D=0,I=0;I<256;I++){var A=D^D<<1^D<<2^D<<3^D<<4;A=A>>>8^A&255^99,o[P]=A,l[A]=P;var _=E[P],b=E[_],w=E[b],C=E[A]*257^A*16843008;c[P]=C<<24|C>>>8,u[P]=C<<16|C>>>16,d[P]=C<<8|C>>>24,f[P]=C;var C=w*16843009^b*65537^_*257^P*16843008;h[A]=C<<24|C>>>8,p[A]=C<<16|C>>>16,v[A]=C<<8|C>>>24,g[A]=C,P?(P=_^E[E[E[w^_]]],D^=E[E[D]]):P=D=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],y=a.AES=i.extend({_doReset:function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,P=I.words,D=I.sigBytes/4,A=this._nRounds=D+6,_=(A+1)*4,b=this._keySchedule=[],w=0;w<_;w++)w<D?b[w]=P[w]:(E=b[w-1],w%D?D>6&&w%D==4&&(E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255]):(E=E<<8|E>>>24,E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255],E^=x[w/D|0]<<24),b[w]=b[w-D]^E);for(var C=this._invKeySchedule=[],T=0;T<_;T++){var w=_-T;if(T%4)var E=b[w];else var E=b[w-4];T<4||w<=4?C[T]=E:C[T]=h[o[E>>>24]]^p[o[E>>>16&255]]^v[o[E>>>8&255]]^g[o[E&255]]}}},encryptBlock:function(E,I){this._doCryptBlock(E,I,this._keySchedule,c,u,d,f,o)},decryptBlock:function(E,I){var P=E[I+1];E[I+1]=E[I+3],E[I+3]=P,this._doCryptBlock(E,I,this._invKeySchedule,h,p,v,g,l);var P=E[I+1];E[I+1]=E[I+3],E[I+3]=P},_doCryptBlock:function(E,I,P,D,A,_,b,w){for(var C=this._nRounds,T=E[I]^P[0],k=E[I+1]^P[1],N=E[I+2]^P[2],B=E[I+3]^P[3],R=4,O=1;O<C;O++){var U=D[T>>>24]^A[k>>>16&255]^_[N>>>8&255]^b[B&255]^P[R++],M=D[k>>>24]^A[N>>>16&255]^_[B>>>8&255]^b[T&255]^P[R++],q=D[N>>>24]^A[B>>>16&255]^_[T>>>8&255]^b[k&255]^P[R++],H=D[B>>>24]^A[T>>>16&255]^_[k>>>8&255]^b[N&255]^P[R++];T=U,k=M,N=q,B=H}var U=(w[T>>>24]<<24|w[k>>>16&255]<<16|w[N>>>8&255]<<8|w[B&255])^P[R++],M=(w[k>>>24]<<24|w[N>>>16&255]<<16|w[B>>>8&255]<<8|w[T&255])^P[R++],q=(w[N>>>24]<<24|w[B>>>16&255]<<16|w[T>>>8&255]<<8|w[k&255])^P[R++],H=(w[B>>>24]<<24|w[T>>>16&255]<<16|w[k>>>8&255]<<8|w[N&255])^P[R++];E[I]=U,E[I+1]=M,E[I+2]=q,E[I+3]=H},keySize:256/32});n.AES=i._createHelper(y)}(),r.AES})}(Jg)),Jg.exports}var Zg={exports:{}},RT;function xde(){return RT||(RT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Rl(),Fl(),So(),gn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,o=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=a.extend({_doReset:function(){for(var x=this._key,y=x.words,E=[],I=0;I<56;I++){var P=l[I]-1;E[I]=y[P>>>5]>>>31-P%32&1}for(var D=this._subKeys=[],A=0;A<16;A++){for(var _=D[A]=[],b=u[A],I=0;I<24;I++)_[I/6|0]|=E[(c[I]-1+b)%28]<<31-I%6,_[4+(I/6|0)]|=E[28+(c[I+24]-1+b)%28]<<31-I%6;_[0]=_[0]<<1|_[0]>>>31;for(var I=1;I<7;I++)_[I]=_[I]>>>(I-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var w=this._invSubKeys=[],I=0;I<16;I++)w[I]=D[15-I]},encryptBlock:function(x,y){this._doCryptBlock(x,y,this._subKeys)},decryptBlock:function(x,y){this._doCryptBlock(x,y,this._invSubKeys)},_doCryptBlock:function(x,y,E){this._lBlock=x[y],this._rBlock=x[y+1],p.call(this,4,252645135),p.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),p.call(this,1,1431655765);for(var I=0;I<16;I++){for(var P=E[I],D=this._lBlock,A=this._rBlock,_=0,b=0;b<8;b++)_|=d[b][((A^P[b])&f[b])>>>0];this._lBlock=A,this._rBlock=D^_}var w=this._lBlock;this._lBlock=this._rBlock,this._rBlock=w,p.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),x[y]=this._lBlock,x[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(x,y){var E=(this._lBlock>>>x^this._rBlock)&y;this._rBlock^=E,this._lBlock^=E<<x}function v(x,y){var E=(this._rBlock>>>x^this._lBlock)&y;this._lBlock^=E,this._rBlock^=E<<x}n.DES=a._createHelper(h);var g=o.TripleDES=a.extend({_doReset:function(){var x=this._key,y=x.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=y.slice(0,2),I=y.length<4?y.slice(0,2):y.slice(2,4),P=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=h.createEncryptor(i.create(E)),this._des2=h.createEncryptor(i.create(I)),this._des3=h.createEncryptor(i.create(P))},encryptBlock:function(x,y){this._des1.encryptBlock(x,y),this._des2.decryptBlock(x,y),this._des3.encryptBlock(x,y)},decryptBlock:function(x,y){this._des3.decryptBlock(x,y),this._des2.encryptBlock(x,y),this._des1.decryptBlock(x,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(g)}(),r.TripleDES})}(Zg)),Zg.exports}var ev={exports:{}},FT;function yde(){return FT||(FT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Rl(),Fl(),So(),gn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=a.RC4=i.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,v=0;p<256;p++){var g=p%f,x=d[g>>>2]>>>24-g%4*8&255;v=(v+h[p]+x)%256;var y=h[p];h[p]=h[v],h[v]=y}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,d=this._i,f=this._j,h=0,p=0;p<4;p++){d=(d+1)%256,f=(f+u[d])%256;var v=u[d];u[d]=u[f],u[f]=v,h|=u[(u[d]+u[f])%256]<<24-p*8}return this._i=d,this._j=f,h}n.RC4=i._createHelper(o);var c=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});n.RC4Drop=i._createHelper(c)}(),r.RC4})}(ev)),ev.exports}var tv={exports:{}},OT;function Ede(){return OT||(OT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Rl(),Fl(),So(),gn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)d.call(this);for(var p=0;p<8;p++)g[p]^=v[p+4&7];if(h){var x=h.words,y=x[0],E=x[1],I=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,P=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,D=I>>>16|P&4294901760,A=P<<16|I&65535;g[0]^=I,g[1]^=D,g[2]^=P,g[3]^=A,g[4]^=I,g[5]^=D,g[6]^=P,g[7]^=A;for(var p=0;p<4;p++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),o[0]=p[0]^p[5]>>>16^p[3]<<16,o[1]=p[2]^p[7]>>>16^p[5]<<16,o[2]=p[4]^p[1]>>>16^p[7]<<16,o[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,f[h+v]^=o[v]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)l[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var v=f[p]+h[p],g=v&65535,x=v>>>16,y=((g*g>>>17)+g*x>>>15)+x*x,E=((v&4294901760)*v|0)+((v&65535)*v|0);c[p]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.Rabbit=i._createHelper(u)}(),r.Rabbit})}(tv)),tv.exports}var rv={exports:{}},NT;function _de(){return NT||(NT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Rl(),Fl(),So(),gn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,o=[],l=[],c=[],u=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],v=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)v[g]^=p[g+4&7];if(h){var x=h.words,y=x[0],E=x[1],I=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,P=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,D=I>>>16|P&4294901760,A=P<<16|I&65535;v[0]^=I,v[1]^=D,v[2]^=P,v[3]^=A,v[4]^=I,v[5]^=D,v[6]^=P,v[7]^=A;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),o[0]=p[0]^p[5]>>>16^p[3]<<16,o[1]=p[2]^p[7]>>>16^p[5]<<16,o[2]=p[4]^p[1]>>>16^p[7]<<16,o[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)o[v]=(o[v]<<8|o[v]>>>24)&16711935|(o[v]<<24|o[v]>>>8)&4278255360,f[h+v]^=o[v]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)l[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var v=f[p]+h[p],g=v&65535,x=v>>>16,y=((g*g>>>17)+g*x>>>15)+x*x,E=((v&4294901760)*v|0)+((v&65535)*v|0);c[p]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}n.RabbitLegacy=i._createHelper(u)}(),r.RabbitLegacy})}(rv)),rv.exports}var nv={exports:{}},MT;function bde(){return MT||(MT=1,function(t,e){(function(r,n,s){t.exports=n(qt(),Rl(),Fl(),So(),gn())})(Bt,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const o=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(g,x){let y=x>>24&255,E=x>>16&255,I=x>>8&255,P=x&255,D=g.sbox[0][y]+g.sbox[1][E];return D=D^g.sbox[2][I],D=D+g.sbox[3][P],D}function f(g,x,y){let E=x,I=y,P;for(let D=0;D<o;++D)E=E^g.pbox[D],I=d(g,E)^I,P=E,E=I,I=P;return P=E,E=I,I=P,I=I^g.pbox[o],E=E^g.pbox[o+1],{left:E,right:I}}function h(g,x,y){let E=x,I=y,P;for(let D=o+1;D>1;--D)E=E^g.pbox[D],I=d(g,E)^I,P=E,E=I,I=P;return P=E,E=I,I=P,I=I^g.pbox[1],E=E^g.pbox[0],{left:E,right:I}}function p(g,x,y){for(let A=0;A<4;A++){g.sbox[A]=[];for(let _=0;_<256;_++)g.sbox[A][_]=c[A][_]}let E=0;for(let A=0;A<o+2;A++)g.pbox[A]=l[A]^x[E],E++,E>=y&&(E=0);let I=0,P=0,D=0;for(let A=0;A<o+2;A+=2)D=f(g,I,P),I=D.left,P=D.right,g.pbox[A]=I,g.pbox[A+1]=P;for(let A=0;A<4;A++)for(let _=0;_<256;_+=2)D=f(g,I,P),I=D.left,P=D.right,g.sbox[A][_]=I,g.sbox[A][_+1]=P;return!0}var v=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,x=g.words,y=g.sigBytes/4;p(u,x,y)}},encryptBlock:function(g,x){var y=f(u,g[x],g[x+1]);g[x]=y.left,g[x+1]=y.right},decryptBlock:function(g,x){var y=h(u,g[x],g[x+1]);g[x]=y.left,g[x+1]=y.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(v)}(),r.Blowfish})}(nv)),nv.exports}(function(t,e){(function(r,n,s){t.exports=n(qt(),dm(),Jue(),Zue(),Rl(),ede(),Fl(),EP(),Zy(),tde(),_P(),rde(),nde(),sde(),eE(),ade(),So(),gn(),ide(),ode(),lde(),cde(),ude(),dde(),fde(),hde(),pde(),mde(),gde(),vde(),xde(),yde(),Ede(),_de(),bde())})(Bt,function(r){return r})})(yP);var Sde=yP.exports;const Ou=Ek(Sde);var sv={};class Tde{constructor(){this.encryptionKey=sv.VUE_APP_PDF_ENCRYPTION_KEY||"default-dev-key-replace-in-production",this.encryptionEnabled=sv.VUE_APP_ENABLE_ENCRYPTION!=="false",console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled")}setEncryptionEnabled(e){this.encryptionEnabled=e,console.log(" IEP Encryption:",this.encryptionEnabled?"Enabled":"Disabled"),e||console.warn(" Warning: Encryption disabled in production environment")}encryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.encryptField(i);this.setNestedValue(n,s,a)}}),n}decryptSensitiveFields(e){if(!this.encryptionEnabled)return console.log(" Encryption disabled, returning raw data"),e;const r=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],n=JSON.parse(JSON.stringify(e));return r.forEach(s=>{const i=this.getNestedValue(n,s);if(i){const a=this.decryptField(i);this.setNestedValue(n,s,a)}}),n}encryptField(e){if(!this.encryptionEnabled)return e;try{const r=typeof e=="object"?JSON.stringify(e):String(e);return Ou.AES.encrypt(r,this.encryptionKey).toString()}catch(r){return console.error("Encryption failed:",r),e}}decryptField(e){if(!this.encryptionEnabled)return e;try{const n=Ou.AES.decrypt(e,this.encryptionKey).toString(Ou.enc.Utf8);try{return JSON.parse(n)}catch{return n}}catch(r){return console.error("Decryption failed:",r),e}}getNestedValue(e,r){return r.split(".").reduce((n,s)=>n&&n[s],e)}setNestedValue(e,r,n){const s=r.split("."),i=s.pop(),a=s.reduce((o,l)=>o[l]=o[l]||{},e);return a[i]=n,e}async logAccess(e,r,n){var s,i;try{const a=xt(Ht(ot,"iepAccessLogs"));await br(a,{studentId:e,userId:(s=es.currentUser)==null?void 0:s.uid,userEmail:(i=es.currentUser)==null?void 0:i.email,action:r,fields:n,timestamp:fl(),userAgent:navigator.userAgent,encryptionEnabled:this.encryptionEnabled})}catch(a){console.error("Failed to log access:",a)}}async verifyAccess(e,r="read"){var n,s,i,a,o,l;if(!es.currentUser)return!1;try{const u=(await $r(xt(ot,"users",es.currentUser.uid))).data();if(["admin","administrator","sped_chair"].includes(u.role))return!0;if(u.role==="case_manager"){const f=((i=(s=(n=(await $r(xt(ot,"students",e))).data())==null?void 0:n.app)==null?void 0:s.studentData)==null?void 0:i.caseManagerId)===es.currentUser.uid;return await this.logAccess(e,`access_attempt_${r}`,{success:f,role:"case_manager"}),f}if(u.role==="teacher"&&r==="read"){const f=((l=(o=(a=(await $r(xt(ot,"students",e))).data())==null?void 0:a.app)==null?void 0:o.schedule)==null?void 0:l.periods)||{},h=Object.values(f).includes(es.currentUser.uid);return await this.logAccess(e,`access_attempt_${r}`,{success:h,role:"teacher"}),h}return!1}catch(c){return console.error("Access verification failed:",c),!1}}async getAccessHistory(e){try{const r=Jr(Ht(ot,"iepAccessLogs"),xs("studentId","==",e),xs("timestamp",">=",new Date(Date.now()-2592e6)));return(await fr(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Failed to fetch access history:",r),[]}}maskSensitiveData(e){var n,s,i;const r=JSON.parse(JSON.stringify(e));return(n=r.app)!=null&&n.accommodations&&(r.app.accommodations={assessment:"[RESTRICTED]",instruction:"[RESTRICTED]"}),(i=(s=r.app)==null?void 0:s.schedule)!=null&&i.classServices&&(r.app.schedule.classServices=["[RESTRICTED]"]),r}isEncryptionEnabled(){return this.encryptionEnabled}isValueEncrypted(e){try{return typeof e!="string"?!1:(Ou.AES.decrypt(e,this.encryptionKey).toString(Ou.enc.Utf8),!0)}catch{return!1}}getEncryptionStatus(){return{enabled:this.encryptionEnabled,environment:"production",keyAvailable:!!this.encryptionKey,environmentVariable:sv.VUE_APP_ENABLE_ENCRYPTION}}}const O0=new Tde,Ade={class:"debug-encryption"},wde={class:"debug-header"},Ide={class:"encryption-status"},Cde={class:"status-row"},kde={class:"encryption-toggle"},Dde=["checked"],Pde={key:0,class:"warning"},Rde={class:"status-details"},Fde={class:"status-row"},Ode={class:"status-value"},Nde={class:"status-row"},Mde={class:"status-value"},Bde={class:"status-row"},Lde={class:"status-value"},Ude={key:0,class:"debug-info"},Vde={class:"field-name"},$de={class:"field-value"},jde={class:"value-preview"},Hde={__name:"DebugEncryption",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=t,r=be(()=>O0.getEncryptionStatus()),n=be(()=>O0.isEncryptionEnabled()),s=be(()=>r.value.environment),i=["app.accommodations.assessment","app.accommodations.instruction","app.schedule.classServices","app.studentData.plan"],a=()=>{O0.setEncryptionEnabled(!n.value)},o=(u,d)=>d.split(".").reduce((f,h)=>f&&f[h],u),l=u=>{if(!e.selectedStudent)return!1;const d=o(e.selectedStudent,u);return d?O0.isValueEncrypted(d):!1},c=u=>{if(!e.selectedStudent)return"No data";const d=o(e.selectedStudent,u);if(!d)return"Empty";if(l(u))return d.substring(0,20)+"...";const f=typeof d=="object"?JSON.stringify(d):String(d);return f.length>40?f.substring(0,40)+"...":f};return(u,d)=>(V(),j("div",Ade,[m("div",wde,[d[0]||(d[0]=m("h3",null," IEP Encryption Control",-1)),m("div",{class:ut(["environment-badge",s.value])},ce(s.value.toUpperCase()),3)]),m("div",Ide,[m("div",Cde,[d[1]||(d[1]=m("div",{class:"status-label"},"Status:",-1)),m("div",{class:ut(["status-value",{enabled:n.value}])},ce(n.value?" Enabled":" Disabled"),3)]),m("div",kde,[m("label",null,[m("input",{type:"checkbox",checked:n.value,onChange:a},null,40,Dde),d[2]||(d[2]=Ve(" Toggle Encryption "))]),s.value==="production"&&!n.value?(V(),j("div",Pde,"  Warning: Encryption disabled in production ")):Oe("",!0)]),m("div",Rde,[m("div",Fde,[d[3]||(d[3]=m("div",{class:"status-label"},"Environment:",-1)),m("div",Ode,ce(s.value),1)]),m("div",Nde,[d[4]||(d[4]=m("div",{class:"status-label"},"Encryption Key:",-1)),m("div",Mde,ce(r.value.keyAvailable?" Available":" Missing"),1)]),m("div",Bde,[d[5]||(d[5]=m("div",{class:"status-label"},"ENV Variable:",-1)),m("div",Lde,ce(r.value.environmentVariable||"Not set"),1)])])]),t.selectedStudent?(V(),j("div",Ude,[d[6]||(d[6]=m("h4",null,"Selected Student Data:",-1)),(V(),j(Ne,null,He(i,f=>m("div",{class:"field-status",key:f},[m("div",Vde,ce(f)+":",1),m("div",$de,[m("div",{class:ut(["encryption-status",{encrypted:l(f)}])},ce(l(f)?" Encrypted":" Plain Text"),3),m("div",jde,ce(c(f)),1)])])),64))])):Oe("",!0)]))}},bP=At(Hde,[["__scopeId","data-v-94726d44"]]),Gde={class:"security-control-center"},zde={class:"security-section"},Wde={class:"security-section"},Kde={class:"log-filters"},qde={key:0,class:"log-table"},Xde={key:1,class:"no-logs"},Yde={class:"security-section"},Qde={class:"setting-group"},Jde={class:"setting-group"},Zde={class:"setting-group"},efe={class:"security-section"},tfe={class:"setting-group"},rfe={class:"setting-group"},nfe={class:"setting-group"},sfe={class:"security-section"},afe={class:"ip-list"},ife={class:"ip-input"},ofe={key:0,class:"ip-table"},lfe=["onClick"],cfe={key:1,class:"no-ips"},ufe={class:"security-section"},dfe={class:"alert-settings"},ffe={class:"setting-group"},hfe={class:"setting-group"},pfe={class:"setting-group"},mfe={class:"alert-emails"},gfe={class:"email-input"},vfe={key:0,class:"email-list"},xfe=["onClick"],yfe={__name:"SecurityControlCenter",props:{selectedStudent:{type:Object,default:null}},setup(t){const e=fe([]),r=fe(1),n=fe(30),s=fe(!1),i=fe(!1),a=fe(!0),o=fe(!0),l=fe(5),c=fe([]),u=fe(""),d=fe({failedLogins:!0,unusualAccess:!0,bulkExport:!0}),f=fe([]),h=fe(""),p=async()=>{try{const C=new Date;C.setDate(C.getDate()-r.value);const T=Jr(Ht(ot,"iepAccessLogs"),xs("timestamp",">=",C),Ja("timestamp","desc"),Wi(100)),k=await fr(T);e.value=k.docs.map(N=>({id:N.id,...N.data()}))}catch(C){console.error("Failed to fetch logs:",C)}},v=C=>{if(!C)return"";const T=C.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(T)},g=()=>{console.log("Session timeout updated:",n.value)},x=()=>{console.log("Password policy updated:",s.value)},y=()=>{console.log("MFA policy updated:",i.value)},E=()=>{console.log("Export policy updated:",a.value)},I=()=>{console.log("PDF policy updated:",o.value)},P=()=>{console.log("Login policy updated:",l.value)},D=()=>{u.value&&!c.value.includes(u.value)&&(c.value.push(u.value),u.value="")},A=C=>{c.value=c.value.filter(T=>T!==C)},_=()=>{console.log("Alert settings updated:",d.value)},b=()=>{h.value&&!f.value.includes(h.value)&&(f.value.push(h.value),h.value="")},w=C=>{f.value=f.value.filter(T=>T!==C)};return tr(()=>{p()}),(C,T)=>(V(),j("div",Gde,[m("div",zde,[T[12]||(T[12]=m("h3",null," IEP Data Encryption",-1)),at(bP,{"selected-student":t.selectedStudent},null,8,["selected-student"])]),m("div",Wde,[T[15]||(T[15]=m("h3",null," Access Logs",-1)),m("div",Kde,[je(m("select",{"onUpdate:modelValue":T[0]||(T[0]=k=>r.value=k),class:"form-select"},T[13]||(T[13]=[m("option",{value:"1"},"Last 24 hours",-1),m("option",{value:"7"},"Last 7 days",-1),m("option",{value:"30"},"Last 30 days",-1)]),512),[[vr,r.value]]),m("button",{onClick:p,class:"btn btn-secondary"}," Refresh ")]),e.value.length?(V(),j("div",qde,[m("table",null,[T[14]||(T[14]=m("thead",null,[m("tr",null,[m("th",null,"Time"),m("th",null,"User"),m("th",null,"Action"),m("th",null,"Student"),m("th",null,"Status")])],-1)),m("tbody",null,[(V(!0),j(Ne,null,He(e.value,k=>(V(),j("tr",{key:k.id},[m("td",null,ce(v(k.timestamp)),1),m("td",null,ce(k.userEmail),1),m("td",null,ce(k.action),1),m("td",null,ce(k.studentId),1),m("td",{class:ut(k.success?"success":"error")},ce(k.success?"":""),3)]))),128))])])])):(V(),j("div",Xde," No access logs found for selected period "))]),m("div",Yde,[T[20]||(T[20]=m("h3",null," Session Security",-1)),m("div",Qde,[m("label",null,[T[16]||(T[16]=Ve(" Auto Logout Timer (minutes): ")),je(m("input",{type:"number","onUpdate:modelValue":T[1]||(T[1]=k=>n.value=k),min:"5",max:"120",onChange:g},null,544),[[Ct,n.value]])]),T[17]||(T[17]=m("div",{class:"setting-description"}," Users will be automatically logged out after this period of inactivity ",-1))]),m("div",Jde,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[2]||(T[2]=k=>s.value=k),onChange:x},null,544),[[St,s.value]]),T[18]||(T[18]=Ve(" Enforce Password Change Every 90 Days "))])]),m("div",Zde,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[3]||(T[3]=k=>i.value=k),onChange:y},null,544),[[St,i.value]]),T[19]||(T[19]=Ve(" Require Two-Factor Authentication for Admin Access "))])])]),m("div",efe,[T[24]||(T[24]=m("h3",null," Data Access Controls",-1)),m("div",tfe,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[4]||(T[4]=k=>a.value=k),onChange:E},null,544),[[St,a.value]]),T[21]||(T[21]=Ve(" Restrict Data Export to Admins Only "))])]),m("div",rfe,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[5]||(T[5]=k=>o.value=k),onChange:I},null,544),[[St,o.value]]),T[22]||(T[22]=Ve(" Add Watermark to Exported PDFs "))])]),m("div",nfe,[m("label",null,[T[23]||(T[23]=Ve(" Maximum Failed Login Attempts: ")),je(m("input",{type:"number","onUpdate:modelValue":T[6]||(T[6]=k=>l.value=k),min:"3",max:"10",onChange:P},null,544),[[Ct,l.value]])])])]),m("div",sfe,[T[25]||(T[25]=m("h3",null," IP Access Control",-1)),m("div",afe,[m("div",ife,[je(m("input",{type:"text","onUpdate:modelValue":T[7]||(T[7]=k=>u.value=k),placeholder:"Enter IP address or range"},null,512),[[Ct,u.value]]),m("button",{onClick:D,class:"btn btn-primary"}," Add IP ")]),c.value.length?(V(),j("div",ofe,[(V(!0),j(Ne,null,He(c.value,k=>(V(),j("div",{key:k,class:"ip-row"},[m("span",null,ce(k),1),m("button",{onClick:N=>A(k),class:"btn btn-danger btn-sm"}," Remove ",8,lfe)]))),128))])):(V(),j("div",cfe," No IP restrictions configured "))])]),m("div",ufe,[T[30]||(T[30]=m("h3",null," Security Alerts",-1)),m("div",dfe,[m("div",ffe,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[8]||(T[8]=k=>d.value.failedLogins=k),onChange:_},null,544),[[St,d.value.failedLogins]]),T[26]||(T[26]=Ve(" Alert on Multiple Failed Login Attempts "))])]),m("div",hfe,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[9]||(T[9]=k=>d.value.unusualAccess=k),onChange:_},null,544),[[St,d.value.unusualAccess]]),T[27]||(T[27]=Ve(" Alert on Unusual Access Patterns "))])]),m("div",pfe,[m("label",null,[je(m("input",{type:"checkbox","onUpdate:modelValue":T[10]||(T[10]=k=>d.value.bulkExport=k),onChange:_},null,544),[[St,d.value.bulkExport]]),T[28]||(T[28]=Ve(" Alert on Bulk Data Exports "))])]),m("div",mfe,[T[29]||(T[29]=m("h4",null,"Alert Recipients:",-1)),m("div",gfe,[je(m("input",{type:"email","onUpdate:modelValue":T[11]||(T[11]=k=>h.value=k),placeholder:"Enter email address"},null,512),[[Ct,h.value]]),m("button",{onClick:b,class:"btn btn-primary"}," Add ")]),f.value.length?(V(),j("div",vfe,[(V(!0),j(Ne,null,He(f.value,k=>(V(),j("div",{key:k,class:"email-row"},[m("span",null,ce(k),1),m("button",{onClick:N=>w(k),class:"btn btn-danger btn-sm"}," Remove ",8,xfe)]))),128))])):Oe("",!0)])])])]))}},Efe=At(yfe,[["__scopeId","data-v-cabb716e"]]),_fe={class:"health-check"},bfe={class:"status-header"},Sfe={class:"refresh-button"},Tfe=["disabled"],Afe={key:0,class:"last-check"},wfe={class:"status-icon"},Ife={class:"status-info"},Cfe={class:"services-grid"},kfe={class:"service-header"},Dfe={class:"service-icon"},Pfe={class:"service-name"},Rfe={class:"service-status"},Ffe={key:0,class:"service-latency"},Ofe={key:1,class:"service-message"},Nfe={key:0,class:"recent-issues"},Mfe={class:"issue-list"},Bfe={class:"issue-time"},Lfe={class:"issue-service"},Ufe={class:"issue-description"},Vfe={__name:"SystemHealthCheck",setup(t){const e=fe(!1),r=fe(null),n=fe("checking"),s=fe([{name:"Authentication",icon:"",status:"checking",latency:null},{name:"Database",icon:"",status:"checking",latency:null},{name:"Storage",icon:"",status:"checking",latency:null},{name:"Functions",icon:"",status:"checking",latency:null}]),i=fe([]),a=v=>{switch(v){case"operational":return"Fully Operational";case"degraded":return"Performance Issues";case"down":return"Service Unavailable";case"checking":return"Checking Status...";default:return"Unknown Status"}},o=v=>{if(!v)return"";const g=v instanceof Date?v:v.toDate();return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}).format(g)},l=async()=>{const v=Bd(),g=performance.now();try{return await NN(v),{status:"operational",latency:Math.round(performance.now()-g)}}catch(x){return console.error("Auth check failed:",x),{status:"down",message:"Authentication service is not responding"}}},c=async()=>{const v=_o(),g=performance.now();try{const x=Jr(Ht(v,"health_checks"),Wi(1));return await fr(x),{status:"operational",latency:Math.round(performance.now()-g)}}catch(x){return console.error("Database check failed:",x),{status:"down",message:"Database service is not responding"}}},u=async()=>{const v=J4(),g=performance.now();try{return await n1(v,"health_check.txt").toString(),{status:"operational",latency:Math.round(performance.now()-g)}}catch(x){return console.error("Storage check failed:",x),{status:"down",message:"Storage service is not responding"}}},d=async()=>{const v=Ic(),g=performance.now();try{return await Ta(v,"healthCheck")(),{status:"operational",latency:Math.round(performance.now()-g)}}catch(x){return console.error("Functions check failed:",x),{status:"down",message:"Cloud Functions service is not responding"}}},f=(v,g)=>{const x=s.value.find(y=>y.name===v);x&&(x.status=g.status,x.latency=g.latency,x.message=g.message)},h=()=>{const v=s.value.map(g=>g.status);return v.every(g=>g==="operational")?"operational":v.some(g=>g==="down")?"down":"degraded"},p=async()=>{if(!e.value){e.value=!0,r.value=new Date;try{s.value.forEach(I=>{I.status="checking",I.latency=null,I.message=null});const[v,g,x,y]=await Promise.all([l(),c(),u(),d()]);f("Authentication",v),f("Database",g),f("Storage",x),f("Functions",y),n.value=h();const E=s.value.filter(I=>I.status!=="operational").map(I=>({id:Date.now()+Math.random(),service:I.name,timestamp:new Date,description:I.message||`Service is ${I.status}`}));E.length&&(i.value=[...E,...i.value].slice(0,5))}catch(v){console.error("Health check failed:",v),n.value="down"}finally{e.value=!1}}};return tr(()=>{p(),setInterval(p,5*60*1e3)}),(v,g)=>(V(),j("div",_fe,[m("div",bfe,[g[0]||(g[0]=m("h3",null,"System Health Status",-1)),m("div",Sfe,[m("button",{onClick:p,disabled:e.value,class:"btn btn-primary"},ce(e.value?"Checking...":"Check Now"),9,Tfe),r.value?(V(),j("span",Afe," Last check: "+ce(o(r.value)),1)):Oe("",!0)])]),m("div",{class:ut(["status-card overall",n.value])},[m("div",wfe,ce(n.value==="operational"?"":n.value==="degraded"?"":""),1),m("div",Ife,[g[1]||(g[1]=m("h4",null,"Overall System Status",-1)),m("p",null,ce(a(n.value)),1)])],2),m("div",Cfe,[(V(!0),j(Ne,null,He(s.value,x=>(V(),j("div",{key:x.name,class:ut(["service-card",x.status])},[m("div",kfe,[m("span",Dfe,ce(x.icon),1),m("span",Pfe,ce(x.name),1)]),m("div",Rfe,ce(x.status==="operational"?"":x.status==="degraded"?"":"")+" "+ce(a(x.status)),1),x.latency!==void 0?(V(),j("div",Ffe," Latency: "+ce(x.latency)+"ms ",1)):Oe("",!0),x.message?(V(),j("div",Ofe,ce(x.message),1)):Oe("",!0)],2))),128))]),i.value.length?(V(),j("div",Nfe,[g[2]||(g[2]=m("h4",null,"Recent Issues",-1)),m("div",Mfe,[(V(!0),j(Ne,null,He(i.value,x=>(V(),j("div",{key:x.id,class:"issue-item"},[m("div",Bfe,ce(o(x.timestamp)),1),m("div",Lfe,ce(x.service),1),m("div",Ufe,ce(x.description),1)]))),128))])])):Oe("",!0)]))}},$fe=At(Vfe,[["__scopeId","data-v-9610f287"]]),jfe={name:"AdminView",components:{TabBar:TG,UserAddForm:OG,UserTable:nz,PermissionsMatrix:yk,AdminStudents:Rz,StudentBulkImporter:NW,AdminPermissions:LW,SeisImport:rK,AeriesImport:fK,AeriesAPIConnector:_q,AppSettings:mX,AdminAideAssignment:Tk,AdminTimeTable:aP,AdminAideSchedule:vP,AdminBackupRestore:xP,AdminTeacherFeedback:uce,TestingLinks:uue,AdminDashboard:Kue,DebugEncryption:bP,SecurityControlCenter:Efe,SystemHealthCheck:$fe},setup(){const t=Al(),e=eU(),r=fe("dashboard"),n=fe("dashboard"),{students:s,fetchStudents:i}=Ua(),{users:a,fetchUsers:o}=pa();tr(async()=>{try{await Promise.all([i(),o()]);const I=e.query.category;I&&u(I)}catch(I){console.error("Error loading data:",I)}});const l=[{key:"dashboard",label:"Dashboard",category:"dashboard"},{key:"usersAdd",label:"Add Users",category:"users-students"},{key:"usersEdit",label:"Manage Users",category:"users-students"},{key:"students",label:"Students",category:"users-students"},{key:"addStudents",label:"Add Students",category:"users-students"},{key:"aide-assignment",label:"Aide Assignment",category:"aide-management"},{key:"aide-schedule",label:"Aide Schedule",category:"aide-management"},{key:"time-table",label:"Time Table",category:"aide-management"},{key:"seis",label:"SEIS Import",category:"data-integration"},{key:"aeries",label:"Aeries API & Import",category:"data-integration"},{key:"testing-links",label:"Testing Links",category:"data-integration"},{key:"teacher-feedback",label:"Teacher Feedback Forms",category:"data-integration"},{key:"backup-restore",label:"Backup & Restore",category:"data-integration"},{key:"permissions",label:"Permissions",category:"system-config"},{key:"settings",label:"App Settings",category:"system-config"},{key:"iep-security",label:"IEP Security",category:"system-config"},{key:"security",label:"Security Controls",category:"system-config"},{key:"system-health",label:"System Health",category:"monitoring"}],c=I=>l.filter(P=>P.category===I),u=I=>{n.value=I;const P=c(I);P.length>0&&(r.value=P[0].key)},d=I=>{r.value=I},f=()=>{t.push("/students")},h=()=>{t.push("/admin/dashboard")},p=I=>{u(I)},v=()=>{r.value="students"},g=async I=>{console.log("Students imported:",I);try{await i()}catch(P){console.error("Failed to refresh students after import:",P)}},{isDebugMenuVisible:x,canShowDebugMenu:y,toggleDebugMenu:E}=vy();return{activeTab:r,activeCategory:n,tabs:l,students:s,userMap:a,getTabsForCategory:c,setActiveCategory:u,handleTabChange:d,goToStudents:f,goToDashboard:h,handleGoToCategory:p,handleBulkImporterClose:v,handleStudentsImported:g,isDebugMenuVisible:x,canShowDebugMenu:y,toggleDebugMenu:E}}},Hfe={class:"admin-header"},Gfe={class:"admin-nav"},zfe={class:"admin-actions"},Wfe={key:0,class:"sub-tab-container"},Kfe={class:"admin-section"},qfe={key:0,class:"admin-section"},Xfe={key:1,class:"admin-section"},Yfe={key:2,class:"admin-section"},Qfe={key:3,class:"admin-section"},Jfe={key:4,class:"admin-section"},Zfe={key:5,class:"admin-section"},e0e={key:6,class:"admin-section"},t0e={key:7,class:"admin-section"},r0e={key:8,class:"admin-section"},n0e={key:9,class:"admin-section"},s0e={key:10,class:"admin-section"},a0e={key:11,class:"admin-section"},i0e={key:12,class:"admin-section"},o0e={key:13,class:"admin-section"},l0e={key:14,class:"admin-section"},c0e={key:15,class:"admin-section"},u0e={key:16,class:"admin-section"},d0e={key:17,class:"admin-section"};function f0e(t,e,r,n,s,i){const a=Mr("TabBar"),o=Mr("AdminDashboard"),l=Mr("UserAddForm"),c=Mr("UserTable"),u=Mr("AdminStudents"),d=Mr("StudentBulkImporter"),f=Mr("AdminPermissions"),h=Mr("AdminAideAssignment"),p=Mr("AdminAideSchedule"),v=Mr("AdminTimeTable"),g=Mr("SeisImport"),x=Mr("AeriesAPIConnector"),y=Mr("AeriesImport"),E=Mr("AppSettings"),I=Mr("TestingLinks"),P=Mr("AdminTeacherFeedback"),D=Mr("AdminBackupRestore"),A=Mr("DebugEncryption"),_=Mr("SecurityControlCenter"),b=Mr("SystemHealthCheck");return V(),j("div",null,[m("div",Hfe,[e[8]||(e[8]=m("h1",null,"Admin Panel",-1)),m("div",Gfe,[m("button",{onClick:e[0]||(e[0]=w=>n.setActiveCategory("dashboard")),class:ut([{active:n.activeCategory==="dashboard"},"category-btn"])}," Dashboard ",2),m("button",{onClick:e[1]||(e[1]=w=>n.setActiveCategory("users-students")),class:ut([{active:n.activeCategory==="users-students"},"category-btn"])}," User & Student Management ",2),m("button",{onClick:e[2]||(e[2]=w=>n.setActiveCategory("aide-management")),class:ut([{active:n.activeCategory==="aide-management"},"category-btn"])}," Aide Management ",2),m("button",{onClick:e[3]||(e[3]=w=>n.setActiveCategory("data-integration")),class:ut([{active:n.activeCategory==="data-integration"},"category-btn"])}," Data & Integration ",2),m("button",{onClick:e[4]||(e[4]=w=>n.setActiveCategory("system-config")),class:ut([{active:n.activeCategory==="system-config"},"category-btn"])}," System Configuration ",2)]),m("div",zfe,[n.canShowDebugMenu?(V(),j("button",{key:0,onClick:e[5]||(e[5]=(...w)=>n.toggleDebugMenu&&n.toggleDebugMenu(...w)),class:"debug-btn"},"  "+ce(n.isDebugMenuVisible?"Hide":"Show")+" Debug ",1)):Oe("",!0),m("button",{onClick:e[6]||(e[6]=(...w)=>n.goToStudents&&n.goToStudents(...w)),class:"return-btn"},e[7]||(e[7]=[m("span",null,"",-1),Ve(" Return to Students ")]))])]),n.activeCategory?(V(),j("div",Wfe,[at(a,{tabs:n.getTabsForCategory(n.activeCategory),"active-tab":n.activeTab,onTabChange:n.handleTabChange},null,8,["tabs","active-tab","onTabChange"])])):Oe("",!0),m("div",Kfe,[n.activeTab==="dashboard"?(V(),j("div",qfe,[at(o,{onGoToCategory:n.handleGoToCategory,onGoToStudents:n.goToStudents},null,8,["onGoToCategory","onGoToStudents"])])):Oe("",!0),n.activeTab==="usersAdd"?(V(),j("div",Xfe,[at(l)])):Oe("",!0),n.activeTab==="usersEdit"?(V(),j("div",Yfe,[at(c)])):Oe("",!0),n.activeTab==="students"?(V(),j("div",Qfe,[at(u)])):Oe("",!0),n.activeTab==="addStudents"?(V(),j("div",Jfe,[at(d,{onClose:n.handleBulkImporterClose,onImported:n.handleStudentsImported},null,8,["onClose","onImported"])])):Oe("",!0),n.activeTab==="permissions"?(V(),j("div",Zfe,[at(f)])):Oe("",!0),n.activeTab==="aide-assignment"?(V(),j("div",e0e,[at(h)])):Oe("",!0),n.activeTab==="aide-schedule"?(V(),j("div",t0e,[at(p)])):Oe("",!0),n.activeTab==="time-table"?(V(),j("div",r0e,[at(v)])):Oe("",!0),n.activeTab==="seis"?(V(),j("div",n0e,[at(g)])):Oe("",!0),n.activeTab==="aeries"?(V(),j("div",s0e,[at(x),e[9]||(e[9]=m("hr",{style:{margin:"2rem 0",border:"1px solid #ddd"}},null,-1)),at(y)])):Oe("",!0),n.activeTab==="settings"?(V(),j("div",a0e,[at(E)])):Oe("",!0),n.activeTab==="testing-links"?(V(),j("div",i0e,[at(I,{students:n.students,userMap:n.userMap},null,8,["students","userMap"])])):Oe("",!0),n.activeTab==="teacher-feedback"?(V(),j("div",o0e,[at(P)])):Oe("",!0),n.activeTab==="backup-restore"?(V(),j("div",l0e,[at(D)])):Oe("",!0),n.activeTab==="iep-security"?(V(),j("div",c0e,[e[10]||(e[10]=m("h2",null,"IEP Data Security",-1)),at(A,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Oe("",!0),n.activeTab==="security"?(V(),j("div",u0e,[at(_,{"selected-student":t.currentStudent},null,8,["selected-student"])])):Oe("",!0),n.activeTab==="system-health"?(V(),j("div",d0e,[at(b)])):Oe("",!0)])])}const h0e=At(jfe,[["render",f0e],["__scopeId","data-v-4bebdd05"]]),p0e={class:"aide-schedule-view"},m0e={class:"header"},g0e={class:"user-info"},v0e={class:"content"},x0e={key:0,class:"error-message"},y0e={key:1,class:"error-message"},E0e={key:2,class:"loading"},_0e={key:3,class:"schedule-container"},b0e={class:"schedule-display"},S0e={class:"schedule-timeline"},T0e={class:"time-info"},A0e={class:"time"},w0e={class:"type-badge"},I0e={class:"assignment-info"},C0e={key:0},k0e={key:1,class:"no-assignment"},D0e={class:"schedule-editor"},P0e={class:"editor-content"},R0e={class:"time-block-header"},F0e={class:"time"},O0e={class:"type-badge"},N0e={class:"assignment-editor"},M0e=["onUpdate:modelValue"],B0e=["value"],L0e=["value"],U0e={class:"editor-actions"},V0e=["disabled"],$0e={key:0},j0e={key:1},H0e={__name:"AideScheduleView",setup(t){const e=Al(),r=Ei(),{userList:n,fetchUsers:s}=pa(),{students:i,fetchStudents:a}=Ua(),{loadAppSettings:o,saveAppSettings:l}=ma(),c=fe(!0),u=fe(!1),d=fe({}),f=fe({}),h=be(()=>{var D;return((D=r.currentUser)==null?void 0:D.role)==="paraeducator"}),p=be(()=>{var D;return(D=r.currentUser)==null?void 0:D.uid}),v=be(()=>{var D;return((D=n.value)==null?void 0:D.filter(A=>A.role==="teacher"))||[]});async function g(){var D;try{const A=await $r(xt(ot,"app_settings","global"));if(A.exists()){const _=A.data();d.value=((D=_.timeTables)==null?void 0:D[0])||_.timeTable||{}}}catch(A){console.error("Error loading time table:",A)}}function x(){return d.value.schedule?d.value.schedule.map((D,A)=>({...D,id:D.id||`block-${A}`,assignments:f.value[D.id||`block-${A}`]||{}})):[]}function y(){return x().map(A=>{const _=A.assignments[p.value];let b="";if(_){if(_.startsWith("teacher:")){const w=_.replace("teacher:",""),C=v.value.find(T=>T.id===w);b=C?C.name||C.email:"Unknown Teacher"}else if(_.startsWith("student:")){const w=_.replace("student:",""),C=i.value.find(T=>T.id===w);b=C?`${ct(C,"firstName")} ${ct(C,"lastName")}`:"Unknown Student"}}return{...A,assignment:b}})}async function E(){try{u.value=!0;const D=await o(),A={...D.detailedAideSchedule};x().forEach(b=>{A[b.id]||(A[b.id]={}),A[b.id][p.value]=b.assignments[p.value]});const _={...D,detailedAideSchedule:A};await l(_),console.log("My schedule saved successfully")}catch(D){console.error("Error saving my schedule:",D)}finally{u.value=!1}}function I(){r.logout(),e.push("/login")}async function P(){try{c.value=!0,await Promise.all([s(),a(),o(),g()]);const D=await $r(xt(ot,"app_settings","global"));if(D.exists()){const A=D.data();f.value=A.detailedAideSchedule||{}}c.value=!1}catch(D){console.error("Error loading aide schedule data:",D),c.value=!1}}return tr(P),(D,A)=>{var _,b;return V(),j("div",p0e,[m("div",m0e,[A[2]||(A[2]=m("h1",null,"My Schedule",-1)),m("div",g0e,[m("span",null,ce(((_=me(r).currentUser)==null?void 0:_.name)||((b=me(r).currentUser)==null?void 0:b.email)),1),m("button",{onClick:I,class:"btn btn-secondary"}," Logout ")])]),m("div",v0e,[me(r).currentUser?h.value?c.value?(V(),j("div",E0e," Loading your schedule... ")):(V(),j("div",_0e,[m("div",b0e,[A[7]||(A[7]=m("h2",null,"My Daily Schedule",-1)),m("div",S0e,[(V(!0),j(Ne,null,He(y(),w=>(V(),j("div",{key:w.id,class:ut(["time-block",w.type])},[m("div",T0e,[m("span",A0e,ce(w.startTime)+" - "+ce(w.endTime),1),m("span",w0e,ce(w.type),1)]),m("div",I0e,[w.assignment?(V(),j("span",C0e,ce(w.assignment),1)):(V(),j("span",k0e,"No Assignment"))])],2))),128))])]),m("div",D0e,[A[9]||(A[9]=m("h2",null,"Edit My Schedule",-1)),m("div",P0e,[(V(!0),j(Ne,null,He(x(),w=>(V(),j("div",{key:w.id,class:"time-block-editor"},[m("div",R0e,[m("span",F0e,ce(w.startTime)+" - "+ce(w.endTime),1),m("span",O0e,ce(w.type),1)]),m("div",N0e,[je(m("select",{"onUpdate:modelValue":C=>w.assignments[p.value]=C,class:"assignment-select"},[A[8]||(A[8]=m("option",{value:""},"No Assignment",-1)),(V(!0),j(Ne,null,He(v.value,C=>(V(),j("option",{key:C.id,value:`teacher:${C.id}`},ce(C.name||C.email),9,B0e))),128)),(V(!0),j(Ne,null,He(me(i),C=>(V(),j("option",{key:C.id,value:`student:${C.id}`},ce(me(ct)(C,"firstName"))+" "+ce(me(ct)(C,"lastName")),9,L0e))),128))],8,M0e),[[vr,w.assignments[p.value]]])])]))),128))]),m("div",U0e,[m("button",{onClick:E,class:"btn btn-primary",disabled:u.value},[u.value?(V(),j("span",$0e,"")):(V(),j("span",j0e,"")),Ve(" "+ce(u.value?"Saving...":"Save My Schedule"),1)],8,V0e)])])])):(V(),j("div",y0e,[A[5]||(A[5]=m("h2",null,"Access Denied",-1)),A[6]||(A[6]=m("p",null,"This page is only available to paraeducators.",-1)),m("button",{onClick:A[1]||(A[1]=w=>me(e).push("/")),class:"btn btn-primary"},"Go Home")])):(V(),j("div",x0e,[A[3]||(A[3]=m("h2",null,"Authentication Required",-1)),A[4]||(A[4]=m("p",null,"Please log in to access this page.",-1)),m("button",{onClick:A[0]||(A[0]=w=>me(e).push("/login")),class:"btn btn-primary"},"Go to Login")]))])])}}},G0e=At(H0e,[["__scopeId","data-v-f2c7a0cd"]]);function z0e(t){const{waitForAuthInit:e}=f1();e.then(()=>{t.beforeEach((r,n,s)=>{const{currentUser:i}=f1(),a=r.meta.requiresAuth,o=r.meta.allowedRoles;a&&!i.value?s({name:"Login"}):a&&i.value&&!i.value.role?(console.log(`User ${i.value.uid} exists in Auth but has no role - redirecting to login for role assignment`),s({name:"Login"})):a&&o&&i.value&&!o.includes(i.value.role)?(console.warn(`User with role '${i.value.role}' tried to access restricted route: ${r.path}`),s({name:"Home"})):s()})})}const W0e=[{path:"/login",name:"Login",component:yG},{path:"/",name:"Home",component:U2,meta:{requiresAuth:!0,allowedRoles:C2}},{path:"/students",name:"Students",component:U2,meta:{requiresAuth:!0,allowedRoles:C2}},{path:"/admin",name:"Admin",component:h0e,meta:{requiresAuth:!0,allowedRoles:wu}},{path:"/admin/aide-assignment",name:"AdminAideAssignment",component:Tk,meta:{requiresAuth:!0,allowedRoles:wu}},{path:"/admin/time-table",name:"AdminTimeTable",component:aP,meta:{requiresAuth:!0,allowedRoles:wu}},{path:"/admin/aide-schedule",name:"AdminAideSchedule",component:vP,meta:{requiresAuth:!0,allowedRoles:wu}},{path:"/admin/backup-restore",name:"AdminBackupRestore",component:xP,meta:{requiresAuth:!0,allowedRoles:wu}},{path:"/aide-schedule",name:"AideSchedule",component:G0e,meta:{requiresAuth:!0,allowedRoles:["paraeducator"]}},{path:"/testing",name:"Testing",component:()=>kU(()=>import("./TestingView-D7Czvft-.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,allowedRoles:["admin","administrator","sped_chair","administrator_504_CM"]}}],SP=J7({history:I7("/"),routes:W0e});z0e(SP);const av=Eh(wU),K0e=y8();tk().then(()=>{console.log(" Firebase initialized, mounting app..."),av.use(SP),av.use(K0e),av.mount("#app"),console.log(" App mounted successfully")}).catch(t=>{console.error(" Failed to initialize Firebase:",t)});export{Ne as F,xk as S,At as _,xt as a,Gc as b,Ht as c,ot as d,iy as e,ma as f,fr as g,j as h,m as i,Oe as j,Ve as k,me as l,He as m,at as n,tr as o,$W as p,jW as q,fe as r,br as s,ce as t,Pf as u,V as v};
